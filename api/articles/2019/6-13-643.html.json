{"title":"ufw防火墙命令基础讲解","slug":"系统运维/Linux/常用命令/防火墙类命令/ufw防火墙基础讲解","date":"2019-06-13T12:35:30.000Z","updated":"2022-04-13T02:20:11.612Z","url":"2019/6-13-643.html","path":"api/articles/2019/6-13-643.html.json","covers":null,"content":"<p>[TOC]</p>\n<a id=\"more\"></a>\n<p>描述: UFW(Uncomplicated Firewall)在Ubuntu20.04操作系统中都是默认安装了，它是一款轻量化的工具，主要用于对输入输出的流量进行监控。</p>\n<p>ufw 安装: 如果没有安装请用下面的命令安装<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt install ufw</span><br></pre></td></tr></table></figure></p>\n<p>ufw 语法:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 服务&amp;端口开发和拒绝</span></span><br><span class=\"line\">sudo ufw allow | deny [service]</span><br></pre></td></tr></table></figure>\n<p>示例1.防火墙状态查看<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># (0) 查看已经定义的ufw规则</span></span><br><span class=\"line\">ufw status</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># (1) 正常情况安装以后应该是默认禁止状态的,此处我已开启防火墙</span></span><br><span class=\"line\">sudo ufw status verbose</span><br><span class=\"line\">Status: inactive</span><br></pre></td></tr></table></figure></p>\n<p>示例2.防火墙开启与禁用<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo ufw <span class=\"built_in\">enable</span>  <span class=\"comment\"># 启用</span></span><br><span class=\"line\">sudo ufw <span class=\"built_in\">disable</span> <span class=\"comment\"># 禁用</span></span><br></pre></td></tr></table></figure></p>\n<p>示例3.外来访问全部默认允许/拒绝<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ufw default allow/deny</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"0x02-实际使用\"><a href=\"#0x02-实际使用\" class=\"headerlink\" title=\"0x02 实际使用\"></a>0x02 实际使用</h2><h3 id=\"基础示例\"><a href=\"#基础示例\" class=\"headerlink\" title=\"基础示例\"></a>基础示例</h3><p><strong>1) 防火墙开放或者禁用访问某一端口</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 允许/禁用外部访问53端口(tcp/udp)以及允许外部访问3690端口(svn)</span></span><br><span class=\"line\">sudo ufw allow/deny 53,3690 </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 允许此IP访问所有的本机端口</span></span><br><span class=\"line\">sudo ufw allow from 192.168.1.111 </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 允许指定的IP段访问特定端口, 如允许自192.168.0.0/24的tcp封包访问本机的22端口。</span></span><br><span class=\"line\">sudo ufw allow proto tcp from 192.168.0.0/24 to any port 22  </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 禁止来自192.168.0.0/24的udp封包访问本机的53端口。</span></span><br><span class=\"line\">sudo ufw deny proto tcp from 192.168.0.0/24 to any port 53</span><br></pre></td></tr></table></figure></p>\n<p><strong>2) 删除防火墙指定的规则</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 删除上面建立的某条规则，比如smtp服务端口(25)，删除svn端口</span></span><br><span class=\"line\">sudo ufw delete allow smtp</span><br><span class=\"line\">sudo ufw delete allow 3690 </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 删除以前定义的\"允许/拒绝访问20端口\"的规则</span></span><br><span class=\"line\">sudo ufw delete allow/deny 20</span><br></pre></td></tr></table></figure></p>\n","comments":true,"excerpt":"[TOC]","categories":[{"name":"Linux命令","path":"api/categories/Linux命令.json"}],"tags":[{"name":"ufw","path":"api/tags/ufw.json"},{"name":"Linux防火墙","path":"api/tags/Linux防火墙.json"}]}