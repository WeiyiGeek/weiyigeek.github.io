<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="content-language" content="zh-CN"/>
    <meta name="author" content="WeiyiGeek" />
    <meta name="msvalidate.01" content="5C552FB1D885E0E11D2957EC958C8018" />
    <meta name="shenma-site-verification" content="4c655e91c76be0a93c1b6954c666c9d6_1649049085"/>
    <meta name="bytedance-verification-code" content="lKs4FqwCHSJ3A/c5tT7X" />
    <meta name="sogou_site_verification" content="OC65iET6Bk" />
    
    <title>ğŸŒ 9.Goç¼–ç¨‹å¿«é€Ÿå…¥é—¨å­¦ä¹ |WeiyiGeek Blog|å”¯ä¸€æå®¢Geek-ITç½‘ç»œå®‰å…¨è¿ç»´å¼€å‘æŠ€æœ¯çŸ¥è¯†åˆ†äº«-åšå®¢ç«™ç‚¹</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    
    <meta name="keywords" content="Go">
    <meta name="Description" content="WeiyiGeek-å”¯ä¸€æå®¢åšå®¢ç«™ç‚¹,å…³æ³¨äºç½‘ç»œå®‰å…¨è¿ç»´,Webå®‰å…¨å¼€å‘,IOTç‰©è”ç½‘å®‰å…¨å¼€å‘,åº”ç”¨å¼€å‘,åˆ†äº«æŠ€æœ¯å­¦ä¹ çŸ¥è¯†ä¸å…¥å‘è§£å†³,æå‡ç½‘ç»œå®‰å…¨æŠ€æœ¯ä¸è‡ªèº«æŠ€æœ¯èƒ½åŠ›,ç«‹å¿—ç»´æŠ¤å¤§ä¼—ç½‘ç»œå®‰å…¨ä¸ºå·±ä»»,åšä¸€ä¸ªå¯¹å›½å®¶æœ‰ç”¨çš„äºº,ä¸ºå®ç°ä¸­åæ°‘æ—ä¼Ÿå¤§å¤å…´çš„ä¸­å›½æ¢¦ä¸æ‡ˆå¥‹æ–—">
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="/css/jquery/3.5.2-jquery.fancybox.min.css?v=1.6.6" />
    <link rel="stylesheet" href="/css/style.css?v=1.6.6">
    <!--  -->
     <script type="text/javascript" src="/js/custom/articlecost.js?v=1.6.6"></script> 
    <link rel="stylesheet" href="/css/third-party/gitalk.css?v=1.6.6"> 
    <script type="text/javascript">
        // Data Center
        var DC = {
            reward:	true,
            lv: JSON.parse('{"enable":false,"app_id":null,"app_key":null,"icon":true}'),
            v: JSON.parse('{"enable":false,"appid":null,"appkey":null,"notify":true,"verify":true,"placeholder":"give me some sugers plz...","avatar":"wavatar"}')
        };
    </script>
    <script type="text/javascript">window.lazyScripts=[];</script>
<meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="WeiyiGeek Blog" type="application/atom+xml">
</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="">
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap">
      
      <img src="/img/brand.jpg" class="brand-bg" alt="WeiyiGeek-backgroud">
      
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg" alt="WeiyiGeek-å¤´åƒ">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">WeiyiGeek</h5>
          <a href="mailto:master@weiyigeek.top" title="master@weiyigeek.top" class="mail">
            <span>m</span><span>a</span><span>s</span><span>t</span><span>e</span><span>r</span><span>@</span><span>w</span><span>e</span><span>i</span><span>y</span><span>i</span><span>g</span><span>e</span><span>e</span><span>k</span><span>.</span><span>t</span><span>o</span><span>p</span>
          </a>
        </hgroup>
        
        <ul class="menu-link">
          
              <li>
                <a href="https://weiyigeek.top/img/wechat-search.png" target="_blank">
                  <i class="icon icon-lg icon-wechat"></i>
                </a>
              </li>
            
              <li>
                <a href="https://github.com/weiyigeek" target="_blank">
                  <i class="icon icon-lg icon-github"></i>
                </a>
              </li>
            
              <li>
                <a href="https://t.me/WeiyiGeek" target="_blank">
                  <i class="icon icon-lg icon-telegram"></i>
                </a>
              </li>
            
              <li>
                <a href="https://twitter.com/WeiyiGeek" target="_blank">
                  <i class="icon icon-lg icon-twitter"></i>
                </a>
              </li>
            
              <li>
                <a href="https://weibo.com/615643678" target="_blank">
                  <i class="icon icon-lg icon-weibo"></i>
                </a>
              </li>
            
        </ul>
        
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                é¦–é¡µ
              </a>
            </li>
        
            <li class="">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                æ–‡ç« åˆ†ç±»
              </a>
            </li>
        
            <li class="">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                æ–‡ç« æ ‡ç­¾
              </a>
            </li>
        
            <li class="">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                æ–‡ç« å½’æ¡£
              </a>
            </li>
        
            <li class="">
              <a href="/books"  >
                <i class="icon icon-lg icon-book"></i>
                å­¦ä¹ ä¹¦ç±
              </a>
            </li>
        
            <li class="">
              <a href="/about"  >
                <i class="icon icon-lg icon-user"></i>
                å…³äºä½œè€…
              </a>
            </li>
        
            <li class="">
              <a href="/links"  >
                <i class="icon icon-lg icon-link"></i>
                ç«™ç‚¹å¯¼èˆª
              </a>
            </li>
        
            <li class="">
              <a href="https://weiyigeek.top/img/wechat-search.png" target="_blank" >
                <i class="icon icon-lg icon-wechat"></i>
                å…¬ä¼—è´¦å·
              </a>
            </li>
        
            <li class="">
              <a href="https://space.bilibili.com/385802642" target="_blank" >
                <i class="icon icon-lg icon-youtube-play"></i>
                å“”å“©å“”å“©
              </a>
            </li>
        
            <li class="">
              <a href="https://github.com/weiyigeek" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="">
              <a href="https://twitter.com/WeiyiGeek" target="_blank" >
                <i class="icon icon-lg icon-twitter"></i>
                Twitter
              </a>
            </li>
        
            <li class="">
              <a href="https://weibo.com/615643678" target="_blank" >
                <i class="icon icon-lg icon-weibo"></i>
                Weibo
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row clearfix">
        <a href="javascript:;" class="header-icon pull-left waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">
            <span>9.Goç¼–ç¨‹å¿«é€Ÿå…¥é—¨å­¦ä¹ </span>
            
        </div>

        
        <a href="javascript:;" id="site_search_btn" class="header-icon pull-right waves-effect waves-circle waves-light">
            <i class="icon icon-lg icon-search"></i>
        </a>
        

        
            <a href="/atom.xml" class="header-icon pull-right waves-effect waves-circle waves-light">
                <i class="icon icon-lg icon-rss"></i>
            </a>
        
    </div>
</header>
<header class="content-header post-header">
    <img src="/img/banner.jpg" class="header-bg" alt="æ–‡ç« å¤´éƒ¨èƒŒæ™¯">
    <div class="container fade-scale">
        <h1 class="title">9.Goç¼–ç¨‹å¿«é€Ÿå…¥é—¨å­¦ä¹ </h1>
        <h5 class="subtitle">
            
                <time datetime="2020-04-24T03:16:58.000Z" itemprop="datePublished" class="page-time">
  2020-04-24
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Development/">Development</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Development/Programming/">Programming</a></li></ul></li></ul>


            
        </h5>
        
    </div>
    

</header>

<div id="site_search">
    <div class="search-title clearfix">
        <span class="pull-left">
          <i class="icon icon-lg icon-search"></i>
        </span>
        <input type="text" id="local-search-input" name="q" results="0" placeholder="search my blog..." class="form-control pull-left"/>
        <a href="javascript:;" class="close pull-right waves-effect waves-circle waves-light">
          <i class="icon icon-lg icon-close"></i>
        </a>
    </div>
    <div id="local-search-result"></div>
</div>


<div class="container body-wrap">
    <article id="post-ç¼–ç¨‹ä¸–ç•Œ/Go/9.Goç¼–ç¨‹å¿«é€Ÿå…¥é—¨å­¦ä¹ "
  class="post-article article-type-post" itemprop="blogPost">
    <div class="post-card">
        <h1 class="post-card-title">9.Goç¼–ç¨‹å¿«é€Ÿå…¥é—¨å­¦ä¹ </h1>
        <div class="post-meta">
            <time class="post-time" title="2020-04-24 11:16:58" datetime="2020-04-24T03:16:58.000Z"  itemprop="datePublished">2020-04-24</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Development/">Development</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Development/Programming/">Programming</a></li></ul></li></ul>



            

            


            
        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            
            <p>[TOC]</p>
<a id="more"></a>
<h2 id="0x00-Goè¯­è¨€åŸºç¡€ä¹‹Unit-å•å…ƒ-æµ‹è¯•"><a href="#0x00-Goè¯­è¨€åŸºç¡€ä¹‹Unit-å•å…ƒ-æµ‹è¯•" class="headerlink" title="0x00 Goè¯­è¨€åŸºç¡€ä¹‹Unit(å•å…ƒ)æµ‹è¯•"></a>0x00 Goè¯­è¨€åŸºç¡€ä¹‹Unit(å•å…ƒ)æµ‹è¯•</h2><p>æè¿°: æ—¥å¸¸å¼€å‘ä¸­, æµ‹è¯•æ˜¯ä¸èƒ½ç¼ºå°‘çš„. é€šå¸¸å›½å†…çš„ç¨‹åºå‘˜éƒ½ä¸å¤ªå…³æ³¨å•å…ƒæµ‹è¯•è¿™ä¸€éƒ¨åˆ†, ä¿—è¯è¯´ä¸å†™æµ‹è¯•çš„å¼€å‘ä¸æ˜¯å¥½ç¨‹åºçŒ¿ï¼Œæˆ‘è®¤ä¸ºæ¯ä¸€ä½å¼€å‘è€…éƒ½åº”è¯¥äº†è§£ <code>TDDï¼ˆTest Driven Development-æµ‹è¯•é©±åŠ¨å¼€å‘ï¼‰</code>ï¼Œæ‰€ä»¥æœ¬ç« å°†ä¸»è¦ä»‹ç»ä¸‹åœ¨Goè¯­è¨€ä¸­å¦‚ä½•åš<code>å•å…ƒæµ‹è¯•</code>å’Œ<code>åŸºå‡†æµ‹è¯•</code>ã€‚</p>
<p>Tips: ç¼–å†™æµ‹è¯•ä»£ç å’Œç¼–å†™æ™®é€šçš„Goä»£ç è¿‡ç¨‹æ˜¯ç±»ä¼¼çš„ï¼Œå¹¶ä¸éœ€è¦å­¦ä¹ æ–°çš„è¯­æ³•ã€è§„åˆ™æˆ–å·¥å…·(<code>å†æ¬¡ä½“ç°Goè¯­è¨€çš„ä¼˜ç§€</code>)ã€‚</p>
<p>ä¸è¿‡åœ¨ä»‹ç»ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆä»‹ç»ä¸€ä¸ªGoè¯­è¨€çš„æ ‡å‡†åº“ä¸ºæˆ‘ä»¬æä¾›çš„å•å…ƒæµ‹è¯•ä¸åŸºå‡†æµ‹è¯•çš„è¾…åŠ©å·¥å…·ï¼Œæœ‰ä¸€ä¸ªå«åš testing çš„æµ‹è¯•æ¡†æ¶, å¯ä»¥ç”¨äºå•å…ƒæµ‹è¯•å’Œæ€§èƒ½æµ‹è¯•ï¼Œå®ƒæ˜¯å’Œ<code>go test</code>å‘½ä»¤ä¸€èµ·ä½¿ç”¨çš„ï¼Œå®ƒæ˜¯ä¸€ä¸ªæŒ‰ç…§ä¸€å®šçº¦å®šå’Œç»„ç»‡çš„æµ‹è¯•ä»£ç çš„é©±åŠ¨ç¨‹åºã€‚</p>
<p>éå¸¸æ³¨æ„ã€éå¸¸æ³¨æ„åœ¨åŒ…ç›®å½•å†…ï¼Œæ‰€æœ‰ä»¥<code>_test.go</code>ä¸ºåç¼€åçš„æºä»£ç æ–‡ä»¶éƒ½æ˜¯<code>go test</code>æµ‹è¯•çš„ä¸€éƒ¨åˆ†ï¼Œä¸ä¼šè¢«<code>go build</code>ç¼–è¯‘åˆ°æœ€ç»ˆçš„å¯æ‰§è¡Œæ–‡ä»¶ä¸­ã€‚</p>
<p>åœ¨<code>*_test.go</code>æ–‡ä»¶ä¸­æœ‰ä¸‰ç§ç±»å‹çš„å‡½æ•°ï¼Œå•å…ƒæµ‹è¯•å‡½æ•°ã€åŸºå‡†æµ‹è¯•å‡½æ•°å’Œç¤ºä¾‹å‡½æ•°ã€‚</p>
<table>
<thead>
<tr>
<th>ç±»å‹</th>
<th>æ ¼å¼</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>æµ‹è¯•å‡½æ•°</td>
<td>å‡½æ•°åå‰ç¼€ä¸ºTest</td>
<td>æµ‹è¯•ç¨‹åºçš„ä¸€äº›é€»è¾‘è¡Œä¸ºæ˜¯å¦æ­£ç¡®</td>
</tr>
<tr>
<td>åŸºå‡†å‡½æ•°</td>
<td>å‡½æ•°åå‰ç¼€ä¸ºBenchmark</td>
<td>æµ‹è¯•å‡½æ•°çš„æ€§èƒ½</td>
</tr>
<tr>
<td>ç¤ºä¾‹å‡½æ•°</td>
<td>å‡½æ•°åå‰ç¼€ä¸ºExample</td>
<td>ä¸ºæ–‡æ¡£æä¾›ç¤ºä¾‹æ–‡æ¡£</td>
</tr>
</tbody>
</table>
<p>Tips : <code>go test</code> å‘½ä»¤ä¼šéå†æ‰€æœ‰çš„<code>*_test.go</code>æ–‡ä»¶ä¸­ç¬¦åˆä¸Šè¿°å‘½åè§„åˆ™çš„å‡½æ•°ï¼Œç„¶åç”Ÿæˆä¸€ä¸ªä¸´æ—¶çš„mainåŒ…ç”¨äºè°ƒç”¨ç›¸åº”çš„æµ‹è¯•å‡½æ•°ï¼Œç„¶åæ„å»ºå¹¶è¿è¡Œã€æŠ¥å‘Šæµ‹è¯•ç»“æœï¼Œæœ€åæ¸…ç†æµ‹è¯•ä¸­ç”Ÿæˆçš„ä¸´æ—¶æ–‡ä»¶ã€‚</p>
<h3 id="1-å•å…ƒæµ‹è¯•"><a href="#1-å•å…ƒæµ‹è¯•" class="headerlink" title="1.å•å…ƒæµ‹è¯•"></a>1.å•å…ƒæµ‹è¯•</h3><p>æè¿°: ç±»ä¼¼äºç»†èƒæ˜¯æ„æˆæˆ‘ä»¬èº«ä½“çš„åŸºæœ¬å•ä½ï¼Œä¸€ä¸ªè½¯ä»¶ç¨‹åºä¹Ÿæ˜¯ç”±å¾ˆå¤šå•å…ƒç»„ä»¶æ„æˆçš„ï¼Œå•å…ƒç»„ä»¶å¯ä»¥æ˜¯å‡½æ•°ã€ç»“æ„ä½“ã€æ–¹æ³•å’Œæœ€ç»ˆç”¨æˆ·å¯èƒ½ä¾èµ–çš„ä»»æ„ä¸œè¥¿ï¼Œæ€»ä¹‹æˆ‘ä»¬éœ€è¦ç¡®ä¿è¿™äº›ç»„ä»¶æ˜¯èƒ½å¤Ÿæ­£å¸¸è¿è¡Œçš„ã€‚</p>
<p>å³: å•å…ƒæµ‹è¯•æ˜¯ä¸€äº›åˆ©ç”¨å„ç§æ–¹æ³•<code>æµ‹è¯•å•å…ƒç»„ä»¶çš„ç¨‹åº</code>ï¼Œå®ƒä¼š<code>å°†ç»“æœä¸é¢„æœŸè¾“å‡ºè¿›è¡Œæ¯”è¾ƒ</code>ã€‚</p>
<p>å•å…ƒæµ‹è¯•æœ‰å¾—åˆå«æµ‹è¯•å‡½æ•°ï¼Œæ¯ä¸ªæµ‹è¯•å‡½æ•°å¿…é¡»å¯¼å…¥<code>testing</code>åŒ…ï¼Œå…¶è¯­æ³•æ ¼å¼å¦‚ä¸‹æ‰€ç¤º: <code>func TestName(t *testing.T){Code Test()}</code>;</p>
<p>å…¶ä¸­ <code>å‚æ•°t</code> ç”¨äºæŠ¥å‘Šæµ‹è¯•å¤±è´¥å’Œé™„åŠ çš„æ—¥å¿—ä¿¡æ¯ , <code>testing.T</code> çš„æ‹¥æœ‰çš„æ–¹æ³•å¦‚ä¸‹ï¼š<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *T)</span> <span class="title">Error</span><span class="params">(args ...<span class="keyword">interface</span>&#123;&#125;)</span></span></span><br><span class="line"><span class="function"><span class="title">func</span> <span class="params">(c *T)</span> <span class="title">Errorf</span><span class="params">(format <span class="keyword">string</span>, args ...<span class="keyword">interface</span>&#123;&#125;)</span></span></span><br><span class="line"><span class="function"><span class="title">func</span> <span class="params">(c *T)</span> <span class="title">Fail</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="title">func</span> <span class="params">(c *T)</span> <span class="title">FailNow</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="title">func</span> <span class="params">(c *T)</span> <span class="title">Failed</span><span class="params">()</span> <span class="title">bool</span></span></span><br><span class="line"><span class="function"><span class="title">func</span> <span class="params">(c *T)</span> <span class="title">Fatal</span><span class="params">(args ...<span class="keyword">interface</span>&#123;&#125;)</span></span></span><br><span class="line"><span class="function"><span class="title">func</span> <span class="params">(c *T)</span> <span class="title">Fatalf</span><span class="params">(format <span class="keyword">string</span>, args ...<span class="keyword">interface</span>&#123;&#125;)</span></span></span><br><span class="line"><span class="function"><span class="title">func</span> <span class="params">(c *T)</span> <span class="title">Log</span><span class="params">(args ...<span class="keyword">interface</span>&#123;&#125;)</span></span></span><br><span class="line"><span class="function"><span class="title">func</span> <span class="params">(c *T)</span> <span class="title">Logf</span><span class="params">(format <span class="keyword">string</span>, args ...<span class="keyword">interface</span>&#123;&#125;)</span></span></span><br><span class="line"><span class="function"><span class="title">func</span> <span class="params">(c *T)</span> <span class="title">Name</span><span class="params">()</span> <span class="title">string</span></span></span><br><span class="line"><span class="function"><span class="title">func</span> <span class="params">(t *T)</span> <span class="title">Parallel</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="title">func</span> <span class="params">(t *T)</span> <span class="title">Run</span><span class="params">(name <span class="keyword">string</span>, f <span class="keyword">func</span>(t *T)</span>) <span class="title">bool</span></span></span><br><span class="line"><span class="function"><span class="title">func</span> <span class="params">(c *T)</span> <span class="title">Skip</span><span class="params">(args ...<span class="keyword">interface</span>&#123;&#125;)</span></span></span><br><span class="line"><span class="function"><span class="title">func</span> <span class="params">(c *T)</span> <span class="title">SkipNow</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="title">func</span> <span class="params">(c *T)</span> <span class="title">Skipf</span><span class="params">(format <span class="keyword">string</span>, args ...<span class="keyword">interface</span>&#123;&#125;)</span></span></span><br><span class="line"><span class="function"><span class="title">func</span> <span class="params">(c *T)</span> <span class="title">Skipped</span><span class="params">()</span> <span class="title">bool</span></span></span><br></pre></td></tr></table></figure></p>
<p><br></p>
<p><strong>åŸºç¡€ç¤ºä¾‹:</strong><br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// # 1.æµ‹è¯•å‡½æ•°çš„åå­—å¿…é¡»ä»¥Testå¼€å¤´ï¼Œå¯é€‰çš„åç¼€åå¿…é¡»ä»¥å¤§å†™å­—æ¯å¼€å¤´ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestAdd</span><span class="params">(t *testing.T)</span></span>&#123; ... &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestSum</span><span class="params">(t *testing.T)</span></span>&#123; ... &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestLog</span><span class="params">(t *testing.T)</span></span>&#123; ... &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// # 2.ä¾‹å¦‚,æˆ‘ä»¬æµ‹è¯•ä¸€ä¸ªæ•°çš„ç»å¯¹å€¼æ˜¯å¦ä¸æˆ‘ä»¬è®¾ç½®å®šå€¼ä¸€è‡´ï¼Œå¦‚æœæµ‹è¯•ä¸ä¸€è‡´åˆ™è¾“å‡ºt.Errorf()æ–¹æ³•ä¸­çš„è‡ªå®šä¹‰é”™è¯¯ä¿¡æ¯ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestAbs</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  got := Abs(<span class="number">-1</span>)</span><br><span class="line">  <span class="keyword">if</span> got != <span class="number">1</span> &#123;</span><br><span class="line">    t.Errorf(<span class="string">"Abs(-1) = %d; want 1"</span>, got)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h4 id="1-1-æµ‹è¯•å‡½æ•°"><a href="#1-1-æµ‹è¯•å‡½æ•°" class="headerlink" title="1.1 æµ‹è¯•å‡½æ•°"></a>1.1 æµ‹è¯•å‡½æ•°</h4><p>è¯´äº†å‰é¢è¯´äº†è¿™ä¹ˆå¤šæˆ‘ä»¬ä¸å¦‚å®è·µä¸€æŠŠã€‚</p>
<p><strong>ç¤ºä¾‹1.ç®€å•çš„æµ‹è¯•å‡½æ•°ç¤ºä¾‹</strong><br>é¦–å…ˆ,æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªsplitçš„åŒ…ï¼ŒåŒ…ä¸­å®šä¹‰äº†ä¸€ä¸ªSplitå‡½æ•°ï¼Œå…·ä½“å®ç°å¦‚ä¸‹ï¼š<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 06unit/splitstring/splitstr.go</span></span><br><span class="line"><span class="comment">// # è‡ªå®šä¹‰å®ç°åˆ‡å‰²å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="keyword">package</span> splitstring</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">"strings"</span></span><br><span class="line">)</span><br><span class="line"><span class="comment">// 1.Split åˆ‡å‰²è‡ªå®šä¹‰å®ç°å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Split</span><span class="params">(str <span class="keyword">string</span>, sep <span class="keyword">string</span>)</span> []<span class="title">string</span></span> &#123;</span><br><span class="line">  <span class="keyword">var</span> ret []<span class="keyword">string</span></span><br><span class="line">  index := strings.Index(str, sep)</span><br><span class="line">  seplen := <span class="built_in">len</span>(sep)</span><br><span class="line">  <span class="comment">// 2.sep åœ¨å­—ç¬¦ä¸²ç´¢å¼•ä¸­å¤§äºç­‰äº0æ—¶è¯æ˜æœ‰å­—ç¬¦ä¸²</span></span><br><span class="line">  <span class="keyword">for</span> index &gt;= <span class="number">0</span> &#123;</span><br><span class="line">    splitstr := str[:index]</span><br><span class="line">    <span class="comment">// 3.è¿‡æ»¤åˆ†å‰²å­—ç¬¦å‰ç©ºä»¥åŠåç©º</span></span><br><span class="line">    <span class="keyword">if</span> splitstr != <span class="string">""</span> &#123;</span><br><span class="line">      ret = <span class="built_in">append</span>(ret, splitstr)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 4.è§£å†³sepä¸ºå¤šä¸ªå­—ç¬¦çš„æƒ…å†µã€‚</span></span><br><span class="line">    str = str[index+seplen:]</span><br><span class="line">    index = strings.Index(str, sep)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 5.å°†æœ€åçš„å­—ç¬¦ä¹Ÿæ”¾å…¥retæ•°ç»„ä¸­,å¹¶è¿”å›ç»™è°ƒç”¨è€…</span></span><br><span class="line">  ret = <span class="built_in">append</span>(ret, str)</span><br><span class="line">  <span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>å…¶æ¬¡,åœ¨<code>06unit/splitstring</code>ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª<code>split_test.go</code>çš„æ–‡ä»¶,å®ƒå®ç°äº†æˆ‘ä»¬çš„å•å…ƒæµ‹è¯•ã€‚<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// # 06unit/splitstring/split_test.go</span></span><br><span class="line"><span class="keyword">package</span> splitstring</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">"reflect"</span></span><br><span class="line">  <span class="string">"testing"</span></span><br><span class="line">)</span><br><span class="line"><span class="comment">// 1.æ³¨æ„æµ‹è¯•çš„å‡½æ•°æ ¼å¼é‡‡ç”¨é©¼å³°å‘½åæ³•,ä¸”é¦–å­—æ¯å¿…é¡»å¤§å†™ï¼Œå…¶æ¬¡æ˜¯å¿…é¡»æ¥æ”¶ä¸€ä¸ª`*testing.T`ç±»å‹å‚æ•°.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Test1Split</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  ret := Split(<span class="string">"abcadeafg"</span>, <span class="string">"a"</span>)</span><br><span class="line">  want := []<span class="keyword">string</span>&#123;<span class="string">"bc"</span>, <span class="string">"de"</span>, <span class="string">"fg"</span>&#125;</span><br><span class="line">  <span class="comment">// åˆ©ç”¨åå°„è¿›è¡Œæ¯”è¾ƒä¸èƒ½ç›´æ¥æ¯”è¾ƒçš„å˜é‡(æ­¤æ—¶æ˜¯ç›´æ¥æ¯”è¾ƒä¸¤ä¸ªæ•°ç»„)</span></span><br><span class="line">  <span class="keyword">if</span> !reflect.DeepEqual(ret, want) &#123;</span><br><span class="line">    <span class="comment">// æµ‹è¯•ç”¨ä¾‹å¤±è´¥æé†’</span></span><br><span class="line">    t.Errorf(<span class="string">"Want: %v But Got:%v \n"</span>, want, ret)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Test2Split</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  ret := Split(<span class="string">"abcadeafg"</span>, <span class="string">"ad"</span>)</span><br><span class="line">  want := []<span class="keyword">string</span>&#123;<span class="string">"abc"</span>, <span class="string">"eag"</span>&#125;</span><br><span class="line">  <span class="keyword">if</span> !reflect.DeepEqual(ret, want) &#123;</span><br><span class="line">    <span class="comment">// æµ‹è¯•ç”¨ä¾‹å¤±è´¥æé†’</span></span><br><span class="line">    t.Errorf(<span class="string">"Want: %v But Got:%v \n"</span>, want, ret)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>æ‰§è¡Œç»“æœ:<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">âœ  splitstring ls</span><br><span class="line">splitstr.<span class="keyword">go</span>  split_test.<span class="keyword">go</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// # -v æŒ‡å®šä¸€ä¸ªç›®å½•å°†è¯¥ç›®å½•ä¸‹_test.goä¸­è®¾ç½®çš„å•å…ƒæµ‹è¯•å‡½æ•°è¿›è¡Œæ‰§è¡Œã€‚</span></span><br><span class="line">âœ  splitstring <span class="keyword">go</span> test -v .</span><br><span class="line">=== RUN   Test1Split</span><br><span class="line">--- PASS: Test1Split (<span class="number">0.00s</span>) <span class="comment">// æŸ¥çœ‹æµ‹è¯•å‡½æ•°åç§°å’Œè¿è¡Œæ—¶é—´</span></span><br><span class="line">=== RUN   Test2Split</span><br><span class="line">    split_test.<span class="keyword">go</span>:<span class="number">24</span>: Want: [abc eag] But Got:[abc eafg]   <span class="comment">// å¯ä»¥æ¸…é™¤çš„çœ‹åˆ° Test2Split æµ‹è¯•ç”¨ä¾‹æ²¡æœ‰æˆåŠŸ</span></span><br><span class="line">--- FAIL: Test2Split (<span class="number">0.00s</span>)</span><br><span class="line">FAIL</span><br><span class="line">FAIL    weiyigeek.top/studygo/Day08/<span class="number">06</span>unit/splitstring  <span class="number">0.002s</span>  <span class="comment">// å…¨éƒ¨æµ‹è¯•å‡½æ•°æ‰§è¡Œè¿è¡Œæ—¶é—´</span></span><br><span class="line">FAIL</span><br><span class="line"></span><br><span class="line"><span class="comment">// # -run æŒ‡å®šä¸€ä¸ªæƒ³è¦æ‰§è¡Œçš„å•å…ƒæµ‹è¯•å‡½æ•°ï¼Œä¾‹å¦‚æ­¤å¤„æ˜¯ Test1Split(t *testing.T)   </span></span><br><span class="line">âœ  splitstring <span class="keyword">go</span> test -v -run=Test1Split</span><br><span class="line">=== RUN   Test1Split</span><br><span class="line">--- PASS: Test1Split (<span class="number">0.00s</span>)</span><br><span class="line">PASS</span><br><span class="line">ok      weiyigeek.top/studygo/Day08/<span class="number">06</span>unit/splitstring  <span class="number">0.003s</span></span><br></pre></td></tr></table></figure></p>
<p>Tips: éå¸¸æ³¨æ„ï¼Œå½“æˆ‘ä»¬ä¿®æ”¹äº†æˆ‘ä»¬çš„ä»£ç ä¹‹åä¸è¦ä»…ä»…æ‰§è¡Œé‚£äº›å¤±è´¥çš„æµ‹è¯•å‡½æ•°ï¼Œæˆ‘ä»¬åº”è¯¥å®Œæ•´çš„è¿è¡Œæ‰€æœ‰çš„æµ‹è¯•ï¼Œä¿è¯ä¸ä¼šå› ä¸ºä¿®æ”¹ä»£ç è€Œå¼•å…¥äº†æ–°çš„é—®é¢˜ã€‚<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">âœ  splitstring <span class="keyword">go</span> test -v .              </span><br><span class="line">=== RUN   Test1Split</span><br><span class="line">--- PASS: Test1Split (<span class="number">0.00s</span>)</span><br><span class="line">=== RUN   Test2Split</span><br><span class="line">--- PASS: Test2Split (<span class="number">0.00s</span>)</span><br><span class="line">PASS</span><br><span class="line">ok      weiyigeek.top/studygo/Day08/<span class="number">06</span>unit/splitstring  <span class="number">0.003s</span></span><br></pre></td></tr></table></figure></p>
<p><br/></p>
<h4 id="1-2-æµ‹è¯•ç»„"><a href="#1-2-æµ‹è¯•ç»„" class="headerlink" title="1.2 æµ‹è¯•ç»„"></a>1.2 æµ‹è¯•ç»„</h4><p>æè¿°: æ­¤æ—¶,å‡å¦‚æˆ‘ä»¬è¿˜æƒ³æµ‹è¯•ä¸€ä¸‹<code>splitå‡½æ•°</code>å¯¹ä¸­æ–‡å­—ç¬¦ä¸²çš„æ”¯æŒï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥å†ç¼–å†™ä¸€ä¸ªTestChineseSplitæµ‹è¯•å‡½æ•°ï¼Œä½†æ˜¯æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ›´å‹å¥½çš„ä¸€ç§æ–¹å¼æ¥æ·»åŠ æ›´å¤šçš„æµ‹è¯•ç”¨ä¾‹ã€‚é‚£å°±æ˜¯ä½¿ç”¨æµ‹è¯•ç»„ã€‚</p>
<p><strong>æµ‹è¯•ç»„ç¤ºä¾‹:</strong><br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> splitstring</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">"reflect"</span></span><br><span class="line">  <span class="string">"testing"</span></span><br><span class="line">)</span><br><span class="line"><span class="comment">// ç»„æµ‹è¯• ç¤ºä¾‹</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestGroupSplit</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  <span class="comment">// å®šä¹‰ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ç±»å‹</span></span><br><span class="line">  <span class="keyword">type</span> testCase <span class="keyword">struct</span> &#123;</span><br><span class="line">    str  <span class="keyword">string</span></span><br><span class="line">    sep  <span class="keyword">string</span></span><br><span class="line">    want []<span class="keyword">string</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å®šä¹‰ä¸€ä¸ªå­˜å‚¨æµ‹è¯•ç”¨ä¾‹çš„åˆ‡ç‰‡</span></span><br><span class="line">  testGroup := []testCase&#123;</span><br><span class="line">    testCase&#123;<span class="string">"abceafgh"</span>, <span class="string">"a"</span>, []<span class="keyword">string</span>&#123;<span class="string">"bce"</span>, <span class="string">"fgh"</span>&#125;&#125;,</span><br><span class="line">    testCase&#123;<span class="string">"a:b:c"</span>, <span class="string">":"</span>, []<span class="keyword">string</span>&#123;<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>&#125;&#125;,</span><br><span class="line">    &#123;str: <span class="string">"abcdef"</span>, sep: <span class="string">"cd"</span>, want: []<span class="keyword">string</span>&#123;<span class="string">"ab"</span>, <span class="string">"ef"</span>&#125;&#125;,</span><br><span class="line">    &#123;str: <span class="string">"WeiyiGeekåˆ‡å‰²å”¯ä¸€æå®¢"</span>, sep: <span class="string">"åˆ‡å‰²"</span>, want: []<span class="keyword">string</span>&#123;<span class="string">"WeiyiGeek"</span>, <span class="string">"å”¯ä¸€æå®¢!"</span>&#125;&#125;,</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// éå†åˆ‡ç‰‡ï¼Œé€ä¸€æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹</span></span><br><span class="line">  <span class="keyword">for</span> index, tc := <span class="keyword">range</span> testGroup &#123;</span><br><span class="line">    got := Split(tc.str, tc.sep)</span><br><span class="line">    <span class="keyword">if</span> !reflect.DeepEqual(got, tc.want) &#123;</span><br><span class="line">      t.Fatalf(<span class="string">"index %v,Want=%v not equal got=%v \n"</span>, index+<span class="number">1</span>, tc.want, got)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>æ‰§è¡Œç»“æœ:<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">âœ  grouptest ls</span><br><span class="line">  split_group_test.<span class="keyword">go</span>  splitstr.<span class="keyword">go</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸‹è¿°è¯´ç¬¬å››çš„ä¸€ä¸ªå•å…ƒæµ‹è¯•æœ‰é—®é¢˜,æ­¤æ—¶ä½ å¯ä»¥çœ‹åˆ°è¿”å›çš„ [å”¯ä¸€æå®¢] ä¸æˆ‘ä»¬é¢„å®šä¹‰çš„ [å”¯ä¸€æå®¢] æ˜¯ä¸ä¸€è‡´çš„ï¼</span></span><br><span class="line"><span class="comment">// æ­¤ç§æƒ…å†µä¸‹ååˆ†æ¨èä½¿ç”¨%#vçš„æ ¼å¼åŒ–æ–¹å¼ã€‚</span></span><br><span class="line">âœ  grouptest <span class="keyword">go</span> test -v .</span><br><span class="line">  === RUN   TestGroupSplit</span><br><span class="line">      split_group_test.<span class="keyword">go</span>:<span class="number">31</span>: index <span class="number">4</span>,Want=[WeiyiGeek å”¯ä¸€æå®¢!] not equal got=[WeiyiGeek å”¯ä¸€æå®¢] </span><br><span class="line">  --- FAIL: TestGroupSplit (<span class="number">0.00s</span>)</span><br><span class="line">  FAIL</span><br><span class="line">  FAIL    weiyigeek.top/studygo/Day08/<span class="number">06</span>unit/grouptest    <span class="number">0.002s</span></span><br><span class="line">  FAIL</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸‹é¢æˆ‘ä»¬ä¿®æ”¹æµ‹è¯•ç”¨ä¾‹é”™è¯¯æç¤ºçš„éƒ¨åˆ†ï¼Œæ­¤æ—¶å¯ä»¥çœ‹åˆ°å•å…ƒæµ‹è¯•å…¨éƒ¨é€šè¿‡ã€‚</span></span><br><span class="line">âœ  grouptest <span class="keyword">go</span> test -v .</span><br><span class="line">  === RUN   TestGroupSplit</span><br><span class="line">  --- PASS: TestGroupSplit (<span class="number">0.00s</span>)</span><br><span class="line">  PASS</span><br><span class="line">  ok      weiyigeek.top/studygo/Day08/<span class="number">06</span>unit/grouptest    <span class="number">0.002s</span></span><br></pre></td></tr></table></figure></p>
<p><br/></p>
<h4 id="1-3-å­æµ‹è¯•"><a href="#1-3-å­æµ‹è¯•" class="headerlink" title="1.3 å­æµ‹è¯•"></a>1.3 å­æµ‹è¯•</h4><p>æè¿°: å½“æµ‹è¯•ç”¨ä¾‹è¾ƒå¤šæ—¶,æˆ‘ä»¬é‡‡ç”¨ä¸Šé¢çš„æ–¹å¼ä¸èƒ½ä¸€çœ¼çœ‹å‡ºå…·ä½“æ˜¯é‚£äº›æµ‹è¯•ç”¨ä¾‹å¤±è´¥äº†ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥ä¸ºæ¯ä¸ªæµ‹è¯•æ¡ˆä¾‹åŠ ä¸Šåç§°, å½“ç„¶æ›´å¥½çš„æ–¹å¼è¿˜æ˜¯ä»Šå¤©çš„ä¸»äººå…¬<code>å­æµ‹è¯•</code>ã€‚</p>
<p>å­æµ‹è¯• æ˜¯åœ¨Go 1.7+æ–°å¢ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰ç…§å¦‚ä¸‹æ–¹æ³•ä½¿ç”¨<code>t.Run</code>æ¥æ‰§è¡Œå­æµ‹è¯•ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 06unit/subtest/split_sub_test.go</span></span><br><span class="line"><span class="keyword">package</span> subtest</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">"reflect"</span></span><br><span class="line">  <span class="string">"testing"</span></span><br><span class="line">)</span><br><span class="line"><span class="comment">// å­æµ‹è¯• ç¤ºä¾‹</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestChildSplit</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  <span class="comment">// 1.åŒæ ·å®šä¹‰ä¸€ä¸ªsubTestCase</span></span><br><span class="line">  <span class="keyword">type</span> subTestCase <span class="keyword">struct</span> &#123;</span><br><span class="line">    str, sep <span class="keyword">string</span></span><br><span class="line">    want     []<span class="keyword">string</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 2.å£°æ˜å®šä¹‰ä¸€ä¸ªMapç±»å‹çš„testGroupå˜é‡</span></span><br><span class="line">  testGroup := <span class="keyword">map</span>[<span class="keyword">string</span>]subTestCase&#123;</span><br><span class="line">    <span class="string">"Subtest_1"</span>: &#123;<span class="string">"abceafgh"</span>, <span class="string">"a"</span>, []<span class="keyword">string</span>&#123;<span class="string">"bce"</span>, <span class="string">"fgh"</span>&#125;&#125;,</span><br><span class="line">    <span class="string">"Subtest_2"</span>: &#123;<span class="string">"a:b:c"</span>, <span class="string">":"</span>, []<span class="keyword">string</span>&#123;<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>&#125;&#125;,</span><br><span class="line">    <span class="string">"Subtest_3"</span>: &#123;<span class="string">"abcdef"</span>, <span class="string">"cd"</span>, []<span class="keyword">string</span>&#123;<span class="string">"ab"</span>, <span class="string">"ef"</span>&#125;&#125;,</span><br><span class="line">    <span class="string">"Subtest_4"</span>: &#123;<span class="string">"WeiyiGeekåˆ‡å‰²å”¯ä¸€æå®¢"</span>, <span class="string">"åˆ‡å‰²"</span>, []<span class="keyword">string</span>&#123;<span class="string">"WeiyiGeek"</span>, <span class="string">"å”¯ä¸€æå®¢"</span>&#125;&#125;,</span><br><span class="line">    <span class="string">"Subtest_5"</span>: &#123;<span class="string">"http://www.weiyigeek.top"</span>, <span class="string">"//"</span>, []<span class="keyword">string</span>&#123;<span class="string">"http:"</span>, <span class="string">"www.weiyigeek.top"</span>&#125;&#125;,</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 3.éå†æµ‹è¯•ç»„,é€ä¸€æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹</span></span><br><span class="line">  <span class="keyword">for</span> k, v := <span class="keyword">range</span> testGroup &#123;</span><br><span class="line">    <span class="built_in">println</span>(<span class="string">"æµ‹è¯•åç§°: "</span>, k)</span><br><span class="line">    <span class="comment">// 4.ç„¶åä½¿ç”¨t.Run()æ‰§è¡Œå­æµ‹è¯•</span></span><br><span class="line">    t.Run(k, <span class="function"><span class="keyword">func</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">      got := Split(v.str, v.sep)</span><br><span class="line">      <span class="keyword">if</span> !reflect.DeepEqual(got, v.want) &#123;</span><br><span class="line">        t.Fatalf(<span class="string">"index %v,Want=%v not equal got=%v \n"</span>, k, v.want, got)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•ç»“æœ:<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">âœ  subtest ls</span><br><span class="line">splitstr.<span class="keyword">go</span>  split_sub_test.<span class="keyword">go</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// # æµ‹è¯•ç›®å½•ä¸‹çš„å…¨éƒ¨å•å…ƒæµ‹è¯•çš„å­æµ‹è¯•</span></span><br><span class="line">âœ  subtest <span class="keyword">go</span> test -v .</span><br><span class="line">=== RUN   TestChildSplit</span><br><span class="line">æµ‹è¯•åç§°:  Subtest_1</span><br><span class="line">=== RUN   TestChildSplit/Subtest_1</span><br><span class="line">æµ‹è¯•åç§°:  Subtest_2</span><br><span class="line">=== RUN   TestChildSplit/Subtest_2</span><br><span class="line">æµ‹è¯•åç§°:  Subtest_3</span><br><span class="line">=== RUN   TestChildSplit/Subtest_3</span><br><span class="line">æµ‹è¯•åç§°:  Subtest_4</span><br><span class="line">=== RUN   TestChildSplit/Subtest_4</span><br><span class="line">æµ‹è¯•åç§°:  Subtest_5</span><br><span class="line"><span class="comment">// # å¯ä»¥å‘ç°æˆ‘ä»¬æœŸæœ›çš„www3.weiyigeek.topä¸Splitå‡½æ•°å®é™…è¿”å›çš„www.weiyigeek.topæ˜¯ä¸ç›¸åŒçš„ã€‚</span></span><br><span class="line">=== RUN   TestChildSplit/Subtest_5  </span><br><span class="line">    split_sub_test.<span class="keyword">go</span>:<span class="number">32</span>: index Subtest_5,Want=[http: www3.weiyigeek.top] not equal got=[http: www.weiyigeek.top] </span><br><span class="line">--- FAIL: TestChildSplit (<span class="number">0.00s</span>)</span><br><span class="line">    --- PASS: TestChildSplit/Subtest_1 (<span class="number">0.00s</span>)</span><br><span class="line">    --- PASS: TestChildSplit/Subtest_2 (<span class="number">0.00s</span>)</span><br><span class="line">    --- PASS: TestChildSplit/Subtest_3 (<span class="number">0.00s</span>)</span><br><span class="line">    --- PASS: TestChildSplit/Subtest_4 (<span class="number">0.00s</span>)</span><br><span class="line">    --- FAIL: TestChildSplit/Subtest_5 (<span class="number">0.00s</span>)</span><br><span class="line">FAIL</span><br><span class="line">FAIL    weiyigeek.top/studygo/Day08/<span class="number">06</span>unit/subtest      <span class="number">0.003s</span></span><br><span class="line">FAIL</span><br><span class="line"></span><br><span class="line"><span class="comment">// # ä¿®æ­£æœŸæœ›å€¼åé€šè¿‡ `-run=RegExp` æ¥æŒ‡å®šè¿è¡Œçš„æµ‹è¯•ç”¨ä¾‹, è¿˜å¯ä»¥é€šè¿‡/æ¥æŒ‡å®šè¦è¿è¡Œçš„å­æµ‹è¯•ç”¨ä¾‹,ä¾‹å¦‚</span></span><br><span class="line">âœ  subtest <span class="keyword">go</span> test -v -run=TestChildSplit/Subtest_5          </span><br><span class="line">=== RUN   TestChildSplit</span><br><span class="line">æµ‹è¯•åç§°:  Subtest_1</span><br><span class="line">æµ‹è¯•åç§°:  Subtest_2</span><br><span class="line">æµ‹è¯•åç§°:  Subtest_3</span><br><span class="line">æµ‹è¯•åç§°:  Subtest_4</span><br><span class="line">æµ‹è¯•åç§°:  Subtest_5</span><br><span class="line">=== RUN   TestChildSplit/Subtest_5</span><br><span class="line">--- PASS: TestChildSplit (<span class="number">0.00s</span>)   </span><br><span class="line">    --- PASS: TestChildSplit/Subtest_5 (<span class="number">0.00s</span>)  <span class="comment">// å­æµ‹è¯•é€šè¿‡</span></span><br><span class="line">PASS</span><br><span class="line">ok      weiyigeek.top/studygo/Day08/<span class="number">06</span>unit/subtest      <span class="number">0.002s</span></span><br></pre></td></tr></table></figure></p>
<p><br/></p>
<h4 id="1-4-æµ‹è¯•è¦†ç›–ç‡"><a href="#1-4-æµ‹è¯•è¦†ç›–ç‡" class="headerlink" title="1.4 æµ‹è¯•è¦†ç›–ç‡"></a>1.4 æµ‹è¯•è¦†ç›–ç‡</h4><p>æè¿°: Goè¯­è¨€è¿˜ä¸ºå¼€å‘è€…ä»¬æä¾›å†…ç½®åŠŸèƒ½æ¥æ£€æŸ¥ä½ çš„ä»£ç è¦†ç›–ç‡(<code>ä»£ç è¢«æµ‹è¯•å¥—ä»¶è¦†ç›–çš„ç™¾åˆ†æ¯”</code>), é€šè¿‡ä½¿ç”¨<code>go test -cover</code>æ¥æŸ¥çœ‹æµ‹è¯•è¦†ç›–ç‡ä»¥åŠ<code>go tool conver</code>æ¥ç”ŸæˆHTMLæ ¼å¼è¡¨ç¤ºæµ‹è¯•è¦†ç›–ç‡ã€‚</p>
<p>Tips: é€šå¸¸æˆ‘ä»¬ä½¿ç”¨çš„éƒ½æ˜¯è¯­å¥çš„è¦†ç›–ç‡ï¼Œä¹Ÿå°±æ˜¯åœ¨æµ‹è¯•ä¸­è‡³å°‘è¢«è¿è¡Œä¸€æ¬¡çš„ä»£ç å æ€»ä»£ç çš„æ¯”ä¾‹ã€‚</p>
<p>ä¾‹å¦‚,æ­¤æ—¶æˆ‘ä»¬ä½¿ç”¨<code>1.1</code>å•å…ƒæµ‹è¯•ä¸­çš„ç¤ºä¾‹è¿›è¡Œã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">âœ  splitstring  go <span class="built_in">test</span> -cover </span><br><span class="line">PASS</span><br><span class="line">coverage: 100.0% of statements</span><br><span class="line">ok      weiyigeek.top/studygo/Day08/06unit/splitstring  0.002s</span><br></pre></td></tr></table></figure></p>
<p>æ­¤å¤–ï¼ŒGoè¿˜æä¾›äº†ä¸€ä¸ªé¢å¤–çš„<code>-coverprofile</code>å‚æ•°ï¼Œç”¨æ¥å°†è¦†ç›–ç‡ç›¸å…³çš„è®°å½•ä¿¡æ¯è¾“å‡ºåˆ°ä¸€ä¸ªæ–‡ä»¶ã€‚ä¾‹å¦‚ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">âœ  splitstring go <span class="built_in">test</span> -cover -coverprofile=cover.out -v .</span><br><span class="line">=== RUN   Test1Split</span><br><span class="line">--- PASS: Test1Split (0.00s)</span><br><span class="line">=== RUN   Test2Split</span><br><span class="line">--- PASS: Test2Split (0.00s)</span><br><span class="line">PASS</span><br><span class="line">coverage: 100.0% of statements</span><br><span class="line">ok      weiyigeek.top/studygo/Day08/06unit/splitstring  0.002s  coverage: 100.0% of statements</span><br></pre></td></tr></table></figure><br>ä¸Šé¢çš„å‘½ä»¤ä¼šå°†è¦†ç›–ç‡ç›¸å…³çš„ä¿¡æ¯è¾“å‡ºåˆ°å½“å‰æ–‡ä»¶å¤¹ä¸‹é¢çš„<code>cover.out</code>æ–‡ä»¶ä¸­</p>
<p>æœ€å,æˆ‘ä»¬æ‰§è¡Œ<code>go tool cover -html=cover.out</code>ï¼Œä½¿ç”¨coverå·¥å…·æ¥å¤„ç†ç”Ÿæˆçš„è®°å½•ä¿¡æ¯ï¼Œè¯¥å‘½ä»¤ä¼šæ‰“å¼€æœ¬åœ°çš„æµè§ˆå™¨çª—å£ç”Ÿæˆä¸€ä¸ªHTMLæŠ¥å‘Šã€‚ </p>
<p><a rel=9.Goç¼–ç¨‹å¿«é€Ÿå…¥é—¨å­¦ä¹  href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/5/20211125111332.png" target="_blank" title="WeiyiGeek.ä»£ç è¦†ç›–ç‡HTMLæŠ¥å‘Š" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/5/20211125111332.png" alt="WeiyiGeek.ä»£ç è¦†ç›–ç‡HTMLæŠ¥å‘Š"></a></p>
<p>å›¾ä¸­æ¯ä¸ªç”¨<code>ç»¿è‰²æ ‡è®°</code>çš„è¯­å¥å—è¡¨ç¤º<code>è¢«è¦†ç›–</code>äº†ï¼Œè€Œ<code>çº¢è‰²</code>çš„è¡¨ç¤º<code>æ²¡æœ‰è¢«è¦†ç›–</code>ã€‚</p>
<p><br></p>
<h3 id="2-åŸºå‡†æµ‹è¯•"><a href="#2-åŸºå‡†æµ‹è¯•" class="headerlink" title="2.åŸºå‡†æµ‹è¯•"></a>2.åŸºå‡†æµ‹è¯•</h3><p><strong>Q: ä»€ä¹ˆæ˜¯åŸºå‡†æµ‹è¯•?</strong></p>
<blockquote>
<p>ç­”: åœ¨ä¸€å®šçš„å·¥ä½œè´Ÿè½½ä¹‹ä¸‹æ£€æµ‹ç¨‹åºæ€§èƒ½çš„ä¸€ç§æ–¹æ³•.</p>
</blockquote>
<p>åŸºå‡†æµ‹è¯•çš„åŸºæœ¬è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š <code>func BenchmarkName(b *testing.B){ code test... }</code></p>
<p>åŸºå‡†æµ‹è¯•ä»¥<code>Benchmark</code>ä¸ºå‰ç¼€ï¼Œéœ€è¦ä¸€ä¸ª<code>*testing.B</code>ç±»å‹çš„å‚æ•°bï¼ŒåŸºå‡†æµ‹è¯•å¿…é¡»è¦æ‰§è¡Œ<code>b.N</code>æ¬¡ï¼Œè¿™æ ·çš„æµ‹è¯•æ‰æœ‰å¯¹ç…§æ€§ï¼Œ<code>b.N</code>çš„å€¼æ˜¯ç³»ç»Ÿæ ¹æ®å®é™…æƒ…å†µå»è°ƒæ•´çš„ï¼Œä»è€Œä¿è¯æµ‹è¯•çš„ç¨³å®šæ€§ã€‚</p>
<p>åŸºå‡†æµ‹è¯•<code>testing.B</code>ç±»å‹æ‹¥æœ‰çš„æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">func (c *B) Error(args ...interface&#123;&#125;)</span><br><span class="line">func (c *B) Errorf(format string, args ...interface&#123;&#125;)</span><br><span class="line">func (c *B) Fail()</span><br><span class="line">func (c *B) FailNow()</span><br><span class="line">func (c *B) Failed() bool</span><br><span class="line">func (c *B) Fatal(args ...interface&#123;&#125;)</span><br><span class="line">func (c *B) Fatalf(format string, args ...interface&#123;&#125;)</span><br><span class="line">func (c *B) Log(args ...interface&#123;&#125;)</span><br><span class="line">func (c *B) Logf(format string, args ...interface&#123;&#125;)</span><br><span class="line">func (c *B) Name() string</span><br><span class="line">func (b *B) ReportAllocs()</span><br><span class="line">func (b *B) ResetTimer()</span><br><span class="line">func (b *B) Run(name string, f func(b *B)) bool</span><br><span class="line">func (b *B) RunParallel(body func(*PB))</span><br><span class="line">func (b *B) SetBytes(n int64)</span><br><span class="line">func (b *B) SetParallelism(p int)</span><br><span class="line">func (c *B) Skip(args ...interface&#123;&#125;)</span><br><span class="line">func (c *B) SkipNow()</span><br><span class="line">func (c *B) Skipf(format string, args ...interface&#123;&#125;)</span><br><span class="line">func (c *B) Skipped() bool</span><br><span class="line">func (b *B) StartTimer()</span><br><span class="line">func (b *B) StopTimer()</span><br></pre></td></tr></table></figure>
<p>ç®€å•ç¤ºä¾‹:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">func BenchmarkHello(b *testing.B) &#123;</span><br><span class="line">  for i :&#x3D; 0; i &lt; b.N; i++ &#123;</span><br><span class="line">    fmt.Sprintf(&quot;hello&quot;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br/></p>
<p>Tips: é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯ä¸ªåŸºå‡†æµ‹è¯•è‡³å°‘è¿è¡Œ1ç§’ã€‚å¦‚æœåœ¨Benchmarkå‡½æ•°è¿”å›æ—¶æ²¡æœ‰åˆ°1ç§’ï¼Œåˆ™b.Nçš„å€¼ä¼šæŒ‰ <code>1,2,5,10,20,50ï¼Œâ€¦</code> å¢åŠ ï¼Œå¹¶ä¸”å‡½æ•°å†æ¬¡è¿è¡Œã€‚</p>
<p><br/></p>
<h4 id="2-1-åŸºå‡†æµ‹è¯•ç”¨ä¾‹"><a href="#2-1-åŸºå‡†æµ‹è¯•ç”¨ä¾‹" class="headerlink" title="2.1 åŸºå‡†æµ‹è¯•ç”¨ä¾‹"></a>2.1 åŸºå‡†æµ‹è¯•ç”¨ä¾‹</h4><p>æè¿°: æ­¤å¤„ï¼Œæˆ‘ä»¬åˆ©ç”¨æ–æ³¢é‚£å¥‘å‡½æ•°æ¥è¿›è¡ŒåŸºå‡†æµ‹è¯•ã€‚</p>
<p>æ–æ³¢é‚£å¥‘å‡½æ•°:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// weiyigeek.top/packeage/myself/fibonacci.go</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> myself</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Fibonacci</span><span class="params">(number <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">  <span class="keyword">if</span> number == <span class="number">0</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> number == <span class="number">1</span> || number == <span class="number">2</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> Fibonacci(number<span class="number">-1</span>) + Fibonacci(number<span class="number">-2</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åæˆ‘ä»¬åœ¨<code>benchmarktest</code>åŒ…ä¸­ç¼–å†™åŸºå‡†æµ‹è¯•ä»£ç ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// weiyigeek.top/studygo/Day08/06unit/benchmarktest/benchmark_test.go</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> benchmarktest</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">"fmt"</span></span><br><span class="line">  <span class="string">"testing"</span></span><br><span class="line">  custom <span class="string">"weiyigeek.top/packeage/myself"</span></span><br><span class="line">)</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkFibonacci</span><span class="params">(b *testing.B)</span></span> &#123;</span><br><span class="line">  <span class="comment">// fmt.Printf("Fibonacci(%d) = %d\n", 10, custom.Fibonacci(10))</span></span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; b.N; i++ &#123;</span><br><span class="line">    custom.Fibonacci(<span class="number">10</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œç»“æœ:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å€¼å¾—æ³¨æ„çš„æ˜¯åŸºå‡†æµ‹è¯•å¹¶ä¸ä¼šé»˜è®¤æ‰§è¡Œ,</span></span><br><span class="line">âœ  benchmarktest go <span class="built_in">test</span> .</span><br><span class="line">ok      weiyigeek.top/studygo/Day08/06unit/benchmarktest        0.002s [no tests to run]</span><br><span class="line"><span class="comment"># éœ€è¦å¢åŠ `-bench`å‚æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬é€šè¿‡æ‰§è¡Œ`go test -bench=åŸºå‡†æ–¹æ³•åç§°`å‘½ä»¤æ‰§è¡ŒåŸºå‡†æµ‹è¯•</span></span><br><span class="line"><span class="comment"># --run=none é¿å…è¿è¡Œæ™®é€šçš„æµ‹è¯•å‡½æ•°, å› ä¸ºä¸€èˆ¬ä¸å¯èƒ½æœ‰å‡½æ•°ååŒ¹é… none</span></span><br><span class="line">âœ  06unit go <span class="built_in">test</span> -v -bench=BenchmarkFibonacci --run=none ./benchmarktest</span><br><span class="line">goos: linux</span><br><span class="line">goarch: amd64</span><br><span class="line">pkg: weiyigeek.top/studygo/Day08/06unit/benchmarktest</span><br><span class="line">cpu: Intel(R) Core(TM) i5-3570 CPU @ 3.40GHz</span><br><span class="line">BenchmarkFibonacci</span><br><span class="line">BenchmarkFibonacci-4     4495600               257.8 ns/op</span><br><span class="line">PASS</span><br><span class="line">ok      weiyigeek.top/studygo/Day08/06unit/benchmarktest        1.434s</span><br></pre></td></tr></table></figure>
<p>ç”±ä¸Šé¢çš„ç»“æœå¯çŸ¥, <code>BenchmarkFibonacci-4</code>è¡¨ç¤ºå¯¹Fibonacciå‡½æ•°è¿›è¡ŒåŸºå‡†æµ‹è¯•ï¼Œè€Œæ•°å­—4è¡¨ç¤º<code>GOMAXPROCS</code>çš„å€¼ï¼Œè¿™ä¸ªå¯¹äºå¹¶å‘åŸºå‡†æµ‹è¯•å¾ˆé‡è¦ã€‚</p>
<p>ç„¶åæ˜¯<code>4495600å’Œ257.8 ns/op</code>è¡¨ç¤ºä¸€å…±è°ƒç”¨äº†<code>4495600</code>æ¬¡ä¸”æ¯æ¬¡å¹³å‡è°ƒç”¨Fibonacciå‡½æ•°è€—æ—¶<code>257.8nsï¼ˆçº³ç§’ï¼‰</code></p>
<p><br/></p>
<p>è¡¥å……è¯´æ˜,æˆ‘ä»¬è¿˜å¯ä»¥ä¸ºåŸºå‡†æµ‹è¯•æ·»åŠ <code>-benchmem</code>å‚æ•°ï¼Œæ¥è·å¾—å†…å­˜åˆ†é…çš„ç»Ÿè®¡æ•°æ®,æ­¤æ—¶ä¸ºäº†æ›´å¥½çš„è§‚å¯Ÿï¼Œæˆ‘ä»¬å°†Fibonacci()å‡½æ•°æ¢åšå‰é¢çš„Split()å‡½æ•°è¿›è¡ŒåŸºå‡†æµ‹è¯•åˆ†æã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">package benchmarktest</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">  &quot;testing&quot;</span><br><span class="line">  custom &quot;weiyigeek.top&#x2F;packeage&#x2F;myself&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">func BenchmarkSplit(b *testing.B) &#123;</span><br><span class="line">  for i :&#x3D; 0; i &lt; b.N; i++ &#123;</span><br><span class="line">    custom.Split(&quot;http:&#x2F;&#x2F;www.weiyigeek.top&quot;, &quot;.&quot;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œç»“æœ:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ 06unit go <span class="built_in">test</span> -v -bench=BenchmarkSplit -benchmem --run=none ./benchmarktest </span><br><span class="line">goos: linux</span><br><span class="line">goarch: amd64</span><br><span class="line">pkg: weiyigeek.top/studygo/Day08/06unit/benchmarktest</span><br><span class="line">cpu: Intel(R) Core(TM) i5-3570 CPU @ 3.40GHz</span><br><span class="line">BenchmarkSplit</span><br><span class="line">BenchmarkSplit-4         4342447               259.3 ns/op           112 B/op          3 allocs/op</span><br><span class="line">PASS</span><br><span class="line">ok      weiyigeek.top/studygo/Day08/06unit/benchmarktest        1.413s</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­, <code>112 B/op</code>è¡¨ç¤ºæ¯æ¬¡æ“ä½œå†…å­˜åˆ†é…äº†112å­—èŠ‚ï¼Œ<code>3 allocs/op</code>åˆ™è¡¨ç¤ºæ¯æ¬¡æ“ä½œè¿›è¡Œäº†3æ¬¡å†…å­˜åˆ†é…, å…¶æ¬¡æ˜¯æ‰§è¡Œäº†4342447æ¬¡ï¼Œå¹³å‡æ¯æ¬¡è€—è´¹259.3nsã€‚</p>
<p>ä¸Šé¢å‘ç”Ÿäº†ä¸‰æ¬¡å†…å­˜åˆ†é…,æˆ‘è¿˜å¯ä»¥ä¼˜åŒ–æˆ‘ä»¬çš„Split()å‡½æ•°ï¼Œæ­¤å¤„æˆ‘ä»¬ä½¿ç”¨makeå‡½æ•°å°†resultåˆå§‹åŒ–ä¸ºä¸€ä¸ªå®¹é‡è¶³å¤Ÿå¤§çš„åˆ‡ç‰‡ï¼Œè€Œä¸å†åƒä¹‹å‰ä¸€æ ·é€šè¿‡è°ƒç”¨appendå‡½æ•°æ¥è¿½åŠ ã€‚</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// weiyigeek.top/packeage/myself/splitstr.go</span></span><br><span class="line"><span class="comment">// è‡ªå®šä¹‰å®ç°åˆ‡å‰²å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="keyword">package</span> myself</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">"strings"</span></span><br><span class="line">)</span><br><span class="line"><span class="comment">// 1.Split åˆ‡å‰²è‡ªå®šä¹‰å®ç°å‡½æ•°ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Split</span><span class="params">(str <span class="keyword">string</span>, sep <span class="keyword">string</span>)</span> <span class="params">(result []<span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line">  <span class="comment">// 2.æå‰ä½¿ç”¨makeå‡½æ•°å°†resultåˆå§‹åŒ–ä¸ºä¸€ä¸ªå®¹é‡è¶³å¤Ÿå¤§çš„åˆ‡ç‰‡ã€‚</span></span><br><span class="line">  result = <span class="built_in">make</span>([]<span class="keyword">string</span>, <span class="number">0</span>, strings.Count(str, sep)+<span class="number">1</span>)</span><br><span class="line">  index := strings.Index(str, sep)</span><br><span class="line">  <span class="comment">// 3.sep åœ¨å­—ç¬¦ä¸²ç´¢å¼•ä¸­å¤§äº-1æ—¶è¯æ˜æœ‰å­—ç¬¦ä¸²ã€‚</span></span><br><span class="line">  <span class="keyword">for</span> index &gt; <span class="number">-1</span> &#123;</span><br><span class="line">    splitstr := str[:index]</span><br><span class="line">    <span class="comment">// 4.è¿‡æ»¤åˆ†å‰²å­—ç¬¦å‰ç©ºä»¥åŠåç©ºã€‚</span></span><br><span class="line">    <span class="keyword">if</span> splitstr != <span class="string">""</span> &#123;</span><br><span class="line">      result = <span class="built_in">append</span>(result, str[:index])</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 5.å†æ¬¡è·å–åˆ†å‰²åçš„å­—ç¬¦ä¸²ã€‚</span></span><br><span class="line">    str = str[index+<span class="built_in">len</span>(sep):]</span><br><span class="line">    index = strings.Index(str, sep)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 6.å°†æœ€åçš„å­—ç¬¦ä¹Ÿæ”¾å…¥retæ•°ç»„ä¸­ã€‚</span></span><br><span class="line">  result = <span class="built_in">append</span>(result, str)</span><br><span class="line">  <span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¼˜åŒ–å®Œæ¯•åï¼Œæˆ‘ä»¬å†æ¬¡æ‰§è¡ŒåŸºå‡†æµ‹è¯•å‘½ä»¤ï¼ŒæŸ¥çœ‹ä¸Šé¢æ”¹åŠ¨åä¼šå¸¦æ¥å¤šå¤§çš„æ€§èƒ½æå‡ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ 06unit go <span class="built_in">test</span> -v -bench=BenchmarkSplit -benchmem --run=none ./benchmarktest </span><br><span class="line">goos: linux</span><br><span class="line">goarch: amd64</span><br><span class="line">pkg: weiyigeek.top/studygo/Day08/06unit/benchmarktest</span><br><span class="line">cpu: Intel(R) Core(TM) i5-3570 CPU @ 3.40GHz</span><br><span class="line">BenchmarkSplit</span><br><span class="line">BenchmarkSplit-4         8726422               121.1 ns/op            48 B/op          1 allocs/op</span><br><span class="line">PASS</span><br><span class="line">ok      weiyigeek.top/studygo/Day08/06unit/benchmarktest        1.201s</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ä¸Šé¢è¿™ä¸ªä¼˜åŒ–, å¯ä»¥çœ‹åˆ° allocs å†…å­˜åˆ†é…æ¬¡æ•°é™åˆ°äº†1ï¼Œå¹¶ä¸”æ¯æ¬¡æ“ä½œå†…å­˜åˆ†é…çš„å­—èŠ‚æ•°ä¹Ÿä»<code>112</code>é™åˆ°äº†<code>48</code>B/op, åŸºå‡†æµ‹è¯•æ‰§è¡Œçš„æ€»æ¬¡æ•°åœ¨å¢åŠ è€Œå¹³å‡æ¯æ¬¡æ‰§è¡Œçš„æ—¶é—´åœ¨å‡å°‘ï¼Œå¯ä»¥çœ‹åˆ°å°±æ˜¯ä¼˜åŒ–è¿™ä¹ˆä¸€ä¸ªå°å°çš„ç‚¹å°±å¯ä»¥å¸¦æ¥æ€§èƒ½çš„æå‡ï¼Œæ‰€ä»¥åœ¨ä¸€äº›å¤§ç¨‹åºä¸­åŸºå‡†æµ‹è¯•åˆ™æ˜¾ç¤ºçš„å°¤ä¸ºé‡è¦ã€‚</p>
<p><br></p>
<h4 id="2-2-æ€§èƒ½æ¯”è¾ƒç”¨ä¾‹"><a href="#2-2-æ€§èƒ½æ¯”è¾ƒç”¨ä¾‹" class="headerlink" title="2.2 æ€§èƒ½æ¯”è¾ƒç”¨ä¾‹"></a>2.2 æ€§èƒ½æ¯”è¾ƒç”¨ä¾‹</h4><p>æè¿°: ä¸Šé¢çš„åŸºå‡†æµ‹è¯•åªèƒ½å¾—åˆ°ç»™å®šæ“ä½œçš„ç»å¯¹è€—æ—¶ï¼Œä½†æ˜¯åœ¨å¾ˆå¤šæ€§èƒ½é—®é¢˜æ˜¯å‘ç”Ÿåœ¨ä¸¤ä¸ªä¸åŒæ“ä½œä¹‹é—´çš„ç›¸å¯¹è€—æ—¶ï¼Œæ¯”å¦‚åŒä¸€ä¸ªå‡½æ•°å¤„ç†1000ä¸ªå…ƒç´ çš„è€—æ—¶ä¸å¤„ç†1ä¸‡ç”šè‡³100ä¸‡ä¸ªå…ƒç´ çš„è€—æ—¶çš„å·®åˆ«æ˜¯å¤šå°‘ï¼Ÿå†æˆ–è€…å¯¹äºåŒä¸€ä¸ªä»»åŠ¡ç©¶ç«Ÿä½¿ç”¨å“ªç§ç®—æ³•æ€§èƒ½æœ€ä½³ï¼Ÿ</p>
<p>æˆ‘ä»¬é€šå¸¸éœ€è¦å¯¹ä¸¤ä¸ªä¸åŒç®—æ³•çš„å®ç°ä½¿ç”¨ç›¸åŒçš„è¾“å…¥æ¥è¿›è¡ŒåŸºå‡†æ¯”è¾ƒæµ‹è¯•ã€‚</p>
<p><code>æ€§èƒ½æ¯”è¾ƒå‡½æ•°</code>é€šå¸¸æ˜¯ä¸€ä¸ªå¸¦æœ‰å‚æ•°çš„å‡½æ•°ï¼Œè¢«å¤šä¸ªä¸åŒçš„Benchmarkå‡½æ•°ä¼ å…¥ä¸åŒçš„å€¼æ¥è°ƒç”¨, å…¶è¯­æ³•æ ¼å¼å¦‚ä¸‹</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">benchmark</span><span class="params">(b *testing.B, size <span class="keyword">int</span>)</span></span>&#123;<span class="comment">/* ... */</span>&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Benchmark10</span><span class="params">(b *testing.B)</span></span>&#123; benchmark(b, <span class="number">10</span>) &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Benchmark100</span><span class="params">(b *testing.B)</span></span>&#123; benchmark(b, <span class="number">100</span>) &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Benchmark1000</span><span class="params">(b *testing.B)</span></span>&#123; benchmark(b, <span class="number">1000</span>) &#125;</span><br></pre></td></tr></table></figure>
<p>æ­¤å¤„æˆ‘ä»¬è¿˜æ˜¯é‡‡ç”¨ä¸Šé¢ç¼–å†™çš„<code>æ–æ³¢é‚£å¥‘å‡½æ•°</code>ï¼Œè¿›è¡Œåœ¨è®¡ç®—ä¸åŒå€¼çš„æƒ…å†µä¸‹çš„æ€§èƒ½æ¯”è¾ƒå‡½æ•°ï¼Œæ­¤å¤„æˆ‘ä»¬ä¿®æ”¹ç¼–å†™ä¸€ä¸‹åŸºå‡†æµ‹è¯•æ¯”è¾ƒå‡½æ•°ã€‚</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> performmancetest</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">"testing"</span></span><br><span class="line">  custom <span class="string">"weiyigeek.top/packeage/myself"</span></span><br><span class="line">)</span><br><span class="line"><span class="comment">// æ³¨æ„æ­¤å¤„è°ƒç”¨çš„å‡½æ•°åç§°æ˜¯å°å†™</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">benchmarkFibonacci</span><span class="params">(b *testing.B, num <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; b.N; i++ &#123;</span><br><span class="line">    custom.Fibonacci(num)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// åŸºå‡†æµ‹è¯•çš„å‡½æ•°åä»ç„¶æ˜¯ä»¥Benchmark_å¼€å¤´</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkFib1</span><span class="params">(b *testing.B)</span></span>  &#123; benchmarkFibonacci(b, <span class="number">1</span>) &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkFib2</span><span class="params">(b *testing.B)</span></span>  &#123; benchmarkFibonacci(b, <span class="number">2</span>) &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkFib3</span><span class="params">(b *testing.B)</span></span>  &#123; benchmarkFibonacci(b, <span class="number">3</span>) &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkFib10</span><span class="params">(b *testing.B)</span></span> &#123; benchmarkFibonacci(b, <span class="number">10</span>) &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkFib20</span><span class="params">(b *testing.B)</span></span> &#123; benchmarkFibonacci(b, <span class="number">20</span>) &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkFib40</span><span class="params">(b *testing.B)</span></span> &#123; benchmarkFibonacci(b, <span class="number">40</span>) &#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœ:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">âœ  performancetest go test -v -bench&#x3D;. -benchmem --run&#x3D;none               t    </span><br><span class="line">goos: linux</span><br><span class="line">goarch: amd64</span><br><span class="line">pkg: weiyigeek.top&#x2F;studygo&#x2F;Day08&#x2F;06unit&#x2F;performancetest</span><br><span class="line">cpu: Intel(R) Core(TM) i5-3570 CPU @ 3.40GHz</span><br><span class="line">BenchmarkFib1</span><br><span class="line">BenchmarkFib1-4         486133974                2.413 ns&#x2F;op           0 B&#x2F;op          0 allocs&#x2F;op</span><br><span class="line">BenchmarkFib2</span><br><span class="line">BenchmarkFib2-4         342832730                3.470 ns&#x2F;op           0 B&#x2F;op          0 allocs&#x2F;op</span><br><span class="line">BenchmarkFib3</span><br><span class="line">BenchmarkFib3-4         159815354                7.474 ns&#x2F;op           0 B&#x2F;op          0 allocs&#x2F;op</span><br><span class="line">BenchmarkFib10</span><br><span class="line">BenchmarkFib10-4         4603944               253.9 ns&#x2F;op             0 B&#x2F;op          0 allocs&#x2F;op</span><br><span class="line">BenchmarkFib20</span><br><span class="line">BenchmarkFib20-4           37526             31440 ns&#x2F;op               0 B&#x2F;op          0 allocs&#x2F;op</span><br><span class="line">BenchmarkFib40</span><br><span class="line">BenchmarkFib40-4               3         477559446 ns&#x2F;op               0 B&#x2F;op          0 allocs&#x2F;op</span><br><span class="line">PASS</span><br><span class="line">ok      weiyigeek.top&#x2F;studygo&#x2F;Day08&#x2F;06unit&#x2F;performancetest      10.741s</span><br></pre></td></tr></table></figure>
<p>ä»ä¸Šé¢çš„ç»“æœå¯ä»¥çœ‹å‡º,æ–æ³¢é‚£å¥‘å€¼è¶Šå°å…¶æ‰§è¡Œæ¬¡æ•°è¶Šå¤š,å¹³å‡æ‰§è¡Œæ—¶é—´å°±è¶Šå°,è€Œéšç€æµ‹è¯•æ•°æ®çš„å¢å¤§ï¼Œå¹³å‡æ‰§è¡Œæ—¶é—´å˜å¾—è¶Šæ¥è¶Šå¤§ï¼Œäºæ­¤åŒæ—¶æ€»æ‰§è¡Œæ¬¡æ•°ä¹Ÿå˜å°‘äº†ã€‚</p>
<p>å½“ç„¶æˆ‘ä»¬å¯ä»¥æŒ‡å®šåŸºå‡†æµ‹è¯•å‡½æ•°ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨<code>-benchtime</code>æ ‡å¿—å¢åŠ æœ€å°åŸºå‡†æ—¶é—´ï¼Œä»¥äº§ç”Ÿæ›´å‡†ç¡®çš„ç»“æœï¼Œä¾‹å¦‚:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ­¤å¤„åŸºå‡†æµ‹è¯•æ—¶é—´ä¸º20s</span></span><br><span class="line">âœ  performancetest go <span class="built_in">test</span> -v -bench=BenchmarkFib40 -benchmem --run=none -benchtime=20s</span><br><span class="line">goos: linux</span><br><span class="line">goarch: amd64</span><br><span class="line">pkg: weiyigeek.top/studygo/Day08/06unit/performancetest</span><br><span class="line">cpu: Intel(R) Core(TM) i5-3570 CPU @ 3.40GHz</span><br><span class="line">BenchmarkFib40</span><br><span class="line">BenchmarkFib40-4              48         474603992 ns/op               0 B/op          0 allocs/op</span><br><span class="line">PASS</span><br><span class="line">ok      weiyigeek.top/studygo/Day08/06unit/performancetest      23.277s</span><br></pre></td></tr></table></figure>
<p>è¡¥å……è¯´æ˜: ä½¿ç”¨æ€§èƒ½æ¯”è¾ƒå‡½æ•°åšæµ‹è¯•çš„æ—¶å€™ä¸€ä¸ªå®¹æ˜“çŠ¯çš„é”™è¯¯å°±æ˜¯æŠŠ<code>b.N</code>ä½œä¸ºè¾“å…¥çš„å¤§å°ï¼Œä¾‹å¦‚ä»¥ä¸‹ä¸¤ä¸ªä¾‹å­éƒ½æ˜¯é”™è¯¯çš„ç¤ºèŒƒ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; é”™è¯¯ç¤ºèŒƒ1.ä¼šä¸€è‡´æ‰§è¡Œä¸‹å»ï¼Œé™¤éæœ‰é€€å‡ºæ¡ä»¶ï¼Œä½†æ˜¯é€šå¸¸æƒ…å†µä¸‹ä¸ä¼šè¿™æ ·å»åšã€‚</span><br><span class="line">func BenchmarkFibWrong(b *testing.B) &#123;</span><br><span class="line">  for n :&#x3D; 0; n &lt; b.N; n++ &#123;</span><br><span class="line">    Fib(n)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; é”™è¯¯ç¤ºèŒƒ2</span><br><span class="line">func BenchmarkFibWrong2(b *testing.B) &#123;</span><br><span class="line">  Fib(b.N)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br/></p>
<h4 id="2-3-å¹¶è¡Œæµ‹è¯•ç”¨ä¾‹"><a href="#2-3-å¹¶è¡Œæµ‹è¯•ç”¨ä¾‹" class="headerlink" title="2.3 å¹¶è¡Œæµ‹è¯•ç”¨ä¾‹"></a>2.3 å¹¶è¡Œæµ‹è¯•ç”¨ä¾‹</h4><p>æè¿°: æœ‰æ—¶å¯èƒ½ä½ éœ€è¦æµ‹è¯•ä¸€ä¸ªä»»åŠ¡åœ¨å¹¶è¡Œæ—¶æ‰§è¡Œçš„æ€§èƒ½ç»“æœ,è€Œ <code>func (b *B) RunParallel(body func(*PB))</code>ä¼šä»¥å¹¶è¡Œçš„æ–¹å¼æ‰§è¡Œç»™å®šçš„åŸºå‡†æµ‹è¯•ã€‚</p>
<p><code>RunParallel</code>ä¼šåˆ›å»ºå‡ºå¤šä¸ª<code>goroutine</code>ï¼Œå¹¶å°†<code>b.N</code>åˆ†é…ç»™è¿™äº›<code>goroutine</code>æ‰§è¡Œï¼Œ å…¶ä¸­<code>goroutine</code>æ•°é‡çš„é»˜è®¤å€¼ä¸º<code>GOMAXPROCS</code>ã€‚</p>
<p>å¦‚æœæƒ³è¦å¢åŠ éCPUå—é™ï¼ˆnon-CPU-boundï¼‰åŸºå‡†æµ‹è¯•çš„å¹¶è¡Œæ€§ï¼Œ é‚£ä¹ˆå¯ä»¥åœ¨<code>RunParallel</code>ä¹‹å‰è°ƒç”¨<code>b.SetParallelism()</code> ã€‚å¦å¤–ä¸€ç§æ–¹å¼ <code>RunParallel</code>é€šå¸¸ä¼šä¸<code>-cpu</code>æ ‡å¿—ä¸€åŒä½¿ç”¨æ¥æŒ‡å®šä½¿ç”¨çš„CPUæ•°æ®ã€‚</p>
<p>å¦‚æœä½ æƒ³åœ¨æ­£å¼æµ‹è¯•å‡½æ•°æ€§èƒ½å‰,é™¤å»é…ç½®é¢„åŠ è½½æ‰€å è€—æ—¶ï¼Œåˆ™æˆ‘ä»¬å¯ä»¥é‡‡ç”¨<code>b.ResetTimer()</code>æ¥é‡ç½®è®¡æ•°å™¨ï¼Œå®ƒä¼šå¿½ç•¥åœ¨å®ƒä¹‹å‰ä»£ç å—æ‰§è¡Œçš„æ—¶é—´ï¼Œå¹¶ä¸”ä¹Ÿä¸ä¼šè¾“å‡ºåˆ°æŠ¥å‘Šä¹‹ä¸­ã€‚</p>
<p><br/></p>
<p><strong>åŸºç¡€ç¤ºä¾‹:</strong><br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> goroutinetest</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">"testing"</span></span><br><span class="line">  <span class="string">"time"</span></span><br><span class="line">  custom <span class="string">"weiyigeek.top/packeage/myself"</span></span><br><span class="line">)</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkSplitParaller</span><span class="params">(b *testing.B)</span></span> &#123;</span><br><span class="line">  <span class="comment">// å‡è®¾éœ€è¦åšä¸€äº›è€—æ—¶çš„æ— å…³æ“ä½œ</span></span><br><span class="line">  time.Sleep(<span class="number">5</span> * time.Second)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¢åŠ éCPUå—é™ï¼ˆnon-CPU-boundï¼‰åŸºå‡†æµ‹è¯•çš„å¹¶è¡Œæ€§ï¼Œå³è®¾ç½®ä½¿ç”¨çš„CPUæ•°</span></span><br><span class="line">  b.SetParallelism(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é‡ç½®è®¡æ—¶å™¨</span></span><br><span class="line">  b.ResetTimer()</span><br><span class="line"></span><br><span class="line">  <span class="comment">//ä»¥å¹¶è¡Œçš„æ–¹å¼ï¼Œæ‰§è¡Œç»™å®šçš„åŸºå‡†æµ‹è¯•ã€‚</span></span><br><span class="line">  b.RunParallel(<span class="function"><span class="keyword">func</span><span class="params">(pb *testing.PB)</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> pb.Next() &#123;</span><br><span class="line">      custom.Split(<span class="string">"http://blog.weiyigeek.top"</span>, <span class="string">"."</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><br/></p>
<p><strong>æ‰§è¡Œç»“æœ:</strong><br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.å¹¶è¡Œæµ‹è¯•ä¸æ—¶é—´é‡ç½®æµ‹è¯•</span></span><br><span class="line">âœ  goroutinetest <span class="keyword">go</span> test -bench=. -v -benchmem</span><br><span class="line">goos: linux</span><br><span class="line">goarch: amd64</span><br><span class="line">pkg: weiyigeek.top/studygo/Day08/<span class="number">06</span>unit/goroutinetest</span><br><span class="line">cpu: Intel(R) Core(TM) i5<span class="number">-3570</span> CPU @ <span class="number">3.40</span>GHz</span><br><span class="line">BenchmarkSplitParaller</span><br><span class="line">BenchmarkSplitParaller<span class="number">-4</span>        <span class="number">34091397</span>                <span class="number">31.58</span> ns/op           <span class="number">48</span> B/op          <span class="number">1</span> allocs/op</span><br><span class="line">PASS</span><br><span class="line">ok      weiyigeek.top/studygo/Day08/<span class="number">06</span>unit/goroutinetest        <span class="number">26.130s</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.æ³¨é‡Š time.Sleep(5 * time.Second) å’Œ 	b.ResetTimer() åçš„ç»“æœ</span></span><br><span class="line">âœ  goroutinetest <span class="keyword">go</span> test -bench=. -v          </span><br><span class="line">goos: linux</span><br><span class="line">goarch: amd64</span><br><span class="line">pkg: weiyigeek.top/studygo/Day08/<span class="number">06</span>unit/goroutinetest</span><br><span class="line">cpu: Intel(R) Core(TM) i5<span class="number">-3570</span> CPU @ <span class="number">3.40</span>GHz</span><br><span class="line">BenchmarkSplitParaller</span><br><span class="line">BenchmarkSplitParaller<span class="number">-4</span>        <span class="number">35342922</span>                <span class="number">32.61</span> ns/op</span><br><span class="line">PASS</span><br><span class="line">ok      weiyigeek.top/studygo/Day08/<span class="number">06</span>unit/goroutinetest        <span class="number">1.955s</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.å†æ³¨é‡Š b.SetParallelism(2) æ­¤æ—¶åˆ©ç”¨ -cpu å‚æ•°æŒ‡å®šä¸¤ä¸ªCPUè¿›è¡Œç»“æœæŸ¥çœ‹</span></span><br><span class="line">âœ  goroutinetest <span class="keyword">go</span> test -bench=. -v -cpu <span class="number">2</span> --benchmem </span><br><span class="line">goos: linux</span><br><span class="line">goarch: amd64</span><br><span class="line">pkg: weiyigeek.top/studygo/Day08/<span class="number">06</span>unit/goroutinetest</span><br><span class="line">cpu: Intel(R) Core(TM) i5<span class="number">-3570</span> CPU @ <span class="number">3.40</span>GHz</span><br><span class="line">BenchmarkSplitParaller</span><br><span class="line">BenchmarkSplitParaller<span class="number">-2</span>        <span class="number">21463302</span>                <span class="number">54.96</span> ns/op           <span class="number">48</span> B/op          <span class="number">1</span> allocs/op</span><br><span class="line">PASS</span><br><span class="line">ok      weiyigeek.top/studygo/Day08/<span class="number">06</span>unit/goroutinetest        <span class="number">2.253s</span></span><br></pre></td></tr></table></figure></p>
<p>ç”±ä¸Šé¢çš„ç»“æœåˆ†æå¯çŸ¥åˆ©ç”¨<code>b.SetParallelism(2)</code>æ¯”é‡‡ç”¨<code>-cpu 2</code>å‚æ•°æŒ‡å®šCPUçš„æ•°é‡æ•ˆç‡æ›´é«˜,æ¯ç§’å¯ä»¥<code>æ‰§è¡Œçš„æ¬¡æ•°35342922</code>æ˜æ˜¾<code>å¤§äº-cpuå‚æ•°æ‰§è¡Œçš„ç»“æœ(21463302)</code>ï¼Œå¹¶ä¸”é‡ç½®æ—¶é—´ <code>b.ResetTimer()</code> æ•ˆæœè¿˜æ˜¯æ¯”è¾ƒæ˜æ˜¾çš„ã€‚</p>
<p><br/></p>
<h3 id="3-è®¾ç½®æ‹†å¸æµ‹è¯•"><a href="#3-è®¾ç½®æ‹†å¸æµ‹è¯•" class="headerlink" title="3.è®¾ç½®æ‹†å¸æµ‹è¯•"></a>3.è®¾ç½®æ‹†å¸æµ‹è¯•</h3><p>æè¿°: æœ‰æ—¶æµ‹è¯•ç¨‹åºéœ€è¦åœ¨æµ‹è¯•ä¹‹å‰<code>è¿›è¡Œé¢å¤–çš„è®¾ç½®ï¼ˆsetupï¼‰</code>æˆ–åœ¨æµ‹è¯•ä¹‹å<code>è¿›è¡Œæ‹†å¸ï¼ˆteardownï¼‰</code>ã€‚</p>
<h4 id="3-1-TestMain-ç”¨ä¾‹"><a href="#3-1-TestMain-ç”¨ä¾‹" class="headerlink" title="3.1 TestMain ç”¨ä¾‹"></a>3.1 TestMain ç”¨ä¾‹</h4><p>ä¾‹å¦‚: é€šè¿‡åœ¨<code>*_test.go</code>æ–‡ä»¶ä¸­å®šä¹‰<code>TestMain</code>å‡½æ•°æ¥å¯ä»¥åœ¨æµ‹è¯•ä¹‹å‰è¿›è¡Œé¢å¤–çš„è®¾ç½®ï¼ˆsetupï¼‰æˆ–åœ¨æµ‹è¯•ä¹‹åè¿›è¡Œæ‹†å¸ï¼ˆteardownï¼‰æ“ä½œã€‚</p>
<p>å¦‚æœæµ‹è¯•æ–‡ä»¶åŒ…å«å‡½æ•°: <code>func TestMain(m *testing.M)</code> é‚£ä¹ˆç”Ÿæˆçš„æµ‹è¯•ä¼šå…ˆè°ƒç”¨ TestMain(m)ï¼Œå…¶è¿è¡Œåœ¨ä¸»goroutineä¸­, å¯ä»¥åœ¨è°ƒç”¨ m.Run å‰ååšä»»ä½•è®¾ç½®ï¼ˆsetupï¼‰å’Œæ‹†å¸ï¼ˆteardownï¼‰,<code>ã€éå¸¸æ³¨æ„ã€‘é€€å‡ºæµ‹è¯•çš„æ—¶å€™åº”è¯¥ä½¿ç”¨ m.Run çš„è¿”å›å€¼ä½œä¸ºå‚æ•°è°ƒç”¨ os.Exit</code>ã€‚</p>
<p>ä½¿ç”¨TestMainæ¥è®¾ç½®Setupå’ŒTearDownçš„ç¤ºä¾‹å¦‚ä¸‹ï¼š<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> setupteardown</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">"flag"</span></span><br><span class="line">  <span class="string">"fmt"</span></span><br><span class="line">  <span class="string">"os"</span></span><br><span class="line">  <span class="string">"testing"</span></span><br><span class="line">)</span><br><span class="line"><span class="comment">// Mæ˜¯ä¼ é€’ç»™TestMainå‡½æ•°ä»¥è¿è¡Œå®é™…æµ‹è¯•çš„ç±»å‹ã€‚</span></span><br><span class="line"><span class="comment">// æ‰§è¡Œç¬¬ä¸€æ­¥</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestMain</span><span class="params">(m *testing.M)</span></span> &#123;</span><br><span class="line">  <span class="keyword">var</span> name <span class="keyword">string</span></span><br><span class="line">  flag.StringVar(&amp;name, <span class="string">"name"</span>, <span class="string">"å¼ ä¸‰"</span>, <span class="string">"å§“å"</span>)</span><br><span class="line">  flag.Parse()                                             <span class="comment">// å¦‚æœ TestMain ä½¿ç”¨äº† flags æ­¤å¤„åº”è¯¥åŠ ä¸Šè§£æ</span></span><br><span class="line">  fmt.Println(<span class="string">"## Step1.write setup code here...TestMain"</span>) <span class="comment">// æµ‹è¯•ä¹‹å‰çš„åšä¸€äº›è®¾ç½®å·¥ä½œ</span></span><br><span class="line">  ret := m.Run()</span><br><span class="line">  fmt.Println(<span class="string">"## Step4.write teardown code here..."</span>, ret) <span class="comment">// æµ‹è¯•ä¹‹ååšä¸€äº›æ‹†å¸å·¥ä½œ</span></span><br><span class="line">  os.Exit(ret)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰§è¡Œç¬¬äºŒæ­¥</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestUser</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  fmt.Println(<span class="string">"# Step2.write setup code here...ã€TestUserã€‘"</span>) <span class="comment">// æµ‹è¯•TestUserå‡½æ•°å®šä¹‰æ‰§è¡Œ</span></span><br><span class="line">  fmt.Println(<span class="string">"æ­£åœ¨æµ‹è¯•æ‰§è¡Œç¬¬äºŒæ­¥: å¼€å§‹æµ‹è¯•å­æµ‹è¯•å‡½æ•°"</span>)</span><br><span class="line">  t.Run(<span class="string">"è°ƒç”¨ testFunc ä¸­"</span>, testFunc) <span class="comment">// è°ƒç”¨æµ‹è¯•TestEndå‡½æ•°ï¼Œæ³¨æ„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°å¦‚æœ‰ç©ºæ ¼å°†ä¼šè¢«ä¸‹åˆ’çº¿æ›¿ä»£ã€‚</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">testFunc</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  fmt.Println(<span class="string">"è¿™æ—¶æµ‹è¯•çš„testFuncçš„å‡½æ•°ï¼Œåç§°ä¸ºtestFunc"</span>)</span><br><span class="line">  time.Sleep(<span class="number">5</span> * time.Second) <span class="comment">// å»¶è¿Ÿäº”ç§’é’Ÿï¼Œçœ‹æ•ˆæœ</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰§è¡Œç¬¬ä¸‰æ­¥</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestEnd</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  fmt.Println(<span class="string">"# Step3.write setup code here...ã€TestEndã€‘"</span>) <span class="comment">// æµ‹è¯•TestEndå‡½æ•°å®šä¹‰æ‰§è¡Œ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>æ‰§è¡Œç»“æœ:</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">âœ  setupteardown go <span class="built_in">test</span> -v</span><br><span class="line"><span class="comment">## Step1.write setup code here...TestMain   # å…³é”®ç‚¹ m.Run() ä¹‹å‰çš„ä»£ç å—</span></span><br><span class="line">=== RUN   TestUser</span><br><span class="line"><span class="comment"># Step2.write setup code here...ã€TestUserã€‘</span></span><br><span class="line">æ­£åœ¨æµ‹è¯•æ‰§è¡Œç¬¬äºŒæ­¥: å¼€å§‹æµ‹è¯•å­æµ‹è¯•å‡½æ•°</span><br><span class="line">=== RUN   TestUser/è°ƒç”¨_testFunc_ä¸­</span><br><span class="line">è¿™æ—¶æµ‹è¯•çš„testFuncçš„å‡½æ•°ï¼Œåç§°ä¸ºtestFunc</span><br><span class="line">--- PASS: TestUser (5.00s)  <span class="comment"># å¯ä»¥çœ‹åˆ°å»¶è¿Ÿçš„5s</span></span><br><span class="line">    --- PASS: TestUser/è°ƒç”¨_testFunc_ä¸­ (5.00s)</span><br><span class="line">=== RUN   TestEnd</span><br><span class="line"><span class="comment"># Step3.write setup code here...ã€TestEndã€‘</span></span><br><span class="line">--- PASS: TestEnd (0.00s)</span><br><span class="line">PASS</span><br><span class="line"><span class="comment">## Step4.write teardown code here... 0                       # å…³é”®ç‚¹ m.Run() ä¹‹åçš„ä»£ç å—</span></span><br><span class="line">ok weiyigeek.top/studygo/Day08/06unit/setupteardown  5.007s  <span class="comment">#</span></span><br></pre></td></tr></table></figure></p>
<p>Tips : æ³¨æ„çš„æ˜¯åœ¨è°ƒç”¨ TestMain æ—¶, flag.Parseå¹¶æ²¡æœ‰è¢«è°ƒç”¨ã€‚æ‰€ä»¥å¦‚æœTestMain ä¾èµ–äºcommand-lineæ ‡å¿— (åŒ…æ‹¬ testing åŒ…çš„æ ‡è®°), åˆ™åº”è¯¥æ˜¾ç¤ºçš„è°ƒç”¨flag.Parseã€‚</p>
<p>Tips : æµ‹è¯•åŒ…ä¸­çš„ <em>testing.T ä¸ </em>testing.M ä¹‹é—´åŒºåˆ«æ˜¯å‰è€…æ˜¯æ™®é€šæµ‹è¯•åŒ…,è€Œå¯ä»¥åœ¨æµ‹è¯•å‡½æ•°æ‰§è¡Œä¹‹å‰åšä¸€äº›å…¶ä»–æ“ä½œã€‚</p>
<p><br></p>
<h4 id="3-2-å­æµ‹è¯•é›†è®¾ç½®æ‹†å¸"><a href="#3-2-å­æµ‹è¯•é›†è®¾ç½®æ‹†å¸" class="headerlink" title="3.2 å­æµ‹è¯•é›†è®¾ç½®æ‹†å¸"></a>3.2 å­æµ‹è¯•é›†è®¾ç½®æ‹†å¸</h4><p>æè¿°: æœ‰æ—¶å€™æˆ‘ä»¬å¯èƒ½éœ€è¦ä¸ºæ¯ä¸ªæµ‹è¯•é›†è®¾ç½®Setupä¸Teardownï¼Œä¹Ÿæœ‰å¯èƒ½éœ€è¦ä¸ºæ¯ä¸ªå­æµ‹è¯•è®¾ç½®<code>Setup</code>ä¸<code>Teardown</code>ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬å®šä¹‰ä¸¤ä¸ªå‡½æ•°å·¥å…·å‡½æ•°ä»¥åŠå•å…ƒç»„æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> childsetupteardown</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">"reflect"</span></span><br><span class="line">  <span class="string">"testing"</span></span><br><span class="line">  custom <span class="string">"weiyigeek.top/packeage/myself"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.æµ‹è¯•é›†çš„Setupä¸Teardown</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">setupTestCase</span><span class="params">(t *testing.T)</span> <span class="title">func</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  t.Log(<span class="string">"[æµ‹è¯•é›†] ä¹‹å‰çš„ setup....."</span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">    t.Log(<span class="string">"[æµ‹è¯•é›†] ä¹‹åçš„ teardown....."</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.å­æµ‹è¯•çš„Setupä¸Teardown</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">setupSubTest</span><span class="params">(t *testing.T)</span> <span class="title">func</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  t.Log(<span class="string">"#[å­æµ‹è¯•é›†] ä¹‹å‰çš„ setup-------"</span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">    t.Log(<span class="string">"#[å­æµ‹è¯•é›†] ä¹‹åçš„ teardown--------"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.å•å…ƒæµ‹è¯•å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestSplit</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">  <span class="keyword">type</span> test <span class="keyword">struct</span> &#123; <span class="comment">// 3.1 å®šä¹‰testç»“æ„ä½“</span></span><br><span class="line">    input <span class="keyword">string</span></span><br><span class="line">    sep   <span class="keyword">string</span></span><br><span class="line">    want  []<span class="keyword">string</span></span><br><span class="line">  &#125;</span><br><span class="line">  tests := <span class="keyword">map</span>[<span class="keyword">string</span>]test&#123; <span class="comment">// 3.2 æµ‹è¯•ç”¨ä¾‹ä½¿ç”¨mapå­˜å‚¨å®ä¾‹åŒ–</span></span><br><span class="line">    <span class="string">"simple"</span>:      &#123;input: <span class="string">"a:b:c"</span>, sep: <span class="string">":"</span>, want: []<span class="keyword">string</span>&#123;<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>&#125;&#125;,</span><br><span class="line">    <span class="string">"wrong sep"</span>:   &#123;input: <span class="string">"a:b:c"</span>, sep: <span class="string">","</span>, want: []<span class="keyword">string</span>&#123;<span class="string">"a:b:c"</span>&#125;&#125;,</span><br><span class="line">    <span class="string">"more sep"</span>:    &#123;input: <span class="string">"abcd"</span>, sep: <span class="string">"bc"</span>, want: []<span class="keyword">string</span>&#123;<span class="string">"a"</span>, <span class="string">"d"</span>&#125;&#125;,</span><br><span class="line">    <span class="string">"leading sep"</span>: &#123;input: <span class="string">"åšå®¢.blog.weiyigeek.top"</span>, sep: <span class="string">"."</span>, want: []<span class="keyword">string</span>&#123;<span class="string">"åšå®¢"</span>, <span class="string">"blog"</span>, <span class="string">"weiyigeek"</span>, <span class="string">"top"</span>&#125;&#125;,</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  teardownTestCase := setupTestCase(t) <span class="comment">// 3.3 æµ‹è¯•ä¹‹å‰æ‰§è¡Œsetupæ“ä½œ  ã€å…³é”®ç‚¹ã€‘</span></span><br><span class="line">  <span class="keyword">defer</span> teardownTestCase(t)            <span class="comment">// 3.4 æµ‹è¯•ä¹‹åæ‰§è¡Œtestdoenæ“ä½œ ã€å…³é”®ç‚¹ã€‘</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 3.5 å¾ªç¯éå†å­æµ‹è¯•</span></span><br><span class="line">  <span class="keyword">for</span> name, tc := <span class="keyword">range</span> tests &#123;</span><br><span class="line">    t.Run(name, <span class="function"><span class="keyword">func</span><span class="params">(t *testing.T)</span></span> &#123; <span class="comment">// 3.6 ä½¿ç”¨t.Run()æ‰§è¡Œå­æµ‹è¯•</span></span><br><span class="line">      teardownSubTest := setupSubTest(t)    <span class="comment">// 3.7 å­æµ‹è¯•ä¹‹å‰æ‰§è¡Œsetupæ“ä½œ ã€å…³é”®ç‚¹ã€‘</span></span><br><span class="line">      <span class="keyword">defer</span> teardownSubTest(t)              <span class="comment">// 3.8 æµ‹è¯•ä¹‹åæ‰§è¡Œtestdoenæ“ä½œã€å…³é”®ç‚¹ã€‘</span></span><br><span class="line">      got := custom.Split(tc.input, tc.sep) <span class="comment">// 3.9 å­—ç¬¦ä¸²åˆ†å‰²è¿”å›ç»“æœ</span></span><br><span class="line">      <span class="keyword">if</span> !reflect.DeepEqual(got, tc.want) &#123; <span class="comment">// 3.10 åˆ©ç”¨åå°„å‡½æ•°åˆ¤æ–­ä¸¤ä¸ªæ•°ç»„</span></span><br><span class="line">        t.Errorf(<span class="string">"expected:%#v, got:%#v"</span>, tc.want, got)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>æ‰§è¡Œç»“æœ:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">âœ  childsetupteardown  go <span class="built_in">test</span> -v          </span><br><span class="line">=== RUN   TestSplit</span><br><span class="line">    st_child_test.go:12: [æµ‹è¯•é›†] ä¹‹å‰çš„ setup.....</span><br><span class="line">=== RUN   TestSplit/simple</span><br><span class="line">    st_child_test.go:20: <span class="comment">#[å­æµ‹è¯•é›†] ä¹‹å‰çš„ setup-------</span></span><br><span class="line">    st_child_test.go:22: <span class="comment">#[å­æµ‹è¯•é›†] ä¹‹åçš„ teardown--------</span></span><br><span class="line">=== RUN   TestSplit/wrong_sep</span><br><span class="line">    st_child_test.go:20: <span class="comment">#[å­æµ‹è¯•é›†] ä¹‹å‰çš„ setup-------</span></span><br><span class="line">    st_child_test.go:22: <span class="comment">#[å­æµ‹è¯•é›†] ä¹‹åçš„ teardown--------</span></span><br><span class="line">=== RUN   TestSplit/more_sep</span><br><span class="line">    st_child_test.go:20: <span class="comment">#[å­æµ‹è¯•é›†] ä¹‹å‰çš„ setup-------</span></span><br><span class="line">    st_child_test.go:22: <span class="comment">#[å­æµ‹è¯•é›†] ä¹‹åçš„ teardown--------</span></span><br><span class="line">=== RUN   TestSplit/leading_sep</span><br><span class="line">    st_child_test.go:20: <span class="comment">#[å­æµ‹è¯•é›†] ä¹‹å‰çš„ setup-------</span></span><br><span class="line">    st_child_test.go:22: <span class="comment">#[å­æµ‹è¯•é›†] ä¹‹åçš„ teardown--------</span></span><br><span class="line">=== CONT  TestSplit</span><br><span class="line">    st_child_test.go:14: [æµ‹è¯•é›†] ä¹‹åçš„ teardown.....</span><br><span class="line">--- PASS: TestSplit (0.00s)</span><br><span class="line">    --- PASS: TestSplit/simple (0.00s)</span><br><span class="line">    --- PASS: TestSplit/wrong_sep (0.00s)</span><br><span class="line">    --- PASS: TestSplit/more_sep (0.00s)</span><br><span class="line">    --- PASS: TestSplit/leading_sep (0.00s)</span><br><span class="line">PASS</span><br><span class="line">ok      weiyigeek.top/studygo/Day08/06unit/childsetupteardown   0.007s</span><br></pre></td></tr></table></figure></p>
<p>ä»ä¸Šé¢çš„ç»“æœå¯ä»¥çœ‹å‡º Setup ä¸ Teardown åœ¨å•å…ƒæµ‹è¯•ä¸­çš„æè¿°, æˆ‘ä»¬å¯ä»¥åˆ©ç”¨å…¶ç‰¹æ€§é¢„åŠ è½½æ•°æ®ï¼Œå¹¶é‡‡ç”¨ä¸Šé¢çš„<code>b.ResetTimer()</code> æ¥é‡ç½®æ€§èƒ½è€—æ—¶ã€‚</p>
<p><br/></p>
<h3 id="4-ç¤ºä¾‹ç”Ÿæˆå‡½æ•°"><a href="#4-ç¤ºä¾‹ç”Ÿæˆå‡½æ•°" class="headerlink" title="4.ç¤ºä¾‹ç”Ÿæˆå‡½æ•°"></a>4.ç¤ºä¾‹ç”Ÿæˆå‡½æ•°</h3><h4 id="4-1-åŸºç¡€è¯´æ˜"><a href="#4-1-åŸºç¡€è¯´æ˜" class="headerlink" title="4.1 åŸºç¡€è¯´æ˜"></a>4.1 åŸºç¡€è¯´æ˜</h4><p>æè¿°: <code>go test</code>ç‰¹æ®Šå¯¹å¾…çš„ç¬¬ä¸‰ç§å‡½æ•°å°±æ˜¯ç¤ºä¾‹å‡½æ•°ï¼Œå®ƒä»¬çš„å‡½æ•°åä»¥<code>Example</code>ä¸ºå‰ç¼€ï¼Œæ³¨æ„ <code>å®ƒä»¬æ—¢æ²¡æœ‰å‚æ•°ä¹Ÿæ²¡æœ‰è¿”å›å€¼ã€‚</code>ã€‚</p>
<p><strong>ç¯å¢ƒå‡†å¤‡:</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è®¾ç½® golang.org ä»£ç†</span></span><br><span class="line">âœ <span class="built_in">export</span> GOPROXY=https://goproxy.io</span><br><span class="line">âœ <span class="built_in">export</span> GO111MODULE=on</span><br><span class="line"><span class="comment">#  æ­¤å‘½ä»¤ä¼šè®¿é—®å®˜ç½‘ä¸‹è½½godocä»¥åŠç›¸å…³ä¾èµ–åŒ…</span></span><br><span class="line">âœ go get golang.org/x/tools/cmd/godoc</span><br><span class="line">  go: downloading golang.org/x/tools v0.1.7</span><br><span class="line">  go: downloading github.com/yuin/goldmark v1.4.0</span><br><span class="line">  go: downloading golang.org/x/net v0.0.0-20210805182204-aaa1db679c0d</span><br><span class="line">  go get: added golang.org/x/tools v0.1.7</span><br><span class="line"><span class="comment"># é¡¹ç›®æ‹‰å–ä¸‹è½½è·¯å¾„è¯´æ˜</span></span><br><span class="line">âœ  go <span class="built_in">cd</span> <span class="variable">$GOPATH</span>/pkg/mod/golang.org/x/</span><br><span class="line">âœ  x <span class="built_in">pwd</span></span><br><span class="line">  /home/weiyigeek/app/program/project/go/pkg/mod/golang.org/x</span><br><span class="line"><span class="comment"># é¡¹ç›®æ„å»ºç”Ÿæˆgodoc</span></span><br><span class="line">âœ go build golang.org/x/tools/cmd/godoc</span><br><span class="line"><span class="comment"># éªŒè¯ç¯å¢ƒå®‰è£… (æ­¤æ—¶ä»–ä¼šå°†ä½ go.modé¡¹ç›®çš„ä¸‹æ‰€æœ‰é™¤_test.goæ–‡ä»¶çš„æœ‰å¤‡æ³¨çš„åŒ…è¿›è¡Œæ˜¾ç¤º)</span></span><br><span class="line"><span class="comment"># è¿è¡Œ godoc å°†ä¼šè‡ªåŠ¨ç”ŸæˆAPIæ–‡æ¡£</span></span><br><span class="line"><span class="comment"># http://localhost:6060/pkg/</span></span><br><span class="line">âœ /home/weiyigeek/app/program/project/go/bin/godoc</span><br></pre></td></tr></table></figure><br><figure class="image-box">
                <a rel=9.Goç¼–ç¨‹å¿«é€Ÿå…¥é—¨å­¦ä¹  href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/5/20211126144053.png" target="_blank" title="WeiyiGeek.godocæ˜¾ç¤ºé¡¹ç›®æ–‡æ¡£" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/5/20211126144053.png" alt="WeiyiGeek.godocæ˜¾ç¤ºé¡¹ç›®æ–‡æ¡£" title="" class=""></a>
                <p>WeiyiGeek.godocæ˜¾ç¤ºé¡¹ç›®æ–‡æ¡£</p>
            </figure></p>
<p><br></p>
<p><strong>è¯­æ³•è¯´æ˜:</strong></p>
<ul>
<li><p>æ–‡ä»¶å¿…é¡»æ”¾åœ¨å½“å‰åŒ…ä¸‹</p>
</li>
<li><p>æ–‡ä»¶åä»¥ <code>example</code> å¼€å¤´, <code>_</code> è¿æ¥, <code>test</code> ç»“å°¾, å¦‚: <code>example_xxx_test.go</code>    </p>
</li>
<li><p>åŒ…åæ˜¯å»ºè®®æ˜¯ <code>å½“å‰åŒ…å</code> +  <code>_test</code> , å¦‚:  <code>strings_test</code>    </p>
</li>
<li><p>å‡½æ•°åç§°çš„æ ¼å¼  <code>func Example[FuncName][_tag]()</code>    </p>
</li>
<li><p>å‡½æ•°æ³¨é‡Šä¼šå±•ç¤ºåœ¨é¡µé¢ä¸Š</p>
</li>
<li><p>å‡½æ•°ç»“å°¾åŠ ä¸Š <code>// Output:</code> æ³¨é‡Š, è¯´æ˜å‡½æ•°è¿”å›çš„å€¼    </p>
</li>
</ul>
<p><br></p>
<p>Exampleç¤ºä¾‹å…¶è¯­æ³•æ ‡å‡†æ ¼å¼å¦‚ä¸‹ï¼š<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ–‡ä»¶å¿…é¡»æ”¾åœ¨ example_test åŒ…ç›®å½•ä¸‹, åå­—å¿…é¡»ä¸º example_xxx_test.go</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Package example_test ä¸º example åŒ…çš„ç¤ºä¾‹ </span></span><br><span class="line"><span class="keyword">package</span> exampletest</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­¤æ³¨é‡Šå°†ä¼šè¢«å±•ç¤ºåœ¨é¡µé¢ä¸Š </span></span><br><span class="line"><span class="comment">// æ­¤å‡½æ•°å°†è¢«å±•ç¤ºåœ¨OverViewåŒºåŸŸ</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ExampleName</span><span class="params">()</span></span> &#123;</span><br><span class="line">  fmt.Println(<span class="string">"Hello OverView"</span>) </span><br><span class="line">  <span class="comment">// Output:</span></span><br><span class="line">  <span class="comment">// Hello OverView</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ExampleName_test</span><span class="params">()</span></span> &#123;</span><br><span class="line">  fmt.Println(<span class="string">"Hello Test"</span>) </span><br><span class="line">  <span class="comment">// Output:</span></span><br><span class="line">  <span class="comment">// Hello Test</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Tips : é€šå¸¸æƒ…å†µä¸‹<code>åŒ…å_test.go</code>ä¸<code>example_test.go</code>æˆ–è€…<code>example_åŒ…å_test.go</code>éƒ½åœ¨åŒä¸€ä¸ªåŒ…ä¸‹ã€‚</p>
<p><br/></p>
<p>ä¸ºä½ çš„ä»£ç ç¼–å†™ç¤ºä¾‹ä»£ç æœ‰å¦‚ä¸‹ä¸‰ä¸ªç”¨å¤„ï¼š</p>
<ul>
<li>1.ç¤ºä¾‹å‡½æ•°èƒ½å¤Ÿä½œä¸ºæ–‡æ¡£ç›´æ¥ä½¿ç”¨ï¼Œä¾‹å¦‚åŸºäºwebçš„godocä¸­èƒ½æŠŠç¤ºä¾‹å‡½æ•°ä¸å¯¹åº”çš„å‡½æ•°æˆ–åŒ…ç›¸å…³è”ã€‚</li>
<li>2.ç¤ºä¾‹å‡½æ•°åªè¦åŒ…å«äº†<code>//Output</code>ä¹Ÿæ˜¯å¯ä»¥é€šè¿‡go testè¿è¡Œçš„å¯æ‰§è¡Œæµ‹è¯•ï¼Œä¾‹å¦‚:<code>// Output: &lt;æ¢è¡Œç¬¦&gt;// Hello OverView</code></li>
<li>3.ç¤ºä¾‹å‡½æ•°æä¾›äº†å¯ä»¥ç›´æ¥è¿è¡Œçš„ç¤ºä¾‹ä»£ç ï¼Œå¯ä»¥ç›´æ¥åœ¨<code>golang.org</code>çš„<code>godocæ–‡æ¡£æœåŠ¡å™¨ä¸Š</code>ä½¿ç”¨<code>Go Playground</code>è¿è¡Œç¤ºä¾‹ä»£ç ã€‚</li>
</ul>
<p><br/></p>
<h4 id="4-2-ç¤ºä¾‹æ¼”ç¤º"><a href="#4-2-ç¤ºä¾‹æ¼”ç¤º" class="headerlink" title="4.2 ç¤ºä¾‹æ¼”ç¤º"></a>4.2 ç¤ºä¾‹æ¼”ç¤º</h4><p>ä¾‹å¦‚: ä¸‹é¢æˆ‘ä»¬åˆ†åˆ«åœ¨ä¸Šé¢ç¼–å†™çš„ <code>Split()</code> ä¸ <code>Fibinacci()</code> å‡½æ•°ä¸ºä¾‹ï¼Œç”Ÿæˆå…¶ä½¿ç”¨å¸®åŠ©æ–‡æ¡£ã€‚</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Package exampletest åŒ…æ–‡æ¡£ç”Ÿæˆç¤ºä¾‹</span></span><br><span class="line"><span class="comment">//----- example_test.go -----</span></span><br><span class="line"><span class="keyword">package</span> exampletest</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">"fmt"</span></span><br><span class="line">  custom <span class="string">"weiyigeek.top/packeage/myself"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­¤æ³¨é‡Šå°†ä¼šè¢«å±•ç¤ºåœ¨é¡µé¢ä¸Š</span></span><br><span class="line"><span class="comment">// æ­¤å‡½æ•°å°†è¢«å±•ç¤ºåœ¨OverViewåŒºåŸŸ</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Example</span><span class="params">()</span></span> &#123;</span><br><span class="line">  fmt.Println(<span class="string">"Hello OverView"</span>)</span><br><span class="line">  <span class="comment">// Output:</span></span><br><span class="line">  <span class="comment">// Hello OverView</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­¤å‡½æ•°å°†è¢«å±•ç¤ºåœ¨OverViewåŒºåŸŸ, å¹¶å±•ç¤ºnoOutputæ ‡ç­¾</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Example_noOutput</span><span class="params">()</span></span> &#123;</span><br><span class="line">  fmt.Println(<span class="string">"Hello OverView"</span>)</span><br><span class="line">  <span class="comment">// (Output: ) éå¿…é¡», å­˜åœ¨æ—¶å°†ä¼šå±•ç¤ºè¾“å‡ºç»“æœ, æ­¤å¤„ä¸å­˜åœ¨åˆ™ä¸ä¼šåœ¨go test -v ç»“æœé›†ä¸­è¾“å‡º</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­¤å‡½æ•°å°†è¢«å±•ç¤ºåœ¨FunctionåŒºåŸŸ</span></span><br><span class="line"><span class="comment">// ExampleSplit å­—ç¬¦ä¸²åˆ†å‰²å‡½æ•°ä½¿ç”¨è¯´æ˜</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Example_funSplit</span><span class="params">()</span></span> &#123;</span><br><span class="line">  res1 := custom.Split(<span class="string">"www.weiyigeek.top"</span>, <span class="string">"."</span>)</span><br><span class="line">  res2 := custom.Split(<span class="string">"blog.weiyigeek.top"</span>, <span class="string">"."</span>)</span><br><span class="line">  fmt.Println(res1)</span><br><span class="line">  fmt.Println(res2)</span><br><span class="line">  <span class="comment">// Output:</span></span><br><span class="line">  <span class="comment">// [www weiyigeek top]</span></span><br><span class="line">  <span class="comment">// [blog weiyigeek top]</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­¤å‡½æ•°å°†è¢«å±•ç¤ºåœ¨FunctionåŒºåŸŸ</span></span><br><span class="line"><span class="comment">// ExampleFibonacci æ–æ³¢é‚£å¥‘æ•°åˆ—ç”Ÿæˆè¯´æ˜</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Example_funFibonacci</span><span class="params">()</span></span> &#123;</span><br><span class="line">  fib := custom.Fibonacci(<span class="number">3</span>)</span><br><span class="line">  fmt.Println(fib)</span><br><span class="line">  <span class="comment">// Output:</span></span><br><span class="line">  <span class="comment">// 2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œç»“æœ<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">âœ  example_test go <span class="built_in">test</span> -v</span><br><span class="line">=== RUN   Example</span><br><span class="line">--- PASS: Example (0.00s)</span><br><span class="line">=== RUN   Example_funSplit</span><br><span class="line">--- PASS: Example_funSplit (0.00s)</span><br><span class="line">=== RUN   Example_funFibonacci</span><br><span class="line">--- PASS: Example_funFibonacci (0.00s)</span><br><span class="line">PASS</span><br><span class="line">ok      weiyigeek.top/studygo/Day08/06unit/example_test 0.003s</span><br></pre></td></tr></table></figure></p>

        </div>
        
  <hr>
  <p> æ¬¢è¿å„ä½å¿—åŒé“åˆçš„æœ‹å‹ä¸€èµ·å­¦ä¹ äº¤æµï¼Œå¦‚æ–‡ç« æœ‰è¯¯è¯·åœ¨ä¸‹æ–¹ç•™ä¸‹æ‚¨å®è´µçš„ç»éªŒçŸ¥è¯†ï¼Œä¸ªäººé‚®ç®±åœ°å€<b style="color:#ff654e"><code>ã€master#weiyigeek.topã€‘</code></b>æˆ–è€…ä¸ªäººå…¬ä¼—å·<b style="color:#ff654e"><code>ã€WeiyiGeekã€‘</code></b>è”ç³»æˆ‘ã€‚ </p>

  <p> æ›´å¤šæ–‡ç« æ¥æºäº<b style="color:#03a9f4">ã€WeiyiGeek Blog - ä¸ºäº†èƒ½åˆ°è¿œæ–¹ï¼Œè„šä¸‹çš„æ¯ä¸€æ­¥éƒ½ä¸èƒ½å°‘ã€‘</b>, ä¸ªäººé¦–é¡µåœ°å€( <a style="color: #03a9f4;" href="https://weiyigeek.top" target="_blank"> https://weiyigeek.top </a> )</p>

  <p>ä¸“æ ä¹¦å†™ä¸æ˜“ï¼Œå¦‚æœæ‚¨è§‰å¾—è¿™ä¸ªä¸“æ è¿˜ä¸é”™çš„ï¼Œè¯·ç»™è¿™ç¯‡ä¸“æ  <b style="color: red;">ã€ç‚¹ä¸ªèµã€æŠ•ä¸ªå¸ã€æ”¶ä¸ªè—ã€å…³ä¸ªæ³¨ï¼Œè½¬ä¸ªå‘ã€‘(äººé—´äº”å¤§æƒ…)</b>ï¼Œè¿™å°†å¯¹æˆ‘çš„è‚¯å®šï¼Œè°¢è°¢ï¼ã€‚</p>

  <div>
    <img src="https://www.weiyigeek.top/img/weiyigeek.jpg" class="img-responsive" alt="WeiyiGeek-banner">
  </div>

  <ul style="font-weight: bolder;">
    <li>
      <p><span style="color: #03a9f4">echo&nbsp;&nbsp;"ã€ç‚¹ä¸ªèµã€‘ï¼ŒåŠ¨åŠ¨ä½ é‚£ç²—å£®çš„æ‹‡æŒ‡æˆ–è€…èŠŠèŠŠç‰æ‰‹ï¼Œäº²ï¼"</span></p>
    </li>
    <li>
      <p><span style="color: #ff9201">printf("%s",&nbsp;"ã€æŠ•ä¸ªå¸ã€‘ï¼Œä¸‡æ°´åƒå±±æ€»æ˜¯æƒ…ï¼ŒæŠ•ä¸ªç¡¬å¸è¡Œä¸è¡Œï¼Œäº²ï¼")</span></p>
    </li>
    <li>
      <p><span style="color: #02a2ff">fmt.Printf("ã€æ”¶ä¸ªè—ã€‘ï¼Œé˜…åå³ç„šä¸åƒç°ï¼Œäº²ï¼")&nbsp;&nbsp;</span></p>
    </li>
    <li>
      <p><span style="color:red">console.info("ã€è½¬ä¸ªå‘ã€‘ï¼Œè®©æ›´å¤šçš„å¿—åŒé“åˆçš„æœ‹å‹ä¸€èµ·å­¦ä¹ äº¤æµï¼Œäº²ï¼")</span></p>
    </li>
    <li>
      <p><span style="color: #ff654e">System.out.println("ã€å…³ä¸ªæ³¨ã€‘ï¼Œåç»­æµè§ˆæŸ¥çœ‹ä¸è¿·è·¯å“Ÿï¼Œäº²ï¼")</span></p>
    </li>
  </ul>

  <div>
    <img src="/img/wechat-search.png" class="img-responsive" alt="æ‰«æFollow(å…³æ³¨)WeiyiGeekå…¬ä¼—å·"  width="328" height="149">
    <img src="/img/wechat-app.png" class="img-responsive" alt="æ‰«æVisit(æµè§ˆ)æå®¢å…¨æ ˆä¿®ç‚¼å°ç¨‹åº"  width="328" height="149">
  </div>


  <hr>
  


  <blockquote class="post-copyright">
    <div class="content">
      
        
<span class="post-time">
    æœ€åæ›´æ–°æ—¶é—´ï¼š<time datetime="2022-03-29T05:39:06.304Z" itemprop="dateUpdated">2022-03-29 13:39:06</time>
</span><br>


        <span>æ–‡ç« åŸå§‹è·¯å¾„ï¼š<a href="https://github.com/WeiyiGeek/blog/edit/master/source/_posts/ç¼–ç¨‹ä¸–ç•Œ/Go/9.Goç¼–ç¨‹å¿«é€Ÿå…¥é—¨å­¦ä¹ .md" target="_blank" rel="noopener noreferrer">_posts/ç¼–ç¨‹ä¸–ç•Œ/Go/9.Goç¼–ç¨‹å¿«é€Ÿå…¥é—¨å­¦ä¹ .md</a></span><br>
         <span class="copy-copyright">è½¬è½½æ³¨æ˜å‡ºå¤„ï¼ŒåŸæ–‡åœ°å€ï¼š<a href="/2020/4-24-598.html" target="_blank" rel="external">https://blog.weiyigeek.top/2020/4-24-598.html</a></span><br>æœ¬ç«™æ–‡ç« å†…å®¹éµå¾ª <a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">çŸ¥è¯†å…±äº« ç½²å - éå•†ä¸šæ€§ - ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…åè®®</a> 
    </div>
    <footer>
      <a href="https://blog.weiyigeek.top">
        <img src="/img/avatar.jpg" alt="WeiyiGeek">
        WeiyiGeek
      </a>
    </footer>
  </blockquote>


        
            <div class="page-reward">
  <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-rectangle waves-light">ğŸ‘ é’Ÿæ„ä½œè€…</a>
</div>
            
        
        <div class="post-footer">
            
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Go/" rel="tag">Go</a></li></ul>

            <div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://blog.weiyigeek.top/2020/4-24-598.html&title=ã€Š9.Goç¼–ç¨‹å¿«é€Ÿå…¥é—¨å­¦ä¹ ã€‹ â€” WeiyiGeek Blog&pic=https://blog.weiyigeek.top/img/avatar.jpg" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.weiyigeek.top/2020/4-24-598.html&title=ã€Š9.Goç¼–ç¨‹å¿«é€Ÿå…¥é—¨å­¦ä¹ ã€‹ â€” WeiyiGeek Blog&source=[TOC]" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.weiyigeek.top/2020/4-24-598.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€Š9.Goç¼–ç¨‹å¿«é€Ÿå…¥é—¨å­¦ä¹ ã€‹ â€” WeiyiGeek Blog&url=https://blog.weiyigeek.top/2020/4-24-598.html&via=https://blog.weiyigeek.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://blog.weiyigeek.top/2020/4-24-598.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>

        </div>
        
          <!-- è¯„è®ºç»„ä»¶ -->


<div id="gitalk-container"></div>
<script type="text/javascript" src="/js/plugins/gitalk.min.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/custom/gitalk.init.js?v=1.6.6"></script>
        
    </div>
    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="prev">
      <a href="/2020/4-25-603.html" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">1.Goè¯­è¨€ç¼–ç¨‹å­¦ä¹ è¯¾åå®è·µ</h4>
      </a>
    </div>
  

  
    <div class="next">
      <a href="/2020/4-24-596.html" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">7.Goç¼–ç¨‹å¿«é€Ÿå…¥é—¨å­¦ä¹ </h4>
      </a>
    </div>
  
</nav>


    
    
        <aside class="post-widget">
            <nav class="post-toc-wrap" id="post-toc">
                <strong>ç›®å½•</strong>
                <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#0x00-Goè¯­è¨€åŸºç¡€ä¹‹Unit-å•å…ƒ-æµ‹è¯•"><span class="post-toc-number">1.</span> <span class="post-toc-text">0x00 Goè¯­è¨€åŸºç¡€ä¹‹Unit(å•å…ƒ)æµ‹è¯•</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-å•å…ƒæµ‹è¯•"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">1.å•å…ƒæµ‹è¯•</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-1-æµ‹è¯•å‡½æ•°"><span class="post-toc-number">1.1.1.</span> <span class="post-toc-text">1.1 æµ‹è¯•å‡½æ•°</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-2-æµ‹è¯•ç»„"><span class="post-toc-number">1.1.2.</span> <span class="post-toc-text">1.2 æµ‹è¯•ç»„</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-3-å­æµ‹è¯•"><span class="post-toc-number">1.1.3.</span> <span class="post-toc-text">1.3 å­æµ‹è¯•</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-4-æµ‹è¯•è¦†ç›–ç‡"><span class="post-toc-number">1.1.4.</span> <span class="post-toc-text">1.4 æµ‹è¯•è¦†ç›–ç‡</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-åŸºå‡†æµ‹è¯•"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">2.åŸºå‡†æµ‹è¯•</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#2-1-åŸºå‡†æµ‹è¯•ç”¨ä¾‹"><span class="post-toc-number">1.2.1.</span> <span class="post-toc-text">2.1 åŸºå‡†æµ‹è¯•ç”¨ä¾‹</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#2-2-æ€§èƒ½æ¯”è¾ƒç”¨ä¾‹"><span class="post-toc-number">1.2.2.</span> <span class="post-toc-text">2.2 æ€§èƒ½æ¯”è¾ƒç”¨ä¾‹</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#2-3-å¹¶è¡Œæµ‹è¯•ç”¨ä¾‹"><span class="post-toc-number">1.2.3.</span> <span class="post-toc-text">2.3 å¹¶è¡Œæµ‹è¯•ç”¨ä¾‹</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-è®¾ç½®æ‹†å¸æµ‹è¯•"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">3.è®¾ç½®æ‹†å¸æµ‹è¯•</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#3-1-TestMain-ç”¨ä¾‹"><span class="post-toc-number">1.3.1.</span> <span class="post-toc-text">3.1 TestMain ç”¨ä¾‹</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#3-2-å­æµ‹è¯•é›†è®¾ç½®æ‹†å¸"><span class="post-toc-number">1.3.2.</span> <span class="post-toc-text">3.2 å­æµ‹è¯•é›†è®¾ç½®æ‹†å¸</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-ç¤ºä¾‹ç”Ÿæˆå‡½æ•°"><span class="post-toc-number">1.4.</span> <span class="post-toc-text">4.ç¤ºä¾‹ç”Ÿæˆå‡½æ•°</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-1-åŸºç¡€è¯´æ˜"><span class="post-toc-number">1.4.1.</span> <span class="post-toc-text">4.1 åŸºç¡€è¯´æ˜</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-2-ç¤ºä¾‹æ¼”ç¤º"><span class="post-toc-number">1.4.2.</span> <span class="post-toc-text">4.2 ç¤ºä¾‹æ¼”ç¤º</span></a></li></ol></li></ol></li></ol>
            </nav>
            <div class="toc-bar"><div>
        </aside>
    
</article>

  <div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        äººé—´è‡ªæœ‰äº”å¤§æƒ…ã€ç‚¹èµã€æŠ•å¸(èµèµ)ã€æ”¶è—ã€å…³æ³¨ï¼Œè½¬å‘ã€‘, è°¢è°¢çœ‹å‹æ”¯æŒ!
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardwechat" src="/img/reward-wechat.jpg" height="228" height="228" alt="æ‰“èµäºŒç»´ç ">
            <img id="rewardalipay" src="/img/reward-alipay.png" height="228" height="228" alt="æ‰“èµäºŒç»´ç ">
        </div>
        
        <label class="reward-toggle">
            <!-- <input id="rewardToggle" type="checkbox" class="reward-toggle-check" data-wechat="/img/reward-wechat.jpg" data-alipay="/img/reward-alipay.png"> -->
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">å¾®ä¿¡</span>
                <span class="reward-toggle-item alipay">æ”¯ä»˜å®</span>
            </div>
        </label>
        
    </div>
</div>

  
 <!-- å¾®ä¿¡å…¬ä¼—å·å…³æ³¨/æ–‡ç« ç‰ˆæƒå¤åˆ¶ -->

  <div id="btw-mask" style="position: fixed; top: 0px; right: 0px; bottom: 0px; left: 0px; opacity: 0.7; z-index: 999; background: rgb(0, 0, 0); display:none"></div>
<div id="btw-modal" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 360px; text-align: center; font-size: 13px; background: rgb(255, 255, 255); border-radius: 10px; z-index: 9999; font-family: PingFangSC-Regular, sans-serif;display:none">
<span id="btw-modal-close-btn" style="position: absolute; top: 5px; right: 15px; line-height: 1.8; font-size: 15px; cursor: pointer; opacity: 0.2; z-index: 9999; color: rgb(0, 0, 0); background: none; border: none; outline: none;">X</span>
<p id="btw-modal-header" style="margin-top: 40px; line-height: 1.8; font-size: 13px; ">
<b style="color:#6190e8;">ä½ å¥½æœ‹å‹,å¯ä»¥å…³ä¸ªæ³¨å—? â¤ <br> è¿™å°†æ˜¯æˆ‘æŒç»­æ›´æ–°æ–‡ç« çš„åŠ¨åŠ›æºæ³‰ï¼Œè°¢è°¢æ”¯æŒï¼(à¹‘â€²á´—â€µà¹‘) </b> <br> å¦‚ä¸æƒ³å…³æ³¨è¯·ç‚¹å‡»å³ä¸Šè§’çš„ã€Xã€‘<br>
<br>Method 1.Please visit <strong><a href="https://twitter.com/WeiyiGeek" target="_blank" rel="noopener" style="color: rgb(240, 65, 52);text-decoration:underline;">ã€My Twitterã€‘</a></strong>. There is an article verification code in the homepage.
<br>æ–¹å¼2.è¯·è®¿é—®æœ¬åšä¸»çš„Bç«™<strong><a href="https://space.bilibili.com/385802642" target="_blank" rel="noopener" style="color: rgb(240, 65, 52);text-decoration:underline;">ã€WeiyiGeekã€‘</a></strong>é¦–é¡µå…³æ³¨UPä¸»,<br>å°†è‡ªåŠ¨éšæœºè·å–è§£é”éªŒè¯ç ã€‚
<br>æ–¹å¼3.æ‰«ä¸€æ‰«ä¸‹æ–¹äºŒç»´ç ï¼Œå…³æ³¨æœ¬ç«™<strong>å®˜æ–¹å…¬ä¼—å·</strong><br>
å›å¤ï¼š<strong style="color: rgb(240, 65, 52);">éªŒè¯ç </strong>
å°†è·å–<strong style="color: rgb(240, 65, 52);">è§£é”(æœ‰æ•ˆæœŸ7å¤©)</strong>æœ¬ç«™æ‰€æœ‰æŠ€æœ¯æ–‡ç« å“Ÿ!</p>
<img src="/img/wechat-search.png" style="width: 300px; margin-top: 10px;">
<div id="btw-modal-input-code" style="margin-top: 20px; background: rgb(255, 255, 255);">
  <input id="btw-modal-input" type="number" minlength="4" maxlength="4" placeholder="è¯·è¾“å…¥éªŒè¯ç |Verification Code"
    style="width: 165px; height: 32px; line-height: 32px; padding: 0px 10px; margin: 0px 10px; font-size: 13px; text-rendering: auto; text-transform: none; cursor: text; outline: none; box-sizing: border-box; border: 1px solid rgb(221, 221, 221); -webkit-appearance: textfield; background-color: white; -webkit-rtl-ordering: logical;"/>
  <button id="btw-submit-btn" onclick="yzm_vertify()"
    style="padding: 0px 20px; height: 32px; font-size: 14px; outline: none; border: none; color: rgb(255, 255, 255); background: rgb(222, 104, 109); cursor: pointer;">æ
    äº¤</button> </div>
<p id="btw-footer" style="margin: 40px 0px 20px; color: rgb(153, 153, 153);">@WeiyiGeek - ä¸ºäº†èƒ½åˆ°è¿œæ–¹ï¼Œè„šä¸‹çš„æ¯ä¸€æ­¥éƒ½ä¸èƒ½å°‘</p>
</div>


</div>

    </main>
    <footer class="footer ">
    
    <div class="top">
        
            <p>
    <span>Linksï¼š</span>
    
    <span class="blogroll-item">
        <a href="https://weiyigeek.top" target="_blank">https://weiyigeek.top</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.weiyigeek.top" target="_blank">https://blog.weiyigeek.top</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://weiyigeek.top/img/wechat-search.png" target="_blank">å…¬ä¼—è´¦å·</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://space.bilibili.com/385802642/article" target="_blank">å“”å“©å“”å“©ä¸“æ </a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://github.com/weiyigeek" target="_blank">ä¸ªäººGithub</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://gitee.com/WeiyiGeek" target="_blank">ä¸ªäººGitee</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.zhihu.com/people/weiyiSec" target="_blank">ä¸ªäººçŸ¥ä¹</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.cnblogs.com/WeiyiGeek" target="_blank">åšå®¢å›­</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://my.oschina.net/weiyigeek" target="_blank">OSCHINA</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.toutiao.com/c/user/token/MS4wLjABAAAAqcPSoMqfctaEqJpGSF775eeCjWkrop4AOyLITdMx-L78F5iXzfQcSRM5sY4dq3wR" target="_blank">ä»Šæ—¥å¤´æ¡</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.csdn.net/u013072756?type=lately" target="_blank">CSDN</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.jianshu.com/u/5199a1104739" target="_blank">ç®€ä¹¦</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://cloud.tencent.com/developer/user/1389665/articles" target="_blank">è…¾è®¯äº‘+äº‘ç¤¾åŒº</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://cuttlefish.baidu.com/shop/75c5dbd8d15abe23482f4d40" target="_blank">ç™¾åº¦æ–‡åº“</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://author.baidu.com/home?from=blog&app_id=1726736601523415" target="_blank">ITæå®¢çŸ¥è¯†åˆ†äº«</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.51cto.com/weiyigeek" target="_blank">51CTOåšå®¢</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://juejin.cn/user/122767337595934" target="_blank">æ˜é‡‘</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://weibo.com/a/hot/7622022703618049_1.html" target="_blank">å¾®åšæ–‡ç« </a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.xiaohongshu.com/user/profile/627c98bb000000001000e7ba" target="_blank">å°çº¢ä¹¦</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://segmentfault.com/u/weiyigeek" target="_blank">Segmentfault</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.douyin.com/user/MS4wLjABAAAAMSBdMja6XLsdmzafb0RNbFeBemIOk38K1PaOClZeI1Q" target="_blank">æŠ–éŸ³ä¸»é¡µ</a>
    </span>
    
</p>

        
    </div>
    
    <div class="bottom">
      <p>
        <span>WeiyiGeek &copy; 2018 - 2022 <a href="https://weiyigeek.top" target="_blank" rel="noopener">weiyigeek.top</a> All rights reserved. ITå”¯ä¸€æå®¢ ç‰ˆæƒæ‰€æœ‰ </span>
        
        <span>
          Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/weiyigeek" target="_blank">mellow</a>
        </span>
        
        <br/>è®¿é—®ç»Ÿè®¡
        <span><a href="/sitemap.xml" target="_blank" rel="Sitemaps-ç«™ç‚¹åœ°å›¾">Sitemaps</a> </span>
        <span><a href="/baidusitemap.xml" target="_blank" rel="baidusitemaps-ç™¾åº¦ç«™ç‚¹åœ°å›¾">ç«™ç‚¹åœ°å›¾</a> </span>
        <!-- 
  -->
        <br/>ICPå¤‡æ¡ˆå·<span><a href="https://beian.miit.gov.cn" target="_blank">æ¸ICPå¤‡2022003447å·</a></span>
        <br/>
        <div id="cc-myssl-id">
          <a href="https://myssl.com/blog.weiyigeek.top?from=mysslid" target="_blank" rel="noopener"><img src="https://static.myssl.com/res/images/myssl-id1.png" alt="MySSLå®‰å…¨è®¤è¯" style="max-height:50px;display:block;margin:0 auto"></a>
        </div>
      </p>
    </div>
</footer>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>


<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://blog.weiyigeek.top/2020/4-24-598.html&title=ã€Š9.Goç¼–ç¨‹å¿«é€Ÿå…¥é—¨å­¦ä¹ ã€‹ â€” WeiyiGeek Blog&pic=https://blog.weiyigeek.top/img/avatar.jpg" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.weiyigeek.top/2020/4-24-598.html&title=ã€Š9.Goç¼–ç¨‹å¿«é€Ÿå…¥é—¨å­¦ä¹ ã€‹ â€” WeiyiGeek Blog&source=[TOC]" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.weiyigeek.top/2020/4-24-598.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€Š9.Goç¼–ç¨‹å¿«é€Ÿå…¥é—¨å­¦ä¹ ã€‹ â€” WeiyiGeek Blog&url=https://blog.weiyigeek.top/2020/4-24-598.html&via=https://blog.weiyigeek.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://blog.weiyigeek.top/2020/4-24-598.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>æ‰«ä¸€æ‰«ï¼Œåˆ†äº«åˆ°å¾®ä¿¡</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACP0lEQVR42u3awW6EMAxFUf7/p6nUVSWa9D4njIq5WY0YJuTMIji2jwOP83tcP/+8cr3nen0052iezUOGDBmPZZzTMWfM75/fWfs7hlQZMmS8gEE22fkVvkGnz0W/lSFDhoxN1PlWLkOGDBl3bLjzEJOEkjwMlSFDhgwyNVn6/MHpFnzLWVyGDBkPZKwUBu7+/KH6hgwZMv4x4wwHLwzw525YlQwZMlozSMKr9vi02LmSnpMhQ0ZvRrosQuUNXvODcXBFhgwZrRnri+AJsnUen0GGDBn9GLViwN4NOg0x/3h7yJAhoxEjOOniQiYvXpLGDtQ0JkOGjNcweFvDyj3pchFJhgwZrRkry+KdD7UeiXh+GTJkNGXsXXStJMmvD+eRIUPGCxi7UmC8nYIUG3j5QYYMGb0Zu4qR84XWSPPZhiVMGTJktGOQMI4/Pkjlh2m14L0hQ4aMdgwS/NVaLu7oCkEFVxkyZLRj1NJbfFtMk27pNn3wXVyGDBmPZcQp+IXQkB93+R8hQ4aMNzBqP0vLCWmAGGyvMmTIeA1j5VBKkmu7ws3h/TJkyGjN4Delxcv0Wz6C2FaGDBktGGc4amn94CSNCxK/vDdkyJDRlLFht8YH45XgMs4dypAhox2jFhryB5MoLt1Stx1iZciQ8SgGybevN42tHGJRX5sMGTJez+Cpf74p8xICyhrKkCFDRikc5I0UafNHMTSUIUPGYxm1YkBapEzLA0FYKUOGjNaM2gEyvbKSntvWriFDhoznMb4AO4lBz2vsUQIAAAAASUVORK5CYII=" alt="å¾®ä¿¡åˆ†äº«äºŒç»´ç ">
</div>


    
    <!-- main-js -->
<script type="text/javascript" src="/js/jquery/2.1.0-jquery.min.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/plugins/fastclick.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/plugins/ios-orientationchange-fix.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/jquery/3.5.2-jquery.fancybox.min.js?v=1.6.6"></script>
<!--  //cdn.bootcss.com/node-waves/0.7.4/waves.min.js -->
<script type="text/javascript" src="/js/node-waves/0.7.4-waves.min.js?v=1.6.6"></script> 

<script type="text/javascript" src="/js/method.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/blog.js?v=1.6.6"></script>

<!-- third-party -->
<script type="text/javascript" src="/js/plugins/local_search.js?v=1.6.6"></script>
<script type="text/javascript">
	var search_path = "search.xml";
	if (search_path.length === 0) { search_path = "search.xml";}
	var path = "/" + search_path;
	searchFunc(path, "local-search-input", "local-search-result");
</script> 

<!-- <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> --> 



  


<script>
  var _hmt = _hmt || [];
  (function() {
    // ç™¾åº¦ç»Ÿè®¡
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?53923c4b5560739bc0ed61e183be6acf";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();
</script>
 


<!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
            processEscapes: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.staticfile.org/mathjax/2.7.9/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
 
<script>
    (function() {
        var OriginTitile = document.title, titleTime;
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                document.title = 'WeiyiGeek Blog-å…³æ³¨äºç½‘ç»œå®‰å…¨_ç‰©è”ç½‘å®‰å…¨å¼€å‘_ç½‘ç»œå®‰å…¨è¿ç»´-å­¦ä¹ å¿ƒå¾—åˆ†äº«';
                clearTimeout(titleTime);
            } else {
                document.title = '(ã¤ã‚§âŠ‚)å’¦!åˆå¥½äº†!';
                titleTime = setTimeout(function() {
                    document.title = OriginTitile;
                },2000);
            }
        });
    })();
</script>
 
     <script type="text/javascript" src="/js/custom/copytips.js?v=1.6.6"></script> 
</body>
</html>
