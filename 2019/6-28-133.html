<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="content-language" content="zh-CN"/>
    <meta name="author" content="WeiyiGeek" />
    <meta name="msvalidate.01" content="5C552FB1D885E0E11D2957EC958C8018" />
    <meta name="shenma-site-verification" content="4c655e91c76be0a93c1b6954c666c9d6_1649049085"/>
    <meta name="bytedance-verification-code" content="lKs4FqwCHSJ3A/c5tT7X" />
    <meta name="sogou_site_verification" content="OC65iET6Bk" />
    
    <title>🌐 shell脚本编程之路2|WeiyiGeek Blog|唯一极客Geek-IT网络安全运维开发技术知识分享-博客站点</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    
    <meta name="keywords" content="Shell">
    <meta name="Description" content="WeiyiGeek-唯一极客博客站点,关注于网络安全运维,Web安全开发,IOT物联网安全开发,应用开发,分享技术学习知识与入坑解决,提升网络安全技术与自身技术能力,立志维护大众网络安全为己任,做一个对国家有用的人,为实现中华民族伟大复兴的中国梦不懈奋斗">
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="/css/jquery/3.5.2-jquery.fancybox.min.css?v=1.6.6" />
    <link rel="stylesheet" href="/css/style.css?v=1.6.6">
    <!--  -->
     <script type="text/javascript" src="/js/custom/articlecost.js?v=1.6.6"></script> 
    <link rel="stylesheet" href="/css/third-party/gitalk.css?v=1.6.6"> 
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9134434519967436" crossorigin="anonymous"></script>    
    <script type="text/javascript">
        // Data Center
        var DC = {
          reward:	true,
          lv: JSON.parse('{"enable":false,"app_id":null,"app_key":null,"icon":true}'),
          v: JSON.parse('{"enable":false,"appid":null,"appkey":null,"notify":true,"verify":true,"placeholder":"give me some sugers plz...","avatar":"wavatar"}')
        };
    </script>
    <script type="text/javascript">window.lazyScripts=[];</script>
<meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="WeiyiGeek Blog" type="application/atom+xml">
</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="">
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap">
      
      <img src="/img/brand.jpg" class="brand-bg" alt="WeiyiGeek-backgroud">
      
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg" alt="WeiyiGeek-头像">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">WeiyiGeek</h5>
          <a href="mailto:master@weiyigeek.top" title="master@weiyigeek.top" class="mail">
            <span>m</span><span>a</span><span>s</span><span>t</span><span>e</span><span>r</span><span>@</span><span>w</span><span>e</span><span>i</span><span>y</span><span>i</span><span>g</span><span>e</span><span>e</span><span>k</span><span>.</span><span>t</span><span>o</span><span>p</span>
          </a>
        </hgroup>
        
        <ul class="menu-link">
          
              <li>
                <a href="https://weiyigeek.top/img/wechat-search.png" target="_blank">
                  <i class="icon icon-lg icon-wechat"></i>
                </a>
              </li>
            
              <li>
                <a href="https://github.com/weiyigeek" target="_blank">
                  <i class="icon icon-lg icon-github"></i>
                </a>
              </li>
            
              <li>
                <a href="https://t.me/WeiyiGeek" target="_blank">
                  <i class="icon icon-lg icon-telegram"></i>
                </a>
              </li>
            
              <li>
                <a href="https://twitter.com/WeiyiGeek" target="_blank">
                  <i class="icon icon-lg icon-twitter"></i>
                </a>
              </li>
            
              <li>
                <a href="https://weibo.com/615643678" target="_blank">
                  <i class="icon icon-lg icon-weibo"></i>
                </a>
              </li>
            
        </ul>
        
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                首页
              </a>
            </li>
        
            <li class="">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                文章分类
              </a>
            </li>
        
            <li class="">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                文章标签
              </a>
            </li>
        
            <li class="">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                文章归档
              </a>
            </li>
        
            <li class="">
              <a href="/2018/1-1-1.html"  >
                <i class="icon icon-lg icon-mortar-board"></i>
                学习之路
              </a>
            </li>
        
            <li class="">
              <a href="/books"  >
                <i class="icon icon-lg icon-book"></i>
                学习书籍
              </a>
            </li>
        
            <li class="">
              <a href="/about"  >
                <i class="icon icon-lg icon-user"></i>
                关于作者
              </a>
            </li>
        
            <li class="">
              <a href="/sites"  >
                <i class="icon icon-lg icon-globe"></i>
                站点导航
              </a>
            </li>
        
            <li class="">
              <a href="/img/share-wechat.jpg" target="_blank" >
                <i class="icon icon-lg icon-wechat"></i>
                公众账号
              </a>
            </li>
        
            <li class="">
              <a href="https://space.bilibili.com/385802642" target="_blank" >
                <i class="icon icon-lg icon-youtube-play"></i>
                哔哩哔哩
              </a>
            </li>
        
            <li class="">
              <a href="/img/video-account.jpg" target="_blank" >
                <i class="icon icon-lg icon-video-camera"></i>
                视频号
              </a>
            </li>
        
            <li class="">
              <a href="/links"  >
                <i class="icon icon-lg icon-link"></i>
                友情链接
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row clearfix">
        <a href="javascript:;" class="header-icon pull-left waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">
            <span>shell脚本编程之路2</span>
            
        </div>

        
        <a href="javascript:;" id="site_search_btn" class="header-icon pull-right waves-effect waves-circle waves-light">
            <i class="icon icon-lg icon-search"></i>
        </a>
        

        
            <a href="/atom.xml" class="header-icon pull-right waves-effect waves-circle waves-light">
                <i class="icon icon-lg icon-rss"></i>
            </a>
        
    </div>
</header>
<header class="content-header post-header">
    <img src="/img/banner.jpg" class="header-bg" alt="文章头部背景">
    <div class="container fade-scale">
        <h1 class="title">shell脚本编程之路2</h1>
        <h5 class="subtitle">
            
                <time datetime="2019-06-28T10:35:30.000Z" itemprop="datePublished" class="page-time">
  2019-06-28
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Development/">Development</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Development/Programming/">Programming</a></li></ul></li></ul>


            
        </h5>
        
    </div>
    

</header>

<div id="site_search">
    <div class="search-title clearfix">
        <span class="pull-left">
          <i class="icon icon-lg icon-search"></i>
        </span>
        <input type="text" id="local-search-input" name="q" results="0" placeholder="search my blog..." class="form-control pull-left"/>
        <a href="javascript:;" class="close pull-right waves-effect waves-circle waves-light">
          <i class="icon icon-lg icon-close"></i>
        </a>
    </div>
    <div id="local-search-result"></div>
</div>


<div class="container body-wrap" style="display: none;">
  <article id="post-系统运维/Linux/Shell编程/shell脚本编程之路2"
  class="post-article article-type-post" itemprop="blogPost">
    <div class="post-card">
        <h1 class="post-card-title">shell脚本编程之路2</h1>
        <div class="post-meta">
            <time class="post-time" title="2019-06-28 18:35:30" datetime="2019-06-28T10:35:30.000Z"  itemprop="datePublished">2019-06-28</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Development/">Development</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Development/Programming/">Programming</a></li></ul></li></ul>



            

            


            
        </div>
        <span class="post-href" style="display: none;">|</span> 
        <div class="post-content" id="post-content" itemprop="postContent">
            
            <p>[TOC]</p>
<a id="more"></a>
<h2 id="0x03-shell编程运算符"><a href="#0x03-shell编程运算符" class="headerlink" title="0x03 shell编程运算符"></a>0x03 shell编程运算符</h2><p>描述：主要是<code>数值命令如declare/let/expr、数值运算方法、变量测试</code>，以及shell变量的弱点默认字符串类型（弱类型）</p>
<p>运算符及优先级:(从高到低)</p>
<ul>
<li>Shell算数运算符</li>
<li>移位运算符</li>
<li>关系(比较)运算符</li>
<li>位运算符</li>
<li>布尔(逻辑)运算符</li>
<li>字符串运算符</li>
<li>赋值运算符</li>
</ul>
<figure class="image-box">
                <a rel=shell脚本编程之路2 href="https://img.weiyigeek.top/2019/20190703211653.png" target="_blank" title="WeiyiGeek.运算符及优先级" data-fancybox="images"><img src="https://img.weiyigeek.top/2019/20190703211653.png" alt="WeiyiGeek.运算符及优先级" title="" class=""></a>
                <p>WeiyiGeek.运算符及优先级</p>
            </figure>
<h3 id="1-整数运算"><a href="#1-整数运算" class="headerlink" title="1.整数运算"></a>1.整数运算</h3><p>可以进行数值运算的方法有： <code>declare expr le bc [[]] $() awk typeset</code>,下面只是常用的几类;<br>实际案例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#示例1.declare命令</span></span><br><span class="line">a=2</span><br><span class="line">b=8</span><br><span class="line"><span class="built_in">declare</span> -i c=<span class="variable">$a</span>+<span class="variable">$b</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$a</span> + <span class="variable">$b</span> = <span class="variable">$c</span>"</span> <span class="comment">#2 + 8 = 10</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例2.let数值运算工具</span></span><br><span class="line"><span class="built_in">let</span> <span class="built_in">test</span>=<span class="variable">$a</span>*<span class="variable">$b</span>     <span class="comment">#注意*号左右两侧无格</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$a</span> * <span class="variable">$b</span> = <span class="variable">$test</span>"</span> <span class="comment">#2 * 8 = 16</span></span><br><span class="line"><span class="built_in">let</span> <span class="string">"test=a + b"</span>      <span class="comment">#注意在算引号包括的可以存在空格</span></span><br><span class="line"><span class="built_in">let</span> value+=2  <span class="comment">#c语言方法 </span></span><br><span class="line"></span><br><span class="line"><span class="built_in">let</span> <span class="string">"t1 = ((a = 5 + 3, b = 7 - 1, c = 15 - 4))"</span>    <span class="comment"># 最后一个表达式变量赋值得给t1（值得学习）</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"t1 = <span class="variable">$t1</span>, a = <span class="variable">$a</span>, b = <span class="variable">$b</span>, c = <span class="variable">$c</span>"</span>  <span class="comment">#t1 = 11, a = 8, b = 6, c = 11</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例3.expr命令</span></span><br><span class="line">cc=$(expr <span class="variable">$a</span> \* <span class="variable">$b</span>)   <span class="comment">#注意+号左右两侧必须有空格，乘号(*)前边必须加反斜杠(\)才能实现乘法运算；</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$a</span> * <span class="variable">$b</span> = <span class="variable">$cc</span>"</span>   <span class="comment">#8 * 6 = 48</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例4.括号得优先级最大,采用$(())形式计算</span></span><br><span class="line">a=1;b=2</span><br><span class="line"><span class="built_in">echo</span> $((a+b)) $((<span class="variable">$a</span>+<span class="variable">$b</span>))   <span class="comment"># 3 3 推荐方式</span></span><br><span class="line"></span><br><span class="line">aa=$(((11+3)*3/2))</span><br><span class="line">bb=$((14%3))   <span class="comment">#求余</span></span><br><span class="line">c</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"aa = <span class="variable">$aa</span>, bb = <span class="variable">$bb</span>, cc = <span class="variable">$cc</span>"</span>   <span class="comment">#aa = 21, bb = 2, cc = 8</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例5.采用$[]形式计算</span></span><br><span class="line">a=1;b=2</span><br><span class="line"><span class="built_in">echo</span> $[a+b] $[ <span class="variable">$a</span> + <span class="variable">$b</span> ] <span class="comment">#3 3</span></span><br><span class="line">cc=$[15+78]; dd=$[15%7]</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"cc = <span class="variable">$cc</span>, dd = <span class="variable">$dd</span>"</span> <span class="comment">#cc = 93, dd = 1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例6.typeset命令</span></span><br><span class="line">$ <span class="built_in">typeset</span> -i A=1 B=3</span><br><span class="line">$ A=A+B;<span class="built_in">echo</span> <span class="variable">$A</span>  <span class="comment">#4</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例7.自加自减(不带$a)</span></span><br><span class="line">a=1</span><br><span class="line"><span class="built_in">let</span> a++  <span class="comment">#方式1（不返回值） </span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$a</span>  <span class="comment">#2</span></span><br><span class="line"><span class="built_in">echo</span> $((a++)) <span class="comment">#2  #先返回值再加减</span></span><br><span class="line"><span class="built_in">echo</span> $[a++] <span class="comment">#3</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$a</span> <span class="comment">#4</span></span><br><span class="line"></span><br><span class="line">b=5</span><br><span class="line"><span class="built_in">let</span> --b <span class="comment">#方式2（不返回值） </span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$b</span>  <span class="comment">#4</span></span><br><span class="line"><span class="built_in">echo</span> $((--b)) <span class="comment">#3  #先加减再返回值</span></span><br><span class="line"><span class="built_in">echo</span> $[--b] <span class="comment">#2</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$b</span> <span class="comment">#2</span></span><br></pre></td></tr></table></figure></p>
<p><em>补充示例：</em><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#示例1.从1加到10得表达式计算多种方法</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"`echo &#123;1..10&#125; | tr "</span> <span class="string">" "</span>+<span class="string">"` = `echo &#123;1..10&#125; | tr "</span> <span class="string">" "</span>+<span class="string">" | bc`"</span></span><br><span class="line">1+2+3+4+5+6+7+8+9+10 = 55</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> `seq -s <span class="string">'+'</span> 10`=`seq -s <span class="string">'+'</span> 10 | bc`</span><br><span class="line"><span class="built_in">echo</span> $(seq -s <span class="string">'+'</span> 10)=$(seq -s <span class="string">'+'</span> 10 | bc)</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$(seq -s '+' 10)</span>="</span>$(($(seq -s <span class="string">'+'</span> 10)))</span><br><span class="line">1+2+3+4+5+6+7+8+9+10=55</span><br><span class="line"></span><br><span class="line"><span class="comment">#这里需要注意expr需要在 操作符合两边有空格</span></span><br><span class="line"><span class="built_in">echo</span> `seq -s <span class="string">'+'</span> 10`=`seq -s <span class="string">" + "</span> 10|xargs expr`</span><br><span class="line">1+2+3+4+5+6+7+8+9+10=55</span><br><span class="line"><span class="comment">#值得学习在正式得使用中很少</span></span><br><span class="line"><span class="built_in">echo</span> `seq -s <span class="string">"+"</span> 10`=$(expr $[`seq -s <span class="string">" + "</span> 10`])</span><br><span class="line">1+2+3+4+5+6+7+8+9+10=55</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h3 id="2-浮点数运算"><a href="#2-浮点数运算" class="headerlink" title="2.浮点数运算"></a>2.浮点数运算</h3><p>实际案例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#示例1.精密算术操作高级运算工具：bc计算命令</span></span><br><span class="line"><span class="comment">#可以对于0.00123456789进行计算（前面的都不能进行浮点运算）：</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"1.212*3"</span> | bc </span><br><span class="line"><span class="comment">#scale设定小数精度（数值范围），"scale保存的小数位数;表达式"|bc  #有效数字</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"scale=3;4/8"</span>| bc    </span><br><span class="line"><span class="built_in">echo</span> <span class="string">"sqrt(10)"</span> | bc</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h3 id="3-逻辑运算"><a href="#3-逻辑运算" class="headerlink" title="3.逻辑运算"></a>3.逻辑运算</h3><p>实际案例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> $((1&amp;&amp;0))      <span class="comment">#一假必假 0</span></span><br><span class="line"><span class="built_in">echo</span> $((1||0))      <span class="comment">#一真必真 1</span></span><br><span class="line"><span class="built_in">echo</span> $[1&amp;&amp;0] $[1||0]  <span class="comment">#方式2  0 1 </span></span><br><span class="line"></span><br><span class="line"><span class="comment">#可以短路求值</span></span><br><span class="line"><span class="built_in">echo</span> $(( 1 &gt; 2 &amp;&amp; 1 &lt; 2 )) <span class="comment">#0</span></span><br><span class="line"><span class="built_in">echo</span> $(( 1 &gt; 2 || 1 &lt; 2 )) <span class="comment">#1</span></span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h3 id="4-位运算"><a href="#4-位运算" class="headerlink" title="4.位运算"></a>4.位运算</h3><p>实际案例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 逻辑位移（&lt;&lt; &gt;&gt;）</span></span><br><span class="line"><span class="built_in">echo</span> $[3&lt;&lt;2]   <span class="comment">#3*(2^2) =12</span></span><br><span class="line"><span class="built_in">echo</span> $[8&gt;&gt;2]   <span class="comment">#8/(2^2) =2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#位运算（按位或/与/异或 ）</span></span><br><span class="line"><span class="built_in">echo</span> $((12|7)) <span class="comment">#1100 | 0111 = 1111 = 15</span></span><br><span class="line"><span class="built_in">echo</span> $((12&amp;7)) <span class="comment">#1100 | 0111 = 0100 = 4</span></span><br><span class="line"><span class="built_in">echo</span> $((12^7)) <span class="comment">#1100 ^ 0111 = 1011 = 11</span></span><br></pre></td></tr></table></figure></p>
<p><em>注意事项：</em></p>
<ul>
<li>expr和let不同之处在于<code>乘法需要转义\*,且运算符左右两边必须有空格,而let操作数两边是不能有空格的</code>;</li>
<li>自加自减与其他编程语言是一致的,需要注意是先计算在返回值还是先返回值再计算,不同之处在于let计算时候都是返回计算后的值;</li>
</ul>
<hr>

<h2 id="0x04-shell编程数组-Array"><a href="#0x04-shell编程数组-Array" class="headerlink" title="0x04 shell编程数组(Array)"></a>0x04 shell编程数组(Array)</h2><p>Shell在编程方面比Windows批处理强大很多，无论是在循环、运算,数组作为一种特殊的数据结构在任何一种编程语言中都有它的一席之地，数组在Shell脚本中也是非常重要的组成部分，它借助索引将多个独立的数据存储为一个集合。</p>
<p>bash<code>支持一维数组（不支持多维数组），并且没有限定数组的大小</code>。类似与C语言，数组元素的下标由0开始编号。获取数组中的元素要利用下标，下标可以是整数或算术表达式，其值应大于或等于0。 </p>
<p><em>bash中的两类数组类型：</em></p>
<ul>
<li>普通数组：最常见的数组类型声明格式：array_name=(value0 value1)</li>
<li>关联数组：从bash4.0开始被引入,关联数组的索引值可以使用任意的文本,关联数组在很多操作中很有用;<ul>
<li>关联数组的声明（必须声明）：declare -A array_var</li>
</ul>
</li>
</ul>
<p><strong>(1)定义数组</strong><br>在Shell中，用括号来表示数组，数组元素用“空格”符号分割开。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#定义数组的一般形式为：</span></span><br><span class="line">array_name=(value0 value1 value2 value3)</span><br><span class="line">array_name=( [0]=one [1]=two [2]=three [3]=four )</span><br><span class="line"></span><br><span class="line"><span class="comment">#或者：</span></span><br><span class="line">array_name=(</span><br><span class="line">    value0</span><br><span class="line">    value1</span><br><span class="line">    value2</span><br><span class="line">    value3</span><br><span class="line">)</span><br><span class="line"><span class="comment">#单独定义数组的各个分量,可以不使用连续的下标，而且下标的范围没有限制。</span></span><br><span class="line">array_name[0]=value0</span><br><span class="line">array_name[1]=value1</span><br><span class="line">array_name[2]=value2</span><br><span class="line">array_name[8]=value8</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#关联数组</span></span><br><span class="line"><span class="comment">#使用内嵌索引-值列表法将元素添加到关联数组：</span></span><br><span class="line">array_var=( [one]=one-1 [two]=two-2 [three]=three-3 [four]=four-4 [five]=five-5 [six]=six-6 )</span><br><span class="line"></span><br><span class="line"><span class="comment">#使用独立的索引-值进行赋值：</span></span><br><span class="line">array_var[one]=one-1</span><br><span class="line">array_var[two]=two-2</span><br><span class="line">array_var[three]=three-3</span><br><span class="line">array_var[four]=four-4</span><br><span class="line">array_var[five]=five-5</span><br><span class="line">array_var[six]=six-6</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#数组补充使用</span></span><br><span class="line">array=($(ls))   <span class="comment">#将执行的命令放入数组中</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="variable">$&#123;array[@]&#125;</span>;<span class="keyword">do</span> <span class="built_in">echo</span> <span class="variable">$i</span>;sleep 1; <span class="keyword">done</span></span><br><span class="line">~$</span><br><span class="line">Microsoft</span><br><span class="line">Word</span><br><span class="line">文档.docx</span><br><span class="line">Another.Redis.Desktop.Manager.lnk</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<p><strong>(2)读取数组并获取信息</strong></p>
<ul>
<li>读取数组元素值的一般格式是<code>${array_name[index]}</code>,可以使用<code>@ (单个参数独立)</code>或 <code>* (所有参数整体)</code>可以获取数组中的所有元素，利用获取字符串长度的#来获取数组长度的方法与获取字符串长度的方法相同;以及可以对数组进行提取删除等等</li>
</ul>
<p>实际案例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">array_name=(1 3 5 7 9)</span><br><span class="line">valuen=<span class="variable">$&#123;array_name[2]&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例1.数组读取</span></span><br><span class="line">NAME[0]=<span class="string">"Zara"</span>;NAME[1]=<span class="string">"Qadir"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"First Index: <span class="variable">$&#123;NAME[0]&#125;</span>"</span>  <span class="comment">#Zara</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Second Index: <span class="variable">$&#123;NAME[1]&#125;</span>"</span> <span class="comment">#Qadir</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例2.获取数组里的所有元素</span></span><br><span class="line">length=<span class="variable">$&#123;array_name[*]&#125;</span>  <span class="comment"># 所有参数 (for循环都差不多)</span></span><br><span class="line">length=<span class="variable">$&#123;array_name[@]&#125;</span>  <span class="comment"># 单个参数独立</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例3.取得数组元素的个数(数组length)</span></span><br><span class="line">length=<span class="variable">$&#123;#array_name[@]&#125;</span> <span class="comment"># 或者</span></span><br><span class="line">length=<span class="variable">$&#123;#array_name[*]&#125;</span></span><br><span class="line">length=<span class="variable">$&#123;#array_name[n]&#125;</span> <span class="comment"># 取得数组单个元素的长度</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例4.数组的提取</span></span><br><span class="line">array_name=( [0]=one [1]=two [2]=three [3]=four ) </span><br><span class="line"><span class="variable">$&#123;array[@]:0&#125;</span> <span class="comment">#显示所有元素</span></span><br><span class="line"><span class="variable">$&#123;array[@]:1&#125;</span> <span class="comment">#除去第一个元素后的显示所有元素</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;array[@]:0:2&#125;</span>   <span class="comment">#从下标[0]开始依次显示2个数组值 one two</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;array[@]:1:2&#125;</span>   <span class="comment">#从下标[1]开始依次显示2个数组值 two three</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例5.数组子串替换</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;array[@]/o/m&#125;</span>  <span class="comment">#将o替换成m mne twm three fmur</span></span><br><span class="line"><span class="comment">#如果没有指定替换子串，则删除匹配到的子符</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;array[@]//o/&#125;</span>  <span class="comment">#ne tw three fur</span></span><br><span class="line"><span class="comment">#替换字符串前端（#）子串</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;array[@]/#o/k&#125;</span>  <span class="comment">#kne two three four</span></span><br><span class="line"><span class="comment">#替换字符串后端（%）子串</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;array[@]/%o/k&#125;</span> <span class="comment">#ne twk three four</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例5.子串删除、剔除</span></span><br><span class="line"><span class="comment">#左边开始最短的匹配:"t*e"，这将匹配到"thre"则显示e</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;array[@]#t*e&#125;</span>   <span class="comment"># 可采用通配符 one two e four</span></span><br><span class="line"><span class="comment">#左边开始最长的匹配，这将匹配到"three"，将删除three并输出到屏幕</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;array[@]##t*e&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 示例6.子串删除、剔除</span></span><br><span class="line"><span class="comment">#从字符串的结尾开始最短的匹配o</span></span><br><span class="line"><span class="comment">#右边开始最短的匹配</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;array[@]%o&#125;</span>  <span class="comment">#one tw three four</span></span><br><span class="line"><span class="comment">#右边开始最长的匹配</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;array[@]%%o&#125;</span>  <span class="comment">#one tw three four #从字符串的结尾开始最长的匹配</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例7.关联数组的使用,关联数组的打印方法跟普通数组用法一样</span></span><br><span class="line">array_var=( [one]=one-1 [two]=two-2 [three]=three-3 [four]=four-4 [five]=five-5 [six]=six-6 )</span><br><span class="line"><span class="comment">#列出数组索引值(值得学习)</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;!array_var[*]&#125;</span>  <span class="comment">#four one five six two three （注意感叹号）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例8.采用unset命令删除数组</span></span><br><span class="line"><span class="built_in">unset</span> array_pt[0] <span class="comment">#删除数组中第一个元素</span></span><br><span class="line"><span class="built_in">unset</span> array_pt    <span class="comment">#删除整个数组</span></span><br></pre></td></tr></table></figure></p>
<p><br></p>
<p>实战脚本：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/env bash</span></span><br><span class="line"><span class="comment">#功能：Shell数组的使用示例</span></span><br><span class="line">number=(1 2 3)</span><br><span class="line">number[3]=4</span><br><span class="line">string=(<span class="string">"I"</span> <span class="string">"Love"</span> <span class="string">"you"</span> <span class="string">"baby"</span> <span class="string">"!"</span>)</span><br><span class="line"><span class="built_in">declare</span> -A relatearray <span class="comment">#关联数组的定义(非常重要-A)</span></span><br><span class="line">relatearray=( [one]=weiyi [two]=geek [there]=computer )</span><br><span class="line"></span><br><span class="line"><span class="comment">#示例1.输入出数组中各个参数,采用$array[*]与$array[@]都差不多;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"#示例1.案例输出"</span></span><br><span class="line">count=0</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="variable">$&#123;number[@]&#125;</span>;<span class="keyword">do</span></span><br><span class="line">  flag=$((count++))</span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"number[<span class="variable">$&#123;flag&#125;</span>] = <span class="variable">$i</span>"</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">count=0</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="variable">$&#123;string[*]&#125;</span>;<span class="keyword">do</span></span><br><span class="line">  flag=$((count++))</span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"string[<span class="variable">$&#123;flag&#125;</span>] = <span class="variable">$i</span>"</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"\n#示例2:\n"</span></span><br><span class="line"><span class="comment">#示例2.输出普通以及关联数组的长度以及键值的字符长度 </span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"number 数组长度：<span class="variable">$&#123;#number[*]&#125;</span> , string数组长度：<span class="variable">$&#123;#string[@]&#125;</span> "</span></span><br><span class="line"><span class="comment">#注意关联数组获取其长度</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"relatearray关联数组长度：<span class="variable">$&#123;#relatearray[*]&#125;</span>"</span></span><br><span class="line"></span><br><span class="line">count=0</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="variable">$&#123;string[*]&#125;</span>;<span class="keyword">do</span></span><br><span class="line">  flag=$((count++))</span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"string[<span class="variable">$&#123;flag&#125;</span>] 键值 <span class="variable">$&#123;string[$flag]&#125;</span> 长度为 <span class="variable">$&#123;#string[$flag]&#125;</span>"</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="comment">#关联数组关键点 （先列出数组索引值，然后根据关联索引值输出数组）</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="variable">$&#123;!relatearray[*]&#125;</span>;<span class="keyword">do</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"relatearray[<span class="variable">$&#123;i&#125;</span>] 键值 <span class="variable">$&#123;relatearray[$&#123;i&#125;</span>]&#125; 长度为 <span class="variable">$&#123;#relatearray[$&#123;i&#125;</span>]&#125;"</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"\n#示例3:\n"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"提取数组元素：<span class="variable">$&#123;number[@]:2&#125;</span> , <span class="variable">$&#123;string[*]:3&#125;</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"提取从下标[0]开始依次显示2个数组：<span class="variable">$&#123;number[@]:0:2&#125;</span> , <span class="variable">$&#123;string[*]:0:2&#125;</span>"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"\n#示例4:\n"</span></span><br><span class="line"><span class="comment">#string=("I" "Love" "you" "baby" "!")</span></span><br><span class="line"><span class="comment">#注意这里是 * 而不使用 @</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"将string数组中o变成大写O：<span class="variable">$&#123;string[@]/o/O&#125;</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"将string数组中o删除：<span class="variable">$&#123;string[@]//o&#125;</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"前匹配替换： <span class="variable">$&#123;string[@]/#y/Y&#125;</span> 删除：<span class="variable">$&#123;string[@]/#y/&#125;</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"后匹配替换： <span class="variable">$&#123;string[@]/#y/Y&#125;</span> 删除：<span class="variable">$&#123;string[@]/#y/&#125;</span>"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"\n#示例5:\n"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"左边最短匹配：<span class="variable">$&#123;string[@]#*o&#125;</span> ,最长匹配：<span class="variable">$&#123;string[@]##y*u&#125;</span>"</span>  <span class="comment">#&gt;&gt; 看</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"右边最短匹配：<span class="variable">$&#123;string[@]%*o&#125;</span> ,最长匹配：<span class="variable">$&#123;string[@]%%y*u&#125;</span>"</span>  <span class="comment">#&lt;&lt; 看</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"\n#示例6:\n"</span></span><br><span class="line"><span class="comment">#示例5.删除数组</span></span><br><span class="line"><span class="built_in">unset</span> number[1] number[2]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(seq 0 3);<span class="keyword">do</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"number[<span class="variable">$&#123;i&#125;</span>] = <span class="variable">$&#123;number[$i]&#125;</span>"</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment">##### 执行结果 #####</span></span><br><span class="line"><span class="comment">#示例1.案例输出</span></span><br><span class="line">number[0] = 1</span><br><span class="line">number[1] = 2</span><br><span class="line">number[2] = 3</span><br><span class="line">number[3] = 4</span><br><span class="line">string[0] = I</span><br><span class="line">string[1] = Love</span><br><span class="line">string[2] = you</span><br><span class="line">string[3] = baby</span><br><span class="line">string[4] = !</span><br><span class="line"></span><br><span class="line"><span class="comment">#示例2:数组长度</span></span><br><span class="line">number 数组长度：4 , string数组长度：5</span><br><span class="line">relatearray关联数组长度：3</span><br><span class="line">string[0] 键值 I 长度为 1</span><br><span class="line">string[1] 键值 Love 长度为 4</span><br><span class="line">string[2] 键值 you 长度为 3</span><br><span class="line">string[3] 键值 baby 长度为 4</span><br><span class="line">string[4] 键值 ! 长度为 1</span><br><span class="line">relatearray[one] 键值 weiyi 长度为 5</span><br><span class="line">relatearray[there] 键值 computer 长度为 8</span><br><span class="line">relatearray[two] 键值 geek 长度为 4</span><br><span class="line"></span><br><span class="line"><span class="comment">#示例3:提取数组</span></span><br><span class="line">提取数组元素：3 4 , baby !</span><br><span class="line">提取从下标[0]开始依次显示2个数组：1 2 , I Love</span><br><span class="line"></span><br><span class="line"><span class="comment">#示例4:替换删除</span></span><br><span class="line">将string数组中o变成大写O：I LOve yOu baby !</span><br><span class="line">将string数组中o删除：I Lve yu baby !</span><br><span class="line">前匹配替换： I Love You baby ! 删除：I Love ou baby !</span><br><span class="line">后匹配替换： I Love You baby ! 删除：I Love ou baby !</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例5:通配符匹配</span></span><br><span class="line">左边最短匹配：I ve u baby ! ,最长匹配：I Love  baby !</span><br><span class="line">右边最短匹配：I Love you baby ! ,最长匹配：I Love  baby !</span><br><span class="line"></span><br><span class="line"><span class="comment">#示例6:删除数组</span></span><br><span class="line">number[0] = 1</span><br><span class="line">number[1] =</span><br><span class="line">number[2] =</span><br><span class="line">number[3] = 4</span><br></pre></td></tr></table></figure></p>
<hr>

<h2 id="0x05-shell编程变量替换"><a href="#0x05-shell编程变量替换" class="headerlink" title="0x05 shell编程变量替换"></a>0x05 shell编程变量替换</h2><p>描述：我们在前面讲解{}作用的时候简单的提出几个变量替换，下面我们进行总结。</p>
<ul>
<li>变量替换：可以根据变量的状态（是否为空、是否定义等）来变它的值</li>
<li>优点是：效率高、代码精简</li>
<li>缺点是：逻辑难懂     </li>
</ul>
<p>变量置换规则：存在三种情况(变量存在、存在值为空、变量不存在)<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$&#123;var-value&#125;</span> : 变量var 存在则返回var,否则返回value; 变量var为空值时也返回 空值</span><br><span class="line"><span class="variable">$&#123;var:-value&#125;</span> : 变量var 存在则返回var,否则返回value; 变量var为空值时返回 value</span><br><span class="line"></span><br><span class="line"><span class="variable">$&#123;var+value&#125;</span> : 变量var 存在则返回value,否则返回为空, 变量var为空值时返回 value</span><br><span class="line"><span class="variable">$&#123;var:+value&#125;</span> : 变量var 存在则返回value,否则返回为空, 变量var为空值时返回 空值</span><br><span class="line"></span><br><span class="line"><span class="variable">$&#123;var=value&#125;</span> : 变量var 存在返回var(值不变),否则设置var=value并返回value, 变量var 为空时返回空</span><br><span class="line"><span class="variable">$&#123;var:=value&#125;</span> : 变量var 存在返回var(值不变),否则设置var=value并返回value, 变量var 为空时设置var=value并返回value</span><br><span class="line"></span><br><span class="line"><span class="variable">$&#123;var?value&#125;</span> ：变量var 存在返回var,否则将value输出到标准错误输出(stderr), 变量var为空值时也返回 空值</span><br><span class="line"><span class="variable">$&#123;var?value&#125;</span> ：变量var 存在返回var,否则将value输出到标准错误输出(stderr), 变量var将value输出到标准错误输出(stderr)</span><br></pre></td></tr></table></figure></p>
<figure class="image-box">
                <a rel=shell脚本编程之路2 href="https://img.weiyigeek.top/2019/20190708111915.png" target="_blank" title="WeiyiGeek.常用的变量替换" data-fancybox="images"><img src="https://img.weiyigeek.top/2019/20190708111915.png" alt="WeiyiGeek.常用的变量替换" title="" class=""></a>
                <p>WeiyiGeek.常用的变量替换</p>
            </figure>
<p>实际案例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#示例1.&#123;$var-value&#125; 与 &#123;$var:-value&#125;</span></span><br><span class="line">$ var=1024</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;var-512&#125;</span> <span class="string">"|"</span> <span class="variable">$var</span>  <span class="comment">#1024 | 1024</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;var:-512&#125;</span> <span class="string">"|"</span> <span class="variable">$var</span>  <span class="comment">#1024 | 1024</span></span><br><span class="line"><span class="comment">##后者与前者不同在于变量$var是否为空</span></span><br><span class="line">$ var=</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;var-512&#125;</span> <span class="string">"|"</span> <span class="variable">$var</span> <span class="comment"># 空值 | 空值  (对比点)</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;var:-512&#125;</span> <span class="string">"|"</span> <span class="variable">$var</span> <span class="comment"># 512 |  (对比点)</span></span><br><span class="line">$ <span class="built_in">unset</span> <span class="variable">$var</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;var-512&#125;</span> <span class="string">"|"</span> <span class="variable">$var</span> <span class="comment"># 512 | </span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;var:-512&#125;</span> <span class="string">"|"</span> <span class="variable">$var</span> <span class="comment"># 512 | </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例2.&#123;$var+value&#125; 与 &#123;$var:+value&#125; 与上面相反在y设置值时候才返回valur</span></span><br><span class="line">$ var=512</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;var+1024&#125;</span> <span class="string">"|"</span> <span class="variable">$var</span>  <span class="comment">#1024 | 512</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;var:+1024&#125;</span> <span class="string">"|"</span> <span class="variable">$var</span>  <span class="comment">#1024 | 512</span></span><br><span class="line">$ var=</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;var+1024&#125;</span> <span class="string">"|"</span> <span class="variable">$var</span>  <span class="comment">#1024 |</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;var:+1024&#125;</span> <span class="string">"|"</span> <span class="variable">$var</span> <span class="comment"># | </span></span><br><span class="line">$ <span class="built_in">unset</span> var</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;var+1024&#125;</span> <span class="string">"|"</span> <span class="variable">$var</span>  <span class="comment"># |</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;var:+1024&#125;</span> <span class="string">"|"</span> <span class="variable">$var</span> <span class="comment"># | </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例3.$&#123;var=value&#125; 和 $&#123;var:=value&#125;</span></span><br><span class="line">$ var=512</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;var=1024&#125;</span> <span class="string">"|"</span> <span class="variable">$var</span></span><br><span class="line">512 | 512</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;var:=1024&#125;</span> <span class="string">"|"</span> <span class="variable">$var</span></span><br><span class="line">512 | 512</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;novar:=1024&#125;</span> <span class="string">"|"</span> <span class="variable">$novar</span></span><br><span class="line">1024 | 1024</span><br><span class="line"></span><br><span class="line">$ var=</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;var=1024&#125;</span> <span class="string">"|"</span> <span class="variable">$var</span>  <span class="comment"># |    #不同点</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;var:=1024&#125;</span> <span class="string">"|"</span> <span class="variable">$var</span> <span class="comment"># 1024 | 1024</span></span><br><span class="line"></span><br><span class="line">$ <span class="built_in">unset</span> var</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;var=1024&#125;</span> <span class="string">"|"</span> <span class="variable">$var</span></span><br><span class="line">1024 | 1024</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;var:=1024&#125;</span> <span class="string">"|"</span> <span class="variable">$var</span></span><br><span class="line">1024 | 1024</span><br><span class="line"></span><br><span class="line"><span class="comment"># 补充：数组设置</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"VAR_DNS_SERVER =&gt;"</span> <span class="variable">$&#123;VAR_DNS_SERVER[0]:="223.5.5.5"&#125;</span> <span class="variable">$&#123;VAR_DNS_SERVER[1]:="223.6.6.6"&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例4.$&#123;var?value&#125; 和 $&#123;var:?value&#125;</span></span><br><span class="line">$ var=1024</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;var?512&#125;</span> <span class="string">"|"</span> <span class="variable">$var</span></span><br><span class="line">1024 | 1024</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;var?=512&#125;</span> <span class="string">"|"</span> <span class="variable">$var</span></span><br><span class="line">1024 | 1024</span><br><span class="line"></span><br><span class="line">$ var=</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;var?512&#125;</span> <span class="string">"|"</span> <span class="variable">$var</span> <span class="comment"># |   #对比点</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;var:?512&#125;</span> <span class="string">"|"</span> <span class="variable">$var</span> <span class="comment">#bash: var: 512</span></span><br><span class="line"></span><br><span class="line">$ <span class="built_in">unset</span> var</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;var?512&#125;</span> <span class="string">"|"</span> <span class="variable">$var</span>  <span class="comment">#bash: var: 512</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;var:?512&#125;</span> <span class="string">"|"</span> <span class="variable">$var</span>  <span class="comment">#bash: var: 512</span></span><br></pre></td></tr></table></figure></p>
<p>实际案例2：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#变量替换测试代码</span></span><br><span class="line">var=1024</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"1 - Value of var is <span class="variable">$&#123;var&#125;</span>"</span> <span class="variable">$&#123;var:-"Variable is not set"&#125;</span> <span class="comment"># 1 - Value of var is 1024 1024</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"2 - Value of var is <span class="variable">$&#123;var&#125;</span>"</span> <span class="variable">$&#123;var:+"Variable is not set"&#125;</span> <span class="comment"># 2 - Value of var is 1024 Variable is not set</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"3 - Value of var is <span class="variable">$&#123;var&#125;</span>"</span> <span class="variable">$&#123;var:="Variable is not set"&#125;</span> <span class="comment"># 2 - Value of var is 1024 1024</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"4 - Value of var is <span class="variable">$&#123;var&#125;</span>"</span> <span class="variable">$&#123;var:?"Variable is not set"&#125;</span> <span class="comment"># 2 - Value of var is 1024 1024</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"1 - Value of var is <span class="variable">$var</span>"</span> <span class="variable">$&#123;var-"This is default value"&#125;</span> <span class="comment"># 1 - Value of var is 1024 1024</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"2 - Value of var is <span class="variable">$var</span>"</span> <span class="variable">$&#123;var+"This is default value"&#125;</span> <span class="comment"># 2 - Value of var is 1024 This is default value</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"3 - Value of var is <span class="variable">$var</span>"</span> <span class="variable">$&#123;var?"This is default value"&#125;</span> <span class="comment"># 2 - Value of var is 1024 1024</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"4 - Value of var is <span class="variable">$var</span>"</span> <span class="variable">$&#123;var="This is default value"&#125;</span> <span class="comment"># 4 - Value of var is 1024 1024</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">unset</span> var</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"4 - Value of var is <span class="variable">$var</span>"</span> <span class="variable">$&#123;var:+"【This is default value】"&#125;</span>   <span class="comment"># var未定义,将不会返回 This is default value 字符串，定义将返回字符串</span></span><br><span class="line"><span class="comment"># 4 - Value of var is</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"5 - Value of var is "</span> <span class="variable">$&#123;var:?"【Print this message】"&#125;</span>    <span class="comment"># var未定义,会返回 Print this message 字符串，定义将返回其变量</span></span><br><span class="line"><span class="comment"># -bash: var:  Value of var is 【Print this message】</span></span><br></pre></td></tr></table></figure></p>
<hr>

<h2 id="0x06-shell编程变量测试"><a href="#0x06-shell编程变量测试" class="headerlink" title="0x06 shell编程变量测试"></a>0x06 shell编程变量测试</h2><p>描述：变量测试时shell编程中最重要的一个环节,可以更据条件进行执行相应的代码;<code>Shell中的 test 命令 或者 [[ ]] 用于检查某个条件是否成立</code>，它可以进行数值、字符和文件三个方面的测试。</p>
<p>虽然test与<code>[]</code>也能达到效果,但还是建议采用<code>[[]]</code>来进行变量测试,同test命令为真返回0,否则返回非0<br>变量测试方式：只对shell有效，在脚本优化时候使用，推测y的值来给x赋值</p>
<p>变量测试说明：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 按文件类型进行判断</span></span><br><span class="line">-e 该『文件名』是否存在?(常用) </span><br><span class="line">-f 该『文件名』是否为文件(file)?(常用) </span><br><span class="line">-d 该『文件名』是否为目录(directory)?(常用) </span><br><span class="line">-b 该『文件名』是否为一个 block device 装置? </span><br><span class="line">-c 该『文件名』是否为一个 character device 装置? </span><br><span class="line">-p 该『文件名』是否为一个 FIFO 管道(pipe) 文件? </span><br><span class="line">-L 该『文件名』是否为一个符号链接文件? </span><br><span class="line">-s 该『文件』大小是否不为 0如果大于0为真否则为假;</span><br><span class="line">-S 该『文件名』是否为一个 Socket (套接字) 文件? </span><br><span class="line"></span><br><span class="line"><span class="comment"># 按文件权限进行判断</span></span><br><span class="line">-r 侦测该文件名是否具有『可读』的属性？ </span><br><span class="line">-w 侦测该文件名是否具有『可写』的属性？ </span><br><span class="line">-x 侦测该文件名是否具有『可执行』的属性？ </span><br><span class="line">-u 侦测该文件名是否具有『SUID』的属性？ </span><br><span class="line">-g 侦测该文件名是否具有『SGID』的属性？ </span><br><span class="line">-k 侦测该文件名是否具有『Sticky bit』的属性？ </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 两个文件之间的比较</span></span><br><span class="line">-nt (newer than)判断 file1 是否比 file2 新 (New)</span><br><span class="line">-ot (older than)判断 file1 是否比 file2 旧 (Old)</span><br><span class="line">-ef 判断 file2 与 file2 是否为同一文件，可用在判断 hard link 的判定上 <span class="comment">#主要意义在判定，两个文件是否均指向同一个 inode 号！</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 表达式的逻辑体条件(注意与其他编程语言有所不同,两个都为真0采返回0，否则返回1)</span></span><br><span class="line"><span class="comment"># [] 可采用前者-a，[[]]可采用后者 &amp;&amp;</span></span><br><span class="line">-a 或 &amp;&amp; ：逻辑与，“而且”的意思，前后两个表达式都成立时整个测试结果才为真，否则为假</span><br><span class="line">-o 或 || ： 逻辑或，“或者”的意思，操作符两边至少一个为真时，结果为真，否为为假</span><br><span class="line">! ：逻辑否，当制定条件不成立时，返回结果为真</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 判断字符串</span></span><br><span class="line">[ 字符串1 = 字符串2]  <span class="comment"># 可以使用 " == " 代替</span></span><br><span class="line">[ 字符串1 != 字符串2] <span class="comment"># 可以使用 " !== " 代替</span></span><br><span class="line">[ –n 字符串 ]  <span class="comment">#字符串的长度非零</span></span><br><span class="line">[ –z 字符串 ]   <span class="comment">#字符串的长度是否为零</span></span><br><span class="line">[ string1 \&lt; string2 ] <span class="comment">#如果string1在本地的字典序列中排在string2之前，则为真</span></span><br><span class="line">[ string1 \&gt; string2 ] <span class="comment">#如果string1在本地的字典序列中排在string2之后，则为真 </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#判断整数 ,在[[]] 可以使用替换字符 (0~9可以，但是超出后建议使用 -nn 形式比较)</span></span><br><span class="line"><span class="comment">#建议采用 (()) 两个形式都通用</span></span><br><span class="line">-eq：等于（equal）  <span class="comment"># 可采用 ==  或 = 替代</span></span><br><span class="line">-ne：不等于（not equal） <span class="comment"># 可采用 != 替代</span></span><br><span class="line">-gt：大于（Greater than） <span class="comment"># 可采用 &gt; 替达</span></span><br><span class="line">-lt：小于（lesser than）   <span class="comment"># 可采用 &lt; 替达</span></span><br><span class="line">-le：小于等于（lesser or equal）  <span class="comment"># 可采用 &lt;= 替达 [[]] 不能使用</span></span><br><span class="line">-ge：大于等于（Greater or equal） <span class="comment"># 可采用 &gt;= 替达 (()) 不能使用</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#也可以采用转义 大于与小于 来实现整数对比，由于和重定向符号冲突</span></span><br><span class="line">[ 2 \&gt; 1]  <span class="comment">#而且单[]需要转义  也不能采用 &lt;= 与 &gt;=</span></span><br><span class="line">[[ 1 &lt; 2]]  <span class="comment">#双[[]]不需要转义 不建议采用 </span></span><br><span class="line"><span class="comment">#[[ 1 &lt;= 2]]  #双[[]]/[]不能采用才中形式会报错</span></span><br><span class="line">((1&lt;2)) <span class="comment">#无需空格间隔</span></span><br><span class="line">((1&gt;=2))</span><br></pre></td></tr></table></figure></p>
<p>简单案例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#示例1.判断目录与文件类型，真则输出yes否则返回no , 三种方法test [] [[]]</span></span><br><span class="line"><span class="built_in">test</span> -f ww.php  &amp;&amp; <span class="built_in">echo</span> 1 || <span class="built_in">echo</span> 0  <span class="comment">#1</span></span><br><span class="line"><span class="built_in">test</span> -d ww.php  &amp;&amp; <span class="built_in">echo</span> 1 || <span class="built_in">echo</span> 0  <span class="comment">#0</span></span><br><span class="line">[ -d ~/.ssh/ -a -f ~/.bashrc ] &amp;&amp; <span class="built_in">echo</span> <span class="string">"yes"</span> || <span class="built_in">echo</span> <span class="string">"no"</span>  <span class="variable">$yes</span></span><br><span class="line">[[ -f ww.php ]] &amp;&amp; <span class="built_in">echo</span> 1 || <span class="built_in">echo</span> 0  <span class="comment">#1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例2.判断变量aa是否有值,同时判断值是否大于23</span></span><br><span class="line">aa=11</span><br><span class="line">[ -n <span class="variable">$aa</span> -a <span class="variable">$aa</span> -gt 123 ] &amp;&amp; <span class="built_in">echo</span> <span class="string">"yes"</span> || <span class="built_in">echo</span> <span class="string">"no"</span>  <span class="comment">#no  [] 采用形式</span></span><br><span class="line">[[ -n <span class="variable">$aa</span> &amp;&amp; <span class="variable">$aa</span> -gt 123 ]] &amp;&amp; <span class="built_in">echo</span> <span class="string">"yes"</span> || <span class="built_in">echo</span> <span class="string">"no"</span>  <span class="comment">#no [[]] 采用形式</span></span><br><span class="line"><span class="comment">#如果[]先采用&amp;&amp;符号怎么办？分割比较表达式即可</span></span><br><span class="line">[ -n <span class="string">"<span class="variable">$aa</span>"</span> ] &amp;&amp; [ <span class="variable">$aa</span> -gt 123] &amp;&amp; <span class="built_in">echo</span> <span class="string">"yes"</span> || <span class="built_in">echo</span> <span class="string">"no"</span> <span class="comment">#no 效果同上</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例3.判断是空串吗?   -z 与-n功能相反</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"\e[1;34m  #变量测试：短路求值的功效(与C语言的&amp;&amp; || 隐性规则一致) \e[0m"</span></span><br><span class="line">[[ -z <span class="string">"111"</span> ]] &amp;&amp; <span class="built_in">echo</span> <span class="string">"w"</span> || <span class="built_in">echo</span> <span class="string">"whoami"</span></span><br><span class="line">[[ -z <span class="string">""</span> ]] &amp;&amp; <span class="built_in">echo</span> <span class="string">"w"</span> || <span class="built_in">echo</span> <span class="string">"whoami"</span></span><br><span class="line">[[ -z <span class="string">"1"</span> ]] &amp;&amp; <span class="built_in">echo</span> <span class="string">"is null"</span> ||  <span class="built_in">echo</span> <span class="string">"is not null"</span>  <span class="comment">#is not null</span></span><br><span class="line">[[ -z <span class="string">""</span> ]] &amp;&amp; <span class="built_in">echo</span> <span class="string">"is null"</span> ||  <span class="built_in">echo</span> <span class="string">"is not null"</span>  <span class="comment">#is null</span></span><br><span class="line">[ <span class="string">"web"</span> \&lt; <span class="string">"weba"</span> ] &amp;&amp; <span class="built_in">echo</span> 1 || <span class="built_in">echo</span> 0   <span class="comment"># 1 字符比较是按照字母顺序比较的注意转义</span></span><br><span class="line">[[ <span class="string">"web"</span> &lt; <span class="string">"aweba"</span> ]] &amp;&amp; <span class="built_in">echo</span> 1 || <span class="built_in">echo</span> 0  <span class="comment"># 0 #不需要转义</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例4.str检测字符串是否为空，不为空返回 true。  </span></span><br><span class="line"><span class="built_in">read</span> a</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$a</span> ];<span class="keyword">then</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"<span class="variable">$a</span> : string is not empty"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"<span class="variable">$a</span> : string is empty"</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment">#abc : string is not empty</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例5.判断软硬链接</span></span><br><span class="line">[ /root/student.txt -ef /tmp/su.txt ] &amp;&amp; <span class="built_in">echo</span> <span class="string">"true"</span> || <span class="built_in">echo</span> <span class="string">"false"</span> <span class="comment">#false</span></span><br><span class="line"><span class="comment">#[[]] 必须有空格  = test </span></span><br><span class="line"><span class="comment">#是否是文件，文件是否存在</span></span><br><span class="line">$[[ -f 1.txt ]]&amp;&amp; <span class="built_in">echo</span> <span class="string">"1.txt is file"</span> || <span class="built_in">echo</span>  <span class="string">"1.txt is notfile"</span></span><br><span class="line">1.txt is file</span><br><span class="line"></span><br><span class="line"><span class="comment">#是否是可执行文件</span></span><br><span class="line">[[ -x 1.txt ]]&amp;&amp; <span class="built_in">echo</span> <span class="string">"1.txt can be execute"</span> ||  <span class="built_in">echo</span>  <span class="string">"1.txt can't be execute"</span></span><br><span class="line"><span class="comment">#1.txt can't be execute</span></span><br><span class="line"><span class="variable">$chmod</span>  +x 1.txt</span><br><span class="line">[[ -x 1.txt ]]&amp;&amp; <span class="built_in">echo</span> <span class="string">"1.txt can be execute"</span> ||  <span class="built_in">echo</span>  <span class="string">"1.txt can be execute"</span></span><br><span class="line"><span class="comment">#1.txt can be execute</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#是否是目录</span></span><br><span class="line">$[[ -d 1.txt ]] &amp;&amp; <span class="built_in">echo</span> <span class="string">"1.txt is dir"</span> || <span class="built_in">echo</span>  <span class="string">"1.txt is't dir"</span></span><br><span class="line"><span class="comment">#1.txt is't dir</span></span><br><span class="line">$[[ -d /bin ]] &amp;&amp; <span class="built_in">echo</span> <span class="string">"1.txt is dir"</span> || <span class="built_in">echo</span>  <span class="string">"1.txt is't dir"</span></span><br><span class="line"><span class="comment">#1.txt is dir</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">####*补充知识点：*#######</span></span><br><span class="line"><span class="comment">#注意在root用户下所有的文件是可读的，即便是000权限</span></span><br><span class="line">ubuntu@WeiyiGeek:~$ ll www.txt</span><br><span class="line">---------- 1 ubuntu ubuntu 0 Jul 12 12:25 www.txt</span><br><span class="line"><span class="variable">$root</span>@WeiyiGeek:/home/ubuntu<span class="comment"># [[ -r www.txt ]] &amp;&amp; &#123;  #代码块形式值值得学习，可以替换if .. then ...语句</span></span><br><span class="line"><span class="built_in">echo</span> 1</span><br><span class="line"> <span class="built_in">echo</span> 2</span><br><span class="line"> <span class="built_in">echo</span> 3</span><br><span class="line"> &#125;</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line"></span><br><span class="line"><span class="comment">#示例1.补充示例从标准输入输出</span></span><br><span class="line">[ <span class="variable">$1</span> -eq 3 ] &amp;&amp; &#123; <span class="built_in">echo</span> 1;<span class="built_in">echo</span> 2;<span class="built_in">echo</span> 3 &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例2.表达式空格影响（一定要在表达式中使用双引号包含变量）</span></span><br><span class="line">root@WeiyiGeek:/home/ubuntu<span class="comment"># [ "abc" == "1" ] &amp;&amp; echo "相等" || echo "不相等" #分割字符串比较</span></span><br><span class="line"><span class="comment">#不相等</span></span><br><span class="line">root@WeiyiGeek:/home/ubuntu<span class="comment"># [ "abc"=="1" ] &amp;&amp; echo "相等" || echo "不相等" #</span></span><br><span class="line"><span class="comment">#相等</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例3.采用转义后的大于小于来实现，而双[[]]不需要转义</span></span><br><span class="line">$ [ 2 \&lt; 1 ] &amp;&amp; <span class="built_in">echo</span> 1 || <span class="built_in">echo</span> 0   <span class="comment">#0  需要转义 ，并且注意空格和比较符合的间隔</span></span><br><span class="line">$ [ 2 \&gt; 11 ] &amp;&amp; <span class="built_in">echo</span> 1 || <span class="built_in">echo</span> 0  <span class="comment">#1  注意的是只比较第一位数值；比较(0~9)可以采用</span></span><br><span class="line">$ [[ 2 &gt; 1 ]] &amp;&amp; <span class="built_in">echo</span> 1 || <span class="built_in">echo</span> 0   <span class="comment">#1  不需要转义</span></span><br><span class="line">$ [[ 2 &gt; 11 ]] &amp;&amp; <span class="built_in">echo</span> 1 || <span class="built_in">echo</span> 0  <span class="comment">#1  注意的是只比较第一位数值；比较(0~9) 可以采用</span></span><br><span class="line"></span><br><span class="line">$ (( 1 &lt;= 2 )) &amp;&amp; <span class="built_in">echo</span> 1 || <span class="built_in">echo</span> 0  <span class="comment">#1 不需要转义</span></span><br><span class="line">$ (( 1 &gt;= 2 )) &amp;&amp; <span class="built_in">echo</span> 1 || <span class="built_in">echo</span> 0  <span class="comment">#0 不需要转义</span></span><br><span class="line">$ (( 2 &lt; 11 )) &amp;&amp; <span class="built_in">echo</span> 1 || <span class="built_in">echo</span> 0  <span class="comment">#1 不会存在[[]]只比较第一个字符，任意数值都能使用</span></span><br><span class="line">$ ((2&gt;11)) &amp;&amp; <span class="built_in">echo</span> 1 || <span class="built_in">echo</span> 0      <span class="comment">#0  不需要转义，并且注意无需空格和常规数学比较符号</span></span><br></pre></td></tr></table></figure></p>
<p>基础实例:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#下面这种Shell写法常常会在linux中看见,特别是命令执行的时候</span></span><br><span class="line">clear</span><br><span class="line"></span><br><span class="line">cat &lt;&lt;DOC</span><br><span class="line"><span class="comment"># 这里是菜单提示 #</span></span><br><span class="line"><span class="comment">#Step1.判断变量值是否存在</span></span><br><span class="line"><span class="comment">#Step2.校验变量值类型</span></span><br><span class="line"><span class="comment">#step3.进行传入变量值进行下一步操作</span></span><br><span class="line">DOC</span><br><span class="line"></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"请输入两个数值(如：1 2)："</span> num1 num2</span><br><span class="line"><span class="comment">#注意空格</span></span><br><span class="line">[ -z <span class="string">"<span class="variable">$num1</span>"</span> -a -z <span class="string">"<span class="variable">$num2</span>"</span> ] &amp;&amp; &#123;</span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"[*] input Error "</span>;<span class="built_in">exit</span> 1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#注意采用""和''包含表达式</span></span><br><span class="line">[ <span class="string">'`echo "$num1" | sed -r "s#[^0-9]##g"`"'</span> == <span class="string">"<span class="variable">$num1</span>"</span> ] &amp;&amp; &#123;</span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"输入的第一个值非数值"</span></span><br><span class="line">  <span class="built_in">exit</span> 0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[ <span class="string">'`echo "$num2" | sed -r "s#[^0-9]##g"`'</span> == <span class="string">"<span class="variable">$num2</span>"</span> ] &amp;&amp; &#123;</span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"输入的第一个值非数值"</span></span><br><span class="line">  <span class="built_in">exit</span> 0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#比较判断两个数值</span></span><br><span class="line">((<span class="string">"<span class="variable">$num1</span>"</span>&gt;<span class="string">"<span class="variable">$num2</span>"</span>)) &amp;&amp; &#123;</span><br><span class="line">  <span class="built_in">echo</span> <span class="string">" <span class="variable">$num1</span> &gt; <span class="variable">$num2</span> "</span></span><br><span class="line">&#125;</span><br><span class="line">((<span class="string">"<span class="variable">$num1</span>"</span>&lt;<span class="string">"<span class="variable">$num2</span>"</span>)) &amp;&amp; &#123;</span><br><span class="line">  <span class="built_in">echo</span> <span class="string">" <span class="variable">$num1</span> &lt; <span class="variable">$num2</span> "</span></span><br><span class="line">&#125;</span><br><span class="line">((<span class="string">"<span class="variable">$num1</span>"</span>==<span class="string">"<span class="variable">$num2</span>"</span>)) &amp;&amp; &#123;</span><br><span class="line">  <span class="built_in">echo</span> <span class="string">" <span class="variable">$num1</span> == <span class="variable">$num2</span> "</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项:"></a>注意事项:</h1><ul>
<li>shell编程中下面的脚本命令后面不用加”;”</li>
<li>在使用<code>[ ]</code>进行变量测试的时候,表达式离两边 [  ] / [[]] 有空格（十分注意）;</li>
<li>在使用<code>(())</code>进行变量测试的时候,表达式离两边 () 无需空格（十分注意）;</li>
<li>在<code>[ -d &quot;$wh&quot; ]</code>测试都需要将变量使用 <code>&quot;&quot;</code> 包含然后再比较,<code>注意在进行整数比较时候无需采用</code>；</li>
<li>在采用[]进行整型比较时候(不建议采用””包含整数)必须对 “&gt;” 和 “&lt;”进行转义才能达到正确的结果，而使用[[]]和(())时候可以不用转义</li>
<li>在[[]]采用大于小于时候结果可能不对，只比较了第一位;所以在比较时候优先采用 -lt 形式 或者 (($1&gt;$2))</li>
<li>在test与[]可采用-a形式,在[[]]中可采用&amp;&amp;形式,多个 [] 之间以及多个 [[]] 之间可以采用混合逻辑符号 &amp;&amp; 或 ||;</li>
</ul>

        </div>
        
        <!-- 微信公众号关注/文章版权复制 -->
        
        <div id="btw-mask" style="position: fixed; top: 0px; right: 0px; bottom: 0px; left: 0px; opacity: 0.7; z-index: 999; background: rgb(0, 0, 0); display:none"></div>
<div id="btw-modal" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 360px; text-align: center; font-size: 13px; background: rgb(255, 255, 255); border-radius: 10px; z-index: 9999; font-family: PingFangSC-Regular, sans-serif;display:none">
<span id="btw-modal-close-btn" style="position: absolute; top: 5px; right: 15px; line-height: 1.8; font-size: 15px; cursor: pointer; opacity: 0.2; z-index: 9999; color: rgb(0, 0, 0); background: none; border: none; outline: none;">X</span>
<p id="btw-modal-header" style="margin-top: 40px; line-height: 1.8; font-size: 13px; ">
<b style="color:#6190e8;">你好看友,欢迎关注博主微信公众号哟! ❤ <br> 这将是我持续更新文章的动力源泉，谢谢支持！(๑′ᴗ‵๑) </b> <br> 如不想关注请点击右上角的【X】即可关闭继续浏览文章.<br>  <b style="color:red;"> 温馨提示: 未解锁的用户不能粘贴复制文章内容哟!</b> <br>
<br>Method 1.Please visit <strong><a href="https://twitter.com/WeiyiGeek" target="_blank" rel="noopener" style="color: rgb(240, 65, 52);text-decoration:underline;">【My Twitter】</a></strong>. There is an article verification code in the homepage.
<br>方式2.请访问本博主的B站<strong><a href="https://space.bilibili.com/385802642" target="_blank" rel="noopener" style="color: rgb(240, 65, 52);text-decoration:underline;">【WeiyiGeek】</a></strong>首页关注UP主,<br>将自动随机获取解锁验证码。
<br>方式3.扫一扫下方二维码，关注本站<strong>官方公众号</strong><br>
回复：<strong style="color: rgb(240, 65, 52);">验证码</strong>
将获取<strong style="color: rgb(240, 65, 52);">解锁(有效期7天)</strong>本站所有技术文章哟!</p>
<img src="/img/wechat-search.png" style="width: 300px; margin-top: 10px;">
<div id="btw-modal-input-code" style="margin-top: 20px; background: rgb(255, 255, 255);">
  <input id="btw-modal-input" type="number" minlength="4" maxlength="4" placeholder="请输入验证码|Verification Code"
    style="width: 165px; height: 32px; line-height: 32px; padding: 0px 10px; margin: 0px 10px; font-size: 13px; text-rendering: auto; text-transform: none; cursor: text; outline: none; box-sizing: border-box; border: 1px solid rgb(221, 221, 221); -webkit-appearance: textfield; background-color: white; -webkit-rtl-ordering: logical;"/>
  <button id="btw-submit-btn" onclick="yzm_vertify()"
    style="padding: 0px 20px; height: 32px; font-size: 14px; outline: none; border: none; color: rgb(255, 255, 255); background: rgb(222, 104, 109); cursor: pointer;">提
    交</button> </div>
<p id="btw-footer" style="margin: 40px 0px 20px; color: rgb(153, 153, 153);">@WeiyiGeek - 为了能到远方，脚下的每一步都不能少</p>
</div>
           

        <!-- Google 广告 -->
        
<ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-9134434519967436" data-ad-slot="7905848205"></ins>
  

        
<hr/>
<div style="text-align: center;font-weight: bold;">
  <p> 欢迎各位志同道合的朋友一起学习交流，如文章有误请在下方留下您宝贵的经验知识，个人邮箱地址<b style="color:#ff654e"><code>【master#weiyigeek.top】</code></b>或者个人公众号<b style="color:#ff654e"><code>【WeiyiGeek】</code></b>联系我。 </p>
  <p> 更多文章来源于<b style="color:#03a9f4">【WeiyiGeek Blog - 为了能到远方，脚下的每一步都不能少】</b>, 个人首页地址( <a style="color: #03a9f4;" href="https://weiyigeek.top" target="_blank"> https://weiyigeek.top </a> )</p>
<!-- 

  <ul style="font-weight: bolder;">
    <li>
      <p><span style="color: #03a9f4">echo&nbsp;&nbsp;"【点个赞】，动动你那粗壮的拇指或者芊芊玉手，亲！"</span></p>
    </li>
    <li>
      <p><span style="color: #ff9201">printf("%s",&nbsp;"【投个币】，万水千山总是情，投个硬币行不行，亲！")</span></p>
    </li>
    <li>
      <p><span style="color: #02a2ff">fmt.Printf("【收个藏】，阅后即焚不吃灰，亲！")&nbsp;&nbsp;</span></p>
    </li>
    <li>
      <p><span style="color:red">console.info("【转个发】，让更多的志同道合的朋友一起学习交流，亲！")</span></p>
    </li>
    <li>
      <p><span style="color: #ff654e">System.out.println("【关个注】，后续浏览查看不迷路哟，亲！")</span></p>
    </li>
  </ul> -->
  <div>
    <img src="/img/share-wechat.jpg" class="img-responsive" alt="扫描Follow(关注)WeiyiGeek公众号与Visit(浏览)极客全栈修炼小程序" >
    <p>专栏书写不易，如果您觉得这个专栏还不错的，请给这篇专栏 <b style="color: red;">【点个赞、投个币、收个藏、关个注、转个发、赞个助】</b>，这将对我的肯定，我将持续整理发布更多优质原创文章！。</p>
    <img src="/img/weiyigeek.jpg" class="img-responsive" alt="WeiyiGeek-banner">
  </div>
</div>
  <hr>
  

  <blockquote class="post-copyright">
    <div class="content">
      
        
<span class="post-time">
    最后更新时间：<time datetime="2023-01-31T02:29:10.385Z" itemprop="dateUpdated">2023-01-31 10:29:10</time>
</span><br>


        <span>文章原始路径：<a href="https://github.com/WeiyiGeek/blog/edit/master/source/_posts/系统运维/Linux/Shell编程/shell脚本编程之路2.md" target="_blank" rel="noopener noreferrer">_posts/系统运维/Linux/Shell编程/shell脚本编程之路2.md</a></span><br>
         <span class="copy-copyright">转载注明出处，原文地址：<a href="/2019/6-28-133.html" target="_blank" rel="external">https://blog.weiyigeek.top/2019/6-28-133.html</a></span><br>本站文章内容遵循 <a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a> 
    </div>
    <footer>
      <a href="https://blog.weiyigeek.top">
        <img src="/img/avatar.jpg" alt="WeiyiGeek">
        WeiyiGeek
      </a>
    </footer>
  </blockquote>


        
            <div class="page-reward">
  <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-rectangle waves-light">☕️ 请作者喝杯咖啡!</a>
</div>
            
        
        <div class="post-footer">
            
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Shell/" rel="tag">Shell</a></li></ul>

            <div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://blog.weiyigeek.top/2019/6-28-133.html&title=《shell脚本编程之路2》 — WeiyiGeek Blog&pic=https://blog.weiyigeek.top/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.weiyigeek.top/2019/6-28-133.html&title=《shell脚本编程之路2》 — WeiyiGeek Blog&source=[TOC]" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.weiyigeek.top/2019/6-28-133.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《shell脚本编程之路2》 — WeiyiGeek Blog&url=https://blog.weiyigeek.top/2019/6-28-133.html&via=https://blog.weiyigeek.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://blog.weiyigeek.top/2019/6-28-133.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>

        </div>
        
          <!-- 评论组件 -->


<div id="gitalk-container"></div>
<script type="text/javascript" src="/js/plugins/gitalk.min.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/custom/gitalk.init.js?v=1.6.6"></script>
        
    </div>
    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="prev">
      <a href="/2019/6-28-134.html" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">shell脚本编程之路3</h4>
      </a>
    </div>
  

  
    <div class="next">
      <a href="/2019/6-28-132.html" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">shell脚本编程之路1</h4>
      </a>
    </div>
  
</nav>


    
    
        <aside class="post-widget">
            <nav class="post-toc-wrap" id="post-toc">
                <strong>目录</strong>
                <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#0x03-shell编程运算符"><span class="post-toc-number">1.</span> <span class="post-toc-text">0x03 shell编程运算符</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-整数运算"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">1.整数运算</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-浮点数运算"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">2.浮点数运算</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-逻辑运算"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">3.逻辑运算</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-位运算"><span class="post-toc-number">1.4.</span> <span class="post-toc-text">4.位运算</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#0x04-shell编程数组-Array"><span class="post-toc-number">2.</span> <span class="post-toc-text">0x04 shell编程数组(Array)</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#0x05-shell编程变量替换"><span class="post-toc-number">3.</span> <span class="post-toc-text">0x05 shell编程变量替换</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#0x06-shell编程变量测试"><span class="post-toc-number">4.</span> <span class="post-toc-text">0x06 shell编程变量测试</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#注意事项"><span class="post-toc-number"></span> <span class="post-toc-text">注意事项:</span></a>
            </nav>
            <div class="toc-bar"><div>
        </aside>
    
    <!-- 
  <div id="post-wechat" class="post-wechat" style="position:fixed;top: 360px;bottom: 500px;right: 3%;width: 190px;text-align: center; z-index: 9999">
    <p><b>关注【全栈工程师修炼指南】</b></p>
    <img src="/img/wechat-gzh.jpg" class="img-responsive" alt="weiyigeek">
    <p><b>欢迎添加【作者】微信</b></p>
    <img src="/img/wehat.jpg" class="img-responsive" alt="weiyigeek">
  </div>


 -->

    <!-- 支付宝微信文章赞赏 -->
    
      <div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        如果此篇文章对您有帮助，就请作者喝杯 Coffee ☕️☕️!
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardwechat" src="/img/reward-wechat.jpg" height="250" height="250" alt="微信打赏二维码">
            <img id="rewardalipay" src="/img/reward-alipay.png" height="250" height="250" alt="支付宝打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <!-- <input id="rewardToggle" type="checkbox" class="reward-toggle-check" data-wechat="/img/reward-wechat.jpg" data-alipay="/img/reward-alipay.png"> -->
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>

      
</article>
</div>

    </main>
    <footer class="footer ">
    
    <div class="top">
        
            <p>
    <span>Links：</span>
    
    <span class="blogroll-item">
        <a href="https://weiyigeek.top" target="_blank">https://weiyigeek.top</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.weiyigeek.top" target="_blank">https://blog.weiyigeek.top</a>
    </span>
    
    <span class="blogroll-item">
        <a href="/img/share-wechat.jpg" target="_blank">公众账号</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://space.bilibili.com/385802642/article" target="_blank">哔哩哔哩专栏</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://github.com/weiyigeek" target="_blank">博主Github</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://gitee.com/WeiyiGeek" target="_blank">博主Gitee</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.zhihu.com/people/weiyiSec" target="_blank">知乎</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.cnblogs.com/WeiyiGeek" target="_blank">博客园</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://my.oschina.net/weiyigeek" target="_blank">OSCHINA</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.toutiao.com/c/user/token/MS4wLjABAAAAqcPSoMqfctaEqJpGSF775eeCjWkrop4AOyLITdMx-L78F5iXzfQcSRM5sY4dq3wR" target="_blank">今日头条</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.csdn.net/u013072756?type=lately" target="_blank">CSDN</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.jianshu.com/u/5199a1104739" target="_blank">简书</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://cloud.tencent.com/developer/user/1389665/articles" target="_blank">腾讯云社区</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://cuttlefish.baidu.com/shop/75c5dbd8d15abe23482f4d40" target="_blank">百度文库</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://author.baidu.com/home?from=blog&app_id=1726736601523415" target="_blank">IT极客知识分享</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.51cto.com/weiyigeek" target="_blank">51CTO博客</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://juejin.cn/user/122767337595934" target="_blank">掘金</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://weibo.com/a/hot/7622022703618049_1.html" target="_blank">微博文章</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.xiaohongshu.com/user/profile/627c98bb000000001000e7ba" target="_blank">小红书</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://segmentfault.com/u/weiyigeek" target="_blank">Segmentfault</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.modb.pro/u/506690" target="_blank">墨天轮</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.douyin.com/user/MS4wLjABAAAAMSBdMja6XLsdmzafb0RNbFeBemIOk38K1PaOClZeI1Q" target="_blank">抖音主页</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.kuaishou.com/profile/3xfbrsrhd2i69x9" target="_blank">快手主页</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.ixigua.com/home/3984243135350727" target="_blank">西瓜视频</a>
    </span>
    
</p>

        
    </div>
    
    <div class="bottom">
      <p>
        <span>WeiyiGeek &copy; 2018 - 2023 <a href="https://weiyigeek.top" target="_blank" rel="noopener">weiyigeek.top</a> All rights reserved.唯一极客IT知识分享 版权所有 </span>
        
        <span>
          Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/weiyigeek" target="_blank">mellow</a>
        </span>
        
        <br/><a id="SiteRunTime"></a>
        <br/>访问统计
        <span><a href="/sitemap.xml" target="_blank" rel="Sitemaps-站点地图">Sitemaps</a> </span>
        <span><a href="/baidusitemap.xml" target="_blank" rel="baidusitemaps-百度站点地图">站点地图</a> </span>
        <!-- 
  -->
        <br/>ICP备案号<span><a href="https://beian.miit.gov.cn" target="_blank">渝ICP备2022003447号</a></span>
        <br/>
        <div>
        <div id="blog-wormhole-id" >
          <a href="https://www.foreverblog.cn/go.html" target="_blank"> 
            <img src="https://img.foreverblog.cn/wormhole_2_tp.gif" alt="十年之约虫洞" style="height:32px;max-height:50px;display:block;margin:0 auto;" title="穿梭虫洞-随机访问十年之约友链博客">
          </a>
        </div>
        <div id="cc-myssl-id" >
          <a href="https://myssl.com/blog.weiyigeek.top?from=mysslid" target="_blank">
            <img src="https://static.myssl.com/res/images/myssl-id1.png" alt="MySSL安全认证" style="max-height:50px;display:block;margin:0 auto">
          </a>
        </div>
      </p>
    </div>
</footer>



    <div class="mask" id="mask"></div>

<div id="go" class="waves-effect waves-light">
  <a href="javascript:;" id="goqrcode"> <span class="icon icon-lg icon-qrcode"></span> </a>
  <a href="javascript:;" id="gotop"> <span class="icon icon-lg icon-chevron-up"></span></a>
</div>





<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://blog.weiyigeek.top/2019/6-28-133.html&title=《shell脚本编程之路2》 — WeiyiGeek Blog&pic=https://blog.weiyigeek.top/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.weiyigeek.top/2019/6-28-133.html&title=《shell脚本编程之路2》 — WeiyiGeek Blog&source=[TOC]" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.weiyigeek.top/2019/6-28-133.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《shell脚本编程之路2》 — WeiyiGeek Blog&url=https://blog.weiyigeek.top/2019/6-28-133.html&via=https://blog.weiyigeek.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://blog.weiyigeek.top/2019/6-28-133.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACKklEQVR42u3a0W6DMAxGYd7/pdltp4r0/DbdhHO4mihN8zHJcmwfB77Ol+v1zvrT9/vva65/5eZLhgwZj2Wcy2u9LY652vrVOnxvMmTI2IfBlyaA9Sb4OjxYy5AhQ8b6GRKm+UZlyJAho88I0jVwQP23gCtDhowHMkjoJAdaXmjrrClDhozdGLzq/vd/f6W/IUOGjEcxzvDirUdSjOvs5NeaMmTIGM3gAa5T3OcH2tp+ZMiQMZtRK6jxxmS/AIfuyJAhYzSjE+b4RtP0sTaCJkOGjNkMPkjBw+VdDcvbOrEyZMh4OKOW0qX3+cE1fREyZMjYgdFpA9QCaNq8jP8DMmTIGM1Iv8yHtGrNgOBbMmTIGMrgQbNWwyPr8+1eriNDhowNGLXEjgTZfgIaT4vIkCFjNKO/9XQgIw3cB6//yZAhYxAjmMVoJ3b8NdXanzJkyJjKqJXyecTrrBBcMmTIGM3gS/C0j39KxixuyHZlyJAxiNHZLk8ca8GdfFeGDBmzGZ0Br/RF8IZEuo4MGTL2YXQGJtKRMn4ARq9ShgwZGzM6h89+AS44bMuQIWMo4wyvuwYseCMBBV8ZMmSMZtSanfwH0oNxZzUZMmTMZtyb2PHSf9pI+JAmypAhYwNGP3Xjw2edgbDL1WTIkCEDP1MLuGlDQoYMGTK+cQ5eb5c8gw6xMmTIGM0gh9gU0AmvXyy3yZAh44GMzqTGh1GtsNDGE8piI1OGDBnPY/wAMOdBz0YvIdkAAAAASUVORK5CYII=" alt="微信分享二维码">
</div>


    
    <!-- main-js -->
<script type="text/javascript" src="/js/jquery/2.1.0-jquery.min.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/plugins/fastclick.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/plugins/ios-orientationchange-fix.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/jquery/3.5.2-jquery.fancybox.min.js?v=1.6.6"></script>
<!--  //cdn.bootcss.com/node-waves/0.7.4/waves.min.js -->
<script type="text/javascript" src="/js/node-waves/0.7.4-waves.min.js?v=1.6.6"></script> 

<script type="text/javascript" src="/js/method.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/blog.js?v=1.6.6"></script>

<!-- third-party -->
<script type="text/javascript" src="/js/plugins/local_search.js?v=1.6.6"></script>
<script type="text/javascript">
	var search_path = "search.xml";
	if (search_path.length === 0) { search_path = "search.xml";}
	var path = "/" + search_path;
	searchFunc(path, "local-search-input", "local-search-result");
</script> 

<script> (adsbygoogle = window.adsbygoogle || []).push({});</script>    


<!-- <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> --> 


  


<script>
  var _hmt = _hmt || [];
  (function() {
    // 百度统计
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?53923c4b5560739bc0ed61e183be6acf";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();
</script>
 


<!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
            processEscapes: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.staticfile.org/mathjax/2.7.9/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
 
<script>
    (function() {
        var OriginTitile = document.title, titleTime;
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                document.title = 'WeiyiGeek Blog-唯一极客-关注于网络安全_物联网安全开发_网络安全运维-学习心得分享';
                clearTimeout(titleTime);
            } else {
                document.title = '(つェ⊂)咦!又好了!';
                titleTime = setTimeout(function() {
                    document.title = OriginTitile;
                },2000);
            }
        });
    })();
</script>
 

     <script type="text/javascript" src="/js/custom/copytips.js?v=1.6.6"></script> 
<script type="text/javascript">
// 站点运行时间
var BootDate = new Date("2018/01/01 00:00:00");
function ShowRunTime(id) {
  var NowDate = new Date();
  var RunDateM = parseInt(NowDate - BootDate);
  var RunDays = Math.floor(RunDateM/(24*3600*1000));
  var RunHours = Math.floor(RunDateM%(24*3600*1000)/(3600*1000));
  var RunMinutes = Math.floor(RunDateM%(24*3600*1000)%(3600*1000)/(60*1000));
  var RunSeconds = Math.round(RunDateM%(24*3600*1000)%(3600*1000)%(60*1000)/1000);
  var RunTime = RunDays + " 天 " + RunHours + " 时 " + RunMinutes + " 分 " + RunSeconds + " 秒";
  document.getElementById(id).innerHTML = "网站已在风雨中勉勉强强运行了【 " + RunTime + " 】";
}
setInterval("ShowRunTime('SiteRunTime')", 1000);
</script>
    
  <div id="post-wechat" class="post-wechat" style="position:fixed;top: 360px;bottom: 500px;right: 3%;width: 190px;text-align: center; z-index: 9999">
    <p><b>关注【全栈工程师修炼指南】</b></p>
    <img src="/img/wechat-gzh.jpg" class="img-responsive" alt="weiyigeek">
    <p><b>欢迎添加【作者】微信</b></p>
    <img src="/img/wehat.jpg" class="img-responsive" alt="weiyigeek">
  </div>



</body>
</html>