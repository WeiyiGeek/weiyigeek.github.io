{"title":"JSP开发简单实例演示","slug":"编程世界/JavaWeb/2.JSP/JSP开发简单实例演示","date":"2020-03-07T06:34:30.000Z","updated":"2023-01-31T02:29:10.672Z","url":"2020/3-7-305.html","path":"api/articles/2020/3-7-305.html.json","covers":["https://img.weiyigeek.top/2020/1/20200307171708.png","https://img.weiyigeek.top/2020/1/20200307171202.png","https://img.weiyigeek.top/2020/1/20200307171442.png","https://img.weiyigeek.top/2020/1/20200307173225.png"],"content":"<p>[TOC]</p>\n<a id=\"more\"></a>\n<h4 id=\"0x00-用户登录\"><a href=\"#0x00-用户登录\" class=\"headerlink\" title=\"0x00 用户登录\"></a>0x00 用户登录</h4><p>描述:采用Tomcat 7 + JSP + Dao模式数据库(10.1.37-MariaDB) + JSTL(EL) 实现一个简单的登陆验证和显示基础信息;</p>\n<p>MariaDB JDBC下载:<a href=\"https://downloads.mariadb.com/Connectors/java/\" target=\"_blank\" rel=\"noopener\">https://downloads.mariadb.com/Connectors/java/</a><br>操作流程:</p>\n<ul>\n<li><p>1.新建立动态脚本项目Package包Dao / Servlet 以及工具类Unti；</p>\n<figure class=\"image-box\">\n                <img src=\"https://img.weiyigeek.top/2020/1/20200307171708.png\" alt=\"WeiyiGeek.项目BuildPath\" title=\"\" class=\"\">\n                <p>WeiyiGeek.项目BuildPath</p>\n            </figure>\n</li>\n<li><p>2.导入Maridba的JDBC jar包到工程中,注意如果只想当前工程使用则放入当前工程的WEB-INF，您也可以放在Tomcat中的lib中全部项目均可以使用;</p>\n</li>\n<li>3.设置并且导入JDBC_JAVADOC(<code>用jar库时，鼠标移到对应类、函数的上方，就可以显示对应注释了</code>)，右键jar包<code>Build Path-&gt;Configure Build Path</code>;<figure class=\"image-box\">\n                <img src=\"https://img.weiyigeek.top/2020/1/20200307171202.png\" alt=\"WeiyiGeek.JAVA_DOC\" title=\"\" class=\"\">\n                <p>WeiyiGeek.JAVA_DOC</p>\n            </figure></li>\n<li>4.注册驱动必须写上否则找不到驱动<code>DriverManager.registerDriver(new org.mariadb.jdbc.Driver());</code>;</li>\n<li>5.连接测试数据库确定无误写用户登录代码示例代码,以及带有JSTL+EL的JSP页面如下面所示;</li>\n<li>6.补充:数据多了对象装，对象多了集合装;</li>\n</ul>\n<p>项目结构:<br><figure class=\"image-box\">\n                <img src=\"https://img.weiyigeek.top/2020/1/20200307171442.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure></p>\n<p><br></p>\n<p>SQL语句:<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> manager_user (</span><br><span class=\"line\">  <span class=\"string\">`id`</span> <span class=\"built_in\">INT</span> <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> AUTO_INCREMENT,</span><br><span class=\"line\">  <span class=\"string\">`username`</span> <span class=\"built_in\">VARCHAR</span>(<span class=\"number\">32</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> PRIMARY <span class=\"keyword\">KEY</span>,</span><br><span class=\"line\">  <span class=\"string\">`password`</span> <span class=\"built_in\">VARCHAR</span>(<span class=\"number\">32</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">  <span class=\"string\">`age`</span> <span class=\"built_in\">SMALLINT</span> <span class=\"keyword\">DEFAULT</span> <span class=\"number\">0</span>,</span><br><span class=\"line\">  <span class=\"string\">`address`</span> <span class=\"built_in\">VARCHAR</span>(<span class=\"number\">255</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"string\">\"NULL\"</span></span><br><span class=\"line\">);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> <span class=\"string\">`student`</span>.<span class=\"string\">`manger_user`</span> (<span class=\"string\">`username`</span>, <span class=\"string\">`password`</span>, <span class=\"string\">`age`</span>, <span class=\"string\">`address`</span>) <span class=\"keyword\">VALUES</span> (<span class=\"string\">'admin'</span>, <span class=\"keyword\">MD5</span>(<span class=\"number\">123456</span>), <span class=\"string\">'19'</span>,<span class=\"string\">\"中国北京朝阳区\"</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> <span class=\"string\">`student`</span>.<span class=\"string\">`manger_user`</span> (<span class=\"string\">`username`</span>, <span class=\"string\">`password`</span>, <span class=\"string\">`age`</span>, <span class=\"string\">`address`</span>) <span class=\"keyword\">VALUES</span> (<span class=\"string\">'guest'</span>, <span class=\"keyword\">MD5</span>(<span class=\"number\">123456</span>), <span class=\"string\">'19'</span>,<span class=\"string\">\"中国北京朝阳区\"</span>);</span><br></pre></td></tr></table></figure><br><br></p>\n<p>数据库连接字符串以及properties文件:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#/User/src/jdbc.properties</span></span><br><span class=\"line\"><span class=\"comment\">#注意Mariadb驱动注册名称不同于MySQL</span></span><br><span class=\"line\">mysql.driverClass=org.mariadb.jdbc.Driver</span><br><span class=\"line\">mysql.url=jdbc:mariadb://127.0.0.1:3306/student</span><br><span class=\"line\">mysql.user=root</span><br><span class=\"line\">mysql.pass=</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<p>(1) /User/src/top/weiyigeek/Util/db.java<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> top.weiyigeek.Util;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.InputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.Connection;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.DriverManager;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.ResultSet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.SQLException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.Statement;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Properties;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/***</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Desc</span>: 数据库连接工具类</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> WeiyiGeek</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@CreatTime</span> 下午1:28:57</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">db</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t * 预读取Properties设置JDBC连接（注意这里采用Mariadb做为测试）</span></span><br><span class=\"line\"><span class=\"comment\">\t */</span></span><br><span class=\"line\">  <span class=\"keyword\">static</span> String driverClass = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">static</span> String url = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">static</span> String user = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">static</span> String pass = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">static</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      Properties prop = <span class=\"keyword\">new</span> Properties();</span><br><span class=\"line\">      InputStream is = db.class.getClassLoader().getResourceAsStream(<span class=\"string\">\"jdbc.properties\"</span>);</span><br><span class=\"line\">      prop.load(is);</span><br><span class=\"line\">      driverClass=prop.getProperty(<span class=\"string\">\"mysql.driverClass\"</span>);</span><br><span class=\"line\">      url=prop.getProperty(<span class=\"string\">\"mysql.url\"</span>);</span><br><span class=\"line\">      user=prop.getProperty(<span class=\"string\">\"mysql.user\"</span>);</span><br><span class=\"line\">      pass=prop.getProperty(<span class=\"string\">\"mysql.pass\"</span>);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">      e.printStackTrace();</span><br><span class=\"line\">    &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">      System.out.println(<span class=\"string\">\"Msg#Properties 文件预读取成功!\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t * Fun:驱动注册和建立链接</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@return</span> Connection</span></span><br><span class=\"line\"><span class=\"comment\">\t */</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Connection <span class=\"title\">getConn</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> SQLException </span>&#123;</span><br><span class=\"line\">    Connection conn = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    System.out.print(<span class=\"string\">\"Msg#驱动注册和建立链接:\"</span>+url);</span><br><span class=\"line\">    <span class=\"comment\">//坑啊:驱动注册必须写上</span></span><br><span class=\"line\">    DriverManager.registerDriver(<span class=\"keyword\">new</span> org.mariadb.jdbc.Driver());</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">//防止驱动二次注册自动注册驱动与建立连接\t\t</span></span><br><span class=\"line\">      conn = DriverManager.getConnection(url, user, pass);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (SQLException e) &#123;</span><br><span class=\"line\">      e.printStackTrace();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> conn;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t * Fun:关闭数据库连接并释放资源 （注意点:关闭的顺序）</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@param</span> conn</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@param</span> st</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@param</span> rs</span></span><br><span class=\"line\"><span class=\"comment\">\t */</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">release</span><span class=\"params\">(Connection conn,Statement st, ResultSet rs)</span> </span>&#123;</span><br><span class=\"line\">    closeRs(rs);</span><br><span class=\"line\">    closeSt(st);</span><br><span class=\"line\">    closeConn(conn);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"关闭数据库连接并释放资源\"</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"comment\">//私有静态方法-释放查询结果集</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">closeRs</span><span class=\"params\">(ResultSet rs)</span> </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(rs != <span class=\"keyword\">null</span>)</span><br><span class=\"line\">          rs.close();</span><br><span class=\"line\">      &#125; <span class=\"keyword\">catch</span> (SQLException e) &#123;</span><br><span class=\"line\">        e.printStackTrace();</span><br><span class=\"line\">      &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">        rs = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">  <span class=\"comment\">//私有静态方法-释放statement对象</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">closeSt</span><span class=\"params\">(Statement st)</span> </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(st != <span class=\"keyword\">null</span>)</span><br><span class=\"line\">          st.close();</span><br><span class=\"line\">      &#125; <span class=\"keyword\">catch</span> (SQLException e) &#123;</span><br><span class=\"line\">        e.printStackTrace();</span><br><span class=\"line\">      &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">        st = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">  <span class=\"comment\">//私有静态方法-关闭数据库连接</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">closeConn</span><span class=\"params\">(Connection conn)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span>(conn != <span class=\"keyword\">null</span>)</span><br><span class=\"line\">        conn.close();</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (SQLException e) &#123;</span><br><span class=\"line\">      e.printStackTrace();</span><br><span class=\"line\">    &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">      conn = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<p>(2) /User/src/top/weiyigeek/entity/UserInfo.java 信息查询结构类<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> top.weiyigeek.entity;</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UserInfo</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> id;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> age;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> String username;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> String password;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> String address;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getId</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> id;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setId</span><span class=\"params\">(<span class=\"keyword\">int</span> id)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.id = id;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getAge</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> age;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setAge</span><span class=\"params\">(<span class=\"keyword\">int</span> age)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.age = age;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getUsername</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> username;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setUsername</span><span class=\"params\">(String username)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.username = username;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getPassword</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> password;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setPassword</span><span class=\"params\">(String password)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.password = password;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getAddress</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> address;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setAddress</span><span class=\"params\">(String address)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.address = address;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<p>(3) /User/src/top/weiyigeek/Dao/UserDao.java<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> top.weiyigeek.Dao;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.SQLException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> top.weiyigeek.entity.UserInfo;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 描述:Dao 定义对用户相关请求的数据查询验证</span></span><br><span class=\"line\"><span class=\"comment\"> * 注意:需要集成JDBC</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> WeiyiGeek</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">UserDao</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t * Desc:用户登录验证</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@return</span> true or False</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@throws</span> SQLException </span></span><br><span class=\"line\"><span class=\"comment\">\t */</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">loginVerity</span><span class=\"params\">(String name, String pass)</span> <span class=\"keyword\">throws</span> Exception</span>;</span><br><span class=\"line\">  <span class=\"function\">List&lt;UserInfo&gt; <span class=\"title\">infoQuery</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>(4) /User/src/top/weiyigeek/Dao/impl/User.java 接口实现<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> top.weiyigeek.Dao.impl;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.Connection;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.PreparedStatement;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.ResultSet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.SQLException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.ArrayList;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> top.weiyigeek.Dao.UserDao;</span><br><span class=\"line\"><span class=\"keyword\">import</span> top.weiyigeek.Util.db;</span><br><span class=\"line\"><span class=\"keyword\">import</span> top.weiyigeek.entity.UserInfo;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Desc</span>:用户登录验证实现</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> WeiyiGeek</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@CreatTime</span> 下午12:46:54</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User</span> <span class=\"keyword\">implements</span> <span class=\"title\">UserDao</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">loginVerity</span><span class=\"params\">(String name, String pass)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">    Connection conn = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    PreparedStatement ps = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    ResultSet rs = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">//数据库连接对象</span></span><br><span class=\"line\">      conn = db.getConn();</span><br><span class=\"line\">      String sql = <span class=\"string\">\"SELECT * FROM manager_user WHERE username = ? and password = MD5(?)\"</span>;</span><br><span class=\"line\">      </span><br><span class=\"line\">      <span class=\"comment\">//创建预处理对象</span></span><br><span class=\"line\">      ps = conn.prepareStatement(sql);</span><br><span class=\"line\">      System.out.println(<span class=\"string\">\"\\n账号:\"</span> + name  + <span class=\"string\">\",密码:\"</span> + pass);</span><br><span class=\"line\">      ps.setString(<span class=\"number\">1</span>, name);</span><br><span class=\"line\">      ps.setString(<span class=\"number\">2</span>, pass);</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">//执行查询返回结果集</span></span><br><span class=\"line\">      rs = ps.executeQuery();</span><br><span class=\"line\">      </span><br><span class=\"line\">      <span class=\"comment\">//判断是否移动下一条判断用户登录信息是否正确</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> rs.next();</span><br><span class=\"line\">    &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">//执行结束释放</span></span><br><span class=\"line\">      db.release(conn, ps, rs);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> List&lt;UserInfo&gt; <span class=\"title\">infoQuery</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    ArrayList&lt;UserInfo&gt; info = <span class=\"keyword\">new</span> ArrayList&lt;UserInfo&gt;();</span><br><span class=\"line\">    Connection conn = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    PreparedStatement ps = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    ResultSet rs = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">//数据库连接对象</span></span><br><span class=\"line\">      conn = db.getConn();</span><br><span class=\"line\">      String sql = <span class=\"string\">\"SELECT * FROM manager_user\"</span>;</span><br><span class=\"line\">      </span><br><span class=\"line\">      <span class=\"comment\">//创建预处理对象</span></span><br><span class=\"line\">      ps = conn.prepareStatement(sql);</span><br><span class=\"line\">    </span><br><span class=\"line\">      <span class=\"comment\">//执行查询返回结果集</span></span><br><span class=\"line\">      rs = ps.executeQuery();</span><br><span class=\"line\">      </span><br><span class=\"line\">      <span class=\"comment\">//迭代数据</span></span><br><span class=\"line\">      <span class=\"keyword\">while</span>(rs.next()) &#123;</span><br><span class=\"line\">        UserInfo ui = <span class=\"keyword\">new</span> UserInfo();</span><br><span class=\"line\">        ui.setId(rs.getInt(<span class=\"string\">\"id\"</span>));</span><br><span class=\"line\">        ui.setUsername(rs.getString(<span class=\"string\">\"username\"</span>));</span><br><span class=\"line\">        ui.setPassword(rs.getString(<span class=\"string\">\"password\"</span>));</span><br><span class=\"line\">        ui.setAge(rs.getInt(<span class=\"string\">\"age\"</span>));</span><br><span class=\"line\">        ui.setAddress(rs.getString(<span class=\"string\">\"address\"</span>));</span><br><span class=\"line\">        </span><br><span class=\"line\">        info.add(ui);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      </span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (SQLException e) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// TODO Auto-generated catch block</span></span><br><span class=\"line\">      e.printStackTrace();</span><br><span class=\"line\">    &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">//执行结束释放</span></span><br><span class=\"line\">      db.release(conn, ps, rs);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// TODO Auto-generated method stub</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> info;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<p>(5) /User/WebContent/listinfo.jsp<br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%@ page language=<span class=\"string\">\"java\"</span> contentType=<span class=\"string\">\"text/html; charset=UTF-8\"</span></span><br><span class=\"line\">    pageEncoding=<span class=\"string\">\"UTF-8\"</span>%&gt;</span><br><span class=\"line\">&lt;%@ taglib prefix=<span class=\"string\">\"c\"</span> uri=<span class=\"string\">\"http://java.sun.com/jsp/jstl/core\"</span> %&gt;</span><br><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;&lt;meta charset=\"UTF-8\"&gt;&lt;title&gt;用户信息&lt;/title&gt;&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">&lt;% </span><br><span class=\"line\">  <span class=\"comment\">//利用Session判断用户是否成功登陆登录则显示，否则不显示</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span>(!<span class=\"string\">\"ok\"</span>.equals(session.getAttribute(<span class=\"string\">\"login\"</span>)))&#123;</span><br><span class=\"line\">%&gt;</span><br><span class=\"line\">  &lt;script type=\"text/javascript\"&gt;alert('您还未登录，请重新登录!');window.location=\"./Login.jsp\";&lt;/script&gt;</span><br><span class=\"line\">&lt;% </span><br><span class=\"line\">  response.sendRedirect(<span class=\"string\">\"Login.jsp\"</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">%&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;B&gt;管理员信息列表:&lt;/B&gt;</span><br><span class=\"line\">&lt;table border=<span class=\"string\">\"1\"</span> width=<span class=\"string\">\"700\"</span>&gt;</span><br><span class=\"line\">  &lt;tr&gt;</span><br><span class=\"line\">  &lt;th&gt;序号&lt;/th&gt;&lt;th&gt;姓名&lt;/th&gt;&lt;th&gt;密码&lt;/th&gt;&lt;th&gt;年龄&lt;/th&gt;&lt;th&gt;地址&lt;/th&gt;</span><br><span class=\"line\">  &lt;/tr&gt;</span><br><span class=\"line\">  &lt;c:forEach items=<span class=\"string\">\"$&#123;list&#125;\"</span> <span class=\"keyword\">var</span>=<span class=\"string\">\"user\"</span>&gt;</span><br><span class=\"line\">  &lt;tr&gt;</span><br><span class=\"line\">    &lt;td&gt;$&#123;user.id&#125;&lt;/td&gt;</span><br><span class=\"line\">    &lt;td&gt;$&#123;user.username&#125;&lt;/td&gt;</span><br><span class=\"line\">    &lt;td&gt;$&#123;user.password&#125;&lt;/td&gt;</span><br><span class=\"line\">    &lt;td&gt;$&#123;user.age&#125;&lt;/td&gt;</span><br><span class=\"line\">    &lt;td&gt;$&#123;user.address&#125;&lt;/td&gt;</span><br><span class=\"line\">  &lt;/tr&gt;</span><br><span class=\"line\">  &lt;/c:forEach&gt;</span><br><span class=\"line\">&lt;/table&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>\n<p>最终效果:<br><figure class=\"image-box\">\n                <img src=\"https://img.weiyigeek.top/2020/1/20200307173225.png\" alt=\"WeiyiGeek.实例效果\" title=\"\" class=\"\">\n                <p>WeiyiGeek.实例效果</p>\n            </figure></p>\n","comments":true,"excerpt":"[TOC]","categories":[{"name":"Java","path":"api/categories/Java.json"}],"tags":[{"name":"jsp","path":"api/tags/jsp.json"}]}