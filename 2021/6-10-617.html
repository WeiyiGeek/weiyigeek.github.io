<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="content-language" content="zh-CN"/>
    <meta name="author" content="WeiyiGeek" />
    <meta name="msvalidate.01" content="5C552FB1D885E0E11D2957EC958C8018" />
    <meta name="shenma-site-verification" content="4c655e91c76be0a93c1b6954c666c9d6_1649049085"/>
    <meta name="bytedance-verification-code" content="lKs4FqwCHSJ3A/c5tT7X" />
    <meta name="sogou_site_verification" content="OC65iET6Bk" />
    
    <title>ğŸŒ HelmåŒ…ç®¡ç†å·¥å…·å…¥é—¨å­¦ä¹ åŠä½¿ç”¨|WeiyiGeek Blog|å”¯ä¸€æå®¢Geek-ITç½‘ç»œå®‰å…¨è¿ç»´å¼€å‘æŠ€æœ¯çŸ¥è¯†åˆ†äº«-åšå®¢ç«™ç‚¹</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    
    <meta name="keywords" content="Helm">
    <meta name="Description" content="WeiyiGeek-å”¯ä¸€æå®¢åšå®¢ç«™ç‚¹,å…³æ³¨äºç½‘ç»œå®‰å…¨è¿ç»´,Webå®‰å…¨å¼€å‘,IOTç‰©è”ç½‘å®‰å…¨å¼€å‘,åº”ç”¨å¼€å‘,åˆ†äº«æŠ€æœ¯å­¦ä¹ çŸ¥è¯†ä¸å…¥å‘è§£å†³,æå‡ç½‘ç»œå®‰å…¨æŠ€æœ¯ä¸è‡ªèº«æŠ€æœ¯èƒ½åŠ›,ç«‹å¿—ç»´æŠ¤å¤§ä¼—ç½‘ç»œå®‰å…¨ä¸ºå·±ä»»,åšä¸€ä¸ªå¯¹å›½å®¶æœ‰ç”¨çš„äºº,ä¸ºå®ç°ä¸­åæ°‘æ—ä¼Ÿå¤§å¤å…´çš„ä¸­å›½æ¢¦ä¸æ‡ˆå¥‹æ–—">
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="/css/jquery/3.5.2-jquery.fancybox.min.css?v=1.6.6" />
    <link rel="stylesheet" href="/css/style.css?v=1.6.6">
    <!--  -->
     <script type="text/javascript" src="/js/custom/articlecost.js?v=1.6.6"></script> 
    <link rel="stylesheet" href="/css/third-party/gitalk.css?v=1.6.6"> 
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9134434519967436" crossorigin="anonymous"></script>    
    <script type="text/javascript">
        // Data Center
        var DC = {
          reward:	true,
          lv: JSON.parse('{"enable":false,"app_id":null,"app_key":null,"icon":true}'),
          v: JSON.parse('{"enable":false,"appid":null,"appkey":null,"notify":true,"verify":true,"placeholder":"give me some sugers plz...","avatar":"wavatar"}')
        };
    </script>
    <script type="text/javascript">window.lazyScripts=[];</script>
<meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="WeiyiGeek Blog" type="application/atom+xml">
</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="">
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap">
      
      <img src="/img/brand.jpg" class="brand-bg" alt="WeiyiGeek-backgroud">
      
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg" alt="WeiyiGeek-å¤´åƒ">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">WeiyiGeek</h5>
          <a href="mailto:master@weiyigeek.top" title="master@weiyigeek.top" class="mail">
            <span>m</span><span>a</span><span>s</span><span>t</span><span>e</span><span>r</span><span>@</span><span>w</span><span>e</span><span>i</span><span>y</span><span>i</span><span>g</span><span>e</span><span>e</span><span>k</span><span>.</span><span>t</span><span>o</span><span>p</span>
          </a>
        </hgroup>
        
        <ul class="menu-link">
          
              <li>
                <a href="https://weiyigeek.top/img/wechat-search.png" target="_blank">
                  <i class="icon icon-lg icon-wechat"></i>
                </a>
              </li>
            
              <li>
                <a href="https://github.com/weiyigeek" target="_blank">
                  <i class="icon icon-lg icon-github"></i>
                </a>
              </li>
            
              <li>
                <a href="https://t.me/WeiyiGeek" target="_blank">
                  <i class="icon icon-lg icon-telegram"></i>
                </a>
              </li>
            
              <li>
                <a href="https://twitter.com/WeiyiGeek" target="_blank">
                  <i class="icon icon-lg icon-twitter"></i>
                </a>
              </li>
            
              <li>
                <a href="https://weibo.com/615643678" target="_blank">
                  <i class="icon icon-lg icon-weibo"></i>
                </a>
              </li>
            
        </ul>
        
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                é¦–é¡µ
              </a>
            </li>
        
            <li class="">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                æ–‡ç« åˆ†ç±»
              </a>
            </li>
        
            <li class="">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                æ–‡ç« æ ‡ç­¾
              </a>
            </li>
        
            <li class="">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                æ–‡ç« å½’æ¡£
              </a>
            </li>
        
            <li class="">
              <a href="/books"  >
                <i class="icon icon-lg icon-book"></i>
                å­¦ä¹ ä¹¦ç±
              </a>
            </li>
        
            <li class="">
              <a href="/about"  >
                <i class="icon icon-lg icon-user"></i>
                å…³äºä½œè€…
              </a>
            </li>
        
            <li class="">
              <a href="/links"  >
                <i class="icon icon-lg icon-link"></i>
                ç«™ç‚¹å¯¼èˆª
              </a>
            </li>
        
            <li class="">
              <a href="/img/share-wechat.jpg" target="_blank" >
                <i class="icon icon-lg icon-wechat"></i>
                å…¬ä¼—è´¦å·
              </a>
            </li>
        
            <li class="">
              <a href="https://space.bilibili.com/385802642" target="_blank" >
                <i class="icon icon-lg icon-youtube-play"></i>
                å“”å“©å“”å“©
              </a>
            </li>
        
            <li class="">
              <a href="https://github.com/weiyigeek" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="">
              <a href="https://twitter.com/WeiyiGeek" target="_blank" >
                <i class="icon icon-lg icon-twitter"></i>
                Twitter
              </a>
            </li>
        
            <li class="">
              <a href="https://weibo.com/615643678" target="_blank" >
                <i class="icon icon-lg icon-weibo"></i>
                Weibo
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row clearfix">
        <a href="javascript:;" class="header-icon pull-left waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">
            <span>HelmåŒ…ç®¡ç†å·¥å…·å…¥é—¨å­¦ä¹ åŠä½¿ç”¨</span>
            
        </div>

        
        <a href="javascript:;" id="site_search_btn" class="header-icon pull-right waves-effect waves-circle waves-light">
            <i class="icon icon-lg icon-search"></i>
        </a>
        

        
            <a href="/atom.xml" class="header-icon pull-right waves-effect waves-circle waves-light">
                <i class="icon icon-lg icon-rss"></i>
            </a>
        
    </div>
</header>
<header class="content-header post-header">
    <img src="/img/banner.jpg" class="header-bg" alt="æ–‡ç« å¤´éƒ¨èƒŒæ™¯">
    <div class="container fade-scale">
        <h1 class="title">HelmåŒ…ç®¡ç†å·¥å…·å…¥é—¨å­¦ä¹ åŠä½¿ç”¨</h1>
        <h5 class="subtitle">
            
                <time datetime="2021-06-10T10:37:47.000Z" itemprop="datePublished" class="page-time">
  2021-06-10
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/kubernetes/">kubernetes</a></li></ul>


            
        </h5>
        
    </div>
    

</header>

<div id="site_search">
    <div class="search-title clearfix">
        <span class="pull-left">
          <i class="icon icon-lg icon-search"></i>
        </span>
        <input type="text" id="local-search-input" name="q" results="0" placeholder="search my blog..." class="form-control pull-left"/>
        <a href="javascript:;" class="close pull-right waves-effect waves-circle waves-light">
          <i class="icon icon-lg icon-close"></i>
        </a>
    </div>
    <div id="local-search-result"></div>
</div>


<div class="container body-wrap">
  <article id="post-è™šæ‹Ÿäº‘å®¹/äº‘å®¹å™¨/Kubernetes/éƒ¨ç½²ç»„ä»¶/HelmåŒ…ç®¡ç†å·¥å…·å…¥é—¨å­¦ä¹ åŠä½¿ç”¨"
  class="post-article article-type-post" itemprop="blogPost">
    <div class="post-card">
        <h1 class="post-card-title">HelmåŒ…ç®¡ç†å·¥å…·å…¥é—¨å­¦ä¹ åŠä½¿ç”¨</h1>
        <div class="post-meta">
            <time class="post-time" title="2021-06-10 18:37:47" datetime="2021-06-10T10:37:47.000Z"  itemprop="datePublished">2021-06-10</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/kubernetes/">kubernetes</a></li></ul>



            

            


            
        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            
            <p>[TOC]</p>
<a id="more"></a>
<h2 id="0x00-å‰è¨€ç®€è¿°"><a href="#0x00-å‰è¨€ç®€è¿°" class="headerlink" title="0x00 å‰è¨€ç®€è¿°"></a>0x00 å‰è¨€ç®€è¿°</h2><h3 id="1-èƒŒæ™¯ä»‹ç»"><a href="#1-èƒŒæ™¯ä»‹ç»" class="headerlink" title="1.èƒŒæ™¯ä»‹ç»"></a>1.èƒŒæ™¯ä»‹ç»</h3><p>æè¿°: éšç€ä¸šåŠ¡å®¹å™¨åŒ–ä¸å‘å¾®æœåŠ¡çš„æ¶æ„è½¬å˜ï¼Œé€šè¿‡åˆ†è§£å·¨å¤§çš„å•ä½“åº”ç”¨ä¸ºå¤šä¸ªæœåŠ¡çš„æ–¹å¼é™ä½äº†å•ä½“åº”ç”¨çš„å¤æ‚æ€§ï¼Œä½¿å¾—æ¯ä¸ªå¾®æœåŠ¡éƒ½å¯ä»¥ç‹¬ç«‹éƒ¨ç½²å’Œæ‰©å±•,å¯ä»¥æ›´åŠ æœ‰æ•ˆçš„å®ç°å¿«é€Ÿè¿­ä»£ä¸éƒ¨ç½²å¹¶ä¸”å‡å°‘äº†åº”ç”¨ç¨‹åºå¼€å‘åˆ°ä¸Šçº¿å‘¨æœŸ;</p>
<p>ä½†æ˜¯äºæ­¤åŒæ—¶åˆæœ‰æ–°çš„é—®é¢˜æµ®ç°å‡ºæ¥ï¼Œç”±äºå•ä½“åº”ç”¨è¢«æ‹†åˆ†ç§°ä¸ºå¤šä¸ªç»„ä»¶å¯¼è‡´æœåŠ¡éƒ¨ç½²çš„æ•°é‡å¢åŠ ï¼Œè€Œç›´æ¥é‡‡ç”¨K8sä¸ºæ¯ä¸€ä¸ªç‹¬ç«‹åº”ç”¨è¿›è¡Œç‹¬ç«‹éƒ¨ç½²ã€æ‰©å®¹å¸¦æ¥éå¸¸å¤§çš„æŒ‘æˆ˜;</p>
<p>ä¾‹å¦‚é‡‡ç”¨Kubernetesåšåº”ç”¨ç¼–æ’å¸¦æ¥äº†ä»¥ä¸‹æŒ‘æˆ˜:</p>
<ul>
<li>1) å¦‚ä½•ç®¡ç†ã€é…ç½®ã€ä¸æ›´æ–°å¤§é‡çš„K8sé…ç½®æ–‡ä»¶</li>
<li>2) å¦‚ä½•éƒ¨ç½²ä¸€ä¸ªå«æœ‰å¤§é‡çš„é…ç½®æ–‡ä»¶çš„å¤æ‚çš„K8såº”ç”¨</li>
<li>3) å¦‚ä½•ä¾¿äºåˆ†äº«ä¸å¤ç”¨K8sé…ç½®å’Œåº”ç”¨</li>
<li>4) å¦‚ä½•å‚æ•°åŒ–é…ç½®æ¨¡æ¿å¹¶æ”¯æŒå¤šä¸ªç¯å¢ƒ</li>
<li>5) å¦‚ä½•ç®¡ç†åº”ç”¨å‘å¸ƒã€å›æ»šä»¥åŠæŸ¥çœ‹å†å²å‘å¸ƒä¿¡æ¯</li>
<li>6) å¦‚ä½•æ§åˆ¶ä¸€ä¸ªéƒ¨ç½²å‘¨æœŸä¸­çš„æŸä¸€ä¸ªç¯èŠ‚</li>
<li>7) å¦‚ä½•åœ¨åº”ç”¨å‘å¸ƒåéªŒè¯</li>
</ul>
<p>è€Œæ°å¥½è¿™äº›æŒ‘æˆ˜Helmå¯ä»¥æœ‰æ•ˆçš„å¸®åŠ©æˆ‘ä»¬è§£å†³ä¸Šè¿°é—®é¢˜;</p>
<hr>
<h3 id="2-åŸºç¡€ä»‹ç»"><a href="#2-åŸºç¡€ä»‹ç»" class="headerlink" title="2.åŸºç¡€ä»‹ç»"></a>2.åŸºç¡€ä»‹ç»</h3><p>Q: ä»€ä¹ˆæ˜¯Helm?</p>
<blockquote>
<p>ç­”: Helm<code>è‹± /helm/</code>å®é™…æ˜¯ä¸€ä¸ª Kubernetes åŒ…ç®¡ç†å™¨æ˜¯æŸ¥æ‰¾ã€åˆ†äº«å’Œä½¿ç”¨è½¯ä»¶æ„å»º Kubernetes çš„æœ€ä¼˜æ–¹å¼, å³ä½¿æ˜¯æœ€å¤æ‚çš„ Kubernetes åº”ç”¨ç¨‹åºï¼Œéƒ½å¯ä»¥å¸®åŠ©æ‚¨å®šä¹‰ï¼Œå®‰è£…å’Œå‡çº§ã€‚<br>å¯å°†å®ƒç±»ä¼¼äºCentOSä¸‹çš„Yumè½¯ä»¶ç®¡ç†ä»“åº“(<code>å³K8sä¸­çš„aptä¸yum</code>)æ˜¯éƒ¨ç½²ç¯å¢ƒçš„æµç¨‹å°è£…, å¹¶ä¸” Helm åº”ç”¨ä¸­å¿ƒå…¬å…±åº“ä¸­æ‹¥æœ‰å¤§é‡çš„å›¾è¡¨ Chart (ç±»ä¼¼äº<code>Docker Hub</code>ä»“åº“) <code>æ˜“äºåˆ›å»ºã€å‘ç‰ˆã€åˆ†äº«å’Œå‘å¸ƒ</code>ï¼Œæ‰€ä»¥åœæ­¢å¤åˆ¶ç²˜è´´ï¼Œå¼€å§‹ä½¿ç”¨ Helm å§ã€‚<br>Helm æ˜¯ <a href="https://cncf.io/" target="_blank" rel="noopener">CNCF</a> çš„æ¯•ä¸šé¡¹ç›®ï¼Œç”± <a href="https://github.com/helm/community" target="_blank" rel="noopener">Helm</a> ç¤¾åŒºç»´æŠ¤ã€‚</p>
</blockquote>
<p>å®˜ç½‘åœ°å€: <a href="https://helm.sh/" target="_blank" rel="noopener">https://helm.sh/</a><br>é¡¹ç›®åœ°å€: <a href="https://github.com/helm/helm" target="_blank" rel="noopener">https://github.com/helm/helm</a><br>åº”ç”¨ä¸­å¿ƒ: <a href="https://hub.helm.sh/" target="_blank" rel="noopener">https://hub.helm.sh/</a><br>ä»“åº“ä¸­å¿ƒ: <a href="https://artifacthub.io/packages" target="_blank" rel="noopener">https://artifacthub.io/packages</a></p>
<p><br/></p>
<p>Q: Helm ä½œç”¨ç®€è¿°?</p>
<blockquote>
<p>ç­”: Helm æ˜¯ KuernetesæœåŠ¡ç¼–æ’é¢†åŸŸçš„ä¸€ä¸ªå­é¡¹ç›®, å®ƒé€šè¿‡è½¯ä»¶æ‰“åŒ…çš„å½¢å¼æ”¯æŒå‘å¸ƒçš„ç‰ˆæœ¬ç®¡ç†å’Œæ§åˆ¶, å¾ˆå¤§ç¨‹åº¦ä¸Šç®€åŒ–äº†Kunernetesåº”ç”¨éƒ¨ç½²å’Œç®¡ç†çš„å¤æ‚æ€§;<br>Helmå°†K8sç›¸å…³çš„æ§åˆ¶å™¨èµ„æº(ä¾‹å¦‚Deploymentã€Servicesã€Statufulsetã€ingressç­‰)æ‰“åŒ…åˆ°ä¸€ä¸ªå›¾è¡¨chartä¸­ï¼Œè€Œå›¾è¡¨chartåˆå¯ä»¥ä¿å­˜åœ¨chartä»“åº“ä¹‹ä¸­, ä¾¿äºå­˜å‚¨ä¸åˆ†äº«Chart;<br>Helmç®€åŒ–äº†K8séƒ¨ç½²åº”ç”¨çš„ç‰ˆæœ¬æ§åˆ¶ã€æ‰“åŒ…ã€å‘å¸ƒã€åˆ é™¤ã€æ›´æ–°ã€å›æ»šç­‰æ“ä½œ;<br>ç®€å•çš„è¯´: ç®€åŒ–äº† Kubernetes åº”ç”¨çš„éƒ¨ç½²å’Œç®¡ç†;</p>
</blockquote>
<p><br/></p>
<p>Q : Helm ç‰¹ç‚¹æœ‰å“ªäº›?</p>
<ul>
<li>å¤æ‚æ€§ç®¡ç† : å³ä½¿æ˜¯æœ€å¤æ‚çš„åº”ç”¨ï¼Œå›¾è¡¨ Charts ä¾ç„¶å¯ä»¥æè¿°ï¼Œ æä¾›ä½¿ç”¨å•ç‚¹æˆæƒçš„å¯é‡å¤å®‰è£…åº”ç”¨ç¨‹åºã€‚</li>
<li>æ˜“äºå‡çº§ ï¼šéšæ—¶éšåœ°å‡çº§å’Œè‡ªå®šä¹‰çš„é’©å­æ¶ˆé™¤æ‚¨å‡çº§çš„ç—›è‹¦ã€‚</li>
<li>åˆ†å‘ç®€å• ï¼šå›¾è¡¨ Charts å¾ˆå®¹æ˜“åœ¨å…¬å…±æˆ–ç§æœ‰åŒ–æœåŠ¡å™¨ä¸Šå‘ç‰ˆï¼Œåˆ†å‘å’Œéƒ¨ç½²ç«™ç‚¹ã€‚</li>
<li>å›æ»š ï¼š ä½¿ç”¨ helm rollback å¯ä»¥è½»æ¾å›æ»šåˆ°ä¹‹å‰çš„å‘å¸ƒç‰ˆæœ¬ã€‚</li>
</ul>
<p>PS : Helmä¸kuberneteså’ŒDockerä¹‹é—´çš„å…³ç³»?</p>
<blockquote>
<p>ç­” : Helm æ˜¯å¯¹äºkubernetesæœåŠ¡çš„ç¼–æ’ï¼Œè€ŒKubernetesæ˜¯å¯¹äºDockerå®¹å™¨çš„ç¼–æ’;</p>
</blockquote>
<p><br/></p>
<p>Q: ä»€ä¹ˆæ˜¯Helmå›¾è¡¨?</p>
<blockquote>
<p>ç­”: Helm å›¾è¡¨æ˜¯åˆä¸€ä¸ªä¸ªyamlæ ¼å¼çš„æ–‡ä»¶æ„æˆï¼Œå¹¶ä¸”æœ‰ä¸€å®šé¡¹ç›®ç»“æ„è¦æ±‚ç¼–å†™æˆåŠŸåå¯ä»¥ä¸Šä¼ åˆ°Chartä»“åº“ä¸­å³ <code>Helm åº”ç”¨ä¸­å¿ƒå…¬å…±åº“</code>;</p>
</blockquote>
<p><br></p>
<p><strong>ä¸‰ä¸ªé‡è¦æ¦‚å¿µ</strong></p>
<ul>
<li>1) Chart ï¼š åˆ›å»ºKubernetesåº”ç”¨ç¨‹åºå®ä¾‹æ‰€éœ€çš„ä¸€ç»„ä¿¡æ¯, åŒ…æ‹¬å„ç§Kuberneteså¯¹è±¡çš„é…ç½®æ¨¡æ¿ã€å‚æ•°å®šä¹‰ã€ä¾èµ–å…³ç³»ã€æ–‡æ¡£è¯´æ˜ç­‰, ç±»ä¼¼äºapt/yumä¸­çš„è½¯ä»¶å®‰è£…åŒ…ã€‚</li>
<li>2) Config : åŒ…å«å¯åˆå¹¶åˆ°æ‰“åŒ…å›¾è¡¨ä¸­ä»¥åˆ›å»ºå¯å‘å¸ƒå¯¹è±¡çš„é…ç½®ä¿¡æ¯ã€‚</li>
<li>3) Release : æ˜¯å›¾è¡¨Chartçš„è¿è¡Œå®ä¾‹ä¸ç‰¹å®šçš„é…ç½®ç»„åˆåœ¨ä¸€èµ·<code>å³chartè¢«Helmè¿è¡Œåå°†ä¼šç”Ÿæˆå¯¹åº”çš„ä¸€ä¸ªrelease</code>ã€‚</li>
</ul>
<p>PS : å½“ chart è¢«å®‰è£…åˆ° Kubernetesé›†ç¾¤ä¸­å°±ç”Ÿæˆä¸€ä¸ª release, å½“å¤šæ¬¡å°†chartå®‰è£…åˆ°åŒä¸€ä¸ªé›†ç¾¤æ—¶å€™æ¯ä¸€ä¸ªå®‰è£…éƒ½æ˜¯ä¸€ä¸ªRelease;</p>
<hr>
<h3 id="3-æ¶æ„ç»„ä»¶"><a href="#3-æ¶æ„ç»„ä»¶" class="headerlink" title="3.æ¶æ„ç»„ä»¶"></a>3.æ¶æ„ç»„ä»¶</h3><p><strong>ç‰ˆæœ¬è¯´æ˜</strong><br>æè¿°: Helmçš„ç‰ˆæœ¬ç”¨ x.y.z æè¿°ï¼Œ<code>xæ˜¯ä¸»ç‰ˆæœ¬ï¼Œyæ˜¯æ¬¡ç‰ˆæœ¬ï¼Œzæ˜¯è¡¥ä¸ç‰ˆæœ¬</code>ï¼Œéµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬æœ¯è¯­ã€‚</p>
<p>å¯æ”¯æŒçš„ç‰ˆæœ¬åå·®:</p>
<ul>
<li>ä» Helm 3 å¼€å§‹ Helm ç¼–è¯‘æ—¶å‡å®šä¸é’ˆå¯¹ <code>n-3</code> ç‰ˆæœ¬çš„Kuberneteså…¼å®¹ã€‚</li>
<li>ç”±äº Helm 2 å¯¹ Kubernetes æ¬¡ç‰ˆæœ¬å˜æ›´çš„æ”¯æŒç¨å¾®ä¸¥æ ¼ä¸€ç‚¹åˆ™å‡å®šä¸Kubernetesçš„ <code>n-1</code> ç‰ˆæœ¬å…¼å®¹ã€‚</li>
</ul>
<figure class="image-box">
                <a rel=HelmåŒ…ç®¡ç†å·¥å…·å…¥é—¨å­¦ä¹ åŠä½¿ç”¨ href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/2/20201125111814.png" target="_blank" title="WeiyiGeek.Helmç‰ˆæœ¬æ¶æ„" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/2/20201125111814.png" alt="WeiyiGeek.Helmç‰ˆæœ¬æ¶æ„" title="" class=""></a>
                <p>WeiyiGeek.Helmç‰ˆæœ¬æ¶æ„</p>
            </figure>
<p>è¡¥å……è¯´æ˜: åœ¨2019å¹´å‘å¸ƒHelm V3.*ç‰ˆæœ¬å’Œä¹‹å‰ç‰ˆæœ¬ç›¸æ¯”æœ‰ä»¥ä¸‹å˜åŒ–</p>
<ul>
<li>(1) v3.* ç‰ˆæœ¬åˆ é™¤Tilleræ¶æ„å˜åŒ–</li>
<li>(2) release å¯ä»¥åœ¨ä¸åŒå‘½åç©ºé—´é‡ç”¨</li>
<li>(3) å°† chart æ¨é€åˆ° docker ä»“åº“ä¸­</li>
</ul>
<p>ç‰ˆæœ¬å·®å¼‚è¯´æ˜: <a href="https://helm.sh/docs/topics/v2_v3_migration/" target="_blank" rel="noopener">https://helm.sh/docs/topics/v2_v3_migration/</a></p>
<p><br/></p>
<p>å‚è€ƒä¸‹è¡¨æ¥ç¡®å®šå“ªä¸ªç‰ˆæœ¬çš„Helmä¸æ‚¨çš„é›†ç¾¤å…¼å®¹: <code>è¡¥å……-2022å¹´5æœˆ31æ—¥ 15:08:10</code><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Helm ç‰ˆæœ¬	æ”¯æŒçš„ Kubernetes ç‰ˆæœ¬</span><br><span class="line">3.8.x	1.23.x - 1.20.x</span><br><span class="line">3.7.x	1.22.x - 1.19.x</span><br><span class="line">3.6.x	1.21.x - 1.18.x</span><br><span class="line">3.5.x	1.20.x - 1.17.x</span><br><span class="line">3.4.x	1.19.x - 1.16.x</span><br><span class="line">3.3.x	1.18.x - 1.15.x</span><br><span class="line">3.2.x	1.18.x - 1.15.x</span><br><span class="line">3.1.x	1.17.x - 1.14.x</span><br><span class="line">3.0.x	1.16.x - 1.13.x</span><br><span class="line">2.16.x	1.16.x - 1.15.x</span><br><span class="line">2.15.x	1.15.x - 1.14.x</span><br></pre></td></tr></table></figure></p>
<p>å‚è€ƒåœ°å€: <a href="https://helm.sh/zh/docs/topics/version_skew/" target="_blank" rel="noopener">https://helm.sh/zh/docs/topics/version_skew/</a></p>
<p><br></p>
<h3 id="4-ç»„ä»¶è¯´æ˜"><a href="#4-ç»„ä»¶è¯´æ˜" class="headerlink" title="4.ç»„ä»¶è¯´æ˜"></a>4.ç»„ä»¶è¯´æ˜</h3><p>æè¿°: Helm æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶æ˜¯ç”¨Goç¼–ç¨‹è¯­è¨€ç¼–å†™çš„, å®ƒåˆ†ä¸ºä¸¤ä¸ªä¸åŒéƒ¨åˆ†å³<code>Helmå®¢æˆ·ç«¯å’ŒHelmåº“</code><br>è¯¥åº“ä½¿ç”¨Kuberneteså®¢æˆ·ç«¯åº“ä¸Kubernetesè¿›è¡Œé€šä¿¡, å½“å‰è¯¥åº“ä½¿ç”¨<code>REST + JSON</code>æ¥å£æ–¹å¼ï¼Œå®ƒåœ¨Kuberneteså†…éƒ¨çš„Secretsä¸­å­˜å‚¨ä¿¡æ¯<code>å³å®ƒä¸éœ€è¦è‡ªå·±çš„æ•°æ®åº“</code>ã€‚</p>
<p><br></p>
<p><code>Helm Client</code> æ˜¯é¢å‘æœ€ç»ˆç”¨æˆ·çš„å‘½ä»¤è¡Œå®¢æˆ·ç«¯è´Ÿè´£ä»¥ä¸‹å·¥ä½œï¼š</p>
<ul>
<li>æœ¬åœ°å›¾è¡¨å¼€å‘</li>
<li>ç®¡ç†å‚¨å­˜åº“</li>
<li>ç®¡ç†å‘å¸ƒ</li>
<li>ä¸Helmåº“çš„æ¥å£</li>
<li>å‘é€è¦å®‰è£…çš„å›¾è¡¨</li>
<li>è¯·æ±‚å‡çº§æˆ–å¸è½½ç°æœ‰ç‰ˆæœ¬</li>
</ul>
<p><br></p>
<p><code>Helm Library</code> æä¾›äº†ç”¨äºæ‰§è¡Œæ‰€æœ‰Helmæ“ä½œçš„é€»è¾‘ã€‚å®ƒä¸Kubernetes APIæœåŠ¡å™¨è¿æ¥å¹¶æä¾›ä»¥ä¸‹åŠŸèƒ½ï¼š</p>
<ul>
<li>ç»“åˆå›¾è¡¨å’Œé…ç½®ä»¥æ„å»ºå‘å¸ƒ</li>
<li>å°†å›¾è¡¨å®‰è£…åˆ°Kubernetesä¸­å¹¶æä¾›åç»­å‘è¡Œå¯¹è±¡</li>
<li>é€šè¿‡ä¸Kubernetesäº¤äº’æ¥å‡çº§å’Œå¸è½½å›¾è¡¨</li>
<li>ç‹¬ç«‹çš„Helmåº“å°è£…äº†Helmé€»è¾‘ï¼Œä»¥ä¾¿ä¸åŒçš„å®¢æˆ·ç«¯å¯ä»¥åˆ©ç”¨å®ƒã€‚</li>
</ul>
<p>Helm åŒ…å«ä¸¤ä¸ªç»„ä»¶ï¼šHelm å®¢æˆ·ç«¯ å’Œ Tiller æœåŠ¡å™¨</p>
<ul>
<li>Helm å®¢æˆ·ç«¯è´Ÿè´£ chart å’Œ release çš„åˆ›å»ºå’Œç®¡ç†ä»¥åŠå’Œ Tillerçš„äº¤äº’ã€‚</li>
<li>Tiller æœåŠ¡å™¨è¿è¡Œåœ¨ Kubernetes é›†ç¾¤ä¸­ï¼Œå®ƒä¼šå¤„ç†Helmå®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œä¸ Kubernetes API Server äº¤äº’ã€‚ </li>
</ul>
<p><br></p>
<p><strong>å¸®åŠ©æ–‡æ¡£</strong><br>å¿«é€Ÿå¼€å§‹: <a href="https://helm.sh/zh/docs/intro/quickstart/" target="_blank" rel="noopener">https://helm.sh/zh/docs/intro/quickstart/</a></p>
<p>PS : å½“å‰å®è·µç‰ˆæœ¬ V3.4.1 è¯·è¯»è€…æ³¨æ„å½“ç‰ˆæœ¬æœ‰æ‰€æ”¹å˜æ—¶æŸäº›ç‰¹æ€§åŠå…¶é…ç½®å¯èƒ½ä¼šå‘ç”Ÿæ”¹å˜ï¼Œè¯·å‚è€ƒHelmå®˜ç½‘ä¸ºå‡†;</p>
<hr>
<h2 id="0x01-åŸºç¡€å®‰è£…"><a href="#0x01-åŸºç¡€å®‰è£…" class="headerlink" title="0x01 åŸºç¡€å®‰è£…"></a>0x01 åŸºç¡€å®‰è£…</h2><p>æè¿°: å¦‚æœ‰æœ€æ–°è¯·å‚è€ƒå®‰è£…å®˜æ–¹å®‰è£…æ–‡æ¡£: <a href="https://helm.sh/zh/docs/intro/install/" target="_blank" rel="noopener">https://helm.sh/zh/docs/intro/install/</a></p>
<h3 id="1-ç¯å¢ƒéœ€æ±‚"><a href="#1-ç¯å¢ƒéœ€æ±‚" class="headerlink" title="1.ç¯å¢ƒéœ€æ±‚"></a>1.ç¯å¢ƒéœ€æ±‚</h3><ul>
<li>1) å®‰è£…æœ‰K8sé›†ç¾¤</li>
<li>2) å®‰è£…å’Œé…ç½®Helmåˆ°MasterèŠ‚ç‚¹ä¸Š</li>
</ul>
<p>PS : å¯¹äºHelmçš„æœ€æ–°ç‰ˆæœ¬æˆ‘ä»¬å»ºè®®ä½¿ç”¨Kubernetesçš„æœ€æ–°ç¨³å®šç‰ˆ, åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹å®ƒæ˜¯å€’æ•°ç¬¬äºŒä¸ª <code>minor release</code>å¯ä»¥å‚è€ƒä¸Šè¿°çš„K8sä¸Helmç‰ˆæœ¬çš„å¯¹åº”è¡¨;</p>
<p><br/></p>
<h3 id="2-éƒ¨ç½²è¯´æ˜"><a href="#2-éƒ¨ç½²è¯´æ˜" class="headerlink" title="2.éƒ¨ç½²è¯´æ˜"></a>2.éƒ¨ç½²è¯´æ˜</h3><p>éƒ¨ç½²ç¯å¢ƒè¯´æ˜:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">~$ kubectl version</span><br><span class="line">  <span class="comment"># Client Version: version.Info&#123;Major:"1", Minor:"19", GitVersion:"v1.19.3", GitCommit:"1e11e4a2108024935ecfcb2912226cedeafd99df", GitTreeState:"clean", BuildDate:"2020-10-14T12:50:19Z", GoVersion:"go1.15.2", Compiler:"gc", Platform:"linux/amd64"&#125;</span></span><br><span class="line"></span><br><span class="line">~$ kubeadm version</span><br><span class="line">  <span class="comment"># kubeadm version: &amp;version.Info&#123;Major:"1", Minor:"19", GitVersion:"v1.19.3", GitCommit:"1e11e4a2108024935ecfcb2912226cedeafd99df", GitTreeState:"clean", BuildDate:"2020-10-14T12:47:53Z", GoVersion:"go1.15.2", Compiler:"gc", Platform:"linux/amd64"&#125;</span></span><br><span class="line"></span><br><span class="line">~$ lsb_release -a</span><br><span class="line">  <span class="comment"># Distributor ID: Ubuntu</span></span><br><span class="line">  <span class="comment"># Description:    Ubuntu 20.04.1 LTS</span></span><br><span class="line">  <span class="comment"># Release:        20.04</span></span><br><span class="line">  <span class="comment"># Codename:       focal</span></span><br><span class="line"></span><br><span class="line">~$ docker info</span><br><span class="line">  <span class="comment"># Server Version: 19.03.13</span></span><br></pre></td></tr></table></figure></p>
<h4 id="Helm-Client"><a href="#Helm-Client" class="headerlink" title="Helm Client"></a>Helm Client</h4><p><strong>å®‰è£…æ–¹å¼</strong></p>
<ul>
<li><p>1) åŒ…ç®¡ç†å™¨å®‰è£…(Ubuntu-snap)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.Apt (Debian/Ubuntu) Helmç¤¾åŒºæˆå‘˜è´¡çŒ®äº†é’ˆå¯¹Aptçš„ä¸€ä¸ª HelmåŒ…åŒ…é€šå¸¸æ˜¯æœ€æ–°çš„ã€‚</span></span><br><span class="line">curl https://baltocdn.com/helm/signing.asc | sudo apt-key add -</span><br><span class="line">sudo apt-get install apt-transport-https --yes</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"deb https://baltocdn.com/helm/stable/debian/ all main"</span> | sudo tee /etc/apt/sources.list.d/helm-stable-debian.list</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install helm</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.Snap : Snapcraftersç¤¾åŒºç»´æŠ¤äº† Helm åŒ…çš„Snapç‰ˆæœ¬ï¼š</span></span><br><span class="line">sudo snap install helm --classic</span><br></pre></td></tr></table></figure>
</li>
<li><p>2) è„šæœ¬å®‰è£…(è‡ªåŠ¨æ‹‰å–æœ€æ–°çš„Helmç‰ˆæœ¬å¹¶åœ¨æœ¬åœ°å®‰è£…)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¸¸è§„</span></span><br><span class="line">$ curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/master/scripts/get-helm-3</span><br><span class="line">$ chmod 700 get_helm.sh</span><br><span class="line">$ ./get_helm.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆ–è€…</span></span><br><span class="line">curl https://raw.githubusercontent.com/helm/helm/master/scripts/get-helm-3 | bash</span><br></pre></td></tr></table></figure>
</li>
<li><p>3) äºŒè¿›åˆ¶å®‰è£…(ä¸‹è½½è§£å‹å¹¶æ·»åŠ åˆ°ç³»ç»ŸPATHä¹‹ä¸­)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.ä¸‹è½½å¹¶è§£å‹</span></span><br><span class="line">ARCH=$(dpkg --<span class="built_in">print</span>-architecture)</span><br><span class="line">VERSION=<span class="string">"3.4.1"</span></span><br><span class="line">wget https://get.helm.sh/helm-v<span class="variable">$&#123;VERSION&#125;</span>-linux-<span class="variable">$&#123;ARCH&#125;</span>.tar.gz -O /tmp/helm-v<span class="variable">$&#123;VERSION&#125;</span>-linux-<span class="variable">$&#123;ARCH&#125;</span>.tar.gz</span><br><span class="line">tar -zxf /tmp/helm-v3.4.1-linux-amd64.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.å¤åˆ¶åˆ° /usr/local/bin/</span></span><br><span class="line">sudo cp helm /usr/<span class="built_in">local</span>/bin/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.ç‰ˆæœ¬éªŒè¯</span></span><br><span class="line">$ helm version</span><br><span class="line">version.BuildInfo&#123;Version:<span class="string">"v3.4.1"</span>, GitCommit:<span class="string">"c4e74854886b2efe3321e185578e6db9be0a6e29"</span>, GitTreeState:<span class="string">"clean"</span>, GoVersion:<span class="string">"go1.14.11"</span>&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><br/></p>
<h4 id="Helm-Libaray"><a href="#Helm-Libaray" class="headerlink" title="Helm Libaray"></a>Helm Libaray</h4><hr>
<h3 id="3-åŸºç¡€é…ç½®"><a href="#3-åŸºç¡€é…ç½®" class="headerlink" title="3.åŸºç¡€é…ç½®"></a>3.åŸºç¡€é…ç½®</h3><h4 id="HelmåŸºç¡€ä½¿ç”¨"><a href="#HelmåŸºç¡€ä½¿ç”¨" class="headerlink" title="HelmåŸºç¡€ä½¿ç”¨"></a>HelmåŸºç¡€ä½¿ç”¨</h4><p>æè¿°: ä»¥ä¸‹æ˜¯HelmåŸºç¡€ä½¿ç”¨é…ç½®<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># (1) è®¾ç½®Helmå‘½ä»¤è¡¥å…¨</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"source &lt;(helm completion bash)"</span> &gt;&gt; ~/.bashrc</span><br><span class="line">helm completion bash &gt; /etc/bash_completion.d/helm</span><br><span class="line"></span><br><span class="line"><span class="comment"># (2) ç¬¬ä¸‰æ–¹Chartä»“åº“æ·»åŠ /æŸ¥çœ‹/æ›´æ–°/åˆ é™¤</span></span><br><span class="line"><span class="comment"># å®˜ç½‘éœ€è¦ç¿»å¢™: helm repo add stable https://charts.helm.sh/stable</span></span><br><span class="line">~$ helm repo add stable https://charts.helm.sh/stable</span><br><span class="line">  <span class="comment"># "stable" has been added to your repositories</span></span><br><span class="line">~$ helm repo add azure http://mirror.azure.cn/kubernetes/charts</span><br><span class="line"><span class="comment"># ~$ helm repo add aliyun https://apphub.aliyuncs.com/</span></span><br><span class="line">~$ helm repo add aliyun  https://kubernetes.oss-cn-hangzhou.aliyuncs.com/charts</span><br><span class="line">  <span class="comment"># "aliyun" has been added to your repositories</span></span><br><span class="line">~$ helm repo list</span><br><span class="line">  <span class="comment"># NAME    URL</span></span><br><span class="line">  <span class="comment"># stable  http://mirror.azure.cn/kubernetes/charts</span></span><br><span class="line">  <span class="comment"># aliyun  https://kubernetes.oss-cn-hangzhou.aliyuncs.com/charts</span></span><br><span class="line">~$ helm repo update</span><br><span class="line">  <span class="comment"># Hang tight while we grab the latest from your chart repositories...</span></span><br><span class="line">  <span class="comment"># ...Successfully got an update from the "aliyun" chart repository</span></span><br><span class="line">  <span class="comment"># ...Successfully got an update from the "stable" chart repository</span></span><br><span class="line">  <span class="comment"># Update Complete. âˆHappy Helming!âˆ</span></span><br><span class="line">~$ helm repo remove aliyun</span><br><span class="line">  <span class="comment"># "aliyun" has been removed from your repositories</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># (3) åº”ç”¨æœç´¢(æœç´¢ä½¿ç”¨æ¨¡ç³Šå­—ç¬¦ä¸²åŒ¹é…ç®—æ³•)</span></span><br><span class="line">~$ helm search hub redis   <span class="comment"># Helm å®˜ç½‘Chartä»“åº“ä¸­å¿ƒ</span></span><br><span class="line">  <span class="comment"># URL                                                     CHART VERSION   APP VERSION     DESCRIPTION</span></span><br><span class="line">  <span class="comment"># https://hub.helm.sh/charts/drycc-canary/redis           1.0.0                           A Redis database for use inside a Kubernetes cl...</span></span><br><span class="line">  <span class="comment"># https://hub.helm.sh/charts/groundhog2k/redis            0.1.2           6.0.9           A Helm chart for Redis on Kubernetes</span></span><br><span class="line">  <span class="comment"># https://hub.helm.sh/charts/wener/redis                  12.1.1          6.0.9           Open source, advanced key-value store. It is of...</span></span><br><span class="line">  ....</span><br><span class="line"></span><br><span class="line">~$ helm search repo dashboard | grep -v <span class="string">"DEPRECATED"</span>   <span class="comment">#  ç¬¬ä¸‰æ–¹ Chart ä»“åº“</span></span><br><span class="line">  <span class="comment"># NAME                            CHART VERSION   APP VERSION     DESCRIPTION</span></span><br><span class="line">  <span class="comment"># aliyun/kubernetes-dashboard     0.6.0           1.8.3           General-purpose web UI for Kubernetes clusters</span></span><br><span class="line">  <span class="comment"># aliyun/jasperreports            0.2.5           6.4.2           The JasperReports server can be used as a stand...</span></span><br><span class="line">  <span class="comment"># aliyun/kube-ops-view            0.4.1                           Kubernetes Operational View - read-only system ...</span></span><br><span class="line">  <span class="comment"># aliyun/uchiwa                   0.2.3                           Dashboard for the Sensu monitoring framework</span></span><br><span class="line">  <span class="comment"># aliyun/weave-cloud              0.1.2                           Weave Cloud is a add-on to Kubernetes which pro...</span></span><br><span class="line">  <span class="comment"># aliyun/weave-scope              0.9.2           1.6.5           A Helm chart for the Weave Scope cluster visual...</span></span><br></pre></td></tr></table></figure></p>
<p><br/></p>
<h4 id="Chartä»“åº“é•œåƒ"><a href="#Chartä»“åº“é•œåƒ" class="headerlink" title="Chartä»“åº“é•œåƒ"></a>Chartä»“åº“é•œåƒ</h4><table>
<thead>
<tr>
<th>ä»“åº“åç§°</th>
<th>chartsä»“åº“URL</th>
<th>å‘½ä»¤</th>
</tr>
</thead>
<tbody>
<tr>
<td>stable</td>
<td><a href="https://charts.helm.sh/stable" target="_blank" rel="noopener">https://charts.helm.sh/stable</a></td>
<td><code>helm repo add stable https://charts.helm.sh/stable</code></td>
</tr>
<tr>
<td>bitnami</td>
<td><a href="https://charts.bitnami.com/bitnami" target="_blank" rel="noopener">https://charts.bitnami.com/bitnami</a></td>
<td><code>helm repo add bitnami https://charts.bitnami.com/bitnami</code></td>
</tr>
<tr>
<td>azure</td>
<td><a href="http://mirror.azure.cn/kubernetes/charts" target="_blank" rel="noopener">http://mirror.azure.cn/kubernetes/charts</a></td>
<td><code>helm repo add azure http://mirror.azure.cn/kubernetes/charts</code></td>
</tr>
<tr>
<td>apphub</td>
<td><a href="https://apphub.aliyuncs.com/" target="_blank" rel="noopener">https://apphub.aliyuncs.com/</a></td>
<td><code>helm repo add apphub https://apphub.aliyuncs.com/</code></td>
</tr>
<tr>
<td>ali-stable</td>
<td><a href="https://kubernetes.oss-cn-hangzhou.aliyuncs.com/charts" target="_blank" rel="noopener">https://kubernetes.oss-cn-hangzhou.aliyuncs.com/charts</a></td>
<td><code>helm repo add ali-stable https://kubernetes.oss-cn-hangzhou.aliyuncs.com/charts</code></td>
</tr>
<tr>
<td>ali-incubator</td>
<td><a href="https://aliacs-app-catalog.oss-cn-hangzhou.aliyuncs.com/charts-incubator/" target="_blank" rel="noopener">https://aliacs-app-catalog.oss-cn-hangzhou.aliyuncs.com/charts-incubator/</a></td>
<td><code>helm repo add ali-incubator https://aliacs-app-catalog.oss-cn-hangzhou.aliyuncs.com/charts-incubator/</code></td>
</tr>
</tbody>
</table>
<p><strong>å…¶ä»–å¸¸ç”¨è½¯ä»¶ä»“åº“:</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ingress https://kubernetes.github.io/ingress-nginx</span><br><span class="line">grafana https://grafana.github.io/helm-charts</span><br></pre></td></tr></table></figure></p>
<hr>
<h2 id="0x02-å…¥é—¨å®è·µ"><a href="#0x02-å…¥é—¨å®è·µ" class="headerlink" title="0x02 å…¥é—¨å®è·µ"></a>0x02 å…¥é—¨å®è·µ</h2><p><strong>ä½¿ç”¨ç®€è¿°</strong></p>
<ul>
<li>1.åˆ›å»ºå¹¶ç¼–å†™æ–°çš„Chart</li>
<li>2.æµ‹è¯•åˆ›å»ºçš„Chart</li>
<li>3.å°†Chartåº”ç”¨è¿›è¡Œæ‰“åŒ…æˆä¸ºtgzæ ¼å¼</li>
<li>4.ä¸Šä¼ Chartåˆ°Chartä»“åº“æˆ–è€…ä»è¿œç¨‹ä»“åº“ä¸­ä¸‹è½½Chart</li>
<li>5.åœ¨K8sé›†ç¾¤ä¸­è¿è¡ŒChartè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªrelease</li>
<li>6.åˆ©ç”¨Helmç®¡ç†Chartçš„å‘å¸ƒã€ç»“æŸç”Ÿå‘½å‘¨æœŸ</li>
</ul>
<hr>
<h3 id="1-Hello-World-è‡ªå®šä¹‰æ¨¡æ¿"><a href="#1-Hello-World-è‡ªå®šä¹‰æ¨¡æ¿" class="headerlink" title="1.Hello World - è‡ªå®šä¹‰æ¨¡æ¿"></a>1.Hello World - è‡ªå®šä¹‰æ¨¡æ¿</h3><p>æè¿°: æˆ‘ä»¬é‡‡ç”¨Helmæ‰§è¡Œæˆ‘ä»¬è‡ªå®šä¹‰æ¨¡æ¿ç”Ÿæˆchartå›¾è¡¨ï¼Œå¹¶ä¸”è¿è¡Œå›¾è¡¨å®ä¾‹ç”Ÿæˆrelease;</p>
<p>Helm æ¨¡æ¿é¡¹ç›®ç»“æ„:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">~/K8s/Day10/demo1$ tree .</span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ Chart.yaml   <span class="comment"># å½“å‰chartå±æ€§é…ç½®ä¿¡æ¯</span></span><br><span class="line">â”œâ”€â”€ templates    <span class="comment"># ç¼–å†™yamlæ–‡ä»¶æ”¾åˆ°è¿™ä¸ªç›®å½•ä¸­åŒ…æ‹¬ä½†ä¸é™äºServiceã€Podã€DaemonSetã€ReplicaSetã€Deploymentä»¥åŠã€€ã€€Â·StatefulSet</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ deployment.yaml</span><br><span class="line">â”‚Â Â  â””â”€â”€ service.yaml</span><br><span class="line">â””â”€â”€ values.yaml  <span class="comment"># yamlæ–‡ä»¶å¯ä»¥çš„ä½¿ç”¨å…¨å±€å˜é‡</span></span><br><span class="line"></span><br><span class="line">1 directory, 4 files</span><br></pre></td></tr></table></figure></p>
<p><br/></p>
<p><strong>æ“ä½œæµç¨‹:</strong></p>
<ul>
<li><p>Step 1.åˆ›å»ºè‡ªæè¿°æ–‡ä»¶ Chart.yaml æ–‡ä»¶å¿…é¡»æœ‰ name å’Œ version å®šä¹‰ï¼Œæ³¨æ„apiVersionéå¿…é¡»ä½†æ˜¯å»ºè®®å¡«å†™å¦åˆ™éªŒè¯é…ç½®æ—¶ä¼šæœ‰è­¦å‘Š;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># PS : Chart.yaml æ˜¯å¤§å†™</span></span><br><span class="line">cat &lt;&lt;<span class="string">'EOF'</span> &gt; ./Chart.yaml   </span><br><span class="line">appVersion: 1.0 </span><br><span class="line">apiVersion: v2</span><br><span class="line">name: hello-world </span><br><span class="line">description: A Helm chart <span class="keyword">for</span> Kubernetes</span><br><span class="line"><span class="built_in">type</span>: application</span><br><span class="line">version: 1.0.0 </span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
</li>
<li><p>Step 2.åˆ›å»ºé¡¹ç›®é…ç½®æ–‡ä»¶ Values.yaml ä¾¿äºåé¢çš„èµ„æºæ¸…å•ä½¿ç”¨</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cat &lt;&lt;<span class="string">'EOF'</span> &gt; ./values.yaml </span><br><span class="line">replicas: 1</span><br><span class="line">image:</span><br><span class="line">  repository: harbor.weiyigeek.top/<span class="built_in">test</span>/nginx</span><br><span class="line">  tag: <span class="string">'v1.0'</span> </span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>Step 3.åˆ›å»ºæ¨¡æ¿æ–‡ä»¶ï¼Œç”¨äºç”Ÿæˆ Kubernetes èµ„æºæ¸…å• (manifests) æ¨¡æ¿ç›®å½•åç§°å¿…é¡»æ˜¯templates</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">mkdir</span> <span class="string">./templates</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="string">cat</span> <span class="string">&lt;&lt;'EOF'</span> <span class="string">&gt; ./templates/deployment.yaml </span></span><br><span class="line"><span class="string"></span><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span> </span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">hello-world-deployment</span></span><br><span class="line"><span class="attr">  labels:</span></span><br><span class="line"><span class="attr">    app:</span> <span class="string">hello-world</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line"><span class="attr">  replicas:</span> <span class="string">&#123;&#123;</span> <span class="string">.Values.replicas</span> <span class="string">&#125;&#125;</span></span><br><span class="line"><span class="attr">  selector:</span></span><br><span class="line"><span class="attr">    matchLabels:</span>  </span><br><span class="line"><span class="attr">      app:</span> <span class="string">hello-world</span>       <span class="comment"># åŒ¹é…çš„Podæ ‡ç­¾éå¸¸é‡è¦</span></span><br><span class="line"><span class="attr">  template:</span></span><br><span class="line"><span class="attr">    metadata:</span></span><br><span class="line"><span class="attr">      labels:</span></span><br><span class="line"><span class="attr">        app:</span> <span class="string">hello-world</span> </span><br><span class="line"><span class="attr">    spec:</span></span><br><span class="line"><span class="attr">      containers:</span></span><br><span class="line"><span class="attr">        - name:</span> <span class="string">nginx-hello</span></span><br><span class="line"><span class="attr">          image:</span> <span class="string">&#123;&#123;</span> <span class="string">.Values.image.repository</span> <span class="string">&#125;&#125;:&#123;&#123;</span> <span class="string">.Values.image.tag</span> <span class="string">&#125;&#125;</span></span><br><span class="line"><span class="attr">          imagePullPolicy:</span> <span class="string">IfNotPresent</span></span><br><span class="line"><span class="attr">          ports:</span></span><br><span class="line"><span class="attr">            - containerPort:</span> <span class="number">80</span> </span><br><span class="line"><span class="attr">              protocol:</span> <span class="string">TCP</span> </span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Service</span></span><br><span class="line"><span class="string">cat</span> <span class="string">&lt;&lt;'EOF'</span> <span class="string">&gt; ./templates/service.yaml </span></span><br><span class="line"><span class="string"></span><span class="attr">apiVersion:</span> <span class="string">v1</span> </span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span> </span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">hello-world-svc</span> </span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line"><span class="attr">  type:</span> <span class="string">NodePort</span> </span><br><span class="line"><span class="attr">  ports:</span></span><br><span class="line"><span class="attr">  - port:</span> <span class="number">80</span> </span><br><span class="line"><span class="attr">    targetPort:</span> <span class="number">80</span> </span><br><span class="line"><span class="attr">    nodePort:</span> <span class="number">30080</span></span><br><span class="line"><span class="attr">    protocol:</span> <span class="string">TCP</span></span><br><span class="line"><span class="attr">  selector:</span></span><br><span class="line"><span class="attr">    app:</span> <span class="string">hello-world</span> </span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Step 4.ä½¿ç”¨æ¨¡æ¿åŠ¨æ€ç”ŸæˆK8sèµ„æºæ¸…å•ï¼Œéå¸¸éœ€è¦éªŒè¯æ¨¡æ¿é…ç½®æ˜¯å¦æ­£å¸¸æˆ–è€…èƒ½æå‰é¢„è§ˆç”Ÿæˆçš„ç»“æœåœ¨è¿è¡Œå‰è¿›è¡ŒDebugï¼›</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># (1) éªŒè¯Chartæ¨¡æ¿é…ç½®æ˜¯å¦æ­£ç¡®</span></span><br><span class="line">~/K8s/Day10/demo1$ helm lint .</span><br><span class="line">  <span class="comment"># ==&gt; Linting .</span></span><br><span class="line">  <span class="comment"># [INFO] Chart.yaml: icon is recommended</span></span><br><span class="line">  <span class="comment"># 1 chart(s) linted, 0 chart(s) failed</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># (2) ä½¿ç”¨ --dry-run --debug é€‰é¡¹æ¥æ‰“å°å‡ºç”Ÿæˆçš„æ¸…å•æ–‡ä»¶å†…å®¹è€Œä¸æ‰§è¡Œéƒ¨ç½²</span></span><br><span class="line">~/K8s/Day10/demo1$ helm --debug install . --dry-run  --generate-name</span><br><span class="line">  <span class="comment"># install.go:172: [debug] Original chart version: ""</span></span><br><span class="line">  <span class="comment"># install.go:189: [debug] CHART PATH: /home/weiyigeek/K8s/Day10/demo1</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># NAME: chart-1606294992</span></span><br><span class="line">  <span class="comment"># LAST DEPLOYED: Wed Nov 25 17:03:12 2020</span></span><br><span class="line">  <span class="comment"># NAMESPACE: default</span></span><br><span class="line">  <span class="comment"># STATUS: pending-install</span></span><br><span class="line">  <span class="comment"># REVISION: 1</span></span><br><span class="line">  <span class="comment"># TEST SUITE: None</span></span><br><span class="line">  <span class="comment"># USER-SUPPLIED VALUES:</span></span><br><span class="line">  <span class="comment"># &#123;&#125;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># COMPUTED VALUES:</span></span><br><span class="line">  <span class="comment"># image:</span></span><br><span class="line">  <span class="comment">#   repository: harbor.weiyigeek.top/test/nginx</span></span><br><span class="line">  <span class="comment">#   tag: v1.0</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># HOOKS:</span></span><br><span class="line">  <span class="comment"># MANIFEST:</span></span><br><span class="line">  <span class="comment"># ---</span></span><br><span class="line">  <span class="comment"># # Source: hello-world/templates/service.yaml</span></span><br><span class="line">  <span class="comment"># apiVersion: v1</span></span><br><span class="line">  <span class="comment"># kind: Service</span></span><br><span class="line">  <span class="comment"># metadata:</span></span><br><span class="line">  <span class="comment">#   name: hello-world-svc</span></span><br><span class="line">  <span class="comment"># spec:</span></span><br><span class="line">  <span class="comment">#   type: NodePort</span></span><br><span class="line">  <span class="comment">#   ports:</span></span><br><span class="line">  <span class="comment">#   - port: 80</span></span><br><span class="line">  <span class="comment">#     targetPort: 80</span></span><br><span class="line">  <span class="comment">#     nodePort: 30080</span></span><br><span class="line">  <span class="comment">#     protocol: TCP</span></span><br><span class="line">  <span class="comment">#   selector:</span></span><br><span class="line">  <span class="comment">#     app: hello-world</span></span><br><span class="line">  <span class="comment"># ---</span></span><br><span class="line">  <span class="comment"># # Source: hello-world/templates/deployment.yaml</span></span><br><span class="line">  <span class="comment"># apiVersion: apps/v1</span></span><br><span class="line">  <span class="comment"># kind: Deployment</span></span><br><span class="line">  <span class="comment"># metadata:</span></span><br><span class="line">  <span class="comment">#   name: hello-world-deployment</span></span><br><span class="line">  <span class="comment">#   labels:</span></span><br><span class="line">  <span class="comment">#     app: hello-world</span></span><br><span class="line">  <span class="comment"># spec:</span></span><br><span class="line">  <span class="comment">#   replicas: 1</span></span><br><span class="line">  <span class="comment">#   selector:</span></span><br><span class="line">  <span class="comment">#     matchLabels:</span></span><br><span class="line">  <span class="comment">#       app: hello-world       # åŒ¹é…çš„Podæ ‡ç­¾éå¸¸é‡è¦</span></span><br><span class="line">  <span class="comment">#   template:</span></span><br><span class="line">  <span class="comment">#     metadata:</span></span><br><span class="line">  <span class="comment">#       labels:</span></span><br><span class="line">  <span class="comment">#         app: hello-world</span></span><br><span class="line">  <span class="comment">#     spec:</span></span><br><span class="line">  <span class="comment">#       containers:</span></span><br><span class="line">  <span class="comment">#         - name: nginx-hello</span></span><br><span class="line">  <span class="comment">#           image: harbor.weiyigeek.top/test/nginx:v1.0</span></span><br><span class="line">  <span class="comment">#           imagePullPolicy: IfNotPresent</span></span><br><span class="line">  <span class="comment">#           ports:</span></span><br><span class="line">  <span class="comment">#             - containerPort: 80</span></span><br><span class="line">  <span class="comment">#               protocol: TCP</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Step 5.ä½¿ç”¨å‘½ä»¤<code>helm install RELATIVE_PATH_TO_CHART</code> åˆ›å»ºä¸€æ¬¡Releaseç„¶åæŸ¥çœ‹ç›¸å…³ä¿¡æ¯</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># . è¡¨ç¤ºä»å½“å‰ç›®å½•å®‰è£… </span></span><br><span class="line"><span class="comment"># -g, --generate-name : ç”Ÿæˆåç§°ï¼ˆå¹¶çœç•¥NAMEå‚æ•°ï¼‰</span></span><br><span class="line">helm install . -g</span><br><span class="line">  <span class="comment"># NAME: chart-1606295498</span></span><br><span class="line">  <span class="comment"># LAST DEPLOYED: Wed Nov 25 17:11:38 2020</span></span><br><span class="line">  <span class="comment"># NAMESPACE: default</span></span><br><span class="line">  <span class="comment"># STATUS: deployed</span></span><br><span class="line">  <span class="comment"># REVISION: 1</span></span><br><span class="line">  <span class="comment"># TEST SUITE: None</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># (2) æŸ¥è¯¢ä¸€ä¸ªç‰¹å®šçš„Releaseçš„çŠ¶æ€ </span></span><br><span class="line">~/K8s/Day10/demo1$ helm status chart-1606295498</span><br><span class="line">  <span class="comment"># NAME: chart-1606295498</span></span><br><span class="line">  <span class="comment"># ...</span></span><br><span class="line">  <span class="comment"># è¾“å‡ºç»“æœåŒä¸Š</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># (3) åˆ—å‡ºå·²ç»éƒ¨ç½²çš„ Release </span></span><br><span class="line">~/K8s/Day10/demo1$ helm ls</span><br><span class="line"><span class="comment"># NAME                    NAMESPACE       REVISION        UPDATED                                 STATUS          CHART                   APP VERSION</span></span><br><span class="line"><span class="comment"># chart-1606295498        default         1               2020-11-25 17:11:38.35894709 +0800 CST  deployed        hello-world-1.0.0       1.0</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Step 6.éªŒè¯ä¸æŸ¥çœ‹éƒ¨ç½²çš„Releaseæ•ˆæœ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># SVC</span></span><br><span class="line">~/K8s/Day10/demo1$ kubectl get svc</span><br><span class="line">  <span class="comment"># NAME              TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)        AGE</span></span><br><span class="line">  <span class="comment"># hello-world-svc   NodePort    10.103.145.171   &lt;none&gt;        80:30080/TCP   3m37s</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Deployment</span></span><br><span class="line">~/K8s/Day10/demo1$ kubectl get deploy -o wide --show-labels</span><br><span class="line">  <span class="comment"># NAME                     READY   UP-TO-DATE   AVAILABLE   AGE    CONTAINERS    IMAGES                                 SELECTOR          LABELS</span></span><br><span class="line">  <span class="comment"># hello-world-deployment   1/1     1            1           5m3s   nginx-hello   harbor.weiyigeek.top/test/nginx:v1.0   app=hello-world   app.kubernetes.io/managed-by=Helm,app=hello-world</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Pod</span></span><br><span class="line">~/K8s/Day10/demo1$ kubectl get pod -o wide --show-labels</span><br><span class="line">  <span class="comment"># NAME                                      READY   STATUS      RESTARTS   AGE     IP            NODE          LABELS</span></span><br><span class="line">  <span class="comment"># hello-world-deployment-588f974b64-d8456   1/1     Running     0          3m55s   10.244.2.34   k8s-node-5    app=hello-world,pod-template-hash=588f974b64</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¿é—®æ•ˆæœ:</span></span><br><span class="line">~/K8s/Day10/demo1$ curl http://10.10.107.202:30080/host.html</span><br><span class="line">  <span class="comment"># Hostname: hello-world-deployment-588f974b64-d8456  &lt;br&gt;</span></span><br><span class="line">  <span class="comment"># Image Version: &lt;u&gt; 1.0 &lt;/u&gt;</span></span><br><span class="line">  <span class="comment"># Nginx Version: 1.19.4</span></span><br><span class="line">~/K8s/Day10/demo1$ curl http://10.244.2.34/host.html</span><br><span class="line">  <span class="comment"># Hostname: hello-world-deployment-588f974b64-d8456  &lt;br&gt;</span></span><br><span class="line">  <span class="comment"># Image Version: &lt;u&gt; 1.0 &lt;/u&gt;</span></span><br><span class="line">  <span class="comment"># Nginx Version: 1.19.4</span></span><br></pre></td></tr></table></figure>
<figure class="image-box">
                <a rel=HelmåŒ…ç®¡ç†å·¥å…·å…¥é—¨å­¦ä¹ åŠä½¿ç”¨ href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/2/20201125172155.png" target="_blank" title="WeiyiGeek.NodePortè®¿é—®" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/2/20201125172155.png" alt="WeiyiGeek.NodePortè®¿é—®" title="" class=""></a>
                <p>WeiyiGeek.NodePortè®¿é—®</p>
            </figure>
</li>
</ul>
<ul>
<li>Step 7.ç‰ˆæœ¬è¿­ä»£ä¸æ”¶ç¼©<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># (1) åœ¨ values.yaml ä¸­çš„å€¼å¯ä»¥è¢«éƒ¨ç½² release æ—¶ç”¨åˆ°</span></span><br><span class="line"><span class="comment"># å¯é‡‡ç”¨æŒ‡å®šå‚æ•° --values YAML_FILE_PATH æˆ– --set key1=value1, key2=value2 è¦†ç›–æ‰ </span></span><br><span class="line">helm upgrade chart-1606308995 . --<span class="built_in">set</span> image.tag=<span class="string">"v2.0"</span>,version=<span class="string">"1.0.1"</span> --dry-run <span class="comment"># å°è¯•æ‰§è¡Œ</span></span><br><span class="line">  <span class="comment"># NAME: chart-1606308995</span></span><br><span class="line">  <span class="comment"># LAST DEPLOYED: Wed Nov 25 20:39:54 2020</span></span><br><span class="line">  <span class="comment"># NAMESPACE: default</span></span><br><span class="line">  <span class="comment"># STATUS: pending-upgrade</span></span><br><span class="line">  <span class="comment"># REVISION: 2</span></span><br><span class="line">  <span class="comment"># TEST SUITE: None</span></span><br><span class="line">  <span class="comment"># HOOKS:</span></span><br><span class="line">  <span class="comment"># MANIFEST:</span></span><br><span class="line">  <span class="comment"># ---</span></span><br><span class="line">  <span class="comment"># ...</span></span><br><span class="line">  <span class="comment">#   containers:</span></span><br><span class="line">  <span class="comment">#         - name: nginx-hello</span></span><br><span class="line">  <span class="comment">#           image: harbor.weiyigeek.top/test/nginx:v2.0  # æ­¤æ—¶ä½ ä¼šå‘ç°tagsç‰ˆæœ¬æœ‰æ‰€æ”¹å˜</span></span><br><span class="line">  <span class="comment">#           imagePullPolicy: IfNotPresent</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># (2) æ‰§è¡Œåç¨‹åºreleaseå°†ä¼šæ›´æ–°</span></span><br><span class="line">~/K8s/Day10/demo1$ helm upgrade chart-1606308995 . --<span class="built_in">set</span> image.tag=<span class="string">"v2.0"</span>,version=<span class="string">"1.0.1"</span></span><br><span class="line">  <span class="comment"># Release "chart-1606308995" has been upgraded. Happy Helming!</span></span><br><span class="line">  <span class="comment"># NAME: chart-1606308995</span></span><br><span class="line">  <span class="comment"># LAST DEPLOYED: Wed Nov 25 20:42:14 2020</span></span><br><span class="line">  <span class="comment"># NAMESPACE: default</span></span><br><span class="line">  <span class="comment"># STATUS: deployed</span></span><br><span class="line">  <span class="comment"># REVISION: 2</span></span><br><span class="line">  <span class="comment"># TEST SUITE: None</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># (3) æŸ¥çœ‹æ•ˆæœ</span></span><br><span class="line">$ kubectl get pod -o wide</span><br><span class="line">  <span class="comment"># hello-world-deployment-cb494b88f-7dxk8   1/1     Running     0    35s   10.244.2.38   k8s-node-5 </span></span><br><span class="line">~/K8s/Day10/demo1$ curl http://10.244.2.38/host.html</span><br><span class="line">~/K8s/Day10/demo1$ curl http://10.10.107.202:30080/host.html  <span class="comment"># NodePort</span></span><br><span class="line"><span class="comment"># Hostname: hello-world-deployment-cb494b88f-7dxk8  &lt;br&gt;</span></span><br><span class="line"><span class="comment"># Image Version: &lt;u&gt; 2.0 &lt;/u&gt;</span></span><br><span class="line"><span class="comment"># Nginx Version: 1.19.4</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># (4) åˆ©ç”¨Helmè¿›è¡Œæ‰©å®¹ä¸æ”¶ç¼©(ç”±äºæˆ‘ä»¬å°†replicaså†™å…¥åˆ°values.yamlå¹¶ä¸”åœ¨deployment.yamlæ–‡ä»¶ä¸­è¿›è¡Œäº†å¼•ç”¨)</span></span><br><span class="line">$ helm upgrade chart-1606308995 . --<span class="built_in">set</span> replicas=<span class="string">"3"</span>,image.tag=<span class="string">"v3.0"</span>,version=<span class="string">"1.0.1"</span> --dry-run </span><br><span class="line">$ helm upgrade chart-1606308995 . --<span class="built_in">set</span> replicas=<span class="string">"3"</span>,image.tag=<span class="string">"v3.0"</span>,version=<span class="string">"1.0.1"</span></span><br><span class="line">  <span class="comment"># Release "chart-1606308995" has been upgraded. Happy Helming!</span></span><br><span class="line">  <span class="comment"># NAME: chart-1606308995</span></span><br><span class="line">  <span class="comment"># LAST DEPLOYED: Wed Nov 25 21:01:02 2020</span></span><br><span class="line">  <span class="comment"># NAMESPACE: default</span></span><br><span class="line">  <span class="comment"># STATUS: deployed</span></span><br><span class="line">  <span class="comment"># REVISION: 3</span></span><br><span class="line">  <span class="comment"># TEST SUITE: None</span></span><br><span class="line"></span><br><span class="line">~/K8s/Day10/demo1$ kubectl get pod -o wide  <span class="comment"># å¯ä»¥çœ‹åˆ°å·²ç»æ‰©å®¹æˆåŠŸ</span></span><br><span class="line">  <span class="comment"># NAME                                      READY   STATUS      RESTARTS   AGE     IP            NODE      </span></span><br><span class="line">  <span class="comment"># hello-world-deployment-648bb6c9f8-595sr   1/1     Running     0          3m7s    10.244.2.45   k8s-node-5 </span></span><br><span class="line">  <span class="comment"># hello-world-deployment-648bb6c9f8-8xrm2   1/1     Running     0          3m9s    10.244.2.44   k8s-node-5  </span></span><br><span class="line">  <span class="comment"># hello-world-deployment-648bb6c9f8-rjsr8   1/1     Running     0          3m11s   10.244.2.43   k8s-node-5</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¿é—®éªŒè¯</span></span><br><span class="line">~/K8s/Day10/demo1$ curl http://10.10.107.202:30080/host.html  </span><br><span class="line">  <span class="comment"># Hostname: hello-world-deployment-648bb6c9f8-595sr ,Image Version: 3.0, Nginx Version: 1.19.4</span></span><br><span class="line">~/K8s/Day10/demo1$ curl http://10.10.107.202:30080/host.html</span><br><span class="line">  <span class="comment"># Hostname: hello-world-deployment-648bb6c9f8-8xrm2 ,Image Version: 3.0, Nginx Version: 1.19.4</span></span><br><span class="line">~/K8s/Day10/demo1$ curl http://10.10.107.202:30080/host.html</span><br><span class="line">  <span class="comment"># Hostname: hello-world-deployment-648bb6c9f8-rjsr8 ,Image Version: 3.0, Nginx Version: 1.19.4</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># (5) æŸ¥çœ‹Chartç›¸å…³ä¿¡æ¯ä»¥åŠå†å²</span></span><br><span class="line">~/K8s/Day10/demo1$ helm get values chart-1606308995</span><br><span class="line"><span class="comment"># USER-SUPPLIED VALUES:    </span></span><br><span class="line">  <span class="comment"># image:</span></span><br><span class="line">  <span class="comment">#   tag: v3.0</span></span><br><span class="line">  <span class="comment"># replicas: 3  # ç”¨æˆ·æä¾›çš„å˜é‡ï¼Œä¸ºä¾‹ä¾¿äºåˆ©ç”¨valuesè¿›è¡Œæ‰©å®¹éœ€è¦ä½¿ç”¨åˆ°values.yamlä¸­å®šä¹‰çš„å˜é‡ä¸å€¼;</span></span><br><span class="line">  <span class="comment"># version: 1.0.1</span></span><br><span class="line"></span><br><span class="line">~/K8s/Day10/demo1$ helm <span class="built_in">history</span> chart-1606308995</span><br><span class="line">  <span class="comment"># REVISION(ä¿®æ­£ç‰ˆæœ¬) UPDATED                         STATUS          CHART                   DESCRIPTION</span></span><br><span class="line">  <span class="comment"># 1               Wed Nov 25 20:56:35 2020        superseded      hello-world-1.0.0       Install complete</span></span><br><span class="line">  <span class="comment"># 2               Wed Nov 25 20:58:00 2020        superseded      hello-world-1.0.0       Upgrade complete</span></span><br><span class="line">  <span class="comment"># 3               Wed Nov 25 21:01:02 2020        deployed        hello-world-1.0.0       Upgrade complete</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>Step 7.Podå›æ»šæ“ä½œ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># (1) ä¾‹å¦‚æˆ‘ä»¬å›æ»šåˆ° REVISION = 1 çš„æ—¶å€™</span></span><br><span class="line"><span class="comment"># è¯­æ³•ï¼šhelm rollback RELEASE_NAME REVISION NUMBER </span></span><br><span class="line">~/K8s/Day10/demo1$ helm rollback chart-1606308995 1</span><br><span class="line">  <span class="comment"># Rollback was a success! Happy Helming!</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># (2) éªŒè¯å›æ»š</span></span><br><span class="line">~/K8s/Day10/demo1$ curl http://10.10.107.202:30080/host.html <span class="comment"># å¯ä»¥çœ‹è§å·²ç»å›æ»šåˆ°åˆå§‹ç‰ˆæœ¬</span></span><br><span class="line">  <span class="comment"># Hostname: hello-world-deployment-588f974b64-zrkgf  &lt;br&gt;</span></span><br><span class="line">  <span class="comment"># Image Version: &lt;u&gt; 1.0 &lt;/u&gt;</span></span><br><span class="line">  <span class="comment"># Nginx Version: 1.19.4</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Step 8.RELEASESåˆ é™¤æ“ä½œ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># (1) åˆ é™¤æŒ‡å®šçš„Releaseå³ç§»é™¤æ‰€æœ‰ä¸è¿™ä¸ª Release ç›¸å…³çš„ Kubernetes èµ„æº </span></span><br><span class="line">~/K8s/Day10/demo1$ helm uninstall chart-1606295498</span><br><span class="line">  <span class="comment"># release "chart-1606295498" uninstalled</span></span><br><span class="line">~/K8s/Day10/demo1$ helm ls</span><br><span class="line">  <span class="comment"># NAME    NAMESPACE       REVISION        UPDATED STATUS  CHART   APP VERSION</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># (2) ä½¿ç”¨ç§»é™¤æ‰€æœ‰ä¸æŒ‡å®š Release ç›¸å…³çš„Kubernetes èµ„æºä½†æ˜¯åŒ…æ‰€æœ‰è¿™ä¸ª Release çš„è®°å½• </span></span><br><span class="line">$  helm uninstall chart-1606308995 --keep-history</span><br><span class="line">  <span class="comment"># release "chart-1606308995" uninstalled</span></span><br><span class="line">~/K8s/Day10/demo1$ helm ls  <span class="comment"># è¾“å‡ºä¸ºç©º</span></span><br><span class="line">~/K8s/Day10/demo1$ helm ls --uninstalled   <span class="comment"># åˆ é™¤çš„ç›¸å…³è®°å½•</span></span><br><span class="line">  <span class="comment"># NAME                    NAMESPACE       REVISION        UPDATED                                 STATUS          CHART                   APP VERSION</span></span><br><span class="line">  <span class="comment"># chart-1606308995        default         4               2020-11-25 21:10:24.483012734 +0800 CST uninstalled     hello-world-1.0.0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># (3) å†æ¬¡æ‰§è¡Œå°†å½»åº•åˆ é™¤å›¾è¡¨chart-1606308995ç›¸å…³çš„å®¹å™¨</span></span><br><span class="line">~/K8s/Day10/demo1$ helm uninstall chart-1606308995</span><br><span class="line">  <span class="comment"># release "chart-1606308995" uninstalled</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Step 9.å½“æµ‹è¯•æ— è¯¯æ—¶å€™æˆ‘ä»¬å¯ä»¥å°†å…¶æ‰“åŒ…ä¸Šä¼ åˆ°æœ¬åœ°æˆ–è€…è¿œç¨‹çš„åº”ç”¨ä»“åº“ä¸­(<code>å¦‚ä½•æ­å»ºæœ¬åœ°Chartä»“åº“åœ¨åé¢è¿›è¡Œè®²è§£</code>)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">~/K8s/Day10/demo1$ helm package .</span><br><span class="line">  <span class="comment"># Successfully packaged chart and saved it to: /home/weiyigeek/K8s/Day10/demo1/hello-world-1.0.0.tgz</span></span><br><span class="line">~/K8s/Day10/demo1$ ls -alh /home/weiyigeek/K8s/Day10/demo1/hello-world-1.0.0.tgz</span><br><span class="line">  <span class="comment"># -rw-r--r-- 1 weiyigeek weiyigeek 726 Nov 26 11:13 /home/weiyigeek/K8s/Day10/demo1/hello-world-1.0.0.tgz</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h3 id="2-Redis-Chart-æ¨¡æ¿"><a href="#2-Redis-Chart-æ¨¡æ¿" class="headerlink" title="2.Redis - Chart æ¨¡æ¿"></a>2.Redis - Chart æ¨¡æ¿</h3><p>æè¿°: ä¸‹é¢æˆ‘ä»¬å°è¯•ä½¿ç”¨Helmæ¥ä»ç¬¬ä¸‰æ–¹Chartä»“åº“æ‹‰å–Redisçš„å›¾è¡¨è¿›è¡Œéƒ¨ç½²ï¼Œå¯ä»¥è®©è¯»è€…äº†è§£åˆ°ä½¿ç”¨Helmå¥¥ç§˜;</p>
<p><strong>æ“ä½œæµç¨‹ä¸æ­¥éª¤</strong></p>
<ul>
<li><p>Step 1.åœ¨ç¬¬ä¸‰æ–¹Chartä»“åº“ä¸­æœç´¢Redisç›¸å…³åº”ç”¨</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">~/K8s/Day10/demo1$ helm search repo redis</span><br><span class="line">  <span class="comment"># NAME                                    CHART VERSION   APP VERSION     DESCRIPTION</span></span><br><span class="line">  <span class="comment"># aliyun/redis                            1.1.15          4.0.8           Open source, advanced key-value store. It is of...</span></span><br><span class="line">  <span class="comment"># aliyun/redis-ha                         2.0.1                           Highly available Redis cluster with multiple se...</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Step 2.æ‹‰å–åº”ç”¨ä¿®æ”¹å’Œå®‰è£…</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.æ‹‰å–åº”ç”¨</span></span><br><span class="line">~/K8s/Day10/demo2$ helm pull aliyun/redis</span><br><span class="line">~/K8s/Day10/demo2$ ls</span><br><span class="line"><span class="comment"># redis-1.1.15.tgz</span></span><br><span class="line">~/K8s/Day10/demo2$ tar -zxvf redis-1.1.15.tgz  <span class="comment"># è§£å‹å¯æŸ¥çœ‹</span></span><br><span class="line">  <span class="comment"># redis/Chart.yaml</span></span><br><span class="line">  <span class="comment"># redis/values.yaml</span></span><br><span class="line">  <span class="comment"># redis/templates/NOTES.txt</span></span><br><span class="line">  <span class="comment"># redis/templates/_helpers.tpl</span></span><br><span class="line">  <span class="comment"># redis/templates/deployment.yaml</span></span><br><span class="line">  <span class="comment"># redis/templates/networkpolicy.yaml</span></span><br><span class="line">  <span class="comment"># redis/templates/pvc.yaml</span></span><br><span class="line">  <span class="comment"># redis/templates/secrets.yaml</span></span><br><span class="line">  <span class="comment"># redis/templates/svc.yaml</span></span><br><span class="line">  <span class="comment"># redis/.helmignore</span></span><br><span class="line">  <span class="comment"># redis/README.md</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.ä¿®æ”¹redis/values.yamlå˜é‡ (æˆ‘ä¸»è¦åˆ—ä¸¾å‡ºä¿®æ”¹çš„å¯¹è±¡)</span></span><br><span class="line">serviceType: NodePort</span><br><span class="line">redisPassword: weiyigeek</span><br><span class="line">  path: /bitnami <span class="comment"># Pod ä¸­çš„æŒ‚è½½ç›®å½• å‘</span></span><br><span class="line">  storageClass: <span class="string">"nfs"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.ä¿®æ”¹deploymentçš„api-versions</span></span><br><span class="line">apiVersion: apps/v1  <span class="comment"># æ³¨æ„ç‚¹</span></span><br><span class="line">kind: Deployment</span><br><span class="line">spec:</span><br><span class="line">  selector:</span><br><span class="line">    matchLabels:</span><br><span class="line">      app: &#123;&#123; template <span class="string">"redis.fullname"</span> . &#125;&#125; <span class="comment"># æ³¨æ„ç‚¹å¿…é¡»æœ‰åŒ¹é…çš„Podæ ‡ç­¾</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.æ”¯æŒå¤šç§å®‰è£…æ–¹å¼ï¼š(helmé»˜è®¤è¯»å–~/.kube/configä¿¡æ¯è¿æ¥k8sé›†ç¾¤)</span></span><br><span class="line"><span class="comment"># $ helm install redis stable/redis	</span></span><br><span class="line"><span class="comment"># $ helm install redis redis-4.4.0.tgz</span></span><br><span class="line"><span class="comment"># $ helm install redis redis/</span></span><br><span class="line"><span class="comment"># $ helm install redis https://example.com/charts/redis-4.4.0.tgz</span></span><br><span class="line">~/K8s/Day10/demo2$ helm install redis redis/</span><br><span class="line">  <span class="comment"># NAME: redis</span></span><br><span class="line">  <span class="comment"># LAST DEPLOYED: Wed Nov 25 21:55:53 2020</span></span><br><span class="line">  <span class="comment"># NAMESPACE: default</span></span><br><span class="line">  <span class="comment"># STATUS: deployed</span></span><br><span class="line">  <span class="comment"># REVISION: 1</span></span><br><span class="line">  <span class="comment"># TEST SUITE: None</span></span><br><span class="line">  <span class="comment"># NOTES:</span></span><br><span class="line">  <span class="comment"># Redis can be accessed via port 6379 on the following DNS name from within your cluster:</span></span><br><span class="line">  <span class="comment"># redis-redis.default.svc.cluster.local</span></span><br><span class="line">  <span class="comment"># To get your password run:</span></span><br><span class="line">  <span class="comment">#     REDIS_PASSWORD=$(kubectl get secret --namespace default redis-redis -o jsonpath="&#123;.data.redis-password&#125;" | base64 --decode) # å®é™…å°±æ˜¯ä¸Šé¢è®¾ç½®rediså¯†ç weiyigeekå°†å®ƒå­˜å…¥äº†secretä¸­</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># To connect to your Redis server:</span></span><br><span class="line">  <span class="comment"># 1. Run a Redis pod that you can use as a client:</span></span><br><span class="line">  <span class="comment">#    kubectl run --namespace default redis-redis-client --rm --tty -i \</span></span><br><span class="line">  <span class="comment">#     --env REDIS_PASSWORD=$REDIS_PASSWORD \</span></span><br><span class="line">  <span class="comment">#    --image bitnami/redis:4.0.8-r2 -- bash</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 2. Connect using the Redis CLI:</span></span><br><span class="line">  <span class="comment">#   redis-cli -h redis-redis -a $REDIS_PASSWORD</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Step 3.æŸ¥çœ‹åˆ›å»ºPVå·åˆ©ç”¨nfs(å¦‚ä½•ä½¿ç”¨çœ‹æˆ‘å‰é¢æ‰€å†™çš„K8Så­˜å‚¨æ–‡ç« ä»¥åŠå‚è€ƒK8Så®˜ç½‘)<br>ref: <a href="http://kubernetes.io/docs/user-guide/persistent-volumes/" target="_blank" rel="noopener">http://kubernetes.io/docs/user-guide/persistent-volumes/</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># (1) åˆ›å»º PV</span></span><br><span class="line">cat &gt;  pv.yaml &lt;&lt;<span class="string">'EOF'</span></span><br><span class="line"><span class="comment"># 1.è®¿é—®æ¨¡å¼ä¸º ReadWriteOnce - pv-test-2</span></span><br><span class="line">apiVersion: v1 </span><br><span class="line">kind: PersistentVolume </span><br><span class="line">metadata:</span><br><span class="line">  name: pv-test-2</span><br><span class="line">spec:</span><br><span class="line">  capacity:            <span class="comment">#å®¹é‡</span></span><br><span class="line">    storage: 1Gi </span><br><span class="line">  accessModes:</span><br><span class="line">    - ReadWriteOnce </span><br><span class="line">  persistentVolumeReclaimPolicy: Retain</span><br><span class="line">  storageClassName: nfs  <span class="comment"># éå¸¸é‡è¦ (åé¢PVCå°†ä¼šæ ¹æ®è®¿é—®æ¨¡å¼ä»¥åŠå­˜å‚¨ç±»åç§°è¿›è¡Œç»‘å®šPV)</span></span><br><span class="line">  nfs:</span><br><span class="line">   path: /nfs/data2</span><br><span class="line">   server: 10.10.107.202</span><br><span class="line">EOF</span><br><span class="line">~/K8s/Day10/demo2$ kubectl create -f pv.yaml</span><br><span class="line"></span><br><span class="line"><span class="comment"># (2) ä»¥ä¸‹å·²ç»æ˜¯Chartåº”ç”¨ç»‘å®šPVåçš„ç»“æœ</span></span><br><span class="line">~/K8s/Day10/demo2/redis$ kubectl get pv -o wide</span><br><span class="line">  <span class="comment"># NAME        CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS      CLAIM                 STORAGECLASS   REASON   AGE     VOLUMEMODE</span></span><br><span class="line">  <span class="comment"># pv-test-1   1Gi        RWO            Retain           Available                         nfs                     6d20h   Filesystem</span></span><br><span class="line">  <span class="comment"># pv-test-2   1Gi        RWO            Retain           Bound       default/redis-redis   nfs                     6d20h   Filesystem</span></span><br><span class="line"></span><br><span class="line">~/K8s/Day10/demo2/redis$ kubectl describe pv pv-test-2</span><br><span class="line">  <span class="comment"># Name:            pv-test-2</span></span><br><span class="line">  <span class="comment"># Labels:          &lt;none&gt;</span></span><br><span class="line">  <span class="comment"># Annotations:     pv.kubernetes.io/bound-by-controller: yes</span></span><br><span class="line">  <span class="comment"># Finalizers:      [kubernetes.io/pv-protection]</span></span><br><span class="line">  <span class="comment"># StorageClass:    nfs</span></span><br><span class="line">  <span class="comment"># Status:          Bound</span></span><br><span class="line">  <span class="comment"># Claim:           default/redis-redis</span></span><br><span class="line">  <span class="comment"># Reclaim Policy:  Retain</span></span><br><span class="line">  <span class="comment"># Access Modes:    RWO</span></span><br><span class="line">  <span class="comment"># VolumeMode:      Filesystem</span></span><br><span class="line">  <span class="comment"># Capacity:        1Gi</span></span><br><span class="line">  <span class="comment"># Node Affinity:   &lt;none&gt;</span></span><br><span class="line">  <span class="comment"># Message:</span></span><br><span class="line">  <span class="comment"># Source:</span></span><br><span class="line">  <span class="comment">#     Type:      NFS (an NFS mount that lasts the lifetime of a pod)</span></span><br><span class="line">  <span class="comment">#     Server:    10.10.107.202</span></span><br><span class="line">  <span class="comment">#     Path:      /nfs/data2</span></span><br><span class="line">  <span class="comment">#     ReadOnly:  false</span></span><br><span class="line">  <span class="comment"># Events:        &lt;none&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># (3) NFSç›®å½•ä¸­çš„æŒä¹…åŒ–ç›®å½•</span></span><br><span class="line">~/K8s/Day10/demo2/redis$ tree /nfs/data2/redis/</span><br><span class="line">  <span class="comment"># /nfs/data2/redis/</span></span><br><span class="line">  <span class="comment"># â”œâ”€â”€ conf</span></span><br><span class="line">  <span class="comment"># â”‚Â Â  â””â”€â”€ redis.conf</span></span><br><span class="line">  <span class="comment"># â””â”€â”€ data</span></span><br><span class="line">  <span class="comment">#     â””â”€â”€ appendonly.aof</span></span><br><span class="line">  <span class="comment"># 2 directories, 2 files</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Step 4.è¿æ¥å¹¶æµ‹è¯•redis</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># (1) Pod æŸ¥çœ‹</span></span><br><span class="line">~/K8s/Day10/demo2/redis$ kubectl get pod -o wide</span><br><span class="line">  <span class="comment"># NAME                           READY   STATUS    RESTARTS   AGE   IP            NODE         NOMINATED NODE   READINESS GATES</span></span><br><span class="line">  <span class="comment"># redis-redis-84db677d99-mb2m4   1/1     Running   0          11m   10.244.2.49   k8s-node-5   &lt;none&gt;           &lt;none&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># (2) è¿›å…¥Podçš„Shellä¹‹ä¸­</span></span><br><span class="line">$ kubectl <span class="built_in">exec</span> -it redis-redis-84db677d99-mb2m4 -- bash</span><br><span class="line">I have no name!@redis-redis-84db677d99-mb2m4:/$ cat /bitnami/redis/conf/redis.conf | grep <span class="string">"weiyi"</span></span><br><span class="line">  <span class="comment"># requirepass weiyigeek</span></span><br><span class="line">I have no name!@redis-redis-84db677d99-mb2m4:/$ ls</span><br><span class="line">  <span class="comment"># app-entrypoint.sh  bin  bitnami  boot  dev  entrypoint.sh  etc  home  init.sh  lib  lib64  media  mnt  opt  proc  redis-inputs.json  root  run  run.sh  sbin  srv  sys  tmp  usr  var</span></span><br><span class="line">I have no name!@redis-redis-84db677d99-mb2m4:/$ ls /bitnami/</span><br><span class="line">  <span class="comment"># redis</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># (3) è¿æ¥æµ‹è¯•Redis</span></span><br><span class="line">REDIS_PASSWORD=$(kubectl get secret --namespace default redis-redis -o jsonpath=<span class="string">"&#123;.data.redis-password&#125;"</span> | base64 --decode)</span><br><span class="line">~/K8s/Day10/demo2$ redis-cli -h 10.244.2.49  -a <span class="variable">$REDIS_PASSWORD</span></span><br><span class="line">10.244.2.47:6379&gt; ping</span><br><span class="line">PONG</span><br><span class="line">10.244.2.47:6379&gt; info</span><br><span class="line"><span class="comment"># Server</span></span><br><span class="line">redis_version:4.0.8</span><br><span class="line">......</span><br><span class="line">10.244.2.47:6379&gt; <span class="built_in">set</span> name weiyigeek</span><br><span class="line">OK</span><br><span class="line">10.244.2.47:6379&gt; KEYS *</span><br><span class="line">1) <span class="string">"name"</span></span><br><span class="line">10.244.2.47:6379&gt; GET name</span><br><span class="line"><span class="string">"weiyigeek"</span></span><br><span class="line">10.244.2.47:6379&gt; save   <span class="comment"># å°† æ•°æ® å­˜å‚¨è¿›Redis æ–‡ä»¶ dump.rdb ä»¥ä¾¿åç»­é‡å¯redisåæ•°æ®ä¾ç„¶å­˜åœ¨;</span></span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line"><span class="comment"># (4) æŸ¥çœ‹å­˜æ”¾çš„dump.rdbæ–‡ä»¶</span></span><br><span class="line">~/K8s/Day10/demo2/redis$ ls /nfs/data2/redis/data/</span><br><span class="line">  <span class="comment"># appendonly.aof  dump.rdb</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Step 5.éªŒè¯æŒä¹…åŒ–æ“ä½œè®¾ç½®</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">~/K8s/Day10/demo2/redis/templates$ kubectl delete pod redis-redis-84db677d99-mb2m4</span><br><span class="line">  <span class="comment"># pod "redis-redis-84db677d99-mb2m4" deleted</span></span><br><span class="line"></span><br><span class="line">~/K8s/Day10/demo2/redis/templates$ kubectl get pod -o wide</span><br><span class="line">  <span class="comment"># redis-redis-84db677d99-5cjnk   1/1     Running   0          26s   10.244.2.50   k8s-node-5</span></span><br><span class="line"></span><br><span class="line">~/K8s/Day10/demo2/redis/templates$ redis-cli -h 10.244.2.50 -a <span class="variable">$REDIS_PASSWORD</span></span><br><span class="line">  <span class="comment"># 10.244.2.50:6379&gt; get name</span></span><br><span class="line">  <span class="comment"># "weiyigeek"</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h3 id="3-Library-Chart-ä»“åº“-Local-amp-Remote"><a href="#3-Library-Chart-ä»“åº“-Local-amp-Remote" class="headerlink" title="3.Library - Chart ä»“åº“(Local&amp;Remote)"></a>3.Library - Chart ä»“åº“(Local&amp;Remote)</h3><p>æè¿°: æˆ‘ä»¬åœ¨ä¸ºè‡ªå»ºçš„Chartå›¾è¡¨æ‰“åŒ…åˆ†äº«æ—¶å€™é™¤äº†å¯ä»¥ç›´æ¥pakeageæ‰“åŒ…åˆ†äº«å¤–ï¼Œæ›´å¤šçš„æ˜¯é‡‡ç”¨ç§æœ‰çš„Harboræˆ–è€…Helmå…¬å…±çš„Chartåº”ç”¨ä¸­å¿ƒè¿›è¡Œåˆ†äº«å’Œä¸‹è½½;</p>
<p>Q: ä»€ä¹ˆæ˜¯ Chart ä»“åº“?</p>
<blockquote>
<p>ç­”: Chart ä»“åº“æ˜¯ä¸€ä¸ªå¯ç”¨æ¥<code>å­˜å‚¨ index.yml ä¸ æ‰“åŒ…çš„  chart tgzæ–‡ä»¶</code>çš„ HTTP Server, å½“éœ€è¦åˆ†äº«Chartæ—¶å€™éœ€è¦ä¸Šä¼ Chartç›¸å…³æ–‡ä»¶åˆ°ä»“åº“ä¹‹ä¸­æä¾›ä¸‹è½½;</p>
</blockquote>
<ul>
<li>PS : å…¶å®ä»»ä½•ä¸€ä¸ªèƒ½å¤Ÿæä¾›YAMLä¸taræ–‡ä»¶çš„ HTTP Server éƒ½å¯ä»¥å½“ä½œChatä»“åº“;</li>
<li>PS : åœ¨ ~/.helmä¸­çš„index.yamlè®°å½•äº†chartä»“åº“ä¸­å…¨éƒ¨çš„chartçš„ç´¢å¼•ä¾‹å¦‚åç§°ã€URLã€ç‰ˆæœ¬ç­‰ä¸€äº›å…ƒæ•°æ®ä¿¡æ¯;</li>
</ul>
<p>ä¸‹é¢æˆ‘ä»¬è®²è§£ Chart ä»“åº“æ­å»ºçš„ä¸¤ç§æ–¹å¼åŠå…¶ä½¿ç”¨;</p>
<ul>
<li>1)Harbor (PSéœ€è¦å®‰è£…chartmuseum)</li>
<li>2)Helm å®˜æ–¹: <a href="https://artifacthub.io/" target="_blank" rel="noopener">https://artifacthub.io/</a> + <a href="https://github.com/artifacthub/" target="_blank" rel="noopener">https://github.com/artifacthub/</a></li>
<li>3)Helm æœ¬åœ°ä»“åº“</li>
<li>4)Github Page</li>
<li>5)Google Cloud Storafe(GCS) bucket</li>
</ul>
<p><br></p>
<p><strong>(1) Harbor æ­å»ºChart ä»“åº“</strong><br>æ“ä½œæµç¨‹:</p>
<ul>
<li><p>Step 1.åœ¨ç°æœ‰çš„HarboræœåŠ¡å™¨ä¸Šè¿›è¡Œå®‰è£…chartmuseumæ”¯æŒï¼Œåœ¨å¯ç”¨åé»˜è®¤åˆ›å»ºçš„é¡¹ç›®å°±å¸¦æœ‰helm chartsåŠŸèƒ½äº†ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">~/harbor$ ls</span><br><span class="line">  <span class="comment"># common     docker-compose.yml  harbor.v2.1.1.tar.gz  harbor.yml.tmpl  LICENSE  server.crt  server.key</span></span><br><span class="line">  <span class="comment"># common.sh  harbor_install.log  harbor.yml            install.sh       prepare  server.csr  server.key.org</span></span><br><span class="line">~/harbor$ sudo docker-compose ps</span><br><span class="line">~/harbor$ sudo ./install.sh --with-chartmuseum</span><br><span class="line">  <span class="comment"># âœ” ----Harbor has been installed and started successfully.----  # è¡¨ç¤ºå®‰è£…æˆåŠŸ</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Step 2.åœ¨Helmå®‰è£…èŠ‚ç‚¹ä¸Šå®‰è£…pushæ’ä»¶(å¦‚æœå®‰è£…æ—¶å€™å·²ç»å¸¦æœ‰pushæ’ä»¶ä¾¿å¯ä»¥ä¸ç”¨å®‰è£…äº†)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># (1) åœ¨çº¿å®‰è£…</span></span><br><span class="line">~$ helm plugin install https://github.com/chartmuseum/helm-push</span><br><span class="line">Downloading and installing helm-push v0.9.0 ...</span><br><span class="line">https://github.com/chartmuseum/helm-push/releases/download/v0.9.0/helm-push_0.9.0_linux_amd64.tar.gz</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># (2) ç¦»çº¿å®‰è£…</span></span><br><span class="line">~/software$ tar -zxvf helm-push_0.9.0_linux_amd64.tar.gz -C ./helm-push</span><br><span class="line"><span class="comment"># LICENSE</span></span><br><span class="line"><span class="comment"># plugin.yaml</span></span><br><span class="line"><span class="comment"># bin/helmpush</span></span><br><span class="line">~/software$ ls ./helm-push</span><br><span class="line"><span class="comment"># bin  LICENSE  plugin.yaml</span></span><br><span class="line">~/software/helm-push$ cp bin/helmpush /home/weiyigeek/.<span class="built_in">local</span>/share/helm/plugins/helm-push/bin/helmpush</span><br><span class="line"><span class="comment"># ~/software$ helm plugin install ./helm-push</span></span><br><span class="line"><span class="comment"># Error: plugin already exists</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Step 3.ç§æœ‰çš„Harborçš„Chartä»“åº“æ·»åŠ åŠå…¶ä¸Šä¼ Chartå›¾è¡¨åˆ°åº“ä¸­</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># (1) æ·»åŠ harborçš„chartrepo URLåˆ°Helmæœ¬åœ°ä»“åº“ä¸­</span></span><br><span class="line">~/K8s/Day10/demo1$ helm repo add <span class="built_in">local</span> https://harbor.weiyigeek.top/chartrepo/<span class="built_in">test</span>  --insecure-skip-tls-verify</span><br><span class="line"><span class="string">"local"</span> has been added to your repositories</span><br><span class="line"></span><br><span class="line"><span class="comment"># (2) index ç”Ÿæˆä»¥åŠå°†push å›¾è¡¨ åˆ°åº“ä¸­</span></span><br><span class="line">~/K8s/Day10/demo1$ helm repo index . --url https://harbor.weiyigeek.top/chartrepo/<span class="built_in">test</span></span><br><span class="line">~/K8s/Day10/demo1$ helm push --insecure -u weiyigeek -p Harbor12345 hello-world-1.0.0.tgz <span class="built_in">local</span></span><br><span class="line"><span class="comment"># Pushing hello-world-1.0.0.tgz to local...</span></span><br><span class="line"><span class="comment"># Done.</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<figure class="image-box">
                <a rel=HelmåŒ…ç®¡ç†å·¥å…·å…¥é—¨å­¦ä¹ åŠä½¿ç”¨ href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/2/20201126134008.png" target="_blank" title="WeiyiGeek.Chartä¸Šä¼ Harbor" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/2/20201126134008.png" alt="WeiyiGeek.Chartä¸Šä¼ Harbor" title="" class=""></a>
                <p>WeiyiGeek.Chartä¸Šä¼ Harbor</p>
            </figure>
<p>æ¸©é¦¨æç¤º: è¦æƒ³Harboræ”¯æŒChartä»“åº“æœåŠ¡, æˆ‘ä»¬éœ€è¦åœ¨å®‰è£…æ—¶æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤<code>./install.sh --with-chartmuseum</code>.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># add ä¼ä¸šå†…éƒ¨ç§æœ‰ harbor repo</span></span><br><span class="line">helm repo add --username admin --password 123456 harbor https://harbor.weiyigeek.top/chartrepo/library</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£… helm-push æ’ä»¶</span></span><br><span class="line">helm plugin install https://github.com/chartmuseum/helm-push</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¨é€ chart åˆ°ä»“åº“</span></span><br><span class="line">helm cm-push mysql harbor</span><br></pre></td></tr></table></figure></p>
<ul>
<li><p>Step 4.ä¸‹è½½å’Œæœç´¢ç§æœ‰çš„Chartåº”ç”¨</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># (1) ä»“åº“æ›´æ–°</span></span><br><span class="line">$ helm repo update</span><br><span class="line">Hang tight <span class="keyword">while</span> we grab the latest from your chart repositories...</span><br><span class="line">...Successfully got an update from the <span class="string">"local"</span> chart repository</span><br><span class="line">...Successfully got an update from the <span class="string">"aliyun"</span> chart repository</span><br><span class="line">...Successfully got an update from the <span class="string">"stable"</span> chart repository</span><br><span class="line">Update Complete. âˆHappy Helming!âˆ</span><br><span class="line"></span><br><span class="line"><span class="comment"># (2) æœç´¢æˆ‘ä»¬ä¸Šä¼ çš„Chartåº”ç”¨</span></span><br><span class="line">~/K8s/Day10$ helm search repo hello-world</span><br><span class="line">NAME                    CHART VERSION   APP VERSION     DESCRIPTION</span><br><span class="line"><span class="built_in">local</span>/hello-world       1.0.0           latest          A Helm chart <span class="keyword">for</span> Kubernetes Hello Wrold</span><br><span class="line"></span><br><span class="line"><span class="comment"># (3) æŒ‰ç…§Chartåº”ç”¨ </span></span><br><span class="line">~/K8s/Day10$ helm install hello-world <span class="built_in">local</span>/hello-world --insecure-skip-tls-verify</span><br><span class="line">  <span class="comment"># NAME: hello-world</span></span><br><span class="line">  <span class="comment"># LAST DEPLOYED: Thu Nov 26 13:48:13 2020</span></span><br><span class="line">  <span class="comment"># NAMESPACE: default</span></span><br><span class="line">  <span class="comment"># STATUS: deployed</span></span><br><span class="line">  <span class="comment"># REVISION: 1</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Step 5.éªŒè¯å®‰è£…çš„Chartåº”ç”¨</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># (1) æŸ¥çœ‹release</span></span><br><span class="line">~/K8s/Day10/demo3$ helm ls</span><br><span class="line">NAME            NAMESPACE       REVISION        UPDATED                                 STATUS          CHART                   APP VERSION</span><br><span class="line">hello-world     default         1               2020-11-26 13:48:13.358015764 +0800 CST deployed        hello-world-1.0.0       latest</span><br><span class="line"></span><br><span class="line"><span class="comment"># (2) æŸ¥è¯¢ Pod </span></span><br><span class="line">~/K8s/Day10/demo3$ kubectl get pod -o wide</span><br><span class="line">hello-world-deployment-588f974b64-8wfdj   1/1     Running   0          87s     10.244.2.51   k8s-node-5</span><br><span class="line"></span><br><span class="line"><span class="comment"># (3) è®¿é—®Podæä¾›çš„æœåŠ¡é¡µé¢ </span></span><br><span class="line">~/K8s/Day10/demo3$ curl http://10.244.2.51/host.html</span><br><span class="line">  <span class="comment"># Hostname: hello-world-deployment-588f974b64-8wfdj  &lt;br&gt;</span></span><br><span class="line">  <span class="comment"># Image Version: &lt;u&gt; 1.0 &lt;/u&gt;</span></span><br><span class="line">  <span class="comment"># Nginx Version: 1.19.4</span></span><br><span class="line">~/K8s/Day10/demo3$ curl http://10.10.107.202:30080/host.html</span><br><span class="line">  <span class="comment"># Hostname: hello-world-deployment-588f974b64-8wfdj  &lt;br&gt;</span></span><br><span class="line">  <span class="comment"># Image Version: &lt;u&gt; 1.0 &lt;/u&gt;</span></span><br><span class="line">  <span class="comment"># Nginx Version: 1.19.4</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><br></p>
<p><strong>(2) æœ¬åœ°Chartä»“åº“</strong></p>
<p>PS : 3.Xçš„ç‰ˆæœ¬å·²ä¸å†æ”¯æŒ<code>helm server -address 0.0.0.0:8879 -repo-path ./charts</code>å»ºç«‹æœ¬åœ°Chartä»“åº“;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/.helm/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># PS : å»ºè®®ä½¿ç”¨åŸŸåæ¥ç»‘å®šæœ¬åœ°ä»“åº“æ‰€åœ¨çš„æœºå™¨ IP ä¾‹å¦‚helm.weiyigeek.top</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†æœ¬åœ°Chartä»“åº“URLä¿¡æ¯ç­‰Metadataä¿¡æ¯ è®°å½•åœ¨index.yamlæ–‡ä»¶ä¸­</span></span><br><span class="line">helm package mychart/</span><br><span class="line"></span><br><span class="line">mv mychart-1.0.tgz <span class="built_in">test</span>-mychart/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># é€šè¿‡helm repo add æ·»åŠ ä»“åº“</span></span><br><span class="line">helm repo add localcharts http://helm.weiyigeek.top:8879/charts</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥æ‰¾ä¸Šä¼ çš„chart</span></span><br><span class="line">helm search repo mychart</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="0x03-Helm-å‘½ä»¤"><a href="#0x03-Helm-å‘½ä»¤" class="headerlink" title="0x03 Helm å‘½ä»¤"></a>0x03 Helm å‘½ä»¤</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line">$ helm --<span class="built_in">help</span></span><br><span class="line">The Kubernetes package manager</span><br><span class="line"></span><br><span class="line">Common actions <span class="keyword">for</span> Helm:</span><br><span class="line"></span><br><span class="line">- helm search:    search <span class="keyword">for</span> charts</span><br><span class="line">- helm pull:      download a chart to your <span class="built_in">local</span> directory to view</span><br><span class="line">- helm install:   upload the chart to Kubernetes</span><br><span class="line">- helm list:      list releases of charts</span><br><span class="line"></span><br><span class="line">Environment variables:</span><br><span class="line"></span><br><span class="line">| Name                               | Description                                                                       |</span><br><span class="line">|------------------------------------|-----------------------------------------------------------------------------------|</span><br><span class="line">| <span class="variable">$HELM_CACHE_HOME</span>                   | <span class="built_in">set</span> an alternative location <span class="keyword">for</span> storing cached files.                             |</span><br><span class="line">| <span class="variable">$HELM_CONFIG_HOME</span>                  | <span class="built_in">set</span> an alternative location <span class="keyword">for</span> storing Helm configuration.                       |</span><br><span class="line">| <span class="variable">$HELM_DATA_HOME</span>                    | <span class="built_in">set</span> an alternative location <span class="keyword">for</span> storing Helm data.                                |</span><br><span class="line">| <span class="variable">$HELM_DEBUG</span>                        | indicate whether or not Helm is running <span class="keyword">in</span> Debug mode                             |</span><br><span class="line">| <span class="variable">$HELM_DRIVER</span>                       | <span class="built_in">set</span> the backend storage driver. Values are: configmap, secret, memory, postgres   |</span><br><span class="line">| <span class="variable">$HELM_DRIVER_SQL_CONNECTION_STRING</span> | <span class="built_in">set</span> the connection string the SQL storage driver should use.                      |</span><br><span class="line">| <span class="variable">$HELM_MAX_HISTORY</span>                  | <span class="built_in">set</span> the maximum number of helm release <span class="built_in">history</span>.                                   |</span><br><span class="line">| <span class="variable">$HELM_NAMESPACE</span>                    | <span class="built_in">set</span> the namespace used <span class="keyword">for</span> the helm operations.                                   |</span><br><span class="line">| <span class="variable">$HELM_NO_PLUGINS</span>                   | <span class="built_in">disable</span> plugins. Set HELM_NO_PLUGINS=1 to <span class="built_in">disable</span> plugins.                        |</span><br><span class="line">| <span class="variable">$HELM_PLUGINS</span>                      | <span class="built_in">set</span> the path to the plugins directory                                             |</span><br><span class="line">| <span class="variable">$HELM_REGISTRY_CONFIG</span>              | <span class="built_in">set</span> the path to the registry config file.                                         |</span><br><span class="line">| <span class="variable">$HELM_REPOSITORY_CACHE</span>             | <span class="built_in">set</span> the path to the repository cache directory                                    |</span><br><span class="line">| <span class="variable">$HELM_REPOSITORY_CONFIG</span>            | <span class="built_in">set</span> the path to the repositories file.                                            |</span><br><span class="line">| <span class="variable">$KUBECONFIG</span>                        | <span class="built_in">set</span> an alternative Kubernetes configuration file (default <span class="string">"~/.kube/config"</span>)       |</span><br><span class="line">| <span class="variable">$HELM_KUBEAPISERVER</span>                | <span class="built_in">set</span> the Kubernetes API Server Endpoint <span class="keyword">for</span> authentication                         |</span><br><span class="line">| <span class="variable">$HELM_KUBEASGROUPS</span>                 | <span class="built_in">set</span> the Groups to use <span class="keyword">for</span> impersonation using a comma-separated list.             |</span><br><span class="line">| <span class="variable">$HELM_KUBEASUSER</span>                   | <span class="built_in">set</span> the Username to impersonate <span class="keyword">for</span> the operation.                                |</span><br><span class="line">| <span class="variable">$HELM_KUBECONTEXT</span>                  | <span class="built_in">set</span> the name of the kubeconfig context.                                           |</span><br><span class="line">| <span class="variable">$HELM_KUBETOKEN</span>                    | <span class="built_in">set</span> the Bearer KubeToken used <span class="keyword">for</span> authentication.                                 |</span><br><span class="line"></span><br><span class="line">Helm stores cache, configuration, and data based on the following configuration order:</span><br><span class="line"></span><br><span class="line">- If a HELM_*_HOME environment variable is <span class="built_in">set</span>, it will be used</span><br><span class="line">- Otherwise, on systems supporting the XDG base directory specification, the XDG variables will be used</span><br><span class="line">- When no other location is <span class="built_in">set</span> a default location will be used based on the operating system</span><br><span class="line"></span><br><span class="line">By default, the default directories depend on the Operating System. The defaults are listed below:</span><br><span class="line"></span><br><span class="line">| Operating System | Cache Path                | Configuration Path             | Data Path               |</span><br><span class="line">|------------------|---------------------------|--------------------------------|-------------------------|</span><br><span class="line">| Linux            | <span class="variable">$HOME</span>/.cache/helm         | <span class="variable">$HOME</span>/.config/helm             | <span class="variable">$HOME</span>/.<span class="built_in">local</span>/share/helm |</span><br><span class="line">| macOS            | <span class="variable">$HOME</span>/Library/Caches/helm | <span class="variable">$HOME</span>/Library/Preferences/helm | <span class="variable">$HOME</span>/Library/helm      |</span><br><span class="line">| Windows          | %TEMP%\helm               | %APPDATA%\helm                 | %APPDATA%\helm          |</span><br><span class="line"></span><br><span class="line">Usage:</span><br><span class="line">  helm [<span class="built_in">command</span>]</span><br><span class="line"></span><br><span class="line">Available Commands:</span><br><span class="line">  completion  generate autocompletions script <span class="keyword">for</span> the specified shell</span><br><span class="line">  create      create a new chart with the given name</span><br><span class="line">  dependency  manage a chart\<span class="string">'s dependencies</span></span><br><span class="line"><span class="string">  env         helm client environment information</span></span><br><span class="line"><span class="string">  get         download extended information of a named release</span></span><br><span class="line"><span class="string">  help        Help about any command</span></span><br><span class="line"><span class="string">  history     fetch release history</span></span><br><span class="line"><span class="string">  install     install a chart</span></span><br><span class="line"><span class="string">  lint        examine a chart for possible issues</span></span><br><span class="line"><span class="string">  list        list releases</span></span><br><span class="line"><span class="string">  package     package a chart directory into a chart archive</span></span><br><span class="line"><span class="string">  plugin      install, list, or uninstall Helm plugins</span></span><br><span class="line"><span class="string">  pull        download a chart from a repository and (optionally) unpack it in local directory</span></span><br><span class="line"><span class="string">  repo        add, list, remove, update, and index chart repositories</span></span><br><span class="line"><span class="string">  rollback    roll back a release to a previous revision</span></span><br><span class="line"><span class="string">  search      search for a keyword in charts</span></span><br><span class="line"><span class="string">  show        show information of a chart</span></span><br><span class="line"><span class="string">  status      display the status of the named release</span></span><br><span class="line"><span class="string">  template    locally render templates</span></span><br><span class="line"><span class="string">  test        run tests for a release</span></span><br><span class="line"><span class="string">  uninstall   uninstall a release</span></span><br><span class="line"><span class="string">  upgrade     upgrade a release</span></span><br><span class="line"><span class="string">  verify      verify that a chart at the given path has been signed and is valid</span></span><br><span class="line"><span class="string">  version     print the client version information</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Flags:</span></span><br><span class="line"><span class="string">      --debug                       enable verbose output</span></span><br><span class="line"><span class="string">  -h, --help                        help for helm</span></span><br><span class="line"><span class="string">      --kube-apiserver string       the address and the port for the Kubernetes API server</span></span><br><span class="line"><span class="string">      --kube-as-group stringArray   Group to impersonate for the operation, this flag can be repeated to specify multiple groups.</span></span><br><span class="line"><span class="string">      --kube-as-user string         Username to impersonate for the operation</span></span><br><span class="line"><span class="string">      --kube-context string         name of the kubeconfig context to use</span></span><br><span class="line"><span class="string">      --kube-token string           bearer token used for authentication</span></span><br><span class="line"><span class="string">      --kubeconfig string           path to the kubeconfig file</span></span><br><span class="line"><span class="string">  -n, --namespace string            namespace scope for this request</span></span><br><span class="line"><span class="string">      --registry-config string      path to the registry config file (default "/home/weiyigeek/.config/helm/registry.json")</span></span><br><span class="line"><span class="string">      --repository-cache string     path to the file containing cached repository indexes (default "/home/weiyigeek/.cache/helm/repository")</span></span><br><span class="line"><span class="string">      --repository-config string    path to the file containing repository names and URLs (default "/home/weiyigeek/.config/helm/repositories.yaml")</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Use "helm [command] --help" for more information about a command.</span></span><br></pre></td></tr></table></figure>
<h2 id="0x04-æ¨¡æ¿ç¼–å†™"><a href="#0x04-æ¨¡æ¿ç¼–å†™" class="headerlink" title="0x04 æ¨¡æ¿ç¼–å†™"></a>0x04 æ¨¡æ¿ç¼–å†™</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">~/K8s/Day10/demo2$ cat redis/Chart.yaml</span><br><span class="line">appVersion: 4.0.8</span><br><span class="line">description: Open <span class="built_in">source</span>, advanced key-value store. It is often referred to as a data</span><br><span class="line">  structure server since keys can contain strings, hashes, lists, sets and sorted</span><br><span class="line">  sets.</span><br><span class="line">engine: gotpl</span><br><span class="line">home: http://redis.io/</span><br><span class="line">icon: https://bitnami.com/assets/stacks/redis/img/redis-stack-220x234.png</span><br><span class="line">keywords:</span><br><span class="line">- redis</span><br><span class="line">- keyvalue</span><br><span class="line">- database</span><br><span class="line">maintainers:</span><br><span class="line">- email: containers@bitnami.com</span><br><span class="line">  name: bitnami-bot</span><br><span class="line">name: redis</span><br><span class="line">sources:</span><br><span class="line">- https://github.com/bitnami/bitnami-docker-redis</span><br><span class="line">version: 1.1.15</span><br></pre></td></tr></table></figure>
<p><a href="http://www.coderdocument.com/docs/helm/v2/charts/chart_lifecycle_hooks.html" target="_blank" rel="noopener">http://www.coderdocument.com/docs/helm/v2/charts/chart_lifecycle_hooks.html</a></p>
<p>Helm ä½¿ç”¨æµç¨‹ç®€è¿°:</p>
<p>å¯¹å†å²ç‰ˆæœ¬è¿›è¡ŒDIFFå¯¹æ¯”çš„ä¸‰ç§æ–¹å¼:</p>
<ul>
<li><p>1.ä½¿ç”¨ sdiff </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.å…¨é‡ä½¿ç”¨ -s and -w flags ä»…æ˜¾ç¤ºå˜åŒ–çš„éƒ¨åˆ†</span></span><br><span class="line">sdiff &lt;(helm get <span class="variable">$release</span> --revision <span class="variable">$revision_1</span>) &lt;(helm get <span class="variable">$release</span> --revision <span class="variable">$revision_1</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>2.ä½¿ç”¨ vimdiff</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vimdiff &lt;(helm get <span class="variable">$release</span> --revision <span class="variable">$revision_1</span>) &lt;(helm get <span class="variable">$release</span> --revision <span class="variable">$revision_1</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>3.ä½¿ç”¨ helm diff </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">helm diff revision [flags] [release] REVISION1 REVISION2</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p> helm search hub distributed-jmeter -o yaml</p>
<ul>
<li>app_version: â€œ3.3â€<br>description: A Distributed JMeter Helm chart<br>repository:<br>  name: cloudnativeapp<br>  url: <a href="https://cloudnativeapp.github.io/charts/curated/" target="_blank" rel="noopener">https://cloudnativeapp.github.io/charts/curated/</a><br>url: <a href="https://artifacthub.io/packages/helm/cloudnativeapp/distributed-jmeter" target="_blank" rel="noopener">https://artifacthub.io/packages/helm/cloudnativeapp/distributed-jmeter</a><br>version: 1.0.1</li>
</ul>

        </div>
        <!-- Google å¹¿å‘Š -->
        
<ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-9134434519967436" data-ad-slot="7905848205"></ins>
  

        
<hr/>
<div style="text-align: center;font-weight: bold;">
  <p> æ¬¢è¿å„ä½å¿—åŒé“åˆçš„æœ‹å‹ä¸€èµ·å­¦ä¹ äº¤æµï¼Œå¦‚æ–‡ç« æœ‰è¯¯è¯·åœ¨ä¸‹æ–¹ç•™ä¸‹æ‚¨å®è´µçš„ç»éªŒçŸ¥è¯†ï¼Œä¸ªäººé‚®ç®±åœ°å€<b style="color:#ff654e"><code>ã€master#weiyigeek.topã€‘</code></b>æˆ–è€…ä¸ªäººå…¬ä¼—å·<b style="color:#ff654e"><code>ã€WeiyiGeekã€‘</code></b>è”ç³»æˆ‘ã€‚ </p>
  <p> æ›´å¤šæ–‡ç« æ¥æºäº<b style="color:#03a9f4">ã€WeiyiGeek Blog - ä¸ºäº†èƒ½åˆ°è¿œæ–¹ï¼Œè„šä¸‹çš„æ¯ä¸€æ­¥éƒ½ä¸èƒ½å°‘ã€‘</b>, ä¸ªäººé¦–é¡µåœ°å€( <a style="color: #03a9f4;" href="https://weiyigeek.top" target="_blank"> https://weiyigeek.top </a> )</p>
<!-- 

  <ul style="font-weight: bolder;">
    <li>
      <p><span style="color: #03a9f4">echo&nbsp;&nbsp;"ã€ç‚¹ä¸ªèµã€‘ï¼ŒåŠ¨åŠ¨ä½ é‚£ç²—å£®çš„æ‹‡æŒ‡æˆ–è€…èŠŠèŠŠç‰æ‰‹ï¼Œäº²ï¼"</span></p>
    </li>
    <li>
      <p><span style="color: #ff9201">printf("%s",&nbsp;"ã€æŠ•ä¸ªå¸ã€‘ï¼Œä¸‡æ°´åƒå±±æ€»æ˜¯æƒ…ï¼ŒæŠ•ä¸ªç¡¬å¸è¡Œä¸è¡Œï¼Œäº²ï¼")</span></p>
    </li>
    <li>
      <p><span style="color: #02a2ff">fmt.Printf("ã€æ”¶ä¸ªè—ã€‘ï¼Œé˜…åå³ç„šä¸åƒç°ï¼Œäº²ï¼")&nbsp;&nbsp;</span></p>
    </li>
    <li>
      <p><span style="color:red">console.info("ã€è½¬ä¸ªå‘ã€‘ï¼Œè®©æ›´å¤šçš„å¿—åŒé“åˆçš„æœ‹å‹ä¸€èµ·å­¦ä¹ äº¤æµï¼Œäº²ï¼")</span></p>
    </li>
    <li>
      <p><span style="color: #ff654e">System.out.println("ã€å…³ä¸ªæ³¨ã€‘ï¼Œåç»­æµè§ˆæŸ¥çœ‹ä¸è¿·è·¯å“Ÿï¼Œäº²ï¼")</span></p>
    </li>
  </ul> -->
  <div>
    <img src="/img/share-wechat.jpg" class="img-responsive" alt="æ‰«æFollow(å…³æ³¨)WeiyiGeekå…¬ä¼—å·ä¸Visit(æµè§ˆ)æå®¢å…¨æ ˆä¿®ç‚¼å°ç¨‹åº" >
    <p>ä¸“æ ä¹¦å†™ä¸æ˜“ï¼Œå¦‚æœæ‚¨è§‰å¾—è¿™ä¸ªä¸“æ è¿˜ä¸é”™çš„ï¼Œè¯·ç»™è¿™ç¯‡ä¸“æ  <b style="color: red;">ã€ç‚¹ä¸ªèµã€æŠ•ä¸ªå¸ã€æ”¶ä¸ªè—ã€å…³ä¸ªæ³¨ã€è½¬ä¸ªå‘ã€èµä¸ªåŠ©ã€‘</b>ï¼Œè¿™å°†å¯¹æˆ‘çš„è‚¯å®šï¼Œæˆ‘å°†æŒç»­æ•´ç†å‘å¸ƒæ›´å¤šä¼˜è´¨åŸåˆ›æ–‡ç« ï¼ã€‚</p>
    <img src="/img/weiyigeek.jpg" class="img-responsive" alt="WeiyiGeek-banner">
  </div>
</div>
  <hr>
  

  <blockquote class="post-copyright">
    <div class="content">
      
        
<span class="post-time">
    æœ€åæ›´æ–°æ—¶é—´ï¼š<time datetime="2022-07-14T06:18:45.613Z" itemprop="dateUpdated">2022-07-14 14:18:45</time>
</span><br>


        <span>æ–‡ç« åŸå§‹è·¯å¾„ï¼š<a href="https://github.com/WeiyiGeek/blog/edit/master/source/_posts/è™šæ‹Ÿäº‘å®¹/äº‘å®¹å™¨/Kubernetes/éƒ¨ç½²ç»„ä»¶/HelmåŒ…ç®¡ç†å·¥å…·å…¥é—¨å­¦ä¹ åŠä½¿ç”¨.md" target="_blank" rel="noopener noreferrer">_posts/è™šæ‹Ÿäº‘å®¹/äº‘å®¹å™¨/Kubernetes/éƒ¨ç½²ç»„ä»¶/HelmåŒ…ç®¡ç†å·¥å…·å…¥é—¨å­¦ä¹ åŠä½¿ç”¨.md</a></span><br>
         <span class="copy-copyright">è½¬è½½æ³¨æ˜å‡ºå¤„ï¼ŒåŸæ–‡åœ°å€ï¼š<a href="/2021/6-10-617.html" target="_blank" rel="external">https://blog.weiyigeek.top/2021/6-10-617.html</a></span><br>æœ¬ç«™æ–‡ç« å†…å®¹éµå¾ª <a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">çŸ¥è¯†å…±äº« ç½²å - éå•†ä¸šæ€§ - ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…åè®®</a> 
    </div>
    <footer>
      <a href="https://blog.weiyigeek.top">
        <img src="/img/avatar.jpg" alt="WeiyiGeek">
        WeiyiGeek
      </a>
    </footer>
  </blockquote>


        
            <div class="page-reward">
  <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-rectangle waves-light">â˜•ï¸ è¯·ä½œè€…å–æ¯å’–å•¡!</a>
</div>
            
        
        <div class="post-footer">
            
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Helm/" rel="tag">Helm</a></li></ul>

            <div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://blog.weiyigeek.top/2021/6-10-617.html&title=ã€ŠHelmåŒ…ç®¡ç†å·¥å…·å…¥é—¨å­¦ä¹ åŠä½¿ç”¨ã€‹ â€” WeiyiGeek Blog&pic=https://blog.weiyigeek.top/img/avatar.jpg" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.weiyigeek.top/2021/6-10-617.html&title=ã€ŠHelmåŒ…ç®¡ç†å·¥å…·å…¥é—¨å­¦ä¹ åŠä½¿ç”¨ã€‹ â€” WeiyiGeek Blog&source=[TOC]" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.weiyigeek.top/2021/6-10-617.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€ŠHelmåŒ…ç®¡ç†å·¥å…·å…¥é—¨å­¦ä¹ åŠä½¿ç”¨ã€‹ â€” WeiyiGeek Blog&url=https://blog.weiyigeek.top/2021/6-10-617.html&via=https://blog.weiyigeek.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://blog.weiyigeek.top/2021/6-10-617.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>

        </div>
        
          <!-- è¯„è®ºç»„ä»¶ -->


<div id="gitalk-container"></div>
<script type="text/javascript" src="/js/plugins/gitalk.min.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/custom/gitalk.init.js?v=1.6.6"></script>
        
    </div>
    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="prev">
      <a href="/2021/6-17-563.html" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">KVMå­¦ä¹ æ”¶é›†1</h4>
      </a>
    </div>
  

  
    <div class="next">
      <a href="/2021/5-26-559.html" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">WindowsæœåŠ¡å™¨æ ¸å¿ƒ(Server-Core)å®‰è£…ä¸åŸºç¡€é…ç½®ä½¿ç”¨</h4>
      </a>
    </div>
  
</nav>


    
    
        <aside class="post-widget">
            <nav class="post-toc-wrap" id="post-toc">
                <strong>ç›®å½•</strong>
                <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#0x00-å‰è¨€ç®€è¿°"><span class="post-toc-number">1.</span> <span class="post-toc-text">0x00 å‰è¨€ç®€è¿°</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-èƒŒæ™¯ä»‹ç»"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">1.èƒŒæ™¯ä»‹ç»</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-åŸºç¡€ä»‹ç»"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">2.åŸºç¡€ä»‹ç»</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-æ¶æ„ç»„ä»¶"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">3.æ¶æ„ç»„ä»¶</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-ç»„ä»¶è¯´æ˜"><span class="post-toc-number">1.4.</span> <span class="post-toc-text">4.ç»„ä»¶è¯´æ˜</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#0x01-åŸºç¡€å®‰è£…"><span class="post-toc-number">2.</span> <span class="post-toc-text">0x01 åŸºç¡€å®‰è£…</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-ç¯å¢ƒéœ€æ±‚"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">1.ç¯å¢ƒéœ€æ±‚</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-éƒ¨ç½²è¯´æ˜"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">2.éƒ¨ç½²è¯´æ˜</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Helm-Client"><span class="post-toc-number">2.2.1.</span> <span class="post-toc-text">Helm Client</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Helm-Libaray"><span class="post-toc-number">2.2.2.</span> <span class="post-toc-text">Helm Libaray</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-åŸºç¡€é…ç½®"><span class="post-toc-number">2.3.</span> <span class="post-toc-text">3.åŸºç¡€é…ç½®</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#HelmåŸºç¡€ä½¿ç”¨"><span class="post-toc-number">2.3.1.</span> <span class="post-toc-text">HelmåŸºç¡€ä½¿ç”¨</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Chartä»“åº“é•œåƒ"><span class="post-toc-number">2.3.2.</span> <span class="post-toc-text">Chartä»“åº“é•œåƒ</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#0x02-å…¥é—¨å®è·µ"><span class="post-toc-number">3.</span> <span class="post-toc-text">0x02 å…¥é—¨å®è·µ</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-Hello-World-è‡ªå®šä¹‰æ¨¡æ¿"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">1.Hello World - è‡ªå®šä¹‰æ¨¡æ¿</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-Redis-Chart-æ¨¡æ¿"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">2.Redis - Chart æ¨¡æ¿</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-Library-Chart-ä»“åº“-Local-amp-Remote"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">3.Library - Chart ä»“åº“(Local&amp;Remote)</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#0x03-Helm-å‘½ä»¤"><span class="post-toc-number">4.</span> <span class="post-toc-text">0x03 Helm å‘½ä»¤</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#0x04-æ¨¡æ¿ç¼–å†™"><span class="post-toc-number">5.</span> <span class="post-toc-text">0x04 æ¨¡æ¿ç¼–å†™</span></a></li></ol>
            </nav>
            <div class="toc-bar"><div>
        </aside>
    


    <!-- æ”¯ä»˜å®å¾®ä¿¡æ–‡ç« èµèµ -->
    
      <div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        å¦‚æœæ­¤ç¯‡æ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œå°±è¯·ä½œè€…å–æ¯ Coffee â˜•ï¸â˜•ï¸!
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardwechat" src="/img/reward-wechat.jpg" height="250" height="250" alt="å¾®ä¿¡æ‰“èµäºŒç»´ç ">
            <img id="rewardalipay" src="/img/reward-alipay.png" height="250" height="250" alt="æ”¯ä»˜å®æ‰“èµäºŒç»´ç ">
        </div>
        
        <label class="reward-toggle">
            <!-- <input id="rewardToggle" type="checkbox" class="reward-toggle-check" data-wechat="/img/reward-wechat.jpg" data-alipay="/img/reward-alipay.png"> -->
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">å¾®ä¿¡</span>
                <span class="reward-toggle-item alipay">æ”¯ä»˜å®</span>
            </div>
        </label>
        
    </div>
</div>

      

    <!-- å¾®ä¿¡å…¬ä¼—å·å…³æ³¨/æ–‡ç« ç‰ˆæƒå¤åˆ¶ -->
    
      <div id="btw-mask" style="position: fixed; top: 0px; right: 0px; bottom: 0px; left: 0px; opacity: 0.7; z-index: 999; background: rgb(0, 0, 0); display:none"></div>
<div id="btw-modal" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 360px; text-align: center; font-size: 13px; background: rgb(255, 255, 255); border-radius: 10px; z-index: 9999; font-family: PingFangSC-Regular, sans-serif;display:none">
<span id="btw-modal-close-btn" style="position: absolute; top: 5px; right: 15px; line-height: 1.8; font-size: 15px; cursor: pointer; opacity: 0.2; z-index: 9999; color: rgb(0, 0, 0); background: none; border: none; outline: none;">X</span>
<p id="btw-modal-header" style="margin-top: 40px; line-height: 1.8; font-size: 13px; ">
<b style="color:#6190e8;">ä½ å¥½æœ‹å‹,å¯ä»¥å…³ä¸ªæ³¨å—? â¤ <br> è¿™å°†æ˜¯æˆ‘æŒç»­æ›´æ–°æ–‡ç« çš„åŠ¨åŠ›æºæ³‰ï¼Œè°¢è°¢æ”¯æŒï¼(à¹‘â€²á´—â€µà¹‘) </b> <br> å¦‚ä¸æƒ³å…³æ³¨è¯·ç‚¹å‡»å³ä¸Šè§’çš„ã€Xã€‘<br>
<br>Method 1.Please visit <strong><a href="https://twitter.com/WeiyiGeek" target="_blank" rel="noopener" style="color: rgb(240, 65, 52);text-decoration:underline;">ã€My Twitterã€‘</a></strong>. There is an article verification code in the homepage.
<br>æ–¹å¼2.è¯·è®¿é—®æœ¬åšä¸»çš„Bç«™<strong><a href="https://space.bilibili.com/385802642" target="_blank" rel="noopener" style="color: rgb(240, 65, 52);text-decoration:underline;">ã€WeiyiGeekã€‘</a></strong>é¦–é¡µå…³æ³¨UPä¸»,<br>å°†è‡ªåŠ¨éšæœºè·å–è§£é”éªŒè¯ç ã€‚
<br>æ–¹å¼3.æ‰«ä¸€æ‰«ä¸‹æ–¹äºŒç»´ç ï¼Œå…³æ³¨æœ¬ç«™<strong>å®˜æ–¹å…¬ä¼—å·</strong><br>
å›å¤ï¼š<strong style="color: rgb(240, 65, 52);">éªŒè¯ç </strong>
å°†è·å–<strong style="color: rgb(240, 65, 52);">è§£é”(æœ‰æ•ˆæœŸ7å¤©)</strong>æœ¬ç«™æ‰€æœ‰æŠ€æœ¯æ–‡ç« å“Ÿ!</p>
<img src="/img/wechat-search.png" style="width: 300px; margin-top: 10px;">
<div id="btw-modal-input-code" style="margin-top: 20px; background: rgb(255, 255, 255);">
  <input id="btw-modal-input" type="number" minlength="4" maxlength="4" placeholder="è¯·è¾“å…¥éªŒè¯ç |Verification Code"
    style="width: 165px; height: 32px; line-height: 32px; padding: 0px 10px; margin: 0px 10px; font-size: 13px; text-rendering: auto; text-transform: none; cursor: text; outline: none; box-sizing: border-box; border: 1px solid rgb(221, 221, 221); -webkit-appearance: textfield; background-color: white; -webkit-rtl-ordering: logical;"/>
  <button id="btw-submit-btn" onclick="yzm_vertify()"
    style="padding: 0px 20px; height: 32px; font-size: 14px; outline: none; border: none; color: rgb(255, 255, 255); background: rgb(222, 104, 109); cursor: pointer;">æ
    äº¤</button> </div>
<p id="btw-footer" style="margin: 40px 0px 20px; color: rgb(153, 153, 153);">@WeiyiGeek - ä¸ºäº†èƒ½åˆ°è¿œæ–¹ï¼Œè„šä¸‹çš„æ¯ä¸€æ­¥éƒ½ä¸èƒ½å°‘</p>
</div>
        
</article>
</div>

    </main>
    <footer class="footer ">
    
    <div class="top">
        
            <p>
    <span>Linksï¼š</span>
    
    <span class="blogroll-item">
        <a href="https://weiyigeek.top" target="_blank">https://weiyigeek.top</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.weiyigeek.top" target="_blank">https://blog.weiyigeek.top</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://weiyigeek.top/img/wechat-search.png" target="_blank">å…¬ä¼—è´¦å·</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://space.bilibili.com/385802642/article" target="_blank">å“”å“©å“”å“©ä¸“æ </a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://github.com/weiyigeek" target="_blank">ä¸ªäººGithub</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://gitee.com/WeiyiGeek" target="_blank">ä¸ªäººGitee</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.zhihu.com/people/weiyiSec" target="_blank">ä¸ªäººçŸ¥ä¹</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.cnblogs.com/WeiyiGeek" target="_blank">åšå®¢å›­</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://my.oschina.net/weiyigeek" target="_blank">OSCHINA</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.toutiao.com/c/user/token/MS4wLjABAAAAqcPSoMqfctaEqJpGSF775eeCjWkrop4AOyLITdMx-L78F5iXzfQcSRM5sY4dq3wR" target="_blank">ä»Šæ—¥å¤´æ¡</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.csdn.net/u013072756?type=lately" target="_blank">CSDN</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.jianshu.com/u/5199a1104739" target="_blank">ç®€ä¹¦</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://cloud.tencent.com/developer/user/1389665/articles" target="_blank">è…¾è®¯äº‘+äº‘ç¤¾åŒº</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://cuttlefish.baidu.com/shop/75c5dbd8d15abe23482f4d40" target="_blank">ç™¾åº¦æ–‡åº“</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://author.baidu.com/home?from=blog&app_id=1726736601523415" target="_blank">ITæå®¢çŸ¥è¯†åˆ†äº«</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.51cto.com/weiyigeek" target="_blank">51CTOåšå®¢</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://juejin.cn/user/122767337595934" target="_blank">æ˜é‡‘</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://weibo.com/a/hot/7622022703618049_1.html" target="_blank">å¾®åšæ–‡ç« </a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.xiaohongshu.com/user/profile/627c98bb000000001000e7ba" target="_blank">å°çº¢ä¹¦</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://segmentfault.com/u/weiyigeek" target="_blank">Segmentfault</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.douyin.com/user/MS4wLjABAAAAMSBdMja6XLsdmzafb0RNbFeBemIOk38K1PaOClZeI1Q" target="_blank">æŠ–éŸ³ä¸»é¡µ</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.kuaishou.com/profile/3xfbrsrhd2i69x9" target="_blank">å¿«æ‰‹ä¸»é¡µ</a>
    </span>
    
</p>

        
    </div>
    
    <div class="bottom">
      <p>
        <span>WeiyiGeek &copy; 2018 - 2022 <a href="https://weiyigeek.top" target="_blank" rel="noopener">weiyigeek.top</a> All rights reserved.å”¯ä¸€æå®¢ITçŸ¥è¯†åˆ†äº« ç‰ˆæƒæ‰€æœ‰ </span>
        
        <span>
          Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/weiyigeek" target="_blank">mellow</a>
        </span>
        
        <br/>è®¿é—®ç»Ÿè®¡
        <span><a href="/sitemap.xml" target="_blank" rel="Sitemaps-ç«™ç‚¹åœ°å›¾">Sitemaps</a> </span>
        <span><a href="/baidusitemap.xml" target="_blank" rel="baidusitemaps-ç™¾åº¦ç«™ç‚¹åœ°å›¾">ç«™ç‚¹åœ°å›¾</a> </span>
        <!-- 
  -->
        <br/>ICPå¤‡æ¡ˆå·<span><a href="https://beian.miit.gov.cn" target="_blank">æ¸ICPå¤‡2022003447å·</a></span>
        <br/>
        <div id="cc-myssl-id">
          <a href="https://myssl.com/blog.weiyigeek.top?from=mysslid" target="_blank" rel="noopener"><img src="https://static.myssl.com/res/images/myssl-id1.png" alt="MySSLå®‰å…¨è®¤è¯" style="max-height:50px;display:block;margin:0 auto"></a>
        </div>
      </p>
    </div>
</footer>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>


<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://blog.weiyigeek.top/2021/6-10-617.html&title=ã€ŠHelmåŒ…ç®¡ç†å·¥å…·å…¥é—¨å­¦ä¹ åŠä½¿ç”¨ã€‹ â€” WeiyiGeek Blog&pic=https://blog.weiyigeek.top/img/avatar.jpg" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.weiyigeek.top/2021/6-10-617.html&title=ã€ŠHelmåŒ…ç®¡ç†å·¥å…·å…¥é—¨å­¦ä¹ åŠä½¿ç”¨ã€‹ â€” WeiyiGeek Blog&source=[TOC]" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.weiyigeek.top/2021/6-10-617.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€ŠHelmåŒ…ç®¡ç†å·¥å…·å…¥é—¨å­¦ä¹ åŠä½¿ç”¨ã€‹ â€” WeiyiGeek Blog&url=https://blog.weiyigeek.top/2021/6-10-617.html&via=https://blog.weiyigeek.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://blog.weiyigeek.top/2021/6-10-617.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>æ‰«ä¸€æ‰«ï¼Œåˆ†äº«åˆ°å¾®ä¿¡</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACLElEQVR42u3aS3KDMBAFwNz/0mSblA1+MxJJITUrFyaymsVE8/n6iq/j5Tr7Nnn+5zPX60y+MDAwHss4Lq/rZ3LM2dZf7ye/+2YdDAyMDRh3LJ0/M8LGwMDAqDKSbV1vFAMDA2MWI1o6SFD/OeBiYGA8ipGEzqQolhfakvLcLbk4BgbGAxl51f3vP9/S38DAwHgU4yhe433DWTv5tSYGBsbSjDzAJYfF3qaryfDpChgYGFsyRn5sBNO7g4GBsSojKXhVhyd6Rf+hkh8GBsZmjGoRvxrxeut8CPcYGBjbMHpp5NymZu9FYGBgrM1IUsS5zci8bBdtPc90MTAwHsvoFfTzI+PcZsDpX2FgYGzAyAcaqiX7nJrc/1Buw8DAWJSRH8LyrSQNy94Lyv8xYGBgrMSoDkPkAbc6AjvygjAwMPZhVJPMPO3MC3D5K4tmRjAwMJZj5Ie53jhXtS1ar7phYGCsyehluvmg2PhIWTPQY2BgLM2olsbyNDU//FVHNDAwMHZgVIvyeb2r+iLysPtmPxgYGBsw5obFaozPW6cYGBg7M+Ye9arfTigRYmBgLMo4ildemMvLdvmrPA2+GBgYSzNm9QSTIn5+ZMyPiWUMBgbGYxm9AlmVUW1SVkM2BgbGDoxe4Os1IAsZdpxCY2BgYMwqjY0kyeVhCwwMjO0Z+XFwJNFNBjIwMDD2YSRJbC9EjrQZbim3YWBgPJAxNKnRai0kbYbqeAcGBsaijG8b5QPx1QS+7QAAAABJRU5ErkJggg==" alt="å¾®ä¿¡åˆ†äº«äºŒç»´ç ">
</div>


    
    <!-- main-js -->
<script type="text/javascript" src="/js/jquery/2.1.0-jquery.min.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/plugins/fastclick.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/plugins/ios-orientationchange-fix.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/jquery/3.5.2-jquery.fancybox.min.js?v=1.6.6"></script>
<!--  //cdn.bootcss.com/node-waves/0.7.4/waves.min.js -->
<script type="text/javascript" src="/js/node-waves/0.7.4-waves.min.js?v=1.6.6"></script> 

<script type="text/javascript" src="/js/method.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/blog.js?v=1.6.6"></script>

<!-- third-party -->
<script type="text/javascript" src="/js/plugins/local_search.js?v=1.6.6"></script>
<script type="text/javascript">
	var search_path = "search.xml";
	if (search_path.length === 0) { search_path = "search.xml";}
	var path = "/" + search_path;
	searchFunc(path, "local-search-input", "local-search-result");
</script> 

<script> (adsbygoogle = window.adsbygoogle || []).push({});</script>    


<!-- <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> --> 


  


<script>
  var _hmt = _hmt || [];
  (function() {
    // ç™¾åº¦ç»Ÿè®¡
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?53923c4b5560739bc0ed61e183be6acf";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();
</script>
 


<!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
            processEscapes: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.staticfile.org/mathjax/2.7.9/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
 
<script>
    (function() {
        var OriginTitile = document.title, titleTime;
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                document.title = 'WeiyiGeek Blog-å…³æ³¨äºç½‘ç»œå®‰å…¨_ç‰©è”ç½‘å®‰å…¨å¼€å‘_ç½‘ç»œå®‰å…¨è¿ç»´-å­¦ä¹ å¿ƒå¾—åˆ†äº«';
                clearTimeout(titleTime);
            } else {
                document.title = '(ã¤ã‚§âŠ‚)å’¦!åˆå¥½äº†!';
                titleTime = setTimeout(function() {
                    document.title = OriginTitile;
                },2000);
            }
        });
    })();
</script>
 

     <script type="text/javascript" src="/js/custom/copytips.js?v=1.6.6"></script> 
</body>
</html>