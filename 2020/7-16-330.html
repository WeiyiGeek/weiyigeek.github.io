<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="content-language" content="zh-CN"/>
    <meta name="author" content="WeiyiGeek" />
    <meta name="msvalidate.01" content="5C552FB1D885E0E11D2957EC958C8018" />
    <meta name="shenma-site-verification" content="4c655e91c76be0a93c1b6954c666c9d6_1649049085"/>
    <meta name="bytedance-verification-code" content="lKs4FqwCHSJ3A/c5tT7X" />
    <meta name="sogou_site_verification" content="OC65iET6Bk" />
    
    <title>ğŸŒ FlaskåŸºç¡€å…¥é—¨å­¦ä¹ ç¬”è®°-1|WeiyiGeek Blog|å”¯ä¸€æå®¢Geek-ITç½‘ç»œå®‰å…¨è¿ç»´å¼€å‘æŠ€æœ¯çŸ¥è¯†åˆ†äº«-åšå®¢ç«™ç‚¹</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    
    <meta name="keywords" content="Flask">
    <meta name="Description" content="WeiyiGeek-å”¯ä¸€æå®¢åšå®¢ç«™ç‚¹,å…³æ³¨äºç½‘ç»œå®‰å…¨è¿ç»´,Webå®‰å…¨å¼€å‘,IOTç‰©è”ç½‘å®‰å…¨å¼€å‘,åº”ç”¨å¼€å‘,åˆ†äº«æŠ€æœ¯å­¦ä¹ çŸ¥è¯†ä¸å…¥å‘è§£å†³,æå‡ç½‘ç»œå®‰å…¨æŠ€æœ¯ä¸è‡ªèº«æŠ€æœ¯èƒ½åŠ›,ç«‹å¿—ç»´æŠ¤å¤§ä¼—ç½‘ç»œå®‰å…¨ä¸ºå·±ä»»,åšä¸€ä¸ªå¯¹å›½å®¶æœ‰ç”¨çš„äºº,ä¸ºå®ç°ä¸­åæ°‘æ—ä¼Ÿå¤§å¤å…´çš„ä¸­å›½æ¢¦ä¸æ‡ˆå¥‹æ–—">
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="/css/jquery/3.5.2-jquery.fancybox.min.css?v=1.6.6" />
    <link rel="stylesheet" href="/css/style.css?v=1.6.6">
    <!--  -->
     <script type="text/javascript" src="/js/custom/articlecost.js?v=1.6.6"></script> 
    <link rel="stylesheet" href="/css/third-party/gitalk.css?v=1.6.6"> 
    <script type="text/javascript">
        // Data Center
        var DC = {
            reward:	true,
            lv: JSON.parse('{"enable":false,"app_id":null,"app_key":null,"icon":true}'),
            v: JSON.parse('{"enable":false,"appid":null,"appkey":null,"notify":true,"verify":true,"placeholder":"give me some sugers plz...","avatar":"wavatar"}')
        };
    </script>
    <script type="text/javascript">window.lazyScripts=[];</script>
<meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="WeiyiGeek Blog" type="application/atom+xml">
</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="">
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap">
      
      <img src="/img/brand.jpg" class="brand-bg" alt="WeiyiGeek-backgroud">
      
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg" alt="WeiyiGeek-å¤´åƒ">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">WeiyiGeek</h5>
          <a href="mailto:master@weiyigeek.top" title="master@weiyigeek.top" class="mail">
            <span>m</span><span>a</span><span>s</span><span>t</span><span>e</span><span>r</span><span>@</span><span>w</span><span>e</span><span>i</span><span>y</span><span>i</span><span>g</span><span>e</span><span>e</span><span>k</span><span>.</span><span>t</span><span>o</span><span>p</span>
          </a>
        </hgroup>
        
        <ul class="menu-link">
          
              <li>
                <a href="https://weiyigeek.top/img/wechat-search.png" target="_blank">
                  <i class="icon icon-lg icon-wechat"></i>
                </a>
              </li>
            
              <li>
                <a href="https://github.com/weiyigeek" target="_blank">
                  <i class="icon icon-lg icon-github"></i>
                </a>
              </li>
            
              <li>
                <a href="https://t.me/WeiyiGeek" target="_blank">
                  <i class="icon icon-lg icon-telegram"></i>
                </a>
              </li>
            
              <li>
                <a href="https://twitter.com/WeiyiGeek" target="_blank">
                  <i class="icon icon-lg icon-twitter"></i>
                </a>
              </li>
            
              <li>
                <a href="https://weibo.com/615643678" target="_blank">
                  <i class="icon icon-lg icon-weibo"></i>
                </a>
              </li>
            
        </ul>
        
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                é¦–é¡µ
              </a>
            </li>
        
            <li class="">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                æ–‡ç« åˆ†ç±»
              </a>
            </li>
        
            <li class="">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                æ–‡ç« æ ‡ç­¾
              </a>
            </li>
        
            <li class="">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                æ–‡ç« å½’æ¡£
              </a>
            </li>
        
            <li class="">
              <a href="/books"  >
                <i class="icon icon-lg icon-book"></i>
                å­¦ä¹ ä¹¦ç±
              </a>
            </li>
        
            <li class="">
              <a href="/about"  >
                <i class="icon icon-lg icon-user"></i>
                å…³äºä½œè€…
              </a>
            </li>
        
            <li class="">
              <a href="/links"  >
                <i class="icon icon-lg icon-link"></i>
                ç«™ç‚¹å¯¼èˆª
              </a>
            </li>
        
            <li class="">
              <a href="https://weiyigeek.top/img/wechat-search.png" target="_blank" >
                <i class="icon icon-lg icon-wechat"></i>
                å…¬ä¼—è´¦å·
              </a>
            </li>
        
            <li class="">
              <a href="https://space.bilibili.com/385802642" target="_blank" >
                <i class="icon icon-lg icon-youtube-play"></i>
                å“”å“©å“”å“©
              </a>
            </li>
        
            <li class="">
              <a href="https://github.com/weiyigeek" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="">
              <a href="https://twitter.com/WeiyiGeek" target="_blank" >
                <i class="icon icon-lg icon-twitter"></i>
                Twitter
              </a>
            </li>
        
            <li class="">
              <a href="https://weibo.com/615643678" target="_blank" >
                <i class="icon icon-lg icon-weibo"></i>
                Weibo
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row clearfix">
        <a href="javascript:;" class="header-icon pull-left waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">
            <span>FlaskåŸºç¡€å…¥é—¨å­¦ä¹ ç¬”è®°-1</span>
            
        </div>

        
        <a href="javascript:;" id="site_search_btn" class="header-icon pull-right waves-effect waves-circle waves-light">
            <i class="icon icon-lg icon-search"></i>
        </a>
        

        
            <a href="/atom.xml" class="header-icon pull-right waves-effect waves-circle waves-light">
                <i class="icon icon-lg icon-rss"></i>
            </a>
        
    </div>
</header>
<header class="content-header post-header">
    <img src="/img/banner.jpg" class="header-bg" alt="æ–‡ç« å¤´éƒ¨èƒŒæ™¯">
    <div class="container fade-scale">
        <h1 class="title">FlaskåŸºç¡€å…¥é—¨å­¦ä¹ ç¬”è®°-1</h1>
        <h5 class="subtitle">
            
                <time datetime="2020-07-16T12:34:30.000Z" itemprop="datePublished" class="page-time">
  2020-07-16
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Python3/">Python3</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Python3/Web%E5%BC%80%E5%8F%91/">Webå¼€å‘</a></li></ul></li></ul>


            
        </h5>
        
    </div>
    

</header>

<div id="site_search">
    <div class="search-title clearfix">
        <span class="pull-left">
          <i class="icon icon-lg icon-search"></i>
        </span>
        <input type="text" id="local-search-input" name="q" results="0" placeholder="search my blog..." class="form-control pull-left"/>
        <a href="javascript:;" class="close pull-right waves-effect waves-circle waves-light">
          <i class="icon icon-lg icon-close"></i>
        </a>
    </div>
    <div id="local-search-result"></div>
</div>


<div class="container body-wrap">
    <article id="post-ç¼–ç¨‹ä¸–ç•Œ/Python/Webå¼€å‘/Flask/åŸºç¡€å…¥é—¨/FlaskåŸºç¡€å…¥é—¨å­¦ä¹ ç¬”è®°1"
  class="post-article article-type-post" itemprop="blogPost">
    <div class="post-card">
        <h1 class="post-card-title">FlaskåŸºç¡€å…¥é—¨å­¦ä¹ ç¬”è®°-1</h1>
        <div class="post-meta">
            <time class="post-time" title="2020-07-16 20:34:30" datetime="2020-07-16T12:34:30.000Z"  itemprop="datePublished">2020-07-16</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Python3/">Python3</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Python3/Web%E5%BC%80%E5%8F%91/">Webå¼€å‘</a></li></ul></li></ul>



            

            


            
        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            
            <p>[TOC]</p>
<a id="more"></a>
<h4 id="0x00-å‰è¨€ç®€è¿°"><a href="#0x00-å‰è¨€ç®€è¿°" class="headerlink" title="0x00 å‰è¨€ç®€è¿°"></a>0x00 å‰è¨€ç®€è¿°</h4><p>æè¿°ï¼šFlask å®˜æ–¹ä»‹ç»<code>Web Develoment one drop at a time</code>ï¼Œå®é™…ä¸Šå®ƒæ˜¯ä¸€ä¸ªåŸºäºPythonå¼€å‘çš„Webè½»é‡çº§æ¡†æ¶; é€šè¿‡Flaskå’Œå„ç§æ’ä»¶çš„é…åˆä½¿ç”¨ï¼Œä»¥æ–°çš„æ¡†æ¶å®ç°Webå‰åç«¯è”åˆå¼€å‘ã€‚</p>
<p>Flask æ ¸å¿ƒç‰¹æ€§å°±æ˜¯â€å¾®â€ï¼Œè€Œå¾®æ¡†æ¶ä¸­çš„â€œå¾®â€å­—è¡¨ç¤º Flask çš„ç›®æ ‡æ˜¯ä¿æŒæ ¸å¿ƒç®€å•è€Œåˆå¯æ‰©å±•(ä»é›¶å¼€å§‹ç”±ä½ åšä¸»)ï¼Œæ‰€æœ‰å¹¶ä¸æ˜¯è¯´å®ƒä¸é€‚ç”¨äºå¤§å‹é¡¹ç›®;</p>
<p>Flask å®˜æ–¹ç½‘ç«™: <a href="http://flask.pocoo.org" target="_blank" rel="noopener">http://flask.pocoo.org</a><br>Flask ä¾èµ–<code>å†…ç½®çš„ Jinja æ¨¡æ¿å¼•æ“å’Œ Werkzeug WSGI å¥—ä»¶(WSGI å·¥å…·é›†)</code>ä»¥åŠ<code>itsdangerousåŸºäºDjangoç­¾åæ¨¡å—</code>ä¸‹é¢åˆ—å‡ºå…¶å¸®åŠ©æ–‡æ¡£:</p>
<ul>
<li>Flask å®˜æ–¹æ–‡æ¡£: <a href="https://dormousehole.readthedocs.io/en/latest/" target="_blank" rel="noopener">https://dormousehole.readthedocs.io/en/latest/</a></li>
<li>jinja å®˜ç½‘æ–‡æ¡£: <a href="http://jinja.pocoo.org/docs" target="_blank" rel="noopener">http://jinja.pocoo.org/docs</a> (<code>ç”¨äºæ¸²æŸ“é¡µé¢çš„æ¨¡æ¿è¯­è¨€</code>)</li>
<li>Werkzeug å®˜ç½‘æ–‡æ¡£: <a href="https://werkzeug.palletsprojects.com/" target="_blank" rel="noopener">https://werkzeug.palletsprojects.com/</a> (<code>å®ç° WSGI ï¼Œåº”ç”¨å’ŒæœåŠ¡ä¹‹é—´çš„æ ‡å‡† Python æ¥å£</code>)</li>
<li>itsdangerous å®˜ç½‘æ–‡æ¡£: <a href="https://palletsprojects.com/p/itsdangerous/" target="_blank" rel="noopener">https://palletsprojects.com/p/itsdangerous/</a> (<code>ä¿è¯æ•°æ®å®Œæ•´æ€§çš„å®‰å…¨æ ‡å¿—æ•°æ®ï¼Œç”¨äºä¿æŠ¤ Flask çš„ session cookieã€‚</code>)</li>
<li>Click å®˜æ–¹æ–‡æ¡£: <a href="https://palletsprojects.com/p/click/" target="_blank" rel="noopener">https://palletsprojects.com/p/click/</a>(<code>å‘½ä»¤è¡Œåº”ç”¨çš„æ¡†æ¶ã€‚ç”¨äºæä¾› flask å‘½ä»¤ï¼Œå¹¶å…è®¸æ·»åŠ è‡ªå®šä¹‰ ç®¡ç†å‘½ä»¤ã€‚</code>)</li>
</ul>
<p><strong>Flask ç‰¹ç‚¹:</strong></p>
<ul>
<li>1.å½“å‰æœ€æµè¡Œçš„Python-Webæ¡†æ¶ï¼Œå·²ç»è¶…è¶ŠDjangoæ’åç¬¬ä¸€äº†;</li>
<li>2.å®˜æ–¹æ–‡æ¡£é½å…¨ï¼Œæ–¹ä¾¿å…¥æ‰‹;</li>
<li>3.éå¸¸å¥½çš„æ‰©å±•æœºåˆ¶å’Œç¬¬ä¸‰æ–¹çš„æ‰©å±•ç¯å¢ƒ;</li>
<li>4.ç¤¾åŒºæ´»è·ƒåº¦éå¸¸é«˜;</li>
<li>5.å¾®å‹æ¡†æ¶æä¾›ç»™å¼€å‘è€…æ›´å¤§çš„é€‰æ‹©ç©ºé—´;</li>
</ul>
<p><strong>Flask VS Django å¯¹æ¯”åŒºåˆ«:</strong></p>
<ul>
<li>(1) ç›¸åŒç‚¹:<ul>
<li>éƒ½æ˜¯åŸºäºMVCè®¾è®¡æ¨¡å¼çš„Webæ¡†æ¶;</li>
</ul>
</li>
<li>(2) åŒºåˆ«ç‚¹:<ul>
<li>å‰è€…è½»é‡çº§å¼€å‘æ¡†æ¶ç”¨æˆ·è‡ªå®šä¹‰å¤šè½»æ·ä¾¿åˆ©(<code>6è¡Œä»£ç å®ç°ä¸€ä¸ªWebæœåŠ¡å™¨</code>)ï¼Œè€ŒDjangoè¾ƒäºå‰è€…æ¯”è¾ƒé‡ä½†æ˜¯åŠŸèƒ½å®Œå–„;</li>
</ul>
</li>
</ul>
<p><strong>è½¯ä»¶æ¶æ„è®¾è®¾è®¡é£æ ¼:å±‚æ¬¡æ¸…æ™°/ä¾¿äºç»´æŠ¤</strong><br>Q: MVC(Modelã€Viewã€Controller) è®¾è®¡æ¨¡å¼ä¸€å¥è¯è§£é‡Š</p>
<blockquote>
<p>å®ƒæ˜¯ä¸€ç§è½¯ä»¶è®¾è®¡è§„èŒƒä½¿å¾—ä¸šåŠ¡é€»è¾‘ã€åå°æ•°æ®ã€å‰å°ç•Œé¢è¿›è¡Œåˆ†ç¦»ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯<code>è§£è€¦åˆ</code>ï¼Œä¼˜ç‚¹æ˜¯é™ä½äº†æ¨¡å—ä¹‹é—´çš„è€¦åˆæ€§ï¼Œæ–¹ä¾¿å˜æ›´ä»¥åŠæ›´å®¹æ˜“é‡æ„ä»£ç å¹¶ä¸”æœ€å¤§ç¨‹åº¦å®ç°ä»£ç é‡ç”¨;<br>æ¯”å¦‚ï¼šéœ€è¦æ›´æ¢ä¸ºå…¶ä»–æ•°æ®åº“å­˜å‚¨åªéœ€è¦è°ƒæ•´Modelsæ¨¡å‹å³å¯<br>æ¯”å¦‚: éœ€è¦æ›´æ¢é¡µé¢æ˜¾ç¤ºæ—¶å€™åªéœ€è¦ä¿®æ”¹viewè§†å›¾å³å¯</p>
</blockquote>
<p>Q: MVT(Modelã€Viewã€Template)è®¾è®¡æ¨¡å¼ä¸MVCæœ¬è´¨æ— ä»€ä¹ˆå·®åˆ«ï¼Œå„ç»„ä»¶ä¹‹é—´ä¸ºäº†ä¿æŒæ¾è€¦åˆå…³ç³»ï¼Œåªæ˜¯å®šä¹‰ä¸Šæœ‰äº›è®¸ä¸åŒ;</p>
<blockquote>
<p>1.è´Ÿè´£ä¸šåŠ¡å¯¹è±¡ä¸æ•°æ®åº“(ORM)çš„å¯¹è±¡;<br>2.è´Ÿè´£ä¸šåŠ¡é€»è¾‘å¹¶åœ¨é€‚å½“çš„æ—¶å€™è°ƒç”¨Modelå’ŒTemplate;<br>3.è´Ÿè´£å°†é¡µé¢å±•ç¤ºç»™ç”¨æˆ·;</p>
</blockquote>
<p><strong>å­¦ä¹ å…³é”®ç‚¹:</strong><br>æŒæ¡URLã€Jinjia2æ¨¡æ¿è¯­æ³•ã€æ ‡å‡†ç±»è§†å›¾ã€ORMã€Flaskä¼šè¯ã€Restfulã€æƒé™å’Œè§’è‰²æ¨¡å‹ã€Celeryå¼‚æ­¥æœºåˆ¶ç­‰æŠ€èƒ½çŸ¥è¯†ã€‚</p>
<p><br/></p>
<h4 id="0x01-ç¯å¢ƒå®‰è£…"><a href="#0x01-ç¯å¢ƒå®‰è£…" class="headerlink" title="0x01 ç¯å¢ƒå®‰è£…"></a>0x01 ç¯å¢ƒå®‰è£…</h4><p>æè¿°: åœ¨è¿›è¡ŒFlaskå¼€å‘å»ºè®®ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„Python3ç‰ˆæœ¬ä»¥åŠé‡‡ç”¨Pycharmè¿›è¡Œå¿«é€ŸPython Flaské¡¹ç›®å¼€å‘,å¹¶ä¸”å»ºè®®<code>åœ¨å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒä¸‹</code>éƒ½ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒæ¥ç®¡ç†é¡¹ç›®çš„ä¾èµ–ã€‚</p>
<h5 id="1-venv-è™šæ‹Ÿç¯å¢ƒ"><a href="#1-venv-è™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="(1) venv è™šæ‹Ÿç¯å¢ƒ"></a>(1) venv è™šæ‹Ÿç¯å¢ƒ</h5><p>Q:ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼Ÿ</p>
<blockquote>
<p>éšç€ä½ çš„ Python é¡¹ç›®è¶Šæ¥è¶Šå¤šï¼Œä½ ä¼šå‘ç°ä¸åŒçš„é¡¹ç›®ä¼šéœ€è¦ä¸åŒçš„ç‰ˆæœ¬çš„ Python åº“ï¼ŒåŒä¸€ä¸ª Python åº“çš„ä¸åŒç‰ˆæœ¬å¯èƒ½ä¸å…¼å®¹ã€‚<br>è™šæ‹Ÿç¯å¢ƒå¯ä»¥ä¸ºæ¯ä¸€ä¸ªé¡¹ç›®<code>å®‰è£…ç‹¬ç«‹çš„ Python åº“</code>ï¼Œè¿™æ ·å°±å¯ä»¥<code>éš”ç¦»ä¸åŒé¡¹ç›®ä¹‹é—´çš„ Python åº“</code>ï¼Œä¹Ÿå¯ä»¥<code>éš”ç¦»é¡¹ç›®ä¸æ“ä½œç³»ç»Ÿä¹‹é—´çš„ Python åº“</code>ã€‚</p>
</blockquote>
<p>Python 3 å†…ç½®äº†ç”¨äºåˆ›å»ºè™šæ‹Ÿç¯å¢ƒçš„ venv æ¨¡å—ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨å…¶åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒæµç¨‹å¦‚ä¸‹:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Linux / Windows</span></span><br><span class="line"><span class="comment"># åˆ›å»ºè™šæ‹Ÿç›®å½•</span></span><br><span class="line">mkdir project &amp;&amp; <span class="built_in">cd</span> ./project &amp;&amp; python3 -m venv venv</span><br><span class="line"><span class="comment"># æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</span></span><br><span class="line">$ . venv/bin/activate     <span class="comment"># Linux</span></span><br><span class="line">&gt; venv\Scripts\activate   <span class="comment"># Windows</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Tips:æ¿€æ´»åç»ˆç«¯æç¤ºç¬¦ä¼šæ˜¾ç¤ºè™šæ‹Ÿç¯å¢ƒçš„åç§°ã€‚</span></span><br></pre></td></tr></table></figure></p>
<p>è¡¥å……Python2.xä¸‹è™šæ‹Ÿç¯å¢ƒå®‰è£…:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># pip ä¸ virtualenv å®‰è£…</span></span><br><span class="line">apt install python-pip &amp;&amp; pip install virtualenv </span><br><span class="line"></span><br><span class="line"><span class="comment"># è™šæ‹Ÿç¯å¢ƒé…ç½®</span></span><br><span class="line">apt install virtualenvwrapper </span><br><span class="line"><span class="built_in">export</span> WORKON_HOME=~/.virtualenvs</span><br><span class="line"><span class="built_in">source</span> /usr/<span class="built_in">local</span>/bin/virtualenvwrapper.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºè™šæ‹Ÿç¯å¢ƒåç§°</span></span><br><span class="line">mkvirtualenv</span><br><span class="line"><span class="comment"># åˆ é™¤è™šæ‹Ÿç¯å¢ƒåç§°</span></span><br><span class="line">rmvirtualenv</span><br><span class="line"><span class="comment"># è¿›å…¥è™šæ‹Ÿç¯å¢ƒåç§°</span></span><br><span class="line">workon</span><br><span class="line"><span class="comment"># é€€å‡º</span></span><br><span class="line">deactivate</span><br></pre></td></tr></table></figure></p>
<p>é¡¹ç›®å˜é‡å®šä¹‰:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¯å¢ƒå˜é‡ä»dotenvä¸­è¯»å–</span></span><br><span class="line">pip install python-dotenv</span><br><span class="line"></span><br><span class="line">.env</span><br><span class="line">.flaskenv</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¯å¢ƒå˜é‡ä»virtualenvä¸­</span></span><br><span class="line">.flaskenv</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h5 id="2-Flaskä¸æ‰©å±•å®‰è£…"><a href="#2-Flaskä¸æ‰©å±•å®‰è£…" class="headerlink" title="(2) Flaskä¸æ‰©å±•å®‰è£…"></a>(2) Flaskä¸æ‰©å±•å®‰è£…</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¾èµ–å®‰è£…</span></span><br><span class="line">cat requirement.txt</span><br><span class="line">flask</span><br><span class="line">flask-script</span><br><span class="line">Flask-RESTful</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨å·²æ¿€æ´»çš„è™šæ‹Ÿç¯å¢ƒä¸­å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å®‰è£… Flaskï¼š</span></span><br><span class="line">pip install -r requirement.txt</span><br></pre></td></tr></table></figure>
<p><code>Flask(__name__).run()</code> å‚æ•°é…é€‰é¡¹<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">debug    <span class="comment"># è°ƒè¯•æ¨¡å¼é»˜è®¤ä¸ºTrue</span></span><br><span class="line">threaded <span class="comment"># æ˜¯å¦å¼€å¯å¤šçº¿ç¨‹</span></span><br><span class="line">port     <span class="comment"># æŒ‡å®šæœåŠ¡å™¨çš„ç«¯å£ (5000)</span></span><br><span class="line">host     <span class="comment"># ç»‘å®šçš„ä¸»æœºåœ°å€(127.0.0.1 / 0.0.0.0)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç®€å•ç¤ºä¾‹</span></span><br><span class="line">app.run(debug=Ture,host=<span class="string">'0.0.0.0'</span>,port=<span class="number">8000</span>)</span><br></pre></td></tr></table></figure></p>
<p>Flask å‘½ä»¤è¡Œç•Œé¢æ”¯æŒçš„ç¯å¢ƒå˜é‡:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åº”ç”¨å‘ç°</span></span><br><span class="line">FLASK_APP=hello</span><br><span class="line"><span class="comment"># ç¯å¢ƒå˜é‡</span></span><br><span class="line">FLASK_ENV=development </span><br><span class="line"><span class="comment"># çœ‹é™„åŠ æ–‡ä»¶ä¸Reloader</span></span><br><span class="line">FLASK_RUN_EXTRA_FILES=file1:dirA/file2:dirB/</span><br><span class="line"><span class="comment"># è°ƒè¯•æ¨¡å¼(åœ¨å¼€å‘è€…æ¨¡å¼è‡ªåŠ¨å¼€å¯)</span></span><br><span class="line">FLASK_DEBUG=1</span><br><span class="line"><span class="comment"># å¯åŠ¨ç«¯å£è®¾ç½®</span></span><br><span class="line">FLASK_RUN_PORT=8000</span><br><span class="line"><span class="comment"># ç¦ç”¨dotenv</span></span><br><span class="line">FLASK_SKIP_DOTENV=1</span><br></pre></td></tr></table></figure></p>
<p>Flask å‘½ä»¤:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿è¡Œå¼€å‘æœåŠ¡å™¨(å¯åŠ¨å‚æ•°æŒ‡å®š)</span></span><br><span class="line">flask run --port 8000 --extra-files file1:dirA/file2:dirB/</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿è¡Œå¼€å‘æœåŠ¡å™¨(ä»ç¯å¢ƒå˜é‡ä¸­è¯»å–å¯åŠ¨ç«¯å£)</span></span><br><span class="line">flask shell</span><br></pre></td></tr></table></figure></p>
<hr>
<h4 id="0x02-åŸºç¡€å°è¯•"><a href="#0x02-åŸºç¡€å°è¯•" class="headerlink" title="0x02 åŸºç¡€å°è¯•"></a>0x02 åŸºç¡€å°è¯•</h4><p>æè¿°:ä¸€ä¸ªç®€å•Flaské¡¹ç›®åˆ›å»ºæµç¨‹å¦‚ä¸‹ï¼š</p>
<ul>
<li>1.å¯¼å…¥flaskåŒ…ä¸­çš„Flaskæ¨¡å—</li>
<li>2.åˆ›å»ºFlaskå¯¹è±¡</li>
<li>3.ä½¿ç”¨å¯¹è±¡å®ä¾‹è¿›è¡Œè·¯ç”±æ³¨å†Œ</li>
<li>4.åœ¨è·¯ç”±ä¸‹ç¼–å†™è·¯ç”±å‡½æ•°å¹¶è¿”å›å“åº”å­—ç¬¦ä¸²</li>
<li>5.é€šè¿‡å¯¹è±¡å®ä¾‹çš„run()æ–¹æ³•å¯åŠ¨Flaské¡¹ç›®</li>
</ul>
<h5 id="1-å°è¯•ç‰›åˆ€"><a href="#1-å°è¯•ç‰›åˆ€" class="headerlink" title="(1) å°è¯•ç‰›åˆ€"></a>(1) å°è¯•ç‰›åˆ€</h5><p>ç¤ºä¾‹1.åˆå§‹åŒ–Flaské¡¹ç›®ä¹‹hello_world.py<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello_world</span><span class="params">()</span>:</span></span><br><span class="line">  a = <span class="string">"Flask"</span></span><br><span class="line">  b = <span class="string">" - Hello world"</span></span><br><span class="line">  time =  datetime.now()</span><br><span class="line">  <span class="keyword">return</span> <span class="string">"&lt;h4 style='text-algin:center'&gt;Project %s %s %s&lt;/h4&gt;"</span> % (a,b,time)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">  app.run(debug=<span class="literal">True</span>,host=<span class="string">'0.0.0.0'</span>,port=<span class="number">8000</span>)</span><br></pre></td></tr></table></figure></p>
<p>å¯åŠ¨é…ç½®æŒ‡å®šå¯åŠ¨ç¯å¢ƒæ¨¡å¼:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ–¹å¼1</span></span><br><span class="line"><span class="comment"># bat</span></span><br><span class="line"><span class="built_in">set</span> FLASK_ENV=development</span><br><span class="line"><span class="comment"># powershell</span></span><br><span class="line"><span class="variable">$env</span>:FLASK_ENV=<span class="string">"development"</span> </span><br><span class="line"><span class="comment"># linux</span></span><br><span class="line">FLASK_ENV=production</span><br><span class="line">python Flask-hello_world.py</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–¹å¼2</span></span><br><span class="line">env FLASK_APP=.\Flask-hello_world.py flask run</span><br><span class="line"><span class="variable">$env</span>:FLASK_APP=.\Flask-hello_world.py flask run</span><br></pre></td></tr></table></figure></p>
<p>æ‰§è¡Œç»“æœ:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> * Serving Flask app <span class="string">"Flask-hello_world"</span> (lazy loading)</span><br><span class="line"> * Environment: production</span><br><span class="line">WARNING: This is a development server. Do not use it <span class="keyword">in</span> a production deployment.Use a production WSGI server instead.</span><br><span class="line"> * Debug mode: on</span><br><span class="line"> * Restarting with <span class="built_in">stat</span>        <span class="comment"># ä¿®æ”¹è‡ªåŠ¨é‡å¯</span></span><br><span class="line"> * Debugger is active!         <span class="comment"># debuger</span></span><br><span class="line"> * Debugger PIN: 113-873-865   <span class="comment"># å”¯ä¸€èº«ä»½æ ‡è¯†</span></span><br><span class="line"> * Running on http://0.0.0.0:8000/ (Press CTRL+C to quit)</span><br></pre></td></tr></table></figure></p>
<p>æ€»ç»“:</p>
<ul>
<li>Dubugger ç›¸å…³åŠŸèƒ½åœ¨Flaskä¸­è°ƒé€Ÿå™¨æ‹¥æœ‰ä¿æŠ¤çš„åŠŸèƒ½ï¼Œé‡‡ç”¨PINä½œä¸ºå½“å‰è°ƒè¯•çš„èº«ä»½è®¤è¯ï¼Œå¸¸å¸¸åœ¨å¼€å‘ç¯å¢ƒä¸­ä½¿ç”¨ç”Ÿäº§ç¯å¢ƒä¸­ä¸å»ºè®®å¼€å¯;</li>
</ul>
<p><br></p>
<p><strong>ç¤ºä¾‹2:ç¯å¢ƒå˜é‡ä¸å¯åŠ¨å‚æ•°</strong><br>æè¿°:æˆ‘ä»¬å¯ä»¥é‡‡ç”¨Flaskçš„flask-Scriptæ‰©å±•åº“åœ¨å¯åŠ¨flaskåŠ¨æ€æŒ‡å®šå¯åŠ¨å‚æ•°æˆ–è€…è‡ªèº«è‡ªå¸¦å‚æ•°;<br>æ–‡æ¡£åœ°å€:<a href="https://flask.palletsprojects.com/en/1.1.x/cli/?highlight=flask%20script" target="_blank" rel="noopener">https://flask.palletsprojects.com/en/1.1.x/cli/?highlight=flask%20script</a></p>
<p>æ–¹å¼1.Flask-Scriptæ–¹å¼(åœ¨1.0ç‰ˆæœ¬å‰ä½¿ç”¨ç°åœ¨å·²ä¸¢å¼ƒ)ï¼Œä½¿ç”¨å…¶å‰å®‰è£…å®ƒ<code>pip install flask-script</code><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> flask_script <span class="keyword">import</span> Manager</span><br><span class="line"><span class="comment"># åˆå§‹åŒ–æ“ä½œ</span></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"><span class="comment"># ä½¿ç”¨appæ„å»ºManagerå¯¹è±¡</span></span><br><span class="line">manager = Manager(app)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">param</span><span class="params">()</span>:</span></span><br><span class="line">   <span class="keyword">return</span> <span class="string">f'Flask - script,host port param'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">  manager.run()</span><br></pre></td></tr></table></figure></p>
<p>flask-script å¸®åŠ©å‘½ä»¤:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$python</span> .\Day1\flask-scritp.py     </span><br><span class="line">usage: flask-scritp.py [-?] &#123;shell,runserver&#125; ...</span><br><span class="line">positional arguments:</span><br><span class="line">  &#123;shell,runserver&#125;</span><br><span class="line">    shell            Runs a Python shell inside Flask application context.</span><br><span class="line">    runserver        Runs the Flask development server i.e. app.run()</span><br><span class="line"></span><br><span class="line">usage: flask-scritp.py runserver [-?] [-h HOST] [-p PORT] [--threaded]</span><br><span class="line">  [--processes PROCESSES]</span><br><span class="line">  [--passthrough-errors] [-d] [-D] [-r] [-R]</span><br><span class="line">  [--ssl-crt SSL_CRT] [--ssl-key SSL_KEY]</span><br></pre></td></tr></table></figure></p>
<p>æ‰§è¡Œå‘½ä»¤<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Linux</span></span><br><span class="line">python3 http.py runserver -p 8000 - h 0.0.0.0 -d -r --threaded</span><br><span class="line"></span><br><span class="line"><span class="comment"># windows</span></span><br><span class="line">python .\Day1\flask-scritp.py runserver -h 0.0.0.0 -p 8000 -r -d --threaded</span><br><span class="line"> * Serving Flask app <span class="string">"flask-scritp"</span> (lazy loading)</span><br><span class="line"> * Environment: production</span><br><span class="line">   WARNING: This is a development server. Do not use it <span class="keyword">in</span> a production deployment. </span><br><span class="line">   Use a production WSGI server instead.</span><br><span class="line"> * Debug mode: on</span><br><span class="line"> * Restarting with <span class="built_in">stat</span></span><br><span class="line"> * Debugger is active!</span><br><span class="line"> * Debugger PIN: 113-873-865</span><br><span class="line"> * Running on http://0.0.0.0:8000/ (Press CTRL+C to quit)</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<p>æ–¹å¼2:é‡‡ç”¨å‘½ä»¤è¡Œæˆ–è€…ç¯å¢ƒå˜é‡æŒ‡å®šç«¯å£<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Powershellï¼ˆLinux ä¸å¤šè¯´äº†ï¼‰</span></span><br><span class="line"><span class="variable">$env</span>:FLASK_ENV=<span class="string">"development"</span></span><br><span class="line"><span class="variable">$env</span>:FLASK_APP=<span class="string">"./Flask-param.py"</span></span><br><span class="line"><span class="variable">$env</span>:FLASK_RUN_PORT=<span class="string">"8080"</span>;</span><br><span class="line">flask run</span><br><span class="line"><span class="comment"># * Serving Flask app "./Flask-param.py" (lazy loading)</span></span><br><span class="line"><span class="comment"># * Environment: development</span></span><br><span class="line"><span class="comment"># * Debug mode: on</span></span><br><span class="line"><span class="comment"># * Restarting with stat</span></span><br><span class="line"><span class="comment"># * Debugger is active!</span></span><br><span class="line"><span class="comment"># * Debugger PIN: 292-194-254</span></span><br><span class="line"><span class="comment"># * Running on http://127.0.0.1:8080/ (Press CTRL+C to quit)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¹Ÿå¯ä»¥åœ¨è¿è¡Œflask runæŒ‡å®šhost-portå‚æ•°æ³¨æ„å…¶ä¼˜å…ˆçº§é«˜äºç¯å¢ƒå˜é‡</span></span><br><span class="line"><span class="variable">$env</span>:FLASK_APP=<span class="string">"./Flask-param.py"</span></span><br><span class="line">flask run --port 8000 --host 0.0.0.0 </span><br><span class="line">* Debugger is active!</span><br><span class="line">* Debugger PIN: 292-194-254</span><br><span class="line">* Running on http://0.0.0.0:8000/ (Press CTRL+C to quit)</span><br></pre></td></tr></table></figure></p>
<h4 id="è·¯ç”±ç®¡ç†"><a href="#è·¯ç”±ç®¡ç†" class="headerlink" title="è·¯ç”±ç®¡ç†"></a>è·¯ç”±ç®¡ç†</h4><p>åœ¨çœ‹è·¯ç”±å‰æˆ‘ä»¬å…ˆå¤§è‡´äº†è§£ä¸€ä¸‹ç”¨æˆ·è¯·æ±‚æµç¨‹:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Flask è¯·æ±‚ä¸å“åº”è¿”å›</span></span><br><span class="line">æµè§ˆå™¨ -&gt; Route -&gt; Views            -&gt; Views -&gt; Templates -&gt; æµè§ˆå™¨</span><br><span class="line">                         -&gt; modesl /</span><br></pre></td></tr></table></figure></p>
<p>Route(è·¯ç”±): å°†ä»å¯å®¢ç«¯å‘é€è¿‡æ¥çš„è¯·æ±‚åˆ†å‘åˆ°æŒ‡å®šå‡½æ•°ä¸Š;<br>è§„åˆ™è¯­æ³•:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># (1)è·¯ç”±å‚æ•°è·å–</span></span><br><span class="line">&lt;converter:variable_name&gt;</span><br><span class="line"><span class="comment"># converter ç±»å‹</span></span><br><span class="line">  * String: æ¥æ”¶ä»»ä½•æ²¡æœ‰æ–œæ (<span class="string">'/'</span>)çš„æ–‡ä»¶(é»˜è®¤);</span><br><span class="line">  * Int: æ¥æ”¶æ•´å‹;</span><br><span class="line">  * Float: æ¥æ”¶æµ®ç‚¹å‹;</span><br><span class="line">  * Path: æ¥æ”¶è·¯å¾„å¯æ¥æ”¶æ–œçº¿(<span class="string">'/'</span>)ä¸ä»¥å…¶ä½œä¸ºåˆ†å‰²é˜¶æ®µ,å³å…¶ä»`aa/bb/cc`;</span><br><span class="line">  * Uuid: åªæ¥å—uuidå­—ç¬¦ä¸²,å”¯ä¸€ç ä¸€ç§ç”Ÿæˆè§„åˆ™;</span><br><span class="line">  * Any: å¯ä»¥åŒæ—¶æŒ‡å®šå¤šç§è·¯å¾„è¿›è¡Œé™å®š;</span><br><span class="line"><span class="comment"># Example</span></span><br><span class="line">@app.route(<span class="string">'/default/&lt;string:id/'</span>)</span><br><span class="line">@app.route(<span class="string">'/&lt;int:id&gt;/'</span>)</span><br><span class="line">@app.route(<span class="string">'/&lt;uuid:id&gt;/'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># (2) è¯·æ±‚æ–¹æ³•</span></span><br><span class="line">methods=[GET,POST,HEAD,PUT,DELETE,OPTION]</span><br><span class="line"><span class="comment"># Example</span></span><br><span class="line">@app.route(<span class="string">'/api-Rsetful/'</span>,methods=[<span class="string">'GET'</span>,<span class="string">'POST'</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># (3) åå‘è§£æï¼šæ ¹æ®å‡½æ•°åå­—è·å–åå‘è·¯å¾„</span></span><br><span class="line">url_for(<span class="string">'å‡½æ•°åç§°'</span>,å‚æ•°å=value)</span><br></pre></td></tr></table></figure></p>
<p>å®é™…æ¡ˆä¾‹:<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route('/')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">()</span>:</span></span><br><span class="line">  <span class="keyword">return</span> <span class="string">'&lt;b&gt; Hello World! This is Flask Index &lt;/b&gt;'</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/getstring/&lt;id&gt;/')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_str</span><span class="params">(id)</span>:</span></span><br><span class="line">  print(id,<span class="string">":"</span>,type(id))  <span class="comment"># str</span></span><br><span class="line">  <span class="keyword">return</span> <span class="string">'å­—ç¬¦ä¸²: Hello &#123;&#125; Username!'</span>.format(id)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/getint/&lt;int:id&gt;/')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_int</span><span class="params">(id)</span>:</span></span><br><span class="line">  print(id,<span class="string">":"</span>,type(id))  <span class="comment"># int</span></span><br><span class="line">  <span class="keyword">return</span> <span class="string">'æ•°å€¼: &#123;&#125; '</span>.format(id)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/getpath/&lt;path:id&gt;/')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_path</span><span class="params">(id)</span>:</span></span><br><span class="line">  print(id,<span class="string">":"</span>,type(id))  <span class="comment"># str æ³¨æ„ä¸ string çš„ä¸åŒ</span></span><br><span class="line">  <span class="keyword">return</span> <span class="string">'è·¯å¾„: &#123;&#125; '</span>.format(id)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/getuuid/&lt;uuid:uuid&gt;/')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_uuid</span><span class="params">(uuid)</span>:</span></span><br><span class="line">  print(uuid,<span class="string">":"</span>,type(uuid))  <span class="comment"># 277cd8ed-041d-42f7-980c-a0f305288255 : &lt;class 'uuid.UUID'&gt;</span></span><br><span class="line">  <span class="keyword">return</span> <span class="string">'uuid: &#123;&#125; '</span>.format(uuid)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/getany/&lt;any(a,b):id&gt;/')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_any</span><span class="params">(id)</span>:</span></span><br><span class="line">  print(id,<span class="string">":"</span>,type(id)) <span class="comment"># a : &lt;class 'str'&gt;</span></span><br><span class="line">  <span class="keyword">return</span> <span class="string">'id: &#123;&#125; '</span>.format(id)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¯·æ±‚ç±»å‹é™åˆ¶</span></span><br><span class="line"><span class="meta">@app.route('/method/',methods=['GET','POST','DELETE'])</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_method</span><span class="params">()</span>:</span></span><br><span class="line">  <span class="keyword">return</span> <span class="string">'è¯¥è¯·æ±‚ç±»å‹æˆåŠŸ!'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡å®šå‘ä¸åå‘è§£æ</span></span><br><span class="line"><span class="meta">@app.route('/redirect/')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_redirect</span><span class="params">()</span>:</span></span><br><span class="line">  <span class="comment"># ç¡¬ç¼–ç æ–¹å¼</span></span><br><span class="line">  <span class="comment">#return redirect('/')</span></span><br><span class="line">  <span class="comment"># è½¯ç¼–ç æ–¹å¼(åŠ¨æ€è·å–) è“å›¾åç§°.å‡½æ•°</span></span><br><span class="line">  <span class="comment">#return redirect(url_for('app.index'))</span></span><br><span class="line">  <span class="keyword">return</span> redirect(url_for(<span class="string">'app.get_any'</span>,id=<span class="string">'a'</span>))</span><br></pre></td></tr></table></figure></p>
<p>æµ‹è¯•ç»“æœ:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># http://127.0.0.1:8000/getpath/weiyigeek/api/</span></span><br><span class="line">weiyigeek/api : &lt;class <span class="string">'str'</span>&gt;</span><br><span class="line">è·¯å¾„: weiyigeek/api </span><br><span class="line"></span><br><span class="line"><span class="comment"># http://127.0.0.1:8000/getany/a/</span></span><br><span class="line">a : &lt;class <span class="string">'str'</span>&gt;</span><br><span class="line">id: a </span><br><span class="line"></span><br><span class="line"><span class="comment"># http://127.0.0.1:8000/getuuid/277cd8ed-041d-42f7-980c-a0f305288255/</span></span><br><span class="line">277cd8ed-041d-42f7-980c-a0f305288255 : &lt;class <span class="string">'uuid.UUID'</span>&gt;</span><br><span class="line">uuid: 277cd8ed-041d-42f7-980c-a0f305288255 ã€</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡å®šå‘ä¸åå‘è§£æ</span></span><br><span class="line">127.0.0.1:8000/redirect/ ==&gt; http://127.0.0.1:8000/getany/a/</span><br></pre></td></tr></table></figure></p>
<p>æ³¨æ„äº‹é¡¹: </p>
<ul>
<li>1.å¯ä»¥å¤šä¸ªè·¯ç”±æŒ‡å‘ä¸€ä¸ªå‡½æ•°,åœ¨å®é™…å¼€å‘ä¸­åˆ©ç”¨æ•°æ®ç±»å‹è¿›è¡Œå¤„ç†åˆ†ç±»;</li>
<li>2.Flaskè§†å›¾å‡½æ•°é»˜è®¤æ”¯æŒGETã€HEADã€OPTIONç­‰è¯·æ±‚ï¼Œå¦‚éœ€æ”¯æŒå…¶ä»–è¯·æ±‚æ–¹å¼è¯·æ‰‹åŠ¨æ³¨å†Œå³å¯;</li>
<li>3.ä½¿ç”¨é‡å®šå‘ä¸åå‘è§£ææ—¶å€™éœ€è¦å¯¼å…¥flaskåŒ…ä¸­çš„redirectæ¨¡å—å³<code>from flask import redirect,url_for</code>;</li>
</ul>
<p>Q:ä½¿ç”¨æ—¶å€™å®¹å™¨å‡ºç°å¾ªç¯å¼•ç”¨çš„é—®é¢˜?<br>è§£å†³åŠæ³•:</p>
<ul>
<li>æ‡’åŠ è½½: ä½¿ç”¨å‡½æ•°è°ƒç”¨çš„å½¢å¼è¿›è¡ŒåŠ è½½</li>
<li>è“å›¾: å¯¹è·¯ç”±è¿›è¡Œè§„åˆ’(é‡‡ç”¨flask-buleprintæ‰©å±•å®ç°)</li>
</ul>
<p><br></p>
<h5 id="æ‡’åŠ è½½"><a href="#æ‡’åŠ è½½" class="headerlink" title="æ‡’åŠ è½½"></a>æ‡’åŠ è½½</h5><p>æ’ä»¶ä»¥åŠæ•°æ®åº“è¿ç§»éƒ½æ˜¯éœ€è¦ä½¿ç”¨æ‡’åŠ è½½æ–¹æ³•;</p>
<p>é¡¹ç›®æ¦‚å†µ:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$tree</span> ./</span><br><span class="line">./App/</span><br><span class="line">  â”œâ”€â”€ __init__.py</span><br><span class="line">  â”œâ”€â”€ __pycache__  <span class="comment"># Flask è¿è¡Œæ—¶å€™ç¼“å­˜</span></span><br><span class="line">  â”‚   â”œâ”€â”€ __init__.cpython-37.pyc</span><br><span class="line">  â”‚   â””â”€â”€ views.cpython-37.pyc</span><br><span class="line">  â”œâ”€â”€ moudels.py</span><br><span class="line">  â”œâ”€â”€ static</span><br><span class="line">  â”œâ”€â”€ templates</span><br><span class="line">  â””â”€â”€ views.py</span><br><span class="line">setup.py</span><br></pre></td></tr></table></figure></p>
<ul>
<li><p>Step1.Flask å¯åŠ¨å…¥å£: setup.py </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"><span class="comment"># å¯¼å…¥ App ç±»ä¸­æ¨¡å—æ–¹æ³•</span></span><br><span class="line"><span class="keyword">from</span> App <span class="keyword">import</span> create_app</span><br><span class="line"><span class="comment"># è°ƒç”¨Appç±»__init__æ¨¡å—ä¸­çš„æ–¹æ³•</span></span><br><span class="line">app = create_app();</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">  app.run()</span><br></pre></td></tr></table></figure>
</li>
<li><p>Step2.é»˜è®¤åŒ…Appé¡¹ç›®åŒ…:<code>./App/__init__.py</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="comment"># å¯¼å…¥Appç±»Viewæ¨¡å—ä¸­çš„init_routeæ–¹æ³•</span></span><br><span class="line"><span class="keyword">from</span> App.views <span class="keyword">import</span> init_route</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”Ÿæˆappå¯¹è±¡å¹¶å°†å…¶ä¼ é€’ç»™init_routeæ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">create_app</span><span class="params">()</span>:</span></span><br><span class="line">  app = Flask(__name__)</span><br><span class="line">  init_route(app)</span><br><span class="line">  <span class="keyword">return</span> app</span><br></pre></td></tr></table></figure>
</li>
<li><p>Step3.è§†å›¾è·¯ç”±:<code>./App/view.py</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">init_route</span><span class="params">(app)</span>:</span></span><br><span class="line"><span class="meta">  @app.route('/')</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">hello_world</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">f'Request / &lt;br&gt; Hello World'</span></span><br><span class="line"></span><br><span class="line"><span class="meta">  @app.route('/hello')</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">hello</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">f'Request /hello &lt;br&gt; Hello Flask, WeiyiGeek'</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>æ‰§è¡Œç»“æœ:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#  / </span></span><br><span class="line">Request / &lt;br&gt; Hello World</span><br><span class="line"></span><br><span class="line"><span class="comment"># /hello</span></span><br><span class="line">Request /hello &lt;br&gt; Hello Flask, WeiyiGeek</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h5 id="Blueprint"><a href="#Blueprint" class="headerlink" title="Blueprint"></a>Blueprint</h5><p>æè¿°:åŠ¨æ€è·¯ç”±ä¾èµ–äº Blueprint è“å›¾åœ¨ä½¿ç”¨å‰å¿…é¡»è¿›è¡Œå®‰è£…è¯¥æ¨¡å—<code>pip install flask-buleprint</code>,å¹¶ä¸”åœ¨ä½¿ç”¨çš„æ—¶å€™è¿›è¡Œåˆå§‹åŒ–å³åˆ›å»ºè“å›¾å¯¹è±¡;</p>
<p>ä½¿ç”¨å’ŒFlashå¯¹è±¡å·®ä¸å¤šï¼Œå¯ç›´æ¥ä½œä¸ºè£…é¥°å™¨æ¥æ³¨å†Œè·¯ç”±</p>
<p>é¡¹ç›®ç»“æ„:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$tree</span> Buleroute/</span><br><span class="line">Buleroute/</span><br><span class="line">  â”œâ”€â”€ __init__.py</span><br><span class="line">  â”œâ”€â”€ templates</span><br><span class="line">  â”‚   â””â”€â”€ index.html</span><br><span class="line">  â””â”€â”€ view</span><br><span class="line">      â”œâ”€â”€ __init__.py</span><br><span class="line">      â”œâ”€â”€ index.py</span><br><span class="line">      â””â”€â”€ user.py</span><br><span class="line">setup.py  <span class="comment">#ä¸ä¸Šé¢å·®ä¸å¤šåªæ˜¯è°ƒç”¨çš„æ˜¯BulerouteåŒ…__init__æ¨¡å—ä¸­çš„create_app()æ–¹æ³•ä¸‹é¢å°±ä¸é‡å¤å±•ç¤º</span></span><br></pre></td></tr></table></figure></p>
<p>BulerouteåŒ…çš„åˆå§‹åŒ–æ¨¡å—:<code>Buleroute/__init__.py</code><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> Buleroute.view <span class="keyword">import</span> init_view <span class="comment">#viewæ¨¡å—ä¸‹init_viewæ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">create_app</span><span class="params">()</span>:</span></span><br><span class="line">  app = Flask(__name__)</span><br><span class="line">  init_view(app=app)</span><br><span class="line">  <span class="keyword">return</span> app</span><br></pre></td></tr></table></figure></p>
<p>viewåŒ…ä¸­åˆå§‹åŒ–æ¨¡å—:<code>Buleroute/view/__init__.py</code><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> .index <span class="keyword">import</span> index  </span><br><span class="line"><span class="keyword">from</span> .user <span class="keyword">import</span> user</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">init_view</span><span class="params">(app)</span>:</span></span><br><span class="line">  <span class="comment"># app è“å›¾æ³¨å†Œ</span></span><br><span class="line">  app.register_blueprint(index) <span class="comment">#ä¼ å…¥ä¸€ä¸ªåç§°ä¸ºindexçš„è“å›¾</span></span><br><span class="line">  app.register_blueprint(user)</span><br></pre></td></tr></table></figure></p>
<p>è“å›¾(Blueprint):<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># index.py</span></span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Blueprint,render_template</span><br><span class="line"><span class="comment"># è“å›¾å¯¹è±¡  = è“å›¾åç§°</span></span><br><span class="line">index = Blueprint(<span class="string">'index'</span>,__name__)  <span class="comment"># å»ºç«‹ä¸€ä¸ªåç§°ä¸ºindexçš„è“å›¾</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@index.route('/')</span></span><br><span class="line"><span class="meta">@index.route('/index')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index_bule</span><span class="params">()</span>:</span></span><br><span class="line">  <span class="comment">#return f'request / &lt;b&gt;è¿™æ˜¯è“å›¾çš„é¦–é¡µ&lt;/b&gt;'</span></span><br><span class="line">  <span class="keyword">return</span> render_template(<span class="string">'index.html'</span>,msg=<span class="string">"åŸºç¡€å…¥é—¨(æ¨¡æ¿å‚æ•°ä¼ é€’)"</span>)  <span class="comment"># å°†jianiæ¨¡æ¿æ¸²æŸ“æˆä¸ºHTMLå¹¶å‘å…¶ä¼ é€’å‚æ•°</span></span><br></pre></td></tr></table></figure></p>
<p>Flaskæ¨¡æ¿:Buleroute/templates/index.html<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Flask å…¥é—¨å­¦ä¹  - Demo  <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- æ¥æ”¶æ¥è‡ªrender_template()æ–¹æ³•çš„å‚æ•°--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>First : &#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>Second<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>There<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>æ‰§è¡Œç»“æœ:<br><figure class="image-box">
                <a rel=FlaskåŸºç¡€å…¥é—¨å­¦ä¹ ç¬”è®°-1 href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200815210354.png" target="_blank" title="WeiyiGeek.ç»“æœ" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200815210354.png" alt="WeiyiGeek.ç»“æœ" title="" class=""></a>
                <p>WeiyiGeek.ç»“æœ</p>
            </figure></p>
<hr>
<h5 id="MVC-æ¶æ„å®è·µ"><a href="#MVC-æ¶æ„å®è·µ" class="headerlink" title="MVC æ¶æ„å®è·µ"></a>MVC æ¶æ„å®è·µ</h5><p>æè¿°:ä¸‰é˜¶æ”¹è£…é¡¹ç›®ç»“æ„<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- Setup.py é¡¹ç›®ç®¡ç†åŠå…¥å£æ–‡ä»¶</span><br><span class="line">  - App åº”ç”¨é¡¹ç›®ç›®å½•(MVC)</span><br><span class="line">    - __init__ åˆå§‹åŒ–æ–‡ä»¶</span><br><span class="line">    - ext      extensionæ‰©å±•åº“é™¤äº†å’Œè·¯ç”±ç›¸å…³</span><br><span class="line">    - setting  configä»¥åŠå…¨å±€é¡¹ç›®é…ç½®</span><br><span class="line">    - view     apiså’Œè·¯ç”±è§†å›¾å‡½æ•°</span><br><span class="line">    - models   å®šåˆ¶æ¨¡å‹ä¸æ•°æ®åº“ç›¸å…³</span><br><span class="line">    - static   é™æ€èµ„æºæ–‡ä»¶</span><br><span class="line">    - template ç½‘é¡µæ¨¡æ¿æ–‡ä»¶</span><br></pre></td></tr></table></figure></p>
<p>setup.py<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"><span class="comment"># from App import create_app</span></span><br><span class="line"><span class="comment"># from Buleroute import create_app</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> SQLAlchemy <span class="keyword">import</span> create_app</span><br><span class="line"><span class="keyword">from</span> flask_script <span class="keyword">import</span> Manager</span><br><span class="line"><span class="keyword">from</span> flask_migrate <span class="keyword">import</span> MigrateCommand</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç³»ç»Ÿè·å–ç¯å¢ƒå˜é‡æ¥è¿›è¡Œåˆ‡æ¢æ•°æ®åº“</span></span><br><span class="line">env = os.environ.get(<span class="string">"FLASK_ENV"</span>,<span class="string">"develop"</span>)</span><br><span class="line"></span><br><span class="line">app = create_app(env)</span><br><span class="line">manager = Manager(app=app)</span><br><span class="line">manager.add_command(<span class="string">'db'</span>,MigrateCommand)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">  manager.run()</span><br></pre></td></tr></table></figure></p>
<p><code>App/__init__.py</code><br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># MVC</span></span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> SQLAlchemy.view <span class="keyword">import</span> init_view</span><br><span class="line"><span class="keyword">from</span> .ext <span class="keyword">import</span> init_ext</span><br><span class="line"><span class="keyword">from</span> .setting <span class="keyword">import</span> envs</span><br><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> User</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">create_app</span><span class="params">(env)</span>:</span></span><br><span class="line">  app = Flask(__name__)</span><br><span class="line">  <span class="comment"># æœªé‡‡ç”¨ç¯å¢ƒåˆ‡æ¢æ—¶å€™</span></span><br><span class="line">  <span class="comment"># init_param(app)</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># é‡‡ç”¨ç¯å¢ƒå˜é‡è¿›è¡Œå¼€å‘å’Œç”Ÿäº§ç¯å¢ƒåˆ‡æ¢</span></span><br><span class="line">  app.config.from_object(envs.get(env))</span><br><span class="line">  <span class="comment"># åˆå§‹åŒ–æ‰©å±•</span></span><br><span class="line">  init_ext(app)</span><br><span class="line">  <span class="comment"># åˆå§‹åŒ–è·¯ç”±</span></span><br><span class="line">  init_view(app=app)</span><br><span class="line">  <span class="keyword">return</span> app</span><br></pre></td></tr></table></figure></p>
<p>ext.py<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¬¬ä¸‰æ–¹æ‰©å±•åŒ…åˆå§‹åŒ–åŠ è½½</span></span><br><span class="line"><span class="keyword">from</span> flask_sqlalchemy <span class="keyword">import</span> SQLAlchemy</span><br><span class="line"><span class="keyword">from</span> flask_migrate <span class="keyword">import</span> Migrate</span><br><span class="line"></span><br><span class="line">db = SQLAlchemy()</span><br><span class="line">migrate = Migrate()</span><br><span class="line"></span><br><span class="line"><span class="comment"># ååˆå§‹åŒ–åŒ–æ‡’åŠ è½½</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">init_ext</span><span class="params">(app)</span>:</span></span><br><span class="line">  db.init_app(app)</span><br><span class="line">  migrate.init_app(app, db)</span><br></pre></td></tr></table></figure></p>
<p>Day2\SQLAlchemy\setting.py<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¬¬ä¸‰æ–¹åº“æ‰€éœ€å‚æ•°è®¾ç½®</span></span><br><span class="line"><span class="comment"># def init_param(app):</span></span><br><span class="line"><span class="comment"># # æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²é€šç”¨: æ•°æ®åº“+é©±åŠ¨://ç”¨æˆ·å:å¯†ç @ä¸»æœº:ç«¯å£/å…·ä½“åº“?å‚æ•°</span></span><br><span class="line"><span class="comment">#   app.config['SQLALCHEMY_DATABASE_URI'] = "sqlite:///sqlite.db"</span></span><br><span class="line"><span class="comment">#   app.config['SQLALCHEMY_TRACK_MODIFICATIONS'] = False</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_db_uri</span><span class="params">(dbinfo)</span>:</span></span><br><span class="line">  engine = dbinfo.get(<span class="string">"ENGINE"</span>) <span class="keyword">or</span> <span class="string">"sqlite"</span></span><br><span class="line">  driver = dbinfo.get(<span class="string">"DRIVER"</span>) <span class="keyword">or</span> <span class="string">"sqlite"</span></span><br><span class="line">  user = dbinfo.get(<span class="string">"USER"</span>) <span class="keyword">or</span> <span class="string">""</span></span><br><span class="line">  password = dbinfo.get(<span class="string">"PASSWORD"</span>) <span class="keyword">or</span> <span class="string">""</span></span><br><span class="line">  host = dbinfo.get(<span class="string">"HOST"</span>) <span class="keyword">or</span> <span class="string">""</span></span><br><span class="line">  port = dbinfo.get(<span class="string">"PORT"</span>) <span class="keyword">or</span> <span class="string">""</span></span><br><span class="line">  name = dbinfo.get(<span class="string">"NAME"</span>) <span class="keyword">or</span> <span class="string">""</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> engine == <span class="string">"sqlite"</span>:</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"&#123;&#125;:///&#123;&#125;"</span>.format(engine,name)</span><br><span class="line">  <span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"&#123;&#125;+&#123;&#125;://&#123;&#125;:&#123;&#125;@&#123;&#125;:&#123;&#125;/&#123;&#125;"</span>.format(engine,driver,user,password,host,port,name)</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DevelopConfig</span>:</span></span><br><span class="line">  <span class="comment"># SQLALCHEMY è®¾ç½®ç¯å¢ƒå˜é‡</span></span><br><span class="line">  DEBUG = Ture</span><br><span class="line">  SQLALCHEMY_TRACK_MODIFICATIONS = <span class="literal">False</span></span><br><span class="line">  DBINFO = &#123;</span><br><span class="line">    <span class="string">"ENGINE"</span>: <span class="string">"sqlite"</span>,</span><br><span class="line">    <span class="string">"NAME"</span>: <span class="string">"sqlite.db"</span></span><br><span class="line">  &#125;</span><br><span class="line">  SQLALCHEMY_DATABASE_URI = get_db_uri(DBINFO)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProductConfig</span>:</span></span><br><span class="line">  DEBUG = <span class="literal">False</span></span><br><span class="line">  SQLALCHEMY_TRACK_MODIFICATIONS = <span class="literal">False</span></span><br><span class="line">  DBINFO = &#123;</span><br><span class="line">    <span class="string">"ENGINE"</span>: <span class="string">"mysql"</span>,</span><br><span class="line">    <span class="string">"DRIVER"</span>: <span class="string">"pymysql"</span>,</span><br><span class="line">    <span class="string">"USER"</span>: <span class="string">"root"</span>,</span><br><span class="line">    <span class="string">"PASSWORD"</span>: <span class="string">"Pass123456."</span>,</span><br><span class="line">    <span class="string">"HOST"</span>: <span class="string">"127.0.0.1"</span>,</span><br><span class="line">    <span class="string">"PORT"</span>: <span class="string">"3306"</span>,</span><br><span class="line">    <span class="string">"NAME"</span>: <span class="string">"FlaskTest"</span></span><br><span class="line">  &#125;</span><br><span class="line">  SQLALCHEMY_DATABASE_URI = get_db_uri(DBINFO)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯ä»¥ç›´æ¥å‘app.configä¼ é€’ç±»å¯¹è±¡è¾¾åˆ°åˆ‡æ¢æµ‹è¯•ç¯å¢ƒä¸ç”Ÿäº§ç¯å¢ƒ</span></span><br><span class="line">envs = &#123;</span><br><span class="line">  <span class="string">"develop"</span>: DevelopConfig,</span><br><span class="line">  <span class="string">"product"</span>: ProductConfig</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Day2\SQLAlchemy\models.py<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"><span class="comment"># ç¬¬ä¸‰æ–¹æ¨¡å—è‡ªå®šç±»å£°æ˜</span></span><br><span class="line"><span class="keyword">from</span> SQLAlchemy.ext <span class="keyword">import</span> db</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">save</span><span class="params">(obj)</span>:</span></span><br><span class="line">  db.session.add(obj)</span><br><span class="line">  db.session.commit()</span><br><span class="line"></span><br><span class="line"><span class="comment"># User ç±»</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span><span class="params">(db.Model)</span>:</span></span><br><span class="line">  __tablename__ = <span class="string">'user'</span>   <span class="comment">#è¡¨å</span></span><br><span class="line">  id = db.Column(db.Integer, primary_key=Ture)</span><br><span class="line">  username = db.Column(db.String(<span class="number">16</span>))</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">commit</span><span class="params">(self)</span>:</span></span><br><span class="line">    save(self)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Member</span><span class="params">(db.Model)</span>:</span></span><br><span class="line">  id = db.Column(db.Integer, primary_key=Ture)</span><br><span class="line">  subname = db.Column(db.String(<span class="number">16</span>))</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">commit</span><span class="params">(self,db)</span>:</span></span><br><span class="line">    save(delf,db)</span><br></pre></td></tr></table></figure></p>
<p>Day2\SQLAlchemy\view\db.py: æ•°æ®åº“æ¨¡å‹äº¤äº’ä¸è“å›¾æ­¤å¤„ä½“ç°äº†MVTæ€æƒ³ï¼Œæ­¤å¤„çš„Viewè¡¨ç¤ºäº†æ§åˆ¶å™¨æ¥å—è¯·æ±‚å¤„ç†é€»è¾‘<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Blueprint</span><br><span class="line"><span class="keyword">from</span> SQLAlchemy.models <span class="keyword">import</span> db,User</span><br><span class="line">database = Blueprint(<span class="string">'database'</span>,__name__)</span><br><span class="line"></span><br><span class="line"><span class="meta">@database.route('/createdb/')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">create_db</span><span class="params">()</span>:</span></span><br><span class="line">  db.create_all();</span><br><span class="line">  <span class="keyword">return</span> <span class="string">'åˆ›å»ºæˆåŠŸ'</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@database.route('/adduser/')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">user_add</span><span class="params">()</span>:</span></span><br><span class="line">  user = User()</span><br><span class="line">  user.username = <span class="string">"WeiyiGeek"</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># # å®˜æ–¹</span></span><br><span class="line">  <span class="comment"># db.session.add(user)</span></span><br><span class="line">  <span class="comment"># db.session.commit()</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># åœ¨ç±»ä¸­è‡ªå®šä¹‰æ–¹æ³•(å®é™…æ˜¯å¯¹ä¸Šé¢çš„ä¸¤ä¸ªæ–¹æ³•çš„è°ƒç”¨)</span></span><br><span class="line">  user.commit()</span><br><span class="line">  <span class="keyword">return</span> <span class="string">"username %s Insert Successful!"</span> %(user.username)</span><br><span class="line"></span><br><span class="line"><span class="meta">@database.route('/dropdb/')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">drop_db</span><span class="params">()</span>:</span></span><br><span class="line">  db.drop_all()</span><br><span class="line">  <span class="keyword">return</span> <span class="string">'åˆ é™¤æˆåŠŸ'</span></span><br></pre></td></tr></table></figure></p>
<p>è¡¥å……è¯´æ˜:<br>Flask æ‰©å±•è°ƒç”¨å›¾ç¤º(äºŒé˜¶æ‹†åˆ†):<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">                             |-----------------------&gt; Ext</span><br><span class="line">Control Manager ---&gt; __init__                         /</span><br><span class="line">                             |----&gt; Views ---&gt; Models</span><br></pre></td></tr></table></figure><br><figure class="image-box">
                <a rel=FlaskåŸºç¡€å…¥é—¨å­¦ä¹ ç¬”è®°-1 href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200905213233.png" target="_blank" title="WeiyiGeek.åŸºç¡€ç»“æ„(ä¸‰é˜¶æ‹†åˆ†)" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200905213233.png" alt="WeiyiGeek.åŸºç¡€ç»“æ„(ä¸‰é˜¶æ‹†åˆ†)" title="" class=""></a>
                <p>WeiyiGeek.åŸºç¡€ç»“æ„(ä¸‰é˜¶æ‹†åˆ†)</p>
            </figure></p>
<h4 id="å†…ç½®å¯¹è±¡"><a href="#å†…ç½®å¯¹è±¡" class="headerlink" title="å†…ç½®å¯¹è±¡"></a>å†…ç½®å¯¹è±¡</h4><p>Flaskå››å¤§å†…ç½®å¯¹è±¡å¦‚ä¸‹æ‰€ç¤º:</p>
<ul>
<li>Request: request</li>
<li>Session: session</li>
<li>G: g</li>
<li>Config: åœ¨æ¨¡æ¿ä¸­é‡‡ç”¨configè€Œåœ¨Pythonä»£ç ä¸­æ˜¯app.config;</li>
</ul>
<h5 id="Request"><a href="#Request" class="headerlink" title="Request"></a>Request</h5><p>æè¿°:requestæ˜¯æœåŠ¡å™¨åœ¨æ¥æ”¶åˆ°å®¢æˆ·ç«¯è¯·æ±‚åä¼šè‡ªåŠ¨åˆ›å»ºRequestå¯¹è±¡(æ³¨æ„ç”±Flaskæ¡†æ¶åˆ›å»ºå¹¶ä¸”Requestå¯¹è±¡ä¸å¯ä¿®æ”¹);<br>å¯¼å…¥æ ¼å¼:<code>from flask import request</code></p>
<p>å¯¹è±¡å±æ€§:<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">- url: å®Œæ•´è¯·æ±‚åœ°å€</span><br><span class="line">- url_root: ä¸»æœºä¸ç«¯å£å·çš„URL</span><br><span class="line">- path: è·¯ç”±ä¸­çš„è·¯å¾„</span><br><span class="line">- host_url: ä¸»æœºä¸ç«¯å£å·çš„URL</span><br><span class="line">- base_url: å»æ‰GETå‚æ•°çš„URL</span><br><span class="line">- method: è¯·æ±‚æ–¹æ³•</span><br><span class="line">- remote_addr: è¯·æ±‚çš„å®¢æˆ·ç«¯åœ°å€</span><br><span class="line">- args: GETè¯·æ±‚å‚æ•°</span><br><span class="line">- form: POSTè¯·æ±‚å‚æ•°</span><br><span class="line">- valuesï¼šè¿”å›è¯·æ±‚ä¸­çš„å‚æ•°å’Œform</span><br><span class="line">- date: è¯·æ±‚çš„æ•°æ®</span><br><span class="line">- files: è¯·æ±‚ä¸Šä¼ çš„æ–‡ä»¶</span><br><span class="line">- headers: è¯·æ±‚å¤´</span><br><span class="line">- cookies: è¯·æ±‚ä¸­çš„cookie</span><br><span class="line">- session: è¯·æ±‚ä¸­çš„session</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¯­æ³•è¯´æ˜</span></span><br><span class="line"><span class="keyword">return</span> request.method                  <span class="comment">#POST</span></span><br><span class="line"><span class="keyword">return</span> json.dumps(request.form)        <span class="comment">#&#123;"username": "123", "password": "1234"&#125;</span></span><br><span class="line"><span class="keyword">return</span> json.dumps(request.args)        <span class="comment">#urlï¼šhttp://192.168.1.183:5000/login?a=1&amp;b=2 è¿”å›å€¼ï¼š&#123;"a": "1", "b": "2"&#125;</span></span><br><span class="line"><span class="keyword">return</span> str(request.values)             <span class="comment">#CombinedMultiDict([ImmutableMultiDict([('a', '1'), ('b', '2')]), ImmutableMultiDict([('username', '123'), ('password', '1234')])])</span></span><br><span class="line"><span class="keyword">return</span> json.dumps(request.cookies)     <span class="comment">#cookiesä¿¡æ¯</span></span><br><span class="line"><span class="keyword">return</span> str(request.headers)            <span class="comment">#headersä¿¡æ¯</span></span><br><span class="line"><span class="keyword">return</span> request.headers.get(<span class="string">'User-Agent'</span>)      <span class="comment">#è·å–User-Agentä¿¡æ¯</span></span><br><span class="line"><span class="keyword">return</span> <span class="string">'url: %s , script_root: %s , path: %s , base_url: %s , url_root : %s'</span> % (request.url,request.script_root, request.path,request.base_url,request.url_root)</span><br><span class="line"><span class="comment"># url: http://192.168.1.183:5000/testrequest?a&amp;b , </span></span><br><span class="line"><span class="comment"># script_root: , </span></span><br><span class="line"><span class="comment"># path: /testrequest ,</span></span><br><span class="line"><span class="comment"># base_url: http://192.168.1.183:5000/testrequest , </span></span><br><span class="line"><span class="comment"># url_root : http://192.168.1.183:5000/</span></span><br></pre></td></tr></table></figure></p>
<hr>
<p>ImmutableMutiltiDict ç±»ä¼¼äºå­—å…¸çš„æ•°æ®ç±»å‹ä¸å­—å…¸çš„åŒºåˆ«å°±æ˜¯å¯ä»¥å­˜åœ¨ç›¸åŒçš„é”®ä»¥åˆ—è¡¨çš„æ–¹å¼å­˜æ”¾æ¯”å¦‚<code>[(key,value)]</code>;<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¸¸ç”¨è·å–æ–¹å¼</span></span><br><span class="line">dict = ImmutableMutiltiDict</span><br><span class="line"><span class="comment"># è·å–å•ä¸ªkeyçš„å€¼</span></span><br><span class="line">dict.get(<span class="string">'key'</span>)</span><br><span class="line"><span class="comment"># è·å–æŒ‡å®škeyå¯¹åº”çš„æ‰€æœ‰å€¼</span></span><br><span class="line">dict.getlist(<span class="string">'key'</span>)</span><br></pre></td></tr></table></figure></p>
<p>å®é™…æ¡ˆä¾‹1:<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@demo2.route('/request/&lt;path:url&gt;',methods=['GET','POST'])</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">req</span><span class="params">(url)</span>:</span></span><br><span class="line">  req_method = <span class="string">''</span></span><br><span class="line">  <span class="keyword">if</span> request.method.upper() == <span class="string">'GET'</span>:</span><br><span class="line">    req_method = <span class="string">'GET Successful!'</span></span><br><span class="line">  <span class="keyword">elif</span> request.method.upper() == <span class="string">'POST'</span>:</span><br><span class="line">    req_method = <span class="string">'POST Successful!'</span></span><br><span class="line">  <span class="keyword">else</span>:</span><br><span class="line">    req_method = request.method.upper()+<span class="string">'Not Support!'</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># request å±æ€§æ¼”ç¤º</span></span><br><span class="line">  <span class="keyword">return</span> <span class="string">" Current Time: &#123;&#125;&lt;br&gt;Header:&lt;pre&gt;&#123;&#125;&lt;/pre&gt;&lt;br&gt; HOST: &#123;&#125; &lt;br&gt;URL: &#123;&#125; &lt;br&gt;Method: &#123;&#125; &lt;br&gt;Client IP: &#123;&#125; &lt;br&gt;"</span>.format(datetime.datetime.now().strftime(<span class="string">"%Y-%m-%d %H:%M:%S"</span>),request.headers, request.host_url, request.base_url, req_method, request.remote_addr)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰§è¡Œç»“æœ:http://127.0.0.1:8000/request/user/weiyigeek</span></span><br><span class="line"><span class="comment"># Current Time: 2020-09-07 17:52:50</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Header:</span></span><br><span class="line"><span class="comment"># Host: 127.0.0.1:8000</span></span><br><span class="line"><span class="comment"># User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:80.0) Gecko/20100101 Firefox/80.0</span></span><br><span class="line"><span class="comment"># Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8</span></span><br><span class="line"><span class="comment"># Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2</span></span><br><span class="line"><span class="comment"># Accept-Encoding: gzip, deflate</span></span><br><span class="line"><span class="comment"># Connection: keep-alive</span></span><br><span class="line"><span class="comment"># Upgrade-Insecure-Requests: 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># HOST: http://127.0.0.1:8000/</span></span><br><span class="line"><span class="comment"># URL: http://127.0.0.1:8000/request/user/weiyigeek</span></span><br><span class="line"><span class="comment"># Method: GET Successful!</span></span><br><span class="line"><span class="comment"># Client IP: 127.0.0.1</span></span><br></pre></td></tr></table></figure></p>
<p>åŸºç¡€ç¤ºä¾‹2:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">@demo2.route(<span class="string">'/login/'</span>,methods=[<span class="string">'GET'</span>,<span class="string">'POST'</span>])</span><br><span class="line">def send_rep():</span><br><span class="line">  <span class="comment"># GET</span></span><br><span class="line">  <span class="built_in">print</span>(request.args,<span class="string">"\n"</span>,<span class="built_in">type</span>(request.args));</span><br><span class="line">  <span class="built_in">print</span>(request.args.getlist(<span class="string">'a'</span>))</span><br><span class="line"></span><br><span class="line">  <span class="comment"># POST</span></span><br><span class="line">  <span class="built_in">print</span>(request.form,<span class="string">"\n"</span>,<span class="built_in">type</span>(request.form))</span><br><span class="line"></span><br><span class="line">  <span class="comment"># ç™»å½•ç¤ºä¾‹</span></span><br><span class="line">  <span class="keyword">if</span> request.method.upper() == <span class="string">'POST'</span>:</span><br><span class="line">    <span class="keyword">if</span> request.form[<span class="string">'username'</span>] == <span class="string">'weiyigeek'</span> and request.form[<span class="string">'password'</span>] == <span class="string">'pass'</span>:</span><br><span class="line">      <span class="built_in">return</span> <span class="string">'Ture'</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">      <span class="comment">#å½“formä¸­çš„ä¸¤ä¸ªå­—æ®µå†…å®¹ä¸ä¸€è‡´æ—¶ï¼Œè¿”å›æˆ‘ä»¬æ‰€éœ€è¦çš„æµ‹è¯•ä¿¡æ¯éœ€è¦æ›¿æ¢çš„éƒ¨åˆ†</span></span><br><span class="line">      <span class="built_in">return</span> str(request.headers)       </span><br><span class="line">  <span class="keyword">else</span>:</span><br><span class="line">      <span class="built_in">return</span> render_template(<span class="string">'login.html'</span>)</span><br><span class="line"></span><br><span class="line">  <span class="built_in">return</span> <span class="string">'successful!'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰§è¡Œç»“æœ</span></span><br><span class="line"><span class="comment"># GET</span></span><br><span class="line">ImmutableMultiDict([]) </span><br><span class="line"> &lt;class <span class="string">'werkzeug.datastructures.ImmutableMultiDict'</span>&gt;</span><br><span class="line">[]</span><br><span class="line"><span class="comment"># POST</span></span><br><span class="line">ImmutableMultiDict([(<span class="string">'username'</span>, <span class="string">'weiyigeek'</span>), (<span class="string">'password'</span>, <span class="string">'pass'</span>)])</span><br><span class="line"> &lt;class <span class="string">'werkzeug.datastructures.ImmutableMultiDict'</span></span><br></pre></td></tr></table></figure></p>
<p>åŸºç¡€ç¤ºä¾‹3:<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> werkzeug.utils <span class="keyword">import</span> secure_filename</span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Blueprint,request,render_template</span><br><span class="line"><span class="comment"># dateæ˜¯è¯·æ±‚çš„æ•°æ®ï¼Œfileséšè¯·æ±‚ä¸Šä¼ çš„æ–‡ä»¶</span></span><br><span class="line"><span class="meta">@demo2.route('/upload',methods=['GET','POST'])</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">upload</span><span class="params">()</span>:</span></span><br><span class="line">  <span class="keyword">if</span> request.method == <span class="string">'POST'</span>:</span><br><span class="line">      print(request.date,<span class="string">" : "</span>, type(request.date))</span><br><span class="line">      print(request.files,<span class="string">" : "</span>, type(request.files))</span><br><span class="line">      f = request.files[<span class="string">'file'</span>]</span><br><span class="line">      filename = secure_filename(f.filename)</span><br><span class="line">      <span class="comment">#f.save(os.path.join('app/static',filename))</span></span><br><span class="line">      f.save(<span class="string">'App/static/'</span>+str(filename))</span><br><span class="line">      <span class="keyword">return</span> <span class="string">'ok'</span></span><br><span class="line">  <span class="keyword">else</span>:</span><br><span class="line">      <span class="keyword">return</span> render_template(<span class="string">'upload.html'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># html</span></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;form action=<span class="string">"upload"</span> method=<span class="string">"post"</span> enctype=<span class="string">"multipart/form-data"</span>&gt;</span><br><span class="line">            &lt;input type=<span class="string">"text"</span> name=<span class="string">"flag"</span> value=<span class="string">"weiyigeek"</span>&gt;</span><br><span class="line">            &lt;input type=<span class="string">"file"</span> name=<span class="string">"file"</span> /&gt;&lt;br /&gt;</span><br><span class="line">            &lt;input type=<span class="string">"submit"</span> value=<span class="string">"Upload"</span> /&gt;</span><br><span class="line">        &lt;/form&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;     </span><br><span class="line"></span><br><span class="line"><span class="comment"># æ³¨æ„:ä¸Šä¼ æ–‡ä»¶éœ€æ±‚ç®¡ç†å‘˜æƒé™</span></span><br><span class="line"><span class="comment"># powershell start-process cmd -verb runas</span></span><br><span class="line"><span class="comment"># cd /d E:\githubProject\Study-Promgram\Python3\Flask\Day3</span></span><br><span class="line"><span class="comment"># python .\Setup.py runserver -h 0.0.0.0 -p 8000 -r -d --threaded</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰§è¡Œç»“æœ</span></span><br><span class="line"><span class="literal">None</span>  :  &lt;<span class="class"><span class="keyword">class</span> '<span class="title">NoneType</span>'&gt;</span></span><br><span class="line"><span class="class"><span class="title">ImmutableMultiDict</span><span class="params">([<span class="params">(<span class="string">'file'</span>, &lt;FileStorage: <span class="string">'QQæˆªå›¾20200907112813.jpg'</span> <span class="params">(<span class="string">'image/jpeg'</span>)</span>&gt;)</span>])</span>  :</span>  &lt;<span class="class"><span class="keyword">class</span> '<span class="title">werkzeug</span>.<span class="title">datastructures</span>.<span class="title">ImmutableMultiDict</span>'&gt;</span></span><br><span class="line"><span class="class">127.0.0.1 - - [07/<span class="title">Sep</span>/2020 18:</span><span class="number">23</span>:<span class="number">23</span>] <span class="string">"POST /upload HTTP/1.1"</span> <span class="number">200</span> -</span><br></pre></td></tr></table></figure></p>
<p><br/></p>
<h5 id="Response"><a href="#Response" class="headerlink" title="Response"></a>Response</h5><p>æè¿°: æœåŠ¡å™¨è¿”å›ç»™å®¢æˆ·ç«¯çš„æ•°æ®ï¼Œæœ‰ç¨‹åºå¼€å‘è€…åˆ›å»ºè¿”å›Reponseå¯¹è±¡;<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1.é€šè¿‡ç›´æ¥è¿”å›å­—ç¬¦ä¸²ä¸çŠ¶æ€ã€ä¹Ÿå¯é‡‡ç”¨Reponseå¯¹è±¡æˆ–è€…é€šè¿‡make_response(data,code)å‡½æ•°ä½¿ä¼ é€’è¿›æ¥çš„èµ„æºåˆ›å»ºä¸€ä¸ªresponse,å‰è€…è¿”å›çš„æ•°æ®å†…å®¹åè€…è¿”å›çš„çŠ¶æ€ç ;</span><br><span class="line">2.è¿”å›çš„æ–‡æœ¬å†…å®¹å’ŒçŠ¶æ€ç </span><br><span class="line">3.åˆ©ç”¨render_templateå°†æ¨¡æ¿æ¸²æŸ“æˆä¸ºHTML</span><br><span class="line">4.è¿”å›æ¨¡æ¿(å®è´¨ä¸2ä¸€æ ·)</span><br><span class="line">5.é‡å®šå‘ redirect() æˆ–è€… url_for(<span class="string">'å‡½æ•°å'</span>,å‚æ•°=value)</span><br><span class="line">6.ç»ˆæ­¢ä¿¡å· abort</span><br><span class="line">7.é’©å­å‡½æ•°: å¼‚å¸¸æ•è·æˆ–è€…errorhandler(appä½œç”¨äºå…¨å±€ã€è“å›¾åªèƒ½æ•è·æœ¬èº«è“å›¾)</span><br><span class="line">8.</span><br></pre></td></tr></table></figure></p>
<p>è¯­æ³•:<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ–¹å¼1.return ä¸ render_template() æ–¹å¼</span></span><br><span class="line"><span class="meta">@app.route('/reponse/')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_reponse</span><span class="params">()</span>:</span></span><br><span class="line">  <span class="comment"># return "Reponse Test", 201 </span></span><br><span class="line">  <span class="comment"># return render_template('hello.html'), 201 # ç›¸å·®ä¸å¤§éƒ½æ˜¯è¿”å›çš„å­—ç¬¦ä¸²</span></span><br><span class="line">  <span class="keyword">return</span> Response(<span class="string">'æˆ‘æ˜¯ç›´æ¥è¿”å›çš„Reponseå¯¹è±¡!'</span>)   <span class="comment"># ç›´æ¥æ„å»ºResponseå¯¹è±¡è¿”å›è¿”å›å®¢æˆ·ç«¯çŠ¶æ€ç ä¸º201</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–¹å¼2.make_response æ–¹å¼</span></span><br><span class="line"><span class="meta">@app.route('/reponse/')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_reponse</span><span class="params">()</span>:</span></span><br><span class="line">  response = make_response(render_template(<span class="string">'error.html'</span>), <span class="number">404</span>)</span><br><span class="line">  <span class="keyword">return</span> response</span><br></pre></td></tr></table></figure></p>
<p><strong>å¼‚å¸¸å¤„ç†:</strong><br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸­æ­¢å¤„ç†: ç›´æ¥è¿”å›å¼‚å¸¸ç å“åº”çš„æè¿°</span></span><br><span class="line">abort(å¼‚å¸¸ç )</span><br><span class="line">abort(<span class="number">404</span>)  <span class="comment"># å¯ç›´æ¥å‘å®¢æˆ·ç«¯æŠ›404å“åº”ç ,å…¶æ•°å€¼åœ¨mappingå¯¹åº”çš„é”™è¯¯ç å¦åˆ™å¼‚å¸¸æŠ›å‡º(å…¶æœ¬è´¨å°±æ˜¯ä¸€ä¸ªexception)å³HttpExeception</span></span><br><span class="line">abort(Response(<span class="string">'404 Not Found!'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ•è·å¼‚å¸¸ï¼šå®ç°é¡µé¢å‹å¥½åŒ–ä½†æ˜¯éœ€è¦æ³¨å†Œerrorhandler;</span></span><br><span class="line"><span class="meta">@app.errorhandler(404):</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">not_found</span><span class="params">()</span>:</span></span><br><span class="line">  <span class="keyword">return</span> <span class="string">'404 , Not Found!'</span>, <span class="number">404</span></span><br></pre></td></tr></table></figure></p>
<p><strong>åŸºç¡€å®ä¾‹</strong>:<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¤ºä¾‹1.è¿”å›ç½‘é¡µåŠå…¶å¼•æ“æ¨¡æ¿å‚æ•°</span></span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> render_template </span><br><span class="line">....</span><br><span class="line"><span class="meta">@app.errorhandler(404)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">not_found</span><span class="params">(error)</span>:</span></span><br><span class="line">  print(error)</span><br><span class="line">  print(type(error))</span><br><span class="line">  <span class="keyword">return</span> render_template(<span class="string">'404.html'</span>,title=<span class="string">"404 Not Found"</span>,msg=error)  <span class="comment"># æ³¨æ„å¯¼åŒ…</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Day3\App\templates\404.html</span></span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;h1&gt;&#123;&#123;title&#125;&#125;&lt;/h1&gt;</span><br><span class="line">  &lt;br&gt;</span><br><span class="line">  &lt;pre&gt;&#123;&#123;msg&#125;&#125;&lt;/pre&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¯·æ±‚ /robots.txt æ—¶ å“åº”æŒ‡å®šæ–‡æœ¬ç±»å‹çš„èµ„æºã€‚</span></span><br><span class="line"><span class="meta">@app.route('/robots.txt")</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">robots</span><span class="params">()</span>:</span></span><br><span class="line">  response = make_response(render_template(<span class="string">'robots.txt'</span>),<span class="number">200</span>)</span><br><span class="line">  response.headers=&#123;<span class="string">'context-type'</span>:<span class="string">'text/plain'</span>&#125;</span><br><span class="line">  <span class="keyword">return</span> reponse</span><br></pre></td></tr></table></figure></p>
<p>æ‰§è¡Œç»“æœ:<br><figure class="image-box">
                <a rel=FlaskåŸºç¡€å…¥é—¨å­¦ä¹ ç¬”è®°-1 href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200914120334.png" target="_blank" title="WeiyiGeek.error-404" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200914120334.png" alt="WeiyiGeek.error-404" title="" class=""></a>
                <p>WeiyiGeek.error-404</p>
            </figure></p>
<p>æ³¨æ„å®ç°:</p>
<ul>
<li>(1) åœ¨FLASKä¸­è·å–è¯·æ±‚å‚æ•°å¯ä»¥é€šè¿‡argså±æ€§å¹¶ä¸”æ”¯æŒæ‰€æœ‰è¯·æ±‚,è€Œformå±æ€§æ”¯æŒéGETè¯·æ±‚çš„å…¶ä»–æ–¹æ³•æ¯”å¦‚(put/patch),å…¶è·å–çš„æ•°æ®ç±»å‹<code>ImmutableMultiDict</code>å®é™…ä¸Šæ˜¯å­—å…¸(Dict)çš„å†æ¬¡å°è£…;</li>
</ul>
<hr>
<h4 id="ä¼šè¯ä¿æŒ"><a href="#ä¼šè¯ä¿æŒ" class="headerlink" title="ä¼šè¯ä¿æŒ"></a>ä¼šè¯ä¿æŒ</h4><p>æè¿°: æˆ‘ä»¬çŸ¥é“å­¦ä¹ WEBåç«¯è¯­è¨€æ—¶å®ƒæ˜¯æˆ‘ä»¬éƒ½ç»•ä¸å¼€çš„è¯é¢˜ , ç½‘é¡µä¸­é‡‡ç”¨ä¼šè¯ä¿æŒæŠ€æœ¯è¿›è¡Œè·¨è¯·æ±‚å…±äº«æ•°æ®ï¼Œå®é™…ä¸Šå®ƒå°±æ˜¯å­˜å‚¨è®¿é—®è€…çš„è®¿é—®ç¥¨æ®;</p>
<p>å…¶å‡ºç°åŸå› :</p>
<ul>
<li>1) Web å¼€å‘ä¸­HTTPéƒ½æ˜¯çŸ­è¿æ¥(è¯·æ±‚å“åº”åå³å…³é—­å†æ¬¡è¯·æ±‚å°±æ˜¯å…¨æ–°è¯·æ±‚)</li>
<li>2) HTTP è¯·æ±‚æ˜¯æ— çŠ¶æ€çš„</li>
</ul>
<p>å®ç°ä¼šè¯ä¿æŒçš„ä¸‰ç§æ–¹å¼:</p>
<ul>
<li>(1) Cookie </li>
<li>(2) Session</li>
<li>(3) Token</li>
</ul>
<p><br/></p>
<h5 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h5><p>æè¿°:å®ƒæ˜¯å®¢æˆ·ç«¯ä¼šè¯æŠ€æœ¯,å…¶æ•°æ®ä»¥key-vakyeçš„å½¢å¼å­˜å‚¨åœ¨å®¢æˆ·ç«¯(é‡è¦ä¸šåŠ¡ä¸å»ºè®®ä½¿ç”¨ä¼šå¯¼è‡´ä¸€å®šçš„é£é™©)ï¼Œå¹¶ä¸”Flaskä¸­çš„Cookuesé»˜è®¤å¯¹ä¸­æ–‡è¿›è¡Œäº†å¤„ç†æ‰€ä»¥å¯ä»¥ç›´æ¥ä½¿ç”¨ä¸­æ–‡;</p>
<p>ç‰¹ç‚¹:</p>
<ul>
<li>æ”¯æŒä¼šè¯è¿‡æœŸ</li>
<li>æ”¯æŒä¸­æ–‡å¤„ç†</li>
<li>ä¸èƒ½è·¨ç½‘ç«™åŸŸåè®¿é—®</li>
<li>é»˜è®¤æºå¸¦æœ¬ç«™æ‰€æœ‰Cookie</li>
</ul>
<p><br></p>
<p>åŸºç¡€è¯­æ³•:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è®¾ç½®Cookies</span></span><br><span class="line"><span class="comment"># æ–¹å¼1</span></span><br><span class="line">response = make_response(<span class="string">"å“åº”çš„å­—ç¬¦ä¸²æ­¤å¤„æ˜¯å‚æ•° %s"</span> % username)</span><br><span class="line"><span class="comment"># æ–¹å¼2</span></span><br><span class="line">response =  Response(<span class="string">"å“åº”çš„å­—ç¬¦ä¸²æ­¤å¤„æ˜¯å‚æ•°&#123;&#125;"</span>.format(username))</span><br><span class="line">response.set_cookie(key, value=<span class="string">""</span>, max_age=None, expires=None, path=<span class="string">"/"</span>, domain=None, secure=False, httponly=False, samesite=None)</span><br><span class="line">response.delete_cookie(key)</span><br><span class="line"><span class="comment"># è·å–Cookiesä¸­æŒ‡å®šçš„keyçš„å€¼</span></span><br><span class="line">request.cookies.get(<span class="string">'key'</span>)</span><br></pre></td></tr></table></figure></p>
<p>ç®€å•ç¤ºä¾‹:<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Blueprint,request,render_template,url_for,redirect,make_response,Response</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®</span></span><br><span class="line"><span class="meta">@demo2.route('/userlogin/',methods=['GET','POST'])</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">login</span><span class="params">()</span>:</span></span><br><span class="line">  <span class="keyword">if</span> request.method.upper() == <span class="string">'GET'</span>:</span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">'login.html'</span>)</span><br><span class="line">  <span class="keyword">elif</span> request.method.upper() == <span class="string">'POST'</span>:</span><br><span class="line">    username = request.form.get(<span class="string">'username'</span>)</span><br><span class="line">    password = request.form.get(<span class="string">'password'</span>)</span><br><span class="line">    <span class="keyword">if</span> username == password :</span><br><span class="line">      <span class="comment"># æ–¹å¼1</span></span><br><span class="line">      <span class="comment"># response = make_response("æ¬¢è¿ %s ç™»é™†,ä½ å·²ç»æˆåŠŸç™»é™†! &lt;a href='/userperson/'&gt;ä¸ªäººä¸»é¡µ&lt;/a&gt;" % username )</span></span><br><span class="line">      <span class="comment"># æ–¹å¼2</span></span><br><span class="line">      response =  Response(<span class="string">"&lt;script&gt;alert('æ¬¢è¿ %s ç™»é™†,ä½ å·²ç»æˆåŠŸç™»é™†!,æ­£åœ¨è·³è½¬ä¸ªäººä¸»é¡µ!');window.location.href='/userperson/'&lt;/script&gt;"</span> % (username))</span><br><span class="line">      response.set_cookie(<span class="string">'username'</span>, username)</span><br><span class="line">      response.set_cookie(<span class="string">'name'</span>, <span class="string">'å”¯ä¸€æå®¢'</span>)</span><br><span class="line">      <span class="comment">#redirect(url_for('demo2.person'),302)</span></span><br><span class="line">      <span class="keyword">return</span> response</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="string">'è´¦å·æˆ–è€…å¯†ç é”™è¯¯!'</span></span><br><span class="line">  <span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'ERROR! Request Method Not Allow!'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–</span></span><br><span class="line"><span class="meta">@demo2.route('/userperson/',methods=['GET','POST'])</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">person</span><span class="params">()</span>:</span></span><br><span class="line">  print(request.cookies)</span><br><span class="line">  <span class="keyword">if</span> request.cookies.get(<span class="string">'username'</span>) != <span class="literal">None</span>:</span><br><span class="line">    name = request.cookies.get(<span class="string">'name'</span>)</span><br><span class="line">    username = request.cookies.get(<span class="string">'username'</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'æ¬¢è¿ &lt;u&gt; %s &lt;/u&gt; æ‚¨å›æ¥, ä½ çš„ç™»é™† &lt;u&gt; %s &lt;/u&gt;ç”¨æˆ·!'</span> % (name,username)  <span class="comment"># æ˜“é”™ç‚¹æ³¨æ„æœ‰æ‹¬å·</span></span><br><span class="line">  <span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"&lt;script&gt;alert('ç”¨æˆ·æœªç™»å½•è¯·ç™»é™†');window.location.href='/userlogin';&lt;/script&gt;"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å“åº”ç»“æœ:</span></span><br><span class="line"><span class="comment"># Cookie</span></span><br><span class="line"><span class="comment"># username=weiyigeek; name="\345\224\257\344\270\200\346\236\201\345\256\242";</span></span><br></pre></td></tr></table></figure></p>
<figure class="image-box">
                <a rel=FlaskåŸºç¡€å…¥é—¨å­¦ä¹ ç¬”è®°-1 href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200914131553.png" target="_blank" title="WeiyiGeek.Cookie" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200914131553.png" alt="WeiyiGeek.Cookie" title="" class=""></a>
                <p>WeiyiGeek.Cookie</p>
            </figure>
<p><br/></p>
<h5 id="Session"><a href="#Session" class="headerlink" title="Session"></a>Session</h5><p>æè¿°: å®ƒæ˜¯ä¸€ä¸ªæœåŠ¡ç«¯ä¼šè¯æŠ€æœ¯, æ•°æ®å­˜å‚¨åœ¨æœåŠ¡å™¨ä¸­(ä¿è¯å®‰å…¨ä»¥åŠä¸å¯ç¯¡æ”¹)ä»¥Key-Valueçš„å½¢å¼;</p>
<p>ç‰¹å¾:</p>
<ul>
<li>1.é»˜è®¤å°†sessionåºåˆ—åŒ–åå­˜å‚¨åœ¨cookieä¸­(KEY-&gt;Hash-&gt;base64ç¼–ç ),ä¼šå°†æœºå™¨hmacä»¥åŠsaltåŠ å…¥åˆ°å…¶ä¸­ä¿è¯sessionçš„å®‰å…¨æ€§;</li>
<li>2.å¯é‡‡ç”¨flask-sessionå®ç°sessionæ•°æ®æŒä¹…åŒ–å­˜å‚¨åœ¨redisä¸­, åµŒå…¥çº§çš„ä¸éœ€è¦ä¿®æ”¹æºä»£ç åªéœ€è¦é…ç½®rediså³å¯</li>
<li>3.é»˜è®¤çš„ç”Ÿå‘½å‘¨æœŸåœ¨31å¤©;</li>
</ul>
<p>æ³¨æ„: å¿…é¡»è¿›è¡ŒFLASKçš„APPé…ç½®SESSIONçš„å¯†é’¥å¦åˆ™å°†ä¼šæŠ¥ä»¥ä¸‹é”™è¯¯:<br><code>&quot;The session is unavailable because no secret &quot; RuntimeError: The session is unavailable because no secret key was set.  Set the secret_key on the application to something unique and secret.</code><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨appå¯¹è±¡ä¸­è¿›è¡Œé…ç½®æˆ–è€…ç›´æ¥åœ¨settingè¿›è¡Œé…ç½®ç„¶åé€šè¿‡ç±»åŠ è½½åˆ°appé…ç½®ä¸­</span></span><br><span class="line">app.config[<span class="string">'SECRET_KEY'</span>] = <span class="string">'WeiyiGeek'</span></span><br></pre></td></tr></table></figure></p>
<p>åœ¨FLASKä¸­sessionå®ç°æµç¨‹ï¼š</p>
<ul>
<li>1.å°†sessionå­˜å‚¨åœ¨cookieä¹‹ä¸­;</li>
<li>2.å¯¹æ•°æ®è¿›è¡Œåºåˆ—åŒ–</li>
<li>3.åœ¨å¯¹å…¶è¿›è¡Œbase64ç¼–ç </li>
<li>4.ä¹‹åå†è¿›è¡Œzlibå‹ç¼©</li>
<li>5.æœ€åä¼ é€’hash(éªŒè¯æ˜¯å¦è¢«ç¯¡æ”¹)</li>
</ul>
<p>è¯­æ³•å‚æ•°:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.åˆ›å»º session é”®å€¼å¯¹</span></span><br><span class="line">session[<span class="string">'key'</span>] = value;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.å€¼è·å– </span></span><br><span class="line">session.get(<span class="string">'key'</span>)</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<p>åŸºç¡€ç¤ºä¾‹1.ç®€å•çš„FLASKå†…çš„sessionæ¨¡å—æ¼”ç¤º<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Day3\App\views\demo\demo2.py</span></span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Blueprint,request,render_template,url_for,redirect,make_response,Response,session</span><br><span class="line"><span class="meta">@demo2.route('/session-test/&lt;string:name&gt;',methods=['GET','POST'])</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sessiontest</span><span class="params">(name)</span>:</span></span><br><span class="line">  <span class="keyword">if</span> name != <span class="literal">None</span>:</span><br><span class="line">    session[<span class="string">'name'</span>] = name;</span><br><span class="line">    session[<span class="string">'username'</span>] = <span class="string">"å”¯ä¸€æå®¢"</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'Session åˆ›å»º è¿›å…¥æŸ¥çœ‹ session &lt;a href="/getsession/"&gt;show&lt;/a&gt;'</span></span><br><span class="line">  <span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'&lt;p style="color:red"&gt;Parameter Error!&lt;/p&gt;'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@demo2.route('/getsession/',methods=['GET'])</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getsession</span><span class="params">()</span>:</span></span><br><span class="line">  <span class="keyword">if</span> session.get(<span class="string">'name'</span>) != <span class="literal">None</span>:</span><br><span class="line">    print(session)</span><br><span class="line">    print(type(session))</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'session value %s , %s'</span> % (session.get(<span class="string">'name'</span>),session.get(<span class="string">'username'</span>))</span><br><span class="line">  <span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'&lt;b&gt;session æœªè®¾ç½®è¯·åœ¨ /session-test/\&lt;string:name\&gt; é¡µé¢ä¸Šå¤åˆ¶ &lt;/b&gt;&lt;script language="javascript"&gt;setTimeout("location=\'/\'",3000);&lt;/script&gt;'</span></span><br></pre></td></tr></table></figure><br>æ‰§è¡Œç»“æœ:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç»“æœ1.é»˜è®¤çš„sessionå°†æ‰€æœ‰çš„é”®å€¼é€šè¿‡åºåˆ—åŒ–å­˜å‚¨åœ¨ç½‘é¡µçš„cookieä¸­</span></span><br><span class="line">&lt;SecureCookieSession &#123;<span class="string">'name'</span>: <span class="string">'weiyigeek'</span>, <span class="string">'username'</span>: <span class="string">'å”¯ä¸€æå®¢'</span>&#125;&gt;</span><br><span class="line">&lt;class <span class="string">'werkzeug.local.LocalProxy'</span>&gt;</span><br><span class="line">session=eyJuYW1lIjoid2VpeWlnZWVrIiwidXNlcm5hbWUiOiJcdTU1MmZcdTRlMDBcdTY3ODFcdTViYTIifQ.X2GdGA.MgBLw9iCDlFBMaSXmtruHjdzkGs</span><br></pre></td></tr></table></figure></p>
<p>åŸºç¡€ç¤ºä¾‹2.é€šè¿‡FLASK-Sessionæ’ä»¶å°†sessionå­˜å‚¨åˆ°å†…å­˜æ•°æ®åº“ä¹‹ä¸­å³éå…³ç³»å‹æ•°æ®åº“(redis);<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># flask-sessionç¯å¢ƒå®‰è£…é…ç½®</span></span><br><span class="line">pip install flask-session</span><br><span class="line">pip install redis</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–¹å¼1</span></span><br><span class="line">app.config[<span class="string">'SECRET_KEY'</span>]  = <span class="string">"WeiyiGeek"</span></span><br><span class="line">app.config[<span class="string">'SESSION_COOKIE_SECURE'</span>] = Ture</span><br><span class="line">app.config[<span class="string">'SESSION_USER_SIGNER'</span>] = Ture</span><br><span class="line">app.config[<span class="string">'SESSION_TYPE'</span>] = <span class="string">'redis'</span></span><br><span class="line">app.config[<span class="string">'SESSION_REDIS'</span>] = Redis(host=<span class="string">'192.168.100.10'</span>, password=<span class="string">'weyigeek'</span>,db=3)</span><br><span class="line">app.config[<span class="string">'SESSION_KEY_PREFIX'</span>] = <span class="string">"product:"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–¹å¼2 Day3\App\setting.py</span></span><br><span class="line">SECRET_KEY = <span class="string">"WeiyiGeek"</span></span><br><span class="line">SESSION_COOKIE_SECURE = Ture</span><br><span class="line">SESSION_KEY_PREFIX = <span class="string">"product:"</span></span><br><span class="line">SESSION_TYPE = <span class="string">'redis'</span></span><br><span class="line">SESSION_REDIS = Redis(host=<span class="string">'192.168.100.10'</span>, password=<span class="string">'weyigeek'</span>,db=3)</span><br><span class="line">SESSION_USER_SIGNER = Ture</span><br><span class="line"></span><br><span class="line"><span class="comment"># Day3\App\ext.py</span></span><br><span class="line">from flask_session import Session</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆå§‹åŒ–æ‰©å±•</span></span><br><span class="line">def init_ext(app):</span><br><span class="line">Session(app)       <span class="comment"># Flask session ç¬¬ä¸‰æ–¹æ’ä»¶</span></span><br></pre></td></tr></table></figure></p>
<p>æ‰§è¡Œç»“æœ:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;RedisSession &#123;<span class="string">'_permanent'</span>: True, <span class="string">'name'</span>: <span class="string">'WeiyiGeek-Redis'</span>, <span class="string">'username'</span>: <span class="string">'å”¯ä¸€æå®¢'</span>&#125;&gt;</span><br><span class="line">&lt;class <span class="string">'werkzeug.local.LocalProxy'</span>&gt;</span><br><span class="line">Set-Cookie:session=4a461782-840d-4a2d-8352-3622ea9102fe; Expires=Sat, 17-Oct-2020 08:11:32 GMT; Secure; HttpOnly; Path=/</span><br></pre></td></tr></table></figure></p>
<figure class="image-box">
                <a rel=FlaskåŸºç¡€å…¥é—¨å­¦ä¹ ç¬”è®°-1 href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200916164132.png" target="_blank" title="WeiyiGeek.session" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200916164132.png" alt="WeiyiGeek.session" title="" class=""></a>
                <p>WeiyiGeek.session</p>
            </figure>
<h4 id="æ¨¡æ¿å¼•æ“"><a href="#æ¨¡æ¿å¼•æ“" class="headerlink" title="æ¨¡æ¿å¼•æ“"></a>æ¨¡æ¿å¼•æ“</h4><p>æè¿°:åœ¨å­¦ä¹ FLASKçš„å¼€å‘æ¨¡æˆ‘ä»¬é¦–å…ˆåº”è¯¥äº†è§£ä¸€ä¸‹æ¨¡æ¿ã€ä»¥åŠæ¨¡æ¿å¼•æ“;</p>
<p><strong>Q: ä»€ä¹ˆæ˜¯æ¨¡æ¿?</strong><br>ç­”: æ¨¡æ¿å°±æ˜¯å‘ˆç°ç»™ç”¨æˆ·çš„ç•Œé¢, åœ¨MVTä¸­å……å½“äº†T(Templates)çš„è§’è‰²å®ç°VTçš„è§£è€¦å³<code>è§†å›¾ä¸æ¨¡æ¿</code>;æ¨¡æ¿å¤„ç†åˆ†ä¸ºä¸¤ä¸ªè¿‡ç¨‹ä¸€æ˜¯åŠ è½½äºŒæ˜¯æ¸²æŸ“;<br>æ¨¡æ¿ä»£ç åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼š</p>
<ul>
<li>1.é™æ€HTML</li>
<li>2.æ¨¡æ¿è¯­æ³•(åŠ¨æ€æ’å…¥ä»£ç ç‰‡æ®µ)</li>
</ul>
<p><strong>Q: å¼€å‘ä¸­VTä¹‹é—´çš„å…³ç³»</strong><br>ç­”: Views ä¸ Templates æ˜¯å¤šå¯¹å¤šçš„å…³ç³», å³ä¸€ä¸ªVå¯ä»¥è°ƒç”¨ä»»æ„Tå¹¶ä¸”ä¸€ä¸ªTå¯ä»¥è¢«ä»»æ„Vè°ƒç”¨;</p>
<h5 id="Jinja2-æ¨¡æ¿å¼•æ“"><a href="#Jinja2-æ¨¡æ¿å¼•æ“" class="headerlink" title="Jinja2 æ¨¡æ¿å¼•æ“"></a>Jinja2 æ¨¡æ¿å¼•æ“</h5><p>æè¿°: å®ƒæ˜¯ç”±FLASKä½œè€…æ¨¡ä»¿Djangoçš„æ¨¡æ¿å¼€å‘å¹¶è¿ç”¨åœ¨FLASKä¸­çš„æ¨¡æ¿å¼•æ“,ä¸€ä¸ªç°ä»£åŒ–è®¾è®¡å’Œå‹å¥½çš„Pythonæ¨¡æ¿è¯­è¨€;</p>
<p>ç‰¹ç‚¹:</p>
<ul>
<li>1.é€Ÿåº¦å¿«å¹¿æ³›åº”ç”¨</li>
<li>2.HTMLå¼€å‘å’Œåç«¯Pythonåˆ†ç¦»</li>
<li>3.å‡å°‘Pythonå¤æ‚åº¦</li>
<li>4.éå¸¸çµæ´»å¿«é€Ÿå’Œå®‰å…¨</li>
<li>5.æä¾›äº†æ§åˆ¶ç»§æ‰¿ç­‰é«˜çº§åŠŸèƒ½</li>
</ul>
<p>æ¨¡æ¿è¯­æ³•:</p>
<ul>
<li>å˜é‡: <code></code></li>
<li>æ ‡ç­¾: <code>{\% name \%}</code>ä¸JAVAwebå¼€å‘ä¸­jspç›¸ä¼¼</li>
</ul>
<p>æ¨¡æ¿ä¸­çš„å˜é‡<code></code>ä½œç”¨:</p>
<ul>
<li>è§†å›¾ä¼ é€’ç»™æ¨¡æ¿çš„æ•°æ®</li>
<li>å‰é¢å®šä¹‰æ•°æ®çš„è°ƒç”¨</li>
<li>å˜é‡ä¸å­˜åœ¨(é»˜è®¤å¿½ç•¥)</li>
</ul>
<p>æ¨¡æ¿ä¸­çš„æ ‡ç­¾<code>{\% tag \%}</code>ä½œç”¨:</p>
<ul>
<li>1.é€»è¾‘æ§åˆ¶</li>
<li>2.è¡¨è¾¾å¼ä½¿ç”¨</li>
<li>3.åˆ›å»ºå˜é‡</li>
<li>4.å®å®šä¹‰(è¾ƒDjiagoæ–°å¢åŠŸèƒ½): å³åˆ©ç”¨æ ‡ç­¾å®ç°å‡½æ•°åŠŸèƒ½ï¼›</li>
</ul>
<p><strong>å¸¸ç”¨æ ‡ç­¾ä¸€è§ˆ</strong></p>
<h6 id="ç»“æ„æ ‡ç­¾"><a href="#ç»“æ„æ ‡ç­¾" class="headerlink" title="ç»“æ„æ ‡ç­¾"></a>ç»“æ„æ ‡ç­¾</h6><p>æ³¨é‡Šç¬¦: åœ¨æ¨¡æ¿å¼•æ“ä¸­çš„æ³¨é‡Š<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;# ``base.html`` </span><br><span class="line">   è¿™æ˜¯æ³¨é‡Šçš„è¡Œ</span><br><span class="line">#&#125;</span><br></pre></td></tr></table></figure></p>
<p>block: å—æ“ä½œå³å­æ¨¡æ¿è°ƒç”¨æˆ–è€…ç»§æ‰¿(çˆ¶æ¨¡æ¿æŒ–å‘,å­æ¨¡æ¿å¡«å‘)<br><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% block xxx %&#125;</span><br><span class="line">  &lt;p&gt;æˆ‘æ˜¯ç­‰å¾…è¢«å¡«å……æˆ–è€…ç»§æ‰¿çš„å…ƒç´ &lt;/p&gt;</span><br><span class="line">&#123;% endblock xxx %&#125;  &lt;!-- æ¨èç»“æŸæ—¶å€™ä¹ŸåŠ ä¸Šå—åç§° --&gt;</span><br></pre></td></tr></table></figure></p>
<p>extends: ç»§æ‰¿çˆ¶æ¨¡æ¿çš„å—æ“ä½œé‡Œçš„å†…å®¹ï¼Œå³å¼•ç”¨æˆ–è€…å¡«å……ã€æ‰©å……çˆ¶æ¨¡æ¿ä¸­å—é‡Œçš„å…ƒç´ , å…¶ç»§æ‰¿ä½“ç³»æ˜¯åŒ–æ•´ä¸ºé›¶çš„æ“ä½œ;<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends <span class="string">'xxx.html'</span> %&#125;</span><br><span class="line">&#123;% block xxx %&#125;</span><br><span class="line">&#123;&#123; <span class="keyword">super</span>() &#125;&#125;   <span class="comment">// ç»§æ‰¿</span></span><br><span class="line">  &lt;span&gt;æˆ‘æ˜¯æ·»åŠ çš„å­å…ƒç´ &lt;<span class="regexp">/span&gt;  /</span><span class="regexp">/ æ‰©å……</span></span><br><span class="line"><span class="regexp">&#123;% endblock xxx %&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>include: åŒ…å«å…¶å®ƒhtmlæ–‡ä»¶å†…å®¹åˆ°æœ¬htmlä¸­ä½“ç°çš„æ˜¯ç”±é›¶åˆ°ä¸€çš„æ¦‚å¿µ;<br><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% include <span class="string">'xxx'</span> %&#125;</span><br></pre></td></tr></table></figure></p>
<p>marco : å®å®šä¹‰(å…¶å®Cè¯­è¨€é‚£ä¸ªå®å®šä¹‰ç±»å‹)ï¼Œå®ƒå¯ä»¥åœ¨æ¨¡æ¿ä¸­å®šä¹‰å‡½æ•°ç„¶ååœ¨å…¶å®ƒåœ°æ–¹è¿›è¡Œä½¿ç”¨;<br><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;% <span class="function">marco <span class="title">hello</span><span class="params">(name)</span> %&#125;</span></span><br><span class="line"><span class="function">  </span>&#123;&#123; name &#125;&#125;</span><br><span class="line">&#123;% endmarco %&#125;</span><br><span class="line"></span><br><span class="line"># å®è°ƒç”¨</span><br><span class="line">&#123;&#123; hello(<span class="string">"weiyigeek"</span>) &#125;&#125;</span><br><span class="line"></span><br><span class="line"># é‡å…¶å®ƒæ¨¡æ¿ä¸­å¯¼å…¥å®å®šä¹‰</span><br><span class="line">&#123;% from <span class="string">'xxxx'</span> <span class="keyword">import</span> hello,func1,func2 %&#125;</span><br></pre></td></tr></table></figure></p>
<h6 id="å˜é‡å£°æ˜"><a href="#å˜é‡å£°æ˜" class="headerlink" title="å˜é‡å£°æ˜"></a>å˜é‡å£°æ˜</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å˜é‡å£°æ˜</span></span><br><span class="line">&#123;% <span class="built_in">set</span> index = 0 %&#125;</span><br><span class="line">&#123;% <span class="built_in">set</span> index = 5 * loop.index %&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># å˜é‡è°ƒç”¨</span></span><br><span class="line">&#123;&#123; index &#125;&#125;</span><br></pre></td></tr></table></figure>
<h6 id="æ¡ä»¶ç»“æ„"><a href="#æ¡ä»¶ç»“æ„" class="headerlink" title="æ¡ä»¶ç»“æ„"></a>æ¡ä»¶ç»“æ„</h6><p>for: è¯¥æ ‡ç­¾å¯ä»¥å‘Pytonä¸€æ ·çš„ä½¿ç”¨forâ€¦else..ä¹Ÿå¯ä»¥è·å–å¾ªç¯ä¿¡æ¯loopå¯¹è±¡ç›¸å…³æ–¹æ³•(<code>first/last/index/index0/revindex/reindex0</code>)å³å¾ªç¯å™¨<br><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% <span class="keyword">for</span> item in cols %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% <span class="keyword">else</span> %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% endfor %&#125;</span><br></pre></td></tr></table></figure></p>
<p><br/></p>
<h6 id="è¿‡æ»¤å™¨"><a href="#è¿‡æ»¤å™¨" class="headerlink" title="è¿‡æ»¤å™¨"></a>è¿‡æ»¤å™¨</h6><p>æè¿°:Jinja2ä¸­å…¨å¥—æ¨¡æ¿å¼•æ“ä¸­å¤§æ¦‚æœ‰400å¤šä¸ªè¿‡æ»¤å™¨;</p>
<p>åŸºç¡€è¯­æ³•:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># syntax:</span></span><br><span class="line">&#123;&#123; å˜é‡|è¿‡æ»¤å™¨|è¿‡æ»¤å™¨ &#125;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯ç”¨è¿‡æ»¤å™¨å‡½æ•°</span></span><br><span class="line">capitalize <span class="comment"># é©¼å³°å‘½åæ³•</span></span><br><span class="line">default</span><br><span class="line">last</span><br><span class="line">first</span><br><span class="line">length</span><br><span class="line">sum</span><br><span class="line">sort</span><br><span class="line">lower</span><br><span class="line">upper</span><br><span class="line">title</span><br><span class="line">trim</span><br><span class="line">reverse</span><br><span class="line">format</span><br><span class="line">safe</span><br><span class="line">striptags  <span class="comment"># æ¸²æŸ“å‰å°†å€¼ä¸­æ ‡ç­¾å»æ‰</span></span><br></pre></td></tr></table></figure></p>
<p>åŸºç¡€ç¤ºä¾‹:</p>
<ul>
<li>Day3\App\templates\Tag\default.html<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">&#123;% block header%&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>&#123;% block title%&#125; &#123;&#123; title &#125;&#125; &#123;% endblock %&#125;<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">&#123;% endblock header%&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">"color: red;"</span>&gt;</span> Python Flask Deveploment Study!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h5</span>&gt;</span>Name: &#123;&#123; student &#125;&#125;<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">&#123;% endblock content %&#125;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">&#123;% block footer %&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>&amp;copy; WeiyiGeek  &amp;copysr; Python-Flask <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"https://weiyigeek.top"</span>&gt;</span>ä¸ªäººä¸»é¡µ<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">&#123;% endblock footer %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>Day3\App\templates\Tag\friends.html<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"firends"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>https://weiyigeek.top<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>https://weiyigeek.top<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>Day3\App\templates\Tag\function.html<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;% macro Start(name) %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span> ä½ å¥½, &#123;&#123; name &#125;&#125; <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">&#123;% endmacro %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% macro Product(a,b,c) %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>äº§å“åˆ—è¡¨ï¼š<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span> &#123;&#123; a &#125;&#125; <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span> &#123;&#123; b &#125;&#125; <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span> &#123;&#123; c &#125;&#125; <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">&#123;% endmacro %&#125;</span><br></pre></td></tr></table></figure></li>
<li>Day3\App\templates\Tag\demo3_1.html #æ¼”ç¤ºæ–‡ä»¶<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends 'Tag/default.html' %&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ç¤ºä¾‹1.å—å¼•ç”¨ --&gt;</span></span><br><span class="line">&#123;% block header %&#125;</span><br><span class="line">  &#123;&#123; super() &#125;&#125;</span><br><span class="line">&#123;% endblock header %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  &#123;% block content %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">b</span>&gt;</span>å—å¼•ç”¨åµŒå…¥<span class="tag">&lt;/<span class="name">b</span>&gt;</span></span><br><span class="line">    &#123;&#123; super() &#125;&#125;</span><br><span class="line">    &#123;% block firends %&#125;</span><br><span class="line">      <span class="comment">&lt;!-- ç¤ºä¾‹2.æ–‡ä»¶åŒ…å«(éœ€è¦åŒ…å«åœ¨çˆ¶å—ä¸­) --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>å‹æƒ…è¿æ¥: <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      &#123;% include 'Tag/friends.html' %&#125;</span><br><span class="line">    &#123;% endblock firends %&#125;</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å®ä¾‹3.æ¨¡æ¿ä¸­å®šä¹‰å‡½æ•°å«(éœ€è¦åŒ…å«åœ¨çˆ¶å—ä¸­)ä½¿ç”¨æ—¶å€™ä¸€èˆ¬ä¼šåœ¨ä¸€ä¸ªä¸“é—¨çš„æ–‡ä»¶ä¸­ --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">b</span>&gt;</span> æ ‡ç­¾ä¸­è‡ªå®šä¹‰å‡½æ•°: <span class="tag">&lt;/<span class="name">b</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    &#123;% macro hello_tag() %&#125;</span><br><span class="line">      <span class="tag">&lt;<span class="name">u</span>&gt;</span> æˆ‘æ˜¯æ ‡ç­¾æ¨¡æ¿ç”Ÿæˆçš„å‡½æ•° <span class="tag">&lt;/<span class="name">u</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    &#123;% endmacro %&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è°ƒç”¨å‡ æ¬¡å°±ç”Ÿæˆå‡ æ¬¡ --&gt;</span></span><br><span class="line">    &#123;&#123; hello_tag() &#125;&#125;</span><br><span class="line">    &#123;&#123; hello_tag() &#125;&#125;</span><br><span class="line"></span><br><span class="line">    &#123;% from 'Tag/function.html' import Start,Product %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    &#123;&#123; Start("WeiyiGeek") &#125;&#125;</span><br><span class="line">    &#123;&#123; Product("Python3 å…¥é—¨åˆ°ç²¾é€š","Python å¯è§†åŒ–ç¼–ç¨‹","Python - Flask Web Development") &#125;&#125;</span><br><span class="line"></span><br><span class="line">  &#123;% endblock content %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  &#123;% block footer %&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">b</span>&gt;</span>æ¡ä»¶å¾ªç¯<span class="tag">&lt;/<span class="name">b</span>&gt;</span></span><br><span class="line">  &#123;% for user in users %&#125;</span><br><span class="line">    &#123;% if loop.first %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">style</span>=<span class="string">"color:red"</span>&gt;</span> &#123;&#123; loop.index &#125;&#125; : &#123;&#123; loop.index0 &#125;&#125; : &#123;&#123; user &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    &#123;% elif loop.last %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">style</span>=<span class="string">"color:green"</span>&gt;</span> &#123;&#123; loop.index &#125;&#125; : &#123;&#123; loop.index0 &#125;&#125; : &#123;&#123; user &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    &#123;% else %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">style</span>=<span class="string">"color:blue"</span>&gt;</span> &#123;&#123; loop.index &#125;&#125; : &#123;&#123; loop.index0 &#125;&#125; : &#123;&#123; user &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    &#123;% endif %&#125;</span><br><span class="line">  &#123;% else %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>å¾ªç¯ç»“æŸ<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  &#123;% endfor %&#125;</span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">b</span>&gt;</span>è¿‡æ»¤å™¨<span class="tag">&lt;/<span class="name">b</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>åŸå§‹å­—ç¬¦:&#123;&#123; student &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>å­—ç¬¦|capitalize:&#123;&#123; student|capitalize &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>å­—ç¬¦|upper:&#123;&#123; student|upper &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>å­—ç¬¦|reverse:&#123;&#123; student|reverse &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">    &#123;&#123; super() &#125;&#125;</span><br><span class="line">  &#123;% endblock footer %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>Day3\App\views\demo\demo3.py<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è§†å›¾å‡½æ•°æ¼”ç¤º</span></span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Blueprint,render_template</span><br><span class="line"></span><br><span class="line">d3 = Blueprint(<span class="string">"demo3"</span>,__name__)</span><br><span class="line"></span><br><span class="line"><span class="meta">@d3.route("/demo3_1/")</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">demo3_1</span><span class="params">()</span>:</span></span><br><span class="line">  users = [<span class="string">"C++"</span>,<span class="string">"C"</span>,<span class="string">"Python"</span>,<span class="string">"Go"</span>,<span class="string">"R"</span>,<span class="string">"JAVA"</span>,<span class="string">"JavaScript"</span>,<span class="string">"PHP"</span>]</span><br><span class="line">  <span class="keyword">return</span> render_template(<span class="string">"Tag/demo3_1.html"</span>,title=<span class="string">"ç»“æ„æ ‡ç­¾æµ‹è¯•"</span>,student=<span class="string">"weiyigeek"</span>,users=users)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h4 id="è¡¥å……çŸ¥è¯†"><a href="#è¡¥å……çŸ¥è¯†" class="headerlink" title="è¡¥å……çŸ¥è¯†:"></a>è¡¥å……çŸ¥è¯†:</h4><p>ODOO æ¡†æ¶æ˜¯ä¸€å¥—ä¼ä¸šèµ„æºè§„åˆ’ï¼ˆERPï¼‰åŠå®¢æˆ·å…³ç³»ç®¡ç†ï¼ˆCRMï¼‰ç³»ç»Ÿã€‚ä»¥Pythonè¯­è¨€å¼€å‘ï¼Œæ•°æ®åº“é‡‡ç”¨å¼€æºçš„PostgreSQLï¼Œç³»ç»Ÿä»¥GNU GPLå¼€æºåè®®å‘å¸ƒã€‚<br>ç‰¹ç‚¹: Diangoè¿˜é‡çš„Webæ¡†æ¶åŒ…æ‹¬ERPå’ŒOAä¸€äº›æ¨¡å—, ä»¥åŠå¿«é€Ÿç”Ÿæˆç½‘ç«™;</p>
<h4 id="å…¥å‘è§£å†³"><a href="#å…¥å‘è§£å†³" class="headerlink" title="å…¥å‘è§£å†³"></a>å…¥å‘è§£å†³</h4><p><strong>é—®é¢˜1.ä½¿ç”¨ Visual Studio Code å¼€å‘ Flask ç¨‹åºçš„æ—¶å€™ï¼Œä¸€ç›´æç¤º <code>Instance of &#39;SQLAlchemy&#39; has no &#39;Column&#39; member</code> é”™è¯¯ï¼ŒåŒæ ·çš„ä»£ç åœ¨å…¶å®ƒçš„ IDE å°±æ²¡æœ‰é—®é¢˜;</strong><br>é—®é¢˜åŸå› :æœ‰pylintå¯¼è‡´çš„pylint æ˜¯ä¸€ä¸ª Python æºä»£ç æ£€æŸ¥å’Œé«˜äº®çš„å·¥å…·ç±»ä¼¼çš„è¿˜æœ‰ flake8 ç­‰;<br>è§£å†³åŠæ³•:å…³é—­ pylint å¯ç”¨ flake8ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># C:\Users\WeiyiGeek\AppData\Roaming\Code\User\settings.json</span></span><br><span class="line"><span class="string">"python.linting.flake8Enabled"</span>: Ture,</span><br><span class="line"><span class="string">"python.linting.pylintEnabled"</span>: <span class="literal">false</span>,</span><br><span class="line"><span class="string">"python.linting.flake8Args"</span>: [</span><br><span class="line">    <span class="string">"--disable=E1101"</span>,</span><br><span class="line">    <span class="string">"--max-line-length=120"</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure></p>
<p><br/></p>
<p>é—®é¢˜2.å¼‚å¸¸æ’æŸ¥_Python.[alembic.env] No changes in schema detected?<br>é—®é¢˜åŸå› : æœªå°†modelsæ¨¡å—ä¸­çš„ç±»åŠ è½½åˆ°ç¨‹åºå¿…ç»ä¹‹è·¯ï¼Œé¡¹ç›®å¹¶ä¸çŸ¥é“models.py çš„å­˜åœ¨ï¼Œæ‰€ä»¥è¿ç§»çš„æ—¶å€™é¡¹ç›®æ‰¾ä¸åˆ°models.pyã€‚ </p>
<p>RESTful ä½œç”¨äºæ•°æ®åºåˆ—åŒ–æ–¹ä¾¿äºå‰åç«¯åˆ†ç¦»;</p>
<p>ç¼“å­˜Jinja2ç‰‡æ®µ<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¯­æ³•</span></span><br><span class="line">&#123;% cache [timeout [,[key1, [key2, ...]]]] %&#125;</span><br><span class="line">...</span><br><span class="line">&#123;% endcache %&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®è¶…æ—¶ä¸ºæ— æ²¡æœ‰è¶…æ—¶è€Œæ˜¯ä½¿ç”¨è‡ªå®šä¹‰é”®ï¼š</span></span><br><span class="line">&#123;% cache None <span class="string">"key"</span> %&#125;...</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">åŸºç¡€å®ä¾‹:</span><br><span class="line"><span class="comment"># æˆ‘ä»¬æœ‰render_form_fieldå’Œrender_submitå®ã€‚</span></span><br><span class="line">&#123;% cache 60*5 %&#125;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;form&gt;</span><br><span class="line">    &#123;% render_form_field form.username %&#125;</span><br><span class="line">    &#123;% render_submit %&#125;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&#123;% endcache %&#125;</span><br></pre></td></tr></table></figure></p>

        </div>
        
  <hr>
  <p> æ¬¢è¿å„ä½å¿—åŒé“åˆçš„æœ‹å‹ä¸€èµ·å­¦ä¹ äº¤æµï¼Œå¦‚æ–‡ç« æœ‰è¯¯è¯·åœ¨ä¸‹æ–¹ç•™ä¸‹æ‚¨å®è´µçš„ç»éªŒçŸ¥è¯†ï¼Œä¸ªäººé‚®ç®±åœ°å€<b style="color:#ff654e"><code>ã€master#weiyigeek.topã€‘</code></b>æˆ–è€…ä¸ªäººå…¬ä¼—å·<b style="color:#ff654e"><code>ã€WeiyiGeekã€‘</code></b>è”ç³»æˆ‘ã€‚ </p>

  <p> æ›´å¤šæ–‡ç« æ¥æºäº<b style="color:#03a9f4">ã€WeiyiGeek Blog - ä¸ºäº†èƒ½åˆ°è¿œæ–¹ï¼Œè„šä¸‹çš„æ¯ä¸€æ­¥éƒ½ä¸èƒ½å°‘ã€‘</b>, ä¸ªäººé¦–é¡µåœ°å€( <a style="color: #03a9f4;" href="https://weiyigeek.top" target="_blank"> https://weiyigeek.top </a> )</p>

  <p>ä¸“æ ä¹¦å†™ä¸æ˜“ï¼Œå¦‚æœæ‚¨è§‰å¾—è¿™ä¸ªä¸“æ è¿˜ä¸é”™çš„ï¼Œè¯·ç»™è¿™ç¯‡ä¸“æ  <b style="color: red;">ã€ç‚¹ä¸ªèµã€æŠ•ä¸ªå¸ã€æ”¶ä¸ªè—ã€å…³ä¸ªæ³¨ï¼Œè½¬ä¸ªå‘ã€‘(äººé—´äº”å¤§æƒ…)</b>ï¼Œè¿™å°†å¯¹æˆ‘çš„è‚¯å®šï¼Œè°¢è°¢ï¼ã€‚</p>

  <div>
    <img src="https://www.weiyigeek.top/img/weiyigeek.jpg" class="img-responsive" alt="WeiyiGeek-banner">
  </div>

  <ul style="font-weight: bolder;">
    <li>
      <p><span style="color: #03a9f4">echo&nbsp;&nbsp;"ã€ç‚¹ä¸ªèµã€‘ï¼ŒåŠ¨åŠ¨ä½ é‚£ç²—å£®çš„æ‹‡æŒ‡æˆ–è€…èŠŠèŠŠç‰æ‰‹ï¼Œäº²ï¼"</span></p>
    </li>
    <li>
      <p><span style="color: #ff9201">printf("%s",&nbsp;"ã€æŠ•ä¸ªå¸ã€‘ï¼Œä¸‡æ°´åƒå±±æ€»æ˜¯æƒ…ï¼ŒæŠ•ä¸ªç¡¬å¸è¡Œä¸è¡Œï¼Œäº²ï¼")</span></p>
    </li>
    <li>
      <p><span style="color: #02a2ff">fmt.Printf("ã€æ”¶ä¸ªè—ã€‘ï¼Œé˜…åå³ç„šä¸åƒç°ï¼Œäº²ï¼")&nbsp;&nbsp;</span></p>
    </li>
    <li>
      <p><span style="color:red">console.info("ã€è½¬ä¸ªå‘ã€‘ï¼Œè®©æ›´å¤šçš„å¿—åŒé“åˆçš„æœ‹å‹ä¸€èµ·å­¦ä¹ äº¤æµï¼Œäº²ï¼")</span></p>
    </li>
    <li>
      <p><span style="color: #ff654e">System.out.println("ã€å…³ä¸ªæ³¨ã€‘ï¼Œåç»­æµè§ˆæŸ¥çœ‹ä¸è¿·è·¯å“Ÿï¼Œäº²ï¼")</span></p>
    </li>
  </ul>

  <div>
    <img src="/img/wechat-search.png" class="img-responsive" alt="æ‰«æFollow(å…³æ³¨)WeiyiGeekå…¬ä¼—å·"  width="380" height="170">
    <img src="/img/wechat-app.png" class="img-responsive" alt="æ‰«æVisit(æµè§ˆ)æå®¢å…¨æ ˆä¿®ç‚¼å°ç¨‹åº"  width="385" height="170">
  </div>
  <hr>
  

  <blockquote class="post-copyright">
    <div class="content">
      
        
<span class="post-time">
    æœ€åæ›´æ–°æ—¶é—´ï¼š<time datetime="2022-05-26T00:45:10.560Z" itemprop="dateUpdated">2022-05-26 08:45:10</time>
</span><br>


        <span>æ–‡ç« åŸå§‹è·¯å¾„ï¼š<a href="https://github.com/WeiyiGeek/blog/edit/master/source/_posts/ç¼–ç¨‹ä¸–ç•Œ/Python/Webå¼€å‘/Flask/åŸºç¡€å…¥é—¨/FlaskåŸºç¡€å…¥é—¨å­¦ä¹ ç¬”è®°1.md" target="_blank" rel="noopener noreferrer">_posts/ç¼–ç¨‹ä¸–ç•Œ/Python/Webå¼€å‘/Flask/åŸºç¡€å…¥é—¨/FlaskåŸºç¡€å…¥é—¨å­¦ä¹ ç¬”è®°1.md</a></span><br>
         <span class="copy-copyright">è½¬è½½æ³¨æ˜å‡ºå¤„ï¼ŒåŸæ–‡åœ°å€ï¼š<a href="/2020/7-16-330.html" target="_blank" rel="external">https://blog.weiyigeek.top/2020/7-16-330.html</a></span><br>æœ¬ç«™æ–‡ç« å†…å®¹éµå¾ª <a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">çŸ¥è¯†å…±äº« ç½²å - éå•†ä¸šæ€§ - ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…åè®®</a> 
    </div>
    <footer>
      <a href="https://blog.weiyigeek.top">
        <img src="/img/avatar.jpg" alt="WeiyiGeek">
        WeiyiGeek
      </a>
    </footer>
  </blockquote>


        
            <div class="page-reward">
  <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-rectangle waves-light">ğŸ‘ é’Ÿæ„ä½œè€…</a>
</div>
            
        
        <div class="post-footer">
            
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Flask/" rel="tag">Flask</a></li></ul>

            <div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://blog.weiyigeek.top/2020/7-16-330.html&title=ã€ŠFlaskåŸºç¡€å…¥é—¨å­¦ä¹ ç¬”è®°-1ã€‹ â€” WeiyiGeek Blog&pic=https://blog.weiyigeek.top/img/avatar.jpg" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.weiyigeek.top/2020/7-16-330.html&title=ã€ŠFlaskåŸºç¡€å…¥é—¨å­¦ä¹ ç¬”è®°-1ã€‹ â€” WeiyiGeek Blog&source=[TOC]" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.weiyigeek.top/2020/7-16-330.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€ŠFlaskåŸºç¡€å…¥é—¨å­¦ä¹ ç¬”è®°-1ã€‹ â€” WeiyiGeek Blog&url=https://blog.weiyigeek.top/2020/7-16-330.html&via=https://blog.weiyigeek.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://blog.weiyigeek.top/2020/7-16-330.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>

        </div>
        
          <!-- è¯„è®ºç»„ä»¶ -->


<div id="gitalk-container"></div>
<script type="text/javascript" src="/js/plugins/gitalk.min.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/custom/gitalk.init.js?v=1.6.6"></script>
        
    </div>
    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="prev">
      <a href="/2020/7-16-648.html" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">FlaskåŸºç¡€å­¦ä¹ ä¹‹å…¥å‘å‡ºå‘ä½“éªŒè®°å½•</h4>
      </a>
    </div>
  

  
    <div class="next">
      <a href="/2020/7-16-332.html" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">Flaskæ‰©å±•ä½¿ç”¨ç¬”è®°</h4>
      </a>
    </div>
  
</nav>


    
    
        <aside class="post-widget">
            <nav class="post-toc-wrap" id="post-toc">
                <strong>ç›®å½•</strong>
                <ol class="post-toc"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#0x00-å‰è¨€ç®€è¿°"><span class="post-toc-number">1.</span> <span class="post-toc-text">0x00 å‰è¨€ç®€è¿°</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#0x01-ç¯å¢ƒå®‰è£…"><span class="post-toc-number">2.</span> <span class="post-toc-text">0x01 ç¯å¢ƒå®‰è£…</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#0x02-åŸºç¡€å°è¯•"><span class="post-toc-number">3.</span> <span class="post-toc-text">0x02 åŸºç¡€å°è¯•</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#è·¯ç”±ç®¡ç†"><span class="post-toc-number">4.</span> <span class="post-toc-text">è·¯ç”±ç®¡ç†</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#å†…ç½®å¯¹è±¡"><span class="post-toc-number">5.</span> <span class="post-toc-text">å†…ç½®å¯¹è±¡</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ä¼šè¯ä¿æŒ"><span class="post-toc-number">6.</span> <span class="post-toc-text">ä¼šè¯ä¿æŒ</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#æ¨¡æ¿å¼•æ“"><span class="post-toc-number">7.</span> <span class="post-toc-text">æ¨¡æ¿å¼•æ“</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#è¡¥å……çŸ¥è¯†"><span class="post-toc-number">8.</span> <span class="post-toc-text">è¡¥å……çŸ¥è¯†:</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#å…¥å‘è§£å†³"><span class="post-toc-number">9.</span> <span class="post-toc-text">å…¥å‘è§£å†³</span></a></li></ol>
            </nav>
            <div class="toc-bar"><div>
        </aside>
    
</article>

  <div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        å¦‚æœæ­¤ç¯‡æ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¿˜è¯·æ”¯æŒä¸€ä¸‹åšä¸»å“Ÿ, è°¢è°¢å„ä½çœ‹å‹â™¥!
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardwechat" src="/img/reward-wechat.jpg" height="250" height="250" alt="å¾®ä¿¡æ‰“èµäºŒç»´ç ">
            <img id="rewardalipay" src="/img/reward-alipay.png" height="250" height="250" alt="æ”¯ä»˜å®æ‰“èµäºŒç»´ç ">
        </div>
        
        <label class="reward-toggle">
            <!-- <input id="rewardToggle" type="checkbox" class="reward-toggle-check" data-wechat="/img/reward-wechat.jpg" data-alipay="/img/reward-alipay.png"> -->
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">å¾®ä¿¡</span>
                <span class="reward-toggle-item alipay">æ”¯ä»˜å®</span>
            </div>
        </label>
        
    </div>
</div>

  
 <!-- å¾®ä¿¡å…¬ä¼—å·å…³æ³¨/æ–‡ç« ç‰ˆæƒå¤åˆ¶ -->

  <div id="btw-mask" style="position: fixed; top: 0px; right: 0px; bottom: 0px; left: 0px; opacity: 0.7; z-index: 999; background: rgb(0, 0, 0); display:none"></div>
<div id="btw-modal" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 360px; text-align: center; font-size: 13px; background: rgb(255, 255, 255); border-radius: 10px; z-index: 9999; font-family: PingFangSC-Regular, sans-serif;display:none">
<span id="btw-modal-close-btn" style="position: absolute; top: 5px; right: 15px; line-height: 1.8; font-size: 15px; cursor: pointer; opacity: 0.2; z-index: 9999; color: rgb(0, 0, 0); background: none; border: none; outline: none;">X</span>
<p id="btw-modal-header" style="margin-top: 40px; line-height: 1.8; font-size: 13px; ">
<b style="color:#6190e8;">ä½ å¥½æœ‹å‹,å¯ä»¥å…³ä¸ªæ³¨å—? â¤ <br> è¿™å°†æ˜¯æˆ‘æŒç»­æ›´æ–°æ–‡ç« çš„åŠ¨åŠ›æºæ³‰ï¼Œè°¢è°¢æ”¯æŒï¼(à¹‘â€²á´—â€µà¹‘) </b> <br> å¦‚ä¸æƒ³å…³æ³¨è¯·ç‚¹å‡»å³ä¸Šè§’çš„ã€Xã€‘<br>
<br>Method 1.Please visit <strong><a href="https://twitter.com/WeiyiGeek" target="_blank" rel="noopener" style="color: rgb(240, 65, 52);text-decoration:underline;">ã€My Twitterã€‘</a></strong>. There is an article verification code in the homepage.
<br>æ–¹å¼2.è¯·è®¿é—®æœ¬åšä¸»çš„Bç«™<strong><a href="https://space.bilibili.com/385802642" target="_blank" rel="noopener" style="color: rgb(240, 65, 52);text-decoration:underline;">ã€WeiyiGeekã€‘</a></strong>é¦–é¡µå…³æ³¨UPä¸»,<br>å°†è‡ªåŠ¨éšæœºè·å–è§£é”éªŒè¯ç ã€‚
<br>æ–¹å¼3.æ‰«ä¸€æ‰«ä¸‹æ–¹äºŒç»´ç ï¼Œå…³æ³¨æœ¬ç«™<strong>å®˜æ–¹å…¬ä¼—å·</strong><br>
å›å¤ï¼š<strong style="color: rgb(240, 65, 52);">éªŒè¯ç </strong>
å°†è·å–<strong style="color: rgb(240, 65, 52);">è§£é”(æœ‰æ•ˆæœŸ7å¤©)</strong>æœ¬ç«™æ‰€æœ‰æŠ€æœ¯æ–‡ç« å“Ÿ!</p>
<img src="/img/wechat-search.png" style="width: 300px; margin-top: 10px;">
<div id="btw-modal-input-code" style="margin-top: 20px; background: rgb(255, 255, 255);">
  <input id="btw-modal-input" type="number" minlength="4" maxlength="4" placeholder="è¯·è¾“å…¥éªŒè¯ç |Verification Code"
    style="width: 165px; height: 32px; line-height: 32px; padding: 0px 10px; margin: 0px 10px; font-size: 13px; text-rendering: auto; text-transform: none; cursor: text; outline: none; box-sizing: border-box; border: 1px solid rgb(221, 221, 221); -webkit-appearance: textfield; background-color: white; -webkit-rtl-ordering: logical;"/>
  <button id="btw-submit-btn" onclick="yzm_vertify()"
    style="padding: 0px 20px; height: 32px; font-size: 14px; outline: none; border: none; color: rgb(255, 255, 255); background: rgb(222, 104, 109); cursor: pointer;">æ
    äº¤</button> </div>
<p id="btw-footer" style="margin: 40px 0px 20px; color: rgb(153, 153, 153);">@WeiyiGeek - ä¸ºäº†èƒ½åˆ°è¿œæ–¹ï¼Œè„šä¸‹çš„æ¯ä¸€æ­¥éƒ½ä¸èƒ½å°‘</p>
</div>


</div>

    </main>
    <footer class="footer ">
    
    <div class="top">
        
            <p>
    <span>Linksï¼š</span>
    
    <span class="blogroll-item">
        <a href="https://weiyigeek.top" target="_blank">https://weiyigeek.top</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.weiyigeek.top" target="_blank">https://blog.weiyigeek.top</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://weiyigeek.top/img/wechat-search.png" target="_blank">å…¬ä¼—è´¦å·</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://space.bilibili.com/385802642/article" target="_blank">å“”å“©å“”å“©ä¸“æ </a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://github.com/weiyigeek" target="_blank">ä¸ªäººGithub</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://gitee.com/WeiyiGeek" target="_blank">ä¸ªäººGitee</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.zhihu.com/people/weiyiSec" target="_blank">ä¸ªäººçŸ¥ä¹</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.cnblogs.com/WeiyiGeek" target="_blank">åšå®¢å›­</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://my.oschina.net/weiyigeek" target="_blank">OSCHINA</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.toutiao.com/c/user/token/MS4wLjABAAAAqcPSoMqfctaEqJpGSF775eeCjWkrop4AOyLITdMx-L78F5iXzfQcSRM5sY4dq3wR" target="_blank">ä»Šæ—¥å¤´æ¡</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.csdn.net/u013072756?type=lately" target="_blank">CSDN</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.jianshu.com/u/5199a1104739" target="_blank">ç®€ä¹¦</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://cloud.tencent.com/developer/user/1389665/articles" target="_blank">è…¾è®¯äº‘+äº‘ç¤¾åŒº</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://cuttlefish.baidu.com/shop/75c5dbd8d15abe23482f4d40" target="_blank">ç™¾åº¦æ–‡åº“</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://author.baidu.com/home?from=blog&app_id=1726736601523415" target="_blank">ITæå®¢çŸ¥è¯†åˆ†äº«</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.51cto.com/weiyigeek" target="_blank">51CTOåšå®¢</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://juejin.cn/user/122767337595934" target="_blank">æ˜é‡‘</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://weibo.com/a/hot/7622022703618049_1.html" target="_blank">å¾®åšæ–‡ç« </a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.xiaohongshu.com/user/profile/627c98bb000000001000e7ba" target="_blank">å°çº¢ä¹¦</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://segmentfault.com/u/weiyigeek" target="_blank">Segmentfault</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.douyin.com/user/MS4wLjABAAAAMSBdMja6XLsdmzafb0RNbFeBemIOk38K1PaOClZeI1Q" target="_blank">æŠ–éŸ³ä¸»é¡µ</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.kuaishou.com/profile/3xfbrsrhd2i69x9" target="_blank">å¿«æ‰‹ä¸»é¡µ</a>
    </span>
    
</p>

        
    </div>
    
    <div class="bottom">
      <p>
        <span>WeiyiGeek &copy; 2018 - 2022 <a href="https://weiyigeek.top" target="_blank" rel="noopener">weiyigeek.top</a> All rights reserved.å”¯ä¸€æå®¢ITçŸ¥è¯†åˆ†äº« ç‰ˆæƒæ‰€æœ‰ </span>
        
        <span>
          Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/weiyigeek" target="_blank">mellow</a>
        </span>
        
        <br/>è®¿é—®ç»Ÿè®¡
        <span><a href="/sitemap.xml" target="_blank" rel="Sitemaps-ç«™ç‚¹åœ°å›¾">Sitemaps</a> </span>
        <span><a href="/baidusitemap.xml" target="_blank" rel="baidusitemaps-ç™¾åº¦ç«™ç‚¹åœ°å›¾">ç«™ç‚¹åœ°å›¾</a> </span>
        <!-- 
  -->
        <br/>ICPå¤‡æ¡ˆå·<span><a href="https://beian.miit.gov.cn" target="_blank">æ¸ICPå¤‡2022003447å·</a></span>
        <br/>
        <div id="cc-myssl-id">
          <a href="https://myssl.com/blog.weiyigeek.top?from=mysslid" target="_blank" rel="noopener"><img src="https://static.myssl.com/res/images/myssl-id1.png" alt="MySSLå®‰å…¨è®¤è¯" style="max-height:50px;display:block;margin:0 auto"></a>
        </div>
      </p>
    </div>
</footer>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>


<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://blog.weiyigeek.top/2020/7-16-330.html&title=ã€ŠFlaskåŸºç¡€å…¥é—¨å­¦ä¹ ç¬”è®°-1ã€‹ â€” WeiyiGeek Blog&pic=https://blog.weiyigeek.top/img/avatar.jpg" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.weiyigeek.top/2020/7-16-330.html&title=ã€ŠFlaskåŸºç¡€å…¥é—¨å­¦ä¹ ç¬”è®°-1ã€‹ â€” WeiyiGeek Blog&source=[TOC]" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.weiyigeek.top/2020/7-16-330.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€ŠFlaskåŸºç¡€å…¥é—¨å­¦ä¹ ç¬”è®°-1ã€‹ â€” WeiyiGeek Blog&url=https://blog.weiyigeek.top/2020/7-16-330.html&via=https://blog.weiyigeek.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://blog.weiyigeek.top/2020/7-16-330.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>æ‰«ä¸€æ‰«ï¼Œåˆ†äº«åˆ°å¾®ä¿¡</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACK0lEQVR42u3aS27DMAwFwN7/0um2RRDlkXRaWBqvAscRPFow/OjrK74eT9erb5Pnfz6zXufiCwMD47aMx/Jav2iOefWr5/vr7XhJxcDAOICRL90LxOtnJmwMDAyM6ufend72YWBgYOTp2nqddYH6zwEXAwPjVoykiE0SvrzRlm/NxbU4BgbGDRl51/3vP39kvoGBgXErxqN4XTU3nL/JrzUxMDC2ZuQBrpfMVQvayftgYGDsyshHj9XDW5NnyncwMDC2ZuRHIgrLtZr+k5YfBgbG3oxJEz953fnAMmq9YWBgHMPodeDzojQP5dWNwMDA2JuRN+XXATEfRlafLww4MTAwNmXkRxySIFtNMZMUMCqSMTAwDmAk48l8SNCj9gppDAyMExh5Epa/Sl4A9xptUeGNgYGxEaPaIMuPQfTGor0NwsDA2JvRKzLzAxbVBtxk/ImBgbE3Iw+7vRFCPihNAvQF/x4YGBi3YkzaXlV8tT1XSBMxMDC2ZlwVXq8tiavjBwwMjBMY17bp54ljr1WHgYFxAqPXIOsF1snoFAMD42RGNcxVG/e9BlzeHMTAwNiVMS9ZJ2fQ8qbbm+CLgYGxNaMa5j4XgntpYnNai4GBcUNGtUGW701+CGwyKMXAwDiHkQe+aqJWTRObR8cwMDAwiiPMasDtFcnRTmBgYBzMmBwO66WYb/AYGBgHMJIithoi5+H1I+02DAyMGzImJzUmxWe+5uTAGQYGxs0Z31KsQc/x70D5AAAAAElFTkSuQmCC" alt="å¾®ä¿¡åˆ†äº«äºŒç»´ç ">
</div>


    
    <!-- main-js -->
<script type="text/javascript" src="/js/jquery/2.1.0-jquery.min.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/plugins/fastclick.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/plugins/ios-orientationchange-fix.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/jquery/3.5.2-jquery.fancybox.min.js?v=1.6.6"></script>
<!--  //cdn.bootcss.com/node-waves/0.7.4/waves.min.js -->
<script type="text/javascript" src="/js/node-waves/0.7.4-waves.min.js?v=1.6.6"></script> 

<script type="text/javascript" src="/js/method.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/blog.js?v=1.6.6"></script>

<!-- third-party -->
<script type="text/javascript" src="/js/plugins/local_search.js?v=1.6.6"></script>
<script type="text/javascript">
	var search_path = "search.xml";
	if (search_path.length === 0) { search_path = "search.xml";}
	var path = "/" + search_path;
	searchFunc(path, "local-search-input", "local-search-result");
</script> 

<!-- <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> --> 



  


<script>
  var _hmt = _hmt || [];
  (function() {
    // ç™¾åº¦ç»Ÿè®¡
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?53923c4b5560739bc0ed61e183be6acf";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();
</script>
 


<!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
            processEscapes: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.staticfile.org/mathjax/2.7.9/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
 
<script>
    (function() {
        var OriginTitile = document.title, titleTime;
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                document.title = 'WeiyiGeek Blog-å…³æ³¨äºç½‘ç»œå®‰å…¨_ç‰©è”ç½‘å®‰å…¨å¼€å‘_ç½‘ç»œå®‰å…¨è¿ç»´-å­¦ä¹ å¿ƒå¾—åˆ†äº«';
                clearTimeout(titleTime);
            } else {
                document.title = '(ã¤ã‚§âŠ‚)å’¦!åˆå¥½äº†!';
                titleTime = setTimeout(function() {
                    document.title = OriginTitile;
                },2000);
            }
        });
    })();
</script>
 
     <script type="text/javascript" src="/js/custom/copytips.js?v=1.6.6"></script> 
</body>
</html>
