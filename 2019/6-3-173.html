<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="content-language" content="zh-CN"/>
    <meta name="author" content="WeiyiGeek" />
    <meta name="msvalidate.01" content="5C552FB1D885E0E11D2957EC958C8018" />
    <meta name="shenma-site-verification" content="4c655e91c76be0a93c1b6954c666c9d6_1649049085"/>
    <meta name="bytedance-verification-code" content="lKs4FqwCHSJ3A/c5tT7X" />
    <meta name="sogou_site_verification" content="OC65iET6Bk" />
    
    <title>ğŸŒ ç½‘ç»œåŸºæœ¬é…ç½®æŸ¥è¯¢|WeiyiGeek Blog|å”¯ä¸€æå®¢Geek-ITç½‘ç»œå®‰å…¨è¿ç»´å¼€å‘æŠ€æœ¯çŸ¥è¯†åˆ†äº«-åšå®¢ç«™ç‚¹</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    
    <meta name="keywords" content="ç½‘ç»œå‘½ä»¤">
    <meta name="Description" content="WeiyiGeek-å”¯ä¸€æå®¢åšå®¢ç«™ç‚¹,å…³æ³¨äºç½‘ç»œå®‰å…¨è¿ç»´,Webå®‰å…¨å¼€å‘,IOTç‰©è”ç½‘å®‰å…¨å¼€å‘,åº”ç”¨å¼€å‘,åˆ†äº«æŠ€æœ¯å­¦ä¹ çŸ¥è¯†ä¸å…¥å‘è§£å†³,æå‡ç½‘ç»œå®‰å…¨æŠ€æœ¯ä¸è‡ªèº«æŠ€æœ¯èƒ½åŠ›,ç«‹å¿—ç»´æŠ¤å¤§ä¼—ç½‘ç»œå®‰å…¨ä¸ºå·±ä»»,åšä¸€ä¸ªå¯¹å›½å®¶æœ‰ç”¨çš„äºº,ä¸ºå®ç°ä¸­åæ°‘æ—ä¼Ÿå¤§å¤å…´çš„ä¸­å›½æ¢¦ä¸æ‡ˆå¥‹æ–—">
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="/css/jquery/3.5.2-jquery.fancybox.min.css?v=1.6.6" />
    <link rel="stylesheet" href="/css/style.css?v=1.6.6">
    <!--  -->
     <script type="text/javascript" src="/js/custom/articlecost.js?v=1.6.6"></script> 
    <link rel="stylesheet" href="/css/third-party/gitalk.css?v=1.6.6"> 
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9134434519967436" crossorigin="anonymous"></script>    
    <script type="text/javascript">
        // Data Center
        var DC = {
          reward:	true,
          lv: JSON.parse('{"enable":false,"app_id":null,"app_key":null,"icon":true}'),
          v: JSON.parse('{"enable":false,"appid":null,"appkey":null,"notify":true,"verify":true,"placeholder":"give me some sugers plz...","avatar":"wavatar"}')
        };
    </script>
    <script type="text/javascript">window.lazyScripts=[];</script>
<meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="WeiyiGeek Blog" type="application/atom+xml">
</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="">
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap">
      
      <img src="/img/brand.jpg" class="brand-bg" alt="WeiyiGeek-backgroud">
      
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg" alt="WeiyiGeek-å¤´åƒ">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">WeiyiGeek</h5>
          <a href="mailto:master@weiyigeek.top" title="master@weiyigeek.top" class="mail">
            <span>m</span><span>a</span><span>s</span><span>t</span><span>e</span><span>r</span><span>@</span><span>w</span><span>e</span><span>i</span><span>y</span><span>i</span><span>g</span><span>e</span><span>e</span><span>k</span><span>.</span><span>t</span><span>o</span><span>p</span>
          </a>
        </hgroup>
        
        <ul class="menu-link">
          
              <li>
                <a href="https://weiyigeek.top/img/wechat-search.png" target="_blank">
                  <i class="icon icon-lg icon-wechat"></i>
                </a>
              </li>
            
              <li>
                <a href="https://github.com/weiyigeek" target="_blank">
                  <i class="icon icon-lg icon-github"></i>
                </a>
              </li>
            
              <li>
                <a href="https://t.me/WeiyiGeek" target="_blank">
                  <i class="icon icon-lg icon-telegram"></i>
                </a>
              </li>
            
              <li>
                <a href="https://twitter.com/WeiyiGeek" target="_blank">
                  <i class="icon icon-lg icon-twitter"></i>
                </a>
              </li>
            
              <li>
                <a href="https://weibo.com/615643678" target="_blank">
                  <i class="icon icon-lg icon-weibo"></i>
                </a>
              </li>
            
        </ul>
        
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                é¦–é¡µ
              </a>
            </li>
        
            <li class="">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                æ–‡ç« åˆ†ç±»
              </a>
            </li>
        
            <li class="">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                æ–‡ç« æ ‡ç­¾
              </a>
            </li>
        
            <li class="">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                æ–‡ç« å½’æ¡£
              </a>
            </li>
        
            <li class="">
              <a href="/books"  >
                <i class="icon icon-lg icon-book"></i>
                å­¦ä¹ ä¹¦ç±
              </a>
            </li>
        
            <li class="">
              <a href="/about"  >
                <i class="icon icon-lg icon-user"></i>
                å…³äºä½œè€…
              </a>
            </li>
        
            <li class="">
              <a href="/links"  >
                <i class="icon icon-lg icon-link"></i>
                ç«™ç‚¹å¯¼èˆª
              </a>
            </li>
        
            <li class="">
              <a href="/img/share-wechat.jpg" target="_blank" >
                <i class="icon icon-lg icon-wechat"></i>
                å…¬ä¼—è´¦å·
              </a>
            </li>
        
            <li class="">
              <a href="https://space.bilibili.com/385802642" target="_blank" >
                <i class="icon icon-lg icon-youtube-play"></i>
                å“”å“©å“”å“©
              </a>
            </li>
        
            <li class="">
              <a href="https://github.com/weiyigeek" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="">
              <a href="https://twitter.com/WeiyiGeek" target="_blank" >
                <i class="icon icon-lg icon-twitter"></i>
                Twitter
              </a>
            </li>
        
            <li class="">
              <a href="https://weibo.com/615643678" target="_blank" >
                <i class="icon icon-lg icon-weibo"></i>
                Weibo
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row clearfix">
        <a href="javascript:;" class="header-icon pull-left waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">
            <span>ç½‘ç»œåŸºæœ¬é…ç½®æŸ¥è¯¢</span>
            
        </div>

        
        <a href="javascript:;" id="site_search_btn" class="header-icon pull-right waves-effect waves-circle waves-light">
            <i class="icon icon-lg icon-search"></i>
        </a>
        

        
            <a href="/atom.xml" class="header-icon pull-right waves-effect waves-circle waves-light">
                <i class="icon icon-lg icon-rss"></i>
            </a>
        
    </div>
</header>
<header class="content-header post-header">
    <img src="/img/banner.jpg" class="header-bg" alt="æ–‡ç« å¤´éƒ¨èƒŒæ™¯">
    <div class="container fade-scale">
        <h1 class="title">ç½‘ç»œåŸºæœ¬é…ç½®æŸ¥è¯¢</h1>
        <h5 class="subtitle">
            
                <time datetime="2019-06-03T11:35:30.000Z" itemprop="datePublished" class="page-time">
  2019-06-03
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Linux%E5%91%BD%E4%BB%A4/">Linuxå‘½ä»¤</a></li></ul>


            
        </h5>
        
    </div>
    

</header>

<div id="site_search">
    <div class="search-title clearfix">
        <span class="pull-left">
          <i class="icon icon-lg icon-search"></i>
        </span>
        <input type="text" id="local-search-input" name="q" results="0" placeholder="search my blog..." class="form-control pull-left"/>
        <a href="javascript:;" class="close pull-right waves-effect waves-circle waves-light">
          <i class="icon icon-lg icon-close"></i>
        </a>
    </div>
    <div id="local-search-result"></div>
</div>


<div class="container body-wrap">
  <article id="post-ç³»ç»Ÿè¿ç»´/Linux/å¸¸ç”¨å‘½ä»¤/ç½‘ç»œæŸ¥çœ‹ç±»å‘½ä»¤/ç½‘ç»œåŸºæœ¬é…ç½®ä¸æŸ¥è¯¢"
  class="post-article article-type-post" itemprop="blogPost">
    <div class="post-card">
        <h1 class="post-card-title">ç½‘ç»œåŸºæœ¬é…ç½®æŸ¥è¯¢</h1>
        <div class="post-meta">
            <time class="post-time" title="2019-06-03 19:35:30" datetime="2019-06-03T11:35:30.000Z"  itemprop="datePublished">2019-06-03</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Linux%E5%91%BD%E4%BB%A4/">Linuxå‘½ä»¤</a></li></ul>



            

            


            
        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            
            <p>[TOC]</p>
<a id="more"></a>
<h2 id="0x00-å¿«é€Ÿå…¥é—¨"><a href="#0x00-å¿«é€Ÿå…¥é—¨" class="headerlink" title="0x00 å¿«é€Ÿå…¥é—¨"></a>0x00 å¿«é€Ÿå…¥é—¨</h2><p>å‰è¨€ï¼šä¸»è¦é’ˆå¯¹äºLinuxä¸­ç½‘ç»œ/è·¯ç”±/é€šä¿¡é€šé“ç±»å‘½ä»¤è¿›è¡Œå­¦ä¹ ï¼ŒåŠ æ·±å¯¹Linuxçš„ä½¿ç”¨;</p>
<h2 id="0X01-ç½‘ç»œé…ç½®"><a href="#0X01-ç½‘ç»œé…ç½®" class="headerlink" title="0X01 ç½‘ç»œé…ç½®"></a>0X01 ç½‘ç»œé…ç½®</h2><h3 id="nmcli-å‘½ä»¤"><a href="#nmcli-å‘½ä»¤" class="headerlink" title="nmcli å‘½ä»¤"></a>nmcli å‘½ä»¤</h3><p>æè¿°ï¼šNetworkManageræ˜¯2004å¹´Red Hatå¯åŠ¨çš„é¡¹ç›®ï¼Œæ—¨åœ¨èƒ½å¤Ÿè®©Linuxç”¨æˆ·æ›´è½»æ¾åœ°å¤„ç†ç°ä»£ç½‘ç»œéœ€æ±‚ï¼Œå°¤å…¶æ˜¯æ— çº¿ç½‘ç»œï¼Œèƒ½è‡ªåŠ¨å‘ç°ç½‘å¡å¹¶é…ç½®ipåœ°å€ã€‚ç±»ä¼¼åœ¨æ‰‹æœºä¸ŠåŒæ—¶å¼€å¯wifiå’Œèœ‚çªç½‘ç»œï¼Œè‡ªåŠ¨æ¢æµ‹å¯ç”¨ç½‘ç»œå¹¶è¿æ¥ï¼Œæ— éœ€æ‰‹åŠ¨åˆ‡æ¢ã€‚</p>
<p>è¡¥å……è¯´æ˜:</p>
<ul>
<li>åœ¨<code>RHEL7 / CentOS</code> ä¸­é»˜è®¤ä½¿ç”¨ NetworkManager å®ˆæŠ¤è¿›ç¨‹æ¥ç›‘æ§å’Œç®¡ç†ç½‘ç»œè®¾ç½®,å¹¶ä¸”åœ¨rhel7ä¸­æ˜¯åŸºäºä¼šè¯(connection)çš„ï¼Œä¸€ä¸ªç½‘å¡å¯ä»¥æœ‰å¤šä¸ªä¼šè¯ï¼Œä½†æ˜¯åŒæ—¶åªå…è®¸ä¸€ä¸ªä¼šè¯å¤„äºæ¿€æ´»ï¼ˆactiveï¼‰çŠ¶æ€ã€‚</li>
<li>åœ¨<code>RHEL8 / CentOS8</code>ä¸­é‡‡ç”¨nmcliæ˜¯å‘½ä»¤è¡Œçš„ç®¡ç†NetworkManagerçš„å·¥å…·ï¼Œä¼šè‡ªåŠ¨æŠŠé…ç½®å†™åˆ°<code>/etc/sysconfig/network-scripts/</code>ç›®å½•ä¸‹é¢,æ³¨æ„åœ¨redhat8ç‰ˆæœ¬ä¸­network.services å·²è¢«å–æ¶ˆã€‚ </li>
</ul>
<p><br></p>
<p><em>Q:ä¸ºä»€ä¹ˆè¦ç”¨NMï¼Ÿ</em></p>
<ul>
<li>â–· å·¥å…·é½å…¨ï¼šå‘½ä»¤è¡Œã€æ–‡æœ¬ç•Œé¢ã€å›¾å½¢ç•Œé¢ã€web </li>
<li>â–· å¹¿çº³å¤©åœ°ï¼šçº³ç®¡å„ç§ç½‘ç»œï¼Œæœ‰çº¿ã€æ— çº¿ã€ç‰©ç†ã€è™šæ‹Ÿ</li>
<li>â–· å‚æ•°ä¸°å¯Œï¼šå¤šè¾¾200å¤šé¡¹é…ç½®å‚æ•°ï¼ˆåŒ…æ‹¬ethtoolå‚æ•°ï¼‰</li>
<li>â–· ä¸€ç»Ÿæ±Ÿæ¹–ï¼šRedHatç³»ã€Suseç³»ã€Debian/Ubuntuç³»ï¼Œå‡æ”¯æŒ </li>
<li>â–· å¤§åŠ¿æ‰€è¶‹ï¼šrhel8åªèƒ½é€šè¿‡NMç®¡ç†ç½‘ç»œ</li>
</ul>
<p>NMèƒ½ç®¡ç†å„ç§ç½‘ç»œ:</p>
<ul>
<li>â–· æœ‰çº¿ç½‘å¡ã€æ— çº¿ç½‘å¡</li>
<li>â–· åŠ¨æ€ipã€é™æ€ip</li>
<li>â–· ä»¥å¤ªç½‘ã€éä»¥å¤ªç½‘ </li>
<li>â–· ç‰©ç†ç½‘å¡ã€è™šæ‹Ÿç½‘å¡</li>
</ul>
<p>å…¶å®ƒé…ç½®ä½¿ç”¨æ–¹æ³•<br>â–· nmtuiï¼šåœ¨shellç»ˆç«¯å¼€å¯æ–‡æœ¬å›¾å½¢ç•Œé¢(å€¼å¾—ä½¿ç”¨æ–¹ä¾¿ç®€æ´)ã€‚<br><figure class="image-box">
                <a rel=ç½‘ç»œåŸºæœ¬é…ç½®æŸ¥è¯¢ href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200513133543.png" target="_blank" title="WeiyiGeek.nmtui" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200513133543.png" alt="WeiyiGeek.nmtui" title="" class=""></a>
                <p>WeiyiGeek.nmtui</p>
            </figure><br>â–· Freedesktop appletï¼šå¦‚GNOMEä¸Šè‡ªå¸¦çš„ç½‘ç»œç®¡ç†å·¥å…·<br>â–· cockpitï¼šredhatè‡ªå¸¦çš„åŸºäºwebå›¾å½¢ç•Œé¢çš„â€é©¾é©¶èˆ±â€å·¥å…·ï¼Œå…·æœ‰dashboradå’ŒåŸºç¡€ç®¡ç†åŠŸèƒ½ã€‚<br><figure class="image-box">
                <a rel=ç½‘ç»œåŸºæœ¬é…ç½®æŸ¥è¯¢ href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200513133600.png" target="_blank" title="WeiyiGeek. cockpit" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200513133600.png" alt="WeiyiGeek. cockpit" title="" class=""></a>
                <p>WeiyiGeek. cockpit</p>
            </figure></p>
<p><br></p>
<p>ç½‘å¡é…ç½®æ–‡ä»¶ç¤ºä¾‹ï¼š/etc/sysconfig/network-scripts/ifcfg-eth0<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">TYPE=Ethernet</span><br><span class="line">PROXY_METHOD=none</span><br><span class="line">BROWSER_ONLY=no</span><br><span class="line">DEFROUTE=yes</span><br><span class="line">IPV4_FAILURE_FATAL=no</span><br><span class="line"><span class="comment">#IPV6INIT=yes</span></span><br><span class="line"><span class="comment">#IPV6_AUTOCONF=yes</span></span><br><span class="line"><span class="comment">#IPV6_DEFROUTE=yes</span></span><br><span class="line"><span class="comment">#IPV6_FAILURE_FATAL=no</span></span><br><span class="line"><span class="comment">#IPV6_ADDR_GEN_MODE=stable-privacy</span></span><br><span class="line"><span class="comment">#å¸¸ä¿®æ”¹ç‚¹å¦‚ä¸‹</span></span><br><span class="line">NAME=ens192</span><br><span class="line">UUID=7afc67d5-b767-4d89-97b4-2558f8dc33c3</span><br><span class="line">DEVICE=ens492</span><br><span class="line">BOOTPROTO=static </span><br><span class="line">ONBOOT=yes  </span><br><span class="line">IPADDR=192.168.10.12</span><br><span class="line">NETMASK=255.255.255.0</span><br><span class="line">GATEWAY=192.168.10.1</span><br><span class="line">DNS=114.114.114.114</span><br><span class="line">DNS1=223.6.6.6</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<p>åŸºç¡€è¯­æ³•:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#nmcliä½¿ç”¨æ–¹æ³•éå¸¸ç±»ä¼¼linux ipå‘½ä»¤ã€ciscoäº¤æ¢æœºå‘½ä»¤ï¼Œå¹¶ä¸”æ”¯æŒtabè¡¥å…¨</span></span><br><span class="line">ç”¨æ³•ï¼šnmcli [é€‰é¡¹] OBJECT</span><br><span class="line">é€‰é¡¹ï¼š</span><br><span class="line">-o[verview]  <span class="comment"># æ¦‚è§ˆæ¨¡å¼ï¼ˆéšè—é»˜è®¤å€¼ï¼‰</span></span><br><span class="line">-t[erse]     <span class="comment"># ç®€æ´è¾“å‡º</span></span><br><span class="line">-p[retty]    <span class="comment"># æ•´é½è¾“å‡º</span></span><br><span class="line">-m[ode] tabular|multiline    <span class="comment"># è¾“å‡ºæ¨¡å¼</span></span><br><span class="line">-c[olors] auto|yes|no        <span class="comment"># æ˜¯å¦åœ¨è¾“å‡ºä¸­ä½¿ç”¨é¢œè‰²</span></span><br><span class="line">-e[scape] yes|no    <span class="comment">#  åœ¨å€¼ä¸­è½¬ä¹‰åˆ—åˆ†éš”ç¬¦</span></span><br><span class="line">-a[sk]             <span class="comment">#  è¯¢é—®ç¼ºå°‘çš„å‚æ•°</span></span><br><span class="line">-s[how-secrets]    <span class="comment"># å…è®¸æ˜¾ç¤ºå¯†ç </span></span><br><span class="line">-w[ait]           <span class="comment"># ä¸ºå®Œæˆçš„æ“ä½œè®¾ç½®è¶…æ—¶ç­‰å¾…æ—¶é—´</span></span><br><span class="line">-v[ersion]        <span class="comment"># æ˜¾ç¤ºç¨‹åºç‰ˆæœ¬</span></span><br><span class="line">-h[elp]        <span class="comment">#   è¾“å‡ºæ­¤å¸®åŠ©</span></span><br><span class="line"></span><br><span class="line">å¯¹è±¡ï¼š</span><br><span class="line">g[eneral]      <span class="comment"># ç½‘ç»œç®¡ç†å™¨ï¼ˆNetworkManagerï¼‰çš„å¸¸è§„çŠ¶æ€å’Œæ“ä½œ</span></span><br><span class="line">n[etworking]  <span class="comment">#  æ•´ä½“è”ç½‘æ§åˆ¶</span></span><br><span class="line">r[adio]       <span class="comment">#  ç½‘ç»œç®¡ç†å™¨æ— çº¿ç”µå¼€å…³</span></span><br><span class="line">c[onnection]  <span class="comment">#  ç½‘ç»œç®¡ç†å™¨çš„è¿æ¥ ï¼ˆå…³é”®ç‚¹ï¼‰</span></span><br><span class="line">        COMMAND := &#123; show | up | down | add | modify | <span class="built_in">clone</span> | edit | delete | monitor | reload | load | import | <span class="built_in">export</span> &#125;</span><br><span class="line">d[evice]      <span class="comment">#  ç”±ç½‘ç»œç®¡ç†å™¨ç®¡ç†çš„è®¾å¤‡ï¼Œå¯ç†è§£ä¸ºå®é™…å­˜åœ¨çš„ç½‘å¡ï¼ˆåŒ…æ‹¬ç‰©ç†ç½‘å¡å’Œè™šæ‹Ÿç½‘å¡ï¼‰</span></span><br><span class="line">a[gent]      <span class="comment">#   ç½‘ç»œç®¡ç†å™¨çš„å¯†é’¥ï¼ˆsecretï¼‰ä»£ç†æˆ– polkit ä»£ç†</span></span><br><span class="line">m[onitor]    <span class="comment">#   ç›‘è§†ç½‘ç»œç®¡ç†å™¨æ›´æ”¹</span></span><br></pre></td></tr></table></figure></p>
<p>å¸¸ç”¨å¯¹è±¡:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#connectionæœ‰2ç§çŠ¶æ€ï¼š</span></span><br><span class="line">æ´»è·ƒï¼ˆå¸¦é¢œè‰²å­—ä½“ï¼‰ï¼šè¡¨ç¤ºå½“å‰è¯¥connectionç”Ÿæ•ˆ</span><br><span class="line">éæ´»è·ƒï¼ˆæ­£å¸¸å­—ä½“ï¼‰ï¼šè¡¨ç¤ºå½“å‰è¯¥connectionä¸ç”Ÿæ•ˆ</span><br><span class="line"></span><br><span class="line"><span class="comment">#deviceæœ‰4ç§å¸¸è§çŠ¶æ€ï¼š</span></span><br><span class="line">connectedï¼šå·²è¢«NMçº³ç®¡ï¼Œå¹¶ä¸”å½“å‰æœ‰æ´»è·ƒçš„connection</span><br><span class="line">disconnectedï¼šå·²è¢«NMçº³ç®¡ï¼Œä½†æ˜¯å½“å‰æ²¡æœ‰æ´»è·ƒçš„connection</span><br><span class="line">unmanagedï¼šæœªè¢«NMçº³ç®¡</span><br><span class="line">unavailableï¼šä¸å¯ç”¨ï¼ŒNMæ— æ³•çº³ç®¡ï¼Œé€šå¸¸å‡ºç°äºç½‘å¡linkä¸ºdownçš„æ—¶å€™ï¼ˆæ¯”å¦‚ip link <span class="built_in">set</span> ens32 downï¼‰</span><br></pre></td></tr></table></figure></p>
<p><strong>Tips:</strong></p>
<ul>
<li><code>nmcli d(device)</code>:åœ¨nmä¸­æœ‰ä¸¤ä¸ªç»´åº¦å³<code>è¿æ¥ï¼ˆconnectionï¼‰å’Œè®¾å¤‡ï¼ˆdeviceï¼‰</code>,å½“ç½‘å¡çº³å…¥NMç®¡ç†åï¼Œå¤šå¯¹ä¸€çš„å…³ç³»å¯ä»¥ä¸ºä¸€ä¸ªè®¾å¤‡é…ç½®å¤šä¸ªè¿æ¥ï¼ˆ<code>æŸ¥çœ‹:nmcli c</code>ï¼‰ï¼Œæ¯ä¸ªè¿æ¥å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªifcfgé…ç½®æ–‡ä»¶,ä½†æ˜¯åŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€ä¸ªè¿æ¥æ´»è·ƒï¼ˆé€šè¿‡ <code>nmcli c up</code>åˆ‡æ¢è¿æ¥ï¼‰</li>
</ul>
<p><br></p>
<p>åŸºç¡€å®ä¾‹:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ç¤ºä¾‹0. nmcliæ˜¾ç¤ºç½‘å¡é…ç½®è®¾ç½®æƒ…å†µ</span></span><br><span class="line"><span class="variable">$nmcli</span></span><br><span class="line"><span class="comment"># eth0: connected to System eth0</span></span><br><span class="line"><span class="comment"># "Red Hat Virtio"</span></span><br><span class="line"><span class="comment"># ethernet (virtio_net), 00:16:3E:04:C7:0B, hw, mtu 1500</span></span><br><span class="line"><span class="comment"># ip4 default</span></span><br><span class="line"><span class="comment"># inet4 172.17.24.236/18</span></span><br><span class="line"><span class="comment"># route4 0.0.0.0/0</span></span><br><span class="line"><span class="comment"># route4 0.0.0.0/0</span></span><br><span class="line"><span class="comment"># route4 169.254.0.0/16</span></span><br><span class="line"><span class="comment"># route4 172.17.0.0/18</span></span><br><span class="line"><span class="comment"># route4 172.17.0.0/18</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#ç¤ºä¾‹1.æŸ¥çœ‹è¢«çº³ç®¡çš„è®¾å¤‡</span></span><br><span class="line"><span class="variable">$nmcli</span> device || nmcli dev status</span><br><span class="line"><span class="comment"># DEVICE           TYPE      STATE   CONNECTION(å¯ä»¥æœ‰å¤šä¸ªè¿æ¥å¯¹åº”ä¸€ä¸ªè®¾å¤‡)</span></span><br><span class="line"><span class="comment"># ens192           ethernet  å·²è¿æ¥  ens192</span></span><br><span class="line"><span class="comment"># br-802abd4e0fb9  bridge    å·²è¿æ¥  br-802abd4e0fb9</span></span><br><span class="line"><span class="comment"># docker0          bridge    å·²è¿æ¥  docker0</span></span><br><span class="line"><span class="comment"># virbr0           bridge    å·²è¿æ¥  virbr0</span></span><br><span class="line"><span class="variable">$nmcli</span> d show          <span class="comment">#æŸ¥çœ‹æ‰€æœ‰deviceè¯¦ç»†ä¿¡æ¯</span></span><br><span class="line"><span class="variable">$nmcli</span> d show ens192   <span class="comment">#æŸ¥çœ‹æŒ‡å®šdeviceçš„è¯¦ç»†ä¿¡æ¯</span></span><br><span class="line"><span class="variable">$nmcli</span> d reapply ens32 <span class="comment">#ä¸“é—¨ç”¨äºåˆ·æ–°connectionï¼Œå‰ææ˜¯ç½‘å¡çš„deviceå¤„äºconnectedçŠ¶æ€ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼ˆç«‹å³ç”Ÿæ•ˆï¼‰ã€‚</span></span><br><span class="line"><span class="variable">$nmcli</span> d <span class="built_in">set</span> ens32 autoconnect yes|no  <span class="comment">#è®¾ç½®æ˜¯å¦è‡ªåŠ¨è¿æ¥</span></span><br><span class="line"><span class="variable">$nmcli</span> d <span class="built_in">set</span> ens32 managed yes|no     <span class="comment">#è®¾ç½®æ˜¯å¦è‡ªåŠ¨ç®¡ç†</span></span><br><span class="line"><span class="comment">#çº³å…¥ä¸å–æ¶ˆçº³å…¥ç®¡ç† </span></span><br><span class="line"><span class="variable">$nmcli</span> d monitor ens192</span><br><span class="line"><span class="variable">$nmcli</span> d delete ens192    <span class="comment">#åˆ é™¤ç½‘å¡</span></span><br><span class="line"><span class="variable">$nmcli</span> d connect ens192   <span class="comment">#æ¿€æ´»ç½‘å¡:ç”±NMå¯¹æŒ‡å®šç½‘å¡è¿›è¡Œç®¡ç†(ç±»ä¼¼äºæ¥ä¸Šç½‘å¡ç½‘çº¿)ï¼ŒåŒæ—¶åˆ·æ–°è¯¥ç½‘å¡å¯¹åº”çš„æ´»è·ƒconnection</span></span><br><span class="line"><span class="variable">$nmcli</span> d disconnect ens32 <span class="comment">#Nä¸ç®¡ç†æŒ‡å®šç½‘å¡ï¼š(ç±»ä¼¼äºæ‹”æ‰ç½‘çº¿)ï¼Œæ­¤æ“ä½œä¸ä¼šå˜æ›´å®é™…ç½‘å¡çš„linkçŠ¶æ€ï¼Œåªä¼šä½¿å¯¹åº”çš„connectionå˜æˆéæ´»è·ƒã€‚è‹¥é‡å¯ç³»ç»Ÿåˆ™åˆä¼šè‡ªåŠ¨connectã€‚</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#ç¤ºä¾‹2.ç½‘å¡ç®¡ç†ï¼ˆCentOS8ï¼‰connectionå¯ä»¥ç®€å†™ </span></span><br><span class="line"><span class="variable">$nmcli</span> connection show --active   <span class="comment">#æŸ¥çœ‹å½“å‰æ´»åŠ¨çš„ä¼šè¯</span></span><br><span class="line"><span class="comment"># NAME(con-name)    UUID                        TYPE      DEVICE(iframe)</span></span><br><span class="line"><span class="comment"># ens192  c810ecfb-02b2-384a-afee-fe6765d7ee34  ethernet  ens192</span></span><br><span class="line"><span class="comment">#æŸ¥çœ‹ç½‘å¡çš„UUIDä¸ç½‘å¡åç§°å¯¹åº”çš„è®¾å¤‡åç§°:æ ‡è¯†å¯ä»¥æ˜¯con-nameã€UUIDã€å¦‚æœå­˜åœ¨ifcfgæ–‡ä»¶åˆ™ä¹Ÿå¯ä»¥ç”¨ifcfgçš„å®Œæ•´è·¯å¾„</span></span><br><span class="line"><span class="variable">$nmcli</span> c show ifcfg-ens192 <span class="comment"># æŸ¥çœ‹connectionè¯¦ç»†ä¿¡æ¯</span></span><br><span class="line"><span class="variable">$nmcli</span> c show ad608f46-911d-4b94-bfc6-2d2b6423b3ff  </span><br><span class="line"><span class="variable">$nmcli</span> c show /etc/sysconfig/network-scripts/ifcfg-ens192</span><br><span class="line"><span class="comment"># NAME        UUID                                  TYPE      DEVICE</span></span><br><span class="line"><span class="comment"># ifcfg-ens192      ad608f46-911d-4b94-bfc6-2d2b6423b3ff  ethernet  ifcfg-ens192</span></span><br><span class="line"><span class="comment"># æœ‰çº¿è¿æ¥ 1  0fc240a9-0d6a-3322-b26d-f92e13afca1f  ethernet  enp0s8</span></span><br><span class="line"><span class="comment"># æœ‰çº¿è¿æ¥ 2  133c6109-52e2-3b45-a883-674652d15fdd  ethernet  enp0s9</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#ç¤ºä¾‹3.ç½‘ç»œé…ç½®ç®¡ç†å¯åŠ¨å’Œå…³é—­ä»¥åŠåˆ é™¤é“¾æ¥ä¿¡æ¯</span></span><br><span class="line"><span class="variable">$nmcli</span> c reload      <span class="comment">#é‡å¯ç½‘å¡(é…ç½®ä¸ä¼šç«‹å³ç”Ÿæ•ˆ)</span></span><br><span class="line"><span class="comment"># é‡è½½æŒ‡å®šifcfgæˆ–routeåˆ°connectionï¼ˆç«‹å³ç”Ÿæ•ˆï¼‰</span></span><br><span class="line"><span class="variable">$nmcli</span> c load /etc/sysconfig/network-scripts/ifcfg-ens192</span><br><span class="line"><span class="variable">$nmcli</span> c load /etc/sysconfig/network-scripts/route-ens32</span><br><span class="line"><span class="variable">$nmcli</span> c down ens192   <span class="comment">#å…³é—­æŒ‡å®šç½‘å¡é“¾æ¥ ç›¸å½“äºifdown</span></span><br><span class="line"><span class="variable">$nmcli</span> c up ens192     <span class="comment">#å¯åŠ¨æŒ‡å®šç½‘å¡é“¾æ¥ ç›¸å½“äºifup (åŒä¸€æ—¶é—´è¢«æ¿€æ´»çš„é“¾æ¥åªæœ‰ä¸€ä¸ªå•ç½‘å¡è®¾å¤‡çš„æƒ…å†µä¸‹)</span></span><br><span class="line"><span class="variable">$nmcli</span> c delete ens192[uuid] <span class="comment">#åˆ é™¤connecté“¾æ¥ï¼ˆç±»ä¼¼äºifdownå¹¶åˆ é™¤ifcfgï¼‰</span></span><br><span class="line"><span class="comment"># é…ç½®æ–‡ä»¶ä¿®æ”¹åç«‹å³ç”Ÿæ•ˆ</span></span><br><span class="line"><span class="variable">$nmcli</span> d reapply ens192</span><br><span class="line"><span class="variable">$nmcli</span> d connect ens192</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#ç¤ºä¾‹4.é‡‡ç”¨nmcliç¼–è¾‘ç½‘å¡æ–‡ä»¶è¿›è¡Œé…ç½®IPï¼ˆååˆ†æ–¹ä¾¿-äº¤äº’å¼ï¼‰</span></span><br><span class="line"><span class="variable">$nmcli</span> con edit eth0</span><br><span class="line">nmcli&gt; <span class="built_in">set</span> ipv4.addresses 192.168.0.100/24 192.168.0.254</span><br><span class="line">nmcli&gt; goto ipv4.addresses</span><br><span class="line">nmcli ipv4.addresses&gt; change</span><br><span class="line"><span class="comment"># Edit 'addresses' value: 192.168.1.200/24</span></span><br><span class="line"><span class="comment"># Do you also want to set 'ipv4.method' to 'manual'? [yes]: yes</span></span><br><span class="line">nmcli&gt; save   <span class="comment">#å¹¶ä¸”æ˜¯è‡ªåŠ¨å†™åˆ°é…ç½®æ–‡ä»¶é‡Œé¢ï¼Œé‡å¯ä¹Ÿç”Ÿæ•ˆçš„</span></span><br><span class="line"><span class="comment"># Connection 'eth0' (5fb06bd0-0bb0-7ffb-45f1-d6edd65f3e03) successfully updated.</span></span><br><span class="line">nmcli&gt; activate eth0</span><br><span class="line">nmcli&gt; quit </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#ç¤ºä¾‹5.éäº¤äº’å¼é…ç½®ä¿®æ”¹ç½‘ç»œ</span></span><br><span class="line"><span class="variable">$nmcli</span> conn add <span class="built_in">type</span> ethernet con-name thh0 ifname ens192  <span class="comment">#ens192ç½‘å¡è®¾å¤‡</span></span><br><span class="line"><span class="variable">$nmcli</span> con modify eth0 ipv4.addresses 192.168.0.200/24</span><br><span class="line"><span class="comment">#1.å…³é—­ä¼šè¯çš„è‡ªåŠ¨è¿æ¥ï¼ˆautoconnectï¼‰ã€‚</span></span><br><span class="line"><span class="variable">$nmcli</span> con mod eth0 connection.autoconnect no</span><br><span class="line"><span class="comment">#2.æŒ‡å®šä¸€ä¸ªDNSæœåŠ¡å™¨åœ°å€</span></span><br><span class="line"><span class="variable">$nmcli</span> con mod eth0 ipv4.dns 8.8.8.8   <span class="comment">#é…ç½®å‚æ•°ï¼Œæ˜¯å¯ä»¥æ·»åŠ å’Œåˆ é™¤çš„ï¼Œæ¯”å¦‚ä½¿ç”¨+ æˆ– - å·åœ¨å‚æ•°å‰é¢ã€‚</span></span><br><span class="line"><span class="variable">$nmcli</span> con mod eth0 +ipv4.dns 8.8.4.4  <span class="comment">#æ¯”å¦‚æ·»åŠ ç¬¬äºŒä¸ªDNSæœåŠ¡å™¨åœ°å€</span></span><br><span class="line"><span class="comment">#3.æ›´æ¢é™æ€IPåœ°å€å’Œé»˜è®¤ç½‘å…³ã€‚</span></span><br><span class="line"><span class="variable">$nmcli</span> con mod eth0 ipv4.addresses  <span class="string">"192.168.0.120/24   192.168.0.1"</span></span><br><span class="line"><span class="variable">$nmcli</span> con mod eth0 +ipv4.addresses  192.168.0.130/24 <span class="comment">#æ·»åŠ ç¬¬äºŒä¸ªip </span></span><br><span class="line"><span class="comment">#æ³¨ï¼šnmcli con modä¿®æ”¹çš„é…ç½®ä¼šè‡ªåŠ¨ä¿å­˜æˆé…ç½®æ–‡ä»¶ï¼Œå¹¶ä¸”é‡å¯åä¾ç„¶æœ‰æ•ˆï¼Œä½†æ˜¯å¦‚æœé…ç½®æ›´æ”¹äº†ä½ éœ€è¦ä»æ–°æ¿€æ´»ä¸€ä¸‹ï¼Œä½¿æ–°é…ç½®ç”Ÿæ•ˆã€‚</span></span><br><span class="line"><span class="variable">$nmcli</span> conn mod eth0 connection.autoconnect yes <span class="comment">#é…ç½®å¼€æœºè‡ªåŠ¨å¯åŠ¨</span></span><br><span class="line"><span class="variable">$nmcli</span> con up eth0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#ç¤ºä¾‹6.DHCPä¸Staticé…ç½®</span></span><br><span class="line"><span class="comment">#1.åˆ›å»ºconnectioné…ç½®é™æ€æ‰‹åŠ¨è·å–ipï¼ˆç­‰åŒäºé…ç½®ifcfgï¼Œå…¶ä¸­BOOTPROTO=noneï¼Œå¹¶ifupå¯åŠ¨ï¼‰</span></span><br><span class="line">nmcli c add <span class="built_in">type</span> ethernet con-name eth0 ifname ens192 ipv4.addr 192.168.1.100/24 ipv4.gateway 192.168.1.1 ipv4.method manual</span><br><span class="line"></span><br><span class="line"><span class="comment">#2.åˆ›å»ºconnectionï¼Œé…ç½®åŠ¨æ€ipï¼ˆç­‰åŒäºé…ç½®ifcfgï¼Œå…¶ä¸­BOOTPROTO=dhcpï¼Œå¹¶ifupå¯åŠ¨ï¼‰</span></span><br><span class="line">nmcli c add <span class="built_in">type</span> ethernet con-name eth0 ifname ens192 ipv4.method auto</span><br><span class="line"></span><br><span class="line"><span class="comment">#3.ä¾‹å­å»ºä¸€ä¸ªè¿æ¥ï¼ˆconnectionï¼‰å¤šIPåœ°å€ä¸æŒ‡å®šè·¯ç”±åŒæ—¶ä¼šåœ¨/etc/sysconfig/network-scripts/ç›®å½•ä¸­å»ºç«‹é…ç½®æ–‡ä»¶</span></span><br><span class="line">nmcli c add <span class="built_in">type</span> ethernet con-name ens192-test ifname ens192 ipv4.addresses <span class="string">'192.168.1.100/24,192.168.1.101/32'</span> ipv4.routes <span class="string">'10.0.0.0/8 192.168.1.10,192.168.0.0/16 192.168.1.11'</span> ipv4.gateway 192.168.1.254 ipv4.dns <span class="string">'8.8.8.8,4.4.4.4'</span> ipv4.method manual</span><br><span class="line"><span class="comment"># â–ª type ethernetï¼šåˆ›å»ºè¿æ¥æ—¶å€™å¿…é¡»æŒ‡å®šç±»å‹ï¼Œç±»å‹æœ‰å¾ˆå¤šï¼Œå¯ä»¥é€šè¿‡nmcli c add type -hçœ‹åˆ°ï¼Œè¿™é‡ŒæŒ‡å®šä¸ºethernetã€‚</span></span><br><span class="line"><span class="comment"># â–ª con-name ethX ifname ethXï¼šç¬¬ä¸€ä¸ªethXè¡¨ç¤ºè¿æ¥ï¼ˆconnectionï¼‰çš„åå­—ï¼Œè¿™ä¸ªåå­—å¯ä»¥ä»»æ„å®šä¹‰ï¼Œæ— éœ€å’Œç½‘å¡åç›¸åŒï¼›ç¬¬äºŒä¸ªethXè¡¨ç¤ºç½‘å¡åï¼Œè¿™ä¸ªethXå¿…é¡»æ˜¯åœ¨nmcli dé‡Œèƒ½çœ‹åˆ°çš„ã€‚</span></span><br><span class="line"><span class="comment"># â–ª ipv4.addresses â€˜192.168.1.100/24,192.168.1.101/32â€™ï¼šé…ç½®2ä¸ªipåœ°å€ï¼Œåˆ†åˆ«ä¸º192.168.1.100/24å’Œ192.168.1.101/32</span></span><br><span class="line"><span class="comment"># â–ª ipv4.gateway 192.168.1.254ï¼šç½‘å…³ä¸º192.168.1.254</span></span><br><span class="line"><span class="comment"># â–ª ipv4.dns â€˜8.8.8.8,4.4.4.4â€™ï¼šdnsä¸º8.8.8.8å’Œ4.4.4.4</span></span><br><span class="line"><span class="comment"># â–ª ipv4.method manualï¼šé…ç½®é™æ€IP</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#4.ä¾‹å­å»ºä¸€ä¸ªè¿æ¥ï¼ˆconnectionï¼‰å•IPè®¾ç½®</span></span><br><span class="line">nmcli c add <span class="built_in">type</span> ethernet con-name eth0 ifname ens192 ipv4.addr 10.20.172.242/24 ipv4.gateway 10.20.172.1 ipv4.dns <span class="string">'223.6.6.6,223.5.5.5'</span> ipv4.method manual</span><br><span class="line"><span class="comment"># Connection 'eth0' (f36758b7-0972-422e-8291-faaa4e3e2396) successfully added.</span></span><br><span class="line">cat /etc/sysconfig/network-scripts/ifcfg-eth0</span><br><span class="line"><span class="comment"># TYPE=Ethernet</span></span><br><span class="line"><span class="comment"># PROXY_METHOD=none</span></span><br><span class="line"><span class="comment"># BROWSER_ONLY=no</span></span><br><span class="line"><span class="comment"># BOOTPROTO=none</span></span><br><span class="line"><span class="comment"># IPADDR=10.2.172.242</span></span><br><span class="line"><span class="comment"># PREFIX=24</span></span><br><span class="line"><span class="comment"># GATEWAY=10.20.172.1</span></span><br><span class="line"><span class="comment"># DNS1=223.6.6.6</span></span><br><span class="line"><span class="comment"># DNS2=223.5.5.5</span></span><br><span class="line"><span class="comment"># DEFROUTE=yes</span></span><br><span class="line"><span class="comment"># IPV4_FAILURE_FATAL=no</span></span><br><span class="line"><span class="comment"># IPV6INIT=yes</span></span><br><span class="line"><span class="comment"># IPV6_AUTOCONF=yes</span></span><br><span class="line"><span class="comment"># IPV6_DEFROUTE=yes</span></span><br><span class="line"><span class="comment"># IPV6_FAILURE_FATAL=no</span></span><br><span class="line"><span class="comment"># IPV6_ADDR_GEN_MODE=stable-privacy</span></span><br><span class="line"><span class="comment"># NAME=eth0</span></span><br><span class="line"><span class="comment"># UUID=f36758b7-0972-422e-8291-faaa4e3e2396</span></span><br><span class="line"><span class="comment"># DEVICE=ens192</span></span><br><span class="line"><span class="comment"># ONBOOT=yes</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#ç¤ºä¾‹7.åˆ›å»ºå¤šä¸ªä¼šè¯</span></span><br><span class="line">nmcli connection add con-name default <span class="built_in">type</span> ethernet ifname eno16777736  <span class="comment">#é»˜è®¤ä¸ºDHCP</span></span><br><span class="line"><span class="comment"># connection ä¼šè¯ï¼Œå¯ä»¥ç®€å†™ä¸ºcon</span></span><br><span class="line"><span class="comment"># add  æ·»åŠ </span></span><br><span class="line"><span class="comment"># con-name  ä¼šè¯åè‡ªå·±éšä¾¿å®šä¹‰</span></span><br><span class="line"><span class="comment"># type ethernet  ç±»å‹ä»¥å¤ªç½‘å¡</span></span><br><span class="line"><span class="comment"># ifname  æ¥å£åï¼Œä¹Ÿå°±æ˜¯ç½‘å¡å </span></span><br><span class="line"><span class="comment"># åˆ›å»ºå¦ä¸€ä¸ªä¼šè¯å«åšâ€œstaticâ€å¹¶ä¸”æŒ‡å®šå®ƒçš„ipå’Œç½‘å…³ã€‚ä½†æ˜¯ä¸èƒ½è‡ªåŠ¨è¿æ¥ç½‘ç»œã€‚</span></span><br><span class="line">nmcli connection add con-name static ifname eno16777736 autoconnect no <span class="built_in">type</span> ethernet ip4 192.168.0.111/24 gw4 192.168.0.254</span><br><span class="line">nmcli connection up static   <span class="comment">#æ‰‹åŠ¨æ”¹ä¸ºé™æ€ipçš„ä¼šè¯</span></span><br><span class="line">nmcli connection up default  <span class="comment">#é‡æ–°æ”¹ä¸ºDHCPè·å–IP</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#ç¤ºä¾‹8.é…ç½®è™šæ‹Ÿä¸»ä»ç½‘å¡bondæ˜¯åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿé“¾æ¥åšä¸ºä¸»ï¼Œè‹¥å¹²ä¸ªè¿æ¥åšä¸ºä»ã€‚</span></span><br><span class="line"><span class="comment">#ä»è¿æ¥å…³è”å„è‡ªçš„ç‰©ç†ç½‘å¡ï¼Œé¿å…ç‰©ç†ç½‘å¡çš„å•ç‚¹æ•…éšœï¼Œæé«˜å¯ç”¨æ€§ã€‚</span></span><br><span class="line"><span class="comment">#ä¸¤ä¸ªç½‘å¡enp9s0f1å’Œenp9s0f1</span></span><br><span class="line"><span class="comment">#1.æ·»åŠ ä¸€ä¸ªè¿æ¥ç±»å‹ä¸ºbondï¼Œè¿æ¥åbond0,è®¾ç½®è¿æ¥è‡ªåŠ¨å¯åŠ¨.è®¾å¤‡æŒ‡å‘bond0ï¼Œå°†åˆ›å»ºå‡ºä¸€ä¸ªè™šæ‹Ÿè®¾å¤‡bond0</span></span><br><span class="line">nmcli conn add <span class="built_in">type</span> bond con-name bond0 ifname bond0 mode active-backup autoconnect yes</span><br><span class="line"></span><br><span class="line"><span class="comment">#2.ä¸ºbond0æ·»åŠ ä¸¤ä¸ªä»è¿æ¥eth0å’Œeth1ï¼Œåˆ†åˆ«å…³è”ç‰©ç†ç½‘å¡enp9s0f1å’Œenp9s0f1ï¼Œè®¾ç½®è¿æ¥è‡ªåŠ¨å¯åŠ¨.ä¹Ÿå¯ä»¥ä¸æŒ‡å®šä»è¿æ¥åï¼Œä¼šè‡ªåŠ¨å‘½åbond-slave-enp9s0f0å’Œbond-slave-enp9s0f1</span></span><br><span class="line">nmcli conn add <span class="built_in">type</span> bond-slave con-name eth0 ifname enp9s0f0 master bond0 autoconnect yes</span><br><span class="line">nmcli conn add <span class="built_in">type</span> bond-slave con-name eth1 ifname enp9s0f1 master bond0 autoconnect yes</span><br><span class="line"></span><br><span class="line"><span class="comment">#3.ä¸ºè¿æ¥bond0é…ç½®IPã€ç½‘å…³ã€dnsã€å¯åŠ¨æ–¹å¼</span></span><br><span class="line">nmcli conn modify bond0 ipv4.addresses <span class="string">"10.x.x.x/24"</span></span><br><span class="line">nmcli conn modify bond0 ipv4.gateway <span class="string">"10.x.x.254"</span></span><br><span class="line">nmcli conn modify bond0 ipv4.dns <span class="string">"x.x.x.x"</span></span><br><span class="line">nmcli conn modify bond0 ipv4.method manual</span><br><span class="line"></span><br><span class="line"><span class="comment">#4.å¯åŠ¨ä¸¤ä¸ªä»è¿æ¥ï¼Œç„¶åå¯åŠ¨ä¸»è¿æ¥ï¼›å¯åŠ¨eth0å’Œeth1æ—¶ä¼šè‡ªåŠ¨disconnectç½‘å¡ä¸ŠåŸæœ‰çš„è¿æ¥ã€‚</span></span><br><span class="line">nmcli connection up eth0</span><br><span class="line">nmcli connection up eth1</span><br><span class="line">nmcli connection up bond0 </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#å®ä¾‹9.WIFIæœå¯»å’Œé“¾æ¥</span></span><br><span class="line"><span class="comment">#è®¾ç½®NetworkManagerè‡ªåŠ¨å¯åŠ¨å¹¶ä¸”å®‰è£…NetworkManager-wifi</span></span><br><span class="line"><span class="variable">$chkconfig</span> NetworkManager on &amp;&amp; yum -y install NetworkManager-wifi</span><br><span class="line"><span class="variable">$nmcli</span> r wifi on <span class="comment"># å¼€å¯æ— çº¿ç½‘ç»œ</span></span><br><span class="line"><span class="variable">$nmcli</span> r all off <span class="comment"># å…³é—­æ— çº¿ç½‘ç»œï¼ˆNMé»˜è®¤å¯ç”¨æ— çº¿ç½‘ç»œï¼‰</span></span><br><span class="line"><span class="variable">$nmcli</span> dev wifi</span><br><span class="line"><span class="variable">$nmcli</span> dev wifi connect password</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#ç¤ºä¾‹10.æ•´ä½“è”ç½‘æ§åˆ¶æ“ä½œ</span></span><br><span class="line">nmcli networking     <span class="comment">#æŸ¥çœ‹NMçº³ç®¡çŠ¶æ€ enabled</span></span><br><span class="line">nmcli n on  <span class="comment">#å¼€å¯NMçº³ç®¡</span></span><br><span class="line">nmcli n off <span class="comment">#å…³é—­NMçº³ç®¡ï¼ˆè°¨æ…æ‰§è¡Œï¼‰</span></span><br><span class="line">nmcli m     <span class="comment"># ç›‘å¬äº‹ä»¶</span></span><br><span class="line">nm-online <span class="comment"># æ£€æµ‹NMæ˜¯å¦åœ¨çº¿å¯ç”¨</span></span><br><span class="line">Connecting...............   30s [online]</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h3 id="netplan-å‘½ä»¤"><a href="#netplan-å‘½ä»¤" class="headerlink" title="netplan å‘½ä»¤"></a>netplan å‘½ä»¤</h3><p>æè¿°ï¼šåœ¨æœ€æ–°çš„ <code>Ubuntu 20.04</code> ç³»ç»Ÿç‰ˆæœ¬ä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨netplanå‘½ä»¤æ¥æŒ‡å®šç½‘å¡åœ°å€çš„é…ç½®ã€‚</p>
<p>ç½‘å¡ç¼ºçœé…ç½®æ–‡ä»¶è·¯å¾„: /etc/netplan/00-installer-config.yaml</p>
<p><strong>é…ç½®ç¤ºä¾‹:</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">$ cat /etc/netplan/00-installer-config.yaml</span><br><span class="line"><span class="comment"># This is the network config written by 'subiquity'</span></span><br><span class="line">network:</span><br><span class="line">  version: 2</span><br><span class="line">  ethernets:</span><br><span class="line">    ens33:</span><br><span class="line">      addresses: []  <span class="comment"># è‡ªåŠ¨è·å–IPè®¾ç½®</span></span><br><span class="line">      dhcp4: <span class="literal">true</span></span><br><span class="line">    ens160:</span><br><span class="line">      dhcp: <span class="literal">false</span>    <span class="comment"># é™æ€IPè®¾ç½®</span></span><br><span class="line">      addresses: [10.20.176.101/24] <span class="comment"># IPè®¾ç½®</span></span><br><span class="line">      gateway4: 10.20.176.1  <span class="comment"># ç½‘å…³è®¾ç½®</span></span><br><span class="line">      routes:                <span class="comment"># è·¯ç”±è®¾ç½®</span></span><br><span class="line">        - to: 10.0.0.0/8     <span class="comment"># ç›®æ ‡åœ°å€æ®µ</span></span><br><span class="line">          via: 10.20.176.1   <span class="comment"># è·¯ç”±ç½‘å…³</span></span><br><span class="line">          metric: 100        <span class="comment"># æŒ‡æ ‡</span></span><br><span class="line">      nameservers:           <span class="comment"># DNS åŸŸåæœåŠ¡å™¨</span></span><br><span class="line">        addresses: [223.6.6.6]</span><br><span class="line">    ens192:</span><br><span class="line">      addresses:</span><br><span class="line">      - 192.168.12.30/24</span><br><span class="line">      gateway4: 192.168.12.1</span><br><span class="line">      nameservers:</span><br><span class="line">        addresses:</span><br><span class="line">        - 192.168.12.254</span><br><span class="line">  bridges:                  <span class="comment"># ç½‘ç»œæ¡¥æ¥</span></span><br><span class="line">    br0:                    <span class="comment"># æ¡¥æ¥åç§°</span></span><br><span class="line">      interfaces: [ens33]   <span class="comment"># ç½‘å¡æ¥å£ </span></span><br><span class="line">      dhcp4: no             <span class="comment"># è‡ªåŠ¨è·å–</span></span><br><span class="line">      addresses: [192.168.1.110/24] </span><br><span class="line">      gateway4: 192.168.1.1 <span class="comment"># ç½‘å…³åœ°å€</span></span><br></pre></td></tr></table></figure></p>
<p><strong>å‘½ä»¤å®è·µ:</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.æ›´æ–°ç½‘å¡é…ç½®æ–‡ä»¶æ›´æ–°, è¾“å…¥å¯†ç å³å¯è®¾ç½®å®Œæˆã€‚</span></span><br><span class="line">sudo netplan apply</span><br></pre></td></tr></table></figure></p>
<hr>
<h2 id="0x02-ç½‘ç»œæŸ¥çœ‹"><a href="#0x02-ç½‘ç»œæŸ¥çœ‹" class="headerlink" title="0x02 ç½‘ç»œæŸ¥çœ‹"></a>0x02 ç½‘ç»œæŸ¥çœ‹</h2><h3 id="hostname-å‘½ä»¤"><a href="#hostname-å‘½ä»¤" class="headerlink" title="hostname å‘½ä»¤"></a>hostname å‘½ä»¤</h3><p>dnsdomainnameå‘½ä»¤ç”¨äºå®šä¹‰DNSç³»ç»Ÿä¸­FQDNåç§°ä¸­çš„åŸŸåï¼ˆå·²è¢«Hostnameæ›¿ä»£ï¼‰ç”¨äºæ˜¾ç¤ºå’Œè®¾ç½®ç³»ç»Ÿçš„ä¸»æœºåç§°ï¼Œç¯å¢ƒå˜é‡HOSTNAMEä¹Ÿä¿å­˜äº†å½“å‰çš„ä¸»æœºåï¼Œåœ¨ä½¿ç”¨hostnameå‘½ä»¤è®¾ç½®ä¸»æœºååï¼Œç³»ç»Ÿå¹¶ä¸ä¼šæ°¸ä¹…ä¿å­˜æ–°çš„ä¸»æœºåï¼Œé‡æ–°å¯åŠ¨æœºå™¨ä¹‹åè¿˜æ˜¯åŸæ¥çš„ä¸»æœºå</p>
<p>å¦‚æœéœ€è¦æ°¸ä¹…ä¿®æ”¹ä¸»æœºåï¼Œéœ€è¦åŒæ—¶ä¿®æ”¹<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">/etc/hosts     <span class="comment">#ä¿®æ”¹åŸŸåç»‘å®šå¾—æœºå™¨/æˆ–è€…IP  </span></span><br><span class="line">/etc/hostname            <span class="comment">#ä¿®æ”¹è®¡ç®—æœºå</span></span><br><span class="line">/etc/sysconfig/network   </span><br><span class="line"></span><br><span class="line"><span class="comment">#è¯­æ³•</span></span><br><span class="line">hostname [é€‰é¡¹] [å‚æ•°]</span><br><span class="line"></span><br><span class="line"><span class="comment">#å‚æ•°</span></span><br><span class="line">-a ï¼šæ˜¾ç¤ºä¸»æœºåˆ«å</span><br><span class="line">-d : æ˜¾ç¤ºDNSåŸŸå</span><br><span class="line">-f : æ˜¾ç¤ºFQDNåç§°</span><br><span class="line">-i ï¼šæ˜¾ç¤ºä¸»æœºIPåœ°å€(ipv4/ipv6/ç½‘å¡åç§°)</span><br><span class="line">-I : æ˜¾ç¤ºæ‰€æœ‰çš„IP</span><br><span class="line">-s ï¼šæ˜¾ç¤ºçŸ­ä¸»æœºåç§°,åœ¨ç¬¬ä¸€ä¸ªç‚¹å¤„æˆªæ–­;</span><br><span class="line">-y : æ˜¾ç¤ºNISåŸŸå</span><br></pre></td></tr></table></figure></p>
<p>å®é™…æ¡ˆä¾‹:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ç¤ºä¾‹1.å¸¸ç”¨è·å–å’Œè®¾ç½®æœºå™¨å</span></span><br><span class="line">hostname  <span class="comment">#è·å–æœºå™¨å</span></span><br><span class="line">hostname weiyigeek <span class="comment">#è®¾ç½®æœºå™¨å </span></span><br><span class="line">hostname -d <span class="comment">#æ˜¾ç¤ºDNSåŸŸå #localdomain</span></span><br><span class="line"></span><br><span class="line">blog&gt; hostname -s </span><br><span class="line">WeiyiGeek</span><br><span class="line">blog&gt; hostname -y </span><br><span class="line">localdomain</span><br><span class="line"></span><br><span class="line">hostname -f  <span class="comment">#æ˜¾ç¤ºFQDNåç§°,ä¸€æ­¥è·å–</span></span><br><span class="line">WeiyiGeek.localdomain</span><br><span class="line"></span><br><span class="line"><span class="comment">#è¡¥å……ï¼šè¯´æ˜linux ä¿®æ”¹ hostname ç«‹å³ç”Ÿæ•ˆçš„å››ç§æ–¹æ³• (ç«‹å³ç”Ÿæ•ˆå°±é€€å‡ºç»ˆç«¯åå†è¿æ¥)</span></span><br><span class="line">æ–¹æ³•ä¸€ï¼šhostname oratest  <span class="comment">#è¿™ä¸€æ­¥åº”è¯¥åªèƒ½åœ¨é‡å¯å‰ç«‹å³ç”Ÿæ•ˆ å¹¶éé•¿ä¹…ä¹‹è®¡</span></span><br><span class="line">æ–¹æ³•äºŒï¼šä¿®æ”¹/etc/sysconfig/networkä¸­çš„hostname </span><br><span class="line">æ–¹æ³•ä¸‰ï¼šä¿®æ”¹/etc/hostsæ–‡ä»¶</span><br><span class="line">æ–¹æ³•å››ï¼šç”¨sysctl ä¿®æ”¹kernel.hostname</span><br><span class="line">        æŸ¥çœ‹ï¼šsysctl kernel.hostname</span><br><span class="line">        ä¿®æ”¹ï¼šsudo sysctl kernel.hostname=WeiyiGeek</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#ç¤ºä¾‹2.è·å–ä¸»æœºçš„IPV4ä¿¡æ¯</span></span><br><span class="line"><span class="variable">$hostname</span> -I</span><br><span class="line">10.10.17.109 192.168.64.1 192.168.1.1 </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#ç¤ºä¾‹3.è·å–ä¸»æœºçš„IPv4/ipv6/ä»¥åŠç½‘å¡ä¿¡æ¯</span></span><br><span class="line">hostname -i</span><br><span class="line">fe80::9738:2d26:820f:2d50 ens192 </span><br><span class="line">fe80::dfc:592e:b4a4:9877 ens34 </span><br><span class="line">10.10.107.222 192.168.1.99</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h3 id="hostnamectl-å‘½ä»¤"><a href="#hostnamectl-å‘½ä»¤" class="headerlink" title="hostnamectl å‘½ä»¤"></a>hostnamectl å‘½ä»¤</h3><p>æè¿°:è¿›è¡Œè®¾ç½®ä¸»æœºåç§°å¹¶ä¸”ç«‹å³ç”Ÿæ•ˆ;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ç¤ºä¾‹1</span></span><br><span class="line">hostnamectl <span class="built_in">set</span>-hostname XXXX</span><br></pre></td></tr></table></figure>
<p><br></p>
<h3 id="ifconfig-å‘½ä»¤"><a href="#ifconfig-å‘½ä»¤" class="headerlink" title="ifconfig å‘½ä»¤"></a>ifconfig å‘½ä»¤</h3><p>æè¿°ï¼šä¸»è¦ç”¨äºæŸ¥çœ‹ç½‘ç»œçŠ¶æ€ä»¥åŠæŸ¥è¯¢IPåœ°å€ä¸é…ç½®ç½‘å¡ç­‰æ“ä½œ<br>loæ¥å£ : Local Loopback æœ¬åœ°å›ç¯ç½‘å¡ä¸€èˆ¬ç”¨äºåšå®éªŒå’Œæµ‹è¯•.</p>
<p>é…ç½®ç½‘å¡çš„é…ç½®æ–‡ä»¶è·¯å¾„ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">CentOS7: </span><br><span class="line">    /etc/sysconfig/network-scripts/</span><br><span class="line">    /etc/sysconfig/network-scripts/ifcfg-ens33   <span class="comment">#é…ç½®ç½‘å¡</span></span><br><span class="line">    /etc/sysconfig/network-scripts/ifcfg-ç½‘å¡å</span><br><span class="line"></span><br><span class="line">Drbian/Kail: /etc/network/interfaces</span><br><span class="line"></span><br><span class="line"><span class="comment"># centOS éœ€è¦æ‰‹å·¥æ”¹NM_ONBOOT=yesï¼Œ å¦åˆ™eh0ä¸æ˜¾ç¤º</span></span><br><span class="line"><span class="comment">#é€šè¿‡é…ç½®è¯¥é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥è‡ªåŠ¨è¿›è¡Œä¸€ä¸ªç½‘ç»œçš„è®¾ç½®ï¼ŒåŒ…æ‹¬IPADDR,gateway,netmask,DNS1å’ŒDNS2ç­‰ç­‰ï¼›</span></span><br><span class="line"></span><br><span class="line">/etc/resolv.conf   <span class="comment">#è®¾ç½®DNS</span></span><br></pre></td></tr></table></figure><br><figure class="image-box">
                <a rel=ç½‘ç»œåŸºæœ¬é…ç½®æŸ¥è¯¢ href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190606162706.png" target="_blank" title="WeiyiGeek.centosé…ç½®æ–‡ä»¶å‚æ•°" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190606162706.png" alt="WeiyiGeek.centosé…ç½®æ–‡ä»¶å‚æ•°" title="" class=""></a>
                <p>WeiyiGeek.centosé…ç½®æ–‡ä»¶å‚æ•°</p>
            </figure></p>
<p>æ“ä½œå®ä¾‹ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å®ä¾‹1.</span></span><br><span class="line">ifconfig   <span class="comment">#æœ¬åœ°ç½‘ç»œipåœ°å€é…ç½®æƒ…å†µ</span></span><br><span class="line">ifconfig -a <span class="comment">#æŸ¥çœ‹æ‰€æœ‰ç½‘å¡ï¼ˆåŒ…æ‹¬æœªå¯ç”¨å¾—ï¼‰</span></span><br><span class="line">ifconfig eth0  <span class="comment">#æ˜¾ç¤ºè‡ªå®šç½‘å¡é…ç½®</span></span><br><span class="line">eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 172.17.24.236  netmask 255.255.192.0  broadcast 172.17.63.255</span><br><span class="line">        ether 00:16:3e:04:c7:0b  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 1655351  bytes 946714757 (902.8 MiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 1451014  bytes 194835318 (185.8 MiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"><span class="comment">#æ³¨ï¼šä¸åŒå‘è¡Œç‰ˆå¯èƒ½æœ‰æ‰€ä¸åŒ</span></span><br><span class="line"><span class="comment"># Iface/eth : å®é™…ç½‘å¡åç§°</span></span><br><span class="line"><span class="comment"># UP BROADCAST : ç½‘å¡å‚æ•°</span></span><br><span class="line"><span class="comment"># encap : ç½‘å¡ç±»å‹</span></span><br><span class="line"><span class="comment"># HWaddr/ether : MACåœ°å€</span></span><br><span class="line"><span class="comment"># Bcast/broadcast : å¹¿æ’­åœ°å€</span></span><br><span class="line"><span class="comment"># Base address : ç½‘å¡åœ¨å†…å­˜ä¸­å®é™…åœ°å€</span></span><br><span class="line"><span class="comment"># RX packets : å½“å‰æ¥æ”¶æ•°æ®åŒ…æ•°é‡</span></span><br><span class="line"><span class="comment"># TX packets : å½“å‰å‘é€æ•°æ®åŒ…æ•°é‡</span></span><br><span class="line"><span class="comment"># #è¡¥å……ï¼š RX errors 0  dropped 0  overruns 0  frame 0</span></span><br><span class="line"><span class="comment"># RX-OK RX-ERR RX-DRP RX-OVR : ç½‘å¡æ­£ç¡®æ¥æ”¶æ•°æ®åŒ…çš„æ•°é‡ä»¥åŠå‘ç”Ÿé”™è¯¯ã€æµå¤±ã€ç¢°æ’çš„æ€»æ•°</span></span><br><span class="line"><span class="comment"># TX-OK TX-ERR TX-DRP TX-OVR : ç½‘å¡æ­£ç¡®å‘é€æ•°æ®åŒ…çš„æ•°é‡ä»¥åŠå‘ç”Ÿé”™è¯¯ã€æµå¤±ã€ç¢°æ’çš„æ€»æ•°</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹2.Â æ›´æ”¹IPåœ°å€åŠå­ç½‘æ©ç ï¼ˆä¸´æ—¶ç”Ÿæ•ˆï¼‰</span></span><br><span class="line"><span class="comment">#æœ‰æ—¶, é€šè¿‡é…ç½®ä¿®æ”¹åæœªå¿…ç”Ÿæ•ˆ, ä¼šæœ‰IPå†²çª, ç½‘å¡æŸåç­‰åŸå› é€ æˆ, å¿…é¡»æ˜¯åœ¨å‘½ä»¤ä¸­å¯æŸ¥çœ‹åˆ°çš„, è§†ä¸ºç”Ÿæ•ˆ.</span></span><br><span class="line">ifconfig lo 192.168.1.101 netmask 255.255.255.0</span><br><span class="line">ifconfig lo 192.168.1.10/24       <span class="comment">#é‡‡ç”¨/24é…ç½®ipåœ°å€</span></span><br><span class="line">ifconfig lo</span><br><span class="line"><span class="comment"># lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536</span></span><br><span class="line"><span class="comment">#         inet 192.168.1.101  netmask 255.255.255.0</span></span><br><span class="line"><span class="comment">#         loop  txqueuelen 1000  (Local Loopback)</span></span><br><span class="line"></span><br><span class="line">ifconfig br-523a7e9f1e05 192.168.1.10/24  broadcast 192.168.1.255   <span class="comment">#æ·»åŠ ä¸€ä¸ªå¹¿æ’­åœ°å€</span></span><br><span class="line">ifconfig br-523a7e9f1e05</span><br><span class="line"><span class="comment"># br-523a7e9f1e05: flags=4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500</span></span><br><span class="line"><span class="comment">#         inet 192.168.1.10  netmask 255.255.255.0  broadcast 192.168.1.255</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#ç¤ºä¾‹3.å¯ç”¨å’Œåœç”¨ç½‘å¡ debian</span></span><br><span class="line">ifconfig lo down                                   <span class="comment"># downæ‰åä¸Šé¢ä¸´æ—¶é…ç½®çš„IPåœ°å€å¤±æ•ˆ</span></span><br><span class="line">ifconfig enp2s0 up </span><br><span class="line">ifconfig eth0 192.168.4.1 netmask 255.255.255.0 up <span class="comment"># é…ç½®eth0çš„IPï¼ŒåŒæ—¶æ¿€æ´»è®¾å¤‡</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#ç¤ºä¾‹4.é…ç½®eth0åˆ«åè®¾å¤‡ eth0:1 çš„IPä¸å»ºç«‹ä¸€ä¸ªä¸´æ—¶VIP</span></span><br><span class="line">ifconfig eth0:1 192.168.4.2</span><br><span class="line">ifconfig lo:0 192.168.2.100 netmask 255.255.255.0 up   <span class="comment">#lo:0 è¡¨ç¤º å»ºè®®ä¸€ä¸ª lo ç½‘å¡æ¥å£çš„ lo:0 åˆ«å</span></span><br><span class="line"><span class="comment"># 1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000</span></span><br><span class="line"><span class="comment">#     link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span></span><br><span class="line"><span class="comment">#     inet 127.0.0.1/8 scope host lo</span></span><br><span class="line"><span class="comment">#        valid_lft forever preferred_lft forever</span></span><br><span class="line"><span class="comment">#     inet 192.168.2.100/24 scope global lo:0</span></span><br><span class="line"><span class="comment">#        valid_lft forever preferred_lft forever</span></span><br></pre></td></tr></table></figure></p>
<p><strong>è¡¥å……ï¼šçŸ¥è¯†ç‚¹</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#(1)è™šæ‹Ÿæœºç½‘ç»œé…ç½®</span></span><br><span class="line">å…‹éš†Linuxç³»ç»Ÿåˆ°å…¶ä»–æœºå™¨ä¸Šï¼Œæœ‰ç½‘å¡å†²çªå¾—è§£å†³æ–¹æ³•.</span><br><span class="line">1.setup ä¿®æ”¹IPåœ°å€</span><br><span class="line">2.å¦‚æœçœ‹ä¸åˆ°eth0ï¼Œå¯åŠ¨ç½‘å¡ é…ç½®æ–‡ä»¶ </span><br><span class="line">ONBOOT=yes</span><br><span class="line">service network restart  <span class="comment">#é‡å¯ç½‘ç»œæœåŠ¡ï¼Œå¦‚æœè¿˜æ˜¯çœ‹ä¸åˆ°å¯èƒ½æ˜¯Ipå†²çª</span></span><br><span class="line">3.ä¿®æ”¹UUIDä¸MAC</span><br><span class="line">ä½¿ç”¨ifconfigæŸ¥çœ‹å®é™…MACä¸nmcli conæŸ¥çœ‹ç½‘å¡çš„uuidå°±è¡Œä¿®æ”¹,å¦‚æœè¿˜æ˜¯ä¸è¡Œå‚è€ƒä¸‹é¢</span><br><span class="line">  1)vi /etc/sysconfig/network-scripts/ifcfg-eth0       <span class="comment">#åˆ é™¤MACåœ°å€è¡Œ</span></span><br><span class="line">  2)rm -rf /etc/udev/rules.d/70-persistent-net.rules   <span class="comment">#åˆ é™¤ç½‘å¡å’ŒMACåœ°å€ç»‘å®šæ–‡ä»¶</span></span><br><span class="line">  3)é‡å¯ç³»ç»Ÿ</span><br><span class="line">4.è®¾ç½®è™šæ‹Ÿæœºç½‘ç»œè¿æ¥æ–¹å¼</span><br><span class="line">5.ä¿®æ”¹æ¡¥æ¥ç½‘å¡</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h3 id="ifdown-å‘½ä»¤"><a href="#ifdown-å‘½ä»¤" class="headerlink" title="ifdown å‘½ä»¤"></a>ifdown å‘½ä»¤</h3><p>ifdown  ç½‘å¡å  #ç¦ç”¨ç½‘å¡è®¾å¤‡</p>
<p><br></p>
<h3 id="ifup-å‘½ä»¤"><a href="#ifup-å‘½ä»¤" class="headerlink" title="ifup å‘½ä»¤"></a>ifup å‘½ä»¤</h3><p>ifup    ç½‘å¡å  #å¯ç”¨ç½‘å¡è®¾å¤‡</p>
<p><br></p>
<h3 id="ip-å‘½ä»¤"><a href="#ip-å‘½ä»¤" class="headerlink" title="ip å‘½ä»¤"></a>ip å‘½ä»¤</h3><p>æè¿°ï¼šipå‘½ä»¤ç”¨æ¥æ˜¾ç¤ºæˆ–æ“çºµLinuxä¸»æœºçš„è·¯ç”±ã€ç½‘ç»œè®¾å¤‡ã€ç­–ç•¥è·¯ç”±å’Œéš§é“ï¼Œæ˜¯Linuxä¸‹iproute2è½¯ä»¶åŒ…é‡Œé¢è¾ƒæ–°çš„åŠŸèƒ½å¼ºå¤§çš„ç½‘ç»œé…ç½®å·¥å…·ã€‚ </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åŸºç¡€è¯­æ³•</span></span><br><span class="line">ip [OPTIONS] OBJECT [COMMAND [ARGUMENTS]]</span><br><span class="line"><span class="comment">#å‚æ•°é€‰é¡¹</span></span><br><span class="line">-s:è¾“å‡ºæ›´è¯¦ç»†å¾—ä¿¡æ¯</span><br><span class="line">-f:å¼ºåˆ¶ä½¿ç”¨æŒ‡å®šå¾—åè®®æ—</span><br><span class="line">-4/-6ï¼šæŒ‡å®šä½¿ç”¨å¾—ç½‘ç»œå±‚å±‚åè®®æ˜¯IPV4/6åè®®;</span><br><span class="line">-0:è¾“å‡ºä¿¡æ¯æ¯æ¡è®°å½•è¾“å‡ºä¸€è¡Œ,å³ä¾¿å†…å®¹è¾ƒå¤šä¹Ÿä¸æ¢è¡Œæ˜¾ç¤º;</span><br><span class="line">-r:æ˜¾ç¤ºä¸»æœºæ—¶å€™ï¼Œä¸ä½¿ç”¨IPåœ°å€è€Œä½¿ç”¨ä¸»æœºå¾—åŸŸåï¼›</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#OBJECTï¼šæ˜¯ä½ è¦å…·ä½“ç®¡ç†æˆ–è€…ç½‘ç»œå¯¹è±¡</span></span><br><span class="line">link ç½‘ç»œè®¾å¤‡</span><br><span class="line">address ä¸€ä¸ªè®¾å¤‡çš„åè®®ï¼ˆIPæˆ–è€…IPV6ï¼‰åœ°å€</span><br><span class="line">neighbour ARPæˆ–è€…NDISCç¼“å†²åŒºæ¡ç›®</span><br><span class="line">route è·¯ç”±è¡¨æ¡ç›®</span><br><span class="line">rule è·¯ç”±ç­–ç•¥æ•°æ®åº“ä¸­çš„è§„åˆ™</span><br><span class="line">maddress å¤šæ’­åœ°å€</span><br><span class="line">mroute å¤šæ’­è·¯ç”±ç¼“å†²åŒºæ¡ç›®</span><br><span class="line">tunnel IPä¸Šçš„é€šé“</span><br><span class="line"></span><br><span class="line"><span class="comment">#COMMANDè®¾ç½®é’ˆå¯¹æŒ‡å®šå¯¹è±¡æ‰§è¡Œçš„æ“ä½œï¼Œå®ƒå’Œå¯¹è±¡çš„ç±»å‹æœ‰å…³ï¼š</span></span><br><span class="line">ä¸€èˆ¬æƒ…å†µä¸‹ipæ”¯æŒå¯¹è±¡çš„å¢åŠ (add)ã€åˆ é™¤(delete)å’Œå±•ç¤º(showæˆ–è€…list)ã€‚æœ‰äº›å¯¹è±¡ä¸æ”¯æŒæ‰€æœ‰è¿™äº›æ“ä½œï¼Œæˆ–è€…æœ‰å…¶å®ƒçš„ä¸€äº›å‘½ä»¤ã€‚å¯¹äºæ‰€æœ‰çš„å¯¹è±¡ï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨<span class="built_in">help</span>å‘½ä»¤è·å¾—å¸®åŠ©ã€‚</span><br><span class="line">è¿™ä¸ªå‘½ä»¤ä¼šåˆ—å‡ºè¿™ä¸ªå¯¹è±¡æ”¯æŒçš„å‘½ä»¤å’Œå‚æ•°çš„è¯­æ³•ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šå¯¹è±¡çš„æ“ä½œå‘½ä»¤ï¼Œipä¼šä½¿ç”¨é»˜è®¤çš„å‘½ä»¤ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œé»˜è®¤å‘½ä»¤æ˜¯listï¼Œå¦‚æœå¯¹è±¡ä¸èƒ½åˆ—å‡ºï¼Œå°±ä¼šæ‰§è¡Œ<span class="built_in">help</span>å‘½ä»¤ã€‚</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="comment">#ARGUMENTSæ˜¯å‘½ä»¤çš„ä¸€äº›å‚æ•°ï¼Œå®ƒä»¬å€šèµ–äºå¯¹è±¡å’Œå‘½ä»¤ï¼š</span></span><br><span class="line">ipæ”¯æŒä¸¤ç§ç±»å‹çš„å‚æ•°ï¼šflagå’Œparameterã€‚flagç”±ä¸€ä¸ªå…³é”®è¯ç»„æˆï¼›parameterç”±ä¸€ä¸ªå…³é”®è¯åŠ ä¸€ä¸ªæ•°å€¼ç»„æˆ</span><br><span class="line">ä¸ºäº†æ–¹ä¾¿ï¼Œæ¯ä¸ªå‘½ä»¤éƒ½æœ‰ä¸€ä¸ªå¯ä»¥å¿½ç•¥çš„é»˜è®¤å‚æ•°</span><br><span class="line">ä¾‹å¦‚ï¼Œå‚æ•°devæ˜¯ip linkå‘½ä»¤çš„é»˜è®¤å‚æ•°ï¼Œå› æ­¤ip link ls eth0 ç­‰äº ip link ls dev eth0</span><br></pre></td></tr></table></figure>
<p>å®é™…æ¡ˆä¾‹ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ç¤ºä¾‹0.ç”¨ipå‘½ä»¤æ˜¾ç¤ºç½‘ç»œè®¾å¤‡çš„è¿è¡ŒçŠ¶æ€</span></span><br><span class="line">ip link | grep PROMISCã€€ã€€<span class="comment">#æ­£å¸¸ç½‘å¡ä¸åº”è¯¥å­˜åœ¨promiscï¼Œå¦‚æœå­˜åœ¨å¯èƒ½æœ‰sniffer</span></span><br><span class="line">ip link list</span><br><span class="line">ip -s link list  <span class="comment">#ç­‰åŒäºifconfig eth0</span></span><br><span class="line"><span class="comment"># 1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000</span></span><br><span class="line"><span class="comment">#     link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span></span><br><span class="line"><span class="comment">#     RX: bytes  packets  errors  dropped overrun mcast</span></span><br><span class="line"><span class="comment">#     4996       38       0       0       0       0</span></span><br><span class="line"><span class="comment">#     TX: bytes  packets  errors  dropped carrier collsns</span></span><br><span class="line"><span class="comment">#     4996       38       0       0       0       0</span></span><br><span class="line">ip -s -s link ls eth0  <span class="comment"># #æŸ¥çœ‹eth0ç½‘å¡ä¿¡æ¯ é”™è¯¯æ¶ˆæ¯</span></span><br><span class="line"><span class="comment"># 2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP mode DEFAULT group default qlen 1000</span></span><br><span class="line"><span class="comment">#     link/ether 00:16:3e:04:c7:0b brd ff:ff:ff:ff:ff:ff</span></span><br><span class="line"><span class="comment">#     RX: bytes  packets  errors  dropped overrun mcast</span></span><br><span class="line"><span class="comment">#     957505630  1666773  0       0       0       0</span></span><br><span class="line"><span class="comment">#     RX errors: length   crc     frame   fifo    missed</span></span><br><span class="line"><span class="comment">#                0        0       0       0       0</span></span><br><span class="line"><span class="comment">#     TX: bytes  packets  errors  dropped carrier collsns</span></span><br><span class="line"><span class="comment">#     196168619  1455570  0       0       0       0</span></span><br><span class="line"><span class="comment">#     TX errors: aborted  fifo   window heartbeat transns</span></span><br><span class="line"><span class="comment">#                0        0       0       0       2</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#ç¤ºä¾‹1.ç½‘å¡çš„åœ°å€ä¿¡æ¯</span></span><br><span class="line">ip addr            <span class="comment">#æ‰€æœ‰ç½‘å¡çš„åœ°å€ä¿¡æ¯</span></span><br><span class="line">ip addr show eth0  <span class="comment">#æŒ‡å®šç½‘å¡çš„é…ç½®ä¿¡æ¯</span></span><br><span class="line"><span class="comment"># 2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000</span></span><br><span class="line"><span class="comment">#     link/ether 00:16:3e:04:c7:0b brd ff:ff:ff:ff:ff:ff</span></span><br><span class="line"><span class="comment">#     inet 172.17.24.236/18 brd 172.17.63.255 scope global dynamic eth0</span></span><br><span class="line"><span class="comment">#        valid_lft 313310085sec preferred_lft 313310085sec</span></span><br><span class="line">ip addr ls eth0      <span class="comment">#ip address show--æ˜¾ç¤ºåè®®åœ°å€. ç¼©å†™ï¼šshowã€listã€lstã€shã€lsã€l</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#ç¤ºä¾‹2.è®¾ç½®IPåœ°å€ä¸åˆ é™¤IPåœ°å€</span></span><br><span class="line">ip addr add 192.168.1.1/24 dev eth0</span><br><span class="line">ip addr add <span class="built_in">local</span> 192.168.4.1/28 brd + label eth0:1 dev eth0 <span class="comment"># ä¸ºæ¯ä¸ªåœ°å€è®¾ç½®ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºæ ‡ç­¾</span></span><br><span class="line">ip addr add 192.168.4.2/24 brd + dev eth1 label eth0:1       <span class="comment"># åœ¨ä»¥å¤ªç½‘æ¥å£eth0ä¸Šå¢åŠ ä¸€ä¸ªåœ°å€192.168.4.2ï¼Œæ©ç é•¿åº¦ä¸º24ä½(255.255.255.0),æ ‡å‡†å¹¿æ’­åœ°å€,æ ‡ç­¾ä¸ºeth0:Alias</span></span><br><span class="line">ip addr del 192.168.1.1 dev eth0</span><br><span class="line">ip addr del 192.168.4.1/24 brd + dev eth0 label eth0:1       <span class="comment"># ip address delete--åˆ é™¤ä¸€ä¸ªåè®®åœ°å€. ç¼©å†™ï¼šdeleteã€delã€d</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹3.æŸ¥çœ‹è·¯ç”±/æ˜¾ç¤ºæ ¸å¿ƒè·¯ç”±è¡¨/è®¾ç½®è·¯ç”±</span></span><br><span class="line">ip route</span><br><span class="line">ip -s route list</span><br><span class="line">    <span class="comment"># default via 172.17.63.253 dev eth0</span></span><br><span class="line">    <span class="comment"># default via 172.17.63.253 dev eth0 proto dhcp metric 100</span></span><br><span class="line">    <span class="comment"># 169.254.0.0/16 dev eth0 scope link metric 1002</span></span><br><span class="line">    <span class="comment"># 172.17.0.0/18 dev eth0 proto kernel scope link src 172.17.24.236</span></span><br><span class="line">    <span class="comment"># 172.17.0.0/18 dev eth0 proto kernel scope link src 172.17.24.236 metric 100</span></span><br><span class="line">    <span class="comment"># 172.18.0.0/16 dev docker0 proto kernel scope link src 172.18.0.1</span></span><br><span class="line">ip route add 10.10.107.221/32 via 10.10.107.1 src 10.10.107.236 <span class="comment"># é…ç½®è·¯ç”±æ—¶æŒ‡å®šæºåœ°å€</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹4.è®¾ç½®ç½‘å¡è®¾å¤‡</span></span><br><span class="line">ip link <span class="built_in">set</span> dev eth0 up     <span class="comment"># up/down å¼€å¯ï¼å…³é—­è®¾å¤‡ = ifconfig eth0 up/down</span></span><br><span class="line">ip link <span class="built_in">set</span> dev eth0 txqueuelen 100 <span class="comment"># æ”¹å˜è®¾å¤‡ä¼ è¾“é˜Ÿåˆ—çš„é•¿åº¦</span></span><br><span class="line">ip link <span class="built_in">set</span> dev eth0 mtu 1500       <span class="comment"># æ”¹å˜ç½‘ç»œè®¾å¤‡MTU(æœ€å¤§ä¼ è¾“å•å…ƒ)çš„å€¼</span></span><br><span class="line">ip link <span class="built_in">set</span> dev eth0 address 00:01:4f:00:15:f1  <span class="comment"># ä¿®æ”¹ç½‘ç»œè®¾å¤‡çš„MACåœ°å€ (é‡è¦)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹5.æ˜¾ç¤ºARPç¼“å­˜æ¡ç›®</span></span><br><span class="line"><span class="variable">$ip</span> neigh</span><br><span class="line">    <span class="comment"># 172.20.0.2 dev br-15352d6a83b9 lladdr 02:42:ac:14:00:02 STALE</span></span><br><span class="line">    <span class="comment"># 172.18.0.2 dev docker0 lladdr 02:42:ac:12:00:02 STALE</span></span><br><span class="line">    <span class="comment"># 172.17.63.253 dev eth0 lladdr ee:ff:ff:ff:ff:ff DELAY</span></span><br><span class="line"><span class="comment"># åœ¨è®¾å¤‡eth0ä¸Šï¼Œä¸ºåœ°å€10.0.0.3æ·»åŠ ä¸€ä¸ªpermanent ARPæ¡ç›®</span></span><br><span class="line"><span class="variable">$ip</span> neigh add 10.0.0.3 lladdr 0:0:0:0:0:1 dev eth0 nud perm </span><br><span class="line"><span class="comment"># æŠŠçŠ¶æ€æ”¹ä¸ºreachable</span></span><br><span class="line"><span class="variable">$ip</span> neigh chg 10.0.0.3 dev eth0 nud reachable</span><br><span class="line"><span class="comment"># åˆ é™¤è®¾å¤‡eth0ä¸Šçš„ä¸€ä¸ªARPæ¡ç›®10.0.0.3</span></span><br><span class="line"><span class="variable">$ip</span> neigh del 10.0.0.3 dev eth0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹6.ç½‘å¡åœ°å€å¤„ç†(ipé«˜çº§å‘½ä»¤)</span></span><br><span class="line">ip -s -s add f to 10/8             <span class="comment">#åˆ é™¤å±äºç§ç½‘10.0.0.0/8çš„æ‰€æœ‰åœ°å€</span></span><br><span class="line">ip -4 addr flush label <span class="string">"eth0"</span>      <span class="comment">#å–æ¶ˆæ‰€æœ‰ä»¥å¤ªç½‘å¡eth0çš„IPåœ°å€</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹7.è¾“å‡ºæ›´ä¸ºè¯¦ç»†çš„é”™è¯¯ä¿¡æ¯ç»Ÿè®¡ã€‚</span></span><br><span class="line">ip -s -s link ls ens160</span><br><span class="line">  <span class="comment"># 2: ens160: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP mode DEFAULT group default qlen 1000</span></span><br><span class="line">  <span class="comment">#     link/ether 00:50:56:8a:6c:22 brd ff:ff:ff:ff:ff:ff</span></span><br><span class="line">  <span class="comment">#     RX: bytes  packets  errors  dropped overrun mcast</span></span><br><span class="line">  <span class="comment">#     144268731942 374101358 0       1341015 0       1213317</span></span><br><span class="line">  <span class="comment">#     RX errors: length   crc     frame   fifo    missed</span></span><br><span class="line">  <span class="comment">#                0        0       0       0       0</span></span><br><span class="line">  <span class="comment">#     TX: bytes  packets  errors  dropped carrier collsns</span></span><br><span class="line">  <span class="comment">#     270451950857 426822179 0       0       0       0</span></span><br><span class="line">  <span class="comment">#     TX errors: aborted  fifo   window heartbeat transns</span></span><br><span class="line">  <span class="comment">#                0        0       0       0       1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹8.æ¸…é™¤åè®®åœ°å€</span></span><br><span class="line"><span class="comment"># åˆ é™¤å±äºç§ç½‘10.0.0.0/8çš„æ‰€æœ‰åœ°å€ï¼š</span></span><br><span class="line">ip -s -s a f to 10/8</span><br><span class="line"></span><br><span class="line"><span class="comment"># å–æ¶ˆæ‰€æœ‰ä»¥å¤ªç½‘å¡çš„IPåœ°å€</span></span><br><span class="line">ip -4 addr flush label <span class="string">"eth0"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹9.æ˜¾ç¤ºç½‘ç»œé‚»å±…çš„ä¿¡æ¯</span></span><br><span class="line">ip neighbour show</span><br><span class="line">  <span class="comment"># 10.20.176.102 dev ens160 lladdr 00:50:56:8a:87:27 STALE</span></span><br><span class="line">  <span class="comment"># 10.20.176.217 dev ens160 lladdr 18:c0:4d:41:c9:cb REACHABLE</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹10.ä¸ºens33ç½‘å¡è®¾ç½®ä¸€ä¸ªä¸´æ—¶IPå¹¶ä¸ºå…¶è®¾ç½®ä¸€ä¸´æ—¶è·¯ç”±</span></span><br><span class="line">sudo ip addr add 192.168.30.100/24 dev ens33 </span><br><span class="line">sudo ip route add default via 192.168.30.2</span><br></pre></td></tr></table></figure><br><figure class="image-box">
                <a rel=ç½‘ç»œåŸºæœ¬é…ç½®æŸ¥è¯¢ href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190606214346.png" target="_blank" title="WeiyiGeek." data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190606214346.png" alt="WeiyiGeek." title="" class=""></a>
                <p>WeiyiGeek.</p>
            </figure></p>
<p><br/></p>
<p>å®è·µæ“ä½œ: åŒç½‘å¡é€šè¿‡é…ç½®é™æ€è·¯ç”±åŒæ—¶æ¥å…¥å†…å¤–ç½‘<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Ubuntu ä¸­çš„ä¸¤å¼ ç½‘å¡</span></span><br><span class="line"><span class="comment"># The primary network interface</span></span><br><span class="line"><span class="comment"># - 1.eth0 DHCP è‡ªåŠ¨è·å¾—å¤–ç½‘IP</span></span><br><span class="line">auto eth0</span><br><span class="line">iface eth0 inet dhcp</span><br><span class="line"></span><br><span class="line"><span class="comment"># - 2.eth1 Static é™æ€IPè¿æ¥å•ä½å†…ç½‘</span></span><br><span class="line">auto eth1</span><br><span class="line">iface eth1 inet static</span><br><span class="line">address 192.168.39.121</span><br><span class="line">netmask 255.255.255.0</span><br><span class="line"></span><br><span class="line"><span class="comment"># - 3.æ·»åŠ é™æ€è·¯ç”±æŒ‡å®šå•ä½å†…ç½‘é€šè¿‡eth1è¿æ¥</span></span><br><span class="line">ip route add 192.168.39.0/24 via 192.168.39.1</span><br><span class="line">ip route add 192.168.0.0/16 via 192.168.39.1</span><br><span class="line">ip route add 172.19.0.0/16 via 192.168.39.1</span><br><span class="line"><span class="comment"># æˆ–è€…å¦‚ä¸‹å‘½ä»¤ ip route add -net 202.14.88.0 netmask 255.255.255.0 gw 221.5.43.1 eth0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># - 4.åˆ é™¤é™æ€è·¯ç”±çš„å‘½ä»¤ï¼š</span></span><br><span class="line">ip route del 192.168.39.0/24 via 192.168.39.1</span><br><span class="line"></span><br><span class="line"><span class="comment"># ubuntuå¯ä»¥åœ¨ /etc/network/interfaces æ–‡ä»¶æœ«å°¾æœ«å°¾åŠ å…¥å¦‚ä¸‹ä»£ç ä»¥æ·»åŠ æ°¸ä¹…é™æ€è·¯ç”±</span></span><br><span class="line">up route add -net 192.168.0.0 netmask 255.255.0.0 gw 192.168.60.1 eth1</span><br><span class="line">up route add -net 172.19.0.0 netmask 255.255.0.0 gw 192.168.60.1 eth1</span><br><span class="line">up route add -net 150.102.0.0 netmask 255.255.0.0 gw 192.168.60.1 eth1</span><br><span class="line">up route add -net 10.130.0.0 netmask 255.255.0.0 gw 192.168.60.1 eth1</span><br><span class="line">up route add -net 10.36.0.0 netmask 255.255.0.0 gw 192.168.60.1 eth1</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h3 id="arp-å‘½ä»¤"><a href="#arp-å‘½ä»¤" class="headerlink" title="arp å‘½ä»¤"></a>arp å‘½ä»¤</h3><p>æè¿°: arpå‘½ä»¤ç”¨äºæ“ä½œä¸»æœºçš„arpç¼“å†²åŒºï¼Œå®ƒå¯ä»¥æ˜¾ç¤ºarpç¼“å†²åŒºä¸­çš„æ‰€æœ‰æ¡ç›®ã€åˆ é™¤æŒ‡å®šçš„æ¡ç›®æˆ–è€…æ·»åŠ é™æ€çš„ipåœ°å€ä¸MACåœ°å€å¯¹åº”å…³ç³»ã€‚<br>å‚æ•° = ipæ¡ç›®</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¯­æ³•</span></span><br><span class="line">arp é€‰é¡¹ å‚æ•°</span><br></pre></td></tr></table></figure>
<figure class="image-box">
                <a rel=ç½‘ç»œåŸºæœ¬é…ç½®æŸ¥è¯¢ href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190606230737.png" target="_blank" title="WeiyiGeek.é€‰é¡¹" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190606230737.png" alt="WeiyiGeek.é€‰é¡¹" title="" class=""></a>
                <p>WeiyiGeek.é€‰é¡¹</p>
            </figure>
<p>å®é™…æ¡ˆä¾‹ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ç¤ºä¾‹1.æ˜¾ç¤ºæ‰€æœ‰å¾—arpæ˜ å°„åˆ—è¡¨</span></span><br><span class="line">arp -a</span><br><span class="line">? (172.20.0.2) at 02:42:ac:14:00:02 [ether] on br-15352d6a83b9</span><br><span class="line">? (172.18.0.2) at 02:42:ac:12:00:02 [ether] on docker0</span><br><span class="line">gateway (172.17.63.253) at ee:ff:ff:ff:ff:ff [ether] on eth0</span><br><span class="line"></span><br><span class="line"><span class="comment">#ç¤ºä¾‹2.ä»¥Linuxæ˜¾ç¤ºé£æ ¼æ˜¾ç¤ºarpç¼“å†²åŒºå¾—ç½‘ç»œæ¥å£;å¹¶æ˜¾ç¤ºç¼“å†²åŒºæ¡ç›®å¾—ç»Ÿè®¡ä¿¡æ¯</span></span><br><span class="line"><span class="variable">$arp</span> -e</span><br><span class="line"><span class="variable">$arp</span> -v</span><br><span class="line">Address                  HWtype  HWaddress           Flags Mask            Iface</span><br><span class="line">172.20.0.2               ether   02:42:ac:14:00:02   C                     br-15352d6a83b9</span><br><span class="line">172.18.0.2               ether   02:42:ac:12:00:02   C                     docker0</span><br><span class="line">gateway                  ether   ee:ff:ff:ff:ff:ff   C                     eth0</span><br><span class="line">Entries: 3      Skipped: 0      Found: 3</span><br><span class="line"></span><br><span class="line"><span class="comment">#ç¤ºä¾‹3.æŒ‡å®šç½‘å¡ç±»å‹</span></span><br><span class="line"><span class="variable">$arp</span> -H ether  <span class="comment">#ç½‘å¡ç±»å‹</span></span><br><span class="line">Address                  HWtype  HWaddress           Flags Mask            Iface</span><br><span class="line">172.20.0.2               ether   02:42:ac:14:00:02   C                     br-15352d6a83b9</span><br><span class="line">172.18.0.2               ether   02:42:ac:12:00:02   C                     docker0</span><br><span class="line">gateway                  ether   ee:ff:ff:ff:ff:ff   C                     eth0</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹4.æ·»åŠ IPå¯¹åº”çš„Mac</span></span><br><span class="line">arp â€“s IP MAC</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹5.åˆ é™¤æŒ‡å®šIPçš„ARPç¼“å­˜</span></span><br><span class="line">arp â€“d IP</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h3 id="route-å‘½ä»¤-Linux"><a href="#route-å‘½ä»¤-Linux" class="headerlink" title="route å‘½ä»¤ - (Linux)"></a>route å‘½ä»¤ - (Linux)</h3><p>æè¿°ï¼šä½¿ç”¨ Route å‘½ä»¤è¡Œå·¥å…·æŸ¥çœ‹å¹¶ç¼–è¾‘è®¡ç®—æœºçš„ IP è·¯ç”±è¡¨, ä½¿ç”¨è¯¥å‘½ä»¤æˆ‘ä»¬å¯ä»¥é’ˆå¯¹ä¸»æœºè·¯ç”±è¿›è¡Œä¿®æ”¹ã€‚</p>
<p><strong>è¯­æ³•å‚æ•°:</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Usage: route [-nNvee] [-FC] [&lt;AF&gt;]           List kernel routing tables</span><br><span class="line">       route [-v] [-FC] &#123;add|del|flush&#125; ...  Modify routing table <span class="keyword">for</span> AF.</span><br><span class="line">       route &#123;-h|--<span class="built_in">help</span>&#125; [&lt;AF&gt;]              Detailed usage syntax <span class="keyword">for</span> specified AF.</span><br><span class="line">       route &#123;-V|--version&#125;                  Display version/author and <span class="built_in">exit</span>.</span><br><span class="line"></span><br><span class="line">  -v, --verbose  <span class="comment"># ç‰ˆæœ¬  </span></span><br><span class="line">  -n, --numeric  <span class="comment"># ä¸è¿›è¡Œåç§°è§£æ</span></span><br><span class="line">  -e, --extend   <span class="comment"># æ˜¾ç¤ºæ›´æ”¹ä¿¡æ¯</span></span><br><span class="line">  -F, --fib      <span class="comment"># æ˜¾ç¤ºè½¬å‘ä¿¡æ¯åº“ (default)</span></span><br><span class="line">  -C, --cache    <span class="comment"># æ˜¾ç¤ºè·¯ç”±ç¼“å­˜è€Œä¸æ˜¯FIB</span></span><br><span class="line"></span><br><span class="line">  &lt;AF&gt;=Use -4, -6, <span class="string">'-A &lt;af&gt;'</span> or <span class="string">'--&lt;af&gt;'</span>; default: inet</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯èƒ½çš„åœ°å€ç³»åˆ—åˆ—è¡¨ (which support routing):</span></span><br><span class="line">  inet (DARPA Internet) inet6 (IPv6) ax25 (AMPR AX.25) netrom (AMPR NET/ROM) ipx (Novell IPX) ddp (Appletalk DDP) x25 (CCITT X.25)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># åŸºç¡€è¯­æ³•</span></span><br><span class="line"><span class="comment"># 1.æ·»åŠ åˆ°ç½‘ç»œçš„è·¯ç”±</span></span><br><span class="line">route add â€“net &#123;IP&#125; netmask &#123;MASK&#125; eth0</span><br><span class="line">route add â€“net &#123;IP&#125; netmask &#123;MASK&#125; gw &#123;IP&#125;</span><br><span class="line">route add â€“net &#123;IP&#125;/24 eth0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.æ·»åŠ é»˜è®¤ç½‘å…³</span></span><br><span class="line">route add default gw &#123;IP&#125;</span><br></pre></td></tr></table></figure></p>
<p><br/></p>
<p><strong>å®é™…æ¡ˆä¾‹ï¼š</strong></p>
<ul>
<li>1.è·¯ç”±æ¡ç›®æŸ¥çœ‹ä¸æŸ¥çœ‹ç³»ç»Ÿå†…æ ¸è·¯ç”±è¡¨ï¼ˆæœ‰æ•ˆçš„ï¼‰<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">$ ip route</span><br><span class="line">  <span class="comment"># default via 10.10.107.1 dev ens32 proto static</span></span><br><span class="line">  <span class="comment"># 10.10.107.0/24 dev ens32 proto kernel scope link src 10.10.107.220</span></span><br><span class="line">  <span class="comment"># 172.21.0.0/16 dev cni0 proto kernel scope link src 172.21.0.1 linkdown</span></span><br><span class="line">  <span class="comment"># 192.168.109.64/26 via 10.10.107.221 dev tunl0 proto bird onlink</span></span><br><span class="line">  <span class="comment"># blackhole 192.168.196.0/26 proto bird</span></span><br><span class="line"></span><br><span class="line">$ route    <span class="comment"># ç³»ç»Ÿè·¯ç”±è¡¨ (è‡ªä¸Šè€Œä¸‹)</span></span><br><span class="line">  <span class="comment"># Kernel IP routing table</span></span><br><span class="line">  <span class="comment"># Destination     Gateway         Genmask         Flags Metric Ref    Use Iface</span></span><br><span class="line">  <span class="comment"># default         _gateway        0.0.0.0         UG    0      0        0 ens32</span></span><br><span class="line">  <span class="comment"># 10.10.107.0     0.0.0.0         255.255.255.0   U     0      0        0 ens32</span></span><br><span class="line">  <span class="comment"># 172.21.0.0      0.0.0.0         255.255.0.0     U     0      0        0 cni0</span></span><br><span class="line">  <span class="comment"># 192.168.109.64  k8s-node-1      255.255.255.192 UG    0      0        0 tunl0</span></span><br><span class="line">  <span class="comment"># 192.168.196.0   0.0.0.0         255.255.255.192 U     0      0        0 *</span></span><br><span class="line"></span><br><span class="line">$ route -n  <span class="comment"># æŸ¥çœ‹è·¯ç”±åˆ—è¡¨ï¼ˆå¯ä»¥çœ‹åˆ°ç½‘å…³ï¼‰, ç­‰åŒäº netstat -rn //æ‹’ç»æ˜¾ç¤ºåˆ«åï¼Œèƒ½æ˜¾ç¤ºæ•°å­—çš„å…¨éƒ¨è½¬åŒ–æˆæ•°å­—ã€‚</span></span><br><span class="line">  <span class="comment"># Kernel IP routing table</span></span><br><span class="line">  <span class="comment"># Destination     Gateway         Genmask         Flags Metric Ref    Use Iface</span></span><br><span class="line">  <span class="comment"># 0.0.0.0         172.17.63.253   0.0.0.0         UG    0      0        0 eth0</span></span><br><span class="line">  <span class="comment"># 169.254.0.0     0.0.0.0         255.255.0.0     U     1002   0        0 eth0</span></span><br></pre></td></tr></table></figure>
<figure class="image-box">
                <a rel=ç½‘ç»œåŸºæœ¬é…ç½®æŸ¥è¯¢ href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190606165414.png" target="_blank" title="WeiyiGeek.è·¯ç”±è¡¨æŸ¥çœ‹" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190606165414.png" alt="WeiyiGeek.è·¯ç”±è¡¨æŸ¥çœ‹" title="" class=""></a>
                <p>WeiyiGeek.è·¯ç”±è¡¨æŸ¥çœ‹</p>
            </figure>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¤ºä¾‹2.è®¾ç½®ç½‘å…³å°†é»˜è®¤ç½‘å…³è®¾ç½®ä¸º192.168.1.1ï¼Œæ‰€æœ‰æµé‡å°†ä»æ­¤å¤„è½¬å‘ã€‚</span></span><br><span class="line">route add default gw 192.168.1.1  <span class="comment"># ä¸´æ—¶è®¾å®š</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹3.æ·»åŠ é™æ€è·¯ç”±ï¼Œä¾‹å¦‚è®¿é—®`172.16.0.0/24`ç½‘æ®µçš„å°†ä»eth0æ¥å£çš„192.168.1.100åœ°å€è½¬å‘å‡ºå»ã€‚</span></span><br><span class="line">route add -net 172.16.0.0/24 gw 192.168.1.100 eth0    </span><br><span class="line">route add -net 172.16.0.0 netmask 255.255.255.0 gw 192.168.1.100</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®ä¾‹4.è®¾ç½®æŒ‡å®šIPåœ°å€æµå‡ºç»è¿‡çš„ç½‘å¡</span></span><br><span class="line">route add â€“host 192.168.2.10 dev eth0</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹5.åˆ é™¤åˆ›å»ºçš„é™æ€è·¯ç”±</span></span><br><span class="line">route del -net 192.168.2.0/24 </span><br><span class="line">route del -net 192.168.2.0 netmask 255.255.255.0</span><br><span class="line">route del â€“host 192.168.2.10 dev eth0</span><br></pre></td></tr></table></figure>
<p><strong>è¡¥å……æ‰©å±•:</strong></p>
<ul>
<li>åœ¨Linuxç³»ç»Ÿä¸‹è®¾ç½®æ°¸ä¹…ç”Ÿæ•ˆçš„è·¯ç”±æ–¹æ³•ã€‚</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.åœ¨/etc/rc.localé‡Œæ·»åŠ </span></span><br><span class="line">route add -net 192.168.1.0/24 dev eth0</span><br><span class="line">route add -net 192.168.2.0/24 gw 192.168.3.254</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.CentOS å¯åœ¨ /etc/sysconfig/network æ–‡ä»¶æœ«å°¾æ·»åŠ å¦‚ä¸‹ GATEWAY=gw-ip æˆ–è€… GATEWAY=gw-devï¼Œæˆ–è€…åœ¨ /etc/sysconfig/static-router</span></span><br></pre></td></tr></table></figure>
<p><br></p>
<h3 id="tracepath-å‘½ä»¤"><a href="#tracepath-å‘½ä»¤" class="headerlink" title="tracepath å‘½ä»¤"></a>tracepath å‘½ä»¤</h3><p>æè¿°ï¼šè·å–æœºå™¨çš„ç½‘å…³åœ°å€ï¼›</p>
<p>å®é™…æ¡ˆä¾‹ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ç¤ºä¾‹1.</span></span><br><span class="line"><span class="variable">$tracepath</span> www.baidu.com</span><br><span class="line"> 1?: [LOCALHOST]                                         pmtu 1500</span><br><span class="line"> 1:  no reply</span><br><span class="line"> 2:  11.220.37.25                                          4.427ms asymm  1</span><br><span class="line"> 3:  11.220.36.138                                         4.191ms asymm  2</span><br><span class="line"> 4:  11.217.38.206                                         1.313ms asymm  3</span><br><span class="line"> 5:  119.38.215.78                                         2.581ms</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h3 id="macchanger-å‘½ä»¤"><a href="#macchanger-å‘½ä»¤" class="headerlink" title="macchanger å‘½ä»¤"></a>macchanger å‘½ä»¤</h3><p>æè¿°ï¼šä¿®æ”¹macåœ°å€çš„å·¥å…·ï¼Œåªèƒ½ä¿®æ”¹è®©åˆ«äººçœ‹è§çš„macåœ°å€ï¼Œå®é™…çœŸæ­£çš„macåœ°å€ä¸èƒ½æ”¹å˜ï¼Œifconfig eth0 çš„ HWaddrå³ä¸ºMACåœ°å€ï¼Œå‰ä¸‰é¡¹æ˜¯ <code>è®¾å¤‡åˆ¶é€ å•†</code> ä¿¡æ¯;</p>
<p><em>MACåœ°å€:</em></p>
<ul>
<li>ç‰©ç†åœ°å€ã€ç¡¬ä»¶åœ°å€</li>
<li>å®šä¹‰ç½‘ç»œè®¾å¤‡çš„ä½ç½®</li>
<li>åœ¨OSIæ¨¡å‹ä¸­,ç¬¬äºŒå±‚æ•°æ®é“¾è·¯å±‚åˆ™è´Ÿè´£ MACåœ°å€</li>
<li>MACåœ°å€æ˜¯ç½‘å¡å†³å®šçš„ï¼Œæ˜¯å›ºå®šçš„ã€‚</li>
</ul>
<p>è¯­æ³•å‚æ•°ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å…¶ä»–å‚æ•°ï¼š</span></span><br><span class="line">  -h,  --<span class="built_in">help</span>                   å¸®åŠ©ä¿¡æ¯</span><br><span class="line">  -V,  --version                è¾“å‡ºç‰ˆæœ¬ä¿¡æ¯å¹¶é€€å‡º</span><br><span class="line">  -s,  --show                   è¾“å‡ºMACåœ°å€å¹¶é€€å‡º</span><br><span class="line">  -e,  --ending                 ä¸æ”¹å˜æœ‰å…³è®¾å¤‡å•†ä¿¡æ¯çš„å­—èŠ‚</span><br><span class="line">  -a,  --another                è®¾ç½®ç›¸åŒä¾›åº”å•†çš„éšæœºMACåœ°å€</span><br><span class="line">  -A                            è®¾ç½®ä»»æ„ç±»å‹çš„ä¾›åº”å•†MAC</span><br><span class="line">  -p,  --permanent              é‡ç½®ä¸ºåŸå§‹ã€æ°¸ä¹…çš„ç¡¬ä»¶MAC</span><br><span class="line">  -r,  --random                 è®¾ç½®å®Œå…¨éšæœºMACåœ°å€</span><br><span class="line">  -l,  --list[=keyword]         è¾“å‡ºå·²çŸ¥çš„ä¾›åº”å•†</span><br><span class="line">  -b,  --bia                    å†’å……åœ°å€</span><br><span class="line">  -m,  --mac=XX:XX:XX:XX:XX:XX</span><br><span class="line">       --mac XX:XX:XX:XX:XX:XX  è®¾ç½® MAC XX:XX:XX:XX:XX:XX</span><br></pre></td></tr></table></figure></p>
<p>å®é™…æ¡ˆä¾‹ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ç¤ºä¾‹1..æŸ¥çœ‹ä¸ä¿®æ”¹ç½‘å¡MAC</span></span><br><span class="line">macchanger -s eth0   <span class="comment">#æŸ¥çœ‹eth0çš„MACåœ°å€</span></span><br><span class="line">macchanger -r eth0   <span class="comment">#éšæœºç”Ÿæˆå¹¶ä¿®æ”¹eth0çš„MACåœ°å€</span></span><br><span class="line">macchanger -m 00:11:11:11:11:11 eth0   <span class="comment">#ä¿®æ”¹macåœ°å€</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#ç¤ºä¾‹2. å¼€æœºè‡ªåŠ¨ä¿®æ”¹ MACåœ°å€</span></span><br><span class="line">crontab -e  <span class="comment">#crontabå‘½ä»¤ ç”¨äºè®¾ç½®å‘¨æœŸæ€§è¢«æ‰§è¡Œçš„æŒ‡ä»¤</span></span><br><span class="line">@reboot macchanger -r eth0  <span class="comment">#æœ€åä¸€è¡Œæ·»åŠ ï¼Œæ¯æ¬¡é‡å¯MACéšæœº;</span></span><br></pre></td></tr></table></figure><br><figure class="image-box">
                <a rel=ç½‘ç»œåŸºæœ¬é…ç½®æŸ¥è¯¢ href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190606163620.png" target="_blank" title="WeiyiGeek.macchanger" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190606163620.png" alt="WeiyiGeek.macchanger" title="" class=""></a>
                <p>WeiyiGeek.macchanger</p>
            </figure></p>
<p><br></p>
<h3 id="mii-tool-å‘½ä»¤"><a href="#mii-tool-å‘½ä»¤" class="headerlink" title="mii-tool å‘½ä»¤"></a>mii-tool å‘½ä»¤</h3><p>æè¿°ï¼šç”¨äºæŸ¥çœ‹ã€ç®¡ç†ä»‹è´¨çš„ç½‘ç»œæ¥å£çš„çŠ¶æ€ï¼Œmii-toolå°±æ˜¯èƒ½æŒ‡å®šç½‘å¡çš„åå•†æ–¹å¼ï¼Œæ¯”å¦‚10/100/1000Mçš„å¡åŠåŒå·¥ã€å…¨åŒå·¥ã€è‡ªåŠ¨åå•†çš„é…ç½®ã€‚<br>ä½†å¤§å¤šæ•°çš„ç½‘ç»œè®¾å¤‡æ˜¯ä¸ç”¨æˆ‘ä»¬æ¥ä¿®æ”¹åå•†ï¼Œå› ä¸ºå¤§å¤šæ•°ç½‘ç»œè®¾ç½®æ¥å…¥çš„æ—¶å€™ï¼Œéƒ½é‡‡ç”¨è‡ªåŠ¨åå•†æ¥è§£å†³ç›¸äº’é€šä¿¡çš„é—®é¢˜ï¼Œä¸è¿‡è‡ªåŠ¨åå•†ä¹Ÿä¸æ˜¯ä¸‡èƒ½çš„ï¼Œæœ‰æ—¶ä¹Ÿä¼šå‡ºç°é”™è¯¯ï¼Œæ¯”å¦‚ä¸¢åŒ…ç‡æ¯”è¾ƒé«˜ï¼Œè¿™æ—¶å°±è¦æˆ‘ä»¬æ¥æŒ‡å®šç½‘å¡çš„åå•†æ–¹å¼ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## è¯­æ³• </span></span><br><span class="line">usage: mii-tool [-VvRrwl] [-A media,... | -F media] &lt;interface&gt; ...</span><br><span class="line"></span><br><span class="line"><span class="comment">## é€‰é¡¹</span></span><br><span class="line">       -V, --version               æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ï¼›</span><br><span class="line">       -v, --verbose               æ˜¾ç¤ºç½‘ç»œæ¥å£çš„ä¿¡æ¯ï¼›</span><br><span class="line">       -R, --reset                 é‡è®¾MIIåˆ°å¼€å¯çŠ¶æ€ï¼›</span><br><span class="line">       -r, --restart               é‡å¯è‡ªåŠ¨åå•†æ¨¡å¼ï¼›</span><br><span class="line">       -w, --watch                 æŸ¥çœ‹ç½‘ç»œæ¥å£è¿æ¥çš„çŠ¶æ€å˜åŒ–ï¼›</span><br><span class="line">       -l, --<span class="built_in">log</span>                   å†™å…¥äº‹ä»¶åˆ°ç³»ç»Ÿæ—¥å¿—ï¼›</span><br><span class="line">       -A, --advertise=media,...   æŒ‡ä»¤ç‰¹å®šçš„ç½‘ç»œæ¥å£ï¼›</span><br><span class="line">       -F, --force=media           æ›´æ”¹ç½‘ç»œæ¥å£åå•†æ–¹å¼ï¼›</span><br><span class="line">media: 000baseTx-HD, 1000baseTx-FD,</span><br><span class="line">       100baseT4, 100baseTx-FD, 100baseTx-HD,</span><br><span class="line">       10baseT-FD, 10baseT-HD,</span><br><span class="line">       (to advertise both HD and FD) 1000baseTx, 100baseTx, 10baseT</span><br></pre></td></tr></table></figure>
<p>å®é™…æ¡ˆä¾‹ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ç¤ºä¾‹1.æŸ¥çœ‹ç½‘ç»œæ¥å£çš„åå•†çŠ¶æ€ï¼š</span></span><br><span class="line">mii-tool -v eth1   <span class="comment">#æ³¨ï¼šä¸‹é¢å›¾ç‰‡ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å¾—åˆ°æ˜¯è‡ªåŠ¨åå•†ï¼Œæ³¨æ„çº¢å­—çš„éƒ¨ä»½ã€‚</span></span><br><span class="line">  <span class="comment"># eth0: negotiated 100baseTx-FD, link ok    # ç™¾å…†</span></span><br><span class="line">  <span class="comment"># product info: vendor 00:aa:00, model 57 rev 0</span></span><br><span class="line">  <span class="comment"># basic mode:   autonegotiation enabled</span></span><br><span class="line">  <span class="comment"># basic status: autonegotiation complete, link ok</span></span><br><span class="line">  <span class="comment"># capabilities: 100baseTx-FD 100baseTx-HD 10baseT-FD 10baseT-HD</span></span><br><span class="line">  <span class="comment"># advertising:  100baseTx-FD 100baseTx-HD 10baseT-FD 10baseT-HD flow-control</span></span><br><span class="line">  <span class="comment"># link partner: 100baseTx-FD 100baseTx-HD 10baseT-FD 10baseT-HD</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ç¤ºä¾‹2.æ›´æ”¹ç½‘ç»œæ¥å£çš„åå•†æ–¹å¼æˆ‘ä»¬è¦ç”¨åˆ°-Fé€‰é¡¹ï¼Œåé¢å¯ä»¥æ¥100baseT4, 100baseTx-FD, 100baseTx-HD, 10baseT-FD, 10baseT-HDç­‰å‚æ•°ï¼›</span></span><br><span class="line">mii-tool -F 100baseTx-FD</span><br><span class="line">mii-tool -v eth1</span><br><span class="line"><span class="comment"># eth0: 100 Mbit, full duplex, link ok</span></span><br><span class="line"><span class="comment">#   product info: vendor 00:00:00, model 0 rev 0</span></span><br><span class="line"><span class="comment">#   basic mode:   100 Mbit, full duplex</span></span><br><span class="line"><span class="comment">#   basic status: link ok</span></span><br><span class="line"><span class="comment">#   capabilitiesåŠŸèƒ½: 100baseTx-FD 100baseTx-HD 10baseT-FD 10baseT-HD</span></span><br><span class="line"><span class="comment">#   advertisingå¹¿å‘Š:  100baseTx-FD 100baseTx-HD 10baseT-FD 10baseT-HD</span></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line"><span class="comment">#ç¤ºä¾‹3.å¦‚æœæˆ‘ä»¬æƒ³æŠŠç½‘ç»œæ¥å£eth0æ”¹ä¸º1000Mb/så…¨åŒå·¥çš„æ¨¡å¼åº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</span></span><br><span class="line">ethtool -s eth1 speed 100 duplex full <span class="comment">#ä¸‹é¢çš„æ˜¯åˆ©ç”¨ethtoolæ¥æ›´æ”¹ï¼Œå…¨åŒå·¥</span></span><br></pre></td></tr></table></figure><br><figure class="image-box">
                <a rel=ç½‘ç»œåŸºæœ¬é…ç½®æŸ¥è¯¢ href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190606170235.png" target="_blank" title="WeiyiGeek.ç½‘ç»œæ¥å£" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190606170235.png" alt="WeiyiGeek.ç½‘ç»œæ¥å£" title="" class=""></a>
                <p>WeiyiGeek.ç½‘ç»œæ¥å£</p>
            </figure></p>
<p>Tips : æµ‹è¯•æ˜¯å¦æ˜¯1000Mç«¯å£ï¼Œæœ€ä¿é™©çš„è¯´ç”¨wgetæµ‹è¯•ä¸€ä¸ªå¯¹æ–¹çš„å¸¦å®½è¶³å¤Ÿå¤§çš„ä¸‹è½½åœ°å€ï¼š<code>wget http://cachefly.cachefly.net/100mb.test</code> å¦‚æœä¸‹è½½é€Ÿåº¦èƒ½è¶…è¿‡15MB/sï¼Œé‚£ä¹ˆä¸æ˜¯100Mç«¯å£äº†ï¼Œé€šå¸¸å°±æ˜¯1000Mç«¯å£</p>
<p><br></p>
<h3 id="ethtool-å‘½ä»¤"><a href="#ethtool-å‘½ä»¤" class="headerlink" title="ethtool å‘½ä»¤"></a>ethtool å‘½ä»¤</h3><p>æè¿°ï¼šç”¨äºè·å–ä»¥å¤ªç½‘å¡çš„é…ç½®ä¿¡æ¯ï¼Œæˆ–è€…ä¿®æ”¹è¿™äº›é…ç½®ï¼Œè¿™ä¸ªå‘½ä»¤æ¯”è¾ƒå¤æ‚ï¼ŒåŠŸèƒ½ç‰¹åˆ«å¤šã€‚<br>Ethtoolå‘½ä»¤æ˜¾ç¤ºçš„ä¿¡æ¯æ¥æºäºç½‘å¡é©±åŠ¨å±‚ï¼Œå³TCP/ipåè®®çš„é“¾è·¯å±‚ï¼Œè¯¥å‘½ä»¤åœ¨Linuxå†…æ ¸ä¸­å®ç°çš„é€»è¾‘å±‚æ¬¡ä¸ºï¼š<br>æœ€é‡è¦çš„ç»“æ„ä½“struct ethtool_opsï¼Œè¯¥ç»“æ„ä½“æˆå‘˜ä¸ºç”¨äºæ˜¾ç¤ºæˆ–ä¿®æ”¹ä»¥å¤ªç½‘å¡é…ç½®çš„ä¸€ç³»åˆ—å‡½æ•°æŒ‡é’ˆï¼Œè§ä¸‹è¡¨ä¸­çš„ç¬¬äºŒåˆ—ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¯­æ³•</span></span><br><span class="line">ethtool [ -a | -c | -g | -i | -d | -k | -r | -S |] ethX</span><br><span class="line">ethtool [-A] ethX [autoneg on|off] [rx on|off] [tx on|off]</span><br><span class="line">ethtool [-C] ethX [adaptive-rx on|off] [adaptive-tx on|off] [rx-usecs N] [rx-frames N] [rx-usecs-irq N] [rx-frames-irq N] [tx-usecs N] [tx-frames N] [tx-usecs-irq N] [tx-frames-irq N] [stats-block-usecs N][pkt-rate-low N][rx-usecs-low N] [rx-frames-low N] [tx-usecs-low N] [tx-frames-lowN] [pkt-rate-high N] [rx-usecs-high N] [rx-frames-high N] [tx-usecs-high N] [tx-frames-high N] [sample-interval N]</span><br><span class="line">ethtool [-G] ethX [rx N] [rx-mini N] [rx-jumbo N] [tx N]</span><br><span class="line">ethtool [-e] ethX [raw on|off] [offset N] [length N]</span><br><span class="line">ethtool [-E] ethX [magic N] [offset N] [value N]</span><br><span class="line">ethtool [-K] ethX [rx on|off] [tx on|off] [sg on|off] [tso on|off]</span><br><span class="line">ethtool [-p] ethX [N]</span><br><span class="line">ethtool [-t] ethX [offline|online]</span><br><span class="line">ethtool [-s] ethX [speed 10|100|1000] [duplex half|full] [autoneg on|off] [port tp|aui|bnc|mii] [phyad N] [xcvr internal|external]</span><br><span class="line">[wol p|u|m|b|a|g|s|d...] [sopass xx:yy:zz:aa:bb:cc] [msglvl N]</span><br><span class="line"></span><br><span class="line"><span class="comment"># é€‰é¡¹</span></span><br><span class="line">-a æŸ¥çœ‹ç½‘å¡ä¸­ æ¥æ”¶æ¨¡å—RXã€å‘é€æ¨¡å—TXå’ŒAutonegotiateæ¨¡å—çš„çŠ¶æ€ï¼šå¯åŠ¨on æˆ– åœç”¨offã€‚</span><br><span class="line">-A ä¿®æ”¹ç½‘å¡ä¸­ æ¥æ”¶æ¨¡å—RXã€å‘é€æ¨¡å—TXå’ŒAutonegotiateæ¨¡å—çš„çŠ¶æ€ï¼šå¯åŠ¨on æˆ– åœç”¨offã€‚</span><br><span class="line">-c display the Coalesce information of the specified ethernet cardã€‚</span><br><span class="line">-C Change the Coalesce setting of the specified ethernet cardã€‚</span><br><span class="line">-g Display the rx/tx ring parameter information of the specified ethernet cardã€‚</span><br><span class="line">-G change the rx/tx ring setting of the specified ethernet cardã€‚</span><br><span class="line">-i æ˜¾ç¤ºç½‘å¡é©±åŠ¨çš„ä¿¡æ¯ï¼Œå¦‚é©±åŠ¨çš„åç§°ã€ç‰ˆæœ¬ç­‰ã€‚</span><br><span class="line">-d æ˜¾ç¤ºregister dumpä¿¡æ¯, éƒ¨åˆ†ç½‘å¡é©±åŠ¨ä¸æ”¯æŒè¯¥é€‰é¡¹ã€‚</span><br><span class="line">-e æ˜¾ç¤ºEEPROM dumpä¿¡æ¯ï¼Œéƒ¨åˆ†ç½‘å¡é©±åŠ¨ä¸æ”¯æŒè¯¥é€‰é¡¹ã€‚</span><br><span class="line">-E ä¿®æ”¹ç½‘å¡EEPROM byteã€‚</span><br><span class="line">-k æ˜¾ç¤ºç½‘å¡Offloadå‚æ•°çš„çŠ¶æ€ï¼šon æˆ– offï¼ŒåŒ…æ‹¬rx-checksummingã€tx-checksummingç­‰ã€‚</span><br><span class="line">-K ä¿®æ”¹ç½‘å¡Offloadå‚æ•°çš„çŠ¶æ€ã€‚</span><br><span class="line">-p ç”¨äºåŒºåˆ«ä¸åŒethXå¯¹åº”ç½‘å¡çš„ç‰©ç†ä½ç½®ï¼Œå¸¸ç”¨çš„æ–¹æ³•æ˜¯ä½¿ç½‘å¡portä¸Šçš„ledä¸æ–­çš„é—ªï¼›NæŒ‡ç¤ºäº†ç½‘å¡é—ªçš„æŒç»­æ—¶é—´ï¼Œä»¥ç§’ä¸ºå•ä½ã€‚</span><br><span class="line">-r å¦‚æœauto-negotiationæ¨¡å—çš„çŠ¶æ€ä¸ºonï¼Œåˆ™restarts auto-negotiationã€‚</span><br><span class="line">-S æ˜¾ç¤ºNIC- and driver-specific çš„ç»Ÿè®¡å‚æ•°ï¼Œå¦‚ç½‘å¡æ¥æ”¶/å‘é€çš„å­—èŠ‚æ•°ã€æ¥æ”¶/å‘é€çš„å¹¿æ’­åŒ…ä¸ªæ•°ç­‰ã€‚</span><br><span class="line">-t è®©ç½‘å¡æ‰§è¡Œè‡ªæˆ‘æ£€æµ‹ï¼Œæœ‰ä¸¤ç§æ¨¡å¼ï¼šoffline or onlineã€‚</span><br><span class="line">-s ä¿®æ”¹ç½‘å¡çš„éƒ¨åˆ†é…ç½®ï¼ŒåŒ…æ‹¬ç½‘å¡é€Ÿåº¦ã€å•å·¥/å…¨åŒå·¥æ¨¡å¼ã€macåœ°å€ç­‰ã€‚</span><br></pre></td></tr></table></figure>
<p>ç½‘å¡é©±åŠ¨è´Ÿè´£å®ç°ï¼ˆéƒ¨åˆ†ï¼‰è¿™äº›å‡½æ•°ï¼Œå¹¶å°†å…¶å°è£…å…¥ethtool_opsç»“æ„ä½“ï¼Œä¸ºç½‘ç»œæ ¸å¿ƒå±‚æä¾›ç»Ÿä¸€çš„è°ƒç”¨æ¥å£,å› æ­¤ä¸åŒçš„ç½‘å¡é©±åŠ¨ä¼šç»™åº”ç”¨å±‚è¿”å›ä¸åŒçš„ä¿¡æ¯ã€‚<br>Ethtoolå‘½ä»¤é€‰é¡¹ã€struct ethtool_opsæˆå‘˜å‡½æ•°ã€Ethtoolå‘½ä»¤æ˜¾ç¤ºå‚æ•°çš„æ¥æºï¼Œä¸‰è€…é—´çš„å¯¹åº”å…³ç³»å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</p>
<table>
<thead>
<tr>
<th>å‘½ä»¤é€‰é¡¹</th>
<th>struct ethtool_opsæˆå‘˜å‡½æ•°</th>
<th>Ethtoolå‘½ä»¤æ˜¾ç¤ºå‚æ•°çš„æ¥æºï¼ˆä»¥ç½‘å¡é©±åŠ¨BNX2ä¸ºä¾‹ï¼‰</th>
</tr>
</thead>
<tbody>
<tr>
<td> æ—  -s</td>
<td>get_settingsget_wol get_msglevel get_link set_settings set_wol set_msglevel</td>
<td>ä»ç½‘å¡å¯„å­˜å™¨ä¸­è·å¾—ç½‘å¡é€Ÿåº¦ç­‰ä¿¡æ¯ï¼Œå¯é…ç½®ã€‚</td>
</tr>
<tr>
<td> -a -A</td>
<td>get_pauseparam set_pauseparam</td>
<td>ä»ç½‘å¡å¯„å­˜å™¨ä¸­è·å¾—Autonegotiate/RX/TXæ¨¡å—çš„çŠ¶æ€ï¼šon oroffï¼Œå¯é…ç½®ã€‚</td>
</tr>
<tr>
<td> -c -C</td>
<td>get_coalesceset_coalesce</td>
<td>ä»ç½‘å¡å¯„å­˜å™¨ä¸­è·å¾—coalescingå‚æ•°ï¼šTX/RXä¸€ä¸ªæ•°æ®åŒ…åï¼Œæ¨è¿Ÿå‘ç”ŸTX/RXä¸­æ–­çš„æ—¶é—´(us)/æ•°æ®åŒ…ä¸ªæ•°ã€‚â€”å‡å°è¯¥å€¼å¯ä»¥æé«˜ç½‘å¡çš„å“åº”æ—¶é—´ã€‚å½“rx-usecs&amp;rx-framesåŒæ—¶è¢«è®¾ä¸º0æ—¶ï¼ŒRXä¸­æ–­åœæ­¢ã€‚ å½“tx-usecs&amp;tx-framesåŒæ—¶è¢«è®¾ä¸º0æ—¶ï¼ŒTXä¸­æ–­åœæ­¢ã€‚</td>
</tr>
<tr>
<td> -g -G</td>
<td>get_ringparam set_ringparam</td>
<td>é™¤å½“å‰TX/RX ringçš„å€¼ï¼ˆä»ç½‘å¡å¯„å­˜å™¨ä¸­è¯»å–å¾—åˆ°ï¼Œå¯é…ç½®ï¼‰å¤–ï¼Œå…¶å®ƒä¸ºç½‘å¡bnx2è‡ªå·±å›ºå®šçš„ä¿¡æ¯ã€‚</td>
</tr>
<tr>
<td> -k -K</td>
<td>get_rx_csumget_tx_csum get_sg get_tso set_rx_csum set_tx_csum set_sg set_tso</td>
<td>æ˜¾ç¤ºä¿¡æ¯ä»ä¿å­˜è¯¥çŠ¶æ€çš„å˜é‡ä¸­è¯»å–å¾—åˆ°ï¼Œæ²¡æœ‰å¯¹åº”çš„å¯„å­˜å™¨ã€‚å› æ­¤TX/RXæ ¡éªŒç­‰æ¨¡å—ä¸€ç›´å¤„äºonçŠ¶æ€ï¼Œå®é™…ä¸Šæ˜¯æ— æ³•ä¿®æ”¹çš„ã€‚</td>
</tr>
<tr>
<td> -i</td>
<td>get_drvinfo[self_test_count, get_stats_coun,t get_regs_len, get_eeprom_len]</td>
<td>ç½‘å¡bnx2è‡ªå·±å›ºå®šçš„ä¿¡æ¯ï¼Œå¦‚ï¼šdriver: bnx2 version: 1.4.30 firmware-version: 1.8.0.5 bus-info: 0000:09:00.0</td>
</tr>
<tr>
<td> -d</td>
<td>get_drvinfoget_regs</td>
<td>ä¸æ”¯æŒï¼Œå³bnx2ä¸­æ²¡æœ‰å®ç°å‡½æ•°get_regsã€‚</td>
</tr>
<tr>
<td> -e -E</td>
<td>get_eepromset_eeprom</td>
<td>ä¸æ”¯æŒï¼Œå³bnx2ä¸­æ²¡æœ‰å®ç°å‡½æ•°get_eepromã€‚</td>
</tr>
<tr>
<td> -r</td>
<td>nway_reset</td>
<td>é…ç½®ç½‘å¡MII_BMCRå¯„å­˜å™¨ï¼Œé‡å¯Auto negotiationæ¨¡å—ã€‚</td>
</tr>
</tbody>
</table>
<p>ç”±ä¸Šå¯è§ï¼Œethtoolå‘½ä»¤ç”¨äºæ˜¾ç¤º/é…ç½®ç½‘å¡ç¡¬ä»¶ï¼ˆå¯„å­˜å™¨ï¼‰ã€‚  </p>
<p>å®é™…æ¡ˆä¾‹ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ç¤ºä¾‹1.æŸ¥çœ‹æœºå™¨ä¸Šç½‘å¡çš„é€Ÿåº¦ï¼šç™¾å…†è¿˜æ˜¯åƒå…†ï¼Œè¯·è¾“å…¥ï¼š</span></span><br><span class="line">ethtool eth0  <span class="comment">#æ“ä½œå®Œæ¯•åï¼Œè¾“å‡ºä¿¡æ¯ä¸­Speed:è¿™ä¸€é¡¹å°±æŒ‡ç¤ºäº†ç½‘å¡çš„é€Ÿåº¦ æ“ä½œå®Œæ¯•åï¼Œè¾“å‡ºä¿¡æ¯ä¸­Speed:è¿™ä¸€é¡¹å°±æŒ‡ç¤ºäº†ç½‘å¡çš„é€Ÿåº¦</span></span><br><span class="line">ethtool eno3</span><br><span class="line">  Settings <span class="keyword">for</span> eno3:</span><br><span class="line">  Supported ports: [ FIBRE ]</span><br><span class="line">  Supported link modes:   10000baseT/Full</span><br><span class="line">                          1000baseX/Full</span><br><span class="line">                          10000baseSR/Full</span><br><span class="line">                          10000baseLR/Full</span><br><span class="line">  Supported pause frame use: Symmetric</span><br><span class="line">  Supports auto-negotiation: Yes</span><br><span class="line">  Supported FEC modes: Not reported</span><br><span class="line">  Advertised link modes:  10000baseT/Full</span><br><span class="line">                          1000baseX/Full</span><br><span class="line">                          10000baseSR/Full</span><br><span class="line">                          10000baseLR/Full</span><br><span class="line">  Advertised pause frame use: No</span><br><span class="line">  Advertised auto-negotiation: Yes</span><br><span class="line">  Advertised FEC modes: Not reported</span><br><span class="line">  Speed: 10000Mb/s</span><br><span class="line">  Duplex: Full</span><br><span class="line">  Port: FIBRE</span><br><span class="line">  PHYAD: 0</span><br><span class="line">  Transceiver: internal</span><br><span class="line">  Auto-negotiation: off</span><br><span class="line">  Supports Wake-on: g</span><br><span class="line">  Wake-on: g</span><br><span class="line">  Current message level: 0x00000007 (7)</span><br><span class="line">    drv probe link</span><br><span class="line">  Link detected: yes   <span class="comment"># ç½‘çº¿å·²æ’å¥½å¹¶ä¸”ç½‘å¡å·²æ¿€æ´»</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#ç¤ºä¾‹2.æŸ¥çœ‹ç½‘å¡eth0é‡‡ç”¨äº†ä½•ç§é©±åŠ¨</span></span><br><span class="line">ethtool -i eth0   <span class="comment"># æŸ¥çœ‹ç½‘å¡é©±åŠ¨</span></span><br><span class="line"><span class="comment"># driver: virtio_net    # ä¹Ÿå¯ä»¥é‡‡ç”¨ `lspci -vvv`</span></span><br><span class="line"><span class="comment"># version: 1.0.0</span></span><br><span class="line"><span class="comment"># firmware-version:</span></span><br><span class="line"><span class="comment"># expansion-rom-version:</span></span><br><span class="line"><span class="comment"># bus-info: 0000:00:03.0</span></span><br><span class="line"><span class="comment"># supports-statistics: no</span></span><br><span class="line"><span class="comment"># supports-test: no</span></span><br><span class="line"><span class="comment"># supports-eeprom-access: no</span></span><br><span class="line"><span class="comment"># supports-register-dump: no</span></span><br><span class="line"><span class="comment"># supports-priv-flags: no</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#ç¤ºä¾‹3.ç½‘å¡å‚æ•°ç»Ÿè®¡</span></span><br><span class="line">ethtool -S eth1 <span class="comment">#æŸ¥çœ‹ç½‘å¡ï¼Œåœ¨æ¥æ”¶/å‘é€æ•°æ®æ—¶ï¼Œæœ‰æ²¡æœ‰å‡ºé”™è¯·è¾“å…¥</span></span><br></pre></td></tr></table></figure><br><figure class="image-box">
                <a rel=ç½‘ç»œåŸºæœ¬é…ç½®æŸ¥è¯¢ href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190606171125.png" target="_blank" title="WeiyiGeek.ethtool" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190606171125.png" alt="WeiyiGeek.ethtool" title="" class=""></a>
                <p>WeiyiGeek.ethtool</p>
            </figure></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ç¤ºä¾‹4.æŠŠç½‘ç»œæ¥å£eth0æ”¹ä¸º1000Mb/så…¨åŒå·¥çš„æ¨¡å¼</span></span><br><span class="line">ethtool -s eth1 speed 1000 duplex full <span class="comment">#å…¨åŒå·¥ duplex</span></span><br><span class="line">ethtool -s eth0 speed 100     <span class="comment">#å°†åƒå…†ç½‘å¡çš„é€Ÿåº¦é™ä¸ºç™¾å…†ï¼Œè‡ªé€‚åº”</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#ç¤ºä¾‹5.åœæ­¢ç½‘å¡çš„å‘é€æ¨¡å—TXï¼Œè¯·è¾“å…¥</span></span><br><span class="line">ethtool -A tx off eth0</span><br><span class="line">ethtool -a eth0   <span class="comment">#æŸ¥çœ‹txæ¨¡å—æ˜¯å¦å·²è¢«åœæ­¢</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#ç¤ºä¾‹6.å…³é—­ç½‘å¡å¯¹æ”¶åˆ°çš„æ•°æ®åŒ…çš„æ ¡éªŒåŠŸèƒ½ï¼Œè¯·è¾“å…¥ï¼š</span></span><br><span class="line">ethtool -K eth0 rx off</span><br><span class="line">ethtool -k eth0  <span class="comment">#æŸ¥çœ‹æ ¡éªŒåŠŸèƒ½æ˜¯å¦å·²è¢«åœæ­¢</span></span><br><span class="line">Features <span class="keyword">for</span> eth0:</span><br><span class="line">rx-checksumming: on [fixed]</span><br><span class="line">tx-checksumming: on</span><br><span class="line">        tx-checksum-ipv4: off [fixed]</span><br><span class="line">        tx-checksum-ip-generic: on</span><br></pre></td></tr></table></figure>
<p>Tips : å¦‚æœethtool å’Œmii-toolæŸ¥å‡ºæ¥çš„é€Ÿç‡ä¸åŒå‘¢ï¼Ÿ</p>
<blockquote>
<p>æ›¾ç»æœ‰ä¸ªåƒå…†ç½‘å¡äºŒè€…æŸ¥å‡ºçš„é€Ÿç‡ä¸åŒå¤šæ–¹æŸ¥é˜…ï¼Œç»ˆäºåœ¨man mii-toolå‘ç°äº†ç»“æœ <code>This program is obsolete. Valid media are only 100baseT4, 100baseTx-FD,100baseTx-HD, 10baseT-FD and 10baseT-HD ethernet cards. For replacement check ethtool.</code><br>å¦‚æœä½ ä¹Ÿé‡åˆ°è¿™ä¸ªé—®é¢˜ä¸è¦çŠ¹è±«æœæ–­ç›¸ä¿¡ethtoolçš„ç»“æœå§ã€‚</p>
</blockquote>
<p><br></p>
<h3 id="dhclient-å‘½ä»¤"><a href="#dhclient-å‘½ä»¤" class="headerlink" title="dhclient å‘½ä»¤"></a>dhclient å‘½ä»¤</h3><p>æè¿°ï¼šdhclientæ˜¯ä¸€ä¸ªDHCPåè®®å®¢æˆ·ç«¯ï¼Œå®ƒä½¿ç”¨DHCPåè®®æˆ–è€…BOOTPåè®®æˆ–åœ¨è¿™ä¸¤ä¸ªåè®®éƒ½ä¸å¯ç”¨æ—¶ä½¿ç”¨é™æ€åœ°å€æ¥é…ç½®ä¸€ä¸ªæˆ–å¤šä¸ªç½‘ç»œæ¥å£ã€‚<br>ä¸€èˆ¬å­˜åœ¨ä¸€ä¸ªé»˜è®¤æ–‡ä»¶ dhclient.confï¼Œä½†å¯ä»¥é’ˆå¯¹ä¸åŒç½‘å¡åˆ›å»ºå¯¹åº”ç½‘å¡åç§°çš„é…ç½®æ–‡ä»¶ï¼Œdhclient-eth0.confï¼Œdhclient-eth1.conf<br>DHCPåè®®å…è®¸ä¸»æœºè”ç³»ä¸­å¤®æœåŠ¡å™¨ï¼Œè¯¥ä¸­å¤®æœåŠ¡å™¨ç»´æŠ¤å¯ä»¥åœ¨ä¸€ä¸ªæˆ–å¤šä¸ªå­ç½‘ä¸Šåˆ†é…çš„IPåœ°å€åˆ—è¡¨ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åŸºç¡€è¯­æ³•ï¼š</span></span><br><span class="line">dhclient [-4|-6] [-SNTPI1dvrxi] [-nw] [-p &lt;port&gt;] [-D LL|LLT]</span><br></pre></td></tr></table></figure>
<figure class="image-box">
                <a rel=ç½‘ç»œåŸºæœ¬é…ç½®æŸ¥è¯¢ href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190606210920.png" target="_blank" title="WeiyiGeek.å‚æ•°" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190606210920.png" alt="WeiyiGeek.å‚æ•°" title="" class=""></a>
                <p>WeiyiGeek.å‚æ•°</p>
            </figure>
<p>ä¾‹å¦‚ï¼Œå¦‚æœåœ¨å¯åŠ¨DHCPå®¢æˆ·ç«¯æ—¶å°šæœªå®‰è£…DBDIRæˆ–RUNDIRï¼Œåˆ™å®ƒä»¬ç‰¹åˆ«æœ‰ç”¨ã€‚</p>
<figure class="image-box">
                <a rel=ç½‘ç»œåŸºæœ¬é…ç½®æŸ¥è¯¢ href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190606210844.png" target="_blank" title="WeiyiGeek.é«˜çº§ç”¨æ³•" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190606210844.png" alt="WeiyiGeek.é«˜çº§ç”¨æ³•" title="" class=""></a>
                <p>WeiyiGeek.é«˜çº§ç”¨æ³•</p>
            </figure>
<p>å®é™…æ¡ˆä¾‹ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ç¤ºä¾‹1.é‡Šæ”¾è·å–åˆ°å¾—IPåœ°å€ï¼š</span></span><br><span class="line">sudo dhclient eth1 -r  <span class="comment">#é‡Šæ”¾ipå‘½ä»¤</span></span><br><span class="line">    Listening on LPF/eth1/00:0c:29:9b:52:dd</span><br><span class="line">    Sending on LPF/eth1/00:0c:29:9b:52:dd</span><br><span class="line">    Sending on Socket/fallback</span><br><span class="line">    DHCPRELEASE on eth1 to 192.168.233.254 port 67 (xid=0x5395c742)</span><br><span class="line"></span><br><span class="line"><span class="comment">#ç¤ºä¾‹2.é‡æ–°è·å–IP    </span></span><br><span class="line">sudo dhclient eth1 <span class="comment">#è·å–ipå‘½ä»¤</span></span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h3 id="nscd-å‘½ä»¤"><a href="#nscd-å‘½ä»¤" class="headerlink" title="nscd å‘½ä»¤"></a>nscd å‘½ä»¤</h3><p>æè¿°:nscdï¼ˆName Service Cache Daemonï¼‰æ˜¯ä¸€ç§èƒ½å¤Ÿç¼“å­˜ passwdã€groupã€hosts çš„æœ¬åœ°ç¼“å­˜æœåŠ¡ï¼Œåˆ†åˆ«å¯¹åº”ä¸‰ä¸ªæº <code>/etc/passwdã€/etc/hostsã€/etc/resolv.conf</code>ã€‚</p>
<p>å…¶æœ€ä¸ºæ˜æ˜¾çš„ä½œç”¨å°±æ˜¯åŠ å¿« DNS è§£æé€Ÿåº¦ï¼Œåœ¨æ¥å£è°ƒç”¨é¢‘ç¹çš„å†…ç½‘ç¯å¢ƒå»ºè®®å¼€å¯,å®é™…ä¸Šæˆ‘ä»¬åˆ©ç”¨ nscd çš„ hosts ç¼“å­˜æœåŠ¡æ¥å®ç° æ¸…é™¤ CentOS 8 Linux ä¸‹çš„ DNS ç¼“å­˜ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#CentOS8ä¸‹å®‰è£…</span></span><br><span class="line">dnf -y install nscd</span><br><span class="line">systemctl start nscd <span class="comment">#nscd æœåŠ¡é»˜è®¤æ˜¯å…³é—­çš„</span></span><br></pre></td></tr></table></figure>
<p>è¡¥å……:å¼€å¯ nscd çš„ hosts ç¼“å­˜æœåŠ¡åï¼Œæ¯æ¬¡å†…éƒ¨æ¥å£è¯·æ±‚ä¸ä¼šéƒ½å‘èµ· dns è§£æè¯·æ±‚ï¼Œè€Œæ˜¯ç›´æ¥å‘½ä¸­ nscd ç¼“å­˜æ•£åˆ—è¡¨ï¼Œä»è€Œè·å–å¯¹åº”æœåŠ¡å™¨ ip åœ°å€ï¼Œè¿™æ ·å¯ä»¥åœ¨å¤§é‡å†…éƒ¨æ¥å£è¯·æ±‚æ—¶å‡å°‘æ¥å£çš„å“åº”æ—¶é—´ã€‚</p>
<p><br/><br>åŸºç¡€è¯­æ³•:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ç”¨æ³•ï¼š nscd [é€‰é¡¹...]</span><br><span class="line">ç½‘åŸŸåç§°ç¼“å­˜ç²¾çµ</span><br><span class="line">  -d, --debug                ä¸åœ¨ç›®å‰çš„ tty äº§ç”Ÿå­è¿›ç¨‹ (fork) ä»¥åŠæ˜¾ç¤ºæ¶ˆæ¯</span><br><span class="line">  -f, --config-file=åç§°   ä» NAME ä¸­è¯»å–é…ç½®æ•°æ®</span><br><span class="line">  -F, --foreground           ä¸è¡ç”Ÿï¼Œä½†æ˜¯å¦åˆ™ behave å¦‚åŒå®ˆæŠ¤ç¨‹åº</span><br><span class="line">  -g, --statistics           å°å‡ºç›®å‰ç»„æ€ç»Ÿè®¡</span><br><span class="line">  -i, --invalidate=è¡¨æ ¼    ä½¿é€‰å®šçš„ç¼“å­˜æ— æ•ˆ</span><br><span class="line">  -K, --shutdown             å…³é—­æœåŠ¡å™¨</span><br><span class="line">  -t, --nthreads=å·ç       å¯åŠ¨ NUMBER ä¸ªçº¿ç¨‹</span><br><span class="line">  -?, --<span class="built_in">help</span>                 ç»™å‡ºæ­¤å¸®åŠ©åˆ—è¡¨</span><br><span class="line">      --usage                ç»™å‡ºç®€è¦çš„ç”¨æ³•ä¿¡æ¯</span><br><span class="line">  -V, --version              æ‰“å°ç¨‹åºç‰ˆæœ¬å·</span><br></pre></td></tr></table></figure></p>
<p>åŸºç¡€ç¤ºä¾‹:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1.æ¸…é™¤DNSç¼“å­˜</span></span><br><span class="line">nscd -i hosts</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h3 id="systemd-resolve-å‘½ä»¤"><a href="#systemd-resolve-å‘½ä»¤" class="headerlink" title="systemd-resolve å‘½ä»¤"></a>systemd-resolve å‘½ä»¤</h3><p>æè¿°: systemd-resolved ä¸ºæœ¬åœ°åº”ç”¨ç¨‹åºæä¾›äº†ç½‘ç»œåå­—è§£ææœåŠ¡ã€‚ å®ƒä¸ä½†æä¾›äº†ä¼ ç»Ÿçš„ DNS/DNSSEC è§£æä¸æœ¬åœ°ç¼“å­˜åŠŸèƒ½ï¼Œè¿˜æä¾›äº† LLMNR ä¸ MulticastDNS çš„è§£æ(resolver)ä¸åº”ç­”(responder)çš„åŠŸèƒ½ã€‚</p>
<p>DNSåç§°è§£æ (<code>Ubuntu Service for DNS Name Resolution</code>) ç®¡ç†çš„æœåŠ¡æ˜¯<code>systemd-resolved.service</code>, å…¶ç”¨äºè¿è¡ŒDNSæŸ¥è¯¢å’Œç»´æŠ¤DNSç¼“å­˜ã€‚</p>
<p><strong>æœ¬åœ°åº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡ä¸‰ç§æ–¹å¼æäº¤ç½‘ç»œåå­—è§£æè¯·æ±‚ï¼š</strong></p>
<ul>
<li><p>ç¬¬ä¸€ç§ï¼Œé€šè¿‡D-Busæ€»çº¿ä¸Šçš„æœ¬åœ°å…¨åŠŸèƒ½API systemd-resolved (è¯¦è§ API Documentation)ã€‚ è¿™æ˜¯é¦–é€‰æ–¹æ³•ï¼Œå› ä¸ºå®ƒæ˜¯å¼‚æ­¥çš„å¹¶ä¸”åŠŸèƒ½æœ€å…¨ã€‚ æ­¤ç§æ–¹å¼å¯ä»¥æ­£ç¡®è¿”å› DNSSEC çš„æœ‰æ•ˆçŠ¶æ€ï¼Œä»¥åŠæ”¯æŒ link-local ç½‘ç»œæ‰€å¿…éœ€çš„åœ°å€çš„ç½‘å£èŒƒå›´(interface scope)ã€‚</p>
</li>
<li><p>ç¬¬äºŒç§ï¼Œé€šè¿‡ glibc çš„ getaddrinfo(3), gethostbyname(3) ç­‰ç›¸å…³API(RFC3493)ã€‚ è¿™äº›APIå—åˆ°äº†å¹¿æ³›çš„æ”¯æŒ(åŒ…æ‹¬éLinuxå¹³å°)ã€‚æ­¤ç§æ–¹æ³•ä¸èƒ½æ£€æŸ¥ DNSSEC çš„æœ‰æ•ˆçŠ¶æ€ï¼Œå¹¶ä¸”æ˜¯åŒæ­¥çš„ã€‚ æ­¤ç§æ–¹æ³•ç”± glibc Name Service Switch (nss(5)) æ”¯æŒã€‚ å¿…é¡»ä½¿ç”¨ glibc NSS æ¨¡å— nss-resolve(8) æ‰èƒ½è®© glibc NSS ä½¿ç”¨ systemd-resolved æä¾›çš„åå­—è§£æåŠŸèƒ½ã€‚</p>
</li>
<li><p>ç¬¬ä¸‰ç§ï¼Œé€šè¿‡ systemd-resolved åœ¨æœ¬åœ°å›ç¯ç½‘å£ 127.0.0.53 ä¸Šæä¾›çš„æœ¬åœ°DNSæœåŠ¡å™¨ã€‚ åº”ç”¨ç¨‹åºå¯ä»¥ç›´æ¥å‘ 127.0.0.53 å‘é€DNSè¯·æ±‚ï¼Œä»è€Œç›´æ¥ä½¿ç”¨ systemd-resolved æä¾›çš„è§£ææœåŠ¡ã€‚ é™¤éç¡®å®æ— æ³•ä½¿ç”¨å‰é¢çš„ glibc NSS æˆ– D-Bus API ä¸¤ç§æ–¹æ³•ï¼Œ å¦åˆ™åº”è¯¥å°½é‡é¿å…ä½¿ç”¨æ­¤ç§æ–¹å¼ï¼Œ å› ä¸ºæ— æ³•å°†å„ç§ç½‘ç»œè§£æåŠŸèƒ½(ä¾‹å¦‚ link-local åœ°å€æˆ– LLMNR Unicode åŸŸå)å…¨éƒ¨æ˜ å°„åˆ° å•æ’­DNSåè®®ä¸­ã€‚</p>
</li>
</ul>
<p><br></p>
<p><strong>åˆæˆè®°å½•(Synthetic Record)</strong><br>systemd-resolved ä¼šä¸ºä¸‹åˆ—ç‰¹æ®ŠåŸŸååˆæˆDNSèµ„æºè®°å½•(RR)ï¼š</p>
<ul>
<li>æœ¬æœºçš„ä¸»æœºåå°†æŒ‰å¦‚ä¸‹è§„åˆ™è§£æï¼š å¦‚æœé…ç½®äº†æœ¬æœºIPåœ°å€ï¼Œ é‚£ä¹ˆå°†è¢«è§£æä¸ºæ‰€æœ‰æœ¬æœºIPåœ°å€(æŒ‰èŒƒå›´æ’åº)ã€‚ å¦‚æœä¸å­˜åœ¨æœ¬æœºIPåœ°å€ï¼Œ é‚£ä¹ˆå°†è¢«è§£æä¸ºæœ¬åœ°å›ç¯ä¸Šçš„ 127.0.0.2 ä¸ ::1</li>
<li>â€œlocalhostâ€ ä¸ â€œlocalhost.localdomainâ€ ä»¥åŠæ‰€æœ‰ä»¥ â€œ.localhostâ€ æˆ– â€œ.localhost.localdomainâ€ ç»“å°¾çš„ä¸»æœºåï¼Œ éƒ½å°†è¢«è§£æä¸º 127.0.0.1 ä¸ ::1</li>
<li>â€œ_gatewayâ€ å°†è¢«è§£æä¸ºæ‰€æœ‰å½“å‰è·¯ç”±è¡¨ä¸­çš„é»˜è®¤ç½‘å…³IPåœ°å€(æŒ‰æ•°å­—å¤§å°æ’åº)ã€‚ é€šè¿‡ç»™ç½‘å…³åˆ†é…ä¸€ä¸ªå›ºå®šçš„åç§°ï¼Œ æ–¹ä¾¿äº†åº”ç”¨ç¨‹åºå¯¹ç½‘å…³åœ°å€çš„å¼•ç”¨ï¼Œ åº”ç”¨ç¨‹åºä¸å†éœ€è¦å…³å¿ƒç½‘ç»œçš„å…·ä½“é…ç½®ã€‚</li>
<li>åœ¨ /etc/hosts ä¸­å®šä¹‰çš„æ˜ å°„å…³ç³»(æ­£å‘è§£æä¸åå‘è§£æ)ã€‚ ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ è¿™äº›æ˜ å°„å…³ç³»å¯¹éIPåœ°å€ç±»è§£æ(ä¾‹å¦‚MXè®°å½•)æ— æ•ˆã€‚</li>
</ul>
<p>Tips : æœåŠ¡å’Œå‘½ä»¤åç§°ç•¥æœ‰ä¸åŒå‘½ä»¤åç§°æ²¡æœ‰æœ€åä¸€ä¸ªå­—ç¬¦â€œdâ€ã€‚<br>Tips : ç›¸å…³é…ç½®é…ç½®æ–‡ä»¶systemd-resolved å®æ—¶æ›´æ–° <code>/run/systemd/resolve/stub-resolv.conf</code> æ–‡ä»¶ä»¥ç¡®ä¿å…¼å®¹ä¼ ç»Ÿçš„ Linux ç¨‹åº, é™æ€ <code>/usr/lib/systemd/resolv.conf</code> æ–‡ä»¶ï¼Œæ­¤æ–‡ä»¶ä»…åŒ…å«ä¸€ä¸ªå”¯ä¸€çš„ <code>127.0.0.53</code> DNSæœåŠ¡å™¨,å°†è½¯è¿æ¥ <code>/etc/resolv.conf</code> æŒ‡å‘è¯¥é™æ€æ–‡ä»¶ä»¥åŠDNSæœåŠ¡å™¨æ¥è‡ªäºå…¨å±€é…ç½®æ–‡ä»¶(/etc/systemd/resolved.conf)ï¼Œã€‚<br>Tips : æ“ä½œç³»ç»Ÿç½‘ç»œé…ç½®æ–‡ä»¶ä¸­çš„DNSå½±å“è¯¥ systemd-resolved æœåŠ¡é…ç½®æ–‡ä»¶ã€‚</p>
<p><strong>åŸºç¡€è¯­æ³•:</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1) æ£€æŸ¥ systemd-resolved.service çŠ¶æ€</span></span><br><span class="line">sudo systemctl status systemd-resolved</span><br><span class="line">        <span class="comment"># â— systemd-resolved.service - Network Name Resolution</span></span><br><span class="line">        <span class="comment">#      Loaded: loaded (/lib/systemd/system/systemd-resolved.service; enabled; vendor preset: enabled)</span></span><br><span class="line">        <span class="comment">#      Active: active (running) since Thu 2021-02-04 14:13:15 CST; 1 months 13 days ago</span></span><br><span class="line">        <span class="comment">#        Docs: man:systemd-resolved.service(8)</span></span><br><span class="line">        <span class="comment">#    Main PID: 830 (systemd-resolve)</span></span><br><span class="line">        <span class="comment">#      Status: "Processing requests..."</span></span><br><span class="line">        <span class="comment">#       Tasks: 1 (limit: 19112)</span></span><br><span class="line">        <span class="comment">#      Memory: 9.5M</span></span><br><span class="line">        <span class="comment">#      CGroup: /system.slice/systemd-resolved.service</span></span><br><span class="line">        <span class="comment">#              â””â”€830 /lib/systemd/systemd-resolved</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2) å¦‚æœè¦æ¸…é™¤æ‰€æœ‰ç¼“å­˜ç»Ÿè®¡ä¿¡æ¯ï¼Œåˆ™å¿…é¡»é‡æ–°å¯åŠ¨systemdè§£æçš„æœåŠ¡ã€‚</span></span><br><span class="line">sudo systemctl restart systemd-resolved</span><br></pre></td></tr></table></figure></p>
<p><br/></p>
<p><strong>åŸºç¡€ç¤ºä¾‹:</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># (1) æ£€æŸ¥DNSç¼“å­˜ç»Ÿè®¡ä¿¡æ¯ã€‚</span></span><br><span class="line">sudo systemd-resolve --statistics</span><br><span class="line">  <span class="comment"># DNSSEC supported by current servers: no</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Transactions</span></span><br><span class="line">  <span class="comment"># Current Transactions: 0</span></span><br><span class="line">  <span class="comment"># Total Transactions: 691</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Cache  # DND å½“å‰ç¼“å­˜ç»Ÿè®¡</span></span><br><span class="line">  <span class="comment"># Current Cache Size: 2      # ç¼“å­˜å¤§å°</span></span><br><span class="line">  <span class="comment">#         Cache Hits: 264    # å‘½ä¸­</span></span><br><span class="line">  <span class="comment">#         Cache Misses: 505  # ä¸¢å¼ƒ</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># DNSSEC Verdicts</span></span><br><span class="line">  <span class="comment">#         Secure: 0</span></span><br><span class="line">  <span class="comment">#         Insecure: 0</span></span><br><span class="line">  <span class="comment">#         Bogus: 0</span></span><br><span class="line">  <span class="comment"># Indeterminate: 0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># (2) æ¸…é™¤Ubuntuä¸Šçš„DNSç¼“å­˜ç„¶åå†æ¬¡æ£€æŸ¥ç»Ÿè®¡ä¿¡æ¯ä»¥ç¡®è®¤â€œå½“å‰ç¼“å­˜å¤§å°â€ä¸º0ã€‚</span></span><br><span class="line">  <span class="comment"># Tips: DNSåˆ·æ–°å‘½ä»¤ä¸ä¼šæ¸…é™¤ç¼“å­˜å‘½ä¸­å’Œæœªå‘½ä¸­ç»Ÿè®¡ä¿¡æ¯;</span></span><br><span class="line">  <span class="comment"># Tips: systemd-resolved ä¼šåœ¨ç½‘ç»œé…ç½®å‘ç”Ÿå˜åŒ–æ—¶è‡ªåŠ¨åˆ·æ–°ç¼“å­˜</span></span><br><span class="line">  sudo systemd-resolve --flush-caches</span><br><span class="line">  <span class="comment"># Cache</span></span><br><span class="line">  <span class="comment"># Current Cache Size: 0</span></span><br><span class="line">  <span class="comment">#         Cache Hits: 264</span></span><br><span class="line">  <span class="comment">#         Cache Misses: 505</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># (3) å¿˜è®°æ‰€æœ‰å·²ç¼“å­˜çš„DNSæœåŠ¡å™¨ç‰¹æ€§</span></span><br><span class="line">resolvectl reset-server-features</span><br><span class="line">  <span class="comment"># resolvectl query www.baidu.com</span></span><br><span class="line">  <span class="comment"># www.baidu.com: 112.80.248.76                   -- link: ens160</span></span><br><span class="line">  <span class="comment">#               112.80.248.75                   -- link: ens160</span></span><br><span class="line">  <span class="comment">#               (www.a.shifen.com)</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># -- Information acquired via protocol DNS in 1.5ms.</span></span><br><span class="line">  <span class="comment"># -- Data is authenticated: no</span></span><br></pre></td></tr></table></figure></p>
<p>Tips : åœ¨Ubuntuä¸Šåˆ·æ–°ç¼“å­˜éå¸¸å®¹æ˜“, ä½†æ˜¯åˆ·æ–°DNSçš„å‘½ä»¤å¯ä»¥ç”±rootç”¨æˆ·æˆ–å…·æœ‰sudoç‰¹æƒçš„ç”¨æˆ·è¿è¡Œã€‚</p>

        </div>
        <!-- Google å¹¿å‘Š -->
        
<ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-9134434519967436" data-ad-slot="7905848205"></ins>
  

        
<hr/>
<div style="text-align: center;font-weight: bold;">
  <p> æ¬¢è¿å„ä½å¿—åŒé“åˆçš„æœ‹å‹ä¸€èµ·å­¦ä¹ äº¤æµï¼Œå¦‚æ–‡ç« æœ‰è¯¯è¯·åœ¨ä¸‹æ–¹ç•™ä¸‹æ‚¨å®è´µçš„ç»éªŒçŸ¥è¯†ï¼Œä¸ªäººé‚®ç®±åœ°å€<b style="color:#ff654e"><code>ã€master#weiyigeek.topã€‘</code></b>æˆ–è€…ä¸ªäººå…¬ä¼—å·<b style="color:#ff654e"><code>ã€WeiyiGeekã€‘</code></b>è”ç³»æˆ‘ã€‚ </p>
  <p> æ›´å¤šæ–‡ç« æ¥æºäº<b style="color:#03a9f4">ã€WeiyiGeek Blog - ä¸ºäº†èƒ½åˆ°è¿œæ–¹ï¼Œè„šä¸‹çš„æ¯ä¸€æ­¥éƒ½ä¸èƒ½å°‘ã€‘</b>, ä¸ªäººé¦–é¡µåœ°å€( <a style="color: #03a9f4;" href="https://weiyigeek.top" target="_blank"> https://weiyigeek.top </a> )</p>
<!-- 

  <ul style="font-weight: bolder;">
    <li>
      <p><span style="color: #03a9f4">echo&nbsp;&nbsp;"ã€ç‚¹ä¸ªèµã€‘ï¼ŒåŠ¨åŠ¨ä½ é‚£ç²—å£®çš„æ‹‡æŒ‡æˆ–è€…èŠŠèŠŠç‰æ‰‹ï¼Œäº²ï¼"</span></p>
    </li>
    <li>
      <p><span style="color: #ff9201">printf("%s",&nbsp;"ã€æŠ•ä¸ªå¸ã€‘ï¼Œä¸‡æ°´åƒå±±æ€»æ˜¯æƒ…ï¼ŒæŠ•ä¸ªç¡¬å¸è¡Œä¸è¡Œï¼Œäº²ï¼")</span></p>
    </li>
    <li>
      <p><span style="color: #02a2ff">fmt.Printf("ã€æ”¶ä¸ªè—ã€‘ï¼Œé˜…åå³ç„šä¸åƒç°ï¼Œäº²ï¼")&nbsp;&nbsp;</span></p>
    </li>
    <li>
      <p><span style="color:red">console.info("ã€è½¬ä¸ªå‘ã€‘ï¼Œè®©æ›´å¤šçš„å¿—åŒé“åˆçš„æœ‹å‹ä¸€èµ·å­¦ä¹ äº¤æµï¼Œäº²ï¼")</span></p>
    </li>
    <li>
      <p><span style="color: #ff654e">System.out.println("ã€å…³ä¸ªæ³¨ã€‘ï¼Œåç»­æµè§ˆæŸ¥çœ‹ä¸è¿·è·¯å“Ÿï¼Œäº²ï¼")</span></p>
    </li>
  </ul> -->
  <div>
    <img src="/img/share-wechat.jpg" class="img-responsive" alt="æ‰«æFollow(å…³æ³¨)WeiyiGeekå…¬ä¼—å·ä¸Visit(æµè§ˆ)æå®¢å…¨æ ˆä¿®ç‚¼å°ç¨‹åº" >
    <p>ä¸“æ ä¹¦å†™ä¸æ˜“ï¼Œå¦‚æœæ‚¨è§‰å¾—è¿™ä¸ªä¸“æ è¿˜ä¸é”™çš„ï¼Œè¯·ç»™è¿™ç¯‡ä¸“æ  <b style="color: red;">ã€ç‚¹ä¸ªèµã€æŠ•ä¸ªå¸ã€æ”¶ä¸ªè—ã€å…³ä¸ªæ³¨ã€è½¬ä¸ªå‘ã€èµä¸ªåŠ©ã€‘</b>ï¼Œè¿™å°†å¯¹æˆ‘çš„è‚¯å®šï¼Œæˆ‘å°†æŒç»­æ•´ç†å‘å¸ƒæ›´å¤šä¼˜è´¨åŸåˆ›æ–‡ç« ï¼ã€‚</p>
    <img src="/img/weiyigeek.jpg" class="img-responsive" alt="WeiyiGeek-banner">
  </div>
</div>
  <hr>
  

  <blockquote class="post-copyright">
    <div class="content">
      
        
<span class="post-time">
    æœ€åæ›´æ–°æ—¶é—´ï¼š<time datetime="2022-08-11T13:12:05.872Z" itemprop="dateUpdated">2022-08-11 21:12:05</time>
</span><br>


        <span>æ–‡ç« åŸå§‹è·¯å¾„ï¼š<a href="https://github.com/WeiyiGeek/blog/edit/master/source/_posts/ç³»ç»Ÿè¿ç»´/Linux/å¸¸ç”¨å‘½ä»¤/ç½‘ç»œæŸ¥çœ‹ç±»å‘½ä»¤/ç½‘ç»œåŸºæœ¬é…ç½®ä¸æŸ¥è¯¢.md" target="_blank" rel="noopener noreferrer">_posts/ç³»ç»Ÿè¿ç»´/Linux/å¸¸ç”¨å‘½ä»¤/ç½‘ç»œæŸ¥çœ‹ç±»å‘½ä»¤/ç½‘ç»œåŸºæœ¬é…ç½®ä¸æŸ¥è¯¢.md</a></span><br>
         <span class="copy-copyright">è½¬è½½æ³¨æ˜å‡ºå¤„ï¼ŒåŸæ–‡åœ°å€ï¼š<a href="/2019/6-3-173.html" target="_blank" rel="external">https://blog.weiyigeek.top/2019/6-3-173.html</a></span><br>æœ¬ç«™æ–‡ç« å†…å®¹éµå¾ª <a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">çŸ¥è¯†å…±äº« ç½²å - éå•†ä¸šæ€§ - ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…åè®®</a> 
    </div>
    <footer>
      <a href="https://blog.weiyigeek.top">
        <img src="/img/avatar.jpg" alt="WeiyiGeek">
        WeiyiGeek
      </a>
    </footer>
  </blockquote>


        
            <div class="page-reward">
  <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-rectangle waves-light">â˜•ï¸ è¯·ä½œè€…å–æ¯å’–å•¡!</a>
</div>
            
        
        <div class="post-footer">
            
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BD%91%E7%BB%9C%E5%91%BD%E4%BB%A4/" rel="tag">ç½‘ç»œå‘½ä»¤</a></li></ul>

            <div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://blog.weiyigeek.top/2019/6-3-173.html&title=ã€Šç½‘ç»œåŸºæœ¬é…ç½®æŸ¥è¯¢ã€‹ â€” WeiyiGeek Blog&pic=https://blog.weiyigeek.top/img/avatar.jpg" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.weiyigeek.top/2019/6-3-173.html&title=ã€Šç½‘ç»œåŸºæœ¬é…ç½®æŸ¥è¯¢ã€‹ â€” WeiyiGeek Blog&source=[TOC]" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.weiyigeek.top/2019/6-3-173.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€Šç½‘ç»œåŸºæœ¬é…ç½®æŸ¥è¯¢ã€‹ â€” WeiyiGeek Blog&url=https://blog.weiyigeek.top/2019/6-3-173.html&via=https://blog.weiyigeek.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://blog.weiyigeek.top/2019/6-3-173.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>

        </div>
        
          <!-- è¯„è®ºç»„ä»¶ -->


<div id="gitalk-container"></div>
<script type="text/javascript" src="/js/plugins/gitalk.min.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/custom/gitalk.init.js?v=1.6.6"></script>
        
    </div>
    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="prev">
      <a href="/2019/6-3-179.html" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">Shellè„šæœ¬å¸¸ç”¨å‘½ä»¤ä¸€è§ˆ</h4>
      </a>
    </div>
  

  
    <div class="next">
      <a href="/2019/6-3-167.html" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">ç³»ç»Ÿç®¡ç†æŸ¥çœ‹ä¸€è§ˆ</h4>
      </a>
    </div>
  
</nav>


    
    
        <aside class="post-widget">
            <nav class="post-toc-wrap" id="post-toc">
                <strong>ç›®å½•</strong>
                <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#0x00-å¿«é€Ÿå…¥é—¨"><span class="post-toc-number">1.</span> <span class="post-toc-text">0x00 å¿«é€Ÿå…¥é—¨</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#0X01-ç½‘ç»œé…ç½®"><span class="post-toc-number">2.</span> <span class="post-toc-text">0X01 ç½‘ç»œé…ç½®</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#nmcli-å‘½ä»¤"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">nmcli å‘½ä»¤</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#netplan-å‘½ä»¤"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">netplan å‘½ä»¤</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#0x02-ç½‘ç»œæŸ¥çœ‹"><span class="post-toc-number">3.</span> <span class="post-toc-text">0x02 ç½‘ç»œæŸ¥çœ‹</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#hostname-å‘½ä»¤"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">hostname å‘½ä»¤</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#hostnamectl-å‘½ä»¤"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">hostnamectl å‘½ä»¤</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#ifconfig-å‘½ä»¤"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">ifconfig å‘½ä»¤</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#ifdown-å‘½ä»¤"><span class="post-toc-number">3.4.</span> <span class="post-toc-text">ifdown å‘½ä»¤</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#ifup-å‘½ä»¤"><span class="post-toc-number">3.5.</span> <span class="post-toc-text">ifup å‘½ä»¤</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#ip-å‘½ä»¤"><span class="post-toc-number">3.6.</span> <span class="post-toc-text">ip å‘½ä»¤</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#arp-å‘½ä»¤"><span class="post-toc-number">3.7.</span> <span class="post-toc-text">arp å‘½ä»¤</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#route-å‘½ä»¤-Linux"><span class="post-toc-number">3.8.</span> <span class="post-toc-text">route å‘½ä»¤ - (Linux)</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#tracepath-å‘½ä»¤"><span class="post-toc-number">3.9.</span> <span class="post-toc-text">tracepath å‘½ä»¤</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#macchanger-å‘½ä»¤"><span class="post-toc-number">3.10.</span> <span class="post-toc-text">macchanger å‘½ä»¤</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#mii-tool-å‘½ä»¤"><span class="post-toc-number">3.11.</span> <span class="post-toc-text">mii-tool å‘½ä»¤</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#ethtool-å‘½ä»¤"><span class="post-toc-number">3.12.</span> <span class="post-toc-text">ethtool å‘½ä»¤</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#dhclient-å‘½ä»¤"><span class="post-toc-number">3.13.</span> <span class="post-toc-text">dhclient å‘½ä»¤</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#nscd-å‘½ä»¤"><span class="post-toc-number">3.14.</span> <span class="post-toc-text">nscd å‘½ä»¤</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#systemd-resolve-å‘½ä»¤"><span class="post-toc-number">3.15.</span> <span class="post-toc-text">systemd-resolve å‘½ä»¤</span></a></li></ol></li></ol>
            </nav>
            <div class="toc-bar"><div>
        </aside>
    


    <!-- æ”¯ä»˜å®å¾®ä¿¡æ–‡ç« èµèµ -->
    
      <div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        å¦‚æœæ­¤ç¯‡æ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œå°±è¯·ä½œè€…å–æ¯ Coffee â˜•ï¸â˜•ï¸!
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardwechat" src="/img/reward-wechat.jpg" height="250" height="250" alt="å¾®ä¿¡æ‰“èµäºŒç»´ç ">
            <img id="rewardalipay" src="/img/reward-alipay.png" height="250" height="250" alt="æ”¯ä»˜å®æ‰“èµäºŒç»´ç ">
        </div>
        
        <label class="reward-toggle">
            <!-- <input id="rewardToggle" type="checkbox" class="reward-toggle-check" data-wechat="/img/reward-wechat.jpg" data-alipay="/img/reward-alipay.png"> -->
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">å¾®ä¿¡</span>
                <span class="reward-toggle-item alipay">æ”¯ä»˜å®</span>
            </div>
        </label>
        
    </div>
</div>

      

    <!-- å¾®ä¿¡å…¬ä¼—å·å…³æ³¨/æ–‡ç« ç‰ˆæƒå¤åˆ¶ -->
    
      <div id="btw-mask" style="position: fixed; top: 0px; right: 0px; bottom: 0px; left: 0px; opacity: 0.7; z-index: 999; background: rgb(0, 0, 0); display:none"></div>
<div id="btw-modal" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 360px; text-align: center; font-size: 13px; background: rgb(255, 255, 255); border-radius: 10px; z-index: 9999; font-family: PingFangSC-Regular, sans-serif;display:none">
<span id="btw-modal-close-btn" style="position: absolute; top: 5px; right: 15px; line-height: 1.8; font-size: 15px; cursor: pointer; opacity: 0.2; z-index: 9999; color: rgb(0, 0, 0); background: none; border: none; outline: none;">X</span>
<p id="btw-modal-header" style="margin-top: 40px; line-height: 1.8; font-size: 13px; ">
<b style="color:#6190e8;">ä½ å¥½æœ‹å‹,å¯ä»¥å…³ä¸ªæ³¨å—? â¤ <br> è¿™å°†æ˜¯æˆ‘æŒç»­æ›´æ–°æ–‡ç« çš„åŠ¨åŠ›æºæ³‰ï¼Œè°¢è°¢æ”¯æŒï¼(à¹‘â€²á´—â€µà¹‘) </b> <br> å¦‚ä¸æƒ³å…³æ³¨è¯·ç‚¹å‡»å³ä¸Šè§’çš„ã€Xã€‘<br>
<br>Method 1.Please visit <strong><a href="https://twitter.com/WeiyiGeek" target="_blank" rel="noopener" style="color: rgb(240, 65, 52);text-decoration:underline;">ã€My Twitterã€‘</a></strong>. There is an article verification code in the homepage.
<br>æ–¹å¼2.è¯·è®¿é—®æœ¬åšä¸»çš„Bç«™<strong><a href="https://space.bilibili.com/385802642" target="_blank" rel="noopener" style="color: rgb(240, 65, 52);text-decoration:underline;">ã€WeiyiGeekã€‘</a></strong>é¦–é¡µå…³æ³¨UPä¸»,<br>å°†è‡ªåŠ¨éšæœºè·å–è§£é”éªŒè¯ç ã€‚
<br>æ–¹å¼3.æ‰«ä¸€æ‰«ä¸‹æ–¹äºŒç»´ç ï¼Œå…³æ³¨æœ¬ç«™<strong>å®˜æ–¹å…¬ä¼—å·</strong><br>
å›å¤ï¼š<strong style="color: rgb(240, 65, 52);">éªŒè¯ç </strong>
å°†è·å–<strong style="color: rgb(240, 65, 52);">è§£é”(æœ‰æ•ˆæœŸ7å¤©)</strong>æœ¬ç«™æ‰€æœ‰æŠ€æœ¯æ–‡ç« å“Ÿ!</p>
<img src="/img/wechat-search.png" style="width: 300px; margin-top: 10px;">
<div id="btw-modal-input-code" style="margin-top: 20px; background: rgb(255, 255, 255);">
  <input id="btw-modal-input" type="number" minlength="4" maxlength="4" placeholder="è¯·è¾“å…¥éªŒè¯ç |Verification Code"
    style="width: 165px; height: 32px; line-height: 32px; padding: 0px 10px; margin: 0px 10px; font-size: 13px; text-rendering: auto; text-transform: none; cursor: text; outline: none; box-sizing: border-box; border: 1px solid rgb(221, 221, 221); -webkit-appearance: textfield; background-color: white; -webkit-rtl-ordering: logical;"/>
  <button id="btw-submit-btn" onclick="yzm_vertify()"
    style="padding: 0px 20px; height: 32px; font-size: 14px; outline: none; border: none; color: rgb(255, 255, 255); background: rgb(222, 104, 109); cursor: pointer;">æ
    äº¤</button> </div>
<p id="btw-footer" style="margin: 40px 0px 20px; color: rgb(153, 153, 153);">@WeiyiGeek - ä¸ºäº†èƒ½åˆ°è¿œæ–¹ï¼Œè„šä¸‹çš„æ¯ä¸€æ­¥éƒ½ä¸èƒ½å°‘</p>
</div>
        
</article>
</div>

    </main>
    <footer class="footer ">
    
    <div class="top">
        
            <p>
    <span>Linksï¼š</span>
    
    <span class="blogroll-item">
        <a href="https://weiyigeek.top" target="_blank">https://weiyigeek.top</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.weiyigeek.top" target="_blank">https://blog.weiyigeek.top</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://weiyigeek.top/img/search-wechat.jpg" target="_blank">å…¬ä¼—è´¦å·</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://space.bilibili.com/385802642/article" target="_blank">å“”å“©å“”å“©ä¸“æ </a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://github.com/weiyigeek" target="_blank">åšä¸»Github</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://gitee.com/WeiyiGeek" target="_blank">åšä¸»Gitee</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.zhihu.com/people/weiyiSec" target="_blank">çŸ¥ä¹</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.cnblogs.com/WeiyiGeek" target="_blank">åšå®¢å›­</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://my.oschina.net/weiyigeek" target="_blank">OSCHINA</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.toutiao.com/c/user/token/MS4wLjABAAAAqcPSoMqfctaEqJpGSF775eeCjWkrop4AOyLITdMx-L78F5iXzfQcSRM5sY4dq3wR" target="_blank">ä»Šæ—¥å¤´æ¡</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.csdn.net/u013072756?type=lately" target="_blank">CSDN</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.jianshu.com/u/5199a1104739" target="_blank">ç®€ä¹¦</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://cloud.tencent.com/developer/user/1389665/articles" target="_blank">è…¾è®¯äº‘ç¤¾åŒº</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://cuttlefish.baidu.com/shop/75c5dbd8d15abe23482f4d40" target="_blank">ç™¾åº¦æ–‡åº“</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://author.baidu.com/home?from=blog&app_id=1726736601523415" target="_blank">ITæå®¢çŸ¥è¯†åˆ†äº«</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.51cto.com/weiyigeek" target="_blank">51CTOåšå®¢</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://juejin.cn/user/122767337595934" target="_blank">æ˜é‡‘</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://weibo.com/a/hot/7622022703618049_1.html" target="_blank">å¾®åšæ–‡ç« </a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.xiaohongshu.com/user/profile/627c98bb000000001000e7ba" target="_blank">å°çº¢ä¹¦</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://segmentfault.com/u/weiyigeek" target="_blank">Segmentfault</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.modb.pro/u/506690" target="_blank">å¢¨å¤©è½®</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.douyin.com/user/MS4wLjABAAAAMSBdMja6XLsdmzafb0RNbFeBemIOk38K1PaOClZeI1Q" target="_blank">æŠ–éŸ³ä¸»é¡µ</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.kuaishou.com/profile/3xfbrsrhd2i69x9" target="_blank">å¿«æ‰‹ä¸»é¡µ</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.ixigua.com/home/3984243135350727" target="_blank">è¥¿ç“œè§†é¢‘</a>
    </span>
    
</p>

        
    </div>
    
    <div class="bottom">
      <p>
        <span>WeiyiGeek &copy; 2018 - 2022 <a href="https://weiyigeek.top" target="_blank" rel="noopener">weiyigeek.top</a> All rights reserved.å”¯ä¸€æå®¢ITçŸ¥è¯†åˆ†äº« ç‰ˆæƒæ‰€æœ‰ </span>
        
        <span>
          Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/weiyigeek" target="_blank">mellow</a>
        </span>
        
        <br/>è®¿é—®ç»Ÿè®¡
        <span><a href="/sitemap.xml" target="_blank" rel="Sitemaps-ç«™ç‚¹åœ°å›¾">Sitemaps</a> </span>
        <span><a href="/baidusitemap.xml" target="_blank" rel="baidusitemaps-ç™¾åº¦ç«™ç‚¹åœ°å›¾">ç«™ç‚¹åœ°å›¾</a> </span>
        <!-- 
  -->
        <br/>ICPå¤‡æ¡ˆå·<span><a href="https://beian.miit.gov.cn" target="_blank">æ¸ICPå¤‡2022003447å·</a></span>
        <br/>
        <div id="cc-myssl-id">
          <a href="https://myssl.com/blog.weiyigeek.top?from=mysslid" target="_blank" rel="noopener"><img src="https://static.myssl.com/res/images/myssl-id1.png" alt="MySSLå®‰å…¨è®¤è¯" style="max-height:50px;display:block;margin:0 auto"></a>
        </div>
      </p>
    </div>
</footer>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>


<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://blog.weiyigeek.top/2019/6-3-173.html&title=ã€Šç½‘ç»œåŸºæœ¬é…ç½®æŸ¥è¯¢ã€‹ â€” WeiyiGeek Blog&pic=https://blog.weiyigeek.top/img/avatar.jpg" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.weiyigeek.top/2019/6-3-173.html&title=ã€Šç½‘ç»œåŸºæœ¬é…ç½®æŸ¥è¯¢ã€‹ â€” WeiyiGeek Blog&source=[TOC]" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.weiyigeek.top/2019/6-3-173.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€Šç½‘ç»œåŸºæœ¬é…ç½®æŸ¥è¯¢ã€‹ â€” WeiyiGeek Blog&url=https://blog.weiyigeek.top/2019/6-3-173.html&via=https://blog.weiyigeek.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://blog.weiyigeek.top/2019/6-3-173.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>æ‰«ä¸€æ‰«ï¼Œåˆ†äº«åˆ°å¾®ä¿¡</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACLklEQVR42u3awY6DMAxF0f7/TzPSbNvQ+2yoWudmVQEqOSwsO/bjgdfxv1a/n9fzk8/Pr96yunvBkiFDxs8yjtO1esH5lXPSisc/0wuqDBkyNmCQIHt+hQRZAjsHL6/LkCFDRumva0gZMmTIuI+RlqO1JFKGDBk7M2olaPAaHIhvr8VlyJDxg4x+Y+C+3x/tb8iQIeMrGUe4+kEwbXOiXcmQIWM0gxeTZCufif1BhitDhowRDBI0+0keH8ggH/fF3mTIkLEN49oErtYq4E3NZYYrQ4aMcQx+ZM9bkrWBDB520eeQIUPGIAYJqVcdmdWSv6CIlSFDxlAGOW4jh2tkW/wfaruSIUPGPoz+EAYPx6SFQApaGTJkzGakm0jbBrWyNi6qZciQMZpxX2LXbwwUg7UMGTKGMg68rgrB6aAGaifIkCFjKKNWdvIQSTZdC8EyZMjYjcHHIHhLgEx5pEH8TeEqQ4aMoYz+4BcJzfxz1FoFMmTI2IHBh8Bqw179tDI44JMhQ8Y4Bg98vKztF8NxaS1DhoztGWkRm6Z0faoMGTJmM9KRiLQQJWNh5G6cdMqQIWMQ4whXGo7Pr3TGMpapoQwZMsYx+Oo0IGuhvNXOlCFDxjgGCbL8Oi9Ba0F5iZQhQ8YGjPSIv9bsJNvloV+GDBky+OFa2rxM78qQIUNGjVFM4BqMN2moDBkyNmDwIpZsiCd8PH28+LhNhgwZP8XolI68rVh7Mf+gMmTIGMr4Azh4jnQHu0VkAAAAAElFTkSuQmCC" alt="å¾®ä¿¡åˆ†äº«äºŒç»´ç ">
</div>


    
    <!-- main-js -->
<script type="text/javascript" src="/js/jquery/2.1.0-jquery.min.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/plugins/fastclick.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/plugins/ios-orientationchange-fix.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/jquery/3.5.2-jquery.fancybox.min.js?v=1.6.6"></script>
<!--  //cdn.bootcss.com/node-waves/0.7.4/waves.min.js -->
<script type="text/javascript" src="/js/node-waves/0.7.4-waves.min.js?v=1.6.6"></script> 

<script type="text/javascript" src="/js/method.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/blog.js?v=1.6.6"></script>

<!-- third-party -->
<script type="text/javascript" src="/js/plugins/local_search.js?v=1.6.6"></script>
<script type="text/javascript">
	var search_path = "search.xml";
	if (search_path.length === 0) { search_path = "search.xml";}
	var path = "/" + search_path;
	searchFunc(path, "local-search-input", "local-search-result");
</script> 

<script> (adsbygoogle = window.adsbygoogle || []).push({});</script>    


<!-- <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> --> 


  


<script>
  var _hmt = _hmt || [];
  (function() {
    // ç™¾åº¦ç»Ÿè®¡
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?53923c4b5560739bc0ed61e183be6acf";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();
</script>
 


<!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
            processEscapes: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.staticfile.org/mathjax/2.7.9/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
 
<script>
    (function() {
        var OriginTitile = document.title, titleTime;
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                document.title = 'WeiyiGeek Blog-å…³æ³¨äºç½‘ç»œå®‰å…¨_ç‰©è”ç½‘å®‰å…¨å¼€å‘_ç½‘ç»œå®‰å…¨è¿ç»´-å­¦ä¹ å¿ƒå¾—åˆ†äº«';
                clearTimeout(titleTime);
            } else {
                document.title = '(ã¤ã‚§âŠ‚)å’¦!åˆå¥½äº†!';
                titleTime = setTimeout(function() {
                    document.title = OriginTitile;
                },2000);
            }
        });
    })();
</script>
 

     <script type="text/javascript" src="/js/custom/copytips.js?v=1.6.6"></script> 
</body>
</html>