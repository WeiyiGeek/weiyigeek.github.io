{"title":"Python3配置和入坑.md","slug":"编程世界/Python/Python3配置和入坑","date":"2019-03-20T12:35:30.000Z","updated":"2022-05-26T14:44:04.102Z","url":"2019/3-20-329.html","path":"api/articles/2019/3-20-329.html.json","covers":["https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190416140529.png"],"content":"<p>[TOC]</p>\n<a id=\"more\"></a>\n<h4 id=\"0x00-基础配置\"><a href=\"#0x00-基础配置\" class=\"headerlink\" title=\"0x00 基础配置\"></a>0x00 基础配置</h4><p>IDLE 快捷键<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ALT + p  <span class=\"comment\">#上一次执行的命令</span></span><br></pre></td></tr></table></figure></p>\n<p><strong>(1)Python Shell 清屏方法</strong></p>\n<ul>\n<li>针对Python命令行 os.system(‘cls’)</li>\n<li>针对IDLE Shell命令行 ctrl + l<br>Copy:clearwindow.py文件，并放在Python安装目录PythonX\\Lib\\idlelib下面（我用的是python3.4.3所以路径是：D:\\Program Files (x86)\\Python35\\Lib\\idlelib)<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">Clear Window Extension</span></span><br><span class=\"line\"><span class=\"string\">Add these lines to config-extensions.def</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">[ClearWindow]</span></span><br><span class=\"line\"><span class=\"string\">enable=1</span></span><br><span class=\"line\"><span class=\"string\">enable_editor=0</span></span><br><span class=\"line\"><span class=\"string\">enable_shell=1</span></span><br><span class=\"line\"><span class=\"string\">[ClearWindow_cfgBindings]</span></span><br><span class=\"line\"><span class=\"string\">clear-window=&lt;Control-Key-l&gt;</span></span><br><span class=\"line\"><span class=\"string\">\"\"\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ClearWindow</span>:</span></span><br><span class=\"line\"></span><br><span class=\"line\">    menudefs = [</span><br><span class=\"line\">        (<span class=\"string\">'options'</span>, [<span class=\"literal\">None</span>,</span><br><span class=\"line\">               (<span class=\"string\">'Clear Shell Window'</span>, <span class=\"string\">'&lt;&lt;clear-window&gt;&gt;'</span>),</span><br><span class=\"line\">       ]),]</span><br><span class=\"line\">     </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, editwin)</span>:</span></span><br><span class=\"line\">        self.editwin = editwin</span><br><span class=\"line\">        self.text = self.editwin.text</span><br><span class=\"line\">        self.text.bind(<span class=\"string\">\"&lt;&lt;clear-window&gt;&gt;\"</span>, self.clear_window2)</span><br><span class=\"line\"></span><br><span class=\"line\">        self.text.bind(<span class=\"string\">\"&lt;&lt;undo&gt;&gt;\"</span>, self.undo_event)  <span class=\"comment\"># add=\"+\" doesn't work</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">undo_event</span><span class=\"params\">(self, event)</span>:</span></span><br><span class=\"line\">        text = self.text</span><br><span class=\"line\">        </span><br><span class=\"line\">        text.mark_set(<span class=\"string\">\"iomark2\"</span>, <span class=\"string\">\"iomark\"</span>)</span><br><span class=\"line\">        text.mark_set(<span class=\"string\">\"insert2\"</span>, <span class=\"string\">\"insert\"</span>)</span><br><span class=\"line\">        self.editwin.undo.undo_event(event)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># fix iomark and insert</span></span><br><span class=\"line\">        text.mark_set(<span class=\"string\">\"iomark\"</span>, <span class=\"string\">\"iomark2\"</span>)</span><br><span class=\"line\">        text.mark_set(<span class=\"string\">\"insert\"</span>, <span class=\"string\">\"insert2\"</span>)</span><br><span class=\"line\">        text.mark_unset(<span class=\"string\">\"iomark2\"</span>)</span><br><span class=\"line\">        text.mark_unset(<span class=\"string\">\"insert2\"</span>)</span><br><span class=\"line\">        </span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">clear_window2</span><span class=\"params\">(self, event)</span>:</span> <span class=\"comment\"># Alternative method</span></span><br><span class=\"line\">        <span class=\"comment\"># work around the ModifiedUndoDelegator</span></span><br><span class=\"line\">        text = self.text</span><br><span class=\"line\">        text.undo_block_start()</span><br><span class=\"line\">        text.mark_set(<span class=\"string\">\"iomark2\"</span>, <span class=\"string\">\"iomark\"</span>)</span><br><span class=\"line\">        text.mark_set(<span class=\"string\">\"iomark\"</span>, <span class=\"number\">1.0</span>)</span><br><span class=\"line\">        text.delete(<span class=\"number\">1.0</span>, <span class=\"string\">\"iomark2 linestart\"</span>)</span><br><span class=\"line\">        text.mark_set(<span class=\"string\">\"iomark\"</span>, <span class=\"string\">\"iomark2\"</span>)</span><br><span class=\"line\">        text.mark_unset(<span class=\"string\">\"iomark2\"</span>)</span><br><span class=\"line\">        text.undo_block_stop()</span><br><span class=\"line\">        <span class=\"keyword\">if</span> self.text.compare(<span class=\"string\">'insert'</span>, <span class=\"string\">'&lt;'</span>, <span class=\"string\">'iomark'</span>):</span><br><span class=\"line\">            self.text.mark_set(<span class=\"string\">'insert'</span>, <span class=\"string\">'end-1c'</span>)</span><br><span class=\"line\">        self.editwin.set_line_and_column()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">clear_window</span><span class=\"params\">(self, event)</span>:</span></span><br><span class=\"line\">        <span class=\"comment\"># remove undo delegator</span></span><br><span class=\"line\">        undo = self.editwin.undo</span><br><span class=\"line\">        self.editwin.per.removefilter(undo)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># clear the window, but preserve current command</span></span><br><span class=\"line\">        self.text.delete(<span class=\"number\">1.0</span>, <span class=\"string\">\"iomark linestart\"</span>)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> self.text.compare(<span class=\"string\">'insert'</span>, <span class=\"string\">'&lt;'</span>, <span class=\"string\">'iomark'</span>):</span><br><span class=\"line\">            self.text.mark_set(<span class=\"string\">'insert'</span>, <span class=\"string\">'end-1c'</span>)</span><br><span class=\"line\">        self.editwin.set_line_and_column()</span><br><span class=\"line\"> </span><br><span class=\"line\">        <span class=\"comment\"># restore undo delegator</span></span><br><span class=\"line\">        self.editwin.per.insertfilter(undo)</span><br></pre></td></tr></table></figure>\n在Python X\\Lib\\idlelib目录下找到config-extensions.def（IDLE扩展的配置文件），用记事本打开<br>在文件末尾添加如下代码：<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[ClearWindow]</span><br><span class=\"line\">enable&#x3D;1</span><br><span class=\"line\">enable_editor&#x3D;0</span><br><span class=\"line\">enable_shell&#x3D;1</span><br><span class=\"line\">[ClearWindow_cfgBindings]</span><br><span class=\"line\">clear-window&#x3D;&lt;Control-Key-l&gt;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><br><br><strong>(2)Python 多版本共存</strong><br>我常用的方式就是一个加入PATH之中,另外一个版本不加入python之中;但是痛苦在于每次执行需要指定绝对路径,且进行pip下载的时候也需要在指定目录执行;<br>解决方法：<br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#Python 自带的解决方法</span></span><br><span class=\"line\">当安装python2<span class=\"number\">.7</span>以后直接调用 pip 执行的是 Python2<span class=\"number\">.7</span> 的 pip,如何解决？</span><br><span class=\"line\">pip3 install xxxx</span><br><span class=\"line\">py <span class=\"number\">-3</span> -m pip install xxxx</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#问题1：win10以下设置右键点击“Edit with IDLE”选项打开的 Python 版本。</span></span><br><span class=\"line\"><span class=\"comment\">#解决方案：</span></span><br><span class=\"line\"><span class=\"number\">1.</span> 在运行处输入 regedit 进入注册表；</span><br><span class=\"line\"><span class=\"number\">2.</span> 找到项[HKEY_CLASSES_ROOT\\Python.File\\shell\\Edit <span class=\"keyword\">with</span> IDLE\\command]</span><br><span class=\"line\"><span class=\"number\">3.</span> 双击（默认），将值改为：<span class=\"string\">\"C:\\Python34\\pythonw.exe\"</span> <span class=\"string\">\"C:\\Python34\\Lib\\idlelib\\idle.pyw\"</span> -e <span class=\"string\">\"%1\"</span> 即可</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#问题2：如何指定双击打开 .py 文件的程序？</span></span><br><span class=\"line\"><span class=\"comment\">#解决方案：这时候通过修改“属性”的“打开方式”一般是没用的，因为Python特别任性，没办法......</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#还是需要通过修改注册表解决。</span></span><br><span class=\"line\"><span class=\"number\">1.</span> 在运行处输入regedit进入注册表；</span><br><span class=\"line\"><span class=\"number\">2.</span> 找到项[HKEY_CLASSES_ROOT\\Python.File\\shell\\open\\command]</span><br><span class=\"line\"><span class=\"number\">3.</span> 双击（默认），将值改为： <span class=\"string\">\"C:\\Python34\\python.exe\"</span> <span class=\"string\">\"%1\"</span> %* 即可（这里我希望双击以 Python3<span class=\"number\">.4</span> 打开）。</span><br><span class=\"line\">4. 同时将 C:\\Python34;C:\\Python34\\Scripts 添加到环境变量中（右键“这台电脑”-&gt;“高级系统设置”-&gt;“环境变量(N)...”，修改用户环境变量的 PATH 变量即可）。</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#问题3：如果你的系统中同时存在 Python2.7 和 Python3.4，那么在命令行模式下输入 Python，默认是执行 Python2.7：</span></span><br><span class=\"line\"><span class=\"comment\">#因为 Python 在命令行模式下本身就是设置两者可以兼容</span></span><br><span class=\"line\">$ python </span><br><span class=\"line\">$ py <span class=\"number\">-3</span></span><br><span class=\"line\">C:\\Users\\Administrator&gt;py <span class=\"number\">-2</span></span><br><span class=\"line\">Python <span class=\"number\">2</span> <span class=\"keyword\">not</span> found!</span><br><span class=\"line\">Installed Pythons found by py Launcher <span class=\"keyword\">for</span> Windows</span><br><span class=\"line\"> <span class=\"number\">-3.7</span><span class=\"number\">-64</span> *</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#追加技能：</span></span><br><span class=\"line\">当我的代码需要使用 Python2<span class=\"number\">.7</span> 时，则通过鼠标右键选择执行。</span><br><span class=\"line\">在注册表：HKEY_CLASSES_ROOT\\Python.File\\shell\\ 中新建项“通过 Python2<span class=\"number\">.7</span>运行”，再新建项“command”，设置默认值为：<span class=\"string\">\"C:\\Python27\\python.exe\"</span> <span class=\"string\">\"%1\"</span> %* 即可</span><br></pre></td></tr></table></figure><br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190416140529.png\" alt=\"WeiyiGeek.右键打开\" title=\"\" class=\"\">\n                <p>WeiyiGeek.右键打开</p>\n            </figure></p>\n<p><code>`</code></p>\n","comments":true,"excerpt":"[TOC]","categories":[{"name":"Problem","path":"api/categories/Problem.json"}],"tags":[{"name":"Python3","path":"api/tags/Python3.json"}]}