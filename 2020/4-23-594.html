<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="content-language" content="zh-CN"/>
    <meta name="author" content="WeiyiGeek" />
    <meta name="msvalidate.01" content="5C552FB1D885E0E11D2957EC958C8018" />
    <meta name="shenma-site-verification" content="4c655e91c76be0a93c1b6954c666c9d6_1649049085"/>
    <meta name="bytedance-verification-code" content="lKs4FqwCHSJ3A/c5tT7X" />
    <meta name="sogou_site_verification" content="OC65iET6Bk" />
    
    <title>ğŸŒ 5.Goç¼–ç¨‹å¿«é€Ÿå…¥é—¨å­¦ä¹ |WeiyiGeek Blog|å”¯ä¸€æå®¢Geek-ITç½‘ç»œå®‰å…¨è¿ç»´å¼€å‘æŠ€æœ¯çŸ¥è¯†åˆ†äº«-åšå®¢ç«™ç‚¹</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    
    <meta name="keywords" content="Go">
    <meta name="Description" content="WeiyiGeek-å”¯ä¸€æå®¢åšå®¢ç«™ç‚¹,å…³æ³¨äºç½‘ç»œå®‰å…¨è¿ç»´,Webå®‰å…¨å¼€å‘,IOTç‰©è”ç½‘å®‰å…¨å¼€å‘,åº”ç”¨å¼€å‘,åˆ†äº«æŠ€æœ¯å­¦ä¹ çŸ¥è¯†ä¸å…¥å‘è§£å†³,æå‡ç½‘ç»œå®‰å…¨æŠ€æœ¯ä¸è‡ªèº«æŠ€æœ¯èƒ½åŠ›,ç«‹å¿—ç»´æŠ¤å¤§ä¼—ç½‘ç»œå®‰å…¨ä¸ºå·±ä»»,åšä¸€ä¸ªå¯¹å›½å®¶æœ‰ç”¨çš„äºº,ä¸ºå®ç°ä¸­åæ°‘æ—ä¼Ÿå¤§å¤å…´çš„ä¸­å›½æ¢¦ä¸æ‡ˆå¥‹æ–—">
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="/css/jquery/3.5.2-jquery.fancybox.min.css?v=1.6.6" />
    <link rel="stylesheet" href="/css/style.css?v=1.6.6">
    <!--  -->
     <script type="text/javascript" src="/js/custom/articlecost.js?v=1.6.6"></script> 
    <link rel="stylesheet" href="/css/third-party/gitalk.css?v=1.6.6"> 
    <script type="text/javascript">
        // Data Center
        var DC = {
            reward:	true,
            lv: JSON.parse('{"enable":false,"app_id":null,"app_key":null,"icon":true}'),
            v: JSON.parse('{"enable":false,"appid":null,"appkey":null,"notify":true,"verify":true,"placeholder":"give me some sugers plz...","avatar":"wavatar"}')
        };
    </script>
    <script type="text/javascript">window.lazyScripts=[];</script>
<meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="WeiyiGeek Blog" type="application/atom+xml">
</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="">
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap">
      
      <img src="/img/brand.jpg" class="brand-bg" alt="WeiyiGeek-backgroud">
      
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg" alt="WeiyiGeek-å¤´åƒ">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">WeiyiGeek</h5>
          <a href="mailto:master@weiyigeek.top" title="master@weiyigeek.top" class="mail">
            <span>m</span><span>a</span><span>s</span><span>t</span><span>e</span><span>r</span><span>@</span><span>w</span><span>e</span><span>i</span><span>y</span><span>i</span><span>g</span><span>e</span><span>e</span><span>k</span><span>.</span><span>t</span><span>o</span><span>p</span>
          </a>
        </hgroup>
        
        <ul class="menu-link">
          
              <li>
                <a href="https://weiyigeek.top/img/wechat-search.png" target="_blank">
                  <i class="icon icon-lg icon-wechat"></i>
                </a>
              </li>
            
              <li>
                <a href="https://github.com/weiyigeek" target="_blank">
                  <i class="icon icon-lg icon-github"></i>
                </a>
              </li>
            
              <li>
                <a href="https://t.me/WeiyiGeek" target="_blank">
                  <i class="icon icon-lg icon-telegram"></i>
                </a>
              </li>
            
              <li>
                <a href="https://twitter.com/WeiyiGeek" target="_blank">
                  <i class="icon icon-lg icon-twitter"></i>
                </a>
              </li>
            
              <li>
                <a href="https://weibo.com/615643678" target="_blank">
                  <i class="icon icon-lg icon-weibo"></i>
                </a>
              </li>
            
        </ul>
        
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                é¦–é¡µ
              </a>
            </li>
        
            <li class="">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                æ–‡ç« åˆ†ç±»
              </a>
            </li>
        
            <li class="">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                æ–‡ç« æ ‡ç­¾
              </a>
            </li>
        
            <li class="">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                æ–‡ç« å½’æ¡£
              </a>
            </li>
        
            <li class="">
              <a href="/books"  >
                <i class="icon icon-lg icon-book"></i>
                å­¦ä¹ ä¹¦ç±
              </a>
            </li>
        
            <li class="">
              <a href="/about"  >
                <i class="icon icon-lg icon-user"></i>
                å…³äºä½œè€…
              </a>
            </li>
        
            <li class="">
              <a href="/links"  >
                <i class="icon icon-lg icon-link"></i>
                ç«™ç‚¹å¯¼èˆª
              </a>
            </li>
        
            <li class="">
              <a href="https://weiyigeek.top/img/wechat-search.png" target="_blank" >
                <i class="icon icon-lg icon-wechat"></i>
                å…¬ä¼—è´¦å·
              </a>
            </li>
        
            <li class="">
              <a href="https://space.bilibili.com/385802642" target="_blank" >
                <i class="icon icon-lg icon-youtube-play"></i>
                å“”å“©å“”å“©
              </a>
            </li>
        
            <li class="">
              <a href="https://github.com/weiyigeek" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="">
              <a href="https://twitter.com/WeiyiGeek" target="_blank" >
                <i class="icon icon-lg icon-twitter"></i>
                Twitter
              </a>
            </li>
        
            <li class="">
              <a href="https://weibo.com/615643678" target="_blank" >
                <i class="icon icon-lg icon-weibo"></i>
                Weibo
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row clearfix">
        <a href="javascript:;" class="header-icon pull-left waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">
            <span>5.Goç¼–ç¨‹å¿«é€Ÿå…¥é—¨å­¦ä¹ </span>
            
        </div>

        
        <a href="javascript:;" id="site_search_btn" class="header-icon pull-right waves-effect waves-circle waves-light">
            <i class="icon icon-lg icon-search"></i>
        </a>
        

        
            <a href="/atom.xml" class="header-icon pull-right waves-effect waves-circle waves-light">
                <i class="icon icon-lg icon-rss"></i>
            </a>
        
    </div>
</header>
<header class="content-header post-header">
    <img src="/img/banner.jpg" class="header-bg" alt="æ–‡ç« å¤´éƒ¨èƒŒæ™¯">
    <div class="container fade-scale">
        <h1 class="title">5.Goç¼–ç¨‹å¿«é€Ÿå…¥é—¨å­¦ä¹ </h1>
        <h5 class="subtitle">
            
                <time datetime="2020-04-23T03:16:58.000Z" itemprop="datePublished" class="page-time">
  2020-04-23
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Development/">Development</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Development/Programming/">Programming</a></li></ul></li></ul>


            
        </h5>
        
    </div>
    

</header>

<div id="site_search">
    <div class="search-title clearfix">
        <span class="pull-left">
          <i class="icon icon-lg icon-search"></i>
        </span>
        <input type="text" id="local-search-input" name="q" results="0" placeholder="search my blog..." class="form-control pull-left"/>
        <a href="javascript:;" class="close pull-right waves-effect waves-circle waves-light">
          <i class="icon icon-lg icon-close"></i>
        </a>
    </div>
    <div id="local-search-result"></div>
</div>


<div class="container body-wrap">
    <article id="post-ç¼–ç¨‹ä¸–ç•Œ/Go/5.Goç¼–ç¨‹å¿«é€Ÿå…¥é—¨å­¦ä¹ "
  class="post-article article-type-post" itemprop="blogPost">
    <div class="post-card">
        <h1 class="post-card-title">5.Goç¼–ç¨‹å¿«é€Ÿå…¥é—¨å­¦ä¹ </h1>
        <div class="post-meta">
            <time class="post-time" title="2020-04-23 11:16:58" datetime="2020-04-23T03:16:58.000Z"  itemprop="datePublished">2020-04-23</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Development/">Development</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Development/Programming/">Programming</a></li></ul></li></ul>



            

            


            
        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            
            <p>[TOC]</p>
<a id="more"></a>
<h2 id="0x01-Goè¯­è¨€åŸºç¡€ä¹‹é”™è¯¯å¤„ç†"><a href="#0x01-Goè¯­è¨€åŸºç¡€ä¹‹é”™è¯¯å¤„ç†" class="headerlink" title="0x01 Goè¯­è¨€åŸºç¡€ä¹‹é”™è¯¯å¤„ç†"></a>0x01 Goè¯­è¨€åŸºç¡€ä¹‹é”™è¯¯å¤„ç†</h2><p>æè¿°: Goè¯­è¨€ä¸­ç›®å‰(1.16 ç‰ˆæœ¬ä¸­)æ˜¯æ²¡æœ‰å¼‚å¸¸å¤„ç†æœºåˆ¶(<code>Tips ï¼šè¯´æ˜¯åœ¨2.xç‰ˆæœ¬ä¸­å°†ä¼šåŠ å…¥å¼‚å¸¸å¤„ç†æœºåˆ¶</code>)ï¼Œä½†æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>erroræ¥å£å®šä¹‰</code>ä»¥åŠ<code>panic</code>/<code>recover</code>å‡½æ•°æ¥è¿›è¡Œå¼‚å¸¸é”™è¯¯å¤„ç†ã€‚</p>
<h3 id="1-error-æ¥å£å®šä¹‰"><a href="#1-error-æ¥å£å®šä¹‰" class="headerlink" title="1.error æ¥å£å®šä¹‰"></a>1.error æ¥å£å®šä¹‰</h3><p>æè¿°: åœ¨Golangä¸­åˆ©ç”¨<code>errorç±»å‹</code>å®ç°äº†erroræ¥å£ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡<code>errors.New</code>æˆ–è€…<code>fmt.Errorf</code>æ¥å¿«é€Ÿåˆ›å»ºé”™è¯¯å®ä¾‹ã€‚</p>
<p>ä¸»è¦åº”ç”¨åœºæ™¯: åœ¨ Go è¯­è¨€ä¸­ï¼Œé”™è¯¯æ˜¯å¯ä»¥é¢„æœŸçš„ï¼Œå¹¶ä¸”ä¸æ˜¯éå¸¸ä¸¥é‡ï¼Œä¸ä¼šå½±å“ç¨‹åºçš„è¿è¡Œã€‚å¯¹äºè¿™ç±»é—®é¢˜å¯ä»¥ç”¨è¿”å›é”™è¯¯ç»™è°ƒç”¨è€…çš„æ–¹æ³•ï¼Œè®©è°ƒç”¨è€…è‡ªå·±å†³å®šå¦‚ä½•å¤„ç†ï¼Œé€šå¸¸é‡‡ç”¨ error æ¥å£è¿›è¡Œå®ç°ã€‚</p>
<p>erroræ¥å£å®šä¹‰:<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> error <span class="keyword">interface</span> &#123;</span><br><span class="line">  Error() <span class="keyword">string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Goè¯­è¨€çš„æ ‡å‡†åº“ä»£ç åŒ…errorsæ–¹æ³•ï¼š<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ–¹å¼1.åœ¨errorsåŒ…ä¸­çš„Newæ–¹æ³•ï¼ˆGo 1.13 ç‰ˆæœ¬ï¼‰ã€‚</span></span><br><span class="line"><span class="keyword">package</span> errors</span><br><span class="line"><span class="comment">// goæä¾›äº†errorStringç»“æ„ä½“ï¼Œå…¶åˆ™å®ç°äº†erroræ¥å£</span></span><br><span class="line"><span class="keyword">type</span> errorString <span class="keyword">struct</span> &#123;</span><br><span class="line">  text <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(e *errorString)</span> <span class="title">Error</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line">  <span class="keyword">return</span> e.text</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨errorsåŒ…ä¸­ï¼Œè¿˜æä¾›äº†Newå‡½æ•°ï¼Œæ¥å®ä¾‹åŒ–errorStringï¼Œå¦‚ä¸‹ï¼š</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">New</span><span class="params">(text <span class="keyword">string</span>)</span> <span class="title">error</span></span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &amp;errorString&#123;text&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹å¼2.å¦ä¸€ä¸ªå¯ä»¥ç”Ÿæˆerrorç±»å‹å€¼çš„æ–¹æ³•æ˜¯è°ƒç”¨fmtåŒ…ä¸­çš„Errorfå‡½æ•°(Go 1.13 ç‰ˆæœ¬ä»¥å)</span></span><br><span class="line"><span class="keyword">package</span> fmt</span><br><span class="line"><span class="keyword">import</span> <span class="string">"errors"</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Errorf</span><span class="params">(format <span class="keyword">string</span>, args ...<span class="keyword">interface</span>&#123;&#125;)</span> <span class="title">error</span></span>&#123;</span><br><span class="line">  <span class="keyword">return</span> errors.New(Sprintf(format,args...))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>é‡‡ç”¨ errors åŒ…ä¸­è£…é¥°ä¸€ä¸ªé”™è¯¯;<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">errors.Unwrap(err error)	<span class="comment">//é€šè¿‡ errors.Unwrap å‡½æ•°å¾—åˆ°è¢«åµŒå¥—çš„ errorã€‚	</span></span><br><span class="line">errors.Is(err, target error)	<span class="comment">//ç”¨æ¥åˆ¤æ–­ä¸¤ä¸ª error æ˜¯å¦æ˜¯åŒä¸€ä¸ª	</span></span><br><span class="line">errors.As(err error, target <span class="keyword">interface</span>&#123;&#125;)	<span class="comment">//error æ–­è¨€</span></span><br></pre></td></tr></table></figure></p>
<p><br></p>
<p><strong>å®é™…ç¤ºä¾‹1:</strong><br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">"errors"</span></span><br><span class="line">  <span class="string">"fmt"</span></span><br><span class="line">  <span class="string">"math"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// é”™è¯¯å¤„ç†</span></span><br><span class="line"><span class="comment">// 1.Error</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">demo1</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="comment">// 1.å£°æ˜å¹¶åˆå§‹åŒ–ä¸ºerrorç±»å‹</span></span><br><span class="line">  <span class="keyword">var</span> errNew error = errors.New(<span class="string">"# é”™è¯¯ä¿¡æ¯æ¥è‡ª errors.New æ–¹æ³•ã€‚"</span>)</span><br><span class="line">  fmt.Println(errNew)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2.è°ƒç”¨æ ‡å‡†åº“ä¸­Errorfæ–¹æ³•</span></span><br><span class="line">  errorfFun := fmt.Errorf(<span class="string">"- %s"</span>, <span class="string">"é”™è¯¯ä¿¡æ¯æ¥è‡ª fmt.Errorf æ–¹æ³•ã€‚"</span>)</span><br><span class="line">  fmt.Println(errorfFun)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 3.å®é™…æ¡ˆä¾‹</span></span><br><span class="line">  result, err := <span class="function"><span class="keyword">func</span><span class="params">(a, b <span class="keyword">float64</span>)</span> <span class="params">(ret <span class="keyword">float64</span>, err error)</span></span> &#123;</span><br><span class="line">    err = <span class="literal">nil</span></span><br><span class="line">    <span class="keyword">if</span> b == <span class="number">0</span> &#123;</span><br><span class="line">      err = errors.New(<span class="string">"æ­¤å¤„å¹‚æŒ‡æ•°ä¸èƒ½ä¸º0å€¼,å…¶ç»“æœéƒ½ä¸º1"</span>)</span><br><span class="line">      ret = <span class="number">1</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      ret = math.Pow(a, b)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;(<span class="number">5</span>, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    fmt.Println(<span class="string">"# è¾“å‡ºé”™è¯¯ä¿¡æ¯:"</span>, err)</span><br><span class="line">    fmt.Printf(<span class="string">"5 ^ 0 = %v"</span>, result)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    fmt.Printf(<span class="string">"5 ^ 2 = %v"</span>, result)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  demo1()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>æ‰§è¡Œç»“æœ:<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># é”™è¯¯ä¿¡æ¯æ¥è‡ª errors.New æ–¹æ³•ã€‚</span><br><span class="line">- é”™è¯¯ä¿¡æ¯æ¥è‡ª fmt.Errorf æ–¹æ³•ã€‚</span><br><span class="line"># è¾“å‡ºé”™è¯¯ä¿¡æ¯: æ­¤å¤„å¹‚æŒ‡æ•°ä¸èƒ½ä¸º<span class="number">0</span>å€¼,å…¶ç»“æœéƒ½ä¸º<span class="number">1</span></span><br><span class="line"><span class="number">5</span> ^ <span class="number">0</span> = <span class="number">1</span></span><br></pre></td></tr></table></figure></p>
<p><br></p>
<p><strong>å®é™…ç¤ºä¾‹2:</strong><br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰ä¸€ä¸ª DivideError ç»“æ„ (å€¼å¾—å­¦ä¹ )</span></span><br><span class="line"><span class="keyword">type</span> DivideError <span class="keyword">struct</span> &#123;</span><br><span class="line">  dividee <span class="keyword">int</span></span><br><span class="line">  divider <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å®ç° `error` æ¥å£ (å€¼å¾—å­¦ä¹ )</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(de *DivideError)</span> <span class="title">Error</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line">  strFormat := <span class="string">`</span></span><br><span class="line"><span class="string">  Cannot proceed, the divider is zero.</span></span><br><span class="line"><span class="string">  dividee: %d</span></span><br><span class="line"><span class="string">  divider: 0</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line">  <span class="keyword">return</span> fmt.Sprintf(strFormat, de.dividee)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰ `int` ç±»å‹é™¤æ³•è¿ç®—çš„å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Divide</span><span class="params">(varDividee <span class="keyword">int</span>, varDivider <span class="keyword">int</span>)</span> <span class="params">(result <span class="keyword">int</span>, errorMsg <span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line">  <span class="keyword">if</span> varDivider == <span class="number">0</span> &#123;</span><br><span class="line">    dData := DivideError&#123;</span><br><span class="line">            dividee: varDividee,</span><br><span class="line">            divider: varDivider,</span><br><span class="line">    &#125;</span><br><span class="line">    errorMsg = dData.Error()</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> varDividee / varDivider, <span class="string">""</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="comment">// æ­£å¸¸æƒ…å†µ</span></span><br><span class="line">  <span class="keyword">if</span> result, errorMsg := Divide(<span class="number">100</span>, <span class="number">10</span>); errorMsg == <span class="string">""</span> &#123;</span><br><span class="line">    fmt.Println(<span class="string">"100/10 = "</span>, result)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// å½“é™¤æ•°ä¸ºé›¶çš„æ—¶å€™ä¼šè¿”å›é”™è¯¯ä¿¡æ¯</span></span><br><span class="line">  <span class="keyword">if</span> _, errorMsg := Divide(<span class="number">100</span>, <span class="number">0</span>); errorMsg != <span class="string">""</span> &#123;</span><br><span class="line">    fmt.Println(<span class="string">"errorMsg is: "</span>, errorMsg)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>æ‰§è¡Œç»“æœ:<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">100</span>/<span class="number">10</span> =  <span class="number">10</span></span><br><span class="line">errorMsg is:  </span><br><span class="line">  Cannot proceed, the divider is zero.</span><br><span class="line">  dividee: <span class="number">100</span></span><br><span class="line">  divider: <span class="number">0</span></span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h3 id="2-panic-å‡½æ•°"><a href="#2-panic-å‡½æ•°" class="headerlink" title="2.panic å‡½æ•°"></a>2.panic å‡½æ•°</h3><p>æè¿°: å½“é‡åˆ°æŸç§ä¸¥é‡çš„é—®é¢˜æ—¶éœ€è¦ç›´æ¥é€€å‡ºç¨‹åºæ—¶ï¼Œåº”è¯¥è°ƒç”¨panicå‡½æ•°ä»è€Œå¼•å‘çš„panicå¼‚å¸¸, æ‰€ä»¥panicç”¨äºä¸å¯æ¢å¤çš„é”™è¯¯ç±»ä¼¼äºJavaçš„Errorã€‚</p>
<p>å…·ä½“æµç¨‹ï¼šæ˜¯å½“panicå¼‚å¸¸å‘ç”Ÿæ—¶ï¼Œç¨‹åºä¼šä¸­æ–­è¿è¡Œï¼Œå¹¶ç«‹å³æ‰§è¡Œåœ¨è¯¥goroutineï¼Œéšåç¨‹åºå´©æºƒå¹¶è¾“å‡ºæ—¥å¿—ä¿¡æ¯ã€‚æ—¥å¿—ä¿¡æ¯åŒ…æ‹¬panicã€ä»¥åŠvalueçš„å‡½æ•°è°ƒç”¨çš„å †æ ˆè·Ÿè¸ªä¿¡æ¯ã€‚</p>
<p>panic å‡½æ•°è¯­æ³•å®šä¹‰:<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">panic</span><span class="params">(v <span class="keyword">interface</span>&#123;&#125;)</span></span></span><br></pre></td></tr></table></figure></p>
<p>Tips : panicå‡½æ•°æ¥å—ä»»ä½•å€¼ä½œä¸ºå‚æ•°</p>
<p><br></p>
<p><strong>ç¤ºä¾‹1.æ•°ç»„è¶Šç•Œä¼šè‡ªåŠ¨è°ƒç”¨panic</strong><br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestA</span><span class="params">()</span></span> &#123;</span><br><span class="line">  fmt.Println(<span class="string">"func TestA&#123;&#125;"</span>)	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestB</span><span class="params">(x <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">  <span class="keyword">var</span> a [<span class="number">10</span>]<span class="keyword">int</span></span><br><span class="line">  a[x] = <span class="number">111</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestC</span><span class="params">()</span></span> &#123;</span><br><span class="line">  fmt.Println(<span class="string">"func TestC()"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">TestA()</span><br><span class="line">TestB(<span class="number">20</span>) <span class="comment">//å‘ç”Ÿå¼‚å¸¸,ä¸­æ–­ç¨‹åº</span></span><br><span class="line">TestC()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>æ‰§è¡Œç»“æœ:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; func TestA&#123;&#125;</span><br><span class="line">panic: runtime error: index out of rang</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<p><strong>ç¤ºä¾‹2.è°ƒç”¨panicå‡½æ•°å¼•å‘çš„panicå¼‚å¸¸</strong><br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">A</span><span class="params">()</span></span> &#123;</span><br><span class="line">  fmt.Println(<span class="string">"æˆ‘æ˜¯Aå‡½æ•° - æ­£å¸¸æ‰§è¡Œ"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">B</span><span class="params">()</span></span> &#123;</span><br><span class="line">  fmt.Println(<span class="string">"æˆ‘æ˜¯Bå‡½æ•° - æ­£åœ¨æ‰§è¡Œ"</span>)</span><br><span class="line">  <span class="built_in">panic</span>(<span class="string">"func B():panic"</span>)</span><br><span class="line">  fmt.Println(<span class="string">"æˆ‘æ˜¯Bå‡½æ•° - ç»“æŸæ‰§è¡Œ"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">C</span><span class="params">()</span></span> &#123;</span><br><span class="line">  fmt.Println(<span class="string">"æˆ‘æ˜¯cå‡½æ•° - æ­£åœ¨æ‰§è¡Œ"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">demo2</span><span class="params">()</span></span> &#123;</span><br><span class="line">  A()</span><br><span class="line">  B() <span class="comment">//å‘ç”Ÿå¼‚å¸¸,ä¸­æ–­ç¨‹åº</span></span><br><span class="line">  C()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>æ‰§è¡Œç»“æœ:<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">æˆ‘æ˜¯Aå‡½æ•° - æ­£å¸¸æ‰§è¡Œ</span><br><span class="line">æˆ‘æ˜¯Bå‡½æ•° - æ­£åœ¨æ‰§è¡Œ</span><br><span class="line">å‘ç”Ÿå¼‚å¸¸: <span class="built_in">panic</span></span><br><span class="line"><span class="string">"func B():panic"</span></span><br><span class="line">Stack:</span><br><span class="line">  <span class="number">2</span>  <span class="number">0x00000000004b69a5</span> in main.B</span><br><span class="line">      at /home/weiyigeek/app/project/<span class="keyword">go</span>/src/weiyigeek.top/studygo/Day02/<span class="number">05</span>error.<span class="keyword">go</span>:<span class="number">47</span></span><br><span class="line">  <span class="number">3</span>  <span class="number">0x00000000004b6a8a</span> in main.demo2</span><br><span class="line">      at /home/weiyigeek/app/project/<span class="keyword">go</span>/src/weiyigeek.top/studygo/Day02/<span class="number">05</span>error.<span class="keyword">go</span>:<span class="number">57</span></span><br><span class="line">  <span class="number">4</span>  <span class="number">0x00000000004b6ac5</span> in main.main</span><br><span class="line">      at /home/weiyigeek/app/project/<span class="keyword">go</span>/src/weiyigeek.top/studygo/Day02/<span class="number">05</span>error.<span class="keyword">go</span>:<span class="number">63</span></span><br></pre></td></tr></table></figure><br><figure class="image-box">
                <a rel=5.Goç¼–ç¨‹å¿«é€Ÿå…¥é—¨å­¦ä¹  href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/5/20210816203155.png" target="_blank" title="WeiyiGeek.panicå¼‚å¸¸" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/5/20210816203155.png" alt="WeiyiGeek.panicå¼‚å¸¸" title="" class=""></a>
                <p>WeiyiGeek.panicå¼‚å¸¸</p>
            </figure></p>
<p><strong>Q: ä»€ä¹ˆæ—¶å€™ä½¿ç”¨Errorï¼Œä»€ä¹ˆæ—¶å€™ä½¿ç”¨Panic?</strong></p>
<ul>
<li>å¯¹äºçœŸæ­£æ„å¤–çš„æƒ…å†µï¼Œé‚£äº›è¡¨ç¤ºä¸å¯æ¢å¤çš„ç¨‹åºé”™è¯¯ï¼Œä¾‹å¦‚<code>ç´¢å¼•è¶Šç•Œã€ä¸å¯æ¢å¤çš„ç¯å¢ƒé—®é¢˜ã€æ ˆæº¢å‡ºã€æ•°æ®åº“è¿æ¥åéœ€æ“ä½œ</code>ï¼Œæˆ‘ä»¬æ‰ä½¿ç”¨ panicã€‚</li>
<li>å¯¹äºå…¶ä»–çš„é”™è¯¯æƒ…å†µï¼Œæˆ‘ä»¬åº”è¯¥æ˜¯æœŸæœ›ä½¿ç”¨ error æ¥è¿›è¡Œåˆ¤å®šã€‚</li>
</ul>
<p><br/></p>
<h3 id="3-recover-å‡½æ•°"><a href="#3-recover-å‡½æ•°" class="headerlink" title="3.recover å‡½æ•°"></a>3.recover å‡½æ•°</h3><p>æè¿°: panicå¼‚å¸¸ä¼šå¯¼è‡´ç¨‹åºå´©æºƒ,è€Œrecoverå‡½æ•°ä¸“é—¨ç”¨äºâ€œæ•è·â€è¿è¡Œæ—¶çš„panicå¼‚å¸¸,å®ƒå¯ä»¥æ˜¯å½“å‰ç¨‹åºä»è¿è¡Œæ—¶panicçš„çŠ¶æ€ä¸­æ¢å¤å¹¶é‡æ–°è·å¾—æµç¨‹æ§åˆ¶æƒã€‚</p>
<p>é€šå¸¸æˆ‘ä»¬ä¼šä½¿ç”¨ Recover æ•è· Panic å¼‚å¸¸ï¼Œä¾‹å¦‚Javaä¸­åˆ©ç”¨<code>Catch Throwable</code>æ¥è¿›è¡Œæ•è·å¼‚å¸¸ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Java</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125; <span class="keyword">catch</span> (Throwable t) &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// C++</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125; <span class="keyword">catch</span>() &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>panic å‡½æ•°è¯­æ³•å®šä¹‰:<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">recover</span><span class="params">()</span> <span class="title">interface</span></span>&#123;&#125;</span><br></pre></td></tr></table></figure></p>
<p>Tips: åœ¨æœªå‘ç”Ÿpanicæ—¶è°ƒç”¨recoverä¼šè¿”å›nilã€‚</p>
<p><br/></p>
<p><strong>æµç¨‹è¯´æ˜:</strong> å¦‚æœè°ƒç”¨äº†å†…ç½®å‡½æ•°recover,å¹¶ä¸”å®šä¹‰è¯¥deferè¯­å¥çš„å‡½æ•°å‘ç”Ÿäº†panicå¼‚å¸¸,recoverä¼šä½¿ç¨‹åºä»panicä¸­æ¢å¤,å¹¶è¿”å›panic valueã€‚å¯¼è‡´panicå¼‚å¸¸çš„å‡½æ•°ä¸ä¼šç»§ç»­è¿è¡Œï¼Œä½†èƒ½æ­£å¸¸è¿”å›ã€‚</p>
<p><br/></p>
<p><strong>ç¤ºä¾‹1:panicä¸recoverè”åˆä½¿ç”¨ï¼Œæ­¤å¤„é‡‡ç”¨ panic æ¼”ç¤ºçš„ä»£ç ä¸­çš„Bå‡½æ•°è¿›è¡Œç»§ç»­ä¿®æ”¹</strong><br>æè¿°: åœ¨Goè¯­è¨€ä¸­å¯ä»¥é€šè¿‡deferå®šä¹‰çš„å‡½æ•°å»æ‰§è¡Œä¸€äº›é”™è¯¯æ¢å¤çš„è¡Œä¸º<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">recoverB</span><span class="params">()</span> <span class="params">(err error)</span></span> &#123;</span><br><span class="line">  fmt.Println(<span class="string">"æˆ‘æ˜¯recoverB å‡½æ•° - æ­£åœ¨æ‰§è¡Œ"</span>)</span><br><span class="line">  <span class="comment">// å¿…é¡»æ˜¯ defer è¯­å¥ä¸­ä»¥åŠåœ¨panicå‡½æ•°å‰</span></span><br><span class="line">  <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">    x := <span class="built_in">recover</span>()</span><br><span class="line">    <span class="keyword">if</span> x != <span class="literal">nil</span> &#123;</span><br><span class="line">      err = fmt.Errorf(<span class="string">"# 1.è¿›è¡Œ recoverï¼ˆæ¢å¤ï¼‰ Panic å¯¼è‡´çš„ç¨‹åºå¼‚å¸¸,ä»æ­¤ä¹‹åå°†ä¼šç»§ç»­æ‰§è¡Œåç»­ä»£ç ï¼š\n%v"</span>, x)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;() <span class="comment">// æ­¤å¤„åˆ©ç”¨åŒ¿åå‡½æ•°</span></span><br><span class="line">  <span class="comment">//panic("# 2.recoverB å‡½æ•°ä¸­æ•è· Panic")</span></span><br><span class="line">  <span class="built_in">panic</span>(errors.New(<span class="string">"# 2.recoverB å‡½æ•°ä¸­å‡ºç° Panic"</span>))</span><br><span class="line">  fmt.Println(<span class="string">"æˆ‘æ˜¯recoverB å‡½æ•° - ç»“æŸæ‰§è¡Œ"</span>) <span class="comment">// æ— æ³•è®¿é—®çš„ä»£ç </span></span><br><span class="line">  <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">demo3</span><span class="params">()</span></span> &#123;</span><br><span class="line">  A()</span><br><span class="line">  err := recoverB()</span><br><span class="line">  <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    fmt.Println(<span class="string">"#recoverB è¾“å‡ºçš„ä¿¡æ¯ï¼š"</span>, err)</span><br><span class="line">  &#125;</span><br><span class="line">  C()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>æ‰§è¡Œç»“æœï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">æˆ‘æ˜¯Aå‡½æ•° - æ­£å¸¸æ‰§è¡Œ</span><br><span class="line">æˆ‘æ˜¯recoverB å‡½æ•° - æ­£åœ¨æ‰§è¡Œ</span><br><span class="line"><span class="comment"># recoverB è¾“å‡ºçš„ä¿¡æ¯ï¼š # 1.è¿›è¡Œ recoverï¼ˆæ¢å¤ï¼‰ Panic å¯¼è‡´çš„ç¨‹åºå¼‚å¸¸,ä»æ­¤ä¹‹åå°†ä¼šç»§ç»­æ‰§è¡Œåç»­ä»£ç ï¼š</span></span><br><span class="line"><span class="comment"># 2.recoverB å‡½æ•°ä¸­å‡ºç° Panic</span></span><br><span class="line">æˆ‘æ˜¯cå‡½æ•° - æ­£åœ¨æ‰§è¡Œ</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<p><strong>ç¤ºä¾‹ 2.recoveræ•è·å¼‚å¸¸åçš„å¼‚å¸¸ï¼Œä¸èƒ½å†æ¬¡è¢«recoveræ•è·ã€‚</strong><br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">demo4</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="comment">// é‡‡ç”¨åŒ¿åå‡½æ•°è¿›è¡Œç«‹å³æ‰§è¡Œè¯¥å‡½æ•°</span></span><br><span class="line">  <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123; <span class="comment">//   å£°æ˜deferï¼Œ</span></span><br><span class="line">    fmt.Println(<span class="string">"----è°ƒç”¨ defer func1 start----"</span>)</span><br><span class="line">    err := <span class="built_in">recover</span>() <span class="comment">// æ­¤å¤„è¾“å‡ºä¸º nil ï¼Œå› ä¸ºpanicåªèƒ½è¢« recover æ•è·ä¸€æ¬¡</span></span><br><span class="line">    fmt.Printf(<span class="string">"# ç¬¬äºŒæ¬¡ æ•è· : %#v \n"</span>, err)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">      fmt.Println(err)</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println(<span class="string">"----è°ƒç”¨ defer func1 end----"</span>)</span><br><span class="line">  &#125;()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123; <span class="comment">//   å£°æ˜deferï¼Œå‹æ ˆæ“ä½œåè¿›å…ˆå‡ºã€‚</span></span><br><span class="line">    fmt.Println(<span class="string">"----è°ƒç”¨ defer func2 start----"</span>)</span><br><span class="line">    <span class="keyword">if</span> err := <span class="built_in">recover</span>(); err != <span class="literal">nil</span> &#123;</span><br><span class="line">      fmt.Println(<span class="string">"# ç¬¬ä¸€æ¬¡ æ•è·:"</span>, err) <span class="comment">// è¿™é‡Œçš„errå…¶å®å°±æ˜¯panicä¼ å…¥çš„å†…å®¹</span></span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println(<span class="string">"----è°ƒç”¨ defer func2 end----"</span>)</span><br><span class="line">  &#125;()</span><br><span class="line"></span><br><span class="line">  <span class="built_in">panic</span>(<span class="string">"panic å¼‚å¸¸ æŠ›å‡º æµ‹è¯•ï¼"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>æ‰§è¡Œç»“æœ:<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">----è°ƒç”¨ <span class="keyword">defer</span> func2 start----</span><br><span class="line"># ç¬¬ä¸€æ¬¡ æ•è·: <span class="built_in">panic</span> å¼‚å¸¸ æŠ›å‡º æµ‹è¯•ï¼</span><br><span class="line">----è°ƒç”¨ <span class="keyword">defer</span> func2 end----</span><br><span class="line">----è°ƒç”¨ <span class="keyword">defer</span> func1 start----</span><br><span class="line"># ç¬¬äºŒæ¬¡ æ•è· : &lt;<span class="literal">nil</span>&gt; </span><br><span class="line">----è°ƒç”¨ <span class="keyword">defer</span> func1 end----</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<p><strong>Q: panic() ä¸ recover() ä½ç½®åŒºåˆ«?</strong><br>ç­”: panicå‡½æ•°å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹å¼•å‘(ä½†panicé€€å‡ºå‰ä¼šæ‰§è¡ŒdeferæŒ‡å®šçš„å†…å®¹)ï¼Œä½†recoverå‡½æ•°<code>åªæœ‰åœ¨deferè°ƒç”¨çš„å‡½æ•°ä¸­æœ‰æ•ˆ</code>å¹¶ä¸”ä¸€å®šè¦<code>ä½äºpanicè¯­å¥ä¹‹å‰</code>ã€‚</p>
<p>TIPS : éå¸¸æ³¨æ„ä¸‹é¢è¿™ç§â€œé”™è¯¯æ–¹å¼â€, ä»–å¯èƒ½ä¼šå½¢æˆåƒµå°¸æœåŠ¡è¿›ç¨‹ï¼Œå¯¼è‡´<code>Health Check</code>å¤±æ•ˆã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">defer <span class="function"><span class="title">func</span></span>() &#123;</span><br><span class="line">  <span class="keyword">if</span> err := recover(); err != nil &#123;</span><br><span class="line">    Log.Error(<span class="string">"Recovered Panic"</span>, err)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;()</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<p><strong>Q: panic å’Œ os.Exit è”ç”¨æ—¶å¯¹recoverçš„å½±å“</strong></p>
<ul>
<li>os.Exit é€€å‡ºæ—¶ä¸ä¼šè°ƒç”¨deferæŒ‡å®šçš„å‡½æ•°.</li>
<li>os.Exit é€€å‡ºæ—¶ä¸ä¼šè¾“å‡ºå½“å‰è°ƒç”¨æ ˆä¿¡æ¯.</li>
</ul>
<p><br></p>
<h3 id="4-é”™è¯¯å¤„ç†æœ€ä½³å®è·µ"><a href="#4-é”™è¯¯å¤„ç†æœ€ä½³å®è·µ" class="headerlink" title="4.é”™è¯¯å¤„ç†æœ€ä½³å®è·µ"></a>4.é”™è¯¯å¤„ç†æœ€ä½³å®è·µ</h3><ul>
<li>1ã€é¢„å®šä¹‰é”™è¯¯ï¼Œcodeé‡Œåˆ¤æ–­</li>
<li>2ã€åŠæ—©å¤±è´¥ï¼Œé¿å…åµŒå¥—</li>
</ul>
<hr>
<h2 id="0x02-Goè¯­è¨€åŸºç¡€ä¹‹ç»“æ„ä½“"><a href="#0x02-Goè¯­è¨€åŸºç¡€ä¹‹ç»“æ„ä½“" class="headerlink" title="0x02 Goè¯­è¨€åŸºç¡€ä¹‹ç»“æ„ä½“"></a>0x02 Goè¯­è¨€åŸºç¡€ä¹‹ç»“æ„ä½“</h2><p>æè¿°: Goè¯­è¨€ä¸­æ²¡æœ‰<code>â€œç±»â€</code>çš„æ¦‚å¿µï¼Œä¹Ÿ<code>ä¸æ”¯æŒâ€œç±»â€çš„ç»§æ‰¿</code>ç­‰é¢å‘å¯¹è±¡çš„æ¦‚å¿µã€‚ä½† Goè¯­è¨€ä¸­<code>é€šè¿‡ç»“æ„ä½“çš„å†…åµŒ</code>å†<code>é…åˆæ¥å£</code>æ¯”é¢å‘å¯¹è±¡å…·<code>æœ‰æ›´é«˜çš„æ‰©å±•æ€§</code>å’Œ<code>çµæ´»æ€§</code>ã€‚</p>
<ul>
<li><p>Goè¯­è¨€ä¸­çš„åŸºç¡€æ•°æ®ç±»å‹å¯ä»¥<code>è¡¨ç¤ºä¸€äº›äº‹ç‰©çš„åŸºæœ¬å±æ€§</code>ï¼Œä½†æ˜¯å½“æˆ‘ä»¬æƒ³è¡¨è¾¾ä¸€ä¸ªäº‹ç‰©çš„å…¨éƒ¨æˆ–éƒ¨åˆ†å±æ€§æ—¶ï¼Œè¿™æ—¶å€™å†ç”¨å•ä¸€çš„åŸºæœ¬æ•°æ®ç±»å‹æ˜æ˜¾å°±æ— æ³•æ»¡è¶³éœ€æ±‚äº†ï¼ˆå±€é™æ€§ï¼‰ã€‚</p>
</li>
<li><p>Goè¯­è¨€æä¾›äº†ä¸€ç§è‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼Œå¯ä»¥å°è£…å¤šä¸ªåŸºæœ¬æ•°æ®ç±»å‹ï¼Œè¿™ç§æ•°æ®ç±»å‹å«ç»“æ„ä½“(è‹±æ–‡åç§°struct), æˆ‘ä»¬<code>å¯ä»¥é€šè¿‡structæ¥å®šä¹‰è‡ªå·±çš„ç±»å‹</code>äº†ã€‚</p>
</li>
</ul>
<p><strong>ç®€å•å¾—è¯´:</strong> ç»“æ„ä½“æ—¶ä¸€ç§æ•°æ®ç±»å‹ï¼Œä¸€ç§æˆ‘ä»¬è‡ªå·±å¯ä»¥ä¿æŒå¤šä¸ªç»´åº¦æ•°æ®çš„ç±»å‹ã€‚ æ‰€ä»¥ä¸å…¶ä»–é«˜çº§ç¼–ç¨‹è¯­è¨€ä¸€æ ·ï¼ŒGoè¯­è¨€ä¹Ÿå¯ä»¥é‡‡ç”¨ç»“æ„ä½“çš„ç‰¹æ€§, å¹¶ä¸”Goè¯­è¨€<code>é€šè¿‡structæ¥å®ç°é¢å‘å¯¹è±¡</code>ã€‚</p>
<p><br></p>
<h3 id="1-ç±»å‹å®šä¹‰"><a href="#1-ç±»å‹å®šä¹‰" class="headerlink" title="1.ç±»å‹å®šä¹‰"></a>1.ç±»å‹å®šä¹‰</h3><p>æè¿°: åœ¨Goè¯­è¨€ä¸­æœ‰ä¸€äº›åŸºæœ¬çš„æ•°æ®ç±»å‹ï¼Œå¦‚<code>stringã€int{}æ•´å‹ã€float{}æµ®ç‚¹å‹ã€booleanå¸ƒå°”</code>ç­‰æ•°æ®ç±»å‹ï¼Œ Goè¯­è¨€ä¸­å¯ä»¥<code>ä½¿ç”¨typeå…³é”®å­—æ¥å®šä¹‰è‡ªå®šä¹‰ç±»å‹</code>(å®é™…ä¸Šå®šä¹‰äº†ä¸€ä¸ªå…¨æ–°çš„ç±»å‹)ã€‚</p>
<p>Tips : æˆ‘ä»¬å¯ä»¥åŸºäºå†…ç½®çš„åŸºæœ¬ç±»å‹å®šä¹‰ï¼Œä¹Ÿå¯ä»¥é€šè¿‡structå®šä¹‰ã€‚</p>
<p><strong>ç¤ºä¾‹æ¼”ç¤º:</strong><br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å°†MyIntå®šä¹‰ä¸ºintç±»å‹</span></span><br><span class="line"><span class="keyword">type</span> MyInt <span class="keyword">int</span></span><br></pre></td></tr></table></figure></p>
<p>é€šè¿‡typeå…³é”®å­—çš„å®šä¹‰ï¼ŒMyIntå°±æ˜¯ä¸€ç§æ–°çš„ç±»å‹ï¼Œå®ƒå…·æœ‰intçš„ç‰¹æ€§ã€‚</p>
<p><br></p>
<h3 id="2-ç±»å‹åˆ«å"><a href="#2-ç±»å‹åˆ«å" class="headerlink" title="2.ç±»å‹åˆ«å"></a>2.ç±»å‹åˆ«å</h3><p>æè¿°: ç±»å‹åˆ«åä»å­—é¢æ„ä¹‰ä¸Šéƒ½å¾ˆå¥½ç†è§£ï¼Œå³ç±»å‹åˆ«åæœ¬ç« ä¸Šä¸åŸç±»å‹ä¸€æ ·, å°±æ¯”å¦‚åƒä¸€ä¸ªå­©å­å°æ—¶å€™æœ‰å°åã€ä¹³åï¼Œä¸Šå­¦åç”¨å­¦åï¼Œè‹±è¯­è€å¸ˆåˆä¼šç»™ä»–èµ·è‹±æ–‡åï¼Œä½†è¿™äº›åå­—éƒ½æŒ‡çš„æ˜¯ä»–æœ¬äººã€‚</p>
<p><strong>ç¤ºä¾‹æ¼”ç¤º:</strong><br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// TypeAliasåªæ˜¯Typeçš„åˆ«åï¼Œæœ¬è´¨ä¸ŠTypeAliasä¸Typeæ˜¯åŒä¸€ä¸ªç±»å‹</span></span><br><span class="line"><span class="keyword">type</span> TypeAlias = Type</span><br></pre></td></tr></table></figure></p>
<p>æˆ‘ä»¬ä¹‹å‰è§è¿‡çš„<code>rune</code>å’Œ<code>byte</code>å°±æ˜¯ç±»å‹åˆ«åï¼Œä»–ä»¬çš„å®šä¹‰å¦‚ä¸‹ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">type</span> byte = uint8</span><br><span class="line"><span class="built_in">type</span> rune = int32</span><br></pre></td></tr></table></figure></p>
<p>Tips: é‡‡ç”¨int32åˆ«ååˆ›å»ºä¸€ä¸ªå˜é‡çš„å‡ ç§æ–¹å¼ã€‚<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> MyInt32 = <span class="keyword">int32</span></span><br><span class="line"><span class="comment">// æ–¹å¼1</span></span><br><span class="line"><span class="keyword">var</span> i MyInt32</span><br><span class="line">i = <span class="number">1024</span></span><br><span class="line"><span class="comment">// æ–¹å¼2</span></span><br><span class="line"><span class="keyword">var</span> j MyInt32 = <span class="number">1024</span></span><br><span class="line"><span class="comment">// æ–¹å¼3</span></span><br><span class="line"><span class="keyword">var</span> k  = MyInt32(<span class="number">1024</span>)</span><br><span class="line"><span class="comment">// æ–¹å¼4</span></span><br><span class="line">l := MyInt32(<span class="number">1024</span>)  <span class="comment">// æ­¤å¤„å¹¶éæ˜¯å‡½æ•°ï¼Œè€Œæ˜¯ä¸€ä¸ªå¼ºåˆ¶ç±»å‹è½¬æ¢è€Œå·²</span></span><br></pre></td></tr></table></figure></p>
<p><br></p>
<p><strong>Q: ç±»å‹å®šä¹‰å’Œç±»å‹åˆ«åæœ‰ä½•åŒºåˆ«?</strong></p>
<blockquote>
<p>ç­”: ç±»å‹åˆ«åä¸ç±»å‹å®šä¹‰è¡¨é¢ä¸Šçœ‹åªæœ‰ä¸€ä¸ªç­‰å·çš„å·®å¼‚ï¼Œæˆ‘ä»¬é€šè¿‡ä¸‹é¢çš„è¿™æ®µä»£ç æ¥ç†è§£å®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ã€‚</p>
</blockquote>
<p><strong>ç¤ºä¾‹æ¼”ç¤º1:</strong><br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.ç±»å‹å®šä¹‰</span></span><br><span class="line"><span class="keyword">type</span> NewInt <span class="keyword">int</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2.ç±»å‹åˆ«å</span></span><br><span class="line"><span class="keyword">type</span> MyInt = <span class="keyword">int</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç±»å‹å®šä¹‰ ä¸ ç±»å‹åˆ«å åŒºåˆ«æ¼”ç¤º</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">demo1</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="comment">// ç±»å‹å®šä¹‰çš„ä½¿ç”¨</span></span><br><span class="line">  <span class="keyword">var</span> i NewInt</span><br><span class="line">  i = <span class="number">1024</span></span><br><span class="line">  fmt.Printf(<span class="string">"Type of i: %T, Value:%v \n"</span>, i, i)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç±»å‹åˆ«åçš„ä½¿ç”¨</span></span><br><span class="line">  <span class="keyword">var</span> j MyInt</span><br><span class="line">  j = <span class="number">2048</span></span><br><span class="line">  fmt.Printf(<span class="string">"Type of j: %T, Value:%v \n"</span>, j, j)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// rune ä¹Ÿæ˜¯ç±»å‹åˆ«ååº•å±‚è¿˜æ˜¯int32ç±»å‹</span></span><br><span class="line">  <span class="keyword">var</span> k <span class="keyword">rune</span></span><br><span class="line">  k = <span class="string">'ä¸­'</span></span><br><span class="line">  fmt.Printf(<span class="string">"Type of j: %T, Value:%c \n"</span>, k, k)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>æ‰§è¡Œç»“æœ:<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Type of i: main.NewInt, Value:<span class="number">1024</span> </span><br><span class="line">Type of j: <span class="keyword">int</span>, Value:<span class="number">2048</span> </span><br><span class="line">Type of j: <span class="keyword">int32</span>, Value:ä¸­</span><br></pre></td></tr></table></figure></p>
<p>ç»“æœæ˜¾ç¤ºè¯´æ˜:</p>
<ul>
<li><code>i</code> å˜é‡çš„ç±»å‹æ˜¯main.NewIntï¼Œè¡¨ç¤ºmainåŒ…ä¸‹å®šä¹‰çš„NewIntç±»å‹ã€‚</li>
<li><code>j</code> å˜é‡çš„ç±»å‹æ˜¯intï¼Œå› MyIntç±»å‹åªä¼šåœ¨ä»£ç ä¸­å­˜åœ¨ï¼Œç¼–è¯‘å®Œæˆæ—¶å¹¶ä¸ä¼šæœ‰MyIntç±»å‹ã€‚</li>
</ul>
<p><br></p>
<h3 id="3-ç»“æ„ä½“çš„å®šä¹‰"><a href="#3-ç»“æ„ä½“çš„å®šä¹‰" class="headerlink" title="3.ç»“æ„ä½“çš„å®šä¹‰"></a>3.ç»“æ„ä½“çš„å®šä¹‰</h3><p>æè¿°: è¯­è¨€å†…ç½®çš„åŸºç¡€æ•°æ®ç±»å‹æ˜¯ç”¨æ¥æè¿°ä¸€ä¸ªå€¼çš„ï¼Œè€Œç»“æ„ä½“æ˜¯ç”¨æ¥æè¿°ä¸€ç»„å€¼çš„ã€‚<code>æ¯”å¦‚ä¸€ä¸ªäººæœ‰åå­—ã€å¹´é¾„å’Œå±…ä½åŸå¸‚ç­‰ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ç§èšåˆå‹çš„æ•°æ®ç±»å‹</code>ã€‚</p>
<p><br></p>
<p>ä½¿ç”¨<code>type</code>å’Œ<code>struct</code>å…³é”®å­—æ¥å®šä¹‰ç»“æ„ä½“ï¼Œå…·ä½“ä»£ç æ ¼å¼å¦‚ä¸‹ï¼š<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> ç±»å‹å <span class="keyword">struct</span> &#123;</span><br><span class="line">  å­—æ®µå å­—æ®µç±»å‹</span><br><span class="line">  å­—æ®µå å­—æ®µç±»å‹</span><br><span class="line">  â€¦</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>å…¶ä¸­:</p>
<ul>
<li>ç±»å‹åï¼šæ ‡è¯†è‡ªå®šä¹‰ç»“æ„ä½“çš„åç§°ï¼Œåœ¨åŒä¸€ä¸ªåŒ…å†…ä¸èƒ½é‡å¤ã€‚</li>
<li>å­—æ®µåï¼šè¡¨ç¤ºç»“æ„ä½“å­—æ®µåã€‚ç»“æ„ä½“ä¸­çš„å­—æ®µåå¿…é¡»å”¯ä¸€ã€‚</li>
<li>å­—æ®µç±»å‹ï¼šè¡¨ç¤ºç»“æ„ä½“å­—æ®µçš„å…·ä½“ç±»å‹ã€‚</li>
</ul>
<p>ä¸¾ä¾‹è¯´æ˜: ä»¥å®šä¹‰ä¸€ä¸ªPersonï¼ˆäººï¼‰ç»“æ„ä½“ä¸ºä¾‹:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ–¹å¼(0)</span></span><br><span class="line"><span class="keyword">var</span> v <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹å¼(1)</span></span><br><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span> &#123;</span><br><span class="line">  name <span class="keyword">string</span></span><br><span class="line">  city <span class="keyword">string</span></span><br><span class="line">  age  <span class="keyword">int8</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹å¼(2): åŒæ ·ç±»å‹çš„å­—æ®µä¹Ÿå¯ä»¥å†™åœ¨ä¸€è¡Œ</span></span><br><span class="line"><span class="keyword">type</span> person1 <span class="keyword">struct</span> &#123;</span><br><span class="line">  name, city <span class="keyword">string</span></span><br><span class="line">  age   <span class="keyword">int8</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Tips : ä¸Šé¢åˆ›å»ºäº†ç»“æ„ä½“ä¸€ä¸ªpersonçš„è‡ªå®šä¹‰ç±»å‹ï¼Œå®ƒæœ‰<code>nameã€cityã€age</code>ä¸‰ä¸ªå­—æ®µï¼Œåˆ†åˆ«è¡¨ç¤ºå§“åã€åŸå¸‚å’Œå¹´é¾„ã€‚è¿™æ ·æˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªpersonç»“æ„ä½“å°±èƒ½å¤Ÿå¾ˆæ–¹ä¾¿çš„åœ¨ç¨‹åºä¸­è¡¨ç¤ºå’Œå­˜å‚¨äººä¿¡æ¯äº†ã€‚</p>
<p><br></p>
<h3 id="4-ç»“æ„ä½“å®ä¾‹åŒ–"><a href="#4-ç»“æ„ä½“å®ä¾‹åŒ–" class="headerlink" title="4.ç»“æ„ä½“å®ä¾‹åŒ–"></a>4.ç»“æ„ä½“å®ä¾‹åŒ–</h3><p>æè¿°: åªæœ‰å½“ç»“æ„ä½“å®ä¾‹åŒ–æ—¶ï¼Œæ‰ä¼šçœŸæ­£åœ°åˆ†é…å†…å­˜ã€‚ä¹Ÿå°±æ˜¯å¿…é¡»å®ä¾‹åŒ–åæ‰èƒ½ä½¿ç”¨ç»“æ„ä½“çš„å­—æ®µã€‚</p>
<p>Tips ï¼šç»“æ„ä½“æœ¬èº«ä¹Ÿæ˜¯ä¸€ç§ç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥åƒå£°æ˜å†…ç½®ç±»å‹ä¸€æ ·ä½¿ç”¨<code>var</code>å…³é”®å­—å£°æ˜ç»“æ„ä½“ç±»å‹ã€‚ä¾‹å¦‚:<code>var ç»“æ„ä½“å®ä¾‹ ç»“æ„ä½“ç±»å‹</code>ã€‚</p>
<p><br/></p>
<p>æè¿°: ç»“æ„ä½“åˆå§‹åŒ–æ˜¯éå¸¸å¿…è¦ï¼Œå› ä¸ºæ²¡æœ‰åˆå§‹åŒ–çš„ç»“æ„ä½“ï¼Œå…¶æˆå‘˜å˜é‡éƒ½æ˜¯å¯¹åº”å…¶ç±»å‹çš„é›¶å€¼ã€‚</p>
<p><strong>ç»“æ„ä½“ç¤ºä¾‹åŒ–çš„ä¸‰ç§è¯­æ³•æ ¼å¼:</strong><br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> demo <span class="keyword">struct</span> &#123;</span><br><span class="line">  username <span class="keyword">string</span></span><br><span class="line">  city <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.æ–¹å¼1.åˆ©ç”¨`.`è¿›è¡Œè°ƒç”¨æŒ‡å®šå±æ€§</span></span><br><span class="line"><span class="keyword">var</span> m1 demo</span><br><span class="line">demo.username = <span class="string">"WeiyiGeek"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.æ–¹å¼2.ä½¿ç”¨é”®å€¼å¯¹åˆå§‹åŒ–</span></span><br><span class="line">m2 := demo &#123;username: <span class="string">"WeiyiGeek"</span>,city:<span class="string">"é‡åº†"</span>,&#125;</span><br><span class="line">m2 := &amp;demo &#123;username: <span class="string">"WeiyiGeek"</span>,city:<span class="string">"é‡åº†"</span>,&#125; <span class="comment">// ==&gt; new(demo) æ­¤ç§æ–¹å¼ä¼šåœ¨ç»“æ„ä½“æŒ‡é’ˆé‡Œé¢å®è·µã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.æ–¹å¼3.ä½¿ç”¨å€¼çš„åˆ—è¡¨åˆå§‹åŒ–</span></span><br><span class="line">m3 := demo &#123;</span><br><span class="line">  <span class="string">"WeiyiGeek"</span>,</span><br><span class="line">  <span class="string">"é‡åº†"</span></span><br><span class="line">&#125;</span><br><span class="line">m3 := &amp;demo &#123;</span><br><span class="line">  <span class="string">"WeiyiGeek"</span>,</span><br><span class="line">  <span class="string">"é‡åº†"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Tips : ç‰¹åˆ«æ³¨æ„åœ¨<code>ä½¿ç”¨å€¼çš„åˆ—è¡¨åˆå§‹åŒ–</code>è¿™ç§æ ¼å¼åˆå§‹åŒ–æ—¶, (1)<code>å¿…é¡»åˆå§‹åŒ–ç»“æ„ä½“çš„æ‰€æœ‰å­—æ®µ</code>,(2)<code>åˆå§‹å€¼çš„å¡«å……é¡ºåºå¿…é¡»ä¸å­—æ®µåœ¨ç»“æ„ä½“ä¸­çš„å£°æ˜é¡ºåºä¸€è‡´</code>,(3) <code>è¯¥æ–¹å¼ä¸èƒ½å’Œé”®å€¼åˆå§‹åŒ–æ–¹å¼æ··ç”¨ã€‚</code></p>
<p><br></p>
<p><strong>ç¤ºä¾‹æ¼”ç¤º:</strong> ä¸‹è¿°æ¼”ç¤ºä¸‰ç§åŸºç¡€æ–¹å¼è¿›è¡Œç»“æ„ä½“çš„å®ä¾‹åŒ–ã€‚<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.ç»“æ„ä½“åˆè¯†è¿˜æ˜¯è€ç¤ºä¾‹é‡‡ç”¨ç»“æ„ä½“æè¿°äººå‘˜ä¿¡æ¯å¹¶è¿›è¡Œèµ‹å€¼ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">  name  <span class="keyword">string</span></span><br><span class="line">  age   <span class="keyword">uint8</span></span><br><span class="line">  sex   <span class="keyword">bool</span></span><br><span class="line">  hobby []<span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">demo1</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="comment">// æ–¹å¼1.å£°æ˜ä¸€ä¸ªPersinç±»å‹çš„å˜é‡x</span></span><br><span class="line">  <span class="keyword">var</span> x Person</span><br><span class="line">  <span class="comment">// é€šè¿‡ç»“æ„ä½“ä¸­çš„å±æ€§è¿›è¡Œèµ‹å€¼</span></span><br><span class="line">  x.name = <span class="string">"WeiyiGeek"</span></span><br><span class="line">  x.age = <span class="number">20</span></span><br><span class="line">  x.sex = <span class="literal">true</span> <span class="comment">// &#123;Boy,Girl)</span></span><br><span class="line">  x.hobby = []<span class="keyword">string</span>&#123;<span class="string">"Basketball"</span>, <span class="string">"ä¹’ä¹“çƒ"</span>, <span class="string">"ç¾½æ¯›çƒ"</span>&#125;</span><br><span class="line">  <span class="comment">// è¾“å‡ºå˜é‡xçš„ç±»å‹ä»¥åŠå…¶å­—æ®µçš„å€¼</span></span><br><span class="line">  fmt.Printf(<span class="string">"Type of x : %T, Value : %v \n"</span>, x, x)</span><br><span class="line">  x.name = <span class="string">"WeiyiGeeker"</span></span><br><span class="line">  <span class="comment">// æˆ‘ä»¬é€šè¿‡.æ¥è®¿é—®ç»“æ„ä½“çš„å­—æ®µï¼ˆæˆå‘˜å˜é‡ï¼‰, ä¾‹å¦‚x.nameå’Œx.ageç­‰ã€‚</span></span><br><span class="line">  fmt.Printf(<span class="string">"My Name is %v \n"</span>, x.name)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ–¹å¼2.åœ¨å£°æ˜æ˜¯è¿›è¡Œèµ‹å€¼(keyï¼švalueï¼Œæˆ–è€… value)çš„å€¼æ ¼å¼</span></span><br><span class="line">  <span class="comment">// ä½¿ç”¨é”®å€¼å¯¹åˆå§‹åŒ–</span></span><br><span class="line">  <span class="keyword">var</span> y = Person&#123;</span><br><span class="line">    name:  <span class="string">"Go"</span>,</span><br><span class="line">    age:   <span class="number">16</span>,</span><br><span class="line">    sex:   <span class="literal">false</span>,</span><br><span class="line">    hobby: []<span class="keyword">string</span>&#123;<span class="string">"Computer"</span>, <span class="string">"ProgramDevelopment"</span>&#125;,</span><br><span class="line">  &#125;</span><br><span class="line">  fmt.Printf(<span class="string">"Type of y : %T, Value : %v \n"</span>, y, y)</span><br><span class="line">  <span class="comment">// éå¸¸æ³¨æ„æ­¤ç§æ–¹å¼æ˜¯æŒ‰ç…§ç»“æ„ä½“ä¸­å±æ€§é¡ºåºè¿›è¡Œèµ‹å€¼,åŒæ ·æœªèµ‹å€¼çš„ä¸ºè¯¥ç±»å‹çš„é›¶å€¼</span></span><br><span class="line">  <span class="comment">// ä½¿ç”¨å€¼çš„åˆ—è¡¨åˆå§‹åŒ–</span></span><br><span class="line">  z := Person&#123;</span><br><span class="line">    <span class="string">"WeiyiGeek"</span>,</span><br><span class="line">    <span class="number">10</span>,</span><br><span class="line">    <span class="literal">true</span>,</span><br><span class="line">    []<span class="keyword">string</span>&#123;&#125;,</span><br><span class="line">  &#125;</span><br><span class="line">  fmt.Printf(<span class="string">"Type of z : %T, Value : %v \n"</span>, z, z)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>æ‰§è¡Œç»“æœ:<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Type of x : main.Person, Value : &#123;WeiyiGeek <span class="number">20</span> <span class="literal">true</span> [Basketball ä¹’ä¹“çƒ ç¾½æ¯›çƒ]&#125; </span><br><span class="line">My Name is WeiyiGeeker </span><br><span class="line">Type of y : main.Person, Value : &#123;Go <span class="number">16</span> <span class="literal">false</span> [Computer ProgramDevelopment]&#125; </span><br><span class="line">Type of z : main.Person, Value : &#123;WeiyiGeek <span class="number">10</span> <span class="literal">true</span> []&#125;</span><br></pre></td></tr></table></figure></p>
<p>Tips : å¦‚æœæ²¡æœ‰ç»™ç»“æ„ä½“ä¸­çš„å±æ€§èµ‹å€¼ï¼Œåˆ™é»˜è®¤é‡‡ç”¨è¯¥ç±»å‹çš„é›¶å€¼ã€‚</p>
<p><br></p>
<h3 id="5-ç»“æ„ä½“å†…å­˜å¸ƒå±€"><a href="#5-ç»“æ„ä½“å†…å­˜å¸ƒå±€" class="headerlink" title="5.ç»“æ„ä½“å†…å­˜å¸ƒå±€"></a>5.ç»“æ„ä½“å†…å­˜å¸ƒå±€</h3><p>æè¿°: ç»“æ„ä½“å ç”¨ä¸€å—è¿ç»­çš„å†…å­˜ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„ç©ºç»“æ„ä½“æ˜¯ä¸å ç”¨ç©ºé—´çš„ã€‚</p>
<h4 id="è¿ç»­å†…å­˜ç©ºé—´"><a href="#è¿ç»­å†…å­˜ç©ºé—´" class="headerlink" title="è¿ç»­å†…å­˜ç©ºé—´"></a>è¿ç»­å†…å­˜ç©ºé—´</h4><p><strong>ç¤ºä¾‹æ¼”ç¤º:</strong><br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¤ºä¾‹1.ç©ºç»“æ„ä½“æ˜¯ä¸å ç”¨ç©ºé—´çš„</span></span><br><span class="line"><span class="keyword">var</span> v <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line">fmt.Println(unsafe.Sizeof(v))  <span class="comment">// 0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¤ºä¾‹2.ç»“æ„ä½“å ç”¨ä¸€å—è¿ç»­çš„å†…å­˜</span></span><br><span class="line"><span class="keyword">type</span> test <span class="keyword">struct</span> &#123;</span><br><span class="line">  a <span class="keyword">int8</span></span><br><span class="line">  b <span class="keyword">int8</span></span><br><span class="line">  c <span class="keyword">int8</span></span><br><span class="line">  d <span class="keyword">int8</span></span><br><span class="line">&#125;</span><br><span class="line">n := test&#123;</span><br><span class="line">  <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>,</span><br><span class="line">&#125;</span><br><span class="line">fmt.Printf(<span class="string">"n.a %p, int8 size: %d\n"</span>, &amp;n.a, unsafe.Sizeof(<span class="keyword">bool</span>(<span class="literal">true</span>)))</span><br><span class="line">fmt.Printf(<span class="string">"n.b %p\n"</span>, &amp;n.b)</span><br><span class="line">fmt.Printf(<span class="string">"n.c %p\n"</span>, &amp;n.c)</span><br><span class="line">fmt.Printf(<span class="string">"n.d %p\n"</span>, &amp;n.d)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰§è¡Œç»“æœ:</span></span><br><span class="line">n.a <span class="number">0xc0000a0060</span></span><br><span class="line">n.b <span class="number">0xc0000a0061</span></span><br><span class="line">n.c <span class="number">0xc0000a0062</span></span><br><span class="line">n.d <span class="number">0xc0000a0063</span></span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h4 id="å†…å­˜å¯¹é½åˆ†æ"><a href="#å†…å­˜å¯¹é½åˆ†æ" class="headerlink" title="å†…å­˜å¯¹é½åˆ†æ"></a>å†…å­˜å¯¹é½åˆ†æ</h4><p><strong>[è¿›é˜¶çŸ¥è¯†ç‚¹] å…³äºåœ¨ Go è¯­è¨€ä¸­æ°åˆ°å¥½å¤„çš„å†…å­˜å¯¹é½</strong><br>æè¿°: åœ¨è®²è§£å‰å†…å­˜å¯¹é½å‰, æˆ‘ä»¬å…ˆä¸¢å‡ºä¸¤ä¸ªstructç»“æ„ä½“å¼•å‘æ€è€ƒ:</p>
<p><strong>ç¤ºä¾‹1.</strong> æ³¨æ„ä¸¤ä¸ªç»“æ„ä½“ä¸­å£°æ˜ä¸åŒå…ƒç´ ç±»å‹çš„é¡ºåºã€‚<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Part1 <span class="keyword">struct</span> &#123;</span><br><span class="line">  a <span class="keyword">bool</span></span><br><span class="line">  b <span class="keyword">int32</span></span><br><span class="line">  c <span class="keyword">int8</span></span><br><span class="line">  d <span class="keyword">int64</span></span><br><span class="line">  e <span class="keyword">byte</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Part2 <span class="keyword">struct</span> &#123;</span><br><span class="line">  e <span class="keyword">byte</span></span><br><span class="line">  c <span class="keyword">int8</span></span><br><span class="line">  a <span class="keyword">bool</span></span><br><span class="line">  b <span class="keyword">int32</span></span><br><span class="line">  d <span class="keyword">int64</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œå¸Œæœ›ä½ è®¡ç®—ä¸€ä¸‹ Part1 ä¸ Part2 ä¸¤ä¸ªç»“æ„ä½“åˆ†åˆ«å ç”¨çš„å¤§å°æ˜¯å¤šå°‘å‘¢?<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">typeSize</span><span class="params">()</span></span> &#123;</span><br><span class="line">  fmt.Printf(<span class="string">"bool size: %d\n"</span>, unsafe.Sizeof(<span class="keyword">bool</span>(<span class="literal">true</span>)))</span><br><span class="line">  fmt.Printf(<span class="string">"int32 size: %d\n"</span>, unsafe.Sizeof(<span class="keyword">int32</span>(<span class="number">0</span>)))</span><br><span class="line">  fmt.Printf(<span class="string">"int8 size: %d\n"</span>, unsafe.Sizeof(<span class="keyword">int8</span>(<span class="number">0</span>)))</span><br><span class="line">  fmt.Printf(<span class="string">"int64 size: %d\n"</span>, unsafe.Sizeof(<span class="keyword">int64</span>(<span class="number">0</span>)))</span><br><span class="line">  fmt.Printf(<span class="string">"byte size: %d\n"</span>, unsafe.Sizeof(<span class="keyword">byte</span>(<span class="number">0</span>)))</span><br><span class="line">  fmt.Printf(<span class="string">"string size: %d\n"</span>, unsafe.Sizeof(<span class="string">"WeiyiGeek"</span>))  <span class="comment">// æ³¨æ„ä¸Šé¢å£°æ˜çš„ç»“æ„ä½“ä¸­æ²¡æœ‰è¯¥ç±»å‹ã€‚</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡ºç»“æœ</span></span><br><span class="line"><span class="keyword">bool</span> size: <span class="number">1</span></span><br><span class="line"><span class="keyword">int32</span> size: <span class="number">4</span></span><br><span class="line"><span class="keyword">int8</span> size: <span class="number">1</span></span><br><span class="line"><span class="keyword">int64</span> size: <span class="number">8</span></span><br><span class="line"><span class="keyword">byte</span> size: <span class="number">1</span></span><br><span class="line"><span class="keyword">string</span> size: <span class="number">16</span></span><br></pre></td></tr></table></figure></p>
<p>è¿™ä¹ˆä¸€ç®— Part1/Part2 ç»“æ„ä½“çš„å ç”¨å†…å­˜å¤§å°ä¸º <code>1+4+1+8+1 = 15</code> ä¸ªå­—èŠ‚ã€‚ç›¸ä¿¡æœ‰çš„å°ä¼™ä¼´æ˜¯è¿™ä¹ˆç®—çš„ï¼Œçœ‹ä¸Šå»ä¹Ÿæ²¡ä»€ä¹ˆæ¯›ç—…</p>
<p>çœŸå®æƒ…å†µæ˜¯æ€ä¹ˆæ ·çš„å‘¢ï¼Ÿæˆ‘ä»¬å®é™…è°ƒç”¨çœ‹çœ‹ï¼Œå¦‚ä¸‹ï¼š<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  part1 := Part1&#123;&#125;</span><br><span class="line">  fmt.Printf(<span class="string">"part1 size: %d, align: %d\n"</span>, unsafe.Sizeof(part1), unsafe.Alignof(part1))</span><br><span class="line">  fmt.Println()</span><br><span class="line">  part2 := Part2&#123;&#125;</span><br><span class="line">  fmt.Printf(<span class="string">"part2 size: %d, align: %d\n"</span>, unsafe.Sizeof(part2), unsafe.Alignof(part2))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>æ‰§è¡Œç»“æœ:<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">part1 size: <span class="number">32</span>, align: <span class="number">8</span></span><br><span class="line">part2 size: <span class="number">16</span>, align: <span class="number">8</span></span><br><span class="line"></span><br><span class="line">Tips : <span class="string">`unsafe.Sizeof`</span> æ¥è¿”å›ç›¸åº”ç±»å‹çš„ç©ºé—´å ç”¨å¤§å°</span><br><span class="line">Tips : <span class="string">`unsafe.Alignof`</span> æ¥è¿”å›ç›¸åº”ç±»å‹çš„å¯¹é½ç³»æ•°</span><br></pre></td></tr></table></figure></p>
<p>ä»ä¸Šè¿°ç»“æœä¸­å¯ä»¥çœ‹è§ <code>part1</code> å ç”¨32ä¸ªå­—èŠ‚è€Œ <code>part2</code> å ç”¨16å­—èŠ‚,æ­¤æ—¶ part1 æ¯”æˆ‘ä»¬ä¸Šé¢è®¡ç®—ç»“æ„ä½“å ç”¨å­—èŠ‚æ•°å¤šäº†16 Byte, å¹¶ä¸”ç›¸åŒçš„å…ƒç´ ç±»å‹ä½†é¡ºåºä¸åŒçš„ part2 æ˜¯æ­£ç¡®çš„åªå ç”¨äº† 16 Byte, é‚£ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™æ ·çš„æƒ…å†µå‘¢ï¼ŸåŒæ—¶è¿™å……åˆ†åœ°è¯´æ˜äº†å…ˆå‰çš„è®¡ç®—æ–¹å¼æ˜¯é”™è¯¯çš„ã€‚</p>
<p>åœ¨è¿™é‡Œè¦æåˆ° â€œå†…å­˜å¯¹é½â€ è¿™ä¸€æ¦‚å¿µï¼Œæ‰èƒ½å¤Ÿç”¨æ­£ç¡®çš„å§¿åŠ¿å»è®¡ç®—ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¯¦ç»†çš„è®²è®²å®ƒæ˜¯ä»€ä¹ˆ</p>
<p><br></p>
<p><strong>Q: What ä»€ä¹ˆæ˜¯å†…å­˜å¯¹é½?</strong><br>ç­”:æœ‰çš„å°ä¼™ä¼´å¯èƒ½ä¼šè®¤ä¸ºå†…å­˜è¯»å–ï¼Œå°±æ˜¯ä¸€ä¸ªç®€å•çš„å­—èŠ‚æ•°ç»„æ‘†æ”¾<code>(ä¾‹å›¾1) è¡¨ç¤ºä¸€ä¸ªå‘ä¸€ä¸ªèåœçš„å†…å­˜è¯»å–æ–¹å¼</code>ã€‚ä½†å®é™…ä¸Š CPU å¹¶ä¸ä¼šä»¥ä¸€ä¸ªä¸€ä¸ªå­—èŠ‚å»è¯»å–å’Œå†™å…¥å†…å­˜, <code>ç›¸å CPU è¯»å–å†…å­˜æ˜¯ä¸€å—ä¸€å—è¯»å–çš„</code>ï¼Œå—çš„å¤§å°å¯ä»¥ä¸º 2ã€4ã€6ã€8ã€16 å­—èŠ‚ç­‰å¤§å°, å—å¤§å°æˆ‘ä»¬ç§°å…¶ä¸ºå†…å­˜è®¿é—®ç²’åº¦(ä¾‹å›¾2)ï¼š</p>
<figure class="image-box">
                <a rel=5.Goç¼–ç¨‹å¿«é€Ÿå…¥é—¨å­¦ä¹  href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/5/20210818152721.png" target="_blank" title="WeiyiGeek.å†…å­˜å¯¹é½" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/5/20210818152721.png" alt="WeiyiGeek.å†…å­˜å¯¹é½" title="" class=""></a>
                <p>WeiyiGeek.å†…å­˜å¯¹é½</p>
            </figure>
<p>åœ¨æ ·ä¾‹ä¸­ï¼Œå‡è®¾è®¿é—®ç²’åº¦ä¸º 4ã€‚ CPU æ˜¯ä»¥æ¯ 4 ä¸ªå­—èŠ‚å¤§å°çš„è®¿é—®ç²’åº¦å»è¯»å–å’Œå†™å…¥å†…å­˜çš„ã€‚è¿™æ‰æ˜¯æ­£ç¡®çš„å§¿åŠ¿</p>
<p><br></p>
<p><strong>Q: Why ä¸ºä»€ä¹ˆè¦å…³å¿ƒå¯¹é½?</strong></p>
<ul>
<li>ä½ æ­£åœ¨ç¼–å†™çš„ä»£ç åœ¨æ€§èƒ½ï¼ˆCPUã€Memoryï¼‰æ–¹é¢æœ‰ä¸€å®šçš„è¦æ±‚</li>
<li>ä½ æ­£åœ¨å¤„ç†å‘é‡æ–¹é¢çš„æŒ‡ä»¤</li>
<li>æŸäº›ç¡¬ä»¶å¹³å°ï¼ˆARMï¼‰ä½“ç³»ä¸æ”¯æŒæœªå¯¹é½çš„å†…å­˜è®¿é—®</li>
</ul>
<p><br></p>
<p><strong>Q: Why ä¸ºä»€ä¹ˆè¦åšå¯¹é½?</strong></p>
<ul>
<li>å¹³å°ï¼ˆç§»æ¤æ€§ï¼‰åŸå› ï¼šä¸æ˜¯æ‰€æœ‰çš„ç¡¬ä»¶å¹³å°éƒ½èƒ½å¤Ÿè®¿é—®ä»»æ„åœ°å€ä¸Šçš„ä»»æ„æ•°æ®ã€‚<code>ä¾‹å¦‚ï¼šç‰¹å®šçš„ç¡¬ä»¶å¹³å°åªå…è®¸åœ¨ç‰¹å®šåœ°å€è·å–ç‰¹å®šç±»å‹çš„æ•°æ®ï¼Œå¦åˆ™ä¼šå¯¼è‡´å¼‚å¸¸æƒ…å†µ</code></li>
<li>æ€§èƒ½åŸå› ï¼šè‹¥è®¿é—®æœªå¯¹é½çš„å†…å­˜ï¼Œå°†ä¼šå¯¼è‡´ CPU è¿›è¡Œä¸¤æ¬¡å†…å­˜è®¿é—®ï¼Œå¹¶ä¸”è¦èŠ±è´¹é¢å¤–çš„æ—¶é’Ÿå‘¨æœŸæ¥å¤„ç†å¯¹é½åŠè¿ç®—ã€‚è€Œæœ¬èº«å°±å¯¹é½çš„å†…å­˜ä»…éœ€è¦ä¸€æ¬¡è®¿é—®å°±å¯ä»¥å®Œæˆè¯»å–åŠ¨ä½œ</li>
</ul>
<figure class="image-box">
                <a rel=5.Goç¼–ç¨‹å¿«é€Ÿå…¥é—¨å­¦ä¹  href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/5/20210818152928.png" target="_blank" title="WeiyiGeek.å†…å­˜ç”³è¯·" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/5/20210818152928.png" alt="WeiyiGeek.å†…å­˜ç”³è¯·" title="" class=""></a>
                <p>WeiyiGeek.å†…å­˜ç”³è¯·</p>
            </figure>
<p>åœ¨ä¸Šå›¾ä¸­ï¼Œå‡è®¾ä» Index 1 å¼€å§‹è¯»å–ï¼Œå°†ä¼šå‡ºç°å¾ˆå´©æºƒçš„é—®é¢˜, <code>å› ä¸ºå®ƒçš„å†…å­˜è®¿é—®è¾¹ç•Œæ˜¯ä¸å¯¹é½çš„</code>ã€‚å› æ­¤ CPU ä¼šåšä¸€äº›é¢å¤–çš„å¤„ç†å·¥ä½œã€‚å¦‚ä¸‹ï¼š</p>
<ul>
<li>1.CPU é¦–æ¬¡è¯»å–æœªå¯¹é½åœ°å€çš„ç¬¬ä¸€ä¸ªå†…å­˜å—ï¼Œè¯»å– 0-3 å­—èŠ‚ã€‚å¹¶ç§»é™¤ä¸éœ€è¦çš„å­—èŠ‚ 0</li>
<li>2.CPU å†æ¬¡è¯»å–æœªå¯¹é½åœ°å€çš„ç¬¬äºŒä¸ªå†…å­˜å—ï¼Œè¯»å– 4-7 å­—èŠ‚ã€‚å¹¶ç§»é™¤ä¸éœ€è¦çš„å­—èŠ‚ 5ã€6ã€7 å­—èŠ‚</li>
<li>3.åˆå¹¶ 1-4 å­—èŠ‚çš„æ•°æ®</li>
<li>4.åˆå¹¶åæ”¾å…¥å¯„å­˜å™¨</li>
</ul>
<p>ä»ä¸Šè¿°æµç¨‹å¯å¾—å‡ºï¼Œä¸åš â€œå†…å­˜å¯¹é½â€ æ˜¯ä¸€ä»¶æœ‰ç‚¹ â€œéº»çƒ¦â€ çš„äº‹ã€‚å› ä¸ºå®ƒä¼šå¢åŠ è®¸å¤šè€—è´¹æ—¶é—´çš„åŠ¨ä½œ, <code>è€Œå‡è®¾åšäº†å†…å­˜å¯¹é½ï¼Œä» Index 0 å¼€å§‹è¯»å– 4 ä¸ªå­—èŠ‚ï¼Œåªéœ€è¦è¯»å–ä¸€æ¬¡</code>ï¼Œä¹Ÿä¸éœ€è¦é¢å¤–çš„è¿ç®—ã€‚è¿™æ˜¾ç„¶é«˜æ•ˆå¾ˆå¤šï¼Œæ˜¯æ ‡å‡†çš„ç©ºé—´æ¢æ—¶é—´åšæ³•</p>
<p><br></p>
<p><strong>é»˜è®¤ç³»æ•°</strong><br>æè¿°: åœ¨ä¸åŒå¹³å°ä¸Šçš„ç¼–è¯‘å™¨éƒ½æœ‰è‡ªå·±é»˜è®¤çš„ â€œå¯¹é½ç³»æ•°â€ï¼Œå¯é€šè¿‡é¢„ç¼–è¯‘å‘½ä»¤ #pragma pack(n) è¿›è¡Œå˜æ›´ï¼Œn å°±æ˜¯ä»£æŒ‡ â€œå¯¹é½ç³»æ•°â€ã€‚ä¸€èˆ¬æ¥è®²ï¼Œæˆ‘ä»¬å¸¸ç”¨çš„å¹³å°çš„ç³»æ•°å¦‚ä¸‹ï¼š<code>32 ä½ï¼š4, 64 ä½ï¼š8</code>, ä¾‹å¦‚, å‰é¢ç¤ºä¾‹ä¸­çš„å¯¹é½ç³»æ•°æ˜¯8éªŒè¯äº†æˆ‘ä»¬ç³»ç»Ÿæ˜¯64ä½çš„ã€‚</p>
<p>å¦å¤–è¦æ³¨æ„ä¸åŒç¡¬ä»¶å¹³å°å ç”¨çš„å¤§å°å’Œå¯¹é½å€¼éƒ½å¯èƒ½æ˜¯ä¸ä¸€æ ·çš„ã€‚å› æ­¤æœ¬æ–‡çš„å€¼ä¸æ˜¯å”¯ä¸€çš„ï¼Œè°ƒè¯•çš„æ—¶å€™éœ€æŒ‰æœ¬æœºçš„å®é™…æƒ…å†µè€ƒè™‘</p>
<p><br></p>
<p><strong>ä¸åŒæ•°æ®ç±»å‹çš„å¯¹é½ç³»æ•°</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">func <span class="function"><span class="title">main</span></span>() &#123;</span><br><span class="line">  fmt.Printf(<span class="string">"bool align: %d\n"</span>, unsafe.Alignof(bool(<span class="literal">true</span>)))</span><br><span class="line">  fmt.Printf(<span class="string">"byte align: %d\n"</span>, unsafe.Alignof(byte(0)))</span><br><span class="line">  fmt.Printf(<span class="string">"int8 align: %d\n"</span>, unsafe.Alignof(int8(0)))</span><br><span class="line">  fmt.Printf(<span class="string">"int32 align: %d\n"</span>, unsafe.Alignof(int32(0)))</span><br><span class="line">  fmt.Printf(<span class="string">"int64 align: %d\n"</span>, unsafe.Alignof(int64(0)))</span><br><span class="line">  fmt.Printf(<span class="string">"string align: %d\n"</span>, unsafe.Alignof(<span class="string">"WeiyiGeek"</span>))</span><br><span class="line">  fmt.Printf(<span class="string">"map align: %d\n"</span>, unsafe.Alignof(map[string]string&#123;&#125;))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>æ‰§è¡Œç»“æœ:<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">bool</span> align: <span class="number">1</span></span><br><span class="line"><span class="keyword">byte</span> align: <span class="number">1</span></span><br><span class="line"><span class="keyword">int8</span> align: <span class="number">1</span></span><br><span class="line"><span class="keyword">int32</span> align: <span class="number">4</span></span><br><span class="line"><span class="keyword">int64</span> align: <span class="number">8</span></span><br><span class="line"><span class="keyword">string</span> align: <span class="number">8</span></span><br><span class="line"><span class="keyword">map</span> align: <span class="number">8</span></span><br></pre></td></tr></table></figure><br>é€šè¿‡è§‚å¯Ÿè¾“å‡ºç»“æœï¼Œå¯å¾—çŸ¥åŸºæœ¬éƒ½æ˜¯ 2^nï¼Œæœ€å¤§ä¹Ÿä¸ä¼šè¶…è¿‡ 8ã€‚è¿™æ˜¯å› ä¸ºæˆ‘æ‰‹æï¼ˆ64 ä½ï¼‰ç¼–è¯‘å™¨é»˜è®¤å¯¹é½ç³»æ•°æ˜¯ 8ï¼Œå› æ­¤æœ€å¤§å€¼ä¸ä¼šè¶…è¿‡è¿™ä¸ªæ•°ã€‚</p>
<p>Tips: åœ¨ä¸Šå°èŠ‚ä¸­æåˆ°äº†ç»“æ„ä½“ä¸­çš„æˆå‘˜å˜é‡è¦åšå­—èŠ‚å¯¹é½ã€‚é‚£ä¹ˆæƒ³å½“ç„¶èº«ä¸ºæœ€ç»ˆç»“æœçš„ç»“æ„ä½“ï¼Œä¹Ÿæ˜¯éœ€è¦åšå­—èŠ‚å¯¹é½çš„</p>
<p><br></p>
<p><strong>å¯¹é½è§„åˆ™</strong></p>
<ul>
<li>1.<code>ç»“æ„ä½“çš„æˆå‘˜å˜é‡</code>ï¼Œç¬¬ä¸€ä¸ªæˆå‘˜å˜é‡çš„åç§»é‡ä¸º 0ã€‚å¾€åçš„æ¯ä¸ªæˆå‘˜å˜é‡çš„å¯¹é½å€¼å¿…é¡»ä¸ºç¼–è¯‘å™¨é»˜è®¤å¯¹é½é•¿åº¦ï¼ˆ#pragma pack(n)ï¼‰æˆ–å½“å‰æˆå‘˜å˜é‡ç±»å‹çš„é•¿åº¦ï¼ˆunsafe.Sizeofï¼‰ï¼Œå–æœ€å°å€¼ä½œä¸ºå½“å‰ç±»å‹çš„å¯¹é½å€¼ã€‚<code>å…¶åç§»é‡å¿…é¡»ä¸ºå¯¹é½å€¼çš„æ•´æ•°å€</code></li>
<li>2.<code>ç»“æ„ä½“æœ¬èº«</code>ï¼Œå¯¹é½å€¼å¿…é¡»ä¸ºç¼–è¯‘å™¨é»˜è®¤å¯¹é½é•¿åº¦ï¼ˆ#pragma pack(n)ï¼‰æˆ–ç»“æ„ä½“çš„æ‰€æœ‰æˆå‘˜å˜é‡ç±»å‹ä¸­çš„æœ€å¤§é•¿åº¦ï¼Œå–æœ€å¤§æ•°çš„æœ€å°æ•´æ•°å€ä½œä¸ºå¯¹é½å€¼</li>
<li>3.ç»“åˆä»¥ä¸Šä¸¤ç‚¹ï¼Œå¯å¾—çŸ¥è‹¥ç¼–è¯‘å™¨é»˜è®¤å¯¹é½é•¿åº¦ï¼ˆ#pragma pack(n)ï¼‰è¶…è¿‡ç»“æ„ä½“å†…æˆå‘˜å˜é‡çš„ç±»å‹æœ€å¤§é•¿åº¦æ—¶ï¼Œé»˜è®¤å¯¹é½é•¿åº¦æ˜¯æ²¡æœ‰ä»»ä½•æ„ä¹‰çš„</li>
</ul>
<p><br></p>
<p><strong>åˆ†ææµç¨‹</strong></p>
<p>Step 1.é¦–å…ˆæˆ‘ä»¬å…ˆæ¥åˆ†æ <code>part1 ç»“æ„ä½“</code> åˆ°åº•ç»å†äº†äº›ä»€ä¹ˆï¼Œå½±å“äº† â€œé¢„æœŸâ€ ç»“æœ</p>
<table>
<thead>
<tr>
<th>æˆå‘˜å˜é‡</th>
<th>ç±»å‹</th>
<th>åç§»é‡</th>
<th>è‡ªèº«å ç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>a</td>
<td>bool</td>
<td>0</td>
<td>1</td>
</tr>
<tr>
<td>å­—èŠ‚å¯¹é½</td>
<td>æ— </td>
<td>1</td>
<td>3</td>
</tr>
<tr>
<td>b</td>
<td>int32</td>
<td>4</td>
<td>4</td>
</tr>
<tr>
<td>c</td>
<td>int8</td>
<td>8</td>
<td>1</td>
</tr>
<tr>
<td>å­—èŠ‚å¯¹é½</td>
<td>æ— </td>
<td>9</td>
<td>7</td>
</tr>
<tr>
<td>d</td>
<td>int64</td>
<td>16</td>
<td>8</td>
</tr>
<tr>
<td>e</td>
<td>byte</td>
<td>24</td>
<td>1</td>
</tr>
<tr>
<td>å­—èŠ‚å¯¹é½</td>
<td>æ— </td>
<td>25</td>
<td>7</td>
</tr>
<tr>
<td>æ€»å ç”¨å¤§å°</td>
<td>-</td>
<td>-</td>
<td>32</td>
</tr>
</tbody>
</table>
<p><br></p>
<p>æˆå‘˜å¯¹é½æ­¥éª¤</p>
<ul>
<li>ç¬¬ä¸€ä¸ªæˆå‘˜ a<ul>
<li>ç±»å‹ä¸º bool</li>
<li>å¤§å°/å¯¹é½å€¼ä¸º 1 å­—èŠ‚</li>
<li>åˆå§‹åœ°å€ï¼Œåç§»é‡ä¸º 0ã€‚å ç”¨äº†ç¬¬ 1 ä½</li>
</ul>
</li>
<li>ç¬¬äºŒä¸ªæˆå‘˜ b<ul>
<li>ç±»å‹ä¸º int32</li>
<li>å¤§å°/å¯¹é½å€¼ä¸º 4 å­—èŠ‚</li>
<li><code>æ ¹æ®è§„åˆ™ 1ï¼Œå…¶åç§»é‡å¿…é¡»ä¸º 4 çš„æ•´æ•°å€ã€‚ç¡®å®šåç§»é‡ä¸º 4ï¼Œå› æ­¤ 2-4 ä½ä¸º Padding</code>(ç†è§£ç‚¹)ã€‚è€Œå½“å‰æ•°å€¼ä»ç¬¬ 5 ä½å¼€å§‹å¡«å……ï¼Œåˆ°ç¬¬ 8 ä½ã€‚å¦‚ä¸‹ï¼šaxxx|bbbb</li>
</ul>
</li>
<li>ç¬¬ä¸‰ä¸ªæˆå‘˜ c<ul>
<li>ç±»å‹ä¸º int8</li>
<li>å¤§å°/å¯¹é½å€¼ä¸º 1 å­—èŠ‚</li>
<li>æ ¹æ®è§„åˆ™1ï¼Œå…¶åç§»é‡å¿…é¡»ä¸º 1 çš„æ•´æ•°å€ã€‚å½“å‰åç§»é‡ä¸º 8ã€‚ä¸éœ€è¦é¢å¤–å¯¹é½ï¼Œå¡«å…… 1 ä¸ªå­—èŠ‚åˆ°ç¬¬ 9 ä½ã€‚å¦‚ä¸‹ï¼šaxxx|bbbb|câ€¦</li>
</ul>
</li>
<li>ç¬¬å››ä¸ªæˆå‘˜ d<ul>
<li>ç±»å‹ä¸º int64</li>
<li>å¤§å°/å¯¹é½å€¼ä¸º 8 å­—èŠ‚</li>
<li>æ ¹æ®è§„åˆ™ 1ï¼Œå…¶åç§»é‡å¿…é¡»ä¸º 8 çš„æ•´æ•°å€ã€‚ç¡®å®šåç§»é‡ä¸º 16ï¼Œå› æ­¤ 9-16 ä½ä¸º Paddingã€‚è€Œå½“å‰æ•°å€¼ä»ç¬¬ 17 ä½å¼€å§‹å†™å…¥ï¼Œåˆ°ç¬¬ 24 ä½ã€‚å¦‚ä¸‹ï¼šaxxx|bbbb|cxxx|xxxx|dddd|dddd</li>
</ul>
</li>
<li>ç¬¬äº”ä¸ªæˆå‘˜ e<ul>
<li>ç±»å‹ä¸º byte</li>
<li>å¤§å°/å¯¹é½å€¼ä¸º 1 å­—èŠ‚</li>
<li>æ ¹æ®è§„åˆ™ 1ï¼Œå…¶åç§»é‡å¿…é¡»ä¸º 1 çš„æ•´æ•°å€ã€‚å½“å‰åç§»é‡ä¸º 24ã€‚ä¸éœ€è¦é¢å¤–å¯¹é½ï¼Œå¡«å…… 1 ä¸ªå­—èŠ‚åˆ°ç¬¬ 25 ä½ã€‚å¦‚ä¸‹ï¼šaxxx|bbbb|cxxx|xxxx|dddd|dddd|eâ€¦</li>
</ul>
</li>
</ul>
<p><br></p>
<p>æ•´ä½“å¯¹é½æ­¥éª¤</p>
<ul>
<li>åœ¨æ¯ä¸ªæˆå‘˜å˜é‡è¿›è¡Œå¯¹é½åï¼Œæ ¹æ®è§„åˆ™ 2ï¼Œæ•´ä¸ªç»“æ„ä½“æœ¬èº«ä¹Ÿè¦è¿›è¡Œå­—èŠ‚å¯¹é½ï¼Œå› ä¸ºå¯å‘ç°å®ƒå¯èƒ½å¹¶ä¸æ˜¯ 2^nï¼Œä¸æ˜¯å¶æ•°å€ã€‚æ˜¾ç„¶ä¸ç¬¦åˆå¯¹é½çš„è§„åˆ™</li>
<li>æ ¹æ®è§„åˆ™ 2ï¼Œå¯å¾—å‡ºå¯¹é½å€¼ä¸º 8ã€‚ç°åœ¨çš„åç§»é‡ä¸º 25ï¼Œä¸æ˜¯ 8 çš„æ•´å€æ•°ã€‚å› æ­¤ç¡®å®šåç§»é‡ä¸º 32ã€‚å¯¹ç»“æ„ä½“è¿›è¡Œå¯¹é½</li>
</ul>
<p><br></p>
<p>ç»“æœè¯´æ˜ï¼š</p>
<blockquote>
<p>æœ€ç»ˆ Part1 å†…å­˜å¸ƒå±€ <code>axxx|bbbb|cxxx|xxxx|dddd|dddd|exxx|xxxx</code></p>
</blockquote>
<p><strong>é€šè¿‡æœ¬èŠ‚çš„åˆ†æï¼Œå¯å¾—çŸ¥å…ˆå‰çš„ â€œæ¨ç®—â€ ä¸ºä»€ä¹ˆé”™è¯¯ï¼Ÿ</strong><br>æ˜¯å› ä¸ºå®é™…å†…å­˜ç®¡ç†å¹¶é â€œä¸€ä¸ªèåœä¸€ä¸ªå‘â€ çš„æ€æƒ³ã€‚è€Œæ˜¯ä¸€å—ä¸€å—ã€‚é€šè¿‡ç©ºé—´æ¢æ—¶é—´ï¼ˆæ•ˆç‡ï¼‰çš„æ€æƒ³æ¥å®Œæˆè¿™å—è¯»å–ã€å†™å…¥ã€‚å¦å¤–ä¹Ÿéœ€è¦å…¼é¡¾ä¸åŒå¹³å°çš„å†…å­˜æ“ä½œæƒ…å†µ</p>
<p><br></p>
<p>Step 2.é€šè¿‡ä¸Šè¿°æˆ‘ä»¬å¯çŸ¥æ ¹æ®æˆå‘˜å˜é‡çš„ç±»å‹ä¸åŒï¼Œå…¶ç»“æ„ä½“çš„å†…å­˜ä¼šäº§ç”Ÿå¯¹é½ç­‰åŠ¨ä½œã€‚è€Œåƒ <code>part2</code> ç»“æ„ä½“ä¸€æ ·ï¼ŒæŒ‰ç…§å˜é‡ç±»å‹å¯¹é½å€¼ä»å°åˆ°å¤§ï¼Œè¿›è¡Œä¾æ¬¡æ’åºè¿›è¡Œå ç”¨å†…å­˜ç©ºé—´çš„ç»“æœåˆ†æã€‚</p>
<p>é€šè¿‡å¼€å¤´çš„ç¤ºä¾‹æˆ‘ä»¬å¯çŸ¥ï¼Œåªæ˜¯ â€œç®€å•â€ å¯¹æˆå‘˜å˜é‡çš„å­—æ®µé¡ºåº(<code>ç±»å‹å ç”¨å­—èŠ‚æ•°ä»å°åˆ°å¤§æ’åº</code>)è¿›è¡Œæ”¹å˜ï¼Œå°±æ”¹å˜äº†ç»“æ„ä½“å ç”¨å¤§å°ã€‚</p>
<table>
<thead>
<tr>
<th>æˆå‘˜å˜é‡</th>
<th>ç±»å‹</th>
<th>åç§»é‡</th>
<th>è‡ªèº«å ç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>e</td>
<td>byte</td>
<td>0</td>
<td>1</td>
</tr>
<tr>
<td>c</td>
<td>int8</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>a</td>
<td>bool</td>
<td>2</td>
<td>1</td>
</tr>
<tr>
<td>å­—èŠ‚å¯¹é½</td>
<td>æ— </td>
<td>3</td>
<td>1</td>
</tr>
<tr>
<td>b</td>
<td>int32</td>
<td>4</td>
<td>4</td>
</tr>
<tr>
<td>d</td>
<td>int64</td>
<td>8</td>
<td>8</td>
</tr>
<tr>
<td>æ€»å ç”¨å¤§å°</td>
<td>-</td>
<td>-</td>
<td>16</td>
</tr>
</tbody>
</table>
<p><br></p>
<p>æˆå‘˜å¯¹é½</p>
<ul>
<li>ç¬¬ä¸€ä¸ªæˆå‘˜ e<ul>
<li>ç±»å‹ä¸º byte</li>
<li>å¤§å°/å¯¹é½å€¼ä¸º 1 å­—èŠ‚</li>
<li>åˆå§‹åœ°å€ï¼Œåç§»é‡ä¸º 0ã€‚å ç”¨äº†ç¬¬ 1 ä½</li>
</ul>
</li>
<li>ç¬¬äºŒä¸ªæˆå‘˜ c<ul>
<li>ç±»å‹ä¸º int8</li>
<li>å¤§å°/å¯¹é½å€¼ä¸º 1 å­—èŠ‚</li>
<li>æ ¹æ®è§„åˆ™1ï¼Œå…¶åç§»é‡å¿…é¡»ä¸º 1 çš„æ•´æ•°å€ã€‚å½“å‰åç§»é‡ä¸º 2ã€‚ä¸éœ€è¦é¢å¤–å¯¹é½</li>
</ul>
</li>
<li>ç¬¬ä¸‰ä¸ªæˆå‘˜ a<ul>
<li>ç±»å‹ä¸º bool</li>
<li>å¤§å°/å¯¹é½å€¼ä¸º 1 å­—èŠ‚</li>
<li>æ ¹æ®è§„åˆ™1ï¼Œå…¶åç§»é‡å¿…é¡»ä¸º 1 çš„æ•´æ•°å€ã€‚å½“å‰åç§»é‡ä¸º 3ã€‚ä¸éœ€è¦é¢å¤–å¯¹é½</li>
</ul>
</li>
<li>ç¬¬å››ä¸ªæˆå‘˜ b<ul>
<li>ç±»å‹ä¸º int32</li>
<li>å¤§å°/å¯¹é½å€¼ä¸º 4 å­—èŠ‚</li>
<li><code>æ ¹æ®è§„åˆ™1ï¼Œå…¶åç§»é‡å¿…é¡»ä¸º 4 çš„æ•´æ•°å€ã€‚ç¡®å®šåç§»é‡ä¸º 4ï¼Œå› æ­¤ç¬¬ 3 ä½ä¸º Padding</code>(ç†è§£ç‚¹)ã€‚è€Œå½“å‰æ•°å€¼ä»ç¬¬ 4 ä½å¼€å§‹å¡«å……ï¼Œåˆ°ç¬¬ 8 ä½ã€‚å¦‚ä¸‹ï¼šecax|bbbb</li>
</ul>
</li>
<li>ç¬¬äº”ä¸ªæˆå‘˜ d<ul>
<li>ç±»å‹ä¸º int64</li>
<li>å¤§å°/å¯¹é½å€¼ä¸º 8 å­—èŠ‚</li>
<li>æ ¹æ®è§„åˆ™1ï¼Œå…¶åç§»é‡å¿…é¡»ä¸º 8 çš„æ•´æ•°å€ã€‚å½“å‰åç§»é‡ä¸º 8ã€‚ä¸éœ€è¦é¢å¤–å¯¹é½ï¼Œä» 9-16 ä½å¡«å…… 8 ä¸ªå­—èŠ‚ã€‚å¦‚ä¸‹ï¼šecax|bbbb|dddd|dddd</li>
</ul>
</li>
</ul>
<p>æ•´ä½“å¯¹é½: ç”±äºç¬¦åˆè§„åˆ™ 2ï¼Œåˆ™ä¸éœ€è¦é¢å¤–å¯¹é½ã€‚</p>
<p>ç»“æœè¯´æ˜:</p>
<blockquote>
<p>Part2 å†…å­˜å¸ƒå±€ï¼šecax|bbbb|dddd|dddd</p>
</blockquote>
<p><br/></p>
<p><strong>æ€»ç»“</strong></p>
<p>é€šè¿‡å¯¹æ¯” <code>Part1</code> å’Œ <code>Part2</code> çš„å†…å­˜å¸ƒå±€ï¼Œä½ ä¼šå‘ç°ä¸¤è€…æœ‰å¾ˆå¤§çš„ä¸åŒã€‚å¦‚ä¸‹ï¼š</p>
<ul>
<li>Part1ï¼šaxxx|bbbb|cxxx|xxxx|dddd|dddd|exxx|xxxx</li>
<li>Part2ï¼šecax|bbbb|dddd|dddd</li>
</ul>
<p>ä»”ç»†ä¸€çœ‹ï¼Œ<code>Part1</code> å­˜åœ¨è®¸å¤š Paddingã€‚æ˜¾ç„¶å®ƒå æ®äº†ä¸å°‘ç©ºé—´ï¼Œé‚£ä¹ˆ Padding æ˜¯æ€ä¹ˆå‡ºç°çš„å‘¢ï¼Ÿ</p>
<p>é€šè¿‡æœ¬æ–‡çš„ä»‹ç»ï¼Œå¯å¾—çŸ¥æ˜¯ç”±äºä¸åŒç±»å‹å¯¼è‡´éœ€è¦è¿›è¡Œå­—èŠ‚å¯¹é½ï¼Œä»¥æ­¤ä¿è¯å†…å­˜çš„è®¿é—®è¾¹ç•Œ</p>
<p>é‚£ä¹ˆä¹Ÿä¸éš¾ç†è§£ï¼Œä¸ºä»€ä¹ˆ<strong>è°ƒæ•´ç»“æ„ä½“å†…æˆå‘˜å˜é‡çš„å­—æ®µé¡ºåº</strong>å°±èƒ½è¾¾åˆ°ç¼©å°ç»“æ„ä½“å ç”¨å¤§å°çš„ç–‘é—®äº†ï¼Œæ˜¯å› ä¸ºå·§å¦™åœ°å‡å°‘äº† Padding çš„å­˜åœ¨ã€‚è®©å®ƒä»¬æ›´ â€œç´§å‡‘â€ äº†ã€‚è¿™ä¸€ç‚¹å¯¹äºåŠ æ·± Go çš„å†…å­˜å¸ƒå±€å°è±¡å’Œå¤§å¯¹è±¡çš„ä¼˜åŒ–éå¸¸æœ‰å¸®</p>
<p>å½“ç„¶äº†ï¼Œæ²¡ä»€ä¹ˆç‰¹æ®Šé—®é¢˜ï¼Œä½ å¯ä»¥ä¸å…³æ³¨è¿™ä¸€å—ã€‚ä½†ä½ è¦çŸ¥é“è¿™å—çŸ¥è¯†ç‚¹ ğŸ˜„</p>
<p><br></p>
<h3 id="6-æŒ‡é’ˆç±»å‹ç»“æ„ä½“"><a href="#6-æŒ‡é’ˆç±»å‹ç»“æ„ä½“" class="headerlink" title="6.æŒ‡é’ˆç±»å‹ç»“æ„ä½“"></a>6.æŒ‡é’ˆç±»å‹ç»“æ„ä½“</h3><h4 id="ç»“æ„ä½“æŒ‡é’ˆå®ä¾‹åŒ–"><a href="#ç»“æ„ä½“æŒ‡é’ˆå®ä¾‹åŒ–" class="headerlink" title="ç»“æ„ä½“æŒ‡é’ˆå®ä¾‹åŒ–"></a>ç»“æ„ä½“æŒ‡é’ˆå®ä¾‹åŒ–</h4><p>æè¿°: æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ä½¿ç”¨<code>new</code>å…³é”®å­—(<code>å¯¹åŸºç¡€ç±»å‹è¿›è¡Œå®ä¾‹åŒ–</code>)å¯¹ç»“æ„ä½“è¿›è¡Œå®ä¾‹åŒ–ï¼Œå¾—åˆ°çš„æ˜¯ç»“æ„ä½“çš„åœ°å€ã€‚</p>
<p>åˆ›å»ºä¸€ä¸ªç»“æ„ä½“æŒ‡é’ˆæ ¼å¼:<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ–¹å¼1.New å®ä¾‹åŒ–</span></span><br><span class="line"><span class="keyword">var</span> p2 = <span class="built_in">new</span>(person)     </span><br><span class="line">fmt.Printf(<span class="string">"%T\n"</span>, p2)     <span class="comment">// *main.person</span></span><br><span class="line">fmt.Printf(<span class="string">"p2=%#v\n"</span>, p2) <span class="comment">// p2=&amp;main.person&#123;name:"", city:"", age:0&#125;</span></span><br><span class="line"><span class="comment">// åœ¨Goè¯­è¨€ä¸­æ”¯æŒå¯¹ç»“æ„ä½“æŒ‡é’ˆç›´æ¥ä½¿ç”¨.æ¥è®¿é—®ç»“æ„ä½“çš„æˆå‘˜ã€‚</span></span><br><span class="line">p2.name = <span class="string">"WeiyiGeek"</span></span><br><span class="line">p2.age = <span class="number">22</span></span><br><span class="line">p2.city = <span class="string">"é‡åº†"</span></span><br><span class="line">fmt.Printf(<span class="string">"p2=%#v\n"</span>, p2)  <span class="comment">//æ˜¾ç¤ºå‡ºå…¶ç»“æ„ä½“ç»“æ„: p2=&amp;main.person&#123;name:"WeiyiGeek", city:"é‡åº†", age:22&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹å¼2.ä½¿ç”¨&amp;å¯¹ç»“æ„ä½“è¿›è¡Œå–åœ°å€æ“ä½œç›¸å½“äºå¯¹è¯¥ç»“æ„ä½“ç±»å‹è¿›è¡Œäº†ä¸€æ¬¡newå®ä¾‹åŒ–æ“ä½œã€‚</span></span><br><span class="line">p3 := &amp;person&#123;&#125;</span><br><span class="line">fmt.Printf(<span class="string">"%T\n"</span>, p3)     <span class="comment">//*main.person</span></span><br><span class="line">fmt.Printf(<span class="string">"p3=%#v\n"</span>, p3) <span class="comment">//p3=&amp;main.person&#123;name:"", city:"", age:0&#125;</span></span><br><span class="line">p3.name = <span class="string">"WeiyiGeek"</span></span><br><span class="line">p3.age = <span class="number">30</span></span><br><span class="line">p3.city = <span class="string">"é‡åº†"</span></span><br><span class="line">fmt.Printf(<span class="string">"p3=%#v\n"</span>, p3) <span class="comment">//p3=&amp;main.person&#123;name:"WeiyiGeek", city:"é‡åº†", age:30&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>Tips ï¼š<code>p3.name = &quot;WeiyiGeek&quot;</code>å…¶å®åœ¨åº•å±‚æ˜¯<code>(*p3).name = &quot;Geeker&quot;</code>ï¼Œè¿™æ˜¯Goè¯­è¨€å¸®æˆ‘ä»¬å®ç°çš„è¯­æ³•ç³–ã€‚</p>
<p><br/></p>
<p><strong>ç¤ºä¾‹æ¼”ç¤º:</strong><br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">  name  <span class="keyword">string</span></span><br><span class="line">  age   <span class="keyword">uint8</span></span><br><span class="line">  sex   <span class="keyword">bool</span></span><br><span class="line">  hobby []<span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.ç»“æ„ä½“æŒ‡é’ˆ</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">demo3</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="comment">// æ–¹å¼1.ç»“æ„ä½“åˆ©ç”¨newå®ä¾‹åŒ–åœ¨å†…å­˜ä¸­ç”³è¯·ä¸€å—ç©ºé—´</span></span><br><span class="line">  <span class="keyword">var</span> p1 = <span class="built_in">new</span>(Person)</span><br><span class="line">  (*p1).name = <span class="string">"WeiyiGeek"</span> <span class="comment">// å–å¾—åœ°å€å­˜æ”¾çš„å€¼å¹¶å°†å…¶è¿›è¡Œè¦†ç›–</span></span><br><span class="line">  p1.age = <span class="number">20</span>              <span class="comment">// Goè¯­è¨€çš„è¯­æ³•ç³–è‡ªåŠ¨æ ¹æ®æŒ‡é’ˆæ‰¾åˆ°å¯¹åº”åœ°å€çš„å€¼å¹¶å°†å…¶å€¼è¦†ç›–ã€‚</span></span><br><span class="line">  fmt.Printf(<span class="string">"Type of p1 : %T, Struct å®ä¾‹åŒ–ç»“æœ: %#v\n"</span>, p1, p1)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ–¹å¼2.é‡‡ç”¨å–åœ°å€&amp;ç¬¦å·è¿›è¡Œå®ä¾‹åŒ–ç»“æ„ä½“(æ•ˆæœä¸newå·®ä¸å¤š)</span></span><br><span class="line">  p2 := &amp;Person&#123;&#125;</span><br><span class="line">  (*p2).name = <span class="string">"Golang"</span> <span class="comment">// å–å¾—åœ°å€å­˜æ”¾çš„å€¼å¹¶å°†å…¶è¿›è¡Œè¦†ç›–</span></span><br><span class="line">  p2.age = <span class="number">12</span>           <span class="comment">// Goè¯­è¨€çš„è¯­æ³•ç³–è‡ªåŠ¨æ ¹æ®æŒ‡é’ˆæ‰¾åˆ°å¯¹åº”åœ°å€çš„å€¼å¹¶å°†å…¶å€¼è¦†ç›–ã€‚</span></span><br><span class="line">  p2.sex = <span class="literal">true</span></span><br><span class="line">  fmt.Printf(<span class="string">"Type of p2 : %T, Struct å®ä¾‹åŒ–ç»“æœ: %#v\n"</span>, p2, p2)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 5.ä½¿ç”¨é”®å€¼å¯¹åˆå§‹åŒ–(ä¹Ÿå¯ä»¥å¯¹ç»“æ„ä½“æŒ‡é’ˆè¿›è¡Œé”®å€¼å¯¹åˆå§‹åŒ–)</span></span><br><span class="line">  <span class="comment">// å½“æŸäº›å­—æ®µæ²¡æœ‰åˆå§‹å€¼çš„æ—¶å€™ï¼Œè¯¥å­—æ®µå¯ä»¥ä¸å†™ã€‚æ­¤æ—¶æ²¡æœ‰æŒ‡å®šåˆå§‹å€¼çš„å­—æ®µçš„å€¼å°±æ˜¯è¯¥å­—æ®µç±»å‹çš„é›¶å€¼ã€‚</span></span><br><span class="line">  p3 := &amp;Person&#123;</span><br><span class="line">    name: <span class="string">"åŒ—äº¬"</span>,</span><br><span class="line">  &#125;</span><br><span class="line">  fmt.Printf(<span class="string">"p3 Value = %#v \n"</span>, p3)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 6.ä½¿ç”¨å€¼çš„åˆ—è¡¨åˆå§‹åŒ–</span></span><br><span class="line">  <span class="comment">// åˆå§‹åŒ–ç»“æ„ä½“çš„æ—¶å€™å¯ä»¥ç®€å†™ï¼Œä¹Ÿå°±æ˜¯åˆå§‹åŒ–çš„æ—¶å€™ä¸å†™é”®ï¼Œç›´æ¥å†™å€¼ï¼š</span></span><br><span class="line">  p4 := &amp;Person&#123;</span><br><span class="line">    <span class="string">"WeiyiGeek"</span>,</span><br><span class="line">    <span class="number">20</span>,</span><br><span class="line">    <span class="literal">false</span>,</span><br><span class="line">    []<span class="keyword">string</span>&#123;&#125;,</span><br><span class="line">  &#125;</span><br><span class="line">  fmt.Printf(<span class="string">"p4 Value = %#v \n"</span>, p4)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 4.æ¢ç©¶Structç»“æ„ä½“å¼€è¾Ÿçš„æ˜¯è¿ç»­çš„å†…å­˜ç©ºé—´(å†…å­˜å¯¹é½æ•ˆæœ)</span></span><br><span class="line">  fmt.Printf(<span class="string">"*p2 size of = %d, p2 align of = %d \n"</span>, unsafe.Sizeof(*p2), unsafe.Alignof(p2))</span><br><span class="line">  fmt.Printf(<span class="string">"Pointer p2 = %p, \name = %p,p2.name size of = %d \nnage = %p, p2.age size of = %d\nsex = %p, p2.sex size of = %d\nhobby = %p,p2.hobby size of = %d \n"</span>, p2, &amp;p2.name, unsafe.Sizeof((*p2).name), &amp;p2.age, unsafe.Sizeof(p2.age), &amp;p2.sex, unsafe.Sizeof(p2.sex), &amp;p2.hobby, unsafe.Sizeof(p2.hobby))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>æ‰§è¡Œç»“æœ:<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Type of p1 : *main.Person, Struct å®ä¾‹åŒ–ç»“æœ: &amp;main.Person&#123;name:<span class="string">"WeiyiGeek"</span>, age:<span class="number">0x14</span>, sex:<span class="literal">false</span>, hobby:[]<span class="keyword">string</span>(<span class="literal">nil</span>)&#125;</span><br><span class="line">Type of p2 : *main.Person, Struct å®ä¾‹åŒ–ç»“æœ: &amp;main.Person&#123;name:<span class="string">"Golang"</span>, age:<span class="number">0xc</span>, sex:<span class="literal">true</span>, hobby:[]<span class="keyword">string</span>(<span class="literal">nil</span>)&#125;</span><br><span class="line">p3 Value = &amp;main.Person&#123;name:<span class="string">"åŒ—äº¬"</span>, age:<span class="number">0x0</span>, sex:<span class="literal">false</span>, hobby:[]<span class="keyword">string</span>(<span class="literal">nil</span>)&#125; </span><br><span class="line">p4 Value = &amp;main.Person&#123;name:<span class="string">"WeiyiGeek"</span>, age:<span class="number">0x14</span>, sex:<span class="literal">false</span>, hobby:[]<span class="keyword">string</span>&#123;&#125;&#125; </span><br><span class="line"><span class="comment">// ç»“æ„ä½“å ç”¨ä¸€å—è¿ç»­çš„å†…å­˜åœ°å€ã€‚</span></span><br><span class="line">*p2 size of = <span class="number">48</span>, p2 align of = <span class="number">8</span> </span><br><span class="line">Pointer p2 = <span class="number">0xc0001181b0</span>, </span><br><span class="line">name = <span class="number">0xc0001181b0</span>,p2.name size of = <span class="number">16</span> </span><br><span class="line">age = <span class="number">0xc0001181c0</span>, p2.age size of = <span class="number">1</span></span><br><span class="line">sex = <span class="number">0xc0001181c1</span>, p2.sex size of = <span class="number">1</span></span><br><span class="line">hobby = <span class="number">0xc0001181c8</span>,p2.hobby size of = <span class="number">24</span></span><br></pre></td></tr></table></figure></p>
<p>ä»ä¸Šè¿°Person ç»“æ„ä½“æŒ‡é’ˆ p2 å†…å­˜å¯¹é½ç»“æœä¸­å¯çŸ¥ï¼Œå…ƒç´ ç±»å‹å ç”¨çš„å¤§å° <code>16 + 1 + 1 + 24 = 42 Byte</code>, ä½†æ˜¯æ”¶åˆ°æ•´ä½“å¯¹é½çš„è§„åˆ™çº¦æŸï¼Œè¯¥ <code>p2 æŒ‡é’ˆç±»å‹çš„ç»“æ„ä½“</code>å ç”¨çš„å†…å­˜ç©ºé—´å¤§å°ä¸º 48 Byteã€‚</p>
<p><br></p>
<h4 id="ç»“æ„ä½“æŒ‡é’ˆå‡½æ•°ä¼ é€’"><a href="#ç»“æ„ä½“æŒ‡é’ˆå‡½æ•°ä¼ é€’" class="headerlink" title="ç»“æ„ä½“æŒ‡é’ˆå‡½æ•°ä¼ é€’"></a>ç»“æ„ä½“æŒ‡é’ˆå‡½æ•°ä¼ é€’</h4><p>æè¿°: æˆ‘ä»¬å¯ä»¥å°†æŒ‡é’ˆç±»å‹çš„ç»“æ„ä½“è¿›è¡Œåœ°å€ä¼ é€’åœ¨å‡½æ•°ä¸­ä¿®æ”¹å…¶å…ƒç´ å±æ€§å†…å®¹ã€‚</p>
<p>ç¤ºä¾‹æ¼”ç¤º:<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">personChange</span><span class="params">(p Person)</span></span> &#123;</span><br><span class="line">  p.name = <span class="string">"Change"</span>   <span class="comment">// æ‹·è´çš„æ˜¯ p4 æŒ‡é’ˆç±»å‹çš„ç»“æ„çš„å‰¯æœ¬(å€¼å¼•ç”¨)</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">personPointerChange</span><span class="params">(p *Person)</span></span> &#123;</span><br><span class="line">  p.name = <span class="string">"PointerChange"</span>  <span class="comment">// ä¼ é€’çš„æ˜¯ p4 çš„åœ°å€ï¼Œæ‰€ä»¥ä¿®æ”¹çš„æ˜¯ p4.name çš„å±æ€§å€¼</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">demo4</span><span class="params">()</span></span> &#123;</span><br><span class="line">  p4 := &amp;Person&#123;</span><br><span class="line">    name: <span class="string">"WeiyiGeek"</span>,</span><br><span class="line">  &#125;</span><br><span class="line">  personChange(*p4)  <span class="comment">// å€¼ä¼ é€’</span></span><br><span class="line">  fmt.Printf(<span class="string">"personChange(*p4) -&gt;	name = %v \n"</span>, p4.name)</span><br><span class="line"></span><br><span class="line">  personPointerChange(p4) <span class="comment">// åœ°å€ä¼ é€’</span></span><br><span class="line">  fmt.Printf(<span class="string">"personPointerChange(*p4) -&gt;	name = %v"</span>, p4.name)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>æ‰§è¡Œç»“æœ:<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">personChange(*p4) -&gt;	name = WeiyiGeek </span><br><span class="line">personPointerChange(*p4) -&gt;	name = PointerChange</span><br></pre></td></tr></table></figure><br>Tips : Go è¯­è¨€ä¸­å‡½æ•°ä¼ çš„å‚æ•°æ°¸è¿œä¼ çš„æ˜¯æ‹·è´, å¦‚æœè¦ä¿®æ”¹åŸæ•°æ®å¿…é¡»è¿›è¡Œå–åœ°å€ä¼ é€’å¹¶ä¿®æ”¹ã€‚</p>
<p><br></p>
<h4 id="ç»“æ„ä½“æŒ‡é’ˆæ„é€ å‡½æ•°"><a href="#ç»“æ„ä½“æŒ‡é’ˆæ„é€ å‡½æ•°" class="headerlink" title="ç»“æ„ä½“æŒ‡é’ˆæ„é€ å‡½æ•°"></a>ç»“æ„ä½“æŒ‡é’ˆæ„é€ å‡½æ•°</h4><p>æè¿°: Goè¯­è¨€çš„ç»“æ„ä½“æ²¡æœ‰æ„é€ å‡½æ•°ï¼Œä½†æˆ‘ä»¬å¯ä»¥è‡ªå·±å®ç°ä¸€ä¸ªã€‚ </p>
<p>Tips: Goè¯­è¨€æ„é€ å‡½æ•°çº¦å®šä¿—æˆç”¨<code>new</code>è¿›è¡Œå¼€å¤´ï¼Œä¾‹å¦‚ <code>newDog()</code>ã€‚</p>
<p>ä¾‹å¦‚: ä¸‹æ–¹çš„ä»£ç å°±å®ç°äº†ä¸€ä¸ªpersonçš„æ„é€ å‡½æ•°ã€‚<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// (1) ç»“æ„ä½“æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">  name, city <span class="keyword">string</span></span><br><span class="line">  age        <span class="keyword">uint8</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹å¼1.å€¼ä¼ é€’(æ‹·è´å‰¯æœ¬) è¿”å›çš„æ˜¯ç»“æ„ä½“</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newPerson</span><span class="params">(name, city <span class="keyword">string</span>, age <span class="keyword">uint8</span>)</span> <span class="title">Person</span></span> &#123;</span><br><span class="line">  <span class="keyword">return</span> Person&#123;</span><br><span class="line">    name: name,</span><br><span class="line">    city: city,</span><br><span class="line">    age:  age,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹å¼2.åœ°å€(æŒ‡é’ˆç±»å‹å˜é‡)ä¼ é€’è¿”å›çš„æ˜¯ç»“æ„ä½“æŒ‡é’ˆ</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newPointerPerson</span><span class="params">(name, city <span class="keyword">string</span>, age <span class="keyword">uint8</span>)</span> *<span class="title">Person</span></span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &amp;Person&#123;</span><br><span class="line">    name: name,</span><br><span class="line">    city: city,</span><br><span class="line">    age:  age,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">demo1</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="comment">// (1) é€šè¿‡å®šä¹‰çš„å‡½æ•°ç›´æ¥è¿›è¡Œç»“æ„ä½“çš„åˆå§‹åŒ–(å€¼æ‹·è´çš„æ–¹å¼)</span></span><br><span class="line">  <span class="keyword">var</span> person = newPerson(<span class="string">"WeiyiGeek"</span>, <span class="string">"é‡åº†"</span>, <span class="number">20</span>)</span><br><span class="line">  fmt.Printf(<span class="string">"newPerson Type : %T, Value : %v\n"</span>, person, person)</span><br><span class="line">  <span class="comment">// (2) é€šè¿‡å®šä¹‰çš„å‡½æ•°ç›´æ¥ä¼ å…¥æŒ‡é’ˆç±»å‹çš„ç»“æ„ä½“è¿›è¡Œåˆå§‹åŒ–(åœ°å€æ‹·è´çš„æ–¹å¼)</span></span><br><span class="line">  <span class="keyword">var</span> pointerperson = newPointerPerson(<span class="string">"Go"</span>, <span class="string">"world"</span>, <span class="number">12</span>)</span><br><span class="line">  fmt.Printf(<span class="string">"newPointerPerson Type : %T, Value : %v\n"</span>, pointerperson, pointerperson)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>æ‰§è¡Œç»“æœ:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">newPerson Type : main.Person, Value : &#123;WeiyiGeek é‡åº† 20&#125;</span><br><span class="line">newPointerPerson Type : *main.Person, Value : &amp;&#123;Go world 12&#125;</span><br></pre></td></tr></table></figure></p>
<p>Tips ï¼šå› ä¸ºstructæ˜¯å€¼ç±»å‹ï¼Œå¦‚æœç»“æ„ä½“æ¯”è¾ƒå¤æ‚çš„è¯ï¼Œå€¼æ‹·è´æ€§èƒ½å¼€é”€ä¼šæ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥è¯¥æ„é€ å‡½æ•°è¿”å›çš„æ˜¯ç»“æ„ä½“æŒ‡é’ˆç±»å‹ã€‚</p>
<p><br></p>
<h3 id="7-ç»“æ„ä½“æ–¹æ³•ä¸æ¥æ”¶è€…"><a href="#7-ç»“æ„ä½“æ–¹æ³•ä¸æ¥æ”¶è€…" class="headerlink" title="7.ç»“æ„ä½“æ–¹æ³•ä¸æ¥æ”¶è€…"></a>7.ç»“æ„ä½“æ–¹æ³•ä¸æ¥æ”¶è€…</h3><p>æè¿°: Goè¯­è¨€ä¸­çš„<code>æ–¹æ³•ï¼ˆMethodï¼‰</code>æ˜¯ä¸€ç§ä½œç”¨äºç‰¹å®šç±»å‹å˜é‡çš„å‡½æ•°, è¿™ç§<code>ç‰¹å®šç±»å‹å˜é‡å«åšæ¥æ”¶è€…ï¼ˆReceiverï¼‰</code>, æ¥æ”¶è€…çš„æ¦‚å¿µå°±ç±»ä¼¼äºå…¶ä»–è¯­è¨€ä¸­çš„ <code>this</code> æˆ–è€… <code>self</code>ã€‚</p>
<h4 id="ç»“æ„ä½“æ–¹æ³•"><a href="#ç»“æ„ä½“æ–¹æ³•" class="headerlink" title="ç»“æ„ä½“æ–¹æ³•"></a>ç»“æ„ä½“æ–¹æ³•</h4><p><strong>å®šä¹‰æ ¼å¼ï¼š</strong><br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(æ¥æ”¶è€…å˜é‡ æ¥æ”¶è€…ç±»å‹)</span> æ–¹æ³•å<span class="params">(å‚æ•°åˆ—è¡¨)</span> <span class="params">(è¿”å›å‚æ•°)</span></span> &#123;</span><br><span class="line">  å‡½æ•°ä½“</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>å…¶ä¸­ï¼Œ</p>
<ul>
<li><code>æ¥æ”¶è€…å˜é‡</code>ï¼šæ¥æ”¶è€…ä¸­çš„å‚æ•°å˜é‡ååœ¨å‘½åæ—¶ï¼Œå®˜æ–¹å»ºè®®ä½¿ç”¨æ¥æ”¶è€…ç±»å‹åç§°é¦–å­—æ¯çš„å°å†™ï¼Œè€Œä¸æ˜¯selfã€thisä¹‹ç±»çš„å‘½åã€‚ä¾‹å¦‚ Personç±»å‹ çš„æ¥æ”¶è€…å˜é‡åº”è¯¥å‘½åä¸º pï¼ŒConnectorç±»å‹çš„æ¥æ”¶è€…å˜é‡åº”è¯¥å‘½åä¸ºcç­‰ã€‚</li>
<li><code>æ¥æ”¶è€…ç±»å‹</code>ï¼šæ¥æ”¶è€…ç±»å‹å’Œå‚æ•°ç±»ä¼¼ï¼Œå¯ä»¥æ˜¯<code>æŒ‡é’ˆç±»å‹</code>å’Œ<code>éæŒ‡é’ˆç±»å‹</code>ã€‚</li>
<li><code>æ–¹æ³•åã€å‚æ•°åˆ—è¡¨ã€è¿”å›å‚æ•°</code>ï¼šå…·ä½“æ ¼å¼ä¸å‡½æ•°å®šä¹‰ç›¸åŒã€‚</li>
</ul>
<p>Tips : ç»“æ„ä½“æ–¹æ³•åç§°å†™æ³•çº¦æŸè§„å®šï¼Œå¦‚æœå…¶æ ‡è¯†ç¬¦é¦–å­—æ¯æ˜¯å¤§å†™çš„å°±è¡¨ç¤ºå¯¹å¤–éƒ¨åŒ…å¯è§(<code>ä¾‹å¦‚ java ä¸­ public æŒ‡å®šçš„å‡½æ•°æˆ–è€…æ˜¯ç±»</code>å…¬å…±çš„)ï¼Œå¦‚æœå…¶æ ‡è¯†ç¬¦é¦–å­—æ¯æ˜¯å°å†™çš„è¡¨ç¤ºå¯¹å¤–éƒ¨ä¸å¯è§(<code>ä¸èƒ½ç›´æ¥è°ƒç”¨</code>), å½“ç„¶è¿™æ˜¯ä¸€ç§å¼€å‘ä¹ æƒ¯éå¼ºåˆ¶å¿…é¡»çš„ã€‚</p>
<BR>

<p><strong>ç¤ºä¾‹æ¼”ç¤º:</strong><br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Person ç»“æ„ä½“</span></span><br><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">  name <span class="keyword">string</span></span><br><span class="line">  age  <span class="keyword">int8</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//NewPerson æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewPerson</span><span class="params">(name <span class="keyword">string</span>, age <span class="keyword">int8</span>)</span> *<span class="title">Person</span></span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &amp;Person&#123;</span><br><span class="line">    name: name,</span><br><span class="line">    age:  age,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Dream Personåšæ¢¦çš„æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p Person)</span> <span class="title">Dream</span><span class="params">()</span></span> &#123;</span><br><span class="line">  fmt.Printf(<span class="string">"%sçš„æ¢¦æƒ³æ˜¯å­¦å¥½Goè¯­è¨€ï¼\n"</span>, p.name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  p1 := NewPerson(<span class="string">"WeiyiGeek"</span>, <span class="number">25</span>)</span><br><span class="line">  p1.Dream()  <span class="comment">// WeiyiGeekçš„æ¢¦æƒ³æ˜¯å­¦å¥½Goè¯­è¨€ï¼</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Tips : æ–¹æ³•ä¸å‡½æ•°çš„åŒºåˆ«æ˜¯ï¼Œå‡½æ•°ä¸å±äºä»»ä½•ç±»å‹ï¼Œæ–¹æ³•å±äºç‰¹å®šçš„ç±»å‹ã€‚</p>
<p><br></p>
<h4 id="å€¼ç±»å‹çš„æ¥æ”¶è€…"><a href="#å€¼ç±»å‹çš„æ¥æ”¶è€…" class="headerlink" title="å€¼ç±»å‹çš„æ¥æ”¶è€…"></a>å€¼ç±»å‹çš„æ¥æ”¶è€…</h4><p>æè¿°: å½“æ–¹æ³•ä½œç”¨äºå€¼ç±»å‹æ¥æ”¶è€…æ—¶ï¼ŒGoè¯­è¨€ä¼šåœ¨ä»£ç è¿è¡Œæ—¶å°†æ¥æ”¶è€…çš„å€¼å¤åˆ¶ä¸€ä»½ã€‚</p>
<p>åœ¨å€¼ç±»å‹æ¥æ”¶è€…çš„æ–¹æ³•ä¸­å¯ä»¥è·å–æ¥æ”¶è€…çš„æˆå‘˜å€¼ï¼Œä½†<code>ä¿®æ”¹æ“ä½œåªæ˜¯é’ˆå¯¹å‰¯æœ¬ï¼Œæ— æ³•ä¿®æ”¹æ¥æ”¶è€…å˜é‡æœ¬èº«</code>ã€‚</p>
<p>ä¾‹å¦‚: æˆ‘ä»¬ä¸º Person æ·»åŠ ä¸€ä¸ªSetAgeæ–¹æ³•ï¼Œæ¥ä¿®æ”¹å®ä¾‹å˜é‡çš„å¹´é¾„, éªŒè¯æ˜¯å¦å¯è¢«ä¿®æ”¹ã€‚<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  ä½¿ç”¨å€¼æ¥æ”¶è€…ï¼šSetAge2 è®¾ç½®pçš„å¹´é¾„</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p Person)</span> <span class="title">SetAge2</span><span class="params">(newAge <span class="keyword">int8</span>)</span></span> &#123;</span><br><span class="line">  p.age = newAge</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  p1 := NewPerson(<span class="string">"WeiyiGeek"</span>, <span class="number">25</span>)</span><br><span class="line">  p1.Dream()</span><br><span class="line">  fmt.Println(p1.age) <span class="comment">// 25</span></span><br><span class="line">  p1.SetAge2(<span class="number">30</span>) <span class="comment">// (*p1).SetAge2(30)</span></span><br><span class="line">  fmt.Println(p1.age) <span class="comment">// 25</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h4 id="æŒ‡é’ˆç±»å‹çš„æ¥æ”¶è€…"><a href="#æŒ‡é’ˆç±»å‹çš„æ¥æ”¶è€…" class="headerlink" title="æŒ‡é’ˆç±»å‹çš„æ¥æ”¶è€…"></a>æŒ‡é’ˆç±»å‹çš„æ¥æ”¶è€…</h4><p>æè¿°: æŒ‡é’ˆç±»å‹çš„æ¥æ”¶è€…ç”±ä¸€ä¸ªç»“æ„ä½“çš„æŒ‡é’ˆç»„æˆï¼Œç”±äºæŒ‡é’ˆçš„ç‰¹æ€§ï¼Œè°ƒç”¨æ–¹æ³•æ—¶ä¿®æ”¹æ¥æ”¶è€…æŒ‡é’ˆçš„ä»»æ„æˆå‘˜å˜é‡ï¼Œåœ¨æ–¹æ³•ç»“æŸåï¼Œä¿®æ”¹éƒ½æ˜¯æœ‰æ•ˆçš„ã€‚æ­¤ç§æ–¹å¼å°±ååˆ†æ¥è¿‘äºå…¶ä»–è¯­è¨€ä¸­é¢å‘å¯¹è±¡ä¸­çš„thisæˆ–è€…selfè¾¾åˆ°çš„æ•ˆæœã€‚</p>
<p>ä¾‹å¦‚ï¼šæˆ‘ä»¬ä¸º Person æ·»åŠ ä¸€ä¸ªSetAgeæ–¹æ³•ï¼Œæ¥ä¿®æ”¹å®ä¾‹å˜é‡çš„å¹´é¾„ã€‚<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨æŒ‡é’ˆæ¥æ”¶è€… : SetAge è®¾ç½®pçš„å¹´é¾„: ä¼ å…¥çš„ Person å®ä¾‹åŒ–åçš„å˜é‡çš„åœ°å€ p ï¼Œå¹¶é€šè¿‡p.å±æ€§è¿›è¡Œæ›´æ”¹å…¶å†…å®¹å­˜å‚¨çš„å†…å®¹ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *Person)</span> <span class="title">SetAge</span><span class="params">(newAge <span class="keyword">int8</span>)</span></span> &#123;</span><br><span class="line">  p.age = newAge</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è°ƒç”¨</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  p1 := NewPerson(<span class="string">"WeiyiGeek"</span>, <span class="number">25</span>)</span><br><span class="line">  fmt.Println(p1.age) <span class="comment">// 25</span></span><br><span class="line">  p1.SetAge(<span class="number">30</span>)</span><br><span class="line">  fmt.Println(p1.age) <span class="comment">// 30</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>Q: ä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨æŒ‡é’ˆç±»å‹æ¥æ”¶è€…?</strong></p>
<ul>
<li>ä¸€æ˜¯ã€éœ€è¦ä¿®æ”¹æ¥æ”¶è€…ä¸­çš„å€¼ã€‚</li>
<li>äºŒæ˜¯ã€æ¥æ”¶è€…æ˜¯æ‹·è´ä»£ä»·æ¯”è¾ƒå¤§çš„å¤§å¯¹è±¡ã€‚</li>
<li>ä¸‰æ˜¯ã€ä¿è¯ä¸€è‡´æ€§ï¼Œå¦‚æœæœ‰æŸä¸ªæ–¹æ³•ä½¿ç”¨äº†æŒ‡é’ˆæ¥æ”¶è€…ï¼Œé‚£ä¹ˆå…¶ä»–çš„æ–¹æ³•ä¹Ÿåº”è¯¥ä½¿ç”¨æŒ‡é’ˆæ¥æ”¶è€…ã€‚</li>
</ul>
<p><strong>æ¡ˆä¾‹æ¼”ç¤º:</strong><br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç»“æ„ä½“æ–¹æ³•å’Œæ¥æ”¶è€…, åªèƒ½è¢«Personç»“æ„ä½“å®ä¾‹åŒ–çš„å¯¹è±¡è¿›è¡Œè°ƒç”¨ï¼Œä¸èƒ½åƒå‡½æ•°é‚£æ ·ç›´æ¥è°ƒç”¨ã€‚æ­¤å¤„è¿˜æ˜¯é‡‡ç”¨ä¸Šé¢å£°æ˜çš„ç»“æ„ä½“</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p Person)</span> <span class="title">ChangePersonName</span><span class="params">(name <span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line">  p.name = name</span><br><span class="line">  fmt.Printf(<span class="string">"# æ‰§è¡Œ -&gt; ChangePersonName æ–¹æ³• -&gt; p Ptr : %p ,value : %v\n"</span>, &amp;p, p.name)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *Person)</span> <span class="title">ChangePointerPersonName</span><span class="params">(name <span class="keyword">string</span>, age <span class="keyword">uint8</span>)</span></span> &#123;</span><br><span class="line">  p.name = name</span><br><span class="line">  p.age = age</span><br><span class="line">  fmt.Printf(<span class="string">"# æ‰§è¡Œ -&gt; ChangePointerPersonName æ–¹æ³• -&gt; p Ptr : %p (å…³é”®ç‚¹),value : %v\n"</span>, p, p.name)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">demo2</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="comment">// åˆ©ç”¨æ„é€ å‡½æ•°è¿›è¡Œåˆå§‹åŒ–</span></span><br><span class="line">  p1 := newPerson(<span class="string">"å°é»„"</span>, <span class="string">"Beijing"</span>, <span class="number">20</span>)</span><br><span class="line">  fmt.Printf(<span class="string">"p1 Pointer : %p , Struct : %+v \n"</span>, &amp;p1, p1)</span><br><span class="line">  <span class="comment">// è°ƒç”¨ ChangePersonName æ–¹æ³•</span></span><br><span class="line">  p1.ChangePersonName(<span class="string">"å°é»‘"</span>) <span class="comment">// å€¼ç±»å‹çš„æ¥æ”¶è€…(ä¿®æ”¹çš„æ˜¯p1ç»“æ„ä½“å‰¯æœ¬çš„å€¼)</span></span><br><span class="line">  fmt.Printf(<span class="string">"	p1 Pointer : %p , Struct : %+v \n"</span>, &amp;p1, p1)</span><br><span class="line">  <span class="comment">// è°ƒç”¨ ChangePointerPersonName æ–¹æ³•</span></span><br><span class="line">  p1.ChangePointerPersonName(<span class="string">"å°ç™½"</span>, <span class="number">30</span>) <span class="comment">//æŒ‡é’ˆç±»å‹çš„æ¥æ”¶è€… (ä¿®æ”¹çš„æ˜¯p1ç»“æ„ä½“å…ƒç´ çš„å€¼)</span></span><br><span class="line">  fmt.Printf(<span class="string">"	p1 Pointer : %p , Struct : %+v \n"</span>, &amp;p1, p1)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>æ‰§è¡Œç»“æœ:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">p1 Pointer : 0xc00010c150 , Struct : &#123;name:å°é»„ city:Beijing age:20&#125; </span><br><span class="line"><span class="comment"># æ‰§è¡Œ -&gt; ChangePersonName æ–¹æ³• -&gt; p Ptr : 0xc00010c1b0 ,value : å°é»‘</span></span><br><span class="line">  p1 Pointer : 0xc00010c150 , Struct : &#123;name:å°é»„ city:Beijing age:20&#125; </span><br><span class="line"><span class="comment"># æ‰§è¡Œ -&gt; ChangePointerPersonName æ–¹æ³• -&gt; p Ptr : 0xc00010c150 (å…³é”®ç‚¹),value : å°ç™½</span></span><br><span class="line">  p1 Pointer : 0xc00010c150 , Struct : &#123;name:å°ç™½ city:Beijing age:30&#125;</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h4 id="ä»»æ„ç±»å‹çš„æ¥æ”¶è€…"><a href="#ä»»æ„ç±»å‹çš„æ¥æ”¶è€…" class="headerlink" title="ä»»æ„ç±»å‹çš„æ¥æ”¶è€…"></a>ä»»æ„ç±»å‹çš„æ¥æ”¶è€…</h4><p>æè¿°: åœ¨Goè¯­è¨€ä¸­æ¥æ”¶è€…çš„ç±»å‹å¯ä»¥æ˜¯ä»»ä½•ç±»å‹ï¼Œä¸ä»…ä»…æ˜¯ç»“æ„ä½“ï¼Œä»»ä½•ç±»å‹éƒ½å¯ä»¥æ‹¥æœ‰æ–¹æ³•ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬åŸºäºå†…ç½®çš„intç±»å‹ä½¿ç”¨typeå…³é”®å­—å¯ä»¥å®šä¹‰æ–°çš„è‡ªå®šä¹‰ç±»å‹ï¼Œç„¶åä¸ºæˆ‘ä»¬çš„è‡ªå®šä¹‰ç±»å‹æ·»åŠ æ–¹æ³•ã€‚<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 3.ä»»æ„ç±»å‹çš„æ¥æ”¶è€…éƒ½å¯ä»¥æ‹¥æœ‰è‡ªå·±çš„æ–¹æ³•</span></span><br><span class="line"><span class="comment">// MyInt å°†intå®šä¹‰ä¸ºè‡ªå®šä¹‰MyIntç±»å‹</span></span><br><span class="line"><span class="keyword">type</span> MyInt <span class="keyword">int</span></span><br><span class="line"><span class="comment">// SayHello ä¸ºMyIntæ·»åŠ ä¸€ä¸ªSayHelloçš„æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(m MyInt)</span> <span class="title">SayHello</span><span class="params">(s <span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line">  fmt.Printf(<span class="string">"Hello, æˆ‘æ˜¯ä¸€ä¸ªint, %s"</span>, s)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ChangeM ä¸ºMyIntæ·»åŠ ä¸€ä¸ªChangeMçš„æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(m *MyInt)</span> <span class="title">ChangeM</span><span class="params">(newm MyInt)</span></span> &#123;</span><br><span class="line">  fmt.Printf(<span class="string">"# Start old m : %d -&gt; new m : %d \n"</span>, *m, newm)</span><br><span class="line">  *m = newm  <span class="comment">// å…³é”®ç‚¹ä¿®æ”¹må…¶å€¼ï¼Œæ­¤å¤„éæ‹·è´çš„å‰¯æœ¬</span></span><br><span class="line">  fmt.Printf(<span class="string">"# End old m : %d -&gt; new m : %d \n"</span>, *m, newm)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">demo3</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="comment">// å£°æ˜</span></span><br><span class="line">  <span class="keyword">var</span> m1 MyInt</span><br><span class="line">  <span class="comment">// èµ‹å€¼</span></span><br><span class="line">  m1 = <span class="number">100</span></span><br><span class="line">  <span class="comment">// æ–¹å¼2</span></span><br><span class="line">  m2 := MyInt(<span class="number">255</span>)</span><br><span class="line">  <span class="comment">// è°ƒç”¨ç±»å‹æ–¹æ³•</span></span><br><span class="line">  m1.SayHello(<span class="string">"Let'Go"</span>)</span><br><span class="line">  fmt.Printf(<span class="string">"SayHello -&gt; Type m1 : %T, value : %+v \n"</span>, m1, m1)</span><br><span class="line">  <span class="comment">// è°ƒç”¨ç±»å‹æ–¹æ³•ä¿®æ”¹m1å…¶å€¼</span></span><br><span class="line">  m1.ChangeM(<span class="number">1024</span>)</span><br><span class="line">  fmt.Printf(<span class="string">"ChangeM -&gt; Type m1 : %T, value : %+v \n"</span>, m1, m1)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>æ‰§è¡Œç»“æœ:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Hello, æˆ‘æ˜¯ä¸€ä¸ªint, Let<span class="string">'GoSayHello -&gt; Type m1 : main.MyInt, value : 100 </span></span><br><span class="line"><span class="string"># Start old m : 100 -&gt; new m : 1024 </span></span><br><span class="line"><span class="string"># End old m : 1024 -&gt; new m : 1024 </span></span><br><span class="line"><span class="string">ChangeM -&gt; Type m1 : main.MyInt, value : 1024</span></span><br></pre></td></tr></table></figure></p>
<p>Tips : éå¸¸æ³¨æ„ï¼Œéæœ¬åœ°ç±»å‹ä¸èƒ½å®šä¹‰æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬ä¸èƒ½ç»™åˆ«çš„åŒ…çš„ç±»å‹å®šä¹‰æ–¹æ³•ã€‚</p>
<p><br></p>
<h3 id="8-åŒ¿åç»“æ„ä½“ä¸åŒ¿åå­—æ®µ"><a href="#8-åŒ¿åç»“æ„ä½“ä¸åŒ¿åå­—æ®µ" class="headerlink" title="8.åŒ¿åç»“æ„ä½“ä¸åŒ¿åå­—æ®µ"></a>8.åŒ¿åç»“æ„ä½“ä¸åŒ¿åå­—æ®µ</h3><p>æè¿°: åœ¨å®šä¹‰ä¸€äº›ä¸´æ—¶æ•°æ®ç»“æ„ç­‰åœºæ™¯ä¸‹è¿˜å¯ä»¥ä½¿ç”¨åŒ¿åç»“æ„ä½“ã€‚</p>
<p><strong>ç¤ºä¾‹æ¼”ç¤º:</strong><br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŒ¿åç»“æ„ä½“(åªèƒ½ä½¿ç”¨ä¸€æ¬¡ï¼Œæ‰€ä»¥å¸¸å¸¸ä½¿ç”¨ä¸ä¸´æ—¶åœºæ™¯)</span></span><br><span class="line"><span class="comment">// 2.åŒ¿åç»“æ„ä½“(åªèƒ½ä½¿ç”¨ä¸€æ¬¡ï¼Œæ‰€ä»¥å¸¸å¸¸ä½¿ç”¨ä¸ä¸´æ—¶åœºæ™¯)</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">demo2</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="keyword">var</span> temp <span class="keyword">struct</span> &#123;title <span class="keyword">string</span>;address []<span class="keyword">string</span>&#125;</span><br><span class="line">  temp.title = <span class="string">"åœ°å€ä¿¡æ¯"</span></span><br><span class="line">  temp.address = []<span class="keyword">string</span>&#123;<span class="string">"ä¸­å›½"</span>, <span class="string">"é‡åº†"</span>, <span class="string">"æ±ŸåŒ—åŒº"</span>&#125;</span><br><span class="line">  fmt.Printf(<span class="string">"Type of temp : %T\nStruct define: %#v \nValue : %v\n"</span>, temp, temp, temp)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>æ‰§è¡Œç»“æœ:<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Type of temp : <span class="keyword">struct</span> &#123; title <span class="keyword">string</span>; address []<span class="keyword">string</span> &#125;</span><br><span class="line">Struct define: <span class="keyword">struct</span> &#123; title <span class="keyword">string</span>; address []<span class="keyword">string</span> &#125;&#123;title:<span class="string">"åœ°å€ä¿¡æ¯"</span>, address:[]<span class="keyword">string</span>&#123;<span class="string">"ä¸­å›½"</span>, <span class="string">"é‡åº†"</span>, <span class="string">"æ±ŸåŒ—åŒº"</span>&#125;&#125; </span><br><span class="line">Value : &#123;åœ°å€ä¿¡æ¯ [ä¸­å›½ é‡åº† æ±ŸåŒ—åŒº]&#125;</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<p>æè¿°: ç»“æ„ä½“å…è®¸å…¶æˆå‘˜å­—æ®µåœ¨å£°æ˜æ—¶æ²¡æœ‰å­—æ®µåè€Œåªæœ‰ç±»å‹ï¼Œè¿™ç§æ²¡æœ‰åå­—çš„å­—æ®µå°±ç§°ä¸ºåŒ¿åå­—æ®µã€‚</p>
<p>Tips: è¿™é‡ŒåŒ¿åå­—æ®µçš„è¯´æ³•å¹¶ä¸ä»£è¡¨æ²¡æœ‰å­—æ®µåï¼Œè€Œæ˜¯é»˜è®¤ä¼šé‡‡ç”¨ç±»å‹åä½œä¸ºå­—æ®µåï¼Œç»“æ„ä½“è¦æ±‚å­—æ®µåç§°å¿…é¡»å”¯ä¸€ï¼Œå› æ­¤ä¸€ä¸ªç»“æ„ä½“ä¸­åŒç§ç±»å‹çš„åŒ¿åå­—æ®µåªèƒ½æœ‰ä¸€ä¸ªã€‚</p>
<p>ç¤ºä¾‹æ¼”ç¤º:<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Anonymous <span class="keyword">struct</span> &#123;</span><br><span class="line">  <span class="keyword">string</span></span><br><span class="line">  <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">demo4</span><span class="params">()</span></span> &#123;</span><br><span class="line">  a1 := Anonymous&#123;<span class="string">"WeiyiGeek"</span>, <span class="number">18</span>&#125;</span><br><span class="line">  fmt.Printf(<span class="string">"Struct: %#v ï¼Œå­—æ®µ1: %v , å­—æ®µ2: %v \n"</span>, a1, a1.<span class="keyword">string</span>, a1.<span class="keyword">int</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>æ‰§è¡Œç»“æœ:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Struct: main.Anonymous&#123;string:<span class="string">"WeiyiGeek"</span>, int:18&#125; ï¼Œå­—æ®µ1: WeiyiGeek , å­—æ®µ2: 18</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h3 id="9-åµŒå¥—ç»“æ„ä½“ä¸åŒ¿åå­—æ®µ"><a href="#9-åµŒå¥—ç»“æ„ä½“ä¸åŒ¿åå­—æ®µ" class="headerlink" title="9.åµŒå¥—ç»“æ„ä½“ä¸åŒ¿åå­—æ®µ"></a>9.åµŒå¥—ç»“æ„ä½“ä¸åŒ¿åå­—æ®µ</h3><p>æè¿°: ç»“æ„ä½“ä¸­å¯ä»¥åµŒå¥—åŒ…å«å¦ä¸€ä¸ªç»“æ„ä½“æˆ–ç»“æ„ä½“æŒ‡é’ˆ, å¹¶ä¸”ä¸Šé¢userç»“æ„ä½“ä¸­åµŒå¥—çš„Addressç»“æ„ä½“ä¹Ÿå¯ä»¥é‡‡ç”¨åŒ¿åå­—æ®µçš„æ–¹å¼ã€‚</p>
<p>å¹¶ä¸”ä¸ºäº†é˜²æ­¢åµŒå¥—ç»“æ„ä½“çš„ç›¸åŒçš„å­—æ®µåå†²çªï¼Œæ‰€ä»¥åœ¨è¿™ç§æƒ…å†µä¸‹ä¸ºäº†é¿å…æ­§ä¹‰éœ€è¦é€šè¿‡æŒ‡å®šå…·ä½“çš„å†…åµŒç»“æ„ä½“å­—æ®µåã€‚</p>
<p><strong>ç¤ºä¾‹æ¼”ç¤º:</strong><br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Address åœ°å€ç»“æ„ä½“</span></span><br><span class="line"><span class="keyword">type</span> Address <span class="keyword">struct</span> &#123;</span><br><span class="line">  Province <span class="keyword">string</span></span><br><span class="line">  City     <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Email é‚®ç®±ç»“æ„ä½“</span></span><br><span class="line"><span class="keyword">type</span> Email <span class="keyword">struct</span> &#123;</span><br><span class="line">  Account    <span class="keyword">string</span></span><br><span class="line">  CreateTime <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//User ç”¨æˆ·ç»“æ„ä½“</span></span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">  Name    <span class="keyword">string</span></span><br><span class="line">  Gender  <span class="keyword">string</span></span><br><span class="line">  Address Address</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//AnonUser ç”¨æˆ·ç»“æ„ä½“</span></span><br><span class="line"><span class="keyword">type</span> AnonUser <span class="keyword">struct</span> &#123;</span><br><span class="line">  Name    <span class="keyword">string</span></span><br><span class="line">  Gender  <span class="keyword">string</span></span><br><span class="line">  Address <span class="comment">// é‡‡ç”¨ç»“æ„ä½“çš„åŒ¿åå­—æ®µæ¥åµŒå¥—ç»“æ„ä½“Address</span></span><br><span class="line">  Email   <span class="comment">// é‡‡ç”¨ç»“æ„ä½“çš„åŒ¿åå­—æ®µæ¥åµŒå¥—ç»“æ„ä½“Email</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.åµŒå¥—ç»“æ„ä½“</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">demo1</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="comment">// ç»“æ„ä½“åˆå§‹åŒ–</span></span><br><span class="line">  user := User&#123;</span><br><span class="line">    Name:   <span class="string">"WeiyiGeek"</span>,</span><br><span class="line">    Gender: <span class="string">"ç”·"</span>,</span><br><span class="line">    Address: Address&#123;</span><br><span class="line">      Province: <span class="string">"é‡åº†"</span>,</span><br><span class="line">      City:     <span class="string">"é‡åº†"</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">  fmt.Printf(<span class="string">"Struct : %#v \n"</span>, user)</span><br><span class="line">  fmt.Printf(<span class="string">"Name = %v, Address City = %v \n"</span>, user.Name, user.Address.City)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.åµŒå¥—åŒ¿åå­—æ®µé˜²æ­¢å­—æ®µåç§°å†²çª</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">demo2</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="keyword">var</span> anonuser = AnonUser&#123;</span><br><span class="line">    Name:   <span class="string">"WeiyiGeek"</span>,</span><br><span class="line">    Gender: <span class="string">"ç”·"</span>,</span><br><span class="line">    Address: Address&#123;</span><br><span class="line">      <span class="string">"é‡åº†"</span>,</span><br><span class="line">      <span class="string">"é‡åº†"</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    Email: Email&#123;</span><br><span class="line">      <span class="string">"Master@weiyigeek.top"</span>,</span><br><span class="line">      <span class="string">"2021å¹´8æœˆ23æ—¥ 10:21:36"</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">  fmt.Printf(<span class="string">"Struct : %#v\n"</span>, anonuser)</span><br><span class="line">  fmt.Printf(<span class="string">"Name = %v,Address Province = %v, Email Account = %v \n"</span>, anonuser.Name, anonuser.Address.Province, anonuser.Email.Account)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><strong>æ‰§è¡Œç»“æœ:</strong><br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åµŒå¥—ç»“æ„ä½“</span></span><br><span class="line">Struct : main.User&#123;Name:<span class="string">"WeiyiGeek"</span>, Gender:<span class="string">"ç”·"</span>, Address:main.Address&#123;Province:<span class="string">"é‡åº†"</span>, City:<span class="string">"é‡åº†"</span>&#125;&#125; </span><br><span class="line">Name = WeiyiGeek, Address City = é‡åº† </span><br><span class="line"></span><br><span class="line"><span class="comment">//åµŒå¥—åŒ¿åå­—æ®µ</span></span><br><span class="line">Struct : main.AnonUser&#123;Name:<span class="string">"WeiyiGeek"</span>, Gender:<span class="string">"ç”·"</span>, Address:main.Address&#123;Province:<span class="string">"é‡åº†"</span>, City:<span class="string">"é‡åº†"</span>&#125;, Email:main.Email&#123;Account:<span class="string">"Master@weiyigeek.top"</span>, CreateTime:<span class="string">"2021å¹´8æœˆ23æ—¥ 10:21:36"</span>&#125;&#125;</span><br><span class="line">Name = WeiyiGeek,Address Province = é‡åº†, Email Account = Master@weiyigeek.top</span><br></pre></td></tr></table></figure></p>
<p>Tips : å½“è®¿é—®ç»“æ„ä½“æˆå‘˜æ—¶ä¼šå…ˆåœ¨ç»“æ„ä½“ä¸­æŸ¥æ‰¾è¯¥å­—æ®µï¼Œæ‰¾ä¸åˆ°å†å»åµŒå¥—çš„åŒ¿åå­—æ®µä¸­æŸ¥æ‰¾ã€‚</p>
<p><br></p>
<h3 id="10-ç»“æ„ä½“çš„â€œç»§æ‰¿â€"><a href="#10-ç»“æ„ä½“çš„â€œç»§æ‰¿â€" class="headerlink" title="10.ç»“æ„ä½“çš„â€œç»§æ‰¿â€"></a>10.ç»“æ„ä½“çš„â€œç»§æ‰¿â€</h3><p>æè¿°: Goè¯­è¨€ä¸­ä½¿ç”¨ç»“æ„ä½“ä¹Ÿå¯ä»¥å®ç°å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸­é¢å‘å¯¹è±¡çš„ç»§æ‰¿ã€‚</p>
<p>ç¤ºä¾‹æ¼”ç¤º:<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// çˆ¶</span></span><br><span class="line"><span class="keyword">type</span> Animal <span class="keyword">struct</span>&#123; name <span class="keyword">string</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(a *Animal)</span> <span class="title">voice</span><span class="params">(v <span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line">  fmt.Printf(<span class="string">"æˆ‘æ˜¯åŠ¨ç‰©ï¼Œæˆ‘å« %v, æˆ‘ä¼šå« %s,"</span>, a.name, v)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å­</span></span><br><span class="line"><span class="keyword">type</span> Dog <span class="keyword">struct</span> &#123;</span><br><span class="line">  eat <span class="keyword">string</span></span><br><span class="line">  *Animal</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(d *Dog)</span> <span class="title">love</span><span class="params">()</span></span> &#123;</span><br><span class="line">  fmt.Printf(<span class="string">"ç‹—ç‹—å–œæ¬¢åƒçš„é£Ÿç‰©æ˜¯ %v.\n"</span>, d.eat)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Cat <span class="keyword">struct</span> &#123;</span><br><span class="line">  eat <span class="keyword">string</span></span><br><span class="line">  *Animal</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *Cat)</span> <span class="title">love</span><span class="params">()</span></span> &#123;</span><br><span class="line">  fmt.Printf(<span class="string">"çŒ«çŒ«å–œæ¬¢åƒçš„é£Ÿç‰©æ˜¯ %v.\n"</span>, c.eat)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  d1 := &amp;Dog&#123;</span><br><span class="line">    <span class="comment">//æ³¨æ„åµŒå¥—çš„æ˜¯ç»“æ„ä½“æŒ‡é’ˆ</span></span><br><span class="line">    Animal: &amp;Animal&#123;</span><br><span class="line">      name: <span class="string">"å°é»„"</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    eat: <span class="string">"bone"</span>,</span><br><span class="line">  &#125;</span><br><span class="line">  d1.voice(<span class="string">"æ±ªæ±ª.æ±ªæ±ª."</span>)</span><br><span class="line">  d1.love()</span><br><span class="line"></span><br><span class="line">  c1 := &amp;Cat&#123;</span><br><span class="line">    <span class="comment">//æ³¨æ„åµŒå¥—çš„æ˜¯ç»“æ„ä½“æŒ‡é’ˆ</span></span><br><span class="line">    Animal: &amp;Animal&#123;</span><br><span class="line">      name: <span class="string">"å°ç™½"</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    eat: <span class="string">"fish"</span>,</span><br><span class="line">  &#125;</span><br><span class="line">  c1.voice(<span class="string">"å–µå–µ.å–µå–µ."</span>)</span><br><span class="line">  c1.love()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>æ‰§è¡Œç»“æœ:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æˆ‘æ˜¯åŠ¨ç‰©ï¼Œæˆ‘å« å°é»„, æˆ‘ä¼šå« æ±ªæ±ª.æ±ªæ±ª.,ç‹—ç‹—å–œæ¬¢åƒçš„é£Ÿç‰©æ˜¯ bone.</span><br><span class="line">æˆ‘æ˜¯åŠ¨ç‰©ï¼Œæˆ‘å« å°ç™½, æˆ‘ä¼šå« å–µå–µ.å–µå–µ.,çŒ«çŒ«å–œæ¬¢åƒçš„é£Ÿç‰©æ˜¯ fish.</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h3 id="11-ç»“æ„ä½“ä¸â€œJSONâ€"><a href="#11-ç»“æ„ä½“ä¸â€œJSONâ€" class="headerlink" title="11.ç»“æ„ä½“ä¸â€œJSONâ€"></a>11.ç»“æ„ä½“ä¸â€œJSONâ€</h3><p>æè¿°: JSON(JavaScript Object Notation) æ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼,å…¶ä¼˜ç‚¹æ˜¯æ˜“äºäººé˜…è¯»å’Œç¼–å†™ï¼ŒåŒæ—¶ä¹Ÿæ˜“äºæœºå™¨è§£æå’Œç”Ÿæˆã€‚</p>
<p>Tips : JSONé”®å€¼å¯¹æ˜¯ç”¨æ¥ä¿å­˜JSå¯¹è±¡çš„ä¸€ç§æ–¹å¼ï¼Œé”®/å€¼å¯¹ç»„åˆä¸­çš„é”®åå†™åœ¨å‰é¢å¹¶ç”¨åŒå¼•å·â€â€åŒ…è£¹ï¼Œä½¿ç”¨å†’å·:åˆ†éš”ï¼Œç„¶åç´§æ¥ç€å€¼ï¼›å¤šä¸ªé”®å€¼ä¹‹é—´ä½¿ç”¨è‹±æ–‡,åˆ†éš”ã€‚</p>
<p>åœ¨Goä¸­æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>ç»“æ„ä½“åºåˆ—å·ç”Ÿæˆjsonå­—ç¬¦ä¸²</code>ï¼ŒåŒæ—¶ä¹Ÿèƒ½<code>é€šè¿‡jsonå­—ç¬¦ä¸²ååºåˆ—åŒ–ä¸ºç»“æ„ä½“å¾—å®ä¾‹åŒ–å¯¹è±¡</code>ï¼Œåœ¨ä½¿ç”¨jsonå­—ç¬¦ä¸²è½¬æ¢æ—¶, æˆ‘ä»¬éœ€è¦ç”¨åˆ°<code>&quot;encoding/json&quot;</code>åŒ…ã€‚</p>
<p><strong>ç»“æ„ä½“æ ‡ç­¾ï¼ˆTagï¼‰</strong><br>æè¿°: Tagæ˜¯ç»“æ„ä½“çš„å…ƒä¿¡æ¯ï¼Œå¯ä»¥åœ¨è¿è¡Œçš„æ—¶å€™é€šè¿‡åå°„çš„æœºåˆ¶è¯»å–å‡ºæ¥ï¼ŒTagåœ¨ç»“æ„ä½“å­—æ®µçš„åæ–¹å®šä¹‰ï¼Œç”±ä¸€å¯¹åå¼•å·åŒ…è£¹èµ·æ¥ï¼Œå…·ä½“çš„æ ¼å¼å¦‚ä¸‹ï¼š<code>key1:&quot;value1&quot; key2:&quot;value2&quot;</code>,å¯ä»¥çœ‹åˆ°å®ƒç”±ä¸€ä¸ªæˆ–å¤šä¸ªé”®å€¼å¯¹ç»„æˆã€‚é”®ä¸å€¼ä½¿ç”¨å†’å·åˆ†éš”ï¼Œå€¼ç”¨åŒå¼•å·æ‹¬èµ·æ¥ã€‚åŒä¸€ä¸ªç»“æ„ä½“å­—æ®µå¯ä»¥è®¾ç½®å¤šä¸ªé”®å€¼å¯¹tagï¼Œä¸åŒçš„é”®å€¼å¯¹ä¹‹é—´ä½¿ç”¨ç©ºæ ¼åˆ†éš”ã€‚</p>
<p>ä¾‹å¦‚: æˆ‘ä»¬ä¸º<code>Student</code>ç»“æ„ä½“çš„æ¯ä¸ªå­—æ®µå®šä¹‰jsonåºåˆ—åŒ–æ—¶ä½¿ç”¨çš„Tagã€‚<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Student <span class="keyword">struct</span> &#123;</span><br><span class="line">  ID     <span class="keyword">int</span>    <span class="string">`json:"id"`</span> <span class="comment">//é€šè¿‡æŒ‡å®štagå®ç°jsonåºåˆ—åŒ–è¯¥å­—æ®µæ—¶çš„key</span></span><br><span class="line">  Gender <span class="keyword">string</span> <span class="comment">//jsonåºåˆ—åŒ–æ˜¯é»˜è®¤ä½¿ç”¨å­—æ®µåä½œä¸ºkey</span></span><br><span class="line">  name   <span class="keyword">string</span> <span class="comment">//ç§æœ‰ä¸èƒ½è¢«jsonåŒ…è®¿é—®</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>æ³¨æ„äº‹é¡¹ï¼š ä¸ºç»“æ„ä½“ç¼–å†™Tagæ—¶ï¼Œå¿…é¡»ä¸¥æ ¼éµå®ˆé”®å€¼å¯¹çš„è§„åˆ™ã€‚ç»“æ„ä½“æ ‡ç­¾çš„è§£æä»£ç çš„å®¹é”™èƒ½åŠ›å¾ˆå·®ï¼Œä¸€æ—¦æ ¼å¼å†™é”™ï¼Œç¼–è¯‘å’Œè¿è¡Œæ—¶éƒ½ä¸ä¼šæç¤ºä»»ä½•é”™è¯¯ï¼Œé€šè¿‡åå°„ä¹Ÿæ— æ³•æ­£ç¡®å–å€¼ã€‚ä¾‹å¦‚ä¸è¦åœ¨keyå’Œvalueä¹‹é—´æ·»åŠ ç©ºæ ¼ã€‚</p>
<p><br/></p>
<p><strong>ç¤ºä¾‹æ¼”ç¤º:</strong><br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">"encoding/json"</span></span><br><span class="line">  <span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æ„ä½“è½¬jsonå­—ç¬¦ä¸²çš„ä¸‰ç§ç¤ºä¾‹</span></span><br><span class="line"><span class="comment">// ç»“æ„ä½“ä¸­çš„å­—æ®µé¦–å­—æ¯å¤§å°å†™å½±å“çš„å¯è§æ€§ï¼Œè¡¨ç¤ºä¸èƒ½å¯¹å¤–ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">type</span> Person1 <span class="keyword">struct</span>&#123; name, sex <span class="keyword">string</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æ„ä½“å¯¹è±¡å­—æ®µå¯ä»¥å¯¹å¤–ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">type</span> Person2 <span class="keyword">struct</span>&#123; Name, Sex <span class="keyword">string</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½†jsonå­—ç¬¦ä¸²ä¸­é”®åªè¦å°å†™æ—¶å¯ä»¥é‡‡ç”¨æ­¤ç§æ–¹å¼</span></span><br><span class="line"><span class="keyword">type</span> Person3 <span class="keyword">struct</span> &#123;</span><br><span class="line">  Name <span class="keyword">string</span> <span class="string">`json:"name"`</span></span><br><span class="line">  Sex  <span class="keyword">string</span> <span class="string">`json:"age"`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// # ç»“æ„ä½“å®ä¾‹åŒ–å¯¹è±¡è½¬JSONå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">serialize</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="comment">// ç¤ºä¾‹1.å­—æ®µé¦–å­—æ¯å¤§å°å†™å½±å“çš„å¯è§æ€§</span></span><br><span class="line">  person1 := &amp;Person1&#123;<span class="string">"weiyigeek"</span>, <span class="string">"ç”·å­©"</span>&#125;</span><br><span class="line">  person2 := &amp;Person2&#123;<span class="string">"WeiyiGeek"</span>, <span class="string">"ç”·ç”Ÿ"</span>&#125;</span><br><span class="line">  person3 := &amp;Person3&#123;<span class="string">"WeiyiGeek"</span>, <span class="string">"ç”·äºº"</span>&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//åºåˆ—åŒ–</span></span><br><span class="line">  p1, err := json.Marshal(person1)</span><br><span class="line">  p2, err := json.Marshal(person2)</span><br><span class="line">  p3, err := json.Marshal(person3)</span><br><span class="line">  <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    fmt.Printf(<span class="string">"Marshal Failed ï¼š%v"</span>, err)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç”±äºè¿”å›æ˜¯ä¸€ä¸ªå­—èŠ‚åˆ‡ç‰‡ï¼Œæ‰€ä»¥éœ€è¦å¼ºè½¬ä¸ºå­—ç¬¦ä¸²</span></span><br><span class="line">  fmt.Printf(<span class="string">"person1 -&gt; %v\nperson2 -&gt; %v\nperson3 -&gt; %v\n"</span>, <span class="keyword">string</span>(p1), <span class="keyword">string</span>(p2), <span class="keyword">string</span>(p3))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// # JSONå­—ç¬¦ä¸²è½¬ç»“æ„ä½“å®ä¾‹åŒ–å¯¹è±¡</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Person4 <span class="keyword">struct</span> &#123;</span><br><span class="line">  Name <span class="keyword">string</span>    <span class="string">`json:"name"`</span></span><br><span class="line">  Sex  <span class="keyword">string</span>    <span class="string">`json:"sex"`</span></span><br><span class="line">  Addr [<span class="number">3</span>]<span class="keyword">string</span> <span class="string">`json:"addr"`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">unserialize</span><span class="params">()</span></span> &#123;</span><br><span class="line">  jsonStr := <span class="string">`&#123;"name": "WeiyiGeek","sex": "man","addr": ["ä¸­å›½","é‡åº†","æ¸åŒ—"]&#125;`</span></span><br><span class="line">  p4 := Person4&#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åœ¨å…¶å†…éƒ¨ä¿®æ”¹p4çš„å€¼</span></span><br><span class="line">  err := json.Unmarshal([]<span class="keyword">byte</span>(jsonStr), &amp;p4)</span><br><span class="line">  <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    fmt.Printf(<span class="string">"Unmarhal Failed: %v"</span>, err)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  fmt.Printf(<span class="string">"jsonStr -&gt; Person4 : %#v\nPerson4.name : %v\n"</span>, p4, p4.Name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  serialize()</span><br><span class="line">  unserialize()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>æ‰§è¡Œç»“æœ:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">person1 -&gt; &#123;&#125;</span><br><span class="line">person2 -&gt; &#123;<span class="string">"Name"</span>:<span class="string">"WeiyiGeek"</span>,<span class="string">"Sex"</span>:<span class="string">"ç”·ç”Ÿ"</span>&#125;</span><br><span class="line">person3 -&gt; &#123;<span class="string">"name"</span>:<span class="string">"WeiyiGeek"</span>,<span class="string">"age"</span>:<span class="string">"ç”·äºº"</span>&#125;</span><br><span class="line">jsonStr -&gt; Person4 : main.Person4&#123;Name:<span class="string">"WeiyiGeek"</span>, Sex:<span class="string">"man"</span>, Addr:[3]string&#123;<span class="string">"ä¸­å›½"</span>, <span class="string">"é‡åº†"</span>, <span class="string">"æ¸åŒ—"</span>&#125;&#125;</span><br><span class="line">Person4.name : WeiyiGeek</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h3 id="12-ç»“æ„ä½“å’Œæ–¹æ³•è¡¥å……çŸ¥è¯†ç‚¹"><a href="#12-ç»“æ„ä½“å’Œæ–¹æ³•è¡¥å……çŸ¥è¯†ç‚¹" class="headerlink" title="12.ç»“æ„ä½“å’Œæ–¹æ³•è¡¥å……çŸ¥è¯†ç‚¹"></a>12.ç»“æ„ä½“å’Œæ–¹æ³•è¡¥å……çŸ¥è¯†ç‚¹</h3><p>æè¿°: å› ä¸ºsliceå’Œmapè¿™ä¸¤ç§æ•°æ®ç±»å‹éƒ½åŒ…å«äº†æŒ‡å‘åº•å±‚æ•°æ®çš„æŒ‡é’ˆï¼Œå› æ­¤æˆ‘ä»¬åœ¨éœ€è¦å¤åˆ¶å®ƒä»¬æ—¶è¦ç‰¹åˆ«æ³¨æ„ã€‚</p>
<p><strong>ç¤ºä¾‹æ¼”ç¤º:</strong><br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">  name   <span class="keyword">string</span></span><br><span class="line">  age    <span class="keyword">int8</span></span><br><span class="line">  dreams []<span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸æ¨èçš„æ–¹å¼</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *Person)</span> <span class="title">SetDreams</span><span class="params">(dreams []<span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line">  p.dreams = dreams</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­£ç¡®çš„åšæ³•æ˜¯åœ¨æ–¹æ³•ä¸­ä½¿ç”¨ä¼ å…¥çš„sliceçš„æ‹·è´è¿›è¡Œç»“æ„ä½“èµ‹å€¼ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *Person)</span> <span class="title">NewSetDreams</span><span class="params">(dreams []<span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line">  p.dreams = <span class="built_in">make</span>([]<span class="keyword">string</span>, <span class="built_in">len</span>(dreams))</span><br><span class="line">  <span class="built_in">copy</span>(p.dreams, dreams)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="comment">// (1) ä¸å®‰å…¨çš„æ–¹å¼</span></span><br><span class="line">  p1 := Person&#123;name: <span class="string">"å°ç‹å­"</span>, age: <span class="number">18</span>&#125;</span><br><span class="line">  data := []<span class="keyword">string</span>&#123;<span class="string">"åƒé¥­"</span>, <span class="string">"ç¡è§‰"</span>, <span class="string">"æ‰“è±†è±†"</span>&#125;</span><br><span class="line">  p1.SetDreams(data)</span><br><span class="line">  <span class="comment">// ä½ çœŸçš„æƒ³è¦ä¿®æ”¹ p1.dreams å—ï¼Ÿ</span></span><br><span class="line">  data[<span class="number">1</span>] = <span class="string">"ä¸ç¡è§‰"</span>        <span class="comment">// ä¼šè¦†ç›–æ›´æ”¹åˆ‡ç‰‡ä¸­çš„å€¼ä»è€Œå½±å“p1ä¸­çš„dreamså­—æ®µä¸­çš„å€¼</span></span><br><span class="line">  fmt.Println(p1.dreams) <span class="comment">// [åƒé¥­ ä¸ç¡è§‰ æ‰“è±†è±†]</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// (2) æ¨èæ–¹å¼</span></span><br><span class="line">  p2 := Person&#123;name: <span class="string">"WeiyiGeek"</span>, age: <span class="number">18</span>&#125;</span><br><span class="line">  data2 := []<span class="keyword">string</span>&#123;<span class="string">"è®¡ç®—æœº"</span>, <span class="string">"ç½‘ç»œ"</span>, <span class="string">"ç¼–ç¨‹"</span>&#125;</span><br><span class="line">  p2.NewSetDreams(data2)</span><br><span class="line">  data2[<span class="number">1</span>] = <span class="string">"NewMethod"</span> <span class="comment">// ç”±äºNewSetDreamsè¿”å›ä¸­æ˜¯å°†æ‹·è´çš„å‰¯æœ¬ç»™p2çš„dreamså­—æ®µï¼Œæ‰€ä»¥æ­¤å¤„æ›´æ”¹ä¸ä¼šå½±å“å…¶å€¼ï¼Œ</span></span><br><span class="line">  fmt.Println(p2.dreams) <span class="comment">// [è®¡ç®—æœº ç½‘ç»œ ç¼–ç¨‹]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><strong>æ‰§è¡Œç»“æœ:</strong><br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[åƒé¥­ ä¸ç¡è§‰ æ‰“è±†è±†]</span><br><span class="line">[è®¡ç®—æœº ç½‘ç»œ ç¼–ç¨‹]</span><br></pre></td></tr></table></figure></p>
<p>Tips: åŒæ ·çš„é—®é¢˜ä¹Ÿå­˜åœ¨äºè¿”å›å€¼sliceå’Œmapçš„æƒ…å†µï¼Œåœ¨å®é™…ç¼–ç è¿‡ç¨‹ä¸­ä¸€å®šè¦æ³¨æ„è¿™ä¸ªé—®é¢˜ã€‚</p>

        </div>
        
  <hr>
  <p> æ¬¢è¿å„ä½å¿—åŒé“åˆçš„æœ‹å‹ä¸€èµ·å­¦ä¹ äº¤æµï¼Œå¦‚æ–‡ç« æœ‰è¯¯è¯·åœ¨ä¸‹æ–¹ç•™ä¸‹æ‚¨å®è´µçš„ç»éªŒçŸ¥è¯†ï¼Œä¸ªäººé‚®ç®±åœ°å€<b style="color:#ff654e"><code>ã€master#weiyigeek.topã€‘</code></b>æˆ–è€…ä¸ªäººå…¬ä¼—å·<b style="color:#ff654e"><code>ã€WeiyiGeekã€‘</code></b>è”ç³»æˆ‘ã€‚ </p>

  <p> æ›´å¤šæ–‡ç« æ¥æºäº<b style="color:#03a9f4">ã€WeiyiGeek Blog - ä¸ºäº†èƒ½åˆ°è¿œæ–¹ï¼Œè„šä¸‹çš„æ¯ä¸€æ­¥éƒ½ä¸èƒ½å°‘ã€‘</b>, ä¸ªäººé¦–é¡µåœ°å€( <a style="color: #03a9f4;" href="https://weiyigeek.top" target="_blank"> https://weiyigeek.top </a> )</p>

  <p>ä¸“æ ä¹¦å†™ä¸æ˜“ï¼Œå¦‚æœæ‚¨è§‰å¾—è¿™ä¸ªä¸“æ è¿˜ä¸é”™çš„ï¼Œè¯·ç»™è¿™ç¯‡ä¸“æ  <b style="color: red;">ã€ç‚¹ä¸ªèµã€æŠ•ä¸ªå¸ã€æ”¶ä¸ªè—ã€å…³ä¸ªæ³¨ï¼Œè½¬ä¸ªå‘ã€‘(äººé—´äº”å¤§æƒ…)</b>ï¼Œè¿™å°†å¯¹æˆ‘çš„è‚¯å®šï¼Œè°¢è°¢ï¼ã€‚</p>

  <div>
    <img src="https://www.weiyigeek.top/img/weiyigeek.jpg" class="img-responsive" alt="WeiyiGeek-banner">
  </div>

  <ul style="font-weight: bolder;">
    <li>
      <p><span style="color: #03a9f4">echo&nbsp;&nbsp;"ã€ç‚¹ä¸ªèµã€‘ï¼ŒåŠ¨åŠ¨ä½ é‚£ç²—å£®çš„æ‹‡æŒ‡æˆ–è€…èŠŠèŠŠç‰æ‰‹ï¼Œäº²ï¼"</span></p>
    </li>
    <li>
      <p><span style="color: #ff9201">printf("%s",&nbsp;"ã€æŠ•ä¸ªå¸ã€‘ï¼Œä¸‡æ°´åƒå±±æ€»æ˜¯æƒ…ï¼ŒæŠ•ä¸ªç¡¬å¸è¡Œä¸è¡Œï¼Œäº²ï¼")</span></p>
    </li>
    <li>
      <p><span style="color: #02a2ff">fmt.Printf("ã€æ”¶ä¸ªè—ã€‘ï¼Œé˜…åå³ç„šä¸åƒç°ï¼Œäº²ï¼")&nbsp;&nbsp;</span></p>
    </li>
    <li>
      <p><span style="color:red">console.info("ã€è½¬ä¸ªå‘ã€‘ï¼Œè®©æ›´å¤šçš„å¿—åŒé“åˆçš„æœ‹å‹ä¸€èµ·å­¦ä¹ äº¤æµï¼Œäº²ï¼")</span></p>
    </li>
    <li>
      <p><span style="color: #ff654e">System.out.println("ã€å…³ä¸ªæ³¨ã€‘ï¼Œåç»­æµè§ˆæŸ¥çœ‹ä¸è¿·è·¯å“Ÿï¼Œäº²ï¼")</span></p>
    </li>
  </ul>

  <div>
    <img src="https://www.weiyigeek.top/img/wechat-search.png" class="img-responsive" alt="æ‰«æfollow(å…³æ³¨)WeiyiGeekå…¬ä¼—å·"  width="328" height="149">
  </div>

  <hr>
  


  <blockquote class="post-copyright">
    <div class="content">
      
        
<span class="post-time">
    æœ€åæ›´æ–°æ—¶é—´ï¼š<time datetime="2022-03-29T05:39:06.304Z" itemprop="dateUpdated">2022-03-29 13:39:06</time>
</span><br>


        <span>æ–‡ç« åŸå§‹è·¯å¾„ï¼š<a href="https://github.com/WeiyiGeek/blog/edit/master/source/_posts/ç¼–ç¨‹ä¸–ç•Œ/Go/5.Goç¼–ç¨‹å¿«é€Ÿå…¥é—¨å­¦ä¹ .md" target="_blank" rel="noopener noreferrer">_posts/ç¼–ç¨‹ä¸–ç•Œ/Go/5.Goç¼–ç¨‹å¿«é€Ÿå…¥é—¨å­¦ä¹ .md</a></span><br>
         <span class="copy-copyright">è½¬è½½æ³¨æ˜å‡ºå¤„ï¼ŒåŸæ–‡åœ°å€ï¼š<a href="/2020/4-23-594.html" target="_blank" rel="external">https://blog.weiyigeek.top/2020/4-23-594.html</a></span><br>æœ¬ç«™æ–‡ç« å†…å®¹éµå¾ª <a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">çŸ¥è¯†å…±äº« ç½²å - éå•†ä¸šæ€§ - ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…åè®®</a> 
    </div>
    <footer>
      <a href="https://blog.weiyigeek.top">
        <img src="/img/avatar.jpg" alt="WeiyiGeek">
        WeiyiGeek
      </a>
    </footer>
  </blockquote>


        
            <div class="page-reward">
  <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-rectangle waves-light">ğŸ‘ é’Ÿæ„ä½œè€…</a>
</div>
            
        
        <div class="post-footer">
            
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Go/" rel="tag">Go</a></li></ul>

            <div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://blog.weiyigeek.top/2020/4-23-594.html&title=ã€Š5.Goç¼–ç¨‹å¿«é€Ÿå…¥é—¨å­¦ä¹ ã€‹ â€” WeiyiGeek Blog&pic=https://blog.weiyigeek.top/img/avatar.jpg" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.weiyigeek.top/2020/4-23-594.html&title=ã€Š5.Goç¼–ç¨‹å¿«é€Ÿå…¥é—¨å­¦ä¹ ã€‹ â€” WeiyiGeek Blog&source=[TOC]" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.weiyigeek.top/2020/4-23-594.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€Š5.Goç¼–ç¨‹å¿«é€Ÿå…¥é—¨å­¦ä¹ ã€‹ â€” WeiyiGeek Blog&url=https://blog.weiyigeek.top/2020/4-23-594.html&via=https://blog.weiyigeek.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://blog.weiyigeek.top/2020/4-23-594.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>

        </div>
        
          <!-- è¯„è®ºç»„ä»¶ -->


<div id="gitalk-container"></div>
<script type="text/javascript" src="/js/plugins/gitalk.min.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/custom/gitalk.init.js?v=1.6.6"></script>
        
    </div>
    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="prev">
      <a href="/2020/4-23-284.html" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">2.Goç¼–ç¨‹å¿«é€Ÿå…¥é—¨å­¦ä¹ </h4>
      </a>
    </div>
  

  
    <div class="next">
      <a href="/2020/4-23-595.html" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">6.Goç¼–ç¨‹å¿«é€Ÿå…¥é—¨å­¦ä¹ </h4>
      </a>
    </div>
  
</nav>


    
    
        <aside class="post-widget">
            <nav class="post-toc-wrap" id="post-toc">
                <strong>ç›®å½•</strong>
                <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#0x01-Goè¯­è¨€åŸºç¡€ä¹‹é”™è¯¯å¤„ç†"><span class="post-toc-number">1.</span> <span class="post-toc-text">0x01 Goè¯­è¨€åŸºç¡€ä¹‹é”™è¯¯å¤„ç†</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-error-æ¥å£å®šä¹‰"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">1.error æ¥å£å®šä¹‰</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-panic-å‡½æ•°"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">2.panic å‡½æ•°</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-recover-å‡½æ•°"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">3.recover å‡½æ•°</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-é”™è¯¯å¤„ç†æœ€ä½³å®è·µ"><span class="post-toc-number">1.4.</span> <span class="post-toc-text">4.é”™è¯¯å¤„ç†æœ€ä½³å®è·µ</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#0x02-Goè¯­è¨€åŸºç¡€ä¹‹ç»“æ„ä½“"><span class="post-toc-number">2.</span> <span class="post-toc-text">0x02 Goè¯­è¨€åŸºç¡€ä¹‹ç»“æ„ä½“</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-ç±»å‹å®šä¹‰"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">1.ç±»å‹å®šä¹‰</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-ç±»å‹åˆ«å"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">2.ç±»å‹åˆ«å</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-ç»“æ„ä½“çš„å®šä¹‰"><span class="post-toc-number">2.3.</span> <span class="post-toc-text">3.ç»“æ„ä½“çš„å®šä¹‰</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-ç»“æ„ä½“å®ä¾‹åŒ–"><span class="post-toc-number">2.4.</span> <span class="post-toc-text">4.ç»“æ„ä½“å®ä¾‹åŒ–</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-ç»“æ„ä½“å†…å­˜å¸ƒå±€"><span class="post-toc-number">2.5.</span> <span class="post-toc-text">5.ç»“æ„ä½“å†…å­˜å¸ƒå±€</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#è¿ç»­å†…å­˜ç©ºé—´"><span class="post-toc-number">2.5.1.</span> <span class="post-toc-text">è¿ç»­å†…å­˜ç©ºé—´</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#å†…å­˜å¯¹é½åˆ†æ"><span class="post-toc-number">2.5.2.</span> <span class="post-toc-text">å†…å­˜å¯¹é½åˆ†æ</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-æŒ‡é’ˆç±»å‹ç»“æ„ä½“"><span class="post-toc-number">2.6.</span> <span class="post-toc-text">6.æŒ‡é’ˆç±»å‹ç»“æ„ä½“</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ç»“æ„ä½“æŒ‡é’ˆå®ä¾‹åŒ–"><span class="post-toc-number">2.6.1.</span> <span class="post-toc-text">ç»“æ„ä½“æŒ‡é’ˆå®ä¾‹åŒ–</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ç»“æ„ä½“æŒ‡é’ˆå‡½æ•°ä¼ é€’"><span class="post-toc-number">2.6.2.</span> <span class="post-toc-text">ç»“æ„ä½“æŒ‡é’ˆå‡½æ•°ä¼ é€’</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ç»“æ„ä½“æŒ‡é’ˆæ„é€ å‡½æ•°"><span class="post-toc-number">2.6.3.</span> <span class="post-toc-text">ç»“æ„ä½“æŒ‡é’ˆæ„é€ å‡½æ•°</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-ç»“æ„ä½“æ–¹æ³•ä¸æ¥æ”¶è€…"><span class="post-toc-number">2.7.</span> <span class="post-toc-text">7.ç»“æ„ä½“æ–¹æ³•ä¸æ¥æ”¶è€…</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ç»“æ„ä½“æ–¹æ³•"><span class="post-toc-number">2.7.1.</span> <span class="post-toc-text">ç»“æ„ä½“æ–¹æ³•</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#å€¼ç±»å‹çš„æ¥æ”¶è€…"><span class="post-toc-number">2.7.2.</span> <span class="post-toc-text">å€¼ç±»å‹çš„æ¥æ”¶è€…</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#æŒ‡é’ˆç±»å‹çš„æ¥æ”¶è€…"><span class="post-toc-number">2.7.3.</span> <span class="post-toc-text">æŒ‡é’ˆç±»å‹çš„æ¥æ”¶è€…</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ä»»æ„ç±»å‹çš„æ¥æ”¶è€…"><span class="post-toc-number">2.7.4.</span> <span class="post-toc-text">ä»»æ„ç±»å‹çš„æ¥æ”¶è€…</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#8-åŒ¿åç»“æ„ä½“ä¸åŒ¿åå­—æ®µ"><span class="post-toc-number">2.8.</span> <span class="post-toc-text">8.åŒ¿åç»“æ„ä½“ä¸åŒ¿åå­—æ®µ</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#9-åµŒå¥—ç»“æ„ä½“ä¸åŒ¿åå­—æ®µ"><span class="post-toc-number">2.9.</span> <span class="post-toc-text">9.åµŒå¥—ç»“æ„ä½“ä¸åŒ¿åå­—æ®µ</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-ç»“æ„ä½“çš„â€œç»§æ‰¿â€"><span class="post-toc-number">2.10.</span> <span class="post-toc-text">10.ç»“æ„ä½“çš„â€œç»§æ‰¿â€</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#11-ç»“æ„ä½“ä¸â€œJSONâ€"><span class="post-toc-number">2.11.</span> <span class="post-toc-text">11.ç»“æ„ä½“ä¸â€œJSONâ€</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#12-ç»“æ„ä½“å’Œæ–¹æ³•è¡¥å……çŸ¥è¯†ç‚¹"><span class="post-toc-number">2.12.</span> <span class="post-toc-text">12.ç»“æ„ä½“å’Œæ–¹æ³•è¡¥å……çŸ¥è¯†ç‚¹</span></a></li></ol></li></ol>
            </nav>
            <div class="toc-bar"><div>
        </aside>
    
</article>

  <div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        äººé—´è‡ªæœ‰äº”å¤§æƒ…ã€ç‚¹èµã€æŠ•å¸(èµèµ)ã€æ”¶è—ã€å…³æ³¨ï¼Œè½¬å‘ã€‘, è°¢è°¢çœ‹å‹æ”¯æŒ!
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardwechat" src="/img/reward-wechat.jpg" height="228" height="228" alt="æ‰“èµäºŒç»´ç ">
            <img id="rewardalipay" src="/img/reward-alipay.png" height="228" height="228" alt="æ‰“èµäºŒç»´ç ">
        </div>
        
        <label class="reward-toggle">
            <!-- <input id="rewardToggle" type="checkbox" class="reward-toggle-check" data-wechat="/img/reward-wechat.jpg" data-alipay="/img/reward-alipay.png"> -->
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">å¾®ä¿¡</span>
                <span class="reward-toggle-item alipay">æ”¯ä»˜å®</span>
            </div>
        </label>
        
    </div>
</div>

  
 <!-- å¾®ä¿¡å…¬ä¼—å·å…³æ³¨/æ–‡ç« ç‰ˆæƒå¤åˆ¶ -->

  <div id="btw-mask" style="position: fixed; top: 0px; right: 0px; bottom: 0px; left: 0px; opacity: 0.7; z-index: 999; background: rgb(0, 0, 0); display:none"></div>
<div id="btw-modal" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 360px; text-align: center; font-size: 13px; background: rgb(255, 255, 255); border-radius: 10px; z-index: 9999; font-family: PingFangSC-Regular, sans-serif;display:none">
<span id="btw-modal-close-btn" style="position: absolute; top: 5px; right: 15px; line-height: 1.8; font-size: 15px; cursor: pointer; opacity: 0.2; z-index: 9999; color: rgb(0, 0, 0); background: none; border: none; outline: none;">X</span>
<p id="btw-modal-header" style="margin-top: 40px; line-height: 1.8; font-size: 13px; ">
<b style="color:#6190e8;">ä½ å¥½æœ‹å‹,å¯ä»¥å…³ä¸ªæ³¨å—? â¤ <br> è¿™å°†æ˜¯æˆ‘æŒç»­æ›´æ–°æ–‡ç« çš„åŠ¨åŠ›æºæ³‰ï¼Œè°¢è°¢æ”¯æŒï¼(à¹‘â€²á´—â€µà¹‘) </b> <br> å¦‚ä¸æƒ³å…³æ³¨è¯·ç‚¹å‡»å³ä¸Šè§’çš„ã€Xã€‘<br>
<br>Method 1.Please visit <strong><a href="https://twitter.com/WeiyiGeek" target="_blank" rel="noopener" style="color: rgb(240, 65, 52);text-decoration:underline;">ã€My Twitterã€‘</a></strong>. There is an article verification code in the homepage.
<br>æ–¹å¼2.è¯·è®¿é—®æœ¬åšä¸»çš„Bç«™<strong><a href="https://space.bilibili.com/385802642" target="_blank" rel="noopener" style="color: rgb(240, 65, 52);text-decoration:underline;">ã€WeiyiGeekã€‘</a></strong>é¦–é¡µå…³æ³¨UPä¸»,<br>å°†è‡ªåŠ¨éšæœºè·å–è§£é”éªŒè¯ç ã€‚
<br>æ–¹å¼3.æ‰«ä¸€æ‰«ä¸‹æ–¹äºŒç»´ç ï¼Œå…³æ³¨æœ¬ç«™<strong>å®˜æ–¹å…¬ä¼—å·</strong><br>
å›å¤ï¼š<strong style="color: rgb(240, 65, 52);">éªŒè¯ç </strong>
å°†è·å–<strong style="color: rgb(240, 65, 52);">è§£é”(æœ‰æ•ˆæœŸ7å¤©)</strong>æœ¬ç«™æ‰€æœ‰æŠ€æœ¯æ–‡ç« å“Ÿ!</p>
<img src="/img/wechat-search.png" style="width: 300px; margin-top: 10px;">
<div id="btw-modal-input-code" style="margin-top: 20px; background: rgb(255, 255, 255);">
  <input id="btw-modal-input" type="number" minlength="4" maxlength="4" placeholder="è¯·è¾“å…¥éªŒè¯ç |Verification Code"
    style="width: 165px; height: 32px; line-height: 32px; padding: 0px 10px; margin: 0px 10px; font-size: 13px; text-rendering: auto; text-transform: none; cursor: text; outline: none; box-sizing: border-box; border: 1px solid rgb(221, 221, 221); -webkit-appearance: textfield; background-color: white; -webkit-rtl-ordering: logical;"/>
  <button id="btw-submit-btn" onclick="yzm_vertify()"
    style="padding: 0px 20px; height: 32px; font-size: 14px; outline: none; border: none; color: rgb(255, 255, 255); background: rgb(222, 104, 109); cursor: pointer;">æ
    äº¤</button> </div>
<p id="btw-footer" style="margin: 40px 0px 20px; color: rgb(153, 153, 153);">@WeiyiGeek - ä¸ºäº†èƒ½åˆ°è¿œæ–¹ï¼Œè„šä¸‹çš„æ¯ä¸€æ­¥éƒ½ä¸èƒ½å°‘</p>
</div>


</div>

    </main>
    <footer class="footer ">
    
    <div class="top">
        
            <p>
    <span>Linksï¼š</span>
    
    <span class="blogroll-item">
        <a href="https://weiyigeek.top" target="_blank">https://weiyigeek.top</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.weiyigeek.top" target="_blank">https://blog.weiyigeek.top</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://weiyigeek.top/img/wechat-search.png" target="_blank">å…¬ä¼—è´¦å·</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://space.bilibili.com/385802642/article" target="_blank">å“”å“©å“”å“©ä¸“æ </a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://github.com/weiyigeek" target="_blank">ä¸ªäººGithub</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://gitee.com/WeiyiGeek" target="_blank">ä¸ªäººGitee</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.zhihu.com/people/weiyiSec" target="_blank">ä¸ªäººçŸ¥ä¹</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.cnblogs.com/WeiyiGeek" target="_blank">åšå®¢å›­</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://my.oschina.net/weiyigeek" target="_blank">OSCHINA</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.toutiao.com/c/user/token/MS4wLjABAAAAqcPSoMqfctaEqJpGSF775eeCjWkrop4AOyLITdMx-L78F5iXzfQcSRM5sY4dq3wR" target="_blank">ä»Šæ—¥å¤´æ¡</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.csdn.net/u013072756?type=lately" target="_blank">CSDN</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.jianshu.com/u/5199a1104739" target="_blank">ç®€ä¹¦</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://cloud.tencent.com/developer/user/1389665/articles" target="_blank">è…¾è®¯äº‘+äº‘ç¤¾åŒº</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://cuttlefish.baidu.com/shop/75c5dbd8d15abe23482f4d40" target="_blank">ç™¾åº¦æ–‡åº“</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://author.baidu.com/home?from=blog&app_id=1726736601523415" target="_blank">ITæå®¢çŸ¥è¯†åˆ†äº«</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.51cto.com/weiyigeek" target="_blank">51CTOåšå®¢</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://juejin.cn/user/122767337595934" target="_blank">æ˜é‡‘</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://weibo.com/a/hot/7622022703618049_1.html" target="_blank">å¾®åšæ–‡ç« </a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.xiaohongshu.com/user/profile/627c98bb000000001000e7ba" target="_blank">å°çº¢ä¹¦</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://segmentfault.com/u/weiyigeek" target="_blank">Segmentfault</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.douyin.com/user/MS4wLjABAAAAMSBdMja6XLsdmzafb0RNbFeBemIOk38K1PaOClZeI1Q" target="_blank">æŠ–éŸ³ä¸»é¡µ</a>
    </span>
    
</p>

        
    </div>
    
    <div class="bottom">
      <p>
        <span>WeiyiGeek &copy; 2018 - 2022 <a href="https://weiyigeek.top" target="_blank" rel="noopener">weiyigeek.top</a> All rights reserved. ITå”¯ä¸€æå®¢ ç‰ˆæƒæ‰€æœ‰ </span>
        
        <span>
          Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/weiyigeek" target="_blank">mellow</a>
        </span>
        
        <br/>è®¿é—®ç»Ÿè®¡
        <span><a href="/sitemap.xml" target="_blank" rel="Sitemaps-ç«™ç‚¹åœ°å›¾">Sitemaps</a> </span>
        <span><a href="/baidusitemap.xml" target="_blank" rel="baidusitemaps-ç™¾åº¦ç«™ç‚¹åœ°å›¾">ç«™ç‚¹åœ°å›¾</a> </span>
        <!-- 
  -->
        <br/>ICPå¤‡æ¡ˆå·<span><a href="https://beian.miit.gov.cn" target="_blank">æ¸ICPå¤‡2022003447å·</a></span>
        <br/>
        <div id="cc-myssl-id">
          <a href="https://myssl.com/blog.weiyigeek.top?from=mysslid" target="_blank" rel="noopener"><img src="https://static.myssl.com/res/images/myssl-id1.png" alt="MySSLå®‰å…¨è®¤è¯" style="max-height:50px;display:block;margin:0 auto"></a>
        </div>
      </p>
    </div>
</footer>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>


<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://blog.weiyigeek.top/2020/4-23-594.html&title=ã€Š5.Goç¼–ç¨‹å¿«é€Ÿå…¥é—¨å­¦ä¹ ã€‹ â€” WeiyiGeek Blog&pic=https://blog.weiyigeek.top/img/avatar.jpg" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.weiyigeek.top/2020/4-23-594.html&title=ã€Š5.Goç¼–ç¨‹å¿«é€Ÿå…¥é—¨å­¦ä¹ ã€‹ â€” WeiyiGeek Blog&source=[TOC]" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.weiyigeek.top/2020/4-23-594.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€Š5.Goç¼–ç¨‹å¿«é€Ÿå…¥é—¨å­¦ä¹ ã€‹ â€” WeiyiGeek Blog&url=https://blog.weiyigeek.top/2020/4-23-594.html&via=https://blog.weiyigeek.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://blog.weiyigeek.top/2020/4-23-594.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>æ‰«ä¸€æ‰«ï¼Œåˆ†äº«åˆ°å¾®ä¿¡</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACKklEQVR42u3aQW4EIQwF0bn/pTvbSJOg+jaTCFO9inoIzWNhge3XCz/P2/Pbr2T89zHreTY/MmTIOJbxLJ/1GI75benv78l3f5hHhgwZFzD41LVAvB7TYcuQIUNGOqb2pvNdGTJkyCDHtfU86wvqvwVcGTJkHMggl1iSFOOJNr41m+/iMmTIOJDBs+5///dH6hsyZMg4ivGET63MSWZ4Go8MGTJmM3iAI4fF2qLRBZXMIEOGjKEMXnrki+iPid/IkCHjAkaaJksXykN2MazLkCHjAkaaxK8VODuw4GgoQ4aM0Yw0QU8OcP1QjrZPhgwZoxk8CKZtE2tqunFoc2XIkDGUkV5KedFxVzEA/ZcMGTIuYKSFAR4QefhOV7KhhClDhoxDGOmCeBKfB+jOlbi4rzJkyDiKkTZD8M+nR8a0/eLFf5YhQ8Ygxt42C54sq4Vg1DMiQ4aMEYx+0OTtXPwynG6TDBkyZjM6991OGOXXY3RMlCFDxmgGn6jzgfTwl7ZoyJAh4x5GZ4npsZKXOYNyggwZMi5gpMUAfqTrt2ugMqcMGTIuYHRCJN+OWmkhuMTKkCFjHKN2ZeUtFLWEHd9KGTJk3MBIwxxvxUhDcH82GTJkzGbUjoZ7k3Fpy4UMGTLuZKTtFJ/rziq2jsmQIUPGptRY2roRXGJlyJAho3Ec7JQTeDJOhgwZNzDSYkCnCYOE1w+m22TIkHEgo9WpUSot8DIDL2rKkCFjKOMLhUwi4AKHcxkAAAAASUVORK5CYII=" alt="å¾®ä¿¡åˆ†äº«äºŒç»´ç ">
</div>


    
    <!-- main-js -->
<script type="text/javascript" src="/js/jquery/2.1.0-jquery.min.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/plugins/fastclick.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/plugins/ios-orientationchange-fix.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/jquery/3.5.2-jquery.fancybox.min.js?v=1.6.6"></script>
<!--  //cdn.bootcss.com/node-waves/0.7.4/waves.min.js -->
<script type="text/javascript" src="/js/node-waves/0.7.4-waves.min.js?v=1.6.6"></script> 

<script type="text/javascript" src="/js/method.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/blog.js?v=1.6.6"></script>

<!-- third-party -->
<script type="text/javascript" src="/js/plugins/local_search.js?v=1.6.6"></script>
<script type="text/javascript">
	var search_path = "search.xml";
	if (search_path.length === 0) { search_path = "search.xml";}
	var path = "/" + search_path;
	searchFunc(path, "local-search-input", "local-search-result");
</script> 

<!-- <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> --> 



  


<script>
  var _hmt = _hmt || [];
  (function() {
    // ç™¾åº¦ç»Ÿè®¡
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?53923c4b5560739bc0ed61e183be6acf";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();
</script>
 


<!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
            processEscapes: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.staticfile.org/mathjax/2.7.9/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
 
<script>
    (function() {
        var OriginTitile = document.title, titleTime;
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                document.title = 'WeiyiGeek Blog-å…³æ³¨äºç½‘ç»œå®‰å…¨_ç‰©è”ç½‘å®‰å…¨å¼€å‘_ç½‘ç»œå®‰å…¨è¿ç»´-å­¦ä¹ å¿ƒå¾—åˆ†äº«';
                clearTimeout(titleTime);
            } else {
                document.title = '(ã¤ã‚§âŠ‚)å’¦!åˆå¥½äº†!';
                titleTime = setTimeout(function() {
                    document.title = OriginTitile;
                },2000);
            }
        });
    })();
</script>
 
     <script type="text/javascript" src="/js/custom/copytips.js?v=1.6.6"></script> 
</body>
</html>
