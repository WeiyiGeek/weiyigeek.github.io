{"title":"IIS应用容器安装和使用","slug":"系统运维/Application/Web/WebApp/IIS/IIS应用容器安装和使用","date":"2019-08-28T01:34:30.000Z","updated":"2020-10-10T02:37:44.535Z","url":"2019/8-28-126.html","path":"api/articles/2019/8-28-126.html.json","covers":null,"content":"<p>[TOC]</p>\n<a id=\"more\"></a>\n<h4 id=\"0x00-快速入门\"><a href=\"#0x00-快速入门\" class=\"headerlink\" title=\"0x00 快速入门\"></a>0x00 快速入门</h4><p>描述: IIS 全称为 Internet Information Service（Internet 信息服务），它的功能是供信息服务，如架设 http、 ftp 服务器等，是WindowsNT内核的系统自带的，不需要下载。</p>\n<p><strong>应用程序池</strong><br>应用程序池是将一个或多个应用程序链接到一个或多个工作进程集合的配置。因为应用程序池中的应用程序与其他应用程序被工作进程边界分隔，所以某个应用程序池中的应用程序不会受到其他应用程序池中应用程序所产生的问题的影响。</p>\n<p>工作进程隔离模式防止一个应用程序或站点停止了而影响另一个应用程序或站点，大大增强了IIS的可靠性。应用程序池的建立比较简单，打开IIS管理器，只在“应用程序池”上右键选择新建“应用程序池”即可。<br>新建完成后就可以为不同的网站选择不同的应用程序池</p>\n<blockquote>\n<p>IIS管理器-&gt;右键属性-&gt;主目录-&gt;应用程序池进行选择</p>\n</blockquote>\n<p><strong>IIS 日志格式</strong><br>在IIS管理器找到对应的<code>网站==&gt;右键==&gt;属性</code>，可以看到日志启用选项,点击属性按钮就可以对日志计划和格式进行设置了，也可以点击下拉按钮选择默认的几种的格式</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">2017-09-28 03:45:30 W3SVC1 192.168.228.131 GET /test.php - 80 - 192.168.228.1 Mozilla/5.0+(Windows+NT+10.0;+WOW64;+rv:55.0)+Gecko/20100101+Firefox/55.0 200 0 0</span><br></pre></td></tr></table></figure>\n<p>在日志格式中的对应关系为</p>\n<ul>\n<li>日期：2017-09-28</li>\n<li>时间：03:45:30</li>\n<li>服务名：W3SVC1</li>\n<li>用户名：-</li>\n<li>服务器IP：192.168.228.131</li>\n<li>服务器端口：80</li>\n<li>客户端IP：192.168.228.1</li>\n<li>方法：GET</li>\n<li>URI资源：/test.php</li>\n<li>用户代理：</li>\n<li>Mozilla/5.0+(Windows+NT+10.0;+WOW64;+rv:55.0)+Gecko/20100101+Firefox/55.0</li>\n<li>协议状态：200</li>\n<li>协议子状态：0</li>\n<li>Win32状态：0</li>\n</ul>\n<h4 id=\"安全加固\"><a href=\"#安全加固\" class=\"headerlink\" title=\"安全加固\"></a>安全加固</h4><p><strong>身份验证</strong><br>描述:身份验证是验证客户端身份的行为，并控制客户端对资源的访问能力。<br>一般情况下客户端必须提供某些证据(凭据)才能够正常的访问,通常，凭据指用户名和密码；</p>\n<p>IIS有多种身份验证方式主要有:</p>\n<ul>\n<li>(1)匿名访问：启用了匿名访问访问站点时，不要求提供经过身份验证的用户凭据(公开让大家浏览的信息)</li>\n</ul>\n<p>用户尝试连接您的网站时IIS 会将该连接分配给 <code>IUSER_ComputerName</code>帐户，其中 ComputerName 是运行 IIS 的服务器的名称;<code>其帐户为 Guests 组的成员</code>，密码为空;</p>\n<blockquote>\n<p>启用匿名访问设置:IIS管理器-&gt;右键属性-&gt;目录安全性-&gt;身份认证和访问控制-&gt;编辑-&gt;启用匿名访问(实际上选择用户);</p>\n</blockquote>\n<p><em>注意事项:</em><br>如果启用匿名访问 IIS 会始终先使用匿名身份验证来尝试验证用户身份，即使启用其他身份验证方法也是如此，也就是说<code>启用匿名身份验证后其他验证方式也会失效</code>。</p>\n<ul>\n<li>(2)集成Windows身份验证<br>NTLM 或 Windows NT 质询/响应身份验证，此方法以 Kerberos 票证的形式通过网络向用户发送身份验证信息，并提供较高的安全级别，Windows 集成身份验证使用 Kerberos 版本 5 和 NTLM 身份验证<blockquote>\n<p>启用集成Windows身份验证访问设置:IIS管理器-&gt;右键属性-&gt;目录安全性-&gt;身份认证和访问控制-&gt;编辑-&gt;取消匿名访问(并且选中集成Windows身份验证)</p>\n</blockquote>\n</li>\n</ul>\n<p><em>注意事项:</em><br>使用这个验证方法在访问网页时需要输入windows服务器的账户和密码用户名和密码,并且在浏览器的声明周期内只需输入一次密码;<br>如果选择了多个身份验证选项 IIS 会首先尝试协商最安全的方法，然后它按可用身份验证协议的列表向下逐个试用其他协议，直到找到客户端和服务器都支持的某种共有的身份验证协议。</p>\n<ul>\n<li><p>(3)Windows域服务器的摘要式身份验证<br>描述:摘要式身份验证需要用户 ID 和密码，可提供中等的安全级别，如果要允许从公共网络访问安全信息，则可以使用这种方法。(方法与基本身份验证提供的功能相同)<br>注：如果启用摘要式身份验证，需要在领域框中键入领域名称。</p>\n</li>\n<li><p>(4)基本身份验证（以明文形式发送密码）<br>描述:基本身份验证需要用户 ID 和密码，提供的安全级别较低。用户凭据以明文形式在网络中发送可以采用协议分析程序都能读取到密码,优点是可以与大多数Web客户端兼容；<br>注：如果启用基本身份验证，需要在“默认域”框中键入要使用的域名，还可以选择在领域框中输入一个值。</p>\n</li>\n<li>(5)NET Passport 身份验证<br>描述:.NET Passport 身份验证提供了单一登录安全性，为用户提供对 Internet 上各种服务的访问权限,如果选择此选项对 IIS 的请求必须在查询字符串或 Cookie 中包含有效的 .NET Passport 凭据。</li>\n</ul>\n<p>注意:<br>如果 IIS 不检测 .NET Passport 凭据，请求就会被重定向到 .NET Passport 登录页。<br>如果选择此选项，所有其他身份验证方法都将不可用（显示为灰色）。</p>\n<p><strong>权限控制</strong><br>描述:权限控制可以通过文件权限进行设置，由于IIS账户隶属于Guests账户，可以设置整个Guests账户或只设置IIS账户，对于上传目录一定要禁止执行权限，<code>仅赋予读写权限</code>。</p>\n<blockquote>\n<p>wwwroot根目录-&gt;属性-&gt;安全-&gt;IUSER用户-&gt;进行权限配置;</p>\n</blockquote>\n","comments":true,"excerpt":"[TOC]","categories":[{"name":"SystemOperation","path":"api/categories/SystemOperation.json"}],"tags":[{"name":"IIS服务","path":"api/tags/IIS服务.json"}]}