{"title":"secedit命令行操作组策略","slug":"系统运维/Windows/常用命令/系统高级类命令/secedit命令行操作组策略","date":"2019-05-28T14:16:30.000Z","updated":"2023-01-31T02:29:10.468Z","url":"2019/5-28-246.html","path":"api/articles/2019/5-28-246.html.json","covers":["https://img.weiyigeek.top/2019/1/20190821161444.png","https://img.weiyigeek.top/2019/1/20190821162822.png","https://img.weiyigeek.top/2019/1/20190821213033.png"],"content":"<p>[TOC]</p>\n<a id=\"more\"></a>\n<h4 id=\"快速入门\"><a href=\"#快速入门\" class=\"headerlink\" title=\"快速入门\"></a>快速入门</h4><p>描述:组策略是建立Windows安全环境的重要手段，尤其是在Windows域环境下;<br>系统管理员肯定使用<code>gpedit.msc</code>在窗口界面下访问组策略，然而我们有木有办法可以再命令行下进行设置,答案肯定是有的就是今天的主人公 secedit.exe;<br><figure class=\"image-box\">\n                <img src=\"https://img.weiyigeek.top/2019/1/20190821161444.png\" alt=\"WeiyiGeek.gpedit.msc\" title=\"\" class=\"\">\n                <p>WeiyiGeek.gpedit.msc</p>\n            </figure></p>\n<p>组策略的计算机安全策略模板存放路径</p>\n<ul>\n<li>%SYSTEMROOT%\\security\\templates</li>\n</ul>\n<p>系统默认的安全数据库路径</p>\n<ul>\n<li>%windir%\\security\\database\\secedit.sdb</li>\n</ul>\n<p>如果没有/log指定配置操作信息将被记录到scesrv.log</p>\n<ul>\n<li>%windir%\\security\\logs目录之中</li>\n</ul>\n<figure class=\"image-box\">\n                <img src=\"https://img.weiyigeek.top/2019/1/20190821162822.png\" alt=\"WeiyiGeek.secedit.sdb\" title=\"\" class=\"\">\n                <p>WeiyiGeek.secedit.sdb</p>\n            </figure>\n<p>基础语法:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">此命令的语法为:</span><br><span class=\"line\">secedit [/configure | /analyze | /import | /<span class=\"built_in\">export</span> | /validate | /generaterollback]</span><br><span class=\"line\"></span><br><span class=\"line\">参数:</span><br><span class=\"line\">/quit 安静模式</span><br></pre></td></tr></table></figure></p>\n<hr>\n\n<h4 id=\"secedit-命令详述\"><a href=\"#secedit-命令详述\" class=\"headerlink\" title=\"secedit 命令详述\"></a>secedit 命令详述</h4><h5 id=\"secedit-export\"><a href=\"#secedit-export\" class=\"headerlink\" title=\"secedit /export\"></a>secedit /export</h5><p>描述:允许你导出保存在数据库中的安全设置。<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">语法:</span><br><span class=\"line\">secedit /<span class=\"built_in\">export</span> [/db filename] [/mergedpolicy] /cfg filename [/areas area1 area2...] [/<span class=\"built_in\">log</span> filename]</span><br><span class=\"line\">参数：</span><br><span class=\"line\">/db filename - 指定要导出数据的数据库。如果没有指定，将使用系统安全数据库。</span><br><span class=\"line\">/cfg filename - 指定要导出数据库内容的安全模板。</span><br><span class=\"line\">/mergedpolicy - 合并并且导出域和本地策略安全设置。</span><br><span class=\"line\">/areas - 指定要应用到系统的安全性范围。如果没有指定此参数，在数据库中定义的所有安全性设置都将应用到系统中。 要配置多个范围，用空格将它们分开。下列安全性范围是受支持的:</span><br><span class=\"line\">* SECURITYPOLICY - 包括帐户策略，审核策略，事件日志设置和安全选项。</span><br><span class=\"line\">* GROUP_MGMT - 包括受限制的组设置</span><br><span class=\"line\">* USER_RIGHTS - 包括用户权限分配</span><br><span class=\"line\">* REGKEYS - 包括注册表权限</span><br><span class=\"line\">* FILESTORE - 包括文件系统权限</span><br><span class=\"line\">* SERVICES - 包括系统服务设置</span><br><span class=\"line\">/<span class=\"built_in\">log</span> filename - 指定要记录导出操作状态的文件。</span><br></pre></td></tr></table></figure></p>\n<p>基础信息:<br><figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#示例1.命令行获取本地安全策略</span></span><br><span class=\"line\">secedit /export /cfg current.inf /log secedit.log</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#Built-In Local Groups </span></span><br><span class=\"line\"><span class=\"comment\">#Administrators组 *S-1-5-32-544</span></span><br><span class=\"line\"><span class=\"comment\">#Users组 *S-1-5-32-545</span></span><br><span class=\"line\"><span class=\"comment\">#GUESTS组 *S-1-5-32-546</span></span><br><span class=\"line\"><span class=\"comment\">#BUILTIN\\ACCOUNT OPERATORS *S-1-5-32-548 (=0x224)</span></span><br><span class=\"line\"><span class=\"comment\">#UILTIN\\SERVER OPERATORS *S-1-5-32-549 (=0x225)</span></span><br><span class=\"line\"><span class=\"comment\">#BUILTIN\\PRINT OPERATORS *S-1-5-32-550 (=0x226)</span></span><br><span class=\"line\"><span class=\"comment\">#BUILTIN\\BACKUP OPERATORS *S-1-5-32-551 (=0x227)</span></span><br><span class=\"line\"><span class=\"comment\">#BUILTIN\\REPLICATOR  *S-1-5-32-552 (=0x228) </span></span><br><span class=\"line\"></span><br><span class=\"line\">$type current.inf</span><br><span class=\"line\"><span class=\"section\">[Unicode]</span></span><br><span class=\"line\"><span class=\"attr\">Unicode</span>=<span class=\"literal\">yes</span></span><br><span class=\"line\"><span class=\"section\">[System Access]</span></span><br><span class=\"line\"><span class=\"attr\">MinimumPasswordAge</span> = <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"attr\">MaximumPasswordAge</span> = <span class=\"number\">42</span></span><br><span class=\"line\"><span class=\"attr\">MinimumPasswordLength</span> = <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"attr\">PasswordComplexity</span> = <span class=\"number\">0</span> ;是否启用密码复杂度</span><br><span class=\"line\"><span class=\"attr\">PasswordHistorySize</span> = <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"attr\">LockoutBadCount</span> = <span class=\"number\">0</span> ;锁定次数</span><br><span class=\"line\"><span class=\"attr\">RequireLogonToChangePassword</span> = <span class=\"number\">0</span> ;登录就需要登录密码</span><br><span class=\"line\"><span class=\"attr\">ForceLogoffWhenHourExpire</span> = <span class=\"number\">0</span>    ;强制下线</span><br><span class=\"line\"><span class=\"attr\">NewAdministratorName</span> = <span class=\"string\">\"Administrator\"</span>  ;管理员的默认名称</span><br><span class=\"line\"><span class=\"attr\">NewGuestName</span> = <span class=\"string\">\"Guest\"</span></span><br><span class=\"line\"><span class=\"attr\">ClearTextPassword</span> = <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"attr\">LSAAnonymousNameLookup</span> = <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"attr\">EnableAdminAccount</span> = <span class=\"number\">0</span> ;是否启用管理员账户</span><br><span class=\"line\"><span class=\"attr\">EnableGuestAccount</span> = <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"section\">[Event Audit]</span></span><br><span class=\"line\"><span class=\"attr\">AuditSystemEvents</span> =<span class=\"number\">3</span>   ;审核系统事件 成功、失败</span><br><span class=\"line\"><span class=\"attr\">AuditLogonEvents</span> = <span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"attr\">AuditObjectAccess</span> = <span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"attr\">AuditPrivilegeUse</span> = <span class=\"number\">2</span></span><br><span class=\"line\"><span class=\"attr\">AuditPolicyChange</span> = <span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"attr\">AuditAccountManage</span> = <span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"attr\">AuditProcessTracking</span> = <span class=\"number\">2</span> ;审核过程追踪 失败</span><br><span class=\"line\"><span class=\"attr\">AuditDSAccess</span> = <span class=\"number\">1</span>        ;审核目录服务访问 成功</span><br><span class=\"line\"><span class=\"attr\">AuditAccountLogon</span> = <span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"section\">[Registry Values]</span></span><br><span class=\"line\">MACHINE\\Software\\Microsoft\\Windows NT\\CurrentVersion\\Setup\\RecoveryConsole\\SecurityLevel=4,0</span><br><span class=\"line\">MACHINE\\Software\\Microsoft\\Windows NT\\CurrentVersion\\Setup\\RecoveryConsole\\SetCommand=4,0</span><br><span class=\"line\">MACHINE\\Software\\Microsoft\\Windows NT\\CurrentVersion\\Winlogon\\CachedLogonsCount=1,\"10\"</span><br><span class=\"line\">MACHINE\\Software\\Microsoft\\Windows NT\\CurrentVersion\\Winlogon\\ForceUnlockLogon=4,0</span><br><span class=\"line\">MACHINE\\Software\\Microsoft\\Windows NT\\CurrentVersion\\Winlogon\\PasswordExpiryWarning=4,5</span><br><span class=\"line\">MACHINE\\Software\\Microsoft\\Windows NT\\CurrentVersion\\Winlogon\\ScRemoveOption=1,\"0\"</span><br><span class=\"line\">MACHINE\\Software\\Microsoft\\Windows\\CurrentVersion\\Policies\\System\\ConsentPromptBehaviorAdmin=4,5</span><br><span class=\"line\">MACHINE\\Software\\Microsoft\\Windows\\CurrentVersion\\Policies\\System\\ConsentPromptBehaviorUser=4,3</span><br><span class=\"line\">MACHINE\\Software\\Microsoft\\Windows\\CurrentVersion\\Policies\\System\\DontDisplayLastUserName=4,0</span><br><span class=\"line\">MACHINE\\Software\\Microsoft\\Windows\\CurrentVersion\\Policies\\System\\EnableInstallerDetection=4,1</span><br><span class=\"line\">MACHINE\\Software\\Microsoft\\Windows\\CurrentVersion\\Policies\\System\\EnableLUA=4,1</span><br><span class=\"line\">MACHINE\\Software\\Microsoft\\Windows\\CurrentVersion\\Policies\\System\\EnableSecureUIAPaths=4,1</span><br><span class=\"line\">MACHINE\\Software\\Microsoft\\Windows\\CurrentVersion\\Policies\\System\\EnableUIADesktopToggle=4,0</span><br><span class=\"line\">MACHINE\\Software\\Microsoft\\Windows\\CurrentVersion\\Policies\\System\\EnableVirtualization=4,1</span><br><span class=\"line\">MACHINE\\Software\\Microsoft\\Windows\\CurrentVersion\\Policies\\System\\LegalNoticeCaption=1,\"\"</span><br><span class=\"line\">MACHINE\\Software\\Microsoft\\Windows\\CurrentVersion\\Policies\\System\\LegalNoticeText=7,</span><br><span class=\"line\">MACHINE\\Software\\Microsoft\\Windows\\CurrentVersion\\Policies\\System\\PromptOnSecureDesktop=4,1</span><br><span class=\"line\">MACHINE\\Software\\Microsoft\\Windows\\CurrentVersion\\Policies\\System\\ScForceOption=4,0</span><br><span class=\"line\">MACHINE\\Software\\Microsoft\\Windows\\CurrentVersion\\Policies\\System\\ShutdownWithoutLogon=4,1</span><br><span class=\"line\">MACHINE\\Software\\Microsoft\\Windows\\CurrentVersion\\Policies\\System\\UndockWithoutLogon=4,1</span><br><span class=\"line\">MACHINE\\Software\\Microsoft\\Windows\\CurrentVersion\\Policies\\System\\ValidateAdminCodeSignatures=4,0</span><br><span class=\"line\">MACHINE\\Software\\Policies\\Microsoft\\Windows\\Safer\\CodeIdentifiers\\AuthenticodeEnabled=4,0</span><br><span class=\"line\">MACHINE\\System\\CurrentControlSet\\Control\\Lsa\\AuditBaseObjects=4,0</span><br><span class=\"line\">MACHINE\\System\\CurrentControlSet\\Control\\Lsa\\CrashOnAuditFail=4,0</span><br><span class=\"line\">MACHINE\\System\\CurrentControlSet\\Control\\Lsa\\DisableDomainCreds=4,0</span><br><span class=\"line\">MACHINE\\System\\CurrentControlSet\\Control\\Lsa\\EveryoneIncludesAnonymous=4,0</span><br><span class=\"line\">MACHINE\\System\\CurrentControlSet\\Control\\Lsa\\FIPSAlgorithmPolicy\\Enabled=4,0</span><br><span class=\"line\">MACHINE\\System\\CurrentControlSet\\Control\\Lsa\\ForceGuest=4,0</span><br><span class=\"line\">MACHINE\\System\\CurrentControlSet\\Control\\Lsa\\FullPrivilegeAuditing=3,0</span><br><span class=\"line\">MACHINE\\System\\CurrentControlSet\\Control\\Lsa\\LimitBlankPasswordUse=4,1</span><br><span class=\"line\">MACHINE\\System\\CurrentControlSet\\Control\\Lsa\\MSV1_0\\NTLMMinClientSec=4,536870912</span><br><span class=\"line\">MACHINE\\System\\CurrentControlSet\\Control\\Lsa\\MSV1_0\\NTLMMinServerSec=4,536870912</span><br><span class=\"line\">MACHINE\\System\\CurrentControlSet\\Control\\Lsa\\NoLMHash=4,1</span><br><span class=\"line\">MACHINE\\System\\CurrentControlSet\\Control\\Lsa\\RestrictAnonymous=4,0</span><br><span class=\"line\">MACHINE\\System\\CurrentControlSet\\Control\\Lsa\\RestrictAnonymousSAM=4,1</span><br><span class=\"line\">MACHINE\\System\\CurrentControlSet\\Control\\Print\\Providers\\LanMan Print Services\\Servers\\AddPrinterDrivers=4,0</span><br><span class=\"line\">MACHINE\\System\\CurrentControlSet\\Control\\SecurePipeServers\\Winreg\\AllowedExactPaths\\Machine=7,System\\CurrentControlSet\\Control\\ProductOptions,System\\CurrentControlSet\\Control\\Server Applications,Software\\Microsoft\\Windows NT\\CurrentVersion</span><br><span class=\"line\">MACHINE\\System\\CurrentControlSet\\Control\\SecurePipeServers\\Winreg\\AllowedPaths\\Machine=7,System\\CurrentControlSet\\Control\\Print\\Printers,System\\CurrentControlSet\\Services\\Eventlog,Software\\Microsoft\\OLAP Server,Software\\Microsoft\\Windows NT\\CurrentVersion\\Print,Software\\Microsoft\\Windows NT\\CurrentVersion\\Windows,System\\CurrentControlSet\\Control\\ContentIndex,System\\CurrentControlSet\\Control\\Terminal Server,System\\CurrentControlSet\\Control\\Terminal Server\\UserConfig,System\\CurrentControlSet\\Control\\Terminal Server\\DefaultUserConfiguration,Software\\Microsoft\\Windows NT\\CurrentVersion\\Perflib,System\\CurrentControlSet\\Services\\SysmonLog</span><br><span class=\"line\">MACHINE\\System\\CurrentControlSet\\Control\\Session Manager\\Kernel\\ObCaseInsensitive=4,1</span><br><span class=\"line\">MACHINE\\System\\CurrentControlSet\\Control\\Session Manager\\Memory Management\\ClearPageFileAtShutdown=4,0</span><br><span class=\"line\">MACHINE\\System\\CurrentControlSet\\Control\\Session Manager\\ProtectionMode=4,1</span><br><span class=\"line\">MACHINE\\System\\CurrentControlSet\\Control\\Session Manager\\SubSystems\\optional=7,</span><br><span class=\"line\">MACHINE\\System\\CurrentControlSet\\Services\\LanManServer\\Parameters\\AutoDisconnect=4,15</span><br><span class=\"line\">MACHINE\\System\\CurrentControlSet\\Services\\LanManServer\\Parameters\\EnableForcedLogOff=4,1</span><br><span class=\"line\">MACHINE\\System\\CurrentControlSet\\Services\\LanManServer\\Parameters\\EnableSecuritySignature=4,0</span><br><span class=\"line\">MACHINE\\System\\CurrentControlSet\\Services\\LanManServer\\Parameters\\NullSessionPipes=7,</span><br><span class=\"line\">MACHINE\\System\\CurrentControlSet\\Services\\LanManServer\\Parameters\\RequireSecuritySignature=4,0</span><br><span class=\"line\">MACHINE\\System\\CurrentControlSet\\Services\\LanManServer\\Parameters\\RestrictNullSessAccess=4,1</span><br><span class=\"line\">MACHINE\\System\\CurrentControlSet\\Services\\LanmanWorkstation\\Parameters\\EnablePlainTextPassword=4,0</span><br><span class=\"line\">MACHINE\\System\\CurrentControlSet\\Services\\LanmanWorkstation\\Parameters\\EnableSecuritySignature=4,1</span><br><span class=\"line\">MACHINE\\System\\CurrentControlSet\\Services\\LanmanWorkstation\\Parameters\\RequireSecuritySignature=4,0</span><br><span class=\"line\">MACHINE\\System\\CurrentControlSet\\Services\\LDAP\\LDAPClientIntegrity=4,1</span><br><span class=\"line\">MACHINE\\System\\CurrentControlSet\\Services\\Netlogon\\Parameters\\DisablePasswordChange=4,0</span><br><span class=\"line\">MACHINE\\System\\CurrentControlSet\\Services\\Netlogon\\Parameters\\MaximumPasswordAge=4,30</span><br><span class=\"line\">MACHINE\\System\\CurrentControlSet\\Services\\Netlogon\\Parameters\\RequireSignOrSeal=4,1</span><br><span class=\"line\">MACHINE\\System\\CurrentControlSet\\Services\\Netlogon\\Parameters\\RequireStrongKey=4,1</span><br><span class=\"line\">MACHINE\\System\\CurrentControlSet\\Services\\Netlogon\\Parameters\\SealSecureChannel=4,1</span><br><span class=\"line\">MACHINE\\System\\CurrentControlSet\\Services\\Netlogon\\Parameters\\SignSecureChannel=4,1</span><br><span class=\"line\"><span class=\"section\">[Privilege Rights]</span></span><br><span class=\"line\"><span class=\"attr\">SeNetworkLogonRight</span> = *S-<span class=\"number\">1</span>-<span class=\"number\">1</span>-<span class=\"number\">0</span>,*S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">32</span>-<span class=\"number\">544</span>,*S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">32</span>-<span class=\"number\">545</span>,*S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">32</span>-<span class=\"number\">551</span></span><br><span class=\"line\"><span class=\"attr\">SeBackupPrivilege</span> = *S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">32</span>-<span class=\"number\">544</span>,*S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">32</span>-<span class=\"number\">551</span></span><br><span class=\"line\"><span class=\"attr\">SeChangeNotifyPrivilege</span> = *S-<span class=\"number\">1</span>-<span class=\"number\">1</span>-<span class=\"number\">0</span>,*S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">19</span>,*S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">20</span>,*S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">32</span>-<span class=\"number\">544</span>,*S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">32</span>-<span class=\"number\">545</span>,*S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">32</span>-<span class=\"number\">551</span></span><br><span class=\"line\"><span class=\"attr\">SeSystemtimePrivilege</span> = *S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">19</span>,*S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">32</span>-<span class=\"number\">544</span></span><br><span class=\"line\"><span class=\"attr\">SeCreatePagefilePrivilege</span> = *S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">32</span>-<span class=\"number\">544</span></span><br><span class=\"line\"><span class=\"attr\">SeDebugPrivilege</span> = *S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">32</span>-<span class=\"number\">544</span></span><br><span class=\"line\"><span class=\"attr\">SeRemoteShutdownPrivilege</span> = *S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">32</span>-<span class=\"number\">544</span></span><br><span class=\"line\"><span class=\"attr\">SeAuditPrivilege</span> = *S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">19</span>,*S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">20</span></span><br><span class=\"line\"><span class=\"attr\">SeIncreaseQuotaPrivilege</span> = *S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">19</span>,*S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">20</span>,*S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">32</span>-<span class=\"number\">544</span></span><br><span class=\"line\"><span class=\"attr\">SeIncreaseBasePriorityPrivilege</span> = *S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">32</span>-<span class=\"number\">544</span>,*S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">90</span>-<span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"attr\">SeLoadDriverPrivilege</span> = *S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">32</span>-<span class=\"number\">544</span></span><br><span class=\"line\"><span class=\"attr\">SeBatchLogonRight</span> = *S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">32</span>-<span class=\"number\">544</span>,*S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">32</span>-<span class=\"number\">551</span>,*S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">32</span>-<span class=\"number\">559</span></span><br><span class=\"line\"><span class=\"attr\">SeServiceLogonRight</span> = *S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">80</span>-<span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"attr\">SeInteractiveLogonRight</span> = __vmware__,Guest,*S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">32</span>-<span class=\"number\">544</span>,*S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">32</span>-<span class=\"number\">545</span>,*S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">32</span>-<span class=\"number\">551</span></span><br><span class=\"line\"><span class=\"attr\">SeSecurityPrivilege</span> = *S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">32</span>-<span class=\"number\">544</span></span><br><span class=\"line\"><span class=\"attr\">SeSystemEnvironmentPrivilege</span> = *S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">32</span>-<span class=\"number\">544</span></span><br><span class=\"line\"><span class=\"attr\">SeProfileSingleProcessPrivilege</span> = *S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">32</span>-<span class=\"number\">544</span></span><br><span class=\"line\"><span class=\"attr\">SeSystemProfilePrivilege</span> = *S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">32</span>-<span class=\"number\">544</span>,*S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">80</span>-<span class=\"number\">3139157870</span>-<span class=\"number\">2983391045</span>-<span class=\"number\">3678747466</span>-<span class=\"number\">658725712</span>-<span class=\"number\">1809340420</span></span><br><span class=\"line\"><span class=\"attr\">SeAssignPrimaryTokenPrivilege</span> = *S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">19</span>,*S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">20</span></span><br><span class=\"line\"><span class=\"attr\">SeRestorePrivilege</span> = *S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">32</span>-<span class=\"number\">544</span>,*S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">32</span>-<span class=\"number\">551</span></span><br><span class=\"line\"><span class=\"attr\">SeShutdownPrivilege</span> = *S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">32</span>-<span class=\"number\">544</span>,*S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">32</span>-<span class=\"number\">545</span>,*S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">32</span>-<span class=\"number\">551</span></span><br><span class=\"line\"><span class=\"attr\">SeTakeOwnershipPrivilege</span> = *S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">32</span>-<span class=\"number\">544</span></span><br><span class=\"line\"><span class=\"attr\">SeDenyNetworkLogonRight</span> = Guest</span><br><span class=\"line\"><span class=\"attr\">SeDenyInteractiveLogonRight</span> = Guest</span><br><span class=\"line\"><span class=\"attr\">SeUndockPrivilege</span> = *S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">32</span>-<span class=\"number\">544</span>,*S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">32</span>-<span class=\"number\">545</span></span><br><span class=\"line\"><span class=\"attr\">SeManageVolumePrivilege</span> = *S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">32</span>-<span class=\"number\">544</span></span><br><span class=\"line\"><span class=\"attr\">SeRemoteInteractiveLogonRight</span> = *S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">32</span>-<span class=\"number\">544</span>,*S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">32</span>-<span class=\"number\">555</span></span><br><span class=\"line\"><span class=\"attr\">SeImpersonatePrivilege</span> = *S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">19</span>,*S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">20</span>,*S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">32</span>-<span class=\"number\">544</span>,*S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">6</span></span><br><span class=\"line\"><span class=\"attr\">SeCreateGlobalPrivilege</span> = *S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">19</span>,*S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">20</span>,*S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">32</span>-<span class=\"number\">544</span>,*S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">6</span></span><br><span class=\"line\"><span class=\"attr\">SeIncreaseWorkingSetPrivilege</span> = *S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">32</span>-<span class=\"number\">545</span></span><br><span class=\"line\"><span class=\"attr\">SeTimeZonePrivilege</span> = *S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">19</span>,*S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">32</span>-<span class=\"number\">544</span>,*S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">32</span>-<span class=\"number\">545</span></span><br><span class=\"line\"><span class=\"attr\">SeCreateSymbolicLinkPrivilege</span> = *S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">32</span>-<span class=\"number\">544</span></span><br><span class=\"line\"><span class=\"attr\">SeDelegateSessionUserImpersonatePrivilege</span> = *S-<span class=\"number\">1</span>-<span class=\"number\">5</span>-<span class=\"number\">32</span>-<span class=\"number\">544</span></span><br><span class=\"line\"><span class=\"section\">[Version]</span></span><br><span class=\"line\"><span class=\"attr\">signature</span>=<span class=\"string\">\"$CHICAGO$\"</span> //校验非常重要</span><br><span class=\"line\"><span class=\"attr\">Revision</span>=<span class=\"number\">1</span></span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<h5 id=\"secedit-configure\"><a href=\"#secedit-configure\" class=\"headerlink\" title=\"secedit /configure\"></a>secedit /configure</h5><p>描述:允许你用保存在数据库中的安全性设置来配置系统。<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">secedit /configure /db filename [/cfg filename] [/overwrite][/areas area1 area2...] [/<span class=\"built_in\">log</span> filename] [/quiet]</span><br><span class=\"line\">/overwrite - 指定在导入安全性模板前数据库应该被清空。如果没有指定此参数，在安全性模板中指定的将累积到数据库中。</span><br><span class=\"line\">             <span class=\"comment\">#如果没有指定此参数而且在数据库中的设置与要导入的模板冲突，将采用模板中的设置。</span></span><br><span class=\"line\">/quiet - 指定配置操作的执行不需要提示用户进行任何确认。</span><br></pre></td></tr></table></figure></p>\n<p>基础示例:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">secedit /configure /cfg current.inf /overwrite /<span class=\"built_in\">log</span> hisecws.log <span class=\"comment\">#对于所有的文件名，如果没有指定路径，则是用当前目录。</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#导入全案策略</span></span><br><span class=\"line\">secedit /configure /db model.sdb /cfg gp.inf /quiet  <span class=\"comment\">#会自动生成 model.sdb</span></span><br><span class=\"line\">任务成功结束,有关详细信息，请参阅日志 %windir%\\security\\logs\\scesrv.log。</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<h5 id=\"secedit-import\"><a href=\"#secedit-import\" class=\"headerlink\" title=\"secedit /import\"></a>secedit /import</h5><p>可将安全性模板导入到数据库以便模板中指定的设置可应用到系统或作为分析系统的依据。<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">secedit /import /db FileName .sdb /cfg FileName.inf [/overwrite] [/areasArea1 Area2 ...] [/logFileName] [/quiet]</span><br></pre></td></tr></table></figure></p>\n<p>基础示例:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">secedit /import /db hisecws.sdb /cfg hisecws.inf /overwrite</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<h5 id=\"secedit-validate\"><a href=\"#secedit-validate\" class=\"headerlink\" title=\"secedit /validate\"></a>secedit /validate</h5><p>描述:验证要导入到分析数据库或系统应用程序的安全模板的语法,在不同的系统下执行配置文件中的参数是不同的;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">语法:</span><br><span class=\"line\">secedit /validate FileName</span><br><span class=\"line\">/cfg filename - 指定要验证的安全模板。安全模板是用安全模板管理单元创</span><br><span class=\"line\">建的。</span><br></pre></td></tr></table></figure></p>\n<p>基础示例:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">secedit /validate /cfg current.ini</span><br><span class=\"line\">模版验证顺利完成，下列数据被忽略,数据无效。</span><br><span class=\"line\">SeDelegateSessionUserImpersonatePrivilege 不是有效特权。</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<h5 id=\"secedit-analyze\"><a href=\"#secedit-analyze\" class=\"headerlink\" title=\"secedit /analyze\"></a>secedit /analyze</h5><p>可通过将其与数据库中的基本设置相比较，分析一台计算机上的安全设置。<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">secedit /analyze /db FileName.sdb [/cfgFileName] [/overwrite] [/logFileName] [/quiet]</span><br></pre></td></tr></table></figure></p>\n<p>基础示例:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">secedit /analyze /db current.sdb /<span class=\"built_in\">log</span> result.txt</span><br></pre></td></tr></table></figure><br><figure class=\"image-box\">\n                <img src=\"https://img.weiyigeek.top/2019/1/20190821213033.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure></p>\n<p><br></p>\n<h5 id=\"secedit-GenereateRollback\"><a href=\"#secedit-GenereateRollback\" class=\"headerlink\" title=\"secedit /GenereateRollback\"></a>secedit /GenereateRollback</h5><p>描述：可根据配置模板生成一个回滚模板。<br>在将配置模板应用到计算机上时，可以选择创建回滚模板，该模板在应用时会将安全性设置重置为应用配置模板前的值。<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">语法:</span><br><span class=\"line\">secedit /generaterollback /cfg filename /rbk filename [/<span class=\"built_in\">log</span> filename] [/quiet]</span><br><span class=\"line\">/db filename - 指定执行复原操作使用的数据库。</span><br><span class=\"line\">/cfg filename - 指定一个将要生成关于它的复原模板的安全模板。安全模板是用安全模板管理单元创建的。</span><br><span class=\"line\">/rbk filename - 指定一个复原信息要写入的安全模板。安全模板是用安全模板管理单元创建的。</span><br><span class=\"line\"></span><br><span class=\"line\">示例:对于所有的文件名，如果没有指定路径，则是用当前目录。</span><br><span class=\"line\">secedit /generaterollback /db hisecws.sdb /cfg hisecws.inf /rbk hisecwsrollback.inf /<span class=\"built_in\">log</span> hisecws.log</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<h4 id=\"附录脚本合规检查\"><a href=\"#附录脚本合规检查\" class=\"headerlink\" title=\"附录脚本合规检查\"></a>附录脚本合规检查</h4><figure class=\"highlight bat\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"keyword\">if</span> <span class=\"keyword\">exist</span> no.txt (<span class=\"built_in\">del</span> no.txt)</span><br><span class=\"line\"><span class=\"built_in\">cls</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> 正在进行 \"审计与帐户策略\" 安全检查</span><br><span class=\"line\"><span class=\"built_in\">echo</span> &gt; list.txt PasswordComplexity = <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> &gt;&gt; list.txt MinimumPasswordLength = <span class=\"number\">8</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> &gt;&gt; list.txt MaximumPasswordAge = <span class=\"number\">42</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> &gt;&gt; list.txt MinimumPasswordAge = <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> &gt;&gt; list.txt PasswordHistorySize = <span class=\"number\">5</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> &gt;&gt; list.txt ClearTextPassword = <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> &gt;&gt; list.txt ResetLockoutCount = <span class=\"number\">15</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> &gt;&gt; list.txt LockoutDuration = <span class=\"number\">15</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> &gt;&gt; list.txt LockoutBadCount = <span class=\"number\">15</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> &gt;&gt; list.txt AuditPolicyChange = <span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> &gt;&gt; list.txt AuditLogonEvents = <span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> &gt;&gt; list.txt AuditObjectAccess = <span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> &gt;&gt; list.txt AuditPrivilegeUse = <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> &gt;&gt; list.txt AuditProcessTracking = <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> &gt;&gt; list.txt AuditDSAccess = <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> &gt;&gt; list.txt AuditSystemEvents = <span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> &gt;&gt; list.txt AuditAccountLogon = <span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> &gt;&gt; list.txt AuditAccountManage = <span class=\"number\">3</span></span><br><span class=\"line\"></span><br><span class=\"line\">secedit /export /cfg model.inf &gt;<span class=\"built_in\">nul</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> /F \"tokens=<span class=\"number\">1</span>,<span class=\"number\">3</span>\" <span class=\"variable\">%%i</span> <span class=\"keyword\">in</span> (list.txt) <span class=\"keyword\">do</span> (</span><br><span class=\"line\"><span class=\"keyword\">call</span> :Getgp <span class=\"variable\">%%i</span> <span class=\"variable\">%%j</span></span><br><span class=\"line\">)</span><br><span class=\"line\"><span class=\"built_in\">ping</span> <span class=\"number\">127</span>.<span class=\"number\">0</span>.<span class=\"number\">0</span>.<span class=\"number\">1</span> /n <span class=\"number\">2</span> &gt;<span class=\"built_in\">nul</span></span><br><span class=\"line\"><span class=\"built_in\">del</span> tmp.txt</span><br><span class=\"line\"><span class=\"built_in\">del</span> list.txt</span><br><span class=\"line\"><span class=\"built_in\">del</span> model.inf</span><br><span class=\"line\"><span class=\"keyword\">goto</span> :EOF</span><br><span class=\"line\">:Getgp</span><br><span class=\"line\"><span class=\"built_in\">find</span> \"%<span class=\"number\">1</span>\" model.inf &gt;tmp.txt</span><br><span class=\"line\"><span class=\"keyword\">for</span> /f \"skip=<span class=\"number\">2</span> tokens=<span class=\"number\">3</span>\" <span class=\"variable\">%%i</span> <span class=\"keyword\">in</span> (tmp.txt) <span class=\"keyword\">do</span> (</span><br><span class=\"line\"><span class=\"keyword\">if</span> \"<span class=\"variable\">%%i</span>\"==\"%<span class=\"number\">2</span>\" (<span class=\"built_in\">echo</span> <span class=\"variable\">%1=%</span>%i ok) <span class=\"keyword\">else</span> (<span class=\"built_in\">echo</span> %<span class=\"number\">1</span> 策略不符合规则&gt;&gt;bad.txt)</span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">goto</span> :EOF</span><br></pre></td></tr></table></figure>\n","comments":true,"excerpt":"[TOC]","categories":[{"name":"Windows命令","path":"api/categories/Windows命令.json"}],"tags":[{"name":"secedit","path":"api/tags/secedit.json"}]}