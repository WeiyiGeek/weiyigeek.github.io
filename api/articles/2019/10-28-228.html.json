{"title":"文件系统特殊命令一览表","slug":"系统运维/Windows/常用命令/文件内容目录管理类命令/文件系统特殊命令一览表","date":"2019-10-28T12:35:30.000Z","updated":"2022-03-29T05:39:06.302Z","url":"2019/10-28-228.html","path":"api/articles/2019/10-28-228.html.json","covers":["https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20191111205239.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20191111205719.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20191111205802.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20191111211239.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20191111211756.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20191111213318.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20191111214213.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20191111214617.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20191111214758.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20191112152341.png"],"content":"<p>[TOC]</p>\n<a id=\"more\"></a>\n<h4 id=\"1-文件系统属性\"><a href=\"#1-文件系统属性\" class=\"headerlink\" title=\"1.文件系统属性\"></a>1.文件系统属性</h4><h5 id=\"fsutil-命令\"><a href=\"#fsutil-命令\" class=\"headerlink\" title=\"fsutil 命令\"></a>fsutil 命令</h5><p>描述:FSutil命令显示或配置文件系统的属性;</p>\n<p>基础用法:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fsutil</span><br><span class=\"line\"><span class=\"comment\"># ---- 支持的命令 ----</span></span><br><span class=\"line\">8dot3name       8dot3name 管理</span><br><span class=\"line\">behavior        控制文件系统行为</span><br><span class=\"line\">dirty           管理卷的已损坏位数</span><br><span class=\"line\">file            文件特定命令</span><br><span class=\"line\">fsinfo          文件系统信息</span><br><span class=\"line\">hardlink        硬链接管理</span><br><span class=\"line\">objectid        对象 ID 管理</span><br><span class=\"line\">quota           配额管理</span><br><span class=\"line\">repair          自疗管理</span><br><span class=\"line\">reparsepoint    重分析点管理</span><br><span class=\"line\">resource        事务资源管理器管理</span><br><span class=\"line\">sparse          稀疏文件控制</span><br><span class=\"line\">transaction     事务管理</span><br><span class=\"line\">usn             USN 管理</span><br><span class=\"line\">volume          卷管理</span><br></pre></td></tr></table></figure></p>\n<p>基础详解:</p>\n<ul>\n<li>behavior:查询、更改、启用或禁用下列行为的相关设置：生成 8.3 字符长文件名、接收 NTFS 卷上的 8.3 字符长文件名内的扩展字符、更新 NTFS 卷上的最近访问时间戳、配额事件写入系统日志的频率以及保留给 MFT 区的磁盘空间量</li>\n<li>dirty:查询是否设置了卷的坏区。设置卷的坏区。当一个卷的坏区设置后，在下次重新启动计算机时将不使用</li>\n<li>file:主要由专业支持者使用。根据安全标识符查找文件、查询文件的分配范围、设置文件简短名称、设置文件的有效数据长度或设置文件零数据。</li>\n<li>fsinfo:主要由专业支持者使用。列出所有驱动器，查询驱动器类型、卷信息，查询特定的 NTFS 卷信息，或查询文件系统统计数据。</li>\n<li>hardlink:创建硬连接。硬连接就是某个文件的目录入口。每个文件都可认为至少有一个硬连接。在 NTFS 卷上，每个文件都有多个硬连接，因而一个文件可以出现在多个目录（甚至具有不同名称的相同目录）中。由于所有链接都引用同一个文件，所以程序能打开任意链接并修改文件。只有当一个文件的所有链接都删除后，该文件才能从文件系统中删除。创建硬连接后，程序可以象使用其它任何文件名那样使用它。</li>\n<li>objectid:主要由专业支持者使用。管理对象标识符，该标识符由 Windows XP 用于跟踪如文件和目录等的对象）。</li>\n<li>quota:管理 NTFS 卷上的磁盘配额，以便对网络存储的提供更精确控制。磁盘配额是根据每个卷来实施的，并以每个用户为基础启用硬存储和软存储限制。</li>\n<li>reparsepoint:主要由专业支持者使用。查询或删除重新分析点，这些重新分析点是 NTFS 文件系统对象，而这些对象具有可定义的包含用户控制数据的属性，这些重新分析点在输入/输出 (I/O) 子系统中用于扩展功能。重新分析点作为目录连接点和卷安装点。文件系统过滤驱动程序使用重新分析点来标记该驱动程序特定的某些文件。</li>\n<li>sparse:管理稀疏文件 。稀疏文件是指内部具有一个或多个未分派的数据区域的文件。程序将会发现这些未分派的包含零字节的区域，但是没有实际的磁盘空间用来代表这些零。换句话说，所有有意义或非零数据得到了分配，反之所有无意义的数据（大串由零组成的数据）没有得到分配。当读入稀疏文件时，已分配的数据以存储方式返回，在默认情况下，按照 C2 安全需求未分配的数据也返回。稀疏文件支持允许在文件的任意位置解除分配数据。</li>\n<li>usn:主要由专业支持者使用。管理更新序列号 (USN) 会改变日志，该日志提供了永久的对卷中所有对文件做过修改的的记录。</li>\n<li>volume:管理卷，卸下卷，或查看磁盘上的可用空间。</li>\n</ul>\n<p><br></p>\n<p><strong>File参数:</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fsutil file [createnew] PathName length</span><br><span class=\"line\">fsutil file [findbysid] User PathName</span><br><span class=\"line\">fsutil file [queryallocranges] offset=offset length=length PathName</span><br><span class=\"line\">fsutil file [setshortname] PathName shortname</span><br><span class=\"line\">fsutil file [setvaliddata] PathName datalength</span><br><span class=\"line\">fsutil file [setzerodata] offset=offset length=length PathName</span><br><span class=\"line\"><span class=\"comment\">#参数</span></span><br><span class=\"line\">createnew---创建指定名称和大小的文件，该文件的内容由零组成。</span><br><span class=\"line\">PathName---指定驱动器号（冒号分隔）、装入点或卷名</span><br><span class=\"line\">length---指定文件的有效数据长度</span><br><span class=\"line\"></span><br><span class=\"line\">findbysid---查找属于特定用户的NTFS 卷上的文件。用户由自己的 SID（安全标识符）标识。</span><br><span class=\"line\">User---指定用户名或登录名</span><br><span class=\"line\"></span><br><span class=\"line\">queryallocranges---查询 NTFS 卷上的文件分配范围。可用于确定文件是否具有稀疏区域。</span><br><span class=\"line\">offset=offset---指定设置零的范围起始点,指定文件偏移量和设置为零的范围起始点.</span><br><span class=\"line\">length=length ---指定范围长度（以字节表示）</span><br><span class=\"line\"></span><br><span class=\"line\">setshortname---设置NTFS 卷上文件的简短名称（8.3 字符长度文件名）</span><br><span class=\"line\">shortname---指定文件简短名称</span><br><span class=\"line\"></span><br><span class=\"line\">setvaliddata---设置 NTFS 卷上文件的有效数据长度</span><br><span class=\"line\">datalength---指定文件长度（以字节表示）</span><br><span class=\"line\"></span><br><span class=\"line\">setzerodata---将文件范围（由 offset 和 length 指定）设置为零，从而使文件为空。如果是稀疏文件，则不需要基本分配单元</span><br></pre></td></tr></table></figure></p>\n<p>注释:</p>\n<ul>\n<li>使用 setvaliddata在 NTFS 中，有两个关于文件长度的重要概念：文件尾 (EOF) 标记和有效数据长度 (VDL)。EOF 指定文件的实际长度。VDL 标识磁盘上有效数据的长度。</li>\n<li>VDL 和 EOF 之间的任何读操作都将自动返回 0 以便保留 C2 对象重新使用要求。</li>\n<li>只有管理员可以使用 setvaliddata 参数，因为该参数要求有“管理卷”的特权,只有高级多媒体和系统区域网络 (SAN) 环境才需要使用该功能。</li>\n</ul>\n<p>基础案例:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#1.创建一个大小为300字节的new.txt</span></span><br><span class=\"line\">fsutil file createnew new.txt 300</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#2.要根据 SID 查找驱动器 C 上的用户 scottb</span></span><br><span class=\"line\">fsutil file findbysid scottb C:\\users</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#3.new文件的ID获取</span></span><br><span class=\"line\">fsutil file queryfileid new.txt</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#4.new文件的随机链接名称获取</span></span><br><span class=\"line\">fsutil file queryfilenamebyid E:\\ 0x002e0000000001a1</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#5.设置windows文件夹为区分大小写的命令 (用disable关闭区分大小写)</span></span><br><span class=\"line\">fsutil.exe file SetCaseSensitiveInfo <span class=\"string\">'F:\\aaa'</span> <span class=\"built_in\">enable</span></span><br></pre></td></tr></table></figure><br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20191111205239.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure></p>\n<p><br></p>\n<p><strong>fsinfo参数</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#1.获得各个驱动器盘符</span></span><br><span class=\"line\">fsutil fsinfo drives</span><br><span class=\"line\">驱动器: C:\\ D:\\ E:\\ F:\\ G:\\</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#2.驱动器的类型</span></span><br><span class=\"line\">fsutil fsinfo drivetype d:</span><br><span class=\"line\"><span class=\"comment\">#d: - 固定驱动器</span></span><br><span class=\"line\">fsutil fsinfo drivetype G:</span><br><span class=\"line\"><span class=\"comment\">#G: - CD-ROM 驱动器</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#可能的结果为</span></span><br><span class=\"line\">* 未知驱动器</span><br><span class=\"line\">* 没有这样的根目录</span><br><span class=\"line\">* 可移动驱动器，如软驱</span><br><span class=\"line\">* 固定驱动器</span><br><span class=\"line\">* 远程/网络驱动器</span><br><span class=\"line\">* CD-ROM 驱动器</span><br><span class=\"line\">* Ram 磁盘 </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#3.系统统计</span></span><br><span class=\"line\">fsutil fsinfo statistics D:</span><br></pre></td></tr></table></figure><br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20191111205719.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#4.要查询 F 驱动器以获取特定 NTFS 卷信息</span></span><br><span class=\"line\">fsutil fsinfo ntfsinfo F:\\</span><br></pre></td></tr></table></figure>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20191111205802.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure>\n<p><br></p>\n<p><strong>dirty参数</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#语法：</span></span><br><span class=\"line\">fsutil dirty &#123;query|<span class=\"built_in\">set</span>&#125; PathName</span><br><span class=\"line\"><span class=\"comment\">#参数：</span></span><br><span class=\"line\">query 查询坏区</span><br><span class=\"line\"><span class=\"built_in\">set</span> 设置卷的坏区</span><br><span class=\"line\">PathName  指定驱动器号（冒号分隔）、装入点或卷名</span><br></pre></td></tr></table></figure></p>\n<p>基础示例:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#1.要查询驱动器 C 上的坏区，请键入</span></span><br><span class=\"line\">fsutil dirty query C:</span><br><span class=\"line\"><span class=\"comment\"># 示例输出：</span></span><br><span class=\"line\"><span class=\"comment\"># 卷 C:已坏或</span></span><br><span class=\"line\"><span class=\"comment\"># 卷 C:未坏要设置驱动器 C 上的坏区</span></span><br></pre></td></tr></table></figure><br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20191111211239.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure></p>\n<p><br></p>\n<p><strong>behavior参数</strong><br>描述：查询下列行为的当前设置，生成 8.3 字符长的文件名、允许 NTFS 卷上 8.3 字符长的文件名中的扩展字符、更新 NTFS 卷上的最近访问时间戳、配额事件写入系统日志中的频率以及主文件表 (MFT) 区的大小。<br>启用或禁用 8.3 字符长文件名的使用、允许 NTFS 卷上 8.3 字符长文件名中的扩展字符以及更新 NTFS 卷上的最近访问时间戳。允许更改配额事件写入系统日志中的频率以及保留给MFT 区的磁盘空间量。</p>\n<p>基础语法:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fsutil behavior query &#123;disable8dot3|allowextchar|disablelastaccess|quotanotify|mftzone&#125;</span><br><span class=\"line\">fsutil behavior <span class=\"built_in\">set</span> [&#123;disable8dot3 &#123;1|0&#125;|allowextchar &#123;1|0&#125;|disablelastaccess &#123;1|0&#125;|quotanotify freqncy|mftzoneval&#125;]</span><br></pre></td></tr></table></figure><br>参数：</p>\n<ul>\n<li>disable8dot3 {1|0} 在 FAT 和 NTFS 格式化的卷上禁用创建 8.3 字符长文件名。</li>\n<li>allowextchar {1|0} 确定来自扩展字符集中的字符是否可用于 NTFS 卷上的 8.3 短文件名中。</li>\n<li>disablelastaccess {1|0} 确定当列出 NTFS 卷上的目录时，NTFS 是否更新各个目录上的最近访问时间戳。</li>\n<li>quotanotify freqncy  配置 NTFS 配额侵犯在系统日志中的报告频率。该配额侵犯写入系统日志的时间频率为 0 秒到 4294967295 秒之间。默认值为 1 小时（3600 秒）。</li>\n<li>mftzone val 主文件表 (MFT) 区是一个保留的区域，可在需要时启用 MFT 扩展，以防止 MFT 出现碎片。将 val 设置为从 1（默认值）到 4（最大值；val 在该磁盘的第 8 区中。 </li>\n</ul>\n<p>基础示例:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#1.查询内存得使用</span></span><br><span class=\"line\">fsutil behavior query memoryUsage</span><br></pre></td></tr></table></figure><br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20191111211756.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure></p>\n<p><br></p>\n<p><strong>hardlink参数</strong><br>描述:等同于Linux中得ln命令建立得硬链接,硬连接就是某个文件的目录入口,每个文件都可认为至少有一个硬连接。<br>在 NTFS 卷上<code>每个文件都有多个硬链接</code>，所以一个文件可能出现在多个目录中（甚至以不同的文件名出现在相同目录中）。<br>既然所有的链接都引用同一个文件，所以程序能打开任意链接并修改文件，<code>只有当一个文件的所有链接都删除后，该文件才能从文件系统中删除</code>。<br>基础语法:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fsutil hardlink create NewFilename ExistingFilename</span><br><span class=\"line\"><span class=\"comment\">#参数</span></span><br><span class=\"line\">creat        建立现有文件和新文件之间的 NTFS 硬链接，NTFS 硬链接与 POSIX 硬链接相似。</span><br><span class=\"line\">NewFilename  指定要创建硬链接的文件</span><br><span class=\"line\">ExistingFilename 指定要创建硬链接的文件</span><br></pre></td></tr></table></figure></p>\n<p>基础示例:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#创建硬链接</span></span><br><span class=\"line\">fsutil hardlink create ChangeLinuxCommand1.bat ChangeLinuxCommand.bat</span><br></pre></td></tr></table></figure><br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20191111213318.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure></p>\n<p><br></p>\n<p><strong>volume参数</strong><br>描述:管理卷卸下卷或查看磁盘上的可用空间。<br>基础语法:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fsutil volume [diskfree] drivename</span><br><span class=\"line\">fsutil volume [dismount] VolumePathname</span><br><span class=\"line\"></span><br><span class=\"line\">diskfree 查询卷上的可用空间</span><br><span class=\"line\">dismount  卸下卷</span><br><span class=\"line\"></span><br><span class=\"line\">drivename 指定驱动器号（后面接冒号）</span><br><span class=\"line\">VolumePathname  指定驱动器号（冒号分隔）、装入点或卷名</span><br></pre></td></tr></table></figure></p>\n<p>基础示例:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#1.要卸下驱动器 C 上的卷，请键入：</span></span><br><span class=\"line\">fsutil volume dismount C:</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#2.要查询驱动器 C 上卷的可用空间，请键入：</span></span><br><span class=\"line\">fsutil volume diskfree C:</span><br></pre></td></tr></table></figure><br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20191111214213.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure></p>\n<p><br></p>\n<p><strong>8dot3name参数</strong><br>描述:对于文件得短名称得处理;<br>基础示例:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#如果从此路径中删除了短名称，此命令会扫描指定的目录路径，查找可能会受影响的注册表项</span></span><br><span class=\"line\">fsutil 8dot3name scan &lt;/s&gt; &lt;/l <span class=\"built_in\">log</span> file&gt; &lt;/v&gt; DirectoryPath</span><br><span class=\"line\">/s - 递归模式 - 指定还应将此操作应用于子目录</span><br><span class=\"line\">/v - 详细模式 - 指定还应将所有记录的信息打印到控制台</span><br><span class=\"line\">/l - 指定要写入的日志文件。后面必须加上指向日志文件的路径</span><br><span class=\"line\"><span class=\"comment\">#如果未指定此选项，日志文件将为:\"%temp%\\8dot3_removal_log@(GMT YYYY-MM-DD HH-MM-SS).log\"</span></span><br></pre></td></tr></table></figure></p>\n<p>基础示例:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 1.在系统上查询当前设置的短名称行为</span></span><br><span class=\"line\">FSUTIL 8dot3name query</span><br><span class=\"line\"><span class=\"comment\"># 注册表状态为: 2 (按卷设置 - 默认值)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 2.示例命令</span></span><br><span class=\"line\">fsutil 8dot3name scan /l mylogfile.log /s D:\\MyData</span><br></pre></td></tr></table></figure><br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20191111214617.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure></p>\n<p>补充示例:除了用find /v “”这外，还可以用more 两个的效果是一样的<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#如果只用fsutil fsinfo dreves的话所显示的结果中的各个盘符之间不是空格（例如：d:\\ e:\\）而是nul,在十六进制里面的空格应该是20,如图：</span></span><br><span class=\"line\"><span class=\"comment\">#大家从图上可以清楚的看到各个盘符之间的代码是00也就是十六进制的nul，所以这就是find用\"\"的意思，用了fsutil fsinfo drives|find /v \"\"</span></span><br><span class=\"line\">fsutil fsinfo drives |more <span class=\"comment\">#盘符之间的代码已经变以0A 0D (回车换行)</span></span><br><span class=\"line\">* fsutil fsinfo drives | find /v <span class=\"string\">\"\"</span></span><br></pre></td></tr></table></figure><br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20191111214758.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure></p>\n<p><br></p>\n<h5 id=\"Pushd命令\"><a href=\"#Pushd命令\" class=\"headerlink\" title=\"Pushd命令\"></a>Pushd命令</h5><p>描述:保存当前目录以供 POPD 命令使用，然后改到指定的目录<br>语法:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PUSHD [path | ..]</span><br><span class=\"line\"><span class=\"comment\">#参数:</span></span><br><span class=\"line\">path    指定要成为当前目录的目录。</span><br></pre></td></tr></table></figure><br>如果命令扩展被启用，除了一般驱动器号和路径，PUSHD命令还接受网络路径。<br>如果指定了网络路径，PUSHD 将创建一个指向指定网络资源的临时驱动器号，然后再用刚定义的驱动器号更改当前的驱动器和目录。<br>可以从 Z: 往下分配临时驱动器号，使用找到的第一个没有用过的驱动器号。</p>\n<p><br></p>\n<h5 id=\"POPD命令\"><a href=\"#POPD命令\" class=\"headerlink\" title=\"POPD命令\"></a>POPD命令</h5><p>描述：更改到 PUSHD 命令存储的目录 <code>POPD</code><br>如果命令扩展被启用，从推目录堆栈 POPD 驱动器时，POPD命令会删除 PUSHD 创建的临时驱动器号。</p>\n<p>案例：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">pushd</span> %systemroot%</span><br><span class=\"line\">&gt;<span class=\"built_in\">cd</span> /d f:\\WizNote\\temp\\c72affac-c61b-4c46-8e83-6587ecd57296</span><br><span class=\"line\">f:\\WizNote\\temp\\c72affac-c61b-4c46-8e83-6587ecd57296&gt;<span class=\"built_in\">popd</span></span><br><span class=\"line\">C:\\Windows&gt;<span class=\"built_in\">cd</span></span><br></pre></td></tr></table></figure><br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20191112152341.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure></p>\n<p><br></p>\n<h5 id=\"clip-命令\"><a href=\"#clip-命令\" class=\"headerlink\" title=\"clip 命令\"></a>clip 命令</h5><p>描述:可以通过标准输出或者输入将字符串复制到windows缓冲区中即 Windows 剪贴板;</p>\n<p>基础示例:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#描述:将命令行工具的输出重定向到 Windows 剪贴板。这个文本输出可以被粘贴</span></span><br><span class=\"line\">DIR | CLIP  <span class=\"comment\">#将一份当前目录列表的副本放入 Windows 剪贴板。</span></span><br><span class=\"line\">CLIP &lt; README.TXT <span class=\"comment\"># 将 readme.txt 的一份文本放入 Windows 剪贴板。</span></span><br></pre></td></tr></table></figure></p>\n","comments":true,"excerpt":"[TOC]","categories":[{"name":"Windows命令","path":"api/categories/Windows命令.json"}],"tags":[{"name":"系统命令","path":"api/tags/系统命令.json"}]}