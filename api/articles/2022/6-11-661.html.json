{"title":"1.使用Apache Jmeter对应用压力测试学习与实践","slug":"系统运维/自动化测试/Jmeter/1.使用Apache Jmeter对应用压力测试学习与实践","date":"2022-06-11T15:36:30.000Z","updated":"2023-01-31T02:29:10.468Z","url":"2022/6-11-661.html","path":"api/articles/2022/6-11-661.html.json","covers":["https://img.weiyigeek.top/2022/5/20220531145949.png"],"content":"<p>[TOC]</p>\n<a id=\"more\"></a>\n<h2 id=\"0x00-前言简述\"><a href=\"#0x00-前言简述\" class=\"headerlink\" title=\"0x00 前言简述\"></a>0x00 前言简述</h2><h3 id=\"1-JMeter-介绍\"><a href=\"#1-JMeter-介绍\" class=\"headerlink\" title=\"1.JMeter 介绍\"></a>1.JMeter 介绍</h3><p><strong>Q: 什么是Apache JMeter ?</strong></p>\n<blockquote>\n<p>JMeter 是一款开源纯 Java 应用程序, 旨在测量性能和负载测试应用程序, 目前由 Apache 软件基金会提供支持。</p>\n</blockquote>\n<p><strong>Q: 我能用 Apache JMeter 做什么?</strong></p>\n<blockquote>\n<p>Apache JMeter 可以测量性能并对静态和动态 Web 应用程序进行负载测试, 它可用于模拟服务器、服务器组、 网络或对象来测试其强度或分析不同负载类型下的整体性能。</p>\n</blockquote>\n<p>Apache JMeter 功能包括：<br>1) 能够加载和性能测试许多不同的应用程序/服务器/协议类型：</p>\n<pre><code>* Web - HTTP、HTTPS（Java、NodeJS、PHP、ASP.NET，...）\n* SOAP / REST Web 服务\n* FTP\n* 通过 JDBC 的数据库\n* LDAP\n* 通过 JMS 的面向消息的中间件 (MOM)\n* 邮件 - SMTP(S)、POP3(S) 和 IMAP(S)\n* 本机命令或 shell 脚本\n* TCP\n* Java 对象\n</code></pre><p>2) 功能齐全的测试 IDE，允许快速 记录测试计划（从浏览器或本机应用程序）、构建和调试 。<br>3) CLI 模式（命令行模式（以前​​称为非 GUI）/无头模式） 可从任何 Java 兼容操作系统（Linux、Windows、Mac OSX 等）进行负载测试<br>4) 完整且可随时呈现的动态 HTML 报告, 实时数据采集进入第三方数据库，如 InfluxDB 或 Graphite<br>5) 通过从最流行的响应格式、 HTML 、 JSON 、 XML 或 任何文本格式<br>6) 完全的可移植性和 100% Java 纯度 。<br>7) 完整 的多线程 框架允许多线程并发采样，并且 通过不同的线程组同时采样不同的功能。<br>8) 缓存和离线分析/重放测试结果。<br>9) 高度可扩展的核心：</p>\n<pre><code>* 可插拔采样器允许无限的测试能力。\n* 可编写脚本的采样器 等 JSR223 兼容的语言 Groovy 和 BeanShell\n* 选择几个负载统计信息 可插入计时器 。\n* 数据分析和 可视化插件 允许很好的可扩展性 以及个性化。\n* 函数可用于为测试提供动态输入或提供数据操作。\n* 轻松实现持续集成 rd Maven、Gradle 和 Jenkins 的\n</code></pre><p><br></p>\n<p><strong>Q: JMeter和浏览器间的区别?</strong></p>\n<blockquote>\n<p>JMeter 不是浏览器它在协议级别工作。 就 Web 服务和远程服务而言，JMeter 看起来像一个浏览器（或者更确切地说，是多个浏览器）； 但是 JMeter 并不执行浏览器支持的所有操作。 特别是 JMeter 不执行 HTML 页面中的 Javascript, 它也不像浏览器那样呈现HTML页面（可以将响应查看为HTML 等，但时间不包含在任何示例中，并且一次只显示一个线程中的一个示例）。 </p>\n</blockquote>\n<h3 id=\"n-官网参考\"><a href=\"#n-官网参考\" class=\"headerlink\" title=\"n.官网参考\"></a>n.官网参考</h3><p>官网地址: <a href=\"https://jmeter.apache.org/\" target=\"_blank\" rel=\"noopener\">https://jmeter.apache.org/</a><br>项目地址: <a href=\"https://github.com/apache/jmeter\" target=\"_blank\" rel=\"noopener\">https://github.com/apache/jmeter</a><br>下载地址: <a href=\"https://jmeter.apache.org/download_jmeter.cgi\" target=\"_blank\" rel=\"noopener\">https://jmeter.apache.org/download_jmeter.cgi</a><br>官方文档: <a href=\"https://jmeter.apache.org/usermanual/get-started.html\" target=\"_blank\" rel=\"noopener\">https://jmeter.apache.org/usermanual/get-started.html</a></p>\n<hr>\n<h2 id=\"0x01-安装配置\"><a href=\"#0x01-安装配置\" class=\"headerlink\" title=\"0x01 安装配置\"></a>0x01 安装配置</h2><h3 id=\"1-环境要求\"><a href=\"#1-环境要求\" class=\"headerlink\" title=\"1.环境要求\"></a>1.环境要求</h3><ul>\n<li><p>Java Interpreter (解释器)：Apache JMeter需要完全兼容的Java 8运行时环境才能执行, 带有keytool实用程序的JDK更适合记录HTTPS网站。</p>\n</li>\n<li><p>Java Compiler (可选)：由于发行版包含预编译的Java二进制归档文件，因此不需要Java编译器。</p>\n</li>\n<li><p>jar Plugin (可选)：JMeter中不包括一些JAR, 如果需要应下载这些文件并将其放置在lib目录中。</p>\n</li>\n</ul>\n<p>温馨提示: 目录名称中的空格可能会导致问题。 </p>\n<p><br/></p>\n<h3 id=\"2-下载安装\"><a href=\"#2-下载安装\" class=\"headerlink\" title=\"2.下载安装\"></a>2.下载安装</h3><p>描述: 当前【2022年5月31日 10:40:57】Apache JMeter 官网版本为 5.4.3 (Requires Java 8+)，提供两种格式下载Binaries、Source</p>\n<h4 id=\"Windows\"><a href=\"#Windows\" class=\"headerlink\" title=\"Windows\"></a>Windows</h4><p><strong>操作部署</strong><br>步骤 01.从Apache官网下载 Apache JMeter (<a href=\"https://dlcdn.apache.org//jmeter/binaries/apache-jmeter-5.4.3.zip\" target=\"_blank\" rel=\"noopener\">https://dlcdn.apache.org//jmeter/binaries/apache-jmeter-5.4.3.zip</a>)</p>\n<p>步骤 02.安装 jdk 环境此处我的安装环境为 <code>jdk-8u251-windows-x64.exe</code>, 安装路径为<code>D:\\Study\\Java</code><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># CMD</span></span><br><span class=\"line\">setx JAVA_HOME <span class=\"string\">\"D:\\Study\\Java\\jdk1.8.0_251\"</span> /M</span><br><span class=\"line\">setx JRE_HOME <span class=\"string\">\"D:\\Study\\Java\\jdk1.8.0_251\\jre\"</span> /M</span><br><span class=\"line\">setx CLASSPSTH <span class=\"string\">\".;%JAVA_HOME%\\lib\\dt.jar;%JAVA_HOME%\\lib\\tools.jar;\"</span> /M</span><br><span class=\"line\">setx PATH <span class=\"string\">\"%PATH%;%JAVA_HOME%\\bin\\;\"</span> /M</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 版本查看</span></span><br><span class=\"line\">&gt; java -version</span><br><span class=\"line\">java version <span class=\"string\">\"1.8.0_251\"</span></span><br><span class=\"line\">Java(TM) SE Runtime Environment (build 1.8.0_251-b08)</span><br><span class=\"line\">Java HotSpot(TM) 64-Bit Server VM (build 25.251-b08, mixed mode)</span><br></pre></td></tr></table></figure></p>\n<p>步骤 03.解压 apache-jmeter-5.4.3.zip 并访问 <code>apache-jmeter-5.4.3\\bin</code> 目录 , 执行jmeter.bat (Windows)文件, 如果是linux则执行jmeter.sh文件，如果是Mac请执行jmeter(Unix)文件。<br>此处执行: <code>D:\\Tools\\apache-jmeter-5.4.3\\bin\\jmeter.bat</code><br>温馨提示: 对于 Windows 环境, 我们还有一些其他脚本，我们可以拖放一个 JMX 文件到其中：</p>\n<ul>\n<li><code>jmeterw.cmd</code> - 在不使用windows shell控制台的情况下运行JMeter（默认情况下为GUI模式）</li>\n<li><code>jmeter-n.cmd</code> - 将文件作为非 GUI 测试运行</li>\n<li><code>jmeter-n-r.cmd</code> - 将文件作为非 GUI 远程（客户端-服务器）测试运行</li>\n<li><code>jmeter-t.cmd</code> - 加载文件准备运行它作为一个 GUI 测试</li>\n<li><code>jmeter-server.bat</code> - 在服务器模式下启动JMeter</li>\n</ul>\n<p>步骤 05.运行后将会显示如下界面。</p>\n<figure class=\"image-box\">\n                <img src=\"https://img.weiyigeek.top/2022/5/20220531145949.png\" alt=\"WeiyiGeek.apache-jmeter-5.4.3\" title=\"\" class=\"\">\n                <p>WeiyiGeek.apache-jmeter-5.4.3</p>\n            </figure>\n<p><br/></p>\n<h4 id=\"Docker\"><a href=\"#Docker\" class=\"headerlink\" title=\"Docker\"></a>Docker</h4><p><strong>操作部署</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget -c https://dlcdn.apache.org//jmeter/binaries/apache-jmeter-5.4.3.tgz</span><br><span class=\"line\">mkdir -vp ./build &amp;&amp; tar -zxf ./apache-jmeter-5.4.3.tgz -C ./build</span><br><span class=\"line\"></span><br><span class=\"line\">~/jmeter$ ls build/apache-jmeter-5.4.3/</span><br><span class=\"line\">bin  docs  extras  lib  LICENSE  licenses  NOTICE  printable_docs  README.md</span><br></pre></td></tr></table></figure></p>\n<p><br/></p>\n<h3 id=\"3-配置参数\"><a href=\"#3-配置参数\" class=\"headerlink\" title=\"3.配置参数\"></a>3.配置参数</h3><p>描述: 有几个环境变量可用于定制JMeter的JVM设置, 设置这些的一种简单方法是创建一个名为<code>setenv.bat</code>文件在bin目录中。<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># bin\\setenv.bat</span></span><br><span class=\"line\"><span class=\"comment\"># REM: 它将会被 bin\\jmeter.bat 调用并覆盖其默认值。</span></span><br><span class=\"line\"><span class=\"built_in\">set</span> JVM_ARGS=-Xms1024m -Xmx1024m -Dpropname=value</span><br></pre></td></tr></table></figure></p>\n<p><strong>可用参数:</strong></p>\n<ul>\n<li>DDRAW - 用于直接绘制JVM选择, 例如<code>-Dsun.java2d.ddscale=true</code>, 默认为空。</li>\n<li>GC_ALGO - JVM 垃圾收集器选项, 默认<code>-XX:+UseG1GC -XX:MaxGCPauseMillis=250 -XX:G1ReservePercent=20</code></li>\n<li>HEAP - 启动 JMeter 时使用的 JVM 内存设置。 默认为<code>-Xms1g -Xmx1g -XX:MaxMetaspaceSize=256m</code></li>\n<li>JMETER_BIN - JMeter bin 目录( 必须以 \\ )</li>\n<li>JMETER_COMPLETE_ARGS - 如果设置指示 JVM_ARGS 和 JMETER_OPTS 。 其他 HEAP 和 GC_ALGO 选项将被忽略。</li>\n<li>JMETER_HOME - jmeter 安装目录, 及jmeter.bat存放的目录</li>\n<li>JMETER_LANGUAGE - Jmeter  运行时选项来指定使用的语言, 默认值为<code>-Duser.language=&quot;en&quot; -Duser.region=&quot;EN&quot;</code></li>\n<li>JM_LAUNCH - java 可执行文件的名称，如 java.exe （默认）或 javaw.exe </li>\n<li>JVM_ARGS - 启动 JMeter 时要使用的 Java 选项, 他会将其添加到java执行的命令行中。</li>\n</ul>\n<p>温馨提示: JVM 参数可用于覆盖JMeter.bat脚本中的JVM设置，它会在启动JMeter时设置。</p>\n<p><a href=\"https://jmeter.apache.org/usermanual/get-started.html#running\" target=\"_blank\" rel=\"noopener\">https://jmeter.apache.org/usermanual/get-started.html#running</a></p>\n","comments":true,"excerpt":"[TOC]","categories":[{"name":"压力测试","path":"api/categories/压力测试.json"},{"name":"运维工具","path":"api/categories/运维工具.json"}],"tags":[{"name":"Jmeter","path":"api/tags/Jmeter.json"}]}