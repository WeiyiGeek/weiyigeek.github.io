{"title":"系统硬件以及各类信息查看","slug":"系统运维/Linux/常用命令/系统管理类命令/系统硬件信息查看","date":"2019-06-13T11:36:30.000Z","updated":"2021-07-20T03:08:37.737Z","url":"2019/6-13-166.html","path":"api/articles/2019/6-13-166.html.json","covers":null,"content":"<p>[TOC]</p>\n<a id=\"more\"></a>\n<h2 id=\"0x00-硬件查看\"><a href=\"#0x00-硬件查看\" class=\"headerlink\" title=\"0x00 硬件查看\"></a>0x00 硬件查看</h2><h3 id=\"hwinfo-命令\"><a href=\"#hwinfo-命令\" class=\"headerlink\" title=\"hwinfo 命令\"></a>hwinfo 命令</h3><p>描述：hwinfo 意即硬件信息工具，是另外一种很好的实用工具。它被用来检测系统中已存在的硬件，并且以可读的格式显示各种硬件组件的细节信息。<br>系统发行版安装 hwinfo：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#示例1.Arch Linux</span></span><br><span class=\"line\">$ sudo pacman -S hwinfo</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#示例2.Fedora</span></span><br><span class=\"line\">$ sudo dnf config-manager --add-repo http://download.opensuse.org/repositories/home:/zhonghuaren/Fedora_26/home:zhonghuaren.repo</span><br><span class=\"line\">$ sudo dnf makecache</span><br><span class=\"line\">$ sudo dnf install hwinfo</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#示例3.centos</span></span><br><span class=\"line\">$ sudo rpm -Uvh http://mirror.ghettoforge.org/distributions/gf/gf-release-latest.gf.el6.noarch.rpm</span><br><span class=\"line\">$ sudo rpm -Uvh http://mirror.ghettoforge.org/distributions/gf/gf-release-latest.gf.el7.noarch.rpm</span><br><span class=\"line\">$ sudo yum makecache</span><br><span class=\"line\">$ sudo yum install hwinfo</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#示例4.Debian/Ubuntu</span></span><br><span class=\"line\">$ sudo apt-get install hwinfo</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#示例5.openSUSE </span></span><br><span class=\"line\">$ sudo zypper install hwinfo</span><br></pre></td></tr></table></figure></p>\n<p>hwinfo支持的检测的硬件设备:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CPU : manufacturer, model, frequency</span><br><span class=\"line\">Motherboard : manufacturer, model, BIOS version, on-board controller</span><br><span class=\"line\">RAM : RAM size, RAM type (FP, EDO, SDRAM, DDRAM)</span><br><span class=\"line\">Hard disk controller : SCSI, IDE, on-board&#x2F;card, model, BIOS version, chipset</span><br><span class=\"line\">Hard disks : type, manufacturer, model, size, bus system (SCSI, IDE), partitioning</span><br><span class=\"line\">CD-ROM drives : type, manufacturer, model, speed, internal&#x2F;external, parallel port?</span><br><span class=\"line\">Other media : CD writer, streamer (model, manufacturer, SCSI&#x2F;EIDE&#x2F;floppy streamer, capacity), ZIP drives, Jaz drives, MO drives,flopticals</span><br><span class=\"line\">Graphics card : model, manufacturer, chipset, memory (DRAM, VRAM), memory size</span><br><span class=\"line\">Other peripherals : printer, parallel ports, serial ports, modem, ISDN card</span><br></pre></td></tr></table></figure></p>\n<p>语法参数：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hwinfo [OPTIONS] [HARDWARE_ITEM]</span><br><span class=\"line\"><span class=\"comment\">#指定项查看</span></span><br><span class=\"line\">--&lt;HARDWARE_ITEM&gt;</span><br><span class=\"line\">all, arch, bios, block, bluetooth, braille, bridge, camera,</span><br><span class=\"line\">cdrom, chipcard, cpu, disk, dsl, dvb, fingerprint, floppy,</span><br><span class=\"line\">framebuffer, gfxcard, hub, ide, isapnp, isdn, joystick, keyboard,</span><br><span class=\"line\">memory, mmc-ctrl, modem, monitor, mouse, netcard, network, partition,</span><br><span class=\"line\">pci, pcmcia, pcmcia-ctrl, pppoe, printer, redasd,</span><br><span class=\"line\">reallyall, scanner, scsi, smp, sound, storage-ctrl, sys, tape,</span><br><span class=\"line\">tv, uml, usb, usb-ctrl, vbe, wlan, xen, zip</span><br><span class=\"line\"></span><br><span class=\"line\">-- short <span class=\"comment\">#显示摘要信息</span></span><br></pre></td></tr></table></figure></p>\n<p>基础示例：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#示例1.获取网络信息</span></span><br><span class=\"line\">hwinfo --network</span><br><span class=\"line\">45: None c0.0: 10701 Ethernet</span><br><span class=\"line\">  [Created at net.126]</span><br><span class=\"line\">  Unique ID: c0d5.ndpeucax6V1</span><br><span class=\"line\">  Parent ID: wMMD.PlGB53gtlv4</span><br><span class=\"line\">  SysFS ID: /class/net/ens192</span><br><span class=\"line\">  SysFS Device Link: /devices/pci0000:00/0000:00:16.0/0000:0b:00.0</span><br><span class=\"line\">  Hardware Class: network interface</span><br><span class=\"line\">  Model: <span class=\"string\">\"Ethernet network interface\"</span></span><br><span class=\"line\">  Driver: <span class=\"string\">\"vmxnet3\"</span></span><br><span class=\"line\">  Driver Modules: <span class=\"string\">\"vmxnet3\"</span></span><br><span class=\"line\">  Device File: ens192</span><br><span class=\"line\">  HW Address: 00:50:56:b3:dc:b4</span><br><span class=\"line\">  Permanent HW Address: 00:50:56:b3:dc:b4</span><br><span class=\"line\">  Link detected: yes</span><br><span class=\"line\">  Config Status: cfg=new, avail=yes, need=no, active=unknown</span><br><span class=\"line\">  Attached to: <span class=\"comment\">#44 (Ethernet controller)</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#显示摘要信息</span></span><br><span class=\"line\">hwinfo --short</span><br><span class=\"line\">cpu: Intel(R) Xeon(R) CPU E3-1271 v3 @ 3.60GHz, 3591 MHz</span><br><span class=\"line\">keyboard: /dev/input/event1    AT Translated Set 2 keyboard</span><br><span class=\"line\">mouse:</span><br><span class=\"line\">  /dev/input/mice      VirtualPS/2 VMware VMMouse</span><br><span class=\"line\">  /dev/input/mice      VirtualPS/2 VMware VMMouse</span><br><span class=\"line\">graphics card: VMware VMWARE0405</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<h3 id=\"lshw-命令-硬件列表\"><a href=\"#lshw-命令-硬件列表\" class=\"headerlink\" title=\"lshw 命令 - 硬件列表\"></a>lshw 命令 - 硬件列表</h3><p>描述:lshw(list hardware)列出硬件设备<code>提取对机器的硬件配置的详细信息</code>,相当于 Windows 下的设备管理器列出系统里的硬件设备。<br>它可以在DMI-能够x86或IA-64系统和一些PowerPC上（的PowerMac G4是已知的工作）报告精确的存储器配置，固件版本，主板配置，CPU版本和速度，高速缓存配置，总线速度等。<br>它目前支持DMI（x86和IA-64只），的OpenFirmware设备树<code>（仅用于PowerPC），PCI / AGP，CPUID（86），IDE / ATA / ATAPI，PCMCIA（仅在x86测试），SCSI和USB</code>。</p>\n<p>软件安装:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#RHEL/CentOS</span></span><br><span class=\"line\">yum install -y lshw</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#Debian/Ubuntu</span></span><br><span class=\"line\">apt install lshw</span><br></pre></td></tr></table></figure></p>\n<p>基础语法:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure></p>\n<p>基础示例:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 示例1</span></span><br><span class=\"line\"><span class=\"variable\">$lshw</span> | more</span><br><span class=\"line\">vm-1575613390.novalocal</span><br><span class=\"line\">    description: Computer</span><br><span class=\"line\">    product: OpenStack Compute</span><br><span class=\"line\">    vendor: RDO</span><br><span class=\"line\">    version: 17.0.3-1.el7</span><br><span class=\"line\">    serial: 9315fa46-d2a5-4f79-b22d-3e1cc9ae719b</span><br><span class=\"line\">    width: 64 bits</span><br><span class=\"line\">    capabilities: smbios-2.8 dmi-2.8 smp vsyscall32</span><br><span class=\"line\">    configuration: boot=normal family=Virtual Machine uuid=63032450-4D69-A249-A359-FA387FD1E17D</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 示例2.列举出当前系统可显示的设备信息</span></span><br><span class=\"line\"><span class=\"variable\">$lshw</span> | grep <span class=\"string\">\"*\"</span></span><br><span class=\"line\">*-core</span><br><span class=\"line\">     *-firmware</span><br><span class=\"line\">     *-cpu:0</span><br><span class=\"line\">     *-cpu:1</span><br><span class=\"line\">     *-cpu:2</span><br><span class=\"line\">     *-cpu:3</span><br><span class=\"line\">     *-memory</span><br><span class=\"line\">        *-bank</span><br><span class=\"line\">     *-pci</span><br><span class=\"line\">        *-isa</span><br><span class=\"line\">        *-ide</span><br><span class=\"line\">           *-cdrom</span><br><span class=\"line\">              *-medium</span><br><span class=\"line\">        *-usb</span><br><span class=\"line\">           *-usbhost</span><br><span class=\"line\">              *-usb</span><br><span class=\"line\">        *-bridge</span><br><span class=\"line\">        *-display</span><br><span class=\"line\">        *-network</span><br><span class=\"line\">           *-virtio0</span><br><span class=\"line\">        *-communication</span><br><span class=\"line\">           *-virtio1 UNCLAIMED</span><br><span class=\"line\">        *-scsi</span><br><span class=\"line\">           *-virtio2</span><br><span class=\"line\">              *-volume</span><br><span class=\"line\">        *-generic</span><br><span class=\"line\">           *-virtio3 UNCLAIMED</span><br><span class=\"line\">     *-pnp00:00</span><br><span class=\"line\">     *-pnp00:01</span><br><span class=\"line\">     *-pnp00:02</span><br><span class=\"line\">     *-pnp00:03</span><br><span class=\"line\">     *-pnp00:04</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 实例2.EXAMPLES</span></span><br><span class=\"line\">lshw -short <span class=\"comment\">#Lists hardware in a compact format.</span></span><br><span class=\"line\">lshw -class disk -class storage -short</span><br><span class=\"line\"><span class=\"comment\"># H/W path             Device      Class          Description</span></span><br><span class=\"line\"><span class=\"comment\"># ===========================================================</span></span><br><span class=\"line\"><span class=\"comment\"># /0/100/1/0                       storage        MegaRAID SAS-3 3108 [Invader]</span></span><br><span class=\"line\"><span class=\"comment\"># /0/100/2/0                       storage        SAS3008 PCI-Express Fusion-MPT SAS-3</span></span><br><span class=\"line\"><span class=\"comment\"># /0/100/11.4                      storage        C610/X99 series chipset sSATA Controller [AHCI mode]</span></span><br><span class=\"line\"><span class=\"comment\"># /0/100/1f.2          scsi11      storage        C610/X99 series chipset 6-Port SATA Controller [AHCI mode]</span></span><br><span class=\"line\"><span class=\"comment\"># /0/100/1f.2/0.0.0    /dev/cdrom  disk           DVD+-RW DU-8A5LH</span></span><br><span class=\"line\"><span class=\"comment\"># WARNING: output may be incomplete or inaccurate, you should run this program as super-user.</span></span><br><span class=\"line\"></span><br><span class=\"line\">lshw -class disk -class storage <span class=\"comment\"># Lists all disks and storage controllers in the system.</span></span><br><span class=\"line\"><span class=\"comment\"># WARNING: you should run this program as super-user.</span></span><br><span class=\"line\"><span class=\"comment\"># *-raid</span></span><br><span class=\"line\"><span class=\"comment\">#       description: RAID bus controller</span></span><br><span class=\"line\"><span class=\"comment\">#       product: MegaRAID SAS-3 3108 [Invader]</span></span><br><span class=\"line\"><span class=\"comment\">#       vendor: Broadcom / LSI</span></span><br><span class=\"line\"><span class=\"comment\">#       physical id: 0</span></span><br><span class=\"line\"><span class=\"comment\">#       bus info: pci@0000:01:00.0</span></span><br><span class=\"line\"><span class=\"comment\">#       version: 02</span></span><br><span class=\"line\"><span class=\"comment\">#       width: 64 bits</span></span><br><span class=\"line\"><span class=\"comment\">#       clock: 33MHz</span></span><br><span class=\"line\"><span class=\"comment\">#       capabilities: raid bus_master cap_list rom</span></span><br><span class=\"line\"><span class=\"comment\">#       configuration: driver=megaraid_sas latency=0</span></span><br><span class=\"line\"><span class=\"comment\">#       resources: irq:34 ioport:3000(size=256) memory:91f00000-91f0ffff memory:91e00000-91efffff memory:91f20000-91f3ffff</span></span><br><span class=\"line\"><span class=\"comment\"># *-sas</span></span><br><span class=\"line\"><span class=\"comment\">#       description: Serial Attached SCSI controller</span></span><br><span class=\"line\"><span class=\"comment\">#       product: SAS3008 PCI-Express Fusion-MPT SAS-3</span></span><br><span class=\"line\"><span class=\"comment\">#       vendor: Broadcom / LSI</span></span><br><span class=\"line\"><span class=\"comment\">#       physical id: 0</span></span><br><span class=\"line\"><span class=\"comment\">#       bus info: pci@0000:04:00.0</span></span><br><span class=\"line\"><span class=\"comment\">#       version: 02</span></span><br><span class=\"line\"><span class=\"comment\">#       width: 64 bits</span></span><br><span class=\"line\"><span class=\"comment\">#       clock: 33MHz</span></span><br><span class=\"line\"><span class=\"comment\">#       capabilities: sas bus_master cap_list</span></span><br><span class=\"line\"><span class=\"comment\">#       configuration: driver=mpt3sas latency=0</span></span><br><span class=\"line\"><span class=\"comment\">#       resources: irq:78 ioport:2000(size=256) memory:93600000-9360ffff memory:92500000-925fffff memory:93610000-9370ffff memory:92600000-935fffff</span></span><br><span class=\"line\"></span><br><span class=\"line\">lshw -html -class network <span class=\"comment\"># Lists all network interfaces in HTML.</span></span><br><span class=\"line\"></span><br><span class=\"line\">lshw -<span class=\"built_in\">disable</span> dmi <span class=\"comment\"># Don't use DMI to detect hardware.</span></span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<h3 id=\"losetup-命令\"><a href=\"#losetup-命令\" class=\"headerlink\" title=\"losetup 命令\"></a>losetup 命令</h3><p>描述:该命令用于设置循环设备。</p>\n<p>Q: 什么是循环设备?</p>\n<blockquote>\n<p>答: 循环设备可把文件虚拟成区块设备，籍以模拟整个文件系统，让用户得以将其视为硬盘驱动器，光驱或软驱等设备，并挂入当作目录来使用。</p>\n</blockquote>\n<p>基于语法:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">losetup [-d][-e &lt;加密方式&gt;][-o &lt;平移数目&gt;][循环设备代号][文件]</span><br><span class=\"line\"><span class=\"comment\">#参数：</span></span><br><span class=\"line\">-d 卸除设备。</span><br><span class=\"line\">-e&lt;加密方式&gt; 启动加密编码。</span><br><span class=\"line\">-o&lt;平移数目&gt; 设置数据平移的数目。</span><br></pre></td></tr></table></figure></p>\n<p>基础示例:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 1.列出当前系统中所有使用的设备，其中用来虚拟出块设备(文件系统)</span></span><br><span class=\"line\">$ losetup -a</span><br><span class=\"line\">/dev/loop0: [0038]:23855612 (/disk/docker/200/devicemapper/devicemapper/data)</span><br><span class=\"line\">/dev/loop1: [0038]:23855719 (/disk/docker/200/devicemapper/devicemapper/metadata)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 2.简单示例</span></span><br><span class=\"line\"><span class=\"comment\"># (1) 首先创建一个 1G 大小的空文件：</span></span><br><span class=\"line\">dd <span class=\"keyword\">if</span>=/dev/zero of=loopfile.img bs=1G count=1</span><br><span class=\"line\"><span class=\"comment\"># 1+0 records in</span></span><br><span class=\"line\"><span class=\"comment\"># 1+0 records out</span></span><br><span class=\"line\"><span class=\"comment\"># 1073741824 bytes (1.1 GB) copied, 69.3471 s, 15.5 MB/s</span></span><br><span class=\"line\"><span class=\"comment\"># (2) 对该文件格式化为 ext4 格式：</span></span><br><span class=\"line\">mkfs.ext4 loopfile.img</span><br><span class=\"line\"><span class=\"comment\"># (3) 用 file 命令查看下格式化后的文件类型：</span></span><br><span class=\"line\">file loopfile.img</span><br><span class=\"line\"><span class=\"comment\"># loopfile.img: Linux rev 1.0 ext4 filesystem data, UUID=a9dfb4a0-6653-4407-ae05-7044d92c1159 (extents) (large files) (huge files</span></span><br><span class=\"line\"><span class=\"comment\"># (4) 挂载块设备然后通过/tmp目录像访问真实快设备一样来访问磁盘镜像文件floppy.img。</span></span><br><span class=\"line\">$ losetup /dev/loop0 loopfile.img</span><br><span class=\"line\">$ mount /dev/loop0 /mnt/loopback   </span><br><span class=\"line\"><span class=\"comment\">#实际等价于下面两条命令</span></span><br><span class=\"line\"><span class=\"comment\"># $ mkdir /mnt/loopback</span></span><br><span class=\"line\"><span class=\"comment\"># $ mount -o loop loopfile.img /mnt/loopback</span></span><br><span class=\"line\"><span class=\"comment\"># (5) 卸载loop设备</span></span><br><span class=\"line\">$ umount /tmp</span><br><span class=\"line\">$ losetup -d /dev/loop1</span><br></pre></td></tr></table></figure></p>\n<p>注意事项:对于第一种方法(<code>mount -o loop</code>)并不能适用于所有的场景。<br>比如我们想创建一个硬盘文件然后对该文件进行分区，接着挂载其中一个子分区，这时就不能用 -o loop 这种方法了。<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">losetup /dev/loop1 loopfile.img</span><br><span class=\"line\">fdisk /dev/loop1</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<h3 id=\"dmsetup-命令\"><a href=\"#dmsetup-命令\" class=\"headerlink\" title=\"dmsetup 命令\"></a>dmsetup 命令</h3><p>描述:该命令是一个用来与 Device Mapper 沟通的命令行封装器（wrapper）。可使用 dmsetup 命令的 <code>info、ls、status 和 deps 选项</code>查看 LVM 设备的常规信息;</p>\n<p>基础语法:</p>\n<p>示例1.Device Mapper 设备概述查看<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ dmsetup info</span><br><span class=\"line\"><span class=\"comment\"># Name 设备名称LVM 设备以用小横线分隔的卷组名称和逻辑卷名称表示即源名称-设备号:次设备号-inode数据量;</span></span><br><span class=\"line\"><span class=\"comment\"># 在标准 LVM 操作过程中，不应使用这种格式的 LVM 设备名称直接指定 LVM 设备，而是应该使用 vg/lv 指定。</span></span><br><span class=\"line\">Name:              docker-0:38-23863364-574e9e5fad5388c883ad2c6ad19c6bd0b1f3022fa03e8ab52bec6e8e1ed190b3</span><br><span class=\"line\"><span class=\"comment\"># State 可能的设备状态是 SUSPENDED(dmsetup suspend)当挂起某个设备时会停止对该设备的所有 I/O 操作、ACTIVE(dmsetup resume) 和 READ-ONLY</span></span><br><span class=\"line\">State:             ACTIVE</span><br><span class=\"line\"><span class=\"comment\"># Read Ahead 系统对正在进行读取操作的任意打开文件的预读数据块数目</span></span><br><span class=\"line\">Read Ahead:        8192</span><br><span class=\"line\"><span class=\"comment\"># Tables present 该这个类型的可能状态为 LIVE 和 INACTIVE。INACTIVE 状态表示已经载入了表格，且会在 dmsetup resume 命令将某个设备状态恢复为 ACTIVE 时进行切换，届时表格状态将为 LIVE</span></span><br><span class=\"line\">Tables present:    LIVE</span><br><span class=\"line\"><span class=\"comment\"># Open count 打开参考计数表示打开该设备的次数</span></span><br><span class=\"line\">Open count:        1</span><br><span class=\"line\"><span class=\"comment\"># 目前收到的事件数目</span></span><br><span class=\"line\">Event number:      0</span><br><span class=\"line\"><span class=\"comment\"># Major, minor 主设备号码和副设备号码</span></span><br><span class=\"line\">Major, minor:      253, 8</span><br><span class=\"line\"><span class=\"comment\"># Number of targets 组成某个设备的片段数目。</span></span><br><span class=\"line\"><span class=\"comment\"># 例如：一个跨三个磁盘的线性设备会有三个目标。线性设备由某个磁盘起始和结尾，而不是中间组成的线性设备有两个目标。</span></span><br><span class=\"line\">Number of targets: 1</span><br><span class=\"line\">------------------------------------------------------------------------</span><br><span class=\"line\"><span class=\"variable\">$dmsetup</span> info centos-root <span class=\"comment\">#查看dm-name设备的基本信息 </span></span><br><span class=\"line\">Name:              centos-root</span><br><span class=\"line\">State:             ACTIVE</span><br><span class=\"line\">Read Ahead:        8192</span><br><span class=\"line\">Tables present:    LIVE</span><br><span class=\"line\">Open count:        1</span><br><span class=\"line\">Event number:      0</span><br><span class=\"line\">Major, minor:      253, 0</span><br><span class=\"line\">Number of targets: 1</span><br><span class=\"line\">UUID: LVM-NzOjfUT1AfxkbvBPhhTf9aBT1r9Rtsou7mtVdynEO0VfrLOYiffjd7KL9benyU4o <span class=\"comment\">#设备的UUID</span></span><br></pre></td></tr></table></figure></p>\n<p>示例2.命令常用参数演示:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># (0) 查看系统支持的target_type及版本信息  </span></span><br><span class=\"line\"><span class=\"variable\">$dmsetup</span> targets </span><br><span class=\"line\"><span class=\"comment\"># mirror           v1.13.2</span></span><br><span class=\"line\"><span class=\"comment\"># striped          v1.6.0</span></span><br><span class=\"line\"><span class=\"comment\"># linear           v1.3.0</span></span><br><span class=\"line\"><span class=\"comment\"># error            v1.5.0</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># (1) 列出映射的设备的设备名称列表</span></span><br><span class=\"line\"><span class=\"variable\">$dmsetup</span> ls</span><br><span class=\"line\"><span class=\"comment\"># centos-app      (253:2)</span></span><br><span class=\"line\"><span class=\"comment\"># centos-swap     (253:1)</span></span><br><span class=\"line\"><span class=\"comment\"># centos-root     (253:0)</span></span><br><span class=\"line\"><span class=\"comment\"># 列出至少有一个指定类型目标的设备,比如列出目前配置的镜像映射设备名称的命令。</span></span><br><span class=\"line\"><span class=\"variable\">$dmsetup</span> ls --target target_type</span><br><span class=\"line\"><span class=\"variable\">$dmsetup</span> ls --target mirror</span><br><span class=\"line\"><span class=\"comment\"># lock_stress-grant--02.1722      (253, 34)</span></span><br><span class=\"line\"><span class=\"comment\"># lock_stress-grant--01.1720      (253, 18)</span></span><br><span class=\"line\"><span class=\"comment\"># lock_stress-grant--03.1718      (253, 52)</span></span><br><span class=\"line\"><span class=\"comment\"># 以树形式显示设备间的相依性</span></span><br><span class=\"line\"><span class=\"variable\">$dmsetup</span> ls --tree</span><br><span class=\"line\"><span class=\"comment\"># centos-app (253:2)</span></span><br><span class=\"line\"><span class=\"comment\">#  └─ (8:2)</span></span><br><span class=\"line\"><span class=\"comment\"># centos-swap (253:1)</span></span><br><span class=\"line\"><span class=\"comment\">#  └─ (8:2)</span></span><br><span class=\"line\"><span class=\"comment\"># centos-root (253:0)</span></span><br><span class=\"line\"><span class=\"comment\">#  └─ (8:2)</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># (2) 查看设备的依赖关系</span></span><br><span class=\"line\"><span class=\"variable\">$dmsetup</span> deps <span class=\"comment\">#为指定设备的映射列表参考的设备提供（major，minor）对列表</span></span><br><span class=\"line\">centos-app: 1 dependencies      : (8, 2)</span><br><span class=\"line\">centos-swap: 1 dependencies     : (8, 2)</span><br><span class=\"line\">centos-root: 1 dependencies     : (8, 2)</span><br><span class=\"line\"><span class=\"comment\"># 只列出设备 centos-root相依性的命令</span></span><br><span class=\"line\">dmsetup deps centos-root</span><br><span class=\"line\">3 dependencies  : (253, 33) (253, 32) (253, 31)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># (3) 用来列出在所有目前配置映射设备中目标状态的命令</span></span><br><span class=\"line\"><span class=\"variable\">$dmsetup</span> status</span><br><span class=\"line\"><span class=\"comment\"># centos-app: 0 20971520 linear</span></span><br><span class=\"line\"><span class=\"comment\"># centos-swap: 0 8126464 linear</span></span><br><span class=\"line\"><span class=\"comment\"># centos-root: 0 73646080 linear</span></span><br><span class=\"line\"><span class=\"variable\">$dmsetup</span> status --target linear</span><br><span class=\"line\">centos-app: 0 20971520 linear</span><br><span class=\"line\">centos-swap: 0 8126464 linear</span><br><span class=\"line\">centos-root: 0 73646080 linear</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># (4)设备创建</span></span><br><span class=\"line\">dmsetup create dm-name dm-table 　　          <span class=\"comment\">#根据dm-table建立一个dm-name的设备</span></span><br><span class=\"line\">dmsetup create dm-name --table <span class=\"string\">\"dm-table-txt\"</span>  <span class=\"comment\">#根据\"dm-table-txt\" 建立一个dm-name的设备</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># (5)重载dm-table</span></span><br><span class=\"line\">dmsetup load/reload dm-name dm-table 　　</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># (6)暂停dm-name设备且设备状态是 SUSPENDED</span></span><br><span class=\"line\">dmsetup <span class=\"built_in\">suspend</span> dm-name 　　</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># (7)重新使用dm-name设备 　</span></span><br><span class=\"line\">dmsetup resume dm-name 　</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># (8)删除dm-name 　　</span></span><br><span class=\"line\">dmsetup remove dm-name dm-name</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<h3 id=\"dmidecode-命令-可读格式转储计算机DMI表内容的工具\"><a href=\"#dmidecode-命令-可读格式转储计算机DMI表内容的工具\" class=\"headerlink\" title=\"dmidecode 命令 - 可读格式转储计算机DMI表内容的工具\"></a>dmidecode 命令 - 可读格式转储计算机DMI表内容的工具</h3><p>描述: dmidecode 是一种以可读格式转储计算机DMI（有人说是SMBIOS）表内容的工具。此表包含系统硬件组成的说明以及其他有用的信息，如序列号和BIOS版本。由于有了这个表您可以检索这些信息，而无需探测实际的硬件。虽然这在报告速度和安全性方面是一个很好的观点，但这也使得提供的信息可能不可靠。</p>\n<ul>\n<li>DMI 表不仅描述了系统当前的组成，它还可以报告可能的演变（例如支持的最快CPU或最大内存量）支持内存）。</li>\n<li>SMBIOS 代表系统管理BIOS而DMI代表桌面管理接口,这两个标准紧密相关由DMTF（桌面管理任务）开发力）。</li>\n</ul>\n<p><br/></p>\n<p><strong>基础语法:</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Usage: </span></span><br><span class=\"line\">dmidecode [OPTIONS]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 选项</span></span><br><span class=\"line\">-d, --dev-mem FILE</span><br><span class=\"line\">      Read memory from device FILE (default: /dev/mem)</span><br><span class=\"line\"></span><br><span class=\"line\">-q, --quiet</span><br><span class=\"line\">      Be less verbose. Unknown, inactive and OEM-specific entries are not displayed. Meta-data and handle references are hidden.</span><br><span class=\"line\"></span><br><span class=\"line\">-s, --string KEYWORD</span><br><span class=\"line\">      Only display the value of the DMI string identified by KEYWORD.  KEYWORD must be a keyword from the following list: bios-vendor,  bios-version,  bios-release-date,  system-</span><br><span class=\"line\">      manufacturer,  system-product-name,  system-version,  system-serial-number,  system-uuid,  system-family, baseboard-manufacturer, baseboard-product-name, baseboard-version,</span><br><span class=\"line\">      baseboard-serial-number, baseboard-asset-tag, chassis-manufacturer, chassis-type, chassis-version, chassis-serial-number,  chassis-asset-tag,  processor-family,  processor-</span><br><span class=\"line\">      manufacturer, processor-version, processor-frequency.  Each keyword corresponds to a given DMI <span class=\"built_in\">type</span> and a given offset within this entry <span class=\"built_in\">type</span>.  Not all strings may be mean‐</span><br><span class=\"line\">      ingful or even defined on all systems. Some keywords may <span class=\"built_in\">return</span> more than one result on some systems (e.g.  processor-version on a multi-processor system).  If  KEYWORD  is</span><br><span class=\"line\">      not provided or not valid, a list of all valid keywords is printed and dmidecode exits with an error.  This option cannot be used more than once.</span><br><span class=\"line\"></span><br><span class=\"line\">      Note:  on  Linux, most of these strings can alternatively be <span class=\"built_in\">read</span> directly from sysfs, typically from files under /sys/devices/virtual/dmi/id.  Most of these files are even</span><br><span class=\"line\">      readable by regular users.</span><br><span class=\"line\"></span><br><span class=\"line\">-t, --<span class=\"built_in\">type</span> TYPE</span><br><span class=\"line\">      Only display the entries of <span class=\"built_in\">type</span> TYPE. TYPE can be either a DMI <span class=\"built_in\">type</span> number, or a comma-separated list of <span class=\"built_in\">type</span> numbers, or a keyword from the following list: bios,  system,</span><br><span class=\"line\">      baseboard,  chassis,  processor,  memory,  cache, connector, slot. Refer to the DMI TYPES section below <span class=\"keyword\">for</span> details.  If this option is used more than once, the <span class=\"built_in\">set</span> of dis‐</span><br><span class=\"line\">      played entries will be the union of all the given types.  If TYPE is not provided or not valid, a list of all valid keywords is printed and dmidecode exits with an error.</span><br><span class=\"line\"></span><br><span class=\"line\">-H, --handle HANDLE</span><br><span class=\"line\">      Only display the entry whose handle matches HANDLE.  HANDLE is a 16-bit <span class=\"built_in\">integer</span>.</span><br><span class=\"line\"></span><br><span class=\"line\">-u, --dump</span><br><span class=\"line\">      Do not decode the entries, dump their contents as hexadecimal instead.  Note that this is still a text output, no binary data will be thrown upon you. The strings  attached</span><br><span class=\"line\">      to each entry are displayed as both hexadecimal and ASCII. This option is mainly useful <span class=\"keyword\">for</span> debugging.</span><br><span class=\"line\"></span><br><span class=\"line\">    --dump-bin FILE</span><br><span class=\"line\">      Do not decode the entries, instead dump the DMI data to a file <span class=\"keyword\">in</span> binary form. The generated file is suitable to pass to --from-dump later.</span><br><span class=\"line\"></span><br><span class=\"line\">    --from-dump FILE</span><br><span class=\"line\">      Read the DMI data from a binary file previously generated using --dump-bin.</span><br><span class=\"line\"></span><br><span class=\"line\">    --no-sysfs</span><br><span class=\"line\">      Do not attempt to <span class=\"built_in\">read</span> DMI data from sysfs files. This is mainly useful <span class=\"keyword\">for</span> debugging.</span><br><span class=\"line\"></span><br><span class=\"line\">    --oem-string N</span><br><span class=\"line\">      Only display the value of the OEM string number N. The first OEM string has number 1. With special value <span class=\"string\">\"count\"</span>, <span class=\"built_in\">return</span> the number of OEM strings instead.</span><br><span class=\"line\">    </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># DMI TYPES : SMBIOS规范定义了以下DMI类型</span></span><br><span class=\"line\">Type   Information</span><br><span class=\"line\">────────────────────────────────────────────</span><br><span class=\"line\">0   BIOS</span><br><span class=\"line\">1   System</span><br><span class=\"line\">2   Baseboard</span><br><span class=\"line\">3   Chassis</span><br><span class=\"line\">4   Processor</span><br><span class=\"line\">5   Memory Controller</span><br><span class=\"line\">6   Memory Module</span><br><span class=\"line\">7   Cache</span><br><span class=\"line\">8   Port Connector</span><br><span class=\"line\">9   System Slots</span><br><span class=\"line\">10   On Board Devices</span><br><span class=\"line\">11   OEM Strings</span><br><span class=\"line\">12   System Configuration Options</span><br><span class=\"line\">13   BIOS Language</span><br><span class=\"line\">14   Group Associations</span><br><span class=\"line\">15   System Event Log</span><br><span class=\"line\">16   Physical Memory Array</span><br><span class=\"line\">17   Memory Device</span><br><span class=\"line\">18   32-bit Memory Error</span><br><span class=\"line\">19   Memory Array Mapped Address</span><br><span class=\"line\">20   Memory Device Mapped Address</span><br><span class=\"line\">21   Built-in Pointing Device</span><br><span class=\"line\">22   Portable Battery</span><br><span class=\"line\">23   System Reset</span><br><span class=\"line\">24   Hardware Security</span><br><span class=\"line\">25   System Power Controls</span><br><span class=\"line\">26   Voltage Probe</span><br><span class=\"line\">27   Cooling Device</span><br><span class=\"line\">28   Temperature Probe</span><br><span class=\"line\">29   Electrical Current Probe</span><br><span class=\"line\">30   Out-of-band Remote Access</span><br><span class=\"line\">31   Boot Integrity Services</span><br><span class=\"line\">32   System Boot</span><br><span class=\"line\">33   64-bit Memory Error</span><br><span class=\"line\">34   Management Device</span><br><span class=\"line\">35   Management Device Component</span><br><span class=\"line\">36   Management Device Threshold Data</span><br><span class=\"line\">37   Memory Channel</span><br><span class=\"line\">38   IPMI Device</span><br><span class=\"line\">39   Power Supply</span><br><span class=\"line\">40   Additional Information</span><br><span class=\"line\">41   Onboard Devices Extended Information</span><br><span class=\"line\">42   Management Controller Host Interface</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># FILES</span></span><br><span class=\"line\">* /dev/mem</span><br><span class=\"line\">* /sys/firmware/dmi/tables/smbios_entry_point (Linux only)</span><br><span class=\"line\">* /sys/firmware/dmi/tables/DMI (Linux only)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 关键字可以用--type代替数字类型,每个关键字都相当于一个类型编号列表：</span></span><br><span class=\"line\">Keyword     Types</span><br><span class=\"line\">──────────────────────────────</span><br><span class=\"line\">bios        0, 13</span><br><span class=\"line\">system      1, 12, 15, 23, 32</span><br><span class=\"line\">baseboard   2, 10, 41</span><br><span class=\"line\">chassis     3</span><br><span class=\"line\">processor   4</span><br><span class=\"line\">memory      5, 6, 16, 17</span><br><span class=\"line\">cache       7</span><br><span class=\"line\">connector   8</span><br><span class=\"line\">slot        9</span><br></pre></td></tr></table></figure></p>\n<p><br/></p>\n<p>Tips: 记录相关信息可包括<code>handle/type/size/Decoded values</code>.<br>• A handle. 这是一个唯一的标识符，允许记录相互引用。例如，处理器记录通常使用其句柄引用缓存记录。<br>• A type. SMBIOS规范定义了计算机可以使用的不同类型的元素。在本例中，类型是2，这意味着记录包含“基板”<br>信息”。<br>• A size. 每个记录都有一个4字节的头（2代表句柄，1代表类型，1代表大小），其余的由记录数据使用。此值不将文本字符串带入计数（这些字符串放在记录的末尾），因此记录的实际长度可能（通常）大于显示的值。<br>• Decoded values. 提供的信息当然取决于记录的类型。在这里，我们将了解电路板的制造商、型号、版本和序列号。</p>\n<p><br/></p>\n<p><strong>基础示例:</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># (1) 判断机器是否为虚拟机</span></span><br><span class=\"line\">dmidecode -s system-product-name</span><br><span class=\"line\">  <span class=\"comment\"># VMware7,1</span></span><br><span class=\"line\">dmidecode -s system-serial-number</span><br><span class=\"line\">  <span class=\"comment\"># VMware-56 4d 8c f9 b2 9f 92 bc-98 be 26 48 c8 3e b7 b5</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># (2) 查看BIOS相关信息</span></span><br><span class=\"line\">$ dmidecode -t BIOS</span><br><span class=\"line\">Handle 0x0000, DMI <span class=\"built_in\">type</span> 0, 26 bytes</span><br><span class=\"line\">BIOS Information</span><br><span class=\"line\">  Vendor: VMware, Inc.</span><br><span class=\"line\">  Version: VMW71.00V.17369862.B64.2012240522</span><br><span class=\"line\">  Release Date: 12/24/2020</span><br><span class=\"line\">  ROM Size: 2048 kB</span><br><span class=\"line\">  Characteristics:</span><br><span class=\"line\">    ISA is supported</span><br><span class=\"line\">    PCI is supported</span><br><span class=\"line\">    PNP is supported</span><br><span class=\"line\">    BIOS is upgradeable</span><br><span class=\"line\">    Targeted content distribution is supported</span><br><span class=\"line\">    UEFI is supported</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># (3) 查看SLOT卡槽相关信息</span></span><br><span class=\"line\">$ dmidecode -t <span class=\"string\">\"slot\"</span>  </span><br><span class=\"line\">Handle 0x0088, DMI <span class=\"built_in\">type</span> 9, 17 bytes</span><br><span class=\"line\">System Slot Information</span><br><span class=\"line\">        Designation: PCI Slot J11</span><br><span class=\"line\">        Type: 32-bit PCI</span><br><span class=\"line\">        Current Usage: In Use</span><br><span class=\"line\">        Length: Long</span><br><span class=\"line\">        ID: 1</span><br><span class=\"line\">        Characteristics:</span><br><span class=\"line\">                5.0 V is provided</span><br><span class=\"line\">                3.3 V is provided</span><br><span class=\"line\">        Bus Address: 0000:00:0f.0</span><br><span class=\"line\"></span><br><span class=\"line\">Handle 0x0089, DMI <span class=\"built_in\">type</span> 9, 17 bytes</span><br><span class=\"line\">System Slot Information</span><br><span class=\"line\">        Designation: PCI Slot J12</span><br><span class=\"line\">        Type: 32-bit PCI</span><br><span class=\"line\">        Current Usage: In Use</span><br><span class=\"line\">        Length: Long</span><br><span class=\"line\">        ID: 2</span><br><span class=\"line\">        Characteristics:</span><br><span class=\"line\">                5.0 V is provided</span><br><span class=\"line\">                3.3 V is provided</span><br><span class=\"line\">        Bus Address: 0000:00:10.0</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># (4) 查看Baseboard相关信息</span></span><br><span class=\"line\">$ dmidecode -t <span class=\"string\">\"baseboard\"</span></span><br><span class=\"line\">Handle 0x0002, DMI <span class=\"built_in\">type</span> 2, 15 bytes</span><br><span class=\"line\">Base Board Information</span><br><span class=\"line\">        Manufacturer: Intel Corporation</span><br><span class=\"line\">        Product Name: 440BX Desktop Reference Platform</span><br><span class=\"line\">        Version: None</span><br><span class=\"line\">        Serial Number: None</span><br><span class=\"line\">        Asset Tag: Not Specified</span><br><span class=\"line\">        Features: None</span><br><span class=\"line\">        Location In Chassis: Not Specified</span><br><span class=\"line\">        Chassis Handle: 0x0000</span><br><span class=\"line\">        Type: Other</span><br><span class=\"line\">        Contained Object Handles: 0</span><br><span class=\"line\"></span><br><span class=\"line\">Handle 0x008E, DMI <span class=\"built_in\">type</span> 10, 8 bytes</span><br><span class=\"line\">On Board Device 1 Information</span><br><span class=\"line\">        Type: Video</span><br><span class=\"line\">        Status: Disabled</span><br><span class=\"line\">        Description: VMware SVGA II</span><br><span class=\"line\">On Board Device 2 Information</span><br><span class=\"line\">        Type: Sound</span><br><span class=\"line\">        Status: Disabled</span><br><span class=\"line\">        Description: ES1371</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># (5) 以Handle查看相关信息</span></span><br><span class=\"line\">$ dmidecode -H 0x008E</span><br><span class=\"line\">Handle 0x008E, DMI <span class=\"built_in\">type</span> 10, 8 bytes</span><br><span class=\"line\">On Board Device 1 Information</span><br><span class=\"line\">        Type: Video</span><br><span class=\"line\">        Status: Disabled</span><br><span class=\"line\">        Description: VMware SVGA II</span><br><span class=\"line\">On Board Device 2 Information</span><br><span class=\"line\">        Type: Sound</span><br><span class=\"line\">        Status: Disabled</span><br><span class=\"line\">        Description: ES1371</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># (6) 关键字不区分大小写匹配以下命令行是等效的：</span></span><br><span class=\"line\">• dmidecode --<span class=\"built_in\">type</span> 0 --<span class=\"built_in\">type</span> 13</span><br><span class=\"line\">• dmidecode --<span class=\"built_in\">type</span> 0,13</span><br><span class=\"line\">• dmidecode --<span class=\"built_in\">type</span> bios</span><br><span class=\"line\">• dmidecode --<span class=\"built_in\">type</span> BIOS</span><br></pre></td></tr></table></figure></p>\n<p>Tips : 注意如果dmidecode在具有新的SMBIOS规范的BIOS系统上运行，该工具还不支持该规范，它将在中打印相关消息</p>\n<hr>\n<h2 id=\"0x01-消息队列\"><a href=\"#0x01-消息队列\" class=\"headerlink\" title=\"0x01 消息队列\"></a>0x01 消息队列</h2><p>它们是shell中管理IPC对象的命令是<code>ipcs、ipcmk和ipcrm</code>。</p>\n<h3 id=\"ipcmk-命令\"><a href=\"#ipcmk-命令\" class=\"headerlink\" title=\"ipcmk 命令\"></a>ipcmk 命令</h3><p>描述:创建一个消息队列或者共享内存段;</p>\n<p>基础语法:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">用法：</span><br><span class=\"line\"> ipcmk [选项]</span><br><span class=\"line\"></span><br><span class=\"line\">选项：</span><br><span class=\"line\"> -M, --shmem &lt;size&gt;       创建大小为 &lt;size&gt; 的共享内存段。</span><br><span class=\"line\"> -S, --semaphore &lt;nsems&gt;  创建包含 &lt;nsems&gt; 个元素的信号量数组</span><br><span class=\"line\"> -Q, --queue              创建消息队列</span><br><span class=\"line\"> -p, --mode &lt;模式&gt;        资源的权限模式掩码(默认为 0644)</span><br></pre></td></tr></table></figure></p>\n<p>基础示例:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 1. 创建一个消息队列</span></span><br><span class=\"line\">ipcmk -Q -p 0644</span><br><span class=\"line\"><span class=\"comment\">#消息队列 id：65538</span></span><br><span class=\"line\">ipcs | grep <span class=\"string\">\"65538\"</span></span><br><span class=\"line\"><span class=\"comment\"># --------- 消息队列 -----------</span></span><br><span class=\"line\"><span class=\"comment\"># 键        msqid      拥有者  权限     已用字节数 消息</span></span><br><span class=\"line\"><span class=\"comment\"># 0x651dbb47 0          root       644        0            0</span></span><br><span class=\"line\"><span class=\"comment\"># 0x6a915d28 32769      root       644        0            0</span></span><br><span class=\"line\"><span class=\"comment\"># 0xb166ebf2 65538      root       644        0            0</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 2.创建一个消息队列共享内存段</span></span><br><span class=\"line\">ipcmk -M 512</span><br><span class=\"line\"><span class=\"comment\"># 共享内存 id：0</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 3.创建包含10个元素的信号量数组</span></span><br><span class=\"line\">ipcmk -S 10</span><br><span class=\"line\"><span class=\"comment\">#信号量 id：98304</span></span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<h3 id=\"ipcs-命令\"><a href=\"#ipcs-命令\" class=\"headerlink\" title=\"ipcs 命令\"></a>ipcs 命令</h3><p>描述:查看当前消息队列以及共享内存段和信息量数组</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">用法：</span><br><span class=\"line\"> ipcs [resource ...] [output-format]</span><br><span class=\"line\"> ipcs [resource] -i &lt;id&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">选项：</span><br><span class=\"line\"> -i, --id &lt;id&gt;  打印由 id 标识的资源的详细信息</span><br><span class=\"line\"></span><br><span class=\"line\">资源选项：</span><br><span class=\"line\"> -m, --shmems      共享内存段</span><br><span class=\"line\"> -q, --queues      消息队列</span><br><span class=\"line\"> -s, --semaphores  信号量</span><br><span class=\"line\"> -a, --all         全部(默认)</span><br><span class=\"line\"></span><br><span class=\"line\">输出格式：</span><br><span class=\"line\"> -t, --time        显示附加、脱离和更改时间</span><br><span class=\"line\"> -p, --pid         显示 PID 的创建者和最后操作</span><br><span class=\"line\"> -c, --creator     显示创建者和拥有者</span><br><span class=\"line\"> -l, --limits      显示资源限制</span><br><span class=\"line\"> -u, --summary     显示状态摘要</span><br><span class=\"line\">     --human       以易读格式显示大小</span><br><span class=\"line\"> -b, --bytes       以字节数显示大小</span><br></pre></td></tr></table></figure>\n<p>基础示例:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 0.默认显示所有</span></span><br><span class=\"line\">--------- 消息队列 -----------</span><br><span class=\"line\">键        msqid      拥有者  权限     已用字节数 消息</span><br><span class=\"line\">0xfdfc00fe 98304      root       644        0            0</span><br><span class=\"line\">------------ 共享内存段 --------------</span><br><span class=\"line\">键        shmid      拥有者  权限     字节     nattch     状态</span><br><span class=\"line\">--------- 信号量数组 -----------</span><br><span class=\"line\">键        semid      拥有者  权限     nsems</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 1.查看消息队列共享内存段和信息量数组</span></span><br><span class=\"line\"><span class=\"variable\">$ipcs</span> -p -c</span><br><span class=\"line\">---------- 消息队列 创建者/拥有者 ------------</span><br><span class=\"line\">msqid      权限     cuid       cgid       uid        gid</span><br><span class=\"line\">65538      644        root       root       root       root</span><br><span class=\"line\">------------- 共享内存段创建者/拥有者 ---------------</span><br><span class=\"line\">shmid      权限     cuid       cgid       uid        gid</span><br><span class=\"line\">0          644        root       root       root       root</span><br><span class=\"line\">----------- 信号量数组创建者/拥有者 ------------</span><br><span class=\"line\">semid      权限     cuid       cgid       uid        gid</span><br><span class=\"line\">98304      644        root       root       root       root</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 2.查看消息队列带上时间</span></span><br><span class=\"line\"><span class=\"variable\">$ipcs</span> -t</span><br><span class=\"line\">----------- 消息队列 发送/接收/更改 时间 ------------</span><br><span class=\"line\">65538    root       未设置            未设置            Jul  6 11:52:36</span><br><span class=\"line\">------------ 共享内存 添加/脱离/更改 时间 --------------</span><br><span class=\"line\">shmid      拥有者  已连上            已断开            已更改</span><br><span class=\"line\">0          root       未设置            未设置          Jul  6 14:06:26</span><br><span class=\"line\">------------ 信号量 操作/更改 时间 -------------</span><br><span class=\"line\">semid    拥有者  上一操作               上次更改</span><br><span class=\"line\">98304    root        未设置                  Mon       Jul  6 14:07:17 2020</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 3.显示消息状态，共享内存状态，信号量</span></span><br><span class=\"line\"><span class=\"variable\">$ipcs</span> -l</span><br><span class=\"line\"><span class=\"comment\"># ---------- 消息限制 -----------</span></span><br><span class=\"line\"><span class=\"comment\"># 系统最大队列数量 = 3770</span></span><br><span class=\"line\"><span class=\"comment\"># 最大消息尺寸 (字节) = 8192</span></span><br><span class=\"line\"><span class=\"comment\"># 默认的队列最大尺寸 (字节) = 16384</span></span><br><span class=\"line\"><span class=\"comment\"># ---------- 同享内存限制 ------------</span></span><br><span class=\"line\"><span class=\"comment\"># 最大段数 = 4096</span></span><br><span class=\"line\"><span class=\"comment\"># 最大段大小 (千字节) = 18014398509465599</span></span><br><span class=\"line\"><span class=\"comment\"># 最大总共享内存 (千字节) = 18014398442373116</span></span><br><span class=\"line\"><span class=\"comment\"># 最小段大小 (字节) = 1</span></span><br><span class=\"line\"><span class=\"comment\"># --------- 信号量限制 -----------</span></span><br><span class=\"line\"><span class=\"comment\"># 最大数组数量 = 128</span></span><br><span class=\"line\"><span class=\"comment\"># 每个数组的最大信号量数目 = 250</span></span><br><span class=\"line\"><span class=\"comment\"># 系统最大信号量数 = 32000</span></span><br><span class=\"line\"><span class=\"comment\"># 每次信号量调用最大操作数 = 32</span></span><br><span class=\"line\"><span class=\"comment\"># 信号量最大值 = 32767</span></span><br><span class=\"line\"><span class=\"variable\">$ipcs</span> -l -u  <span class=\"comment\"># 易读格式</span></span><br><span class=\"line\"><span class=\"comment\"># ---------- 消息状态 -----------</span></span><br><span class=\"line\"><span class=\"comment\"># 已分配队列数 = 3</span></span><br><span class=\"line\"><span class=\"comment\"># 已用消息头(header)数 = 0</span></span><br><span class=\"line\"><span class=\"comment\"># 已用空间 = 0 字节</span></span><br><span class=\"line\"><span class=\"comment\"># ---------- 共享内存状态 ------------</span></span><br><span class=\"line\"><span class=\"comment\"># 段已分配 1</span></span><br><span class=\"line\"><span class=\"comment\"># 页已分配 1</span></span><br><span class=\"line\"><span class=\"comment\"># 页驻留  0</span></span><br><span class=\"line\"><span class=\"comment\"># 页交换  0</span></span><br><span class=\"line\"><span class=\"comment\"># 交换性能：0 次尝试       0 次成功</span></span><br><span class=\"line\"><span class=\"comment\"># --------- 信号量状态 -----------</span></span><br><span class=\"line\"><span class=\"comment\"># 已使用数组 = 1</span></span><br><span class=\"line\"><span class=\"comment\"># 已分配信号量数 = 10</span></span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<h3 id=\"ipcrm-命令\"><a href=\"#ipcrm-命令\" class=\"headerlink\" title=\"ipcrm 命令\"></a>ipcrm 命令</h3><p>描述:删除一个或更多的消息队列、信号量集或者共享内存标识。<br>基础用法:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ipcrm [options]</span><br><span class=\"line\">ipcrm &lt;shm|msg|sem&gt; &lt;id&gt; [...]</span><br><span class=\"line\"></span><br><span class=\"line\">选项：</span><br><span class=\"line\"> -m, --shmem-id &lt;id&gt;        按 id 号移除共享内存段</span><br><span class=\"line\"> -M, --shmem-key &lt;键&gt;       按键值移除共享内存段</span><br><span class=\"line\"> -q, --queue-id &lt;id&gt;        按 id 号移除消息队列</span><br><span class=\"line\"> -Q, --queue-key &lt;键&gt;       按键值移除消息队列</span><br><span class=\"line\"> -s, --semaphore-id &lt;id&gt;    按 id 号移除信号量</span><br><span class=\"line\"> -S, --semaphore-key &lt;键&gt;   按键值移除信号量</span><br><span class=\"line\"> -a, --all[=&lt;shm|msg|sem&gt;]  全部移除</span><br><span class=\"line\"> -v, --verbose              解释正在进行的操作</span><br></pre></td></tr></table></figure></p>\n<p>基础示例:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ ipcrm -m 262144       <span class=\"comment\">#通过id删除共享内存</span></span><br><span class=\"line\"></span><br><span class=\"line\">$ ipcrm -M 0x55fc00fe   <span class=\"comment\">#通过key删除共享内存</span></span><br><span class=\"line\"></span><br><span class=\"line\">$ ipcrm -q 252432       <span class=\"comment\">#通过id删除消息队列</span></span><br><span class=\"line\"></span><br><span class=\"line\">$ ipcrm -Q 0xfdfc00fe   <span class=\"comment\">#通过key删除消息队列</span></span><br><span class=\"line\"></span><br><span class=\"line\">$ ipcrm -s 242438       <span class=\"comment\">#通过id删除信号量</span></span><br><span class=\"line\"></span><br><span class=\"line\">$ ipcrm -S 0x65         <span class=\"comment\">#通过key删除信号量</span></span><br><span class=\"line\"></span><br><span class=\"line\">$ ipcrm -a              <span class=\"comment\">#删除所有共享内存、信号量和消息队列</span></span><br><span class=\"line\">$ ipcrm  -v -a          <span class=\"comment\">#删除所有共享内存、信号量和消息队列，并且显示过程</span></span><br><span class=\"line\"><span class=\"comment\"># --------- 消息队列 -----------</span></span><br><span class=\"line\"><span class=\"comment\"># 键        msqid      拥有者  权限     已用字节数 消息</span></span><br><span class=\"line\"><span class=\"comment\"># ------------ 共享内存段 --------------</span></span><br><span class=\"line\"><span class=\"comment\"># 键        shmid      拥有者  权限     字节     nattch     状态</span></span><br><span class=\"line\"><span class=\"comment\"># --------- 信号量数组 -----------</span></span><br><span class=\"line\"><span class=\"comment\"># 键        semid      拥有者  权限     nsems</span></span><br></pre></td></tr></table></figure></p>\n","comments":true,"excerpt":"[TOC]","categories":[{"name":"Linux命令","path":"api/categories/Linux命令.json"}],"tags":[{"name":"系统查看","path":"api/tags/系统查看.json"}]}