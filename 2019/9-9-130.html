<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="content-language" content="zh-CN"/>
    <meta name="author" content="WeiyiGeek" />
    <meta name="msvalidate.01" content="5C552FB1D885E0E11D2957EC958C8018" />
    <meta name="shenma-site-verification" content="4c655e91c76be0a93c1b6954c666c9d6_1649049085"/>
    <meta name="bytedance-verification-code" content="lKs4FqwCHSJ3A/c5tT7X" />
    <meta name="sogou_site_verification" content="OC65iET6Bk" />
    
    <title>ğŸŒ Tomcatåº”ç”¨å®¹å™¨å®‰è£…å’Œä½¿ç”¨|WeiyiGeek Blog|å”¯ä¸€æå®¢Geek-ITç½‘ç»œå®‰å…¨è¿ç»´å¼€å‘æŠ€æœ¯çŸ¥è¯†åˆ†äº«-åšå®¢ç«™ç‚¹</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    
    <meta name="keywords" content="Tomcat">
    <meta name="Description" content="WeiyiGeek-å”¯ä¸€æå®¢åšå®¢ç«™ç‚¹,å…³æ³¨äºç½‘ç»œå®‰å…¨è¿ç»´,Webå®‰å…¨å¼€å‘,IOTç‰©è”ç½‘å®‰å…¨å¼€å‘,åº”ç”¨å¼€å‘,åˆ†äº«æŠ€æœ¯å­¦ä¹ çŸ¥è¯†ä¸å…¥å‘è§£å†³,æå‡ç½‘ç»œå®‰å…¨æŠ€æœ¯ä¸è‡ªèº«æŠ€æœ¯èƒ½åŠ›,ç«‹å¿—ç»´æŠ¤å¤§ä¼—ç½‘ç»œå®‰å…¨ä¸ºå·±ä»»,åšä¸€ä¸ªå¯¹å›½å®¶æœ‰ç”¨çš„äºº,ä¸ºå®ç°ä¸­åæ°‘æ—ä¼Ÿå¤§å¤å…´çš„ä¸­å›½æ¢¦ä¸æ‡ˆå¥‹æ–—">
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="/css/jquery/3.5.2-jquery.fancybox.min.css?v=1.6.6" />
    <link rel="stylesheet" href="/css/style.css?v=1.6.6">
    <!--  -->
     <script type="text/javascript" src="/js/custom/articlecost.js?v=1.6.6"></script> 
    <link rel="stylesheet" href="/css/third-party/gitalk.css?v=1.6.6"> 
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9134434519967436" crossorigin="anonymous"></script>    
    <script type="text/javascript">
        // Data Center
        var DC = {
          reward:	true,
          lv: JSON.parse('{"enable":false,"app_id":null,"app_key":null,"icon":true}'),
          v: JSON.parse('{"enable":false,"appid":null,"appkey":null,"notify":true,"verify":true,"placeholder":"give me some sugers plz...","avatar":"wavatar"}')
        };
    </script>
    <script type="text/javascript">window.lazyScripts=[];</script>
<meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="WeiyiGeek Blog" type="application/atom+xml">
</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="">
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap">
      
      <img src="/img/brand.jpg" class="brand-bg" alt="WeiyiGeek-backgroud">
      
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg" alt="WeiyiGeek-å¤´åƒ">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">WeiyiGeek</h5>
          <a href="mailto:master@weiyigeek.top" title="master@weiyigeek.top" class="mail">
            <span>m</span><span>a</span><span>s</span><span>t</span><span>e</span><span>r</span><span>@</span><span>w</span><span>e</span><span>i</span><span>y</span><span>i</span><span>g</span><span>e</span><span>e</span><span>k</span><span>.</span><span>t</span><span>o</span><span>p</span>
          </a>
        </hgroup>
        
        <ul class="menu-link">
          
              <li>
                <a href="https://weiyigeek.top/img/wechat-search.png" target="_blank">
                  <i class="icon icon-lg icon-wechat"></i>
                </a>
              </li>
            
              <li>
                <a href="https://github.com/weiyigeek" target="_blank">
                  <i class="icon icon-lg icon-github"></i>
                </a>
              </li>
            
              <li>
                <a href="https://t.me/WeiyiGeek" target="_blank">
                  <i class="icon icon-lg icon-telegram"></i>
                </a>
              </li>
            
              <li>
                <a href="https://twitter.com/WeiyiGeek" target="_blank">
                  <i class="icon icon-lg icon-twitter"></i>
                </a>
              </li>
            
              <li>
                <a href="https://weibo.com/615643678" target="_blank">
                  <i class="icon icon-lg icon-weibo"></i>
                </a>
              </li>
            
        </ul>
        
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                é¦–é¡µ
              </a>
            </li>
        
            <li class="">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                æ–‡ç« åˆ†ç±»
              </a>
            </li>
        
            <li class="">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                æ–‡ç« æ ‡ç­¾
              </a>
            </li>
        
            <li class="">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                æ–‡ç« å½’æ¡£
              </a>
            </li>
        
            <li class="">
              <a href="/2018/1-1-1.html"  >
                <i class="icon icon-lg icon-mortar-board"></i>
                å­¦ä¹ ä¹‹è·¯
              </a>
            </li>
        
            <li class="">
              <a href="/books"  >
                <i class="icon icon-lg icon-book"></i>
                å­¦ä¹ ä¹¦ç±
              </a>
            </li>
        
            <li class="">
              <a href="/about"  >
                <i class="icon icon-lg icon-user"></i>
                å…³äºä½œè€…
              </a>
            </li>
        
            <li class="">
              <a href="/links"  >
                <i class="icon icon-lg icon-link"></i>
                ç«™ç‚¹å¯¼èˆª
              </a>
            </li>
        
            <li class="">
              <a href="/img/share-wechat.jpg" target="_blank" >
                <i class="icon icon-lg icon-wechat"></i>
                å…¬ä¼—è´¦å·
              </a>
            </li>
        
            <li class="">
              <a href="https://space.bilibili.com/385802642" target="_blank" >
                <i class="icon icon-lg icon-youtube-play"></i>
                å“”å“©å“”å“©
              </a>
            </li>
        
            <li class="">
              <a href="https://github.com/weiyigeek" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="">
              <a href="https://twitter.com/WeiyiGeek" target="_blank" >
                <i class="icon icon-lg icon-twitter"></i>
                Twitter
              </a>
            </li>
        
            <li class="">
              <a href="https://weibo.com/615643678" target="_blank" >
                <i class="icon icon-lg icon-weibo"></i>
                Weibo
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row clearfix">
        <a href="javascript:;" class="header-icon pull-left waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">
            <span>Tomcatåº”ç”¨å®¹å™¨å®‰è£…å’Œä½¿ç”¨</span>
            
        </div>

        
        <a href="javascript:;" id="site_search_btn" class="header-icon pull-right waves-effect waves-circle waves-light">
            <i class="icon icon-lg icon-search"></i>
        </a>
        

        
            <a href="/atom.xml" class="header-icon pull-right waves-effect waves-circle waves-light">
                <i class="icon icon-lg icon-rss"></i>
            </a>
        
    </div>
</header>
<header class="content-header post-header">
    <img src="/img/banner.jpg" class="header-bg" alt="æ–‡ç« å¤´éƒ¨èƒŒæ™¯">
    <div class="container fade-scale">
        <h1 class="title">Tomcatåº”ç”¨å®¹å™¨å®‰è£…å’Œä½¿ç”¨</h1>
        <h5 class="subtitle">
            
                <time datetime="2019-09-09T09:34:30.000Z" itemprop="datePublished" class="page-time">
  2019-09-09
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/SystemOperation/">SystemOperation</a></li></ul>


            
        </h5>
        
    </div>
    

</header>

<div id="site_search">
    <div class="search-title clearfix">
        <span class="pull-left">
          <i class="icon icon-lg icon-search"></i>
        </span>
        <input type="text" id="local-search-input" name="q" results="0" placeholder="search my blog..." class="form-control pull-left"/>
        <a href="javascript:;" class="close pull-right waves-effect waves-circle waves-light">
          <i class="icon icon-lg icon-close"></i>
        </a>
    </div>
    <div id="local-search-result"></div>
</div>


<div class="container body-wrap">
  <article id="post-ç³»ç»Ÿè¿ç»´/Application/Web/WebApp/Tomcat/1.Tomcatåº”ç”¨å®¹å™¨å®‰è£…å’Œä½¿ç”¨"
  class="post-article article-type-post" itemprop="blogPost">
    <div class="post-card">
        <h1 class="post-card-title">Tomcatåº”ç”¨å®¹å™¨å®‰è£…å’Œä½¿ç”¨</h1>
        <div class="post-meta">
            <time class="post-time" title="2019-09-09 17:34:30" datetime="2019-09-09T09:34:30.000Z"  itemprop="datePublished">2019-09-09</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/SystemOperation/">SystemOperation</a></li></ul>



            

            


            
        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            
            <p>[TOC]</p>
<a id="more"></a>
<h2 id="1-å‰è¨€ç®€è¿°"><a href="#1-å‰è¨€ç®€è¿°" class="headerlink" title="1.å‰è¨€ç®€è¿°"></a>1.å‰è¨€ç®€è¿°</h2><p>æè¿°:Apache Tomcatæ˜¯ç¾å›½Apacheè½¯ä»¶åŸºé‡‘ä¼šçš„ä¸€æ¬¾è½»é‡çº§Webåº”ç”¨æœåŠ¡å™¨ï¼Œè¯¥ç¨‹åºå®ç°äº†å¯¹Servletå’ŒJSPçš„æ”¯æŒã€‚<br>Tomcatæ˜¯åœ¨Sunå…¬å¸æ¨å‡ºçš„å°å‹Servlet/JSPè°ƒè¯•å·¥å…·çš„åŸºç¡€ä¸Šå‘å±•èµ·æ¥çš„ä¸€ä¸ªä¼˜ç§€çš„Servletå®¹å™¨,å·²æˆä¸ºç›®å‰å¼€å‘ä¼ä¸šJavaWebåº”ç”¨çš„æœ€ä½³Servletå®¹å™¨é€‰æ‹©ä¹‹ä¸€ã€‚<br>Tomcatæœ¬èº«å®Œå…¨ç”¨javaè¯­è¨€ç¼–å†™ï¼Œæ‰€ä»¥tomcatçš„è¿è¡Œéœ€è¦javaçš„æ”¯æŒï¼Œæ‰€ä»¥è¦å…ˆå®‰è£…JDKæ‰èƒ½è¿è¡Œ;</p>
<p>ç›®å‰æ˜¯Apacheå¼€æºè½¯ä»¶ç»„ç»‡çš„ä¸€ä¸ªè½¯ä»¶é¡¹ç›®å®ƒçš„å®˜ç½‘ ï¼š<a href="http://tomcat.apache.org" target="_blank" rel="noopener">http://tomcat.apache.org</a></p>
<p>ä½¿ç”¨èŒƒå›´ï¼šåœ¨ä¸­å°å‹ç³»ç»Ÿå’Œå¹¶å‘è®¿é—®ç”¨æˆ·ä¸æ˜¯å¾ˆå¤šçš„åœºåˆä¸‹è¢«æ™®éä½¿ç”¨ï¼Œæ˜¯å¼€å‘å’Œè°ƒè¯• JSP ç¨‹åºçš„é¦–é€‰</p>
<p><strong>ç”¨é€”ï¼š</strong></p>
<ul>
<li>Tomcat æœåŠ¡å™¨å¯åˆ©ç”¨å®ƒå“åº”HTML(æ ‡å‡†é€šç”¨æ ‡è®°è¯­è¨€ä¸‹çš„ä¸€ä¸ªåº”ç”¨)é¡µé¢çš„è®¿é—®è¯·æ±‚ã€‚</li>
<li>Tomcat æ˜¯apacheçš„ä¸€ä¸ªä¸­é—´ä»¶è½¯ä»¶ï¼Œå…¶å¯ä»¥æä¾›jspæˆ–è€…phpçš„è§£ææœåŠ¡ã€‚</li>
</ul>
<p><strong>ç‰¹ç‚¹:</strong></p>
<ul>
<li>Tomcat æœåŠ¡å™¨æ˜¯ä¸€ä¸ªå…è´¹çš„å¼€æ”¾æºä»£ç çš„Web</li>
<li>Tomcat æ˜¯ä¸€ä¸ªServlet(ç‹¬ç«‹çš„è¿›ç¨‹å•ç‹¬è¿è¡Œçš„)å’ŒJSPå®¹å™¨;</li>
<li>Tomcat ç”±ä¸€ç³»åˆ—å¯é…ç½®çš„ç»„ä»¶æ„æˆä¿è¯äº†æ‰©å±•æ€§;</li>
</ul>
<p><br/></p>
<p><strong>Tomcatçš„ç»„æˆç»“æ„:</strong></p>
<ul>
<li>Tomcatæœ¬èº«ç”±ä¸€ç³»åˆ—<code>å¯é…ç½®çš„ç»„ä»¶æ„æˆ</code>ï¼Œå…¶ä¸­æ ¸å¿ƒç»„ä»¶æ˜¯Servletå®¹å™¨ç»„ä»¶ï¼Œå®ƒæ˜¯æ‰€æœ‰å…¶ä»–Tomcatç»„ä»¶çš„é¡¶å±‚å®¹å™¨ã€‚</li>
<li><p>æ¯ä¸ªç»„ä»¶éƒ½å¯ä»¥åœ¨Tomcatå®‰è£…ç›®å½•/conf/server.xmlæ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ï¼Œä¸”æ¯ä¸ªTomcatç»„ä»¶åœ¨è¯¥æ–‡ä»¶ä¸­å¯¹åº”ä¸€ç§é…ç½®å…ƒç´ ã€‚<br>ä¸‹é¢ç”¨XMLçš„å½¢å¼å±•ç¤ºå„ç§Tomcatç»„ä»¶ä¹‹é—´çš„å…³ç³»    </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Server</span>&gt;</span>ä»£è¡¨æ•´ä¸ªServletå®¹å™¨ç»„ä»¶ï¼Œæ˜¯æœ€é¡¶å±‚å…ƒç´ ï¼Œå¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ <span class="tag">&lt;<span class="name">Service</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Service</span>&gt;</span>åŒ…å«ä¸€ä¸ª<span class="tag">&lt;<span class="name">Engine</span>&gt;</span>å…ƒç´ ä»¥åŠä¸€ä¸ªæˆ–å¤šä¸ª<span class="tag">&lt;<span class="name">Connector</span>&gt;</span>å…ƒç´ ï¼Œè¿™äº›<span class="tag">&lt;<span class="name">Connector</span>&gt;</span>å…±äº«ä¸€ä¸ª<span class="tag">&lt;<span class="name">Engine</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Connector</span>/&gt;</span>ä»£è¡¨å’Œå®¢æˆ·ç¨‹åºå®é™…äº¤äº’çš„ç»„ä»¶ï¼Œè´Ÿè´£æ¥æ”¶å®¢æˆ·è¯·æ±‚ï¼Œä»¥åŠå‘å®¢æˆ·è¿”å›å“åº”</span><br><span class="line">    <span class="tag">&lt;<span class="name">Engine</span>&gt;</span>æ¯ä¸ª<span class="tag">&lt;<span class="name">Service</span>&gt;</span>å…ƒç´ åªèƒ½åŒ…å«ä¸€ä¸ª<span class="tag">&lt;<span class="name">Engine</span>&gt;</span>å…ƒç´ ï¼Œå®ƒå¤„ç†åœ¨åŒä¸€ä¸ª<span class="tag">&lt;<span class="name">Service</span>&gt;</span>ä¸­æ‰€æœ‰<span class="tag">&lt;<span class="name">Connector</span>&gt;</span>æ¥æ”¶åˆ°çš„å®¢æˆ·è¯·æ±‚</span><br><span class="line">      <span class="tag">&lt;<span class="name">Host</span>&gt;</span>åœ¨ä¸€ä¸ª<span class="tag">&lt;<span class="name">Engine</span>&gt;</span>ä¸­å¯ä»¥åŒ…å«å¤šä¸ª<span class="tag">&lt;<span class="name">Host</span>&gt;</span>,å®ƒä»£è¡¨ä¸€ä¸ªè™šæ‹Ÿä¸»æœº(å³ä¸€ä¸ªæœåŠ¡å™¨ç¨‹åºå¯ä»¥éƒ¨ç½²åœ¨å¤šä¸ªæœ‰ä¸åŒIPçš„æœåŠ¡å™¨ä¸»æœºä¸Š)ï¼Œå®ƒå¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªåº”ç”¨</span><br><span class="line">          <span class="tag">&lt;<span class="name">Context</span>&gt;</span>ä½¿ç”¨æœ€é¢‘ç¹çš„å…ƒç´ ï¼Œä»£è¡¨äº†è¿è¡Œåœ¨è™šæ‹Ÿä¸»æœºä¸Šçš„å•ä¸ªwebåº”ç”¨</span><br><span class="line">      <span class="tag">&lt;/<span class="name">Host</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Engine</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">Service</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Server</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Tomcatä½“ç³»ç»“æ„å›¾</p>
</li>
</ul>
<figure class="image-box">
                <a rel=Tomcatåº”ç”¨å®¹å™¨å®‰è£…å’Œä½¿ç”¨ href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190910144506.png" target="_blank" title="WeiyiGeek.ä½“ç³»ç»“æ„å›¾" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190910144506.png" alt="WeiyiGeek.ä½“ç³»ç»“æ„å›¾" title="" class=""></a>
                <p>WeiyiGeek.ä½“ç³»ç»“æ„å›¾</p>
            </figure>
<p><strong>JavaWebåº”ç”¨çš„å‘å¸ƒæ–¹å¼:</strong></p>
<ul>
<li>å¼€æ”¾å¼ç›®å½•æ–¹å¼:å°†åº”ç”¨å¤åˆ¶åˆ°webapp/ROOTç›®å½•ä¹‹ä¸­è¿›è¡Œéƒ¨ç½²;</li>
<li>åˆ©ç”¨waråŒ…éƒ¨ç½²æ–¹å¼:ä½¿ç”¨ Jar -cvf *.war æ‰“åŒ…æˆä¸ºwaråŒ…,ç„¶åé‡‡ç”¨managerè¿›è¡Œéƒ¨ç½²æˆ–è€…é‡‡ç”¨IDEAç›´æ¥éƒ¨ç½²;</li>
</ul>
<p>å¸¸å¸¸ä½¿ç”¨åœºæ™¯:<br><figure class="image-box">
                <a rel=Tomcatåº”ç”¨å®¹å™¨å®‰è£…å’Œä½¿ç”¨ href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190916125500.png" target="_blank" title="WeiyiGeek." data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190916125500.png" alt="WeiyiGeek." title="" class=""></a>
                <p>WeiyiGeek.</p>
            </figure></p>
<p><strong>è¡¥å……</strong>:</p>
<ul>
<li>Tomcatå¤„ç†é™æ€HTMLçš„èƒ½åŠ›ä¸å¦‚ApacheæœåŠ¡å™¨ã€‚</li>
<li>Tomcatä¸èƒ½ç›´æ¥æ”¯æŒå’Œä½œä¸ºè´Ÿè½½å‡è¡¡ã€‚</li>
</ul>
<hr>

<h2 id="2-å®‰è£…ä»‹ç»"><a href="#2-å®‰è£…ä»‹ç»" class="headerlink" title="2.å®‰è£…ä»‹ç»"></a>2.å®‰è£…ä»‹ç»</h2><h3 id="2-1-ç¯å¢ƒå®‰è£…"><a href="#2-1-ç¯å¢ƒå®‰è£…" class="headerlink" title="2.1 ç¯å¢ƒå®‰è£…"></a>2.1 ç¯å¢ƒå®‰è£…</h3><ul>
<li>JDKå…¨ç§°æ˜¯ Java Development Kitï¼Œæ˜¯SUNå…¬å¸å…è´¹æä¾›çš„javaè¯­è¨€çš„è½¯ä»¶å¼€å‘å·¥å…·åŒ…ï¼Œå…¶ä¸­åŒ…å«Javaè™šæ‹Ÿæœºï¼ˆJVMï¼‰ï¼Œç¼–å†™å¥½çš„javaæºç¨‹åºç»è¿‡ç¼–è¯‘å¯ç”Ÿäº§javaå­—èŠ‚ç ï¼Œåˆ©ç”¨JVMè§£é‡Šè¿™äº›å­—èŠ‚ç æ–‡ä»¶ä»è€Œä¿è¯äº†Javaçš„è·¨å¹³å°æ€§ã€‚<ul>
<li>JDKä¸‹è½½åœ°å€:<a href="http://www.oracle.com/technetwork/java/javase/downloads/" target="_blank" rel="noopener">http://www.oracle.com/technetwork/java/javase/downloads/</a></li>
</ul>
</li>
<li>Tomcatä¸‹è½½åœ°å€:<a href="http://tomcat.apache.org" target="_blank" rel="noopener">http://tomcat.apache.org</a></li>
</ul>
<p>å®‰è£…ç¯å¢ƒ:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Centos7.x 3.10.0-957.12.2.el7.x86_64 </span><br><span class="line">JDK 1.8 </span><br><span class="line">Tomcat 8.x</span><br></pre></td></tr></table></figure></p>
<p>å®‰è£…æ“ä½œæ­¥éª¤:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1.å¸è½½ç³»ç»Ÿè‡ªå¸¦çš„openjdkå¹¶å®‰è£…jdk</span></span><br><span class="line">rm -rf $(<span class="built_in">which</span> java)</span><br><span class="line">tar xf jdk-7u80-linux-x64.tar</span><br><span class="line">mv jdk1.7.0_80/ /usr/<span class="built_in">local</span>/java</span><br><span class="line"></span><br><span class="line"><span class="comment">#2.è§£å‹å®‰è£…Tomcat</span></span><br><span class="line">tar xf apache-tomcat-8.5.20.tar.gz</span><br><span class="line">mv apache-tomcat-8.5.20 /usr/<span class="built_in">local</span>/tomcat8</span><br><span class="line"></span><br><span class="line"><span class="comment">#3.è®¾ç½®JAVAä¸TOMCATç¯å¢ƒå˜é‡</span></span><br><span class="line"><span class="variable">$cat</span> &gt;&gt; /etc/profile.d/javaEnv.sh&lt;&lt;END</span><br><span class="line"><span class="comment">#è®¾ç½®javaæ ¹ç›®å½•</span></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/opt/tomcat/jdk8</span><br><span class="line"><span class="built_in">export</span> JRE_HOME=/opt/tomcat/jdk8/jre</span><br><span class="line"><span class="built_in">export</span> CLASSPATH=.:\<span class="variable">$JAVA_HOME</span>/lib/dt.jar:\<span class="variable">$JAVA_HOME</span>/lib/tools.jar:\<span class="variable">$CATALINA_HOME</span>/lib/servlet-api.jar</span><br><span class="line"><span class="comment">#Tomcatè·¯å¾„è®¾ç½®</span></span><br><span class="line"><span class="built_in">export</span> TOMCAT_HOME=/opt/tomcat/apache-tomcat-8.5.45</span><br><span class="line"><span class="built_in">export</span> CATALINA_HOME=/opt/tomcat//apache-tomcat-8.5.45</span><br><span class="line"><span class="comment">#åœ¨PATHç¯å¢ƒå˜é‡ä¸­æ·»åŠ javaè·Ÿç›®å½•çš„binå­ç›®å½•</span></span><br><span class="line"><span class="built_in">export</span> PATH=\<span class="variable">$PATH</span>:\<span class="variable">$JAVA_HOME</span>/bin:\<span class="variable">$TOMCAT_HOME</span>/bin</span><br><span class="line">END</span><br><span class="line"></span><br><span class="line">$. /etc/profile <span class="comment">#å°†java.sh è„šæœ¬å¯¼å…¥åˆ°ç¯å¢ƒå˜é‡ï¼Œä½¿å…¶ç”Ÿæ•ˆ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#4.è¿è¡Œ java -version æˆ–è€… javac -version å‘½ä»¤æŸ¥çœ‹javaç‰ˆæœ¬</span></span><br><span class="line"><span class="variable">$java</span> -version</span><br><span class="line">java version <span class="string">"1.7.0_65"</span></span><br><span class="line">Java(TM) SE Runtime Environment (build 1.7.0_65-b17)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 24.65-b04, mixed mode)</span><br><span class="line"></span><br><span class="line"><span class="comment">#5.æŸ¥çœ‹tomcatçš„å®‰è£…æƒ…å†µ</span></span><br><span class="line">catalina.sh version</span><br><span class="line">Using CATALINA_BASE:   /opt/tomcat//apache-tomcat-8.5.45</span><br><span class="line">Using CATALINA_HOME:   /opt/tomcat//apache-tomcat-8.5.45</span><br><span class="line">Using CATALINA_TMPDIR: /opt/tomcat//apache-tomcat-8.5.45/temp</span><br><span class="line">Using JRE_HOME:        /opt/tomcat/jdk8/jre</span><br><span class="line">Using CLASSPATH:       /opt/tomcat//apache-tomcat-8.5.45/bin/bootstrap.jar:/opt/tomcat//apache-tomcat-8.5.45/bin/tomcat-juli.jar</span><br><span class="line">Server version: Apache Tomcat/8.5.45</span><br><span class="line">Server built:   Aug 14 2019 22:21:25 UTC</span><br><span class="line">Server number:  8.5.45.0</span><br><span class="line">OS Name:        Linux</span><br><span class="line">OS Version:     3.10.0-957.12.2.el7.x86_64</span><br><span class="line">Architecture:   amd64</span><br><span class="line">JVM Version:    1.8.0_211-b12</span><br><span class="line">JVM Vendor:     Oracle Corporation</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#6.å¯åŠ¨Tomcat</span></span><br><span class="line">$/usr/<span class="built_in">local</span>/tomcat7/bin/startup.sh</span><br><span class="line">Using CATALINA_BASE: /usr/<span class="built_in">local</span>/tomcat7</span><br><span class="line">Using CATALINA_HOME: /usr/<span class="built_in">local</span>/tomcat7</span><br><span class="line">Using CATALINA_TMPDIR: /usr/<span class="built_in">local</span>/tomcat7/temp</span><br><span class="line">Using JRE_HOME: /usr/<span class="built_in">local</span>/java</span><br><span class="line">Using CLASSPATH: /usr/<span class="built_in">local</span>/tomcat7/bin/bootstrap.jar:/usr/<span class="built_in">local</span>/tomcat7/bin/tomcat-juli.jar</span><br><span class="line">Tomcat started.</span><br><span class="line">Tomcat é»˜è®¤è¿è¡Œåœ¨8080ç«¯å£</span><br><span class="line"></span><br><span class="line"><span class="variable">$netstat</span> -anpt |grep :8080</span><br><span class="line">tcp 0 0 :::8080 :::* LISTEN 3318/java</span><br><span class="line"></span><br><span class="line"><span class="comment">#7.å…³é—­Tomcatæµè§ˆå™¨è®¿é—®æµ‹è¯• http://IP:ç«¯å£</span></span><br><span class="line">/usr/<span class="built_in">local</span>/tomcat7/bin/shutdown.sh</span><br></pre></td></tr></table></figure></p>
<figure class="image-box">
                <a rel=Tomcatåº”ç”¨å®¹å™¨å®‰è£…å’Œä½¿ç”¨ href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190910160728.png" target="_blank" title="WeiyiGeek." data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190910160728.png" alt="WeiyiGeek." title="" class=""></a>
                <p>WeiyiGeek.</p>
            </figure>
<p><br></p>
<p><strong>Docker æ–¹å¼å®‰è£…è¿è¡Œ</strong><br>æè¿°:tomcatæ˜ åƒæœ‰å¤šç§æ ·å¼ï¼Œæ¯ä¸€ç§éƒ½æ˜¯é’ˆå¯¹ç‰¹å®šçš„ç”¨ä¾‹è®¾è®¡çš„ã€‚</p>
<ul>
<li><code>tomcat:&lt;version&gt;</code> : åŸºç¡€é•œåƒåŸºäºDebian</li>
<li><code>tomcat:&lt;version&gt;-slim</code> : æ­¤æ˜ åƒä¸åŒ…å«é»˜è®¤æ ‡è®°ä¸­åŒ…å«çš„å…¬å…±åŒ…ï¼ŒåªåŒ…å«è¿è¡Œtomcatæ‰€éœ€çš„æœ€å°åŒ…ã€‚é™¤éæ‚¨å·¥ä½œçš„ç¯å¢ƒä¸­åªéƒ¨ç½²tomcatæ˜ åƒï¼Œå¹¶ä¸”æ‚¨æœ‰ç©ºé—´é™åˆ¶ï¼Œå¦åˆ™æˆ‘ä»¬å¼ºçƒˆå»ºè®®ä½¿ç”¨æ­¤å­˜å‚¨åº“çš„é»˜è®¤æ˜ åƒã€‚</li>
</ul>
<p>æ­¤å¤„ä»¥ tomcat:8.5.57-jdk8-openjdk-slim ä¸ºä¾‹è¿›è¡Œå®‰è£…ä½¿ç”¨:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ docker pull tomcat:8.5.57-jdk8-openjdk-slim</span><br><span class="line"><span class="comment"># åœ¨å®é™…æœ‰ä¸Šä¼ æˆ–è€…å­˜å‚¨å…¶å®ƒæ–‡ä»¶çš„åº”ç”¨æƒ…å†µä¸‹ä¸å»ºè®®é‡‡ç”¨ç›´æ¥æŒ‚è½½å•ä¸ªWaråŒ…</span></span><br><span class="line">$ docker run -it -v /apps/webapps/Hello.war:/usr/<span class="built_in">local</span>/tomcat/webapps/Hello.war --rm -p 8888:8080 tomcat:8.5.57-jdk8-openjdk-slim </span><br><span class="line"><span class="comment"># Run the default Tomcat server (CMD ["catalina.sh", "run"]):</span></span><br></pre></td></tr></table></figure></p>
<p><br></p>
<p><strong>Tomcat 8.x é•œåƒä¸­æ–‡ä¸æ—¶åŒºæ”¯æŒ</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç‰ˆæœ¬ä¿®æ”¹æƒ…å†µ:</span></span><br><span class="line"><span class="comment"># 1.é•œåƒæºä»¥åŠä¸­æ–‡å­—ç¬¦é›†å’Œä¸œå…«åŒºæ—¶åŒºè®¾ç½®</span></span><br><span class="line">FROM tomcat:8.5.64-jdk8</span><br><span class="line">MAINTAINER  weiyigeek - &lt;master@weiyigeek.top&gt; - Tomcat env Support zh_CN UTF-8</span><br><span class="line">RUN curl -s http://192.168.12.107:8080/sources.list -o /etc/apt/sources.list &amp;&amp; \</span><br><span class="line">    apt-get update &amp;&amp; \</span><br><span class="line">    apt-get install -y locales &amp;&amp; \</span><br><span class="line">    localedef -i zh_CN -c -f UTF-8 zh_CN.UTF-8 &amp;&amp; \</span><br><span class="line">    <span class="built_in">export</span> LANG=zh_CN.UTF-8 &amp;&amp; \</span><br><span class="line">    cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime &amp;&amp; \</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"Asia/shanghai"</span> &gt; /etc/timezone</span><br><span class="line">CMD [<span class="string">"catalina.sh"</span>, <span class="string">"run"</span>]</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h3 id="2-2-å¸¸ç”¨å‘½ä»¤"><a href="#2-2-å¸¸ç”¨å‘½ä»¤" class="headerlink" title="2.2 å¸¸ç”¨å‘½ä»¤"></a>2.2 å¸¸ç”¨å‘½ä»¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">$ tree /opt/tomcat/apache-tomcat-8.5.45/bin</span><br><span class="line">â”œâ”€â”€ bootstrap.jar</span><br><span class="line">â”œâ”€â”€ catalina.bat  <span class="comment">#windowsä¸‹çš„å¯åŠ¨åœæ­¢æ–‡ä»¶</span></span><br><span class="line">â”œâ”€â”€ catalina.sh   <span class="comment">#Linuxä¸‹å¯åŠ¨åœæ­¢æ–‡ä»¶</span></span><br><span class="line">â”œâ”€â”€ catalina-tasks.xml</span><br><span class="line">â”œâ”€â”€ ciphers.bat</span><br><span class="line">â”œâ”€â”€ ciphers.sh</span><br><span class="line">â”œâ”€â”€ commons-daemon.jar</span><br><span class="line">â”œâ”€â”€ commons-daemon-native.tar.gz</span><br><span class="line">â”œâ”€â”€ configtest.bat</span><br><span class="line">â”œâ”€â”€ configtest.sh</span><br><span class="line">â”œâ”€â”€ daemon.sh  <span class="comment">#å®ˆæŠ¤è¿›ç¨‹æ–¹å¼</span></span><br><span class="line">â”œâ”€â”€ digest.bat</span><br><span class="line">â”œâ”€â”€ digest.sh</span><br><span class="line">â”œâ”€â”€ setclasspath.bat</span><br><span class="line">â”œâ”€â”€ setclasspath.sh</span><br><span class="line">â”œâ”€â”€ shutdown.bat  <span class="comment">#åœæ­¢tomcat</span></span><br><span class="line">â”œâ”€â”€ shutdown.sh</span><br><span class="line">â”œâ”€â”€ startup.bat   <span class="comment">#å¯åŠ¨tomcat</span></span><br><span class="line">â”œâ”€â”€ startup.sh</span><br><span class="line">â”œâ”€â”€ tomcat-juli.jar</span><br><span class="line">â”œâ”€â”€ tomcat-native.tar.gz</span><br><span class="line">â”œâ”€â”€ tool-wrapper.bat</span><br><span class="line">â”œâ”€â”€ tool-wrapper.sh</span><br><span class="line">â”œâ”€â”€ version.bat</span><br><span class="line">â””â”€â”€ version.sh  <span class="comment">#ç‰ˆæœ¬ä¿¡æ¯</span></span><br></pre></td></tr></table></figure>
<p><br></p>
<h3 id="2-3-Tomcat-é•œåƒæ„å»º"><a href="#2-3-Tomcat-é•œåƒæ„å»º" class="headerlink" title="2.3 Tomcat é•œåƒæ„å»º"></a>2.3 Tomcat é•œåƒæ„å»º</h3><p>æè¿°: è‡ªå®šä¹‰æ„å»ºTomcaté•œåƒèƒ½æ›´å¥½çš„é€‚åº”å®é™…åº”ç”¨ç¯å¢ƒã€‚</p>
<h3 id="2-3-TomEE-é•œåƒæ„å»º"><a href="#2-3-TomEE-é•œåƒæ„å»º" class="headerlink" title="2.3 TomEE é•œåƒæ„å»º"></a>2.3 TomEE é•œåƒæ„å»º</h3><p>æè¿°: è‡ªå®šä¹‰æ„å»ºTomEEé•œåƒèƒ½æ›´å¥½çš„é€‚åº”å®é™…åº”ç”¨ç¯å¢ƒã€‚<br><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> openjdk:<span class="number">8</span>-slim-buster</span><br><span class="line"><span class="keyword">LABEL</span><span class="bash"> MAINTAINER=WeiyiGeek \</span></span><br><span class="line"><span class="bash">      EMAIL=master@weiyigeek.top \</span></span><br><span class="line"><span class="bash">      DESC=Build Debian+OpenJDK+Tomee container images</span></span><br><span class="line"><span class="keyword">ENV</span> CATALINA_HOME=/usr/local/tomee \</span><br><span class="line">    PATH=/usr/local/tomee/bin:$PATH \</span><br><span class="line">    TOMEE_VER=<span class="number">8.0</span>.<span class="number">6</span> \</span><br><span class="line">    TOMEE_BUILD=webprofile \</span><br><span class="line">    TZ=Asia/Shanghai \</span><br><span class="line">    LANG=zh_CN.UTF-<span class="number">8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> <span class="built_in">set</span> -ex \</span></span><br><span class="line"><span class="bash">  &amp;&amp; mkdir -p <span class="string">"<span class="variable">$CATALINA_HOME</span>"</span> \</span></span><br><span class="line"><span class="bash">  &amp;&amp; <span class="built_in">ulimit</span> -HSn 65535 \</span></span><br><span class="line"><span class="bash">  &amp;&amp; sed -i <span class="string">"/# End/i *  soft  nproc   65535"</span> /etc/security/limits.conf \</span></span><br><span class="line"><span class="bash">  &amp;&amp; sed -i <span class="string">"/# End/i *  hard  nproc   65535"</span> /etc/security/limits.conf \</span></span><br><span class="line"><span class="bash">  &amp;&amp; sed -i -e <span class="string">'s#http://deb.debian.org#https://mirrors.huaweicloud.com#g'</span> -e <span class="string">'s|deb http:|#deb http:|g'</span> /etc/apt/sources.list \</span></span><br><span class="line"><span class="bash">  &amp;&amp; apt-get update \</span></span><br><span class="line"><span class="bash">  &amp;&amp; apt-get install -y curl apt-transport-https locales \</span></span><br><span class="line"><span class="bash">  &amp;&amp; localedef -i zh_CN -c -f UTF-8 -A /usr/share/locale/locale.alias zh_CN.UTF-8 \</span></span><br><span class="line"><span class="bash">  &amp;&amp; cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime \</span></span><br><span class="line"><span class="bash">  &amp;&amp; apt-get clean &amp;&amp; apt-get autoclean &amp;&amp; apt-get -y autoremove \</span></span><br><span class="line"><span class="bash">  &amp;&amp; rm -rf /var/lib/apt/lists/*</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> <span class="variable">$CATALINA_HOME</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment"># curl -fsSL 'https://www.apache.org/dist/tomee/KEYS' | awk -F ' = ' '$1 ~ /^ +Key fingerprint$/ &#123; gsub(" ", "", $2); print $2 &#125;' | sort -u</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> <span class="built_in">set</span> -x \</span></span><br><span class="line"><span class="bash">    <span class="comment"># for key in \</span></span></span><br><span class="line"><span class="bash">    <span class="comment">#   223D3A74B068ECA354DC385CE126833F9CF64915 \</span></span></span><br><span class="line"><span class="bash">    <span class="comment">#   7A2744A8A9AAF063C23EB7868EBE7DBE8D050EEF \</span></span></span><br><span class="line"><span class="bash">    <span class="comment">#   82D8419BA697F0E7FB85916EE91287822FDB81B1 \</span></span></span><br><span class="line"><span class="bash">    <span class="comment">#   9056B710F1E332780DE7AF34CBAEBE39A46C4CA1 \</span></span></span><br><span class="line"><span class="bash">    <span class="comment">#   A57DAF81C1B69921F4BA8723A8DE0A4DB863A7C1 \</span></span></span><br><span class="line"><span class="bash">    <span class="comment">#   B7574789F5018690043E6DD9C212662E12F3E1DD \</span></span></span><br><span class="line"><span class="bash">    <span class="comment">#   B8B301E6105DF628076BD92C5483E55897ABD9B9 \</span></span></span><br><span class="line"><span class="bash">    <span class="comment">#   DBCCD103B8B24F86FFAAB025C8BB472CD297D428 \</span></span></span><br><span class="line"><span class="bash">    <span class="comment">#   F067B8140F5DD80E1D3B5D92318242FE9A0B1183 \</span></span></span><br><span class="line"><span class="bash">    <span class="comment">#   FAA603D58B1BA4EDF65896D0ED340E0E6D545F97 \</span></span></span><br><span class="line"><span class="bash">    <span class="comment">#   ; do \</span></span></span><br><span class="line"><span class="bash">    <span class="comment">#   gpg --batch --keyserver hkp://p80.pool.sks-keyservers.net:80 --recv-keys "$key" || \</span></span></span><br><span class="line"><span class="bash">    <span class="comment">#   gpg --batch --keyserver hkp://ipv4.pool.sks-keyservers.net --recv-keys "$key" || \</span></span></span><br><span class="line"><span class="bash">    <span class="comment">#   gpg --batch --keyserver hkp://pgp.mit.edu:80 --recv-keys "$key" ; \</span></span></span><br><span class="line"><span class="bash">    <span class="comment"># done \</span></span></span><br><span class="line"><span class="bash">    &amp;&amp; curl -fSL https://mirrors.aliyun.com/apache/tomee/tomee-<span class="variable">$&#123;TOMEE_VER&#125;</span>/apache-tomee-<span class="variable">$&#123;TOMEE_VER&#125;</span>-<span class="variable">$&#123;TOMEE_BUILD&#125;</span>.tar.gz -o tomee.tar.gz \</span></span><br><span class="line"><span class="bash">    <span class="comment"># &amp;&amp; curl -fSL https://dist.apache.org/repos/dist/release/tomee/tomee-$&#123;TOMEE_VER&#125;/apache-tomee-$&#123;TOMEE_VER&#125;-$&#123;TOMEE_BUILD&#125;.tar.gz.asc -o tomee.tar.gz.asc \</span></span></span><br><span class="line"><span class="bash">    <span class="comment"># &amp;&amp; gpg --batch --verify tomee.tar.gz.asc tomee.tar.gz \</span></span></span><br><span class="line"><span class="bash">    &amp;&amp; tar -zxf tomee.tar.gz \</span></span><br><span class="line"><span class="bash">    &amp;&amp; mv apache-tomee-<span class="variable">$&#123;TOMEE_BUILD&#125;</span>-<span class="variable">$&#123;TOMEE_VER&#125;</span>/* /usr/<span class="built_in">local</span>/tomee \</span></span><br><span class="line"><span class="bash">    &amp;&amp; mv <span class="variable">$&#123;CATALINA_HOME&#125;</span>/webapps/ROOT <span class="variable">$&#123;CATALINA_HOME&#125;</span>/webapps/Demo \</span></span><br><span class="line"><span class="bash">    &amp;&amp; cp <span class="variable">$&#123;CATALINA_HOME&#125;</span>/conf/web.xml <span class="variable">$&#123;CATALINA_HOME&#125;</span>/conf/web.xml.bak \</span></span><br><span class="line"><span class="bash">    &amp;&amp; cp <span class="variable">$&#123;CATALINA_HOME&#125;</span>/conf/server.xml <span class="variable">$&#123;CATALINA_HOME&#125;</span>/conf/server.xml.bak \</span></span><br><span class="line"><span class="bash">    &amp;&amp; curl http://soft.weiyigeek.top:8000/web.xml -o <span class="variable">$&#123;CATALINA_HOME&#125;</span>/conf/web.xml \</span></span><br><span class="line"><span class="bash">    &amp;&amp; curl http://soft.weiyigeek.top:8000/server.xml -o <span class="variable">$&#123;CATALINA_HOME&#125;</span>/conf/server.xml \</span></span><br><span class="line"><span class="bash">    &amp;&amp; rm tomee.tar.gz \</span></span><br><span class="line"><span class="bash">    &amp;&amp; rm bin/*.bat \</span></span><br><span class="line"><span class="bash">    &amp;&amp; rm bin/*.exe \</span></span><br><span class="line"><span class="bash">    &amp;&amp; rm -rf apache-tomee-<span class="variable">$&#123;TOMEE_BUILD&#125;</span>-<span class="variable">$&#123;TOMEE_VER&#125;</span> \</span></span><br><span class="line"><span class="bash">    &amp;&amp; rm -rf <span class="variable">$&#123;CATALINA_HOME&#125;</span>/webapps/manager <span class="variable">$&#123;CATALINA_HOME&#125;</span>/webapps/docs <span class="variable">$&#123;CATALINA_HOME&#125;</span>/webapps/host-manager \</span></span><br><span class="line"><span class="bash">    &amp;&amp; rm -rf /var/lib/apt/lists/* /var/cache/apt/archives/* \</span></span><br><span class="line"><span class="bash">    &amp;&amp; find /var/<span class="built_in">log</span>/ -<span class="built_in">type</span> f -<span class="built_in">exec</span> truncate -s 0 &#123;&#125; \; \</span></span><br><span class="line"><span class="bash">    &amp;&amp; find <span class="variable">$&#123;CATALINA_HOME&#125;</span>/ -maxdepth 1 -<span class="built_in">type</span> f -delete \</span></span><br><span class="line"><span class="bash">    &amp;&amp; useradd -g root tomee \</span></span><br><span class="line"><span class="bash">    &amp;&amp; chown -R tomee:root /usr/<span class="built_in">local</span>/tomee \</span></span><br><span class="line"><span class="bash">    &amp;&amp; chmod -R g=u /usr/<span class="built_in">local</span>/tomee</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">USER</span> tomee</span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">8080</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [<span class="string">"catalina.sh"</span>, <span class="string">"run"</span>]</span></span><br></pre></td></tr></table></figure></p>
<p>æ‰§è¡Œdocker buildæ„å»ºé•œåƒï¼Œç„¶åä½¿ç”¨è¯¥é•œåƒè¿›è¡Œåˆ›å»ºå®¹å™¨ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ docker build -t weiyigeek/tomee-8.0.6:latest -f Dockerfile .</span><br><span class="line">$ docker run -d --name hello-world -p 8080:8080 \</span><br><span class="line">  -v /app/hello-world.war:/usr/<span class="built_in">local</span>/tomee/webapps/ROOT.war \ </span><br><span class="line">  weiyigeek/tomee-8.0.6:latest</span><br></pre></td></tr></table></figure></p>
<p>Tips : è‡ªå®šä¹‰çš„å®‰è£…è½¯ä»¶æ—¶ï¼Œå½“ä»è¿œç¨‹httpæœåŠ¡å™¨ä¸­æ‹‰å–æ—¶æ¨èé‡‡ç”¨è‡ªå®šä¹‰åŸŸåçš„æ–¹å¼ã€‚</p>
<hr>
<h2 id="3-é…ç½®éƒ¨ç½²"><a href="#3-é…ç½®éƒ¨ç½²" class="headerlink" title="3.é…ç½®éƒ¨ç½²"></a>3.é…ç½®éƒ¨ç½²</h2><p>(1)è™šæ‹Ÿç›®å½•çš„æ˜ å°„æ–¹å¼<br>ä»Tomcat6å¼€å§‹æ”¯æŒè‡ªåŠ¨æ˜ å°„ï¼Œå³tomcatæœåŠ¡å™¨ä¼šè‡ªåŠ¨ç®¡ç†webappsç›®å½•ä¸‹çš„æ‰€æœ‰webåº”ç”¨ï¼Œå¹¶æŠŠå®ƒæ˜ å°„æˆè™šæ‹Ÿç›®å½•ï¼Œæ¢å¥è¯è¯´<code>åªéœ€æŠŠwebåº”ç”¨æ”¾åœ¨webappsç›®å½•ä¸‹ï¼Œä¸éœ€è¦é…ç½®Contextï¼Œå¤–ç•Œå¯ä»¥ç›´æ¥è®¿é—®</code>ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å¦‚æœæ˜¯æ”¾å…¥éwebappsç›®å½•ä¸‹æ˜¯æ”¾åœ¨å…¶ä»–åœ°æ–¹ï¼Œè¿˜æ˜¯éœ€è¦é…ç½®Context</span></span><br><span class="line"><span class="comment">#æ¯”å¦‚æˆ‘çš„tomcatåœ¨Cç›˜ï¼Œæˆ‘çš„é¡¹ç›®åœ¨Dç›˜,åˆ™éœ€è¦åœ¨Hostä¸‹å¢åŠ å¦‚ä¸‹è™šæ‹Ÿç›®å½•æ˜ å°„è¯­å¥ã€‚</span></span><br><span class="line">&lt;Context path=<span class="string">"/myapp"</span> docBase=<span class="string">"D:/work/myapp"</span>&gt;&lt;/Context&gt;</span><br></pre></td></tr></table></figure>
<p>(2)Contextå…ƒç´ é…ç½®<br>tomcatåœ¨åŠ è½½ä¸€ä¸ªwebåº”ç”¨æ—¶ï¼Œä¼šä¸€æ¬¡æŒ‰ç…§ä»¥ä¸‹äº”ç§æ–¹å¼æŸ¥æ‰¾webåº”ç”¨ä¸­çš„å…ƒç´ ï¼Œ<code>ä¼˜å…ˆçº§å¼‚å¸¸é™ä½ç›´åˆ°æ‰¾åˆ°ä¸ºæ­¢</code></p>
<ul>
<li>1.åˆ°Tomcatå®‰è£…ç›®å½•/conf/Context.xmlæ–‡ä»¶ä¸­æŸ¥æ‰¾å…ƒç´ ã€‚</li>
<li><ol start="2">
<li>åˆ°Tomcatå®‰è£…å½•/conf/[enginename]/[hostname]/context.xml.defaultæ–‡ä»¶ä¸­æŸ¥æ‰¾å…ƒç´ ã€‚<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[enginename]:è¡¨ç¤ºçš„nameå±æ€§</span><br><span class="line">[hostname]:è¡¨ç¤ºdçš„é‚£ä¹ˆå±æ€§</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li>3.åˆ°Tomcatå®‰è£…ç›®å½•/conf/[enginename]/[hostname]/[contextpath].xmlæ–‡ä»¶ä¸­æŸ¥æ‰¾å…ƒç´ <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[contextpath]:è¡¨ç¤ºå•ä¸ªWebåº”ç”¨çš„URLå…¥å£</span><br></pre></td></tr></table></figure></li>
<li>4.åˆ°Webåº”ç”¨çš„META-INF/context.xmlæ–‡ä»¶ä¸­æŸ¥æ‰¾å…ƒç´ </li>
<li>5.åˆ°Tomcatå®‰è£…ç›®å½•/conf/server.xmlæ–‡ä»¶ä¸­æŸ¥æ‰¾å…ƒç´ ã€‚åªé€‚ç”¨äºå•ä¸ªWebåº”ç”¨</li>
</ul>
<p><br></p>
<p>(3)web.xmlæ–‡ä»¶<br>è¯¥æ–‡ä»¶å¿…é¡»æ”¾åœ¨/WEB-INFç›®å½•ä¸‹ï¼Œä½†æ˜¯ä»7.0ç‰ˆæœ¬å¼€å§‹Tomcatå¯ä»¥ä¸ä½¿ç”¨web.xmlæ–‡ä»¶ï¼Œè€Œæ˜¯ä½¿ç”¨æ³¨è§£æ–¹å¼ã€‚</p>
<p><br></p>
<p>(4)å°†é¡¹ç›®éƒ¨ç½²ä¸ºTomcaté»˜è®¤åº”ç”¨<br>å³è®¿é—® <a href="http://localhost:8080" target="_blank" rel="noopener">http://localhost:8080</a> æ—¶å‡ºæ¥çš„æ˜¯tomcatè‡ªå¸¦çš„æ¬¢è¿é¡µé¢ï¼Œæ”¹ä¸ºç™»å½•åˆ°è‡ªå·±çš„é¡¹ç›®ä¸»é¡µã€‚</p>
<p><em>æ–¹æ³•ä¸€:</em><br>åœ¨Tomcaté»˜è®¤å®‰è£…åï¼Œtomcatçš„ä¸»ç›®å½•æ˜¯webapps/rootç›®å½•ï¼Œæ‰€ä»¥å¦‚æœæƒ³æ”¹å˜tomcatçš„ä¸»ç›®å½•çš„è¯å¯ä»¥å¦‚ä¸‹æ‰€åšï¼š</p>
<p>åœ¨/conf/server.xmlæ–‡ä»¶çš„<HOST></HOST>ä¹‹é—´åŠ å…¥ä»£ç <br><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;Context path="" docBase="C:\tomcat7\webapps\myapp" reloadable="true" debug="0"&gt;&lt;/Context&gt;</span><br><span class="line">&lt;!--</span><br><span class="line">docBaseæ”¹ä¸ºè‡ªå·±éœ€è¦çš„é¡¹ç›®è·¯å¾„</span><br><span class="line">å¦‚æœå»ºç«‹äº†Apacheå’Œtomcaté›†ç¾¤ï¼ŒApache server çš„é»˜è®¤ç«¯å£æ˜¯<span class="number">80</span> ï¼ŒIEè®¿é—®çš„æ–¹æ³•åªéœ€è¾“å…¥ï¼šhttp:<span class="comment">//localhost,å°±å¯ä»¥è‡ªåŠ¨å®šä½åˆ°xxå·¥ç¨‹ä¸‹é¢å»</span></span><br><span class="line">--&gt;</span><br></pre></td></tr></table></figure><br><br></p>
<p><em>æ–¹æ³•äºŒï¼š</em><br>å°†tomcatå®‰è£…ç›®å½•ä¸‹çš„ROOTä¸‹çš„æ‰€æœ‰æ–‡ä»¶åˆ é™¤ï¼Œæ¢æˆè‡ªå·±é¡¹ç›®çš„æ–‡ä»¶ï¼Œæ­¤æ³•æœ‰ç‚¹æš´åŠ›ã€‚</p>
<p><br></p>
<p><em>æ–¹æ³•ä¸‰ï¼š</em><br>Tomcat5.0ä»¥ä¸‹ç‰ˆæœ¬åœ¨<code>C:/Tomcat/conf/Catalina/localhost</code>ç›®å½•ä¸‹ä¼šè‡ªåŠ¨ç”Ÿæˆäº†ä¸€ä¸ªROOT.Xmlï¼Œä½†æ˜¯5.0ä»¥ä¸Šç‰ˆæœ¬ä¸å†ç”Ÿæˆæ­¤æ–‡ä»¶ã€‚</p>
<p>æ‰€ä»¥å¯ä»¥æ–°å»ºä¸ªROOT.xml,åœ¨é‡Œé¢åŠ å…¥å¦‚ä¸‹ä»£ç ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--ä½†æ˜¯æˆ‘è‡ªå·±åœ¨7.0ç‰ˆæœ¬ä¸Šæµ‹è¯•å¥½åƒæœªæˆåŠŸï¼Œæ¨èæ–¹å¼1--&gt;</span><br><span class="line">&lt;?Xml version=<span class="string">'1.0'</span> encoding=<span class="string">'utf-8'</span>?&gt;</span><br><span class="line">&lt;Context crossContext=<span class="string">"true"</span> docBase=<span class="string">"C:\tomcat7\webapps\myapp"</span> path=<span class="string">""</span> reloadable=<span class="string">"true"</span>&gt;</span><br><span class="line">&lt;/Context&gt;</span><br></pre></td></tr></table></figure></p>
<p><em>Contextå…ƒç´ çš„å±æ€§è§£é‡Š</em></p>
<ul>
<li>path: æŒ‡å®šè®¿é—®è¯¥Webåº”ç”¨çš„URLå…¥å£</li>
<li>docBase: æŒ‡å®šWebåº”ç”¨çš„æ–‡ä»¶è·¯å¾„ï¼Œå¯ä»¥å†™ç»å¯¹è·¯å¾„ï¼Œä¹Ÿå¯ä»¥å†™ç›¸å¯¹äºappBaseå±æ€§çš„ç›¸å¯¹è·¯å¾„</li>
<li>className: æŒ‡å®šå®ç°Contextç»„ä»¶çš„Javaç±»çš„åå­—ï¼Œè¿™ä¸ªç±»å¿…é¡»å®ç°org.apache.catalina.Contexæ¥å£ï¼Œè¯¥å±æ€§é»˜è®¤å€¼ä¸ºorg.apache.catalina.core.StandardContextï¼ˆä¸å»ºè®®å¤§å®¶æ”¹åŠ¨ï¼‰</li>
<li>reloadable:<ul>
<li>true:TomcatæœåŠ¡å™¨åœ¨è¿è¡ŒçŠ¶æ€ä¸‹å›ç›‘è§†åœ¨WEB-INF/classeså’ŒWEB-INF/libç›®å½•ä¸‹çš„classæ–‡ä»¶çš„æ”¹åŠ¨ï¼Œä»¥åŠç›‘è§†Webåº”ç”¨çš„WEB-INF/web.xmlæ–‡ä»¶çš„æ”¹åŠ¨ï¼Œå¦‚æœæ£€æµ‹åˆ°æœ‰æ›´æ–°ï¼ŒæœåŠ¡å™¨ä¼šè‡ªåŠ¨æ›´æ–°åŠ è½½webåº”ç”¨ã€‚</li>
<li>false:Tomcatå¯ä»¥é™ä½Tomcatçš„è¿è¡Œè´Ÿè·ï¼Œæé«˜Tomcatçš„è¿è¡Œæ€§èƒ½</li>
</ul>
</li>
<li>å…ƒç´ éƒ½ä¼šä½¿ç”¨é»˜è®¤çš„æ ‡å‡†Contextç»„ä»¶ï¼Œå³classNameå±æ€§é‡‡ç”¨é»˜è®¤å€¼org.apache.catalina.core.StandardContextï¼Œå®ƒé™¤äº†æ‹¥æœ‰ä¸Šé¢ä»‹ç»åˆ°çš„å±æ€§å¤–ï¼Œè¿˜æœ‰è‡ªèº«ä¸“æœ‰çš„å±æ€§ï¼š <ul>
<li>cachingAllowedï¼šæ˜¯å¦å…è®¸å¯ç”¨é™æ€èµ„æº(HTMLã€å›¾ç‰‡ã€å£°éŸ³ç­‰)çš„ç¼“å­˜ã€‚é»˜è®¤å€¼ä¸ºtrueã€‚</li>
<li>cacheMaxSizeï¼šè®¾ç½®é™æ€èµ„æºç¼“å­˜çš„æœ€å¤§å€¼ï¼Œå•ä½ä¸ºKã€‚</li>
<li>workDirï¼šæŒ‡å®šWebåº”ç”¨çš„å·¥ä½œç›®å½•ã€‚</li>
<li>uppackWARï¼šé»˜è®¤å€¼ä¸ºtrueä¼šæŠŠwaræ–‡ä»¶å±•å¼€ä¸ºå¼€æ”¾ç›®å½•åå†è¿è¡Œ;ä¸ºfalseæ—¶å€™ç›´æ¥è¿è¡Œwaræ–‡ä»¶ã€‚</li>
</ul>
</li>
</ul>
<hr>

<h2 id="4-ç›‘æ§è¿è¡Œ"><a href="#4-ç›‘æ§è¿è¡Œ" class="headerlink" title="4.ç›‘æ§è¿è¡Œ"></a>4.ç›‘æ§è¿è¡Œ</h2><h3 id="4-1-Tomcat-é…ç½®-JMX-è¿æ¥"><a href="#4-1-Tomcat-é…ç½®-JMX-è¿æ¥" class="headerlink" title="4.1 Tomcat é…ç½® JMX è¿æ¥"></a>4.1 Tomcat é…ç½® JMX è¿æ¥</h3><p>æè¿°:å¼€å¯ JMX è¿œç¨‹è¿æ¥ä»¥åï¼Œå°±å¯ä»¥é€šè¿‡ jconsole å’Œ jvisualvm ä¸¤ä¸ª JDK å†…ç½®å·¥å…·è¿æ¥ JMX ä»è€ŒæŸ¥çœ‹å½“å‰ä¸»æœºçš„ JVM ç›¸å…³ä¿¡æ¯ã€‚<br><code>JMXï¼ˆJava Management Extensionsï¼Œå³Javaç®¡ç†æ‰©å±•ï¼‰</code>æ˜¯ä¸€ä¸ªä¸ºåº”ç”¨ç¨‹åºã€è®¾å¤‡ã€ç³»ç»Ÿç­‰æ¤å…¥ç®¡ç†åŠŸèƒ½çš„æ¡†æ¶ã€‚JMXå¯ä»¥è·¨è¶Šä¸€ç³»åˆ—å¼‚æ„æ“ä½œç³»ç»Ÿå¹³å°ã€ç³»ç»Ÿä½“ç³»ç»“æ„å’Œç½‘ç»œä¼ è¾“åè®®ï¼Œçµæ´»çš„å¼€å‘æ— ç¼é›†æˆçš„ç³»ç»Ÿã€ç½‘ç»œå’ŒæœåŠ¡ç®¡ç†åº”ç”¨ã€‚</p>
<ul>
<li>Jconsole æ˜¯ JDK è‡ªå¸¦çš„ç›‘æ§å·¥å…·ï¼Œåœ¨ JDK/bin ç›®å½•ä¸‹å¯ä»¥æ‰¾åˆ°ã€‚å®ƒç”¨äºè¿æ¥æ­£åœ¨è¿è¡Œçš„æœ¬åœ°æˆ–è€…è¿œç¨‹çš„ JVMï¼Œå¯¹è¿è¡Œåœ¨ java åº”ç”¨ç¨‹åºçš„èµ„æºæ¶ˆè€—å’Œæ€§èƒ½è¿›è¡Œç›‘æ§ï¼Œå¹¶ç”»å‡ºå¤§é‡çš„å›¾è¡¨ï¼Œæä¾›å¼ºå¤§çš„å¯è§†åŒ–ç•Œé¢ã€‚</li>
<li>jvisualvm åŒæ ·æ˜¯ JDK å†…ç½®çš„å·¥å…·ï¼Œä½¿ç”¨æ–¹æ³•ä¸ jconsole ç±»ä¼¼ã€‚åŠŸèƒ½ä¸Šè¦æ¯” jconsole å¼ºå¤§ä¸€äº›ã€‚æ¨èä½¿ç”¨ã€‚</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /usr/<span class="built_in">local</span>/tomcat/bin/</span><br><span class="line"><span class="comment">#é»˜è®¤æƒ…å†µä¸‹ï¼Œ$CATALINA_HOME/bin ç›®å½•ä¸‹æ˜¯æ²¡æœ‰ setenv.shï¼Œå¯ä»¥è‡ªå·±æ–°å»ºæ­¤æ–‡ä»¶</span></span><br><span class="line">$ vim setenv.sh</span><br><span class="line">CATALINA_OPTS=<span class="string">"-Djava.rmi.server.hostname=10.100.4.169</span></span><br><span class="line"><span class="string">-Dcom.sun.management.jmxremote.port=8686</span></span><br><span class="line"><span class="string">-Dcom.sun.management.jmxremote.authenticate=false</span></span><br><span class="line"><span class="string">-Dcom.sun.management.jmxremote.ssl=false"</span></span><br><span class="line">:wq</span><br><span class="line"></span><br><span class="line"><span class="comment">#é‡æ–°è®¾ç½®setenv.shè¿›è¡Œè®¤è¯</span></span><br><span class="line">CATALINA_OPTS=<span class="string">"-Djava.rmi.server.hostname=10.10.107.222 -Dcom.sun.management.jmxremote.port=8686 -Dcom.sun.management.jmxremote.authenticate=true -Dcom.sun.management.jmxremote.access='admin' -Dcom.sun.management.jmxremote.password='weiyigeek' -Dcom.sun.management.jmxremote.ssl=false"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">JMX é…ç½®è¯´æ˜ï¼š</span><br><span class="line">-Dcom.sun.management.jmxremote</span><br><span class="line"><span class="comment"># é€šè¿‡å“ªä¸ª IP è®¿é—®æœ¬æœºçš„ JMX </span></span><br><span class="line">-Djava.rmi.server.hostname=10.100.4.169</span><br><span class="line"></span><br><span class="line"><span class="comment"># JMX ç›‘å¬çš„ç«¯å£ï¼Œé»˜è®¤ 8686</span></span><br><span class="line">-Dcom.sun.management.jmxremote.port=8686</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¯å¦éœ€è¦ç”¨æˆ·åå¯†ç è®¤è¯ï¼Œé»˜è®¤ falseè¿™é‡Œè¿›è¡Œè®¤è¯</span></span><br><span class="line">-Dcom.sun.management.jmxremote.authenticate=<span class="literal">true</span></span><br><span class="line"><span class="comment">#å¯†ç </span></span><br><span class="line">-Dcom.sun.management.jmxremote.password.file=/opt/â€¦/jmxremote.password</span><br><span class="line"><span class="comment">#ç™»å½•ç”¨æˆ·</span></span><br><span class="line">-Dcom.sun.management.jmxremote.access.file=/opt/â€¦/jmxremote.access</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¯å¦å¯ç”¨ SSL</span></span><br><span class="line">-Dcom.sun.management.jmxremote.ssl=<span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#jmxremote.passwordæ¨¡æ¿ï¼š</span></span><br><span class="line">[ç”¨æˆ·å] [å¯†ç ]</span><br><span class="line">mtct ct.meituan</span><br><span class="line"><span class="built_in">test</span> <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#jmxremote.accessæ¨¡æ¿ï¼š</span></span><br><span class="line">[ç”¨æˆ·å] [æƒé™]</span><br><span class="line">mtct readwrite</span><br><span class="line"><span class="built_in">test</span> <span class="built_in">readonly</span></span><br></pre></td></tr></table></figure>
<p>æ³¨æ„äº‹é¡¹ï¼š</p>
<ul>
<li>jmxremote.passwordå’Œjmxremote.accessæ–‡ä»¶åªå…è®¸å¯åŠ¨ç”¨æˆ·åå¯¹è¯¥æ–‡ä»¶æ‹¥æœ‰è¯»å†™æƒé™,<code>chmod 600 jmxremote.password &amp; jmxremote.access</code></li>
<li>æ–‡ä»¶è·¯å¾„${JAVA_HOME}/jre/lib/management/jmxremote.access</li>
</ul>
<p><br></p>
<p><em>ä½¿ç”¨ jconsole å·¥å…·è¿æ¥ JMX</em><br>é…ç½® JMX çš„æ—¶å€™æ²¡æœ‰å¯ç”¨ SSL æ‰€ä»¥ä¼šæç¤ºä¸å®‰å…¨ï¼Œç‚¹å‡»ã€ä¸å®‰å…¨çš„è¿æ¥ã€</p>
<blockquote>
<p>$jconsole</p>
</blockquote>
<figure class="image-box">
                <a rel=Tomcatåº”ç”¨å®¹å™¨å®‰è£…å’Œä½¿ç”¨ href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190912142206.png" target="_blank" title="WeiyiGeek." data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190912142206.png" alt="WeiyiGeek." title="" class=""></a>
                <p>WeiyiGeek.</p>
            </figure>
<p>å±•ç°æ•ˆæœï¼š<br><figure class="image-box">
                <a rel=Tomcatåº”ç”¨å®¹å™¨å®‰è£…å’Œä½¿ç”¨ href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190912142436.png" target="_blank" title="WeiyiGeek." data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190912142436.png" alt="WeiyiGeek." title="" class=""></a>
                <p>WeiyiGeek.</p>
            </figure></p>
<p><em>ä½¿ç”¨ jvisualvm å·¥å…·è¿æ¥ JMX</em><br>æè¿°:è¿œç¨‹ â€“&gt; æ·»åŠ ä¸»æœº â€“&gt; æ·»åŠ  JMX è¿æ¥<br><figure class="image-box">
                <a rel=Tomcatåº”ç”¨å®¹å™¨å®‰è£…å’Œä½¿ç”¨ href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190912144011.png" target="_blank" title="WeiyiGeek." data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190912144011.png" alt="WeiyiGeek." title="" class=""></a>
                <p>WeiyiGeek.</p>
            </figure></p>
<p>å±•ç¤ºæ•ˆæœ:<br><figure class="image-box">
                <a rel=Tomcatåº”ç”¨å®¹å™¨å®‰è£…å’Œä½¿ç”¨ href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190912145513.png" target="_blank" title="WeiyiGeek." data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190912145513.png" alt="WeiyiGeek." title="" class=""></a>
                <p>WeiyiGeek.</p>
            </figure></p>
<p><br></p>
<h3 id="4-2-jmapå·¥å…·"><a href="#4-2-jmapå·¥å…·" class="headerlink" title="4.2 jmapå·¥å…·"></a>4.2 jmapå·¥å…·</h3><p>æè¿°:jmap å¯ä»¥è¾“å‡º Java è¿›ç¨‹ å†…å­˜ä¸­å¯¹è±¡çš„å·¥å…·ã€‚<br>jmap ä¸€èˆ¬å’Œ jhat æˆ–è€… MAT é…åˆä½¿ç”¨ï¼Œä»¥å›¾åƒçš„å½¢å¼ç›´è§‚çš„å±•ç¤ºå½“å‰å†…å­˜æ˜¯å¦æœ‰é—®é¢˜ã€‚</p>
<p><em>å‚æ•°è¯´æ˜:</em><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">-dump:[live,]format=b,file=&lt;filename&gt;</span><br><span class="line">    ä»¥hprofäºŒè¿›åˆ¶æ ¼å¼è½¬å‚¨Javaå †åˆ°æŒ‡å®šfilenameçš„æ–‡ä»¶ä¸­ã€‚</span><br><span class="line">    liveå­é€‰é¡¹æ˜¯å¯é€‰çš„ï¼Œå¦‚æœæŒ‡å®šäº†liveå­é€‰é¡¹ï¼Œå †ä¸­åªæœ‰æ´»åŠ¨çš„å¯¹è±¡ä¼šè¢«è½¬å‚¨ã€‚</span><br><span class="line">    æƒ³è¦æµè§ˆheap dumpï¼Œä½ å¯ä»¥ä½¿ç”¨ jhat(Javaå †åˆ†æå·¥å…·) æˆ–è€… MAT è¯»å–ç”Ÿæˆçš„æ–‡ä»¶ã€‚</span><br><span class="line">-finalizerinfo æ‰“å°ç­‰å¾…ç»ˆç»“çš„å¯¹è±¡ä¿¡æ¯ã€‚</span><br><span class="line">-heap æ‰“å°ä¸€ä¸ªå †çš„æ‘˜è¦ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä½¿ç”¨çš„GCç®—æ³•ã€å †é…ç½®ä¿¡æ¯å’Œgeneration wise heap usageã€‚</span><br><span class="line">-histo[:live] æ‰“å°æ¯ä¸ªJavaç±»ã€å¯¹è±¡æ•°é‡ã€å†…å­˜å¤§å°(å•ä½ï¼šå­—èŠ‚)ã€å®Œå…¨é™å®šçš„ç±»åã€‚</span><br><span class="line">    æ‰“å°çš„è™šæ‹Ÿæœºå†…éƒ¨çš„ç±»åç§°å°†ä¼šå¸¦æœ‰ä¸€ä¸ª<span class="string">'*'</span>å‰ç¼€ã€‚</span><br><span class="line">    å¦‚æœæŒ‡å®šäº†liveå­é€‰é¡¹ï¼Œåˆ™åªè®¡ç®—æ´»åŠ¨çš„å¯¹è±¡ã€‚</span><br><span class="line">-permstat æ‰“å°Javaå †å†…å­˜çš„æ°¸ä¹…ä¿å­˜åŒºåŸŸçš„ç±»åŠ è½½å™¨çš„æ™ºèƒ½ç»Ÿè®¡ä¿¡æ¯ã€‚</span><br><span class="line">    å¯¹äºæ¯ä¸ªç±»åŠ è½½å™¨è€Œè¨€ï¼Œå®ƒçš„åç§°ã€æ´»è·ƒåº¦ã€åœ°å€ã€çˆ¶ç±»åŠ è½½å™¨ã€å®ƒæ‰€åŠ è½½çš„ç±»çš„æ•°é‡å’Œå¤§å°éƒ½ä¼šè¢«æ‰“å°ã€‚</span><br><span class="line">    æ­¤å¤–ï¼ŒåŒ…å«çš„å­—ç¬¦ä¸²æ•°é‡å’Œå¤§å°ä¹Ÿä¼šè¢«æ‰“å°ã€‚</span><br><span class="line">-F å¼ºåˆ¶æ¨¡å¼ã€‚å¦‚æœæŒ‡å®šçš„pidæ²¡æœ‰å“åº”ï¼Œè¯·ä½¿ç”¨jmap -dumpæˆ–jmap -histoé€‰é¡¹ã€‚æ­¤æ¨¡å¼ä¸‹ï¼Œä¸æ”¯æŒliveå­é€‰é¡¹ã€‚</span><br><span class="line">-h | -<span class="built_in">help</span> æ‰“å°å¸®åŠ©ä¿¡æ¯ã€‚</span><br><span class="line">-J&lt;flag&gt; æŒ‡å®šä¼ é€’ç»™è¿è¡Œjmapçš„JVMçš„å‚æ•°ã€‚</span><br></pre></td></tr></table></figure><br><br></p>
<p>ç¤ºä¾‹1.jmap-histo <pid> æ‰“å°æ¯ä¸ªJavaç±»ã€å¯¹è±¡æ•°é‡ã€å†…å­˜å¤§å°(å•ä½ï¼šå­—èŠ‚)ã€å®Œå…¨é™å®šçš„ç±»åã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$jmap</span> -histo 14110</span><br><span class="line"> num     <span class="comment">#instances         #bytes  class name</span></span><br><span class="line">----------------------------------------------</span><br><span class="line">   1:         50994        7789848  [C</span><br><span class="line">   2:         22160        6263680  [B</span><br><span class="line">   3:          8527        1437176  [I</span><br><span class="line">   4:         49099        1178376  java.lang.String</span><br><span class="line">   5:            63         936248  [J</span><br><span class="line">   6:         19118         611776  java.util.HashMap<span class="variable">$Node</span></span><br><span class="line">   7:          6243         549384  java.lang.reflect.Method</span><br><span class="line">   8:          8948         509464  [Ljava.lang.Object;</span><br><span class="line">   9:         10588         423520  java.util.TreeMap<span class="variable">$Entry</span></span><br><span class="line">  10:          3696         417952  java.lang.Class</span><br><span class="line">  11:          1372         230544  [Ljava.util.HashMap<span class="variable">$Node</span>;</span><br><span class="line">  12:          4760         228480  java.util.HashMap</span><br><span class="line">  13:          4789         191560  java.util.HashMap<span class="variable">$ValueIterator</span></span><br><span class="line">  14:          5851         187232  java.io.File</span><br><span class="line"></span><br><span class="line"><span class="comment">#è¡¨ç¤ºå«ä¹‰</span></span><br><span class="line">B byte</span><br><span class="line">C char</span><br><span class="line">D double</span><br><span class="line">F <span class="built_in">float</span></span><br><span class="line">I int</span><br><span class="line">J long</span><br><span class="line">Z boolean</span><br><span class="line">[ æ•°ç»„ï¼Œå¦‚[Iè¡¨ç¤ºint[]</span><br><span class="line">[L+ç±»å å…¶ä»–å¯¹è±¡</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<p>ç¤ºä¾‹2.jmap-heap<pid> æŸ¥çœ‹è¿›ç¨‹å †å†…å­˜ä½¿ç”¨æƒ…å†µï¼ŒåŒ…æ‹¬ä½¿ç”¨çš„GCç®—æ³•ã€å †é…ç½®å‚æ•°å’Œå„ä»£ä¸­å †å†…å­˜ä½¿ç”¨æƒ…å†µ<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$jmap</span> -heap 14110</span><br><span class="line">Attaching to process ID 14110, please <span class="built_in">wait</span>...</span><br><span class="line">Debugger attached successfully.</span><br><span class="line">Server compiler detected.</span><br><span class="line">JVM version is 25.121-b13</span><br></pre></td></tr></table></figure></p>
<p>ç¤ºä¾‹ 3.jmap-dump:format=b,file=<dumpFileName><pid> ç”¨jmapæŠŠè¿›ç¨‹å†…å­˜ä½¿ç”¨æƒ…å†µdumpåˆ°æ–‡ä»¶ä¸­<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ jmap -dump:format=b,file=/tmp/123.hprof 14110</span><br><span class="line">Dumping heap to /tmp/123.hprof ...</span><br><span class="line">Heap dump file created</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h3 id="4-3-jhatå·¥å…·"><a href="#4-3-jhatå·¥å…·" class="headerlink" title="4.3 jhatå·¥å…·"></a>4.3 jhatå·¥å…·</h3><p>æè¿°:jhat å¯ä»¥å¯¹ dump å‡ºæ¥çš„å †ä¿¡æ¯è¿›è¡Œå¤„ç†ï¼Œä»¥ html é¡µé¢çš„å½¢å¼å±•ç¤ºå‡ºæ¥ã€‚<br>æ‰§è¡Œ jhat/tmp/123.hprofå³å¯ï¼Œé»˜è®¤ç«¯å£æ˜¯ 7000ï¼Œè®¿é—® <a href="http://localhost:7000" target="_blank" rel="noopener">http://localhost:7000</a> å³å¯æŸ¥çœ‹ç»“æœ,é€šè¿‡ -port æŒ‡å®šç«¯å£ã€‚<br><figure class="image-box">
                <a rel=Tomcatåº”ç”¨å®¹å™¨å®‰è£…å’Œä½¿ç”¨ href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190912152200.png" target="_blank" title="WeiyiGeek." data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190912152200.png" alt="WeiyiGeek." title="" class=""></a>
                <p>WeiyiGeek.</p>
            </figure></p>
<hr>

<h2 id="5-é«˜å¯ç”¨æ‰©å±•"><a href="#5-é«˜å¯ç”¨æ‰©å±•" class="headerlink" title="5.é«˜å¯ç”¨æ‰©å±•"></a>5.é«˜å¯ç”¨æ‰©å±•</h2><h3 id="5-1-Tomcatè¿è¡Œæ¨¡å¼"><a href="#5-1-Tomcatè¿è¡Œæ¨¡å¼" class="headerlink" title="5.1 Tomcatè¿è¡Œæ¨¡å¼"></a>5.1 Tomcatè¿è¡Œæ¨¡å¼</h3><p>Tomcatçš„3ç§è¿è¡ŒçŠ¶æ€:</p>
<ol>
<li>bio:é»˜è®¤çš„æ¨¡å¼,æ€§èƒ½éå¸¸ä½ä¸‹,æ²¡æœ‰ç»è¿‡ä»»ä½•ä¼˜åŒ–å¤„ç†å’Œæ”¯æŒ.</li>
<li>nio:(new I/O)æ˜¯Java SE 1.4åŠåç»­ç‰ˆæœ¬æä¾›çš„ä¸€ç§æ–°çš„I/Oæ“ä½œæ–¹å¼(å³java.nioåŒ…åŠå…¶å­åŒ…);Java nioæ˜¯ä¸€ä¸ªåŸºäºç¼“å†²åŒºã€å¹¶èƒ½æä¾›éé˜»å¡I/Oæ“ä½œçš„Java APIï¼Œå› æ­¤nioä¹Ÿè¢«çœ‹æˆæ˜¯non-blocking I/Oçš„ç¼©å†™ã€‚å®ƒæ‹¥æœ‰æ¯”ä¼ ç»ŸI/Oæ“ä½œ(bio)æ›´å¥½çš„å¹¶å‘è¿è¡Œæ€§èƒ½ã€‚</li>
<li>apr:å®‰è£…èµ·æ¥æœ€å›°éš¾,ä½†æ˜¯ä»æ“ä½œç³»ç»Ÿçº§åˆ«æ¥è§£å†³å¼‚æ­¥çš„IOé—®é¢˜,å¤§å¹…åº¦çš„æé«˜æ€§èƒ½.</li>
</ol>
<p><strong>(1)å®‰è£… apr å’Œ apr-util</strong><br>Apache Portable Runtime æ˜¯ä¸€ä¸ªé«˜åº¦å¯ç§»æ¤çš„åº“ï¼Œæ˜¯ Apache HTTP Server 2.x çš„æ ¸å¿ƒã€‚APR æœ‰è®¸å¤šç”¨é€”ï¼ŒåŒ…æ‹¬è®¿é—®é«˜çº§ IO åŠŸèƒ½ï¼ˆå¦‚sendfileï¼Œepoll å’Œ OpenSSLï¼‰ï¼Œæ“ä½œç³»ç»Ÿçº§åŠŸèƒ½ï¼ˆéšæœºæ•°ç”Ÿæˆï¼Œç³»ç»ŸçŠ¶æ€ç­‰ï¼‰å’Œæœ¬æœºè¿›ç¨‹å¤„ç†ï¼ˆå…±äº«å†…å­˜ï¼ŒNT ç®¡é“å’Œ Unix å¥—æ¥å­—ï¼‰ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /usr/<span class="built_in">local</span>/src/</span><br><span class="line">$ wget http://mirrors.tuna.tsinghua.edu.cn/apache//apr/apr-1.6.5.tar.gz</span><br><span class="line">$ wget http://mirrors.tuna.tsinghua.edu.cn/apache//apr/apr-util-1.6.1.tar.gz</span><br><span class="line">$ tar xf apr-1.6.5.tar.gz</span><br><span class="line">$ <span class="built_in">cd</span> apr-1.6.5</span><br><span class="line">$ /configure --prefix=/usr/<span class="built_in">local</span>/apr</span><br><span class="line">$ make -j 2 &amp;&amp; make install </span><br><span class="line">$ <span class="built_in">cd</span> ../</span><br><span class="line">$ tar xf apr-util-1.6.1.tar.gz</span><br><span class="line">$ <span class="built_in">cd</span> apr-util-1.6.1</span><br><span class="line">$ ./configure --prefix=/usr/<span class="built_in">local</span>/apr-util --with-apr=/usr/<span class="built_in">local</span>/apr/</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<p><strong>(2)å®‰è£… tomcat-native</strong><br>æè¿°:tomcat-native ä¸ç”¨å•ç‹¬ä¸‹è½½ï¼Œè§£å‹ç¼© tomcat ç¨‹åºåŒ…åå† bin/ ç›®å½•ä¸‹å­˜åœ¨è¯¥ç¨‹åºçš„æºç åŒ…ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ tar xf apache-tomcat-8.5.38.tar.gz -C /usr/<span class="built_in">local</span>/</span><br><span class="line">$ ln -sv /usr/<span class="built_in">local</span>/apache-tomcat-8.5.38/ /usr/<span class="built_in">local</span>/tomcat</span><br><span class="line">$ cp /usr/<span class="built_in">local</span>/tomcat/bin/tomcat-native.tar.gz /usr/<span class="built_in">local</span>/src/</span><br><span class="line">$ tar xf tomcat-native.tar.gz</span><br><span class="line">$ <span class="built_in">cd</span> tomcat-native-1.2.21-src/</span><br><span class="line">$ <span class="built_in">cd</span> native/</span><br><span class="line">$ ./configure --prefix=/usr/<span class="built_in">local</span>/apr --with-java-home=/usr/<span class="built_in">local</span>/jdk1.8.0_121/</span><br><span class="line">$ make -j 2 &amp;&amp; make install</span><br><span class="line">$ vim /etc/profile</span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=/usr/<span class="built_in">local</span>/apr/lib <span class="comment">##æ·»åŠ apr path</span></span><br><span class="line">$ <span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<p><strong>(3) ä¿®æ”¹ Tomcat é…ç½®æ–‡ä»¶</strong><br>ä¿®æ”¹ protocol å€¼ Tomcat é»˜è®¤æ˜¯ â€œHTTP/1.1â€ ï¼Œå¦‚æœè¿è¡Œ apr æ¨¡å¼éœ€è¦æŠŠ protocol å€¼ä¿®æ”¹æˆ apr æ¨¡å¼ï¼š org.apache.coyote.http11.Http11AprProtocol<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1.ä¿®æ”¹ä¸ºapræ¨¡å¼</span></span><br><span class="line">$ <span class="built_in">cd</span> /usr/<span class="built_in">local</span>/tomcat/conf/</span><br><span class="line">$ vim server.xml</span><br><span class="line">&lt;Connector port=<span class="string">"8080"</span> protocol=<span class="string">"org.apache.coyote.http11.Http11AprProtocol"</span></span><br><span class="line">               connectionTimeout=<span class="string">"20000"</span></span><br><span class="line">               redirectPort=<span class="string">"8443"</span> /&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">#2.ä¿®æ”¹ SSLEngine</span></span><br></pre></td></tr></table></figure></p>
<p>å¯åŠ¨ Tomcat éªŒè¯æŸ¥çœ‹ catalina.out æ—¥å¿—ä¸­æœ€ä¸‹é¢ä¸‰è¡Œ</p>
<p><strong>è¡¥å……è¯´æ˜:</strong></p>
<ul>
<li>APR æ¨¡å¼æ–‡æ¡£é“¾æ¥ï¼š<a href="http://tomcat.apache.org/tomcat-8.5-doc/apr.html" target="_blank" rel="noopener">http://tomcat.apache.org/tomcat-8.5-doc/apr.html</a></li>
</ul>
<p><br></p>
<h3 id="5-2-è´Ÿè½½å‡è¡¡é…ç½®"><a href="#5-2-è´Ÿè½½å‡è¡¡é…ç½®" class="headerlink" title="5.2 è´Ÿè½½å‡è¡¡é…ç½®"></a>5.2 è´Ÿè½½å‡è¡¡é…ç½®</h3><p>æè¿°:LVSè´Ÿè½½å‡è¡¡æ˜¯æé«˜åº”ç”¨è´Ÿè½½é‡å’Œå®¹é”™çš„æœ‰æ•ˆæ‰‹æ®µï¼Œå¯ä»¥ç»“åˆNginxä¸Tomcatå®ç°Nginxæ˜¯ä¸€æ¬¾æ€§èƒ½ä¼˜å¼‚çš„åå‘ä»£ç†æœåŠ¡å™¨ã€‚</p>
<p><strong>(1)è´Ÿè½½å‡è¡¡é…ç½®å®ç°</strong><br>åå‘ä»£ç†åŸç†ç¤ºæ„å›¾<br><figure class="image-box">
                <a rel=Tomcatåº”ç”¨å®¹å™¨å®‰è£…å’Œä½¿ç”¨ href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190910152645.png" target="_blank" title="WeiyiGeek.åå‘ä»£ç†åŸç†ç¤ºæ„å›¾" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190910152645.png" alt="WeiyiGeek.åå‘ä»£ç†åŸç†ç¤ºæ„å›¾" title="" class=""></a>
                <p>WeiyiGeek.åå‘ä»£ç†åŸç†ç¤ºæ„å›¾</p>
            </figure></p>
<p>è´Ÿè½½å‡è¡¡ç¤ºæ„å›¾ï¼š<br><figure class="image-box">
                <a rel=Tomcatåº”ç”¨å®¹å™¨å®‰è£…å’Œä½¿ç”¨ href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190910153034.png" target="_blank" title="WeiyiGeek." data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190910153034.png" alt="WeiyiGeek." title="" class=""></a>
                <p>WeiyiGeek.</p>
            </figure></p>
<p>è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼š</p>
<ul>
<li>Nginx æä¾›è½®è¯¢ï¼ˆround robinï¼‰</li>
<li>ç”¨æˆ·IPå“ˆå¸Œï¼ˆclient IPï¼‰</li>
<li>æŒ‡å®šæƒé‡ 3 ç§æ–¹å¼weight</li>
</ul>
<p><br></p>
<p><strong>(2)è´Ÿè½½å‡è¡¡æ—¶Sessionçš„å¤„ç†ç­–ç•¥</strong><br>æè¿°:Sessionæ˜¯TomcatæœåŠ¡å™¨ä¸Šçš„å†…å­˜ç©ºé—´ï¼Œå¦‚æœä¸€ä¸ªç”¨æˆ·å‘å‡ºå¤šä¸ªè¯·æ±‚ï¼Œå´å‘åˆ°äº†å¤šä¸ªtomcatæœåŠ¡å™¨ä¸­ï¼Œé‚£ä¹ˆå°±ä¼šå‡ºç°Sessionä¸åŒæ­¥çš„é—®é¢˜;</p>
<p><em>è§£å†³æ–¹æ¡ˆ1</em></p>
<ul>
<li>å°†ä¸€ä¸ªç”¨æˆ·çš„è¯·æ±‚é”å®šåˆ°æŸä¸€å°æœåŠ¡å™¨ä¸Šï¼Œç®€å•ï¼Œä½†æ˜¯ç¼ºä¹å®¹é”™æ€§ï¼Œä¸€æ—¦æŸä¸ªæœåŠ¡å™¨å‘ç”Ÿæ•…éšœï¼ŒSessionå¯èƒ½ä¸¢å¤±ï¼Œï¼ˆä½†æ˜¯æœåŠ¡å™¨å‘ç”Ÿæ•…éšœæ˜¯ä¸€ä¸ªä½æ¦‚ç‡äº‹ä»¶ï¼Œå¦‚æœä¸€ä¸ªæœåŠ¡å™¨ç»å¸¸æŒ‚æ‰ï¼Œè¦ä¹ˆæ˜¯ç¡¬ä»¶æœ‰é—®é¢˜ï¼Œè¦ä¹ˆæ˜¯åº”ç”¨æœ‰é—®é¢˜ï¼‰å¯ä»¥ä½¿ç”¨ç”¨æˆ·IPå“ˆå¸Œå®ç°</li>
</ul>
<p><em>è§£å†³æ–¹æ¡ˆ2</em></p>
<ul>
<li>Sessionå¤åˆ¶ç­–ç•¥ï¼ŒåŸºäºç½‘ç»œçš„å¹¿æ’­ç­–ç•¥ï¼Œä¸€ä¸ªèŠ‚ç‚¹Sessionå˜åŒ–ï¼Œå…¶ä»–èŠ‚ç‚¹åŒæ­¥å¤åˆ¶ï¼Œå…·æœ‰å®¹é”™æ€§ï¼Œä½†èŠ‚ç‚¹å¤šæˆ–å¤åˆ¶é‡å¤§æ—¶å¯¹ç½‘ç»œè´Ÿè·å¤§ï¼Œä½¿ç½‘ç»œæ•ˆç‡ä½ä¸‹ï¼Œç”šè‡³é˜»å¡<ul>
<li>åœ¨/conf/server.xmlæ–‡ä»¶ä¸­å¼€å¯Sessionå¤åˆ¶çš„é€‰é¡¹ï¼Œå°†æ³¨é‡Šå»æ‰ï¼Œ7.0é»˜è®¤å€¼ä»¥é…ç½®å¥½ï¼Œéœ€è¦æ¥æ”¶å™¨ç»‘å®šå†…ç½‘(ä¸€èˆ¬æœåŠ¡å™¨éƒ½æœ‰ä¸¤å—ç½‘å¡)ç½‘å¡åœ°å€,ä¿®æ”¹ç«¯å£&gt;ã€‚</li>
<li>åœ¨åº”ç”¨ä¸­æŒ‡å®šåº”ç”¨æ˜¯åœ¨åˆ†å¸ƒå¼éƒ¨ç½²ä¹‹ä¸‹ï¼Œåœ¨web.xmlä¸­æ·»åŠ é€‰é¡¹</li>
</ul>
</li>
</ul>
<p><em>è§£å†³æ–¹æ¡ˆ3</em></p>
<ul>
<li>é¢å¤–åˆ›å»ºä¸€ä¸ªå…±äº«çš„ç©ºé—´ç”¨æ¥å­˜æ”¾Sessionï¼Œæ‰€æœ‰æœåŠ¡å™¨å…±äº«ä¸€ä¸ªSession</li>
</ul>
<p><br></p>
<p><strong>(3)memcachedç¼“å­˜å…±äº«æ–¹æ¡ˆåŸºæœ¬åŸç†</strong><br>ç²˜æ€§Sessionä¸éç²˜æ€§Sessionæ–¹å¼ï¼šéœ€è¦ä¸€äº›å·¥å…·jaråŒ…ï¼Œå®˜ç½‘æœ‰ç›®å½•å’Œä¸‹è½½è¿æ¥åœ¨/conf/context.xmlä¸­è¿›è¡Œé…ç½®ï¼Œå…¨å±€æœ‰æ•ˆã€‚<br><figure class="image-box">
                <a rel=Tomcatåº”ç”¨å®¹å™¨å®‰è£…å’Œä½¿ç”¨ href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190910153858.png" target="_blank" title="WeiyiGeek." data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190910153858.png" alt="WeiyiGeek." title="" class=""></a>
                <p>WeiyiGeek.</p>
            </figure></p>
<p><em>æ³¨æ„äº‹é¡¹:</em></p>
<ul>
<li>é›†ç¾¤ç¯å¢ƒä¸­åº”ç”¨ä»£ç åº”æ³¨æ„çš„é—®é¢˜ä¼ é€’Sessionéœ€è¦å®ä½“ç±»åºåˆ—åŒ–æ”¯æŒï¼Œå®ç°å¯åºåˆ—åŒ–æ¥å£ï¼Œè®¾ç½®ç‰ˆæœ¬å·ã€‚</li>
<li>è·å–ç”¨æˆ·IPåœ°å€æ–¹æ³•çš„å˜åŒ–ï¼Œè·å–çœŸå®å®¢æˆ·ç«¯ipè€Œä¸æ˜¯Nginxä»£ç†åœ°å€ã€‚</li>
<li>åŠ¨é™åˆ†ç¦»ç»“æ„çš„é¢„è§„åˆ’ã€‚ä¸€èˆ¬é«˜å¹¶å‘çš„ç½‘ç«™ä¸Šï¼Œèµ„æºç±»çš„æ–‡ä»¶ï¼Œå¦‚js,css,å›¾ç‰‡é€šå¸¸æ˜¯ç”±é™æ€æœåŠ¡å™¨å¤„ç†ï¼ŒNginxå¤„ç†é™æ€æ–‡ä»¶æ•ˆç‡å°±éå¸¸é«˜ï¼Œè€Œtomcatå¤„ç†é™æ€æ–‡ä»¶æ˜¯å®ƒå¾ˆå¤§çš„ä¸€ä¸ªå¼±åŠ¿ï¼Œtomcatåªè´Ÿè´£åŠ¨æ€è¯·æ±‚çš„å¤„ç†ã€‚</li>
<li>ç¼–ç çš„æ—¶å€™å°±è¦è€ƒè™‘é™æ€èµ„æºæœ€åå¯èƒ½è¦è¢«æ‹¿å‡ºå»ï¼Œåœ°å€ä¼šæœ‰å˜åŒ–ï¼Œæ‰€ä»¥åœ¨å¼€å‘çš„æ—¶å€™åº”è¯¥è§„åˆ’è®¿é—®åœ°å€ï¼Œä¿æŒæœ€å¤§çµæ´»æ€§ã€‚</li>
</ul>
<hr>

<h2 id="6-å…¥å‘å‡ºå‘"><a href="#6-å…¥å‘å‡ºå‘" class="headerlink" title="6.å…¥å‘å‡ºå‘"></a>6.å…¥å‘å‡ºå‘</h2><h3 id="é—®é¢˜1-å‹æµ‹æ—¶ç‰©ç†å†…å­˜è¢«ç”¨å…‰-Tomcat-è¢«-Kernel-kill-æ‰"><a href="#é—®é¢˜1-å‹æµ‹æ—¶ç‰©ç†å†…å­˜è¢«ç”¨å…‰-Tomcat-è¢«-Kernel-kill-æ‰" class="headerlink" title="é—®é¢˜1:å‹æµ‹æ—¶ç‰©ç†å†…å­˜è¢«ç”¨å…‰ Tomcat è¢« Kernel kill æ‰"></a>é—®é¢˜1:å‹æµ‹æ—¶ç‰©ç†å†…å­˜è¢«ç”¨å…‰ Tomcat è¢« Kernel kill æ‰</h3><p>ç­”:éœ€è¦é¦–å…ˆæŸ¥çœ‹Tomcatæ—¥å¿—å’Œ<code>/var/log/message</code>æ—¥å¿—ï¼Œéœ€è¦æ³¨æ„äº¤æ¢åˆ†åŒºç©ºé—´æ˜¯å¦åˆ†é…ä»¥åŠåˆ†é…å¤§å°;<br>è§£å†³åŠæ³•: ç»™TOMCATæœåŠ¡å™¨å¯ç”¨è™šæ‹Ÿç©ºé—´ï¼Œè¿˜å¯ä»¥é™ä½ Apache çš„æœ€å¤§è¿æ¥æ•° MaxClientsã€æœ€å¤§å†…å­˜ ServerLimit</p>
<p><br></p>
<h3 id="é—®é¢˜2-æŠ¥é”™INFO-Maximum-number-of-threads-200-created-for-connector-with-address-null-and-port-80"><a href="#é—®é¢˜2-æŠ¥é”™INFO-Maximum-number-of-threads-200-created-for-connector-with-address-null-and-port-80" class="headerlink" title="é—®é¢˜2:æŠ¥é”™INFO: Maximum number of threads (200) created for connector with address null and port 80"></a>é—®é¢˜2:æŠ¥é”™INFO: Maximum number of threads (200) created for connector with address null and port 80</h3><p>é—®é¢˜æè¿°:INFO: Maximum number of threads (200) created for connector with address null and port 8080<br>é—®é¢˜è¯´æ˜:æœ€å¤§çº¿ç¨‹æ•°è®¾ç½®é”™è¯¯ï¼Œè¶…å‡ºé…ç½®æ–‡ä»¶ä¸­MaxThreadsè®¿é—®è¯·æ±‚;<br>è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨çº¿ç¨‹æ± ç”¨è¾ƒå°‘çš„çº¿ç¨‹å¤„ç†è¾ƒå¤šçš„è®¿é—®ï¼Œå¯ä»¥æé«˜tomcatå¤„ç†è¯·æ±‚çš„èƒ½åŠ›ã€‚</p>
<p>ä½¿ç”¨æ–¹æ³•:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#(1) æ‰“å¼€/conf/server.xmlå¢åŠ </span></span><br><span class="line"><span class="comment">#æœ€å¤§çº¿ç¨‹500(ä¸€èˆ¬æœåŠ¡å™¨è¶³å¤Ÿ)ï¼Œæœ€å°ç©ºé—²çº¿ç¨‹æ•°20ï¼Œçº¿ç¨‹æœ€å¤§ç©ºé—²æ—¶é—´60ç§’(è¿™é‡Œæ ¹æ®éœ€æ±‚æ›´æ”¹)ã€‚æ¥ç€ä¿®æ”¹&lt;Connector&gt;èŠ‚ç‚¹ï¼Œå¢åŠ executorå±æ€§ã€‚</span></span><br><span class="line">&lt;Executor name=<span class="string">"tomcatThreadPool"</span> namePrefix=<span class="string">"catalina-exec-"</span> maxThreads=<span class="string">"500"</span> minSpareThreads=<span class="string">"20"</span> maxIdleTime=<span class="string">"60000"</span> /&gt;</span><br><span class="line">&lt;Connector executor=<span class="string">"tomcatThreadPool"</span></span><br><span class="line"> port=<span class="string">"80"</span> protocol=<span class="string">"HTTP/1.1"</span></span><br><span class="line"> connectionTimeout=<span class="string">"60000"</span></span><br><span class="line"> keepAliveTimeout=<span class="string">"15000"</span></span><br><span class="line"> maxKeepAliveRequests=<span class="string">"1"</span></span><br><span class="line"> redirectPort=<span class="string">"443"</span> /&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">#(2) å½“tomcatå¹¶å‘ç”¨æˆ·é‡å¤§çš„æ—¶å€™ï¼Œå•ä¸ªjvmè¿›ç¨‹ç¡®å®å¯èƒ½æ‰“å¼€è¿‡å¤šçš„æ–‡ä»¶å¥æŸ„ï¼ˆjava.net.SocketException: Too many open filesï¼‰ã€‚</span></span><br><span class="line">ps -ef |grep tomcat    <span class="comment">#æŸ¥çœ‹tomcatçš„è¿›ç¨‹IDï¼Œè®°å½•IDå·ï¼Œå‡è®¾è¿›ç¨‹IDä¸º10001</span></span><br><span class="line">lsof -p 10001 | wc -l  <span class="comment">#æŸ¥çœ‹æ–‡ä»¶æ“ä½œæ•°</span></span><br><span class="line"><span class="built_in">ulimit</span> -a              <span class="comment">#æŸ¥çœ‹æ¯ä¸ªç”¨æˆ·å…è®¸æ‰“å¼€çš„æœ€å¤§æ–‡ä»¶æ•°é»˜è®¤æ˜¯1024  </span></span><br><span class="line"><span class="built_in">ulimit</span> -n 65536        <span class="comment">#å°†å…è®¸çš„æœ€å¤§æ–‡ä»¶æ•°è°ƒæ•´ä¸º65536 ï¼ˆé‡å¯åå¤±æ•ˆï¼‰</span></span><br></pre></td></tr></table></figure></p>
<figure class="image-box">
                <a rel=Tomcatåº”ç”¨å®¹å™¨å®‰è£…å’Œä½¿ç”¨ href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200108164450.png" target="_blank" title="WeiyiGeek." data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200108164450.png" alt="WeiyiGeek." title="" class=""></a>
                <p>WeiyiGeek.</p>
            </figure>
<p><br></p>
<h3 id="é—®é¢˜3-æŒ‡å®šwaråŒ…çš„docBaseç›®å½•åº”ç”¨è‡ªåŠ¨è§£å‹ä¸éƒ¨ç½²è®¾ç½®"><a href="#é—®é¢˜3-æŒ‡å®šwaråŒ…çš„docBaseç›®å½•åº”ç”¨è‡ªåŠ¨è§£å‹ä¸éƒ¨ç½²è®¾ç½®" class="headerlink" title="é—®é¢˜3:æŒ‡å®šwaråŒ…çš„docBaseç›®å½•åº”ç”¨è‡ªåŠ¨è§£å‹ä¸éƒ¨ç½²è®¾ç½®"></a>é—®é¢˜3:æŒ‡å®šwaråŒ…çš„docBaseç›®å½•åº”ç”¨è‡ªåŠ¨è§£å‹ä¸éƒ¨ç½²è®¾ç½®</h3><p>é—®é¢˜æè¿°: è®¾ç½®Contextçš„Pathè·¯å¾„ä»¥åŠdocBaseç›®å½•è®¾ç½®ã€‚<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Service</span> <span class="attr">name</span>=<span class="string">"passport"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Connector</span> <span class="attr">port</span>=<span class="string">"8081"</span> <span class="attr">protocol</span>=<span class="string">"HTTP/1.1"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">connectionTimeout</span>=<span class="string">"20000"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">redirectPort</span>=<span class="string">"8443"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Engine</span> <span class="attr">name</span>=<span class="string">"passport"</span> <span class="attr">defaultHost</span>=<span class="string">"localhost"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Realm</span> <span class="attr">className</span>=<span class="string">"org.apache.catalina.realm.LockOutRealm"</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- This Realm uses the UserDatabase configured in the global JNDI</span></span><br><span class="line"><span class="comment">            resources under the key "UserDatabase".  Any edits</span></span><br><span class="line"><span class="comment">            that are performed against this UserDatabase are immediately</span></span><br><span class="line"><span class="comment">            available for use by the Realm.  --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">Realm</span> <span class="attr">className</span>=<span class="string">"org.apache.catalina.realm.UserDatabaseRealm"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">resourceName</span>=<span class="string">"UserDatabase"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Realm</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Host</span> <span class="attr">name</span>=<span class="string">"localhost"</span>  <span class="attr">appBase</span>=<span class="string">"passport"</span> <span class="attr">unpackWARs</span>=<span class="string">"true"</span> <span class="attr">autoDeploy</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">Context</span> <span class="attr">path</span>=<span class="string">""</span> <span class="attr">docBase</span>=<span class="string">"E:/Development/APP/"</span>&gt;</span> <span class="tag">&lt;/<span class="name">Context</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">Valve</span> <span class="attr">className</span>=<span class="string">"org.apache.catalina.valves.AccessLogValve"</span> <span class="attr">directory</span>=<span class="string">"logs"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">prefix</span>=<span class="string">"localhost_access_log"</span> <span class="attr">suffix</span>=<span class="string">".txt"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">pattern</span>=<span class="string">"%h %l %u %t &amp;quot;%r&amp;quot; %s %b"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Host</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">Engine</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Service</span>&gt;</span></span><br></pre></td></tr></table></figure></p>

        </div>
        <!-- Google å¹¿å‘Š -->
        
<ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-9134434519967436" data-ad-slot="7905848205"></ins>
  

        
<hr/>
<div style="text-align: center;font-weight: bold;">
  <p> æ¬¢è¿å„ä½å¿—åŒé“åˆçš„æœ‹å‹ä¸€èµ·å­¦ä¹ äº¤æµï¼Œå¦‚æ–‡ç« æœ‰è¯¯è¯·åœ¨ä¸‹æ–¹ç•™ä¸‹æ‚¨å®è´µçš„ç»éªŒçŸ¥è¯†ï¼Œä¸ªäººé‚®ç®±åœ°å€<b style="color:#ff654e"><code>ã€master#weiyigeek.topã€‘</code></b>æˆ–è€…ä¸ªäººå…¬ä¼—å·<b style="color:#ff654e"><code>ã€WeiyiGeekã€‘</code></b>è”ç³»æˆ‘ã€‚ </p>
  <p> æ›´å¤šæ–‡ç« æ¥æºäº<b style="color:#03a9f4">ã€WeiyiGeek Blog - ä¸ºäº†èƒ½åˆ°è¿œæ–¹ï¼Œè„šä¸‹çš„æ¯ä¸€æ­¥éƒ½ä¸èƒ½å°‘ã€‘</b>, ä¸ªäººé¦–é¡µåœ°å€( <a style="color: #03a9f4;" href="https://weiyigeek.top" target="_blank"> https://weiyigeek.top </a> )</p>
<!-- 

  <ul style="font-weight: bolder;">
    <li>
      <p><span style="color: #03a9f4">echo&nbsp;&nbsp;"ã€ç‚¹ä¸ªèµã€‘ï¼ŒåŠ¨åŠ¨ä½ é‚£ç²—å£®çš„æ‹‡æŒ‡æˆ–è€…èŠŠèŠŠç‰æ‰‹ï¼Œäº²ï¼"</span></p>
    </li>
    <li>
      <p><span style="color: #ff9201">printf("%s",&nbsp;"ã€æŠ•ä¸ªå¸ã€‘ï¼Œä¸‡æ°´åƒå±±æ€»æ˜¯æƒ…ï¼ŒæŠ•ä¸ªç¡¬å¸è¡Œä¸è¡Œï¼Œäº²ï¼")</span></p>
    </li>
    <li>
      <p><span style="color: #02a2ff">fmt.Printf("ã€æ”¶ä¸ªè—ã€‘ï¼Œé˜…åå³ç„šä¸åƒç°ï¼Œäº²ï¼")&nbsp;&nbsp;</span></p>
    </li>
    <li>
      <p><span style="color:red">console.info("ã€è½¬ä¸ªå‘ã€‘ï¼Œè®©æ›´å¤šçš„å¿—åŒé“åˆçš„æœ‹å‹ä¸€èµ·å­¦ä¹ äº¤æµï¼Œäº²ï¼")</span></p>
    </li>
    <li>
      <p><span style="color: #ff654e">System.out.println("ã€å…³ä¸ªæ³¨ã€‘ï¼Œåç»­æµè§ˆæŸ¥çœ‹ä¸è¿·è·¯å“Ÿï¼Œäº²ï¼")</span></p>
    </li>
  </ul> -->
  <div>
    <img src="/img/share-wechat.jpg" class="img-responsive" alt="æ‰«æFollow(å…³æ³¨)WeiyiGeekå…¬ä¼—å·ä¸Visit(æµè§ˆ)æå®¢å…¨æ ˆä¿®ç‚¼å°ç¨‹åº" >
    <p>ä¸“æ ä¹¦å†™ä¸æ˜“ï¼Œå¦‚æœæ‚¨è§‰å¾—è¿™ä¸ªä¸“æ è¿˜ä¸é”™çš„ï¼Œè¯·ç»™è¿™ç¯‡ä¸“æ  <b style="color: red;">ã€ç‚¹ä¸ªèµã€æŠ•ä¸ªå¸ã€æ”¶ä¸ªè—ã€å…³ä¸ªæ³¨ã€è½¬ä¸ªå‘ã€èµä¸ªåŠ©ã€‘</b>ï¼Œè¿™å°†å¯¹æˆ‘çš„è‚¯å®šï¼Œæˆ‘å°†æŒç»­æ•´ç†å‘å¸ƒæ›´å¤šä¼˜è´¨åŸåˆ›æ–‡ç« ï¼ã€‚</p>
    <img src="/img/weiyigeek.jpg" class="img-responsive" alt="WeiyiGeek-banner">
  </div>
</div>
  <hr>
  

  <blockquote class="post-copyright">
    <div class="content">
      
        
<span class="post-time">
    æœ€åæ›´æ–°æ—¶é—´ï¼š<time datetime="2022-03-29T05:39:06.308Z" itemprop="dateUpdated">2022-03-29 13:39:06</time>
</span><br>


        <span>æ–‡ç« åŸå§‹è·¯å¾„ï¼š<a href="https://github.com/WeiyiGeek/blog/edit/master/source/_posts/ç³»ç»Ÿè¿ç»´/Application/Web/WebApp/Tomcat/1.Tomcatåº”ç”¨å®¹å™¨å®‰è£…å’Œä½¿ç”¨.md" target="_blank" rel="noopener noreferrer">_posts/ç³»ç»Ÿè¿ç»´/Application/Web/WebApp/Tomcat/1.Tomcatåº”ç”¨å®¹å™¨å®‰è£…å’Œä½¿ç”¨.md</a></span><br>
         <span class="copy-copyright">è½¬è½½æ³¨æ˜å‡ºå¤„ï¼ŒåŸæ–‡åœ°å€ï¼š<a href="/2019/9-9-130.html" target="_blank" rel="external">https://blog.weiyigeek.top/2019/9-9-130.html</a></span><br>æœ¬ç«™æ–‡ç« å†…å®¹éµå¾ª <a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">çŸ¥è¯†å…±äº« ç½²å - éå•†ä¸šæ€§ - ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…åè®®</a> 
    </div>
    <footer>
      <a href="https://blog.weiyigeek.top">
        <img src="/img/avatar.jpg" alt="WeiyiGeek">
        WeiyiGeek
      </a>
    </footer>
  </blockquote>


        
            <div class="page-reward">
  <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-rectangle waves-light">â˜•ï¸ è¯·ä½œè€…å–æ¯å’–å•¡!</a>
</div>
            
        
        <div class="post-footer">
            
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Tomcat/" rel="tag">Tomcat</a></li></ul>

            <div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://blog.weiyigeek.top/2019/9-9-130.html&title=ã€ŠTomcatåº”ç”¨å®¹å™¨å®‰è£…å’Œä½¿ç”¨ã€‹ â€” WeiyiGeek Blog&pic=https://blog.weiyigeek.top/img/avatar.jpg" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.weiyigeek.top/2019/9-9-130.html&title=ã€ŠTomcatåº”ç”¨å®¹å™¨å®‰è£…å’Œä½¿ç”¨ã€‹ â€” WeiyiGeek Blog&source=[TOC]" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.weiyigeek.top/2019/9-9-130.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€ŠTomcatåº”ç”¨å®¹å™¨å®‰è£…å’Œä½¿ç”¨ã€‹ â€” WeiyiGeek Blog&url=https://blog.weiyigeek.top/2019/9-9-130.html&via=https://blog.weiyigeek.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://blog.weiyigeek.top/2019/9-9-130.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>

        </div>
        
          <!-- è¯„è®ºç»„ä»¶ -->


<div id="gitalk-container"></div>
<script type="text/javascript" src="/js/plugins/gitalk.min.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/custom/gitalk.init.js?v=1.6.6"></script>
        
    </div>
    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="prev">
      <a href="/2019/9-10-445.html" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">WAFå®‰å…¨æ‹¦æˆªç»•è¿‡æ€è·¯å’Œæ‰‹æ³•</h4>
      </a>
    </div>
  

  
    <div class="next">
      <a href="/2019/9-9-260.html" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">LVSè´Ÿè½½å‡è¡¡é«˜å¯ç”¨è§£å†³æ–¹æ¡ˆ</h4>
      </a>
    </div>
  
</nav>


    
    
        <aside class="post-widget">
            <nav class="post-toc-wrap" id="post-toc">
                <strong>ç›®å½•</strong>
                <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#1-å‰è¨€ç®€è¿°"><span class="post-toc-number">1.</span> <span class="post-toc-text">1.å‰è¨€ç®€è¿°</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#2-å®‰è£…ä»‹ç»"><span class="post-toc-number">2.</span> <span class="post-toc-text">2.å®‰è£…ä»‹ç»</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-1-ç¯å¢ƒå®‰è£…"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">2.1 ç¯å¢ƒå®‰è£…</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-2-å¸¸ç”¨å‘½ä»¤"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">2.2 å¸¸ç”¨å‘½ä»¤</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-3-Tomcat-é•œåƒæ„å»º"><span class="post-toc-number">2.3.</span> <span class="post-toc-text">2.3 Tomcat é•œåƒæ„å»º</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-3-TomEE-é•œåƒæ„å»º"><span class="post-toc-number">2.4.</span> <span class="post-toc-text">2.3 TomEE é•œåƒæ„å»º</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#3-é…ç½®éƒ¨ç½²"><span class="post-toc-number">3.</span> <span class="post-toc-text">3.é…ç½®éƒ¨ç½²</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#4-ç›‘æ§è¿è¡Œ"><span class="post-toc-number">4.</span> <span class="post-toc-text">4.ç›‘æ§è¿è¡Œ</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-1-Tomcat-é…ç½®-JMX-è¿æ¥"><span class="post-toc-number">4.1.</span> <span class="post-toc-text">4.1 Tomcat é…ç½® JMX è¿æ¥</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-2-jmapå·¥å…·"><span class="post-toc-number">4.2.</span> <span class="post-toc-text">4.2 jmapå·¥å…·</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-3-jhatå·¥å…·"><span class="post-toc-number">4.3.</span> <span class="post-toc-text">4.3 jhatå·¥å…·</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#5-é«˜å¯ç”¨æ‰©å±•"><span class="post-toc-number">5.</span> <span class="post-toc-text">5.é«˜å¯ç”¨æ‰©å±•</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-1-Tomcatè¿è¡Œæ¨¡å¼"><span class="post-toc-number">5.1.</span> <span class="post-toc-text">5.1 Tomcatè¿è¡Œæ¨¡å¼</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-2-è´Ÿè½½å‡è¡¡é…ç½®"><span class="post-toc-number">5.2.</span> <span class="post-toc-text">5.2 è´Ÿè½½å‡è¡¡é…ç½®</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#6-å…¥å‘å‡ºå‘"><span class="post-toc-number">6.</span> <span class="post-toc-text">6.å…¥å‘å‡ºå‘</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#é—®é¢˜1-å‹æµ‹æ—¶ç‰©ç†å†…å­˜è¢«ç”¨å…‰-Tomcat-è¢«-Kernel-kill-æ‰"><span class="post-toc-number">6.1.</span> <span class="post-toc-text">é—®é¢˜1:å‹æµ‹æ—¶ç‰©ç†å†…å­˜è¢«ç”¨å…‰ Tomcat è¢« Kernel kill æ‰</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#é—®é¢˜2-æŠ¥é”™INFO-Maximum-number-of-threads-200-created-for-connector-with-address-null-and-port-80"><span class="post-toc-number">6.2.</span> <span class="post-toc-text">é—®é¢˜2:æŠ¥é”™INFO: Maximum number of threads (200) created for connector with address null and port 80</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#é—®é¢˜3-æŒ‡å®šwaråŒ…çš„docBaseç›®å½•åº”ç”¨è‡ªåŠ¨è§£å‹ä¸éƒ¨ç½²è®¾ç½®"><span class="post-toc-number">6.3.</span> <span class="post-toc-text">é—®é¢˜3:æŒ‡å®šwaråŒ…çš„docBaseç›®å½•åº”ç”¨è‡ªåŠ¨è§£å‹ä¸éƒ¨ç½²è®¾ç½®</span></a></li></ol></li></ol>
            </nav>
            <div class="toc-bar"><div>
        </aside>
    


    <!-- æ”¯ä»˜å®å¾®ä¿¡æ–‡ç« èµèµ -->
    
      <div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        å¦‚æœæ­¤ç¯‡æ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œå°±è¯·ä½œè€…å–æ¯ Coffee â˜•ï¸â˜•ï¸!
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardwechat" src="/img/reward-wechat.jpg" height="250" height="250" alt="å¾®ä¿¡æ‰“èµäºŒç»´ç ">
            <img id="rewardalipay" src="/img/reward-alipay.png" height="250" height="250" alt="æ”¯ä»˜å®æ‰“èµäºŒç»´ç ">
        </div>
        
        <label class="reward-toggle">
            <!-- <input id="rewardToggle" type="checkbox" class="reward-toggle-check" data-wechat="/img/reward-wechat.jpg" data-alipay="/img/reward-alipay.png"> -->
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">å¾®ä¿¡</span>
                <span class="reward-toggle-item alipay">æ”¯ä»˜å®</span>
            </div>
        </label>
        
    </div>
</div>

      

    <!-- å¾®ä¿¡å…¬ä¼—å·å…³æ³¨/æ–‡ç« ç‰ˆæƒå¤åˆ¶ -->
    
      <div id="btw-mask" style="position: fixed; top: 0px; right: 0px; bottom: 0px; left: 0px; opacity: 0.7; z-index: 999; background: rgb(0, 0, 0); display:none"></div>
<div id="btw-modal" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 360px; text-align: center; font-size: 13px; background: rgb(255, 255, 255); border-radius: 10px; z-index: 9999; font-family: PingFangSC-Regular, sans-serif;display:none">
<span id="btw-modal-close-btn" style="position: absolute; top: 5px; right: 15px; line-height: 1.8; font-size: 15px; cursor: pointer; opacity: 0.2; z-index: 9999; color: rgb(0, 0, 0); background: none; border: none; outline: none;">X</span>
<p id="btw-modal-header" style="margin-top: 40px; line-height: 1.8; font-size: 13px; ">
<b style="color:#6190e8;">ä½ å¥½çœ‹å‹,æ¬¢è¿å…³æ³¨åšä¸»å¾®ä¿¡å…¬ä¼—å·å“Ÿ! â¤ <br> è¿™å°†æ˜¯æˆ‘æŒç»­æ›´æ–°æ–‡ç« çš„åŠ¨åŠ›æºæ³‰ï¼Œè°¢è°¢æ”¯æŒï¼(à¹‘â€²á´—â€µà¹‘) </b> <br> å¦‚ä¸æƒ³å…³æ³¨è¯·ç‚¹å‡»å³ä¸Šè§’çš„ã€Xã€‘å³å¯å…³é—­ç»§ç»­æµè§ˆæ–‡ç« .<br>  <b style="color:red;"> æ¸©é¦¨æç¤º: æœªè§£é”çš„ç”¨æˆ·ä¸èƒ½ç²˜è´´å¤åˆ¶æ–‡ç« å†…å®¹å“Ÿ!</b> <br>
<br>Method 1.Please visit <strong><a href="https://twitter.com/WeiyiGeek" target="_blank" rel="noopener" style="color: rgb(240, 65, 52);text-decoration:underline;">ã€My Twitterã€‘</a></strong>. There is an article verification code in the homepage.
<br>æ–¹å¼2.è¯·è®¿é—®æœ¬åšä¸»çš„Bç«™<strong><a href="https://space.bilibili.com/385802642" target="_blank" rel="noopener" style="color: rgb(240, 65, 52);text-decoration:underline;">ã€WeiyiGeekã€‘</a></strong>é¦–é¡µå…³æ³¨UPä¸»,<br>å°†è‡ªåŠ¨éšæœºè·å–è§£é”éªŒè¯ç ã€‚
<br>æ–¹å¼3.æ‰«ä¸€æ‰«ä¸‹æ–¹äºŒç»´ç ï¼Œå…³æ³¨æœ¬ç«™<strong>å®˜æ–¹å…¬ä¼—å·</strong><br>
å›å¤ï¼š<strong style="color: rgb(240, 65, 52);">éªŒè¯ç </strong>
å°†è·å–<strong style="color: rgb(240, 65, 52);">è§£é”(æœ‰æ•ˆæœŸ7å¤©)</strong>æœ¬ç«™æ‰€æœ‰æŠ€æœ¯æ–‡ç« å“Ÿ!</p>
<img src="/img/wechat-search.png" style="width: 300px; margin-top: 10px;">
<div id="btw-modal-input-code" style="margin-top: 20px; background: rgb(255, 255, 255);">
  <input id="btw-modal-input" type="number" minlength="4" maxlength="4" placeholder="è¯·è¾“å…¥éªŒè¯ç |Verification Code"
    style="width: 165px; height: 32px; line-height: 32px; padding: 0px 10px; margin: 0px 10px; font-size: 13px; text-rendering: auto; text-transform: none; cursor: text; outline: none; box-sizing: border-box; border: 1px solid rgb(221, 221, 221); -webkit-appearance: textfield; background-color: white; -webkit-rtl-ordering: logical;"/>
  <button id="btw-submit-btn" onclick="yzm_vertify()"
    style="padding: 0px 20px; height: 32px; font-size: 14px; outline: none; border: none; color: rgb(255, 255, 255); background: rgb(222, 104, 109); cursor: pointer;">æ
    äº¤</button> </div>
<p id="btw-footer" style="margin: 40px 0px 20px; color: rgb(153, 153, 153);">@WeiyiGeek - ä¸ºäº†èƒ½åˆ°è¿œæ–¹ï¼Œè„šä¸‹çš„æ¯ä¸€æ­¥éƒ½ä¸èƒ½å°‘</p>
</div>
        
</article>
</div>

    </main>
    <footer class="footer ">
    
    <div class="top">
        
            <p>
    <span>Linksï¼š</span>
    
    <span class="blogroll-item">
        <a href="https://weiyigeek.top" target="_blank">https://weiyigeek.top</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.weiyigeek.top" target="_blank">https://blog.weiyigeek.top</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://weiyigeek.top/img/search-wechat.jpg" target="_blank">å…¬ä¼—è´¦å·</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://space.bilibili.com/385802642/article" target="_blank">å“”å“©å“”å“©ä¸“æ </a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://github.com/weiyigeek" target="_blank">åšä¸»Github</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://gitee.com/WeiyiGeek" target="_blank">åšä¸»Gitee</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.zhihu.com/people/weiyiSec" target="_blank">çŸ¥ä¹</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.cnblogs.com/WeiyiGeek" target="_blank">åšå®¢å›­</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://my.oschina.net/weiyigeek" target="_blank">OSCHINA</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.toutiao.com/c/user/token/MS4wLjABAAAAqcPSoMqfctaEqJpGSF775eeCjWkrop4AOyLITdMx-L78F5iXzfQcSRM5sY4dq3wR" target="_blank">ä»Šæ—¥å¤´æ¡</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.csdn.net/u013072756?type=lately" target="_blank">CSDN</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.jianshu.com/u/5199a1104739" target="_blank">ç®€ä¹¦</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://cloud.tencent.com/developer/user/1389665/articles" target="_blank">è…¾è®¯äº‘ç¤¾åŒº</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://cuttlefish.baidu.com/shop/75c5dbd8d15abe23482f4d40" target="_blank">ç™¾åº¦æ–‡åº“</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://author.baidu.com/home?from=blog&app_id=1726736601523415" target="_blank">ITæå®¢çŸ¥è¯†åˆ†äº«</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.51cto.com/weiyigeek" target="_blank">51CTOåšå®¢</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://juejin.cn/user/122767337595934" target="_blank">æ˜é‡‘</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://weibo.com/a/hot/7622022703618049_1.html" target="_blank">å¾®åšæ–‡ç« </a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.xiaohongshu.com/user/profile/627c98bb000000001000e7ba" target="_blank">å°çº¢ä¹¦</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://segmentfault.com/u/weiyigeek" target="_blank">Segmentfault</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.modb.pro/u/506690" target="_blank">å¢¨å¤©è½®</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.douyin.com/user/MS4wLjABAAAAMSBdMja6XLsdmzafb0RNbFeBemIOk38K1PaOClZeI1Q" target="_blank">æŠ–éŸ³ä¸»é¡µ</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.kuaishou.com/profile/3xfbrsrhd2i69x9" target="_blank">å¿«æ‰‹ä¸»é¡µ</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.ixigua.com/home/3984243135350727" target="_blank">è¥¿ç“œè§†é¢‘</a>
    </span>
    
</p>

        
    </div>
    
    <div class="bottom">
      <p>
        <span>WeiyiGeek &copy; 2018 - 2022 <a href="https://weiyigeek.top" target="_blank" rel="noopener">weiyigeek.top</a> All rights reserved.å”¯ä¸€æå®¢ITçŸ¥è¯†åˆ†äº« ç‰ˆæƒæ‰€æœ‰ </span>
        
        <span>
          Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/weiyigeek" target="_blank">mellow</a>
        </span>
        
        <br/><a id="SiteRunTime"></a>
        <br/>è®¿é—®ç»Ÿè®¡
        <span><a href="/sitemap.xml" target="_blank" rel="Sitemaps-ç«™ç‚¹åœ°å›¾">Sitemaps</a> </span>
        <span><a href="/baidusitemap.xml" target="_blank" rel="baidusitemaps-ç™¾åº¦ç«™ç‚¹åœ°å›¾">ç«™ç‚¹åœ°å›¾</a> </span>
        <!-- 
  -->
        <br/>ICPå¤‡æ¡ˆå·<span><a href="https://beian.miit.gov.cn" target="_blank">æ¸ICPå¤‡2022003447å·</a></span>
        <br/>
        <div id="cc-myssl-id">
          <a href="https://myssl.com/blog.weiyigeek.top?from=mysslid" target="_blank" rel="noopener">
            <img src="https://static.myssl.com/res/images/myssl-id1.png" alt="MySSLå®‰å…¨è®¤è¯" style="max-height:50px;display:block;margin:0 auto">
          </a>
        </div>
      </p>
    </div>
</footer>



    <div class="mask" id="mask"></div>

<div id="go" class="waves-effect waves-light">
  <a href="javascript:;" id="goqrcode"> <span class="icon icon-lg icon-qrcode"></span> </a>
  <a href="javascript:;" id="gotop"> <span class="icon icon-lg icon-chevron-up"></span></a>
</div>





<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://blog.weiyigeek.top/2019/9-9-130.html&title=ã€ŠTomcatåº”ç”¨å®¹å™¨å®‰è£…å’Œä½¿ç”¨ã€‹ â€” WeiyiGeek Blog&pic=https://blog.weiyigeek.top/img/avatar.jpg" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.weiyigeek.top/2019/9-9-130.html&title=ã€ŠTomcatåº”ç”¨å®¹å™¨å®‰è£…å’Œä½¿ç”¨ã€‹ â€” WeiyiGeek Blog&source=[TOC]" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.weiyigeek.top/2019/9-9-130.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€ŠTomcatåº”ç”¨å®¹å™¨å®‰è£…å’Œä½¿ç”¨ã€‹ â€” WeiyiGeek Blog&url=https://blog.weiyigeek.top/2019/9-9-130.html&via=https://blog.weiyigeek.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://blog.weiyigeek.top/2019/9-9-130.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>æ‰«ä¸€æ‰«ï¼Œåˆ†äº«åˆ°å¾®ä¿¡</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACHklEQVR42u3aQZLCMAwEwP3/p9kHbCXMWEAtdudEhWC7cxCy5J+f+HpcXPm3909e/fbFFwYGxtcykuGSz1djXt35+3zLxsDAOI2RD90u4v7J5M79jBgYGBhJEGzTvvvQiYGBgTFhrAXQNmXEwMDAmGxi7zFJyexf7MUxMDC+kJFX3T//+S39DQwMjK9iTLaaecK3FtCLETAwMLZmrLUwk6JbHhvzWPok0cTAwNiakRTU2k3s/WTJ4vJnMDAwzmG0m9h50T9PCvM1YGBg7Mdok7O1UDtPN5+8XAwMjGMYeVR+QStxXPPHwMA4h5EcgEg2pUkhrA24+a8wMDD2ZiQNxfzIRbsFnb+yy04sBgbGRox52WsS8fLjF8XRMQwMjE0Zr0ra2mBdB9O2B4uBgbEFo50sTxbzSJ/M+GTbjIGBcRhj7X6yiPl9DAyMMxn5RjQJqfWUSyEeAwPjNEZbOJu0BNrDGUWrAAMDY2tG3p5sU8C6LxGP8+SlYGBgbMrIy1t5ySwJ4msv5XI9GBgYBzAmR8SSlPF99zEwME5gtIWwthzWHstYKwtiYGDsyniUV0vKE7t2/OgfAwMDYwvGZxqckyZoQsXAwDiB0QbZNWq7Pa7fNwYGxgGMyYGtNrpP/gGiHiwGBgbGG4prScqIgYGBsRZw27CbLy6HYWBgnMNomwHz9sC8kTAqt2FgYHwVY1LLSgr67SLWNswYGBibMn4BBzH1G8wwzoEAAAAASUVORK5CYII=" alt="å¾®ä¿¡åˆ†äº«äºŒç»´ç ">
</div>


    
    <!-- main-js -->
<script type="text/javascript" src="/js/jquery/2.1.0-jquery.min.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/plugins/fastclick.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/plugins/ios-orientationchange-fix.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/jquery/3.5.2-jquery.fancybox.min.js?v=1.6.6"></script>
<!--  //cdn.bootcss.com/node-waves/0.7.4/waves.min.js -->
<script type="text/javascript" src="/js/node-waves/0.7.4-waves.min.js?v=1.6.6"></script> 

<script type="text/javascript" src="/js/method.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/blog.js?v=1.6.6"></script>

<!-- third-party -->
<script type="text/javascript" src="/js/plugins/local_search.js?v=1.6.6"></script>
<script type="text/javascript">
	var search_path = "search.xml";
	if (search_path.length === 0) { search_path = "search.xml";}
	var path = "/" + search_path;
	searchFunc(path, "local-search-input", "local-search-result");
</script> 

<script> (adsbygoogle = window.adsbygoogle || []).push({});</script>    


<!-- <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> --> 


  


<script>
  var _hmt = _hmt || [];
  (function() {
    // ç™¾åº¦ç»Ÿè®¡
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?53923c4b5560739bc0ed61e183be6acf";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();
</script>
 


<!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
            processEscapes: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.staticfile.org/mathjax/2.7.9/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
 
<script>
    (function() {
        var OriginTitile = document.title, titleTime;
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                document.title = 'WeiyiGeek Blog-å…³æ³¨äºç½‘ç»œå®‰å…¨_ç‰©è”ç½‘å®‰å…¨å¼€å‘_ç½‘ç»œå®‰å…¨è¿ç»´-å­¦ä¹ å¿ƒå¾—åˆ†äº«';
                clearTimeout(titleTime);
            } else {
                document.title = '(ã¤ã‚§âŠ‚)å’¦!åˆå¥½äº†!';
                titleTime = setTimeout(function() {
                    document.title = OriginTitile;
                },2000);
            }
        });
    })();
</script>
 

     <script type="text/javascript" src="/js/custom/copytips.js?v=1.6.6"></script> 
<script type="text/javascript">
// ç«™ç‚¹è¿è¡Œæ—¶é—´
var BootDate = new Date("2018/01/01 00:00:00");
function ShowRunTime(id) {
  var NowDate = new Date();
  var RunDateM = parseInt(NowDate - BootDate);
  var RunDays = Math.floor(RunDateM/(24*3600*1000));
  var RunHours = Math.floor(RunDateM%(24*3600*1000)/(3600*1000));
  var RunMinutes = Math.floor(RunDateM%(24*3600*1000)%(3600*1000)/(60*1000));
  var RunSeconds = Math.round(RunDateM%(24*3600*1000)%(3600*1000)%(60*1000)/1000);
  var RunTime = RunDays + "å¤©" + RunHours + "æ—¶" + RunMinutes + "åˆ†" + RunSeconds + "ç§’";
  document.getElementById(id).innerHTML = "ç½‘ç«™å·²åœ¨é£é›¨ä¸­å‹‰å‹‰å¼ºå¼ºè¿è¡Œäº†ã€" + RunTime + "ã€‘";
}
setInterval("ShowRunTime('SiteRunTime')", 1000);
</script>
</body>
</html>