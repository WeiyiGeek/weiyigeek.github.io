<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="content-language" content="zh-CN"/>
    <meta name="author" content="WeiyiGeek" />
    <meta name="msvalidate.01" content="5C552FB1D885E0E11D2957EC958C8018" />
    <meta name="shenma-site-verification" content="4c655e91c76be0a93c1b6954c666c9d6_1649049085"/>
    <meta name="bytedance-verification-code" content="lKs4FqwCHSJ3A/c5tT7X" />
    <meta name="sogou_site_verification" content="OC65iET6Bk" />
    
    <title>ğŸŒ FTPè¿œç¨‹æ–‡ä»¶ä¼ è¾“æœåŠ¡å®‰è£…ä¸é…ç½®|WeiyiGeek Blog|å”¯ä¸€æå®¢Geek-ITç½‘ç»œå®‰å…¨è¿ç»´å¼€å‘æŠ€æœ¯çŸ¥è¯†åˆ†äº«-åšå®¢ç«™ç‚¹</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    
    <meta name="keywords" content="connect">
    <meta name="Description" content="WeiyiGeek-å”¯ä¸€æå®¢åšå®¢ç«™ç‚¹,å…³æ³¨äºç½‘ç»œå®‰å…¨è¿ç»´,Webå®‰å…¨å¼€å‘,IOTç‰©è”ç½‘å®‰å…¨å¼€å‘,åº”ç”¨å¼€å‘,åˆ†äº«æŠ€æœ¯å­¦ä¹ çŸ¥è¯†ä¸å…¥å‘è§£å†³,æå‡ç½‘ç»œå®‰å…¨æŠ€æœ¯ä¸è‡ªèº«æŠ€æœ¯èƒ½åŠ›,ç«‹å¿—ç»´æŠ¤å¤§ä¼—ç½‘ç»œå®‰å…¨ä¸ºå·±ä»»,åšä¸€ä¸ªå¯¹å›½å®¶æœ‰ç”¨çš„äºº,ä¸ºå®ç°ä¸­åæ°‘æ—ä¼Ÿå¤§å¤å…´çš„ä¸­å›½æ¢¦ä¸æ‡ˆå¥‹æ–—">
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="/css/jquery/3.5.2-jquery.fancybox.min.css?v=1.6.6" />
    <link rel="stylesheet" href="/css/style.css?v=1.6.6">
    <!--  -->
     <script type="text/javascript" src="/js/custom/articlecost.js?v=1.6.6"></script> 
    <link rel="stylesheet" href="/css/third-party/gitalk.css?v=1.6.6"> 
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9134434519967436" crossorigin="anonymous"></script>    
    <script type="text/javascript">
        // Data Center
        var DC = {
          reward:	true,
          lv: JSON.parse('{"enable":false,"app_id":null,"app_key":null,"icon":true}'),
          v: JSON.parse('{"enable":false,"appid":null,"appkey":null,"notify":true,"verify":true,"placeholder":"give me some sugers plz...","avatar":"wavatar"}')
        };
    </script>
    <script type="text/javascript">window.lazyScripts=[];</script>
<meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="WeiyiGeek Blog" type="application/atom+xml">
</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="">
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap">
      
      <img src="/img/brand.jpg" class="brand-bg" alt="WeiyiGeek-backgroud">
      
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg" alt="WeiyiGeek-å¤´åƒ">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">WeiyiGeek</h5>
          <a href="mailto:master@weiyigeek.top" title="master@weiyigeek.top" class="mail">
            <span>m</span><span>a</span><span>s</span><span>t</span><span>e</span><span>r</span><span>@</span><span>w</span><span>e</span><span>i</span><span>y</span><span>i</span><span>g</span><span>e</span><span>e</span><span>k</span><span>.</span><span>t</span><span>o</span><span>p</span>
          </a>
        </hgroup>
        
        <ul class="menu-link">
          
              <li>
                <a href="https://weiyigeek.top/img/wechat-search.png" target="_blank">
                  <i class="icon icon-lg icon-wechat"></i>
                </a>
              </li>
            
              <li>
                <a href="https://github.com/weiyigeek" target="_blank">
                  <i class="icon icon-lg icon-github"></i>
                </a>
              </li>
            
              <li>
                <a href="https://t.me/WeiyiGeek" target="_blank">
                  <i class="icon icon-lg icon-telegram"></i>
                </a>
              </li>
            
              <li>
                <a href="https://twitter.com/WeiyiGeek" target="_blank">
                  <i class="icon icon-lg icon-twitter"></i>
                </a>
              </li>
            
              <li>
                <a href="https://weibo.com/615643678" target="_blank">
                  <i class="icon icon-lg icon-weibo"></i>
                </a>
              </li>
            
        </ul>
        
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                é¦–é¡µ
              </a>
            </li>
        
            <li class="">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                æ–‡ç« åˆ†ç±»
              </a>
            </li>
        
            <li class="">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                æ–‡ç« æ ‡ç­¾
              </a>
            </li>
        
            <li class="">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                æ–‡ç« å½’æ¡£
              </a>
            </li>
        
            <li class="">
              <a href="/2018/1-1-1.html"  >
                <i class="icon icon-lg icon-mortar-board"></i>
                å­¦ä¹ ä¹‹è·¯
              </a>
            </li>
        
            <li class="">
              <a href="/books"  >
                <i class="icon icon-lg icon-book"></i>
                å­¦ä¹ ä¹¦ç±
              </a>
            </li>
        
            <li class="">
              <a href="/about"  >
                <i class="icon icon-lg icon-user"></i>
                å…³äºä½œè€…
              </a>
            </li>
        
            <li class="">
              <a href="/links"  >
                <i class="icon icon-lg icon-link"></i>
                ç«™ç‚¹å¯¼èˆª
              </a>
            </li>
        
            <li class="">
              <a href="/img/share-wechat.jpg" target="_blank" >
                <i class="icon icon-lg icon-wechat"></i>
                å…¬ä¼—è´¦å·
              </a>
            </li>
        
            <li class="">
              <a href="https://space.bilibili.com/385802642" target="_blank" >
                <i class="icon icon-lg icon-youtube-play"></i>
                å“”å“©å“”å“©
              </a>
            </li>
        
            <li class="">
              <a href="https://github.com/weiyigeek" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="">
              <a href="https://twitter.com/WeiyiGeek" target="_blank" >
                <i class="icon icon-lg icon-twitter"></i>
                Twitter
              </a>
            </li>
        
            <li class="">
              <a href="https://weibo.com/615643678" target="_blank" >
                <i class="icon icon-lg icon-weibo"></i>
                Weibo
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row clearfix">
        <a href="javascript:;" class="header-icon pull-left waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">
            <span>FTPè¿œç¨‹æ–‡ä»¶ä¼ è¾“æœåŠ¡å®‰è£…ä¸é…ç½®</span>
            
        </div>

        
        <a href="javascript:;" id="site_search_btn" class="header-icon pull-right waves-effect waves-circle waves-light">
            <i class="icon icon-lg icon-search"></i>
        </a>
        

        
            <a href="/atom.xml" class="header-icon pull-right waves-effect waves-circle waves-light">
                <i class="icon icon-lg icon-rss"></i>
            </a>
        
    </div>
</header>
<header class="content-header post-header">
    <img src="/img/banner.jpg" class="header-bg" alt="æ–‡ç« å¤´éƒ¨èƒŒæ™¯">
    <div class="container fade-scale">
        <h1 class="title">FTPè¿œç¨‹æ–‡ä»¶ä¼ è¾“æœåŠ¡å®‰è£…ä¸é…ç½®</h1>
        <h5 class="subtitle">
            
                <time datetime="2019-10-04T02:30:30.000Z" itemprop="datePublished" class="page-time">
  2019-10-04
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/OperationTools/">OperationTools</a></li></ul>


            
        </h5>
        
    </div>
    

</header>

<div id="site_search">
    <div class="search-title clearfix">
        <span class="pull-left">
          <i class="icon icon-lg icon-search"></i>
        </span>
        <input type="text" id="local-search-input" name="q" results="0" placeholder="search my blog..." class="form-control pull-left"/>
        <a href="javascript:;" class="close pull-right waves-effect waves-circle waves-light">
          <i class="icon icon-lg icon-close"></i>
        </a>
    </div>
    <div id="local-search-result"></div>
</div>


<div class="container body-wrap">
  <article id="post-ç³»ç»Ÿè¿ç»´/Application/Connect/FTPè¿œç¨‹æ–‡ä»¶ä¼ è¾“æœåŠ¡å®‰è£…ä¸é…ç½®"
  class="post-article article-type-post" itemprop="blogPost">
    <div class="post-card">
        <h1 class="post-card-title">FTPè¿œç¨‹æ–‡ä»¶ä¼ è¾“æœåŠ¡å®‰è£…ä¸é…ç½®</h1>
        <div class="post-meta">
            <time class="post-time" title="2019-10-04 10:30:30" datetime="2019-10-04T02:30:30.000Z"  itemprop="datePublished">2019-10-04</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/OperationTools/">OperationTools</a></li></ul>



            

            


            
        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            
            <p>[TOC]</p>
<a id="more"></a>
<h2 id="0x00-å‰è¨€ç®€è¿°"><a href="#0x00-å‰è¨€ç®€è¿°" class="headerlink" title="0x00 å‰è¨€ç®€è¿°"></a>0x00 å‰è¨€ç®€è¿°</h2><p>æè¿°: FTPåªé€šè¿‡TCPè¿æ¥,æ²¡æœ‰ç”¨äºFTPçš„UDPç»„ä»¶.FTPä¸åŒäºå…¶ä»–æœåŠ¡çš„æ˜¯å®ƒä½¿ç”¨äº†ä¸¤ä¸ªç«¯å£, ä¸€ä¸ªæ•°æ®ç«¯å£å’Œä¸€ä¸ªå‘½ä»¤ç«¯å£(æˆ–ç§°ä¸ºæ§åˆ¶ç«¯å£)ã€‚é€šå¸¸21ç«¯å£æ˜¯å‘½ä»¤ç«¯å£ï¼Œ20ç«¯å£æ˜¯æ•°æ®ç«¯å£ã€‚å½“æ··å…¥<code>ä¸»åŠ¨(Active)/è¢«åŠ¨æ¨¡å¼(Passive)</code>çš„æ¦‚å¿µæ—¶ï¼Œæ•°æ®ç«¯å£å°±æœ‰å¯èƒ½ä¸æ˜¯20äº†ã€‚</p>
<p><br></p>
<h3 id="1-FTPä¸»åŠ¨æ¨¡å¼ï¼ˆActiveï¼‰"><a href="#1-FTPä¸»åŠ¨æ¨¡å¼ï¼ˆActiveï¼‰" class="headerlink" title="1.FTPä¸»åŠ¨æ¨¡å¼ï¼ˆActiveï¼‰"></a>1.FTPä¸»åŠ¨æ¨¡å¼ï¼ˆActiveï¼‰</h3><p>æè¿°: è¯¥æ¨¡å¼ä¸‹FTPå®¢æˆ·ç«¯ä»ä»»æ„çš„<code>éç‰¹æ®Šçš„ç«¯å£ï¼ˆN &gt; 1023ï¼‰</code> -&gt; è¿æ¥åˆ°<code>FTPæœåŠ¡å™¨çš„å‘½ä»¤21ç«¯å£</code>, ç„¶åå®¢æˆ·ç«¯åœ¨ <code>N+1ï¼ˆN+1 &gt;= 1024ï¼‰</code>ç«¯å£ç›‘å¬ï¼Œå¹¶ä¸”é€šè¿‡N+1ï¼ˆN+1 &gt;= 1024ï¼‰ç«¯å£å‘é€å‘½ä»¤ç»™FTPæœåŠ¡å™¨ -&gt; ç„¶å FTP æœåŠ¡å™¨ä¼šè¿”å›å¹¶é€šè¿‡20ç«¯å£è¿›è¡Œä¼ è¾“æ•°æ®ã€‚</p>
<p><strong>ç¤ºä¾‹:</strong> ä»¥æœåŠ¡å™¨ç«¯é˜²ç«å¢™ä¸ºç«‹è¶³ç‚¹ï¼Œè¦æ”¯æŒä¸»åŠ¨æ¨¡å¼FTPéœ€è¦æ‰“å¼€å¦‚ä¸‹äº¤äº’ä¸­ä½¿ç”¨åˆ°çš„ç«¯å£ï¼š</p>
<ul>
<li>1.FTPæœåŠ¡å™¨å‘½ä»¤ï¼ˆ21ï¼‰ç«¯å£æ¥å—å®¢æˆ·ç«¯ä»»æ„ç«¯å£ï¼ˆå®¢æˆ·ç«¯åˆå§‹è¿æ¥ï¼‰</li>
<li>2.FTPæœåŠ¡å™¨å‘½ä»¤ï¼ˆ21ï¼‰ç«¯å£åˆ°å®¢æˆ·ç«¯ç«¯å£ï¼ˆ&gt;1023ï¼‰ï¼ˆæœåŠ¡å™¨å“åº”å®¢æˆ·ç«¯å‘½ä»¤ï¼‰</li>
<li>3.FTPæœåŠ¡å™¨æ•°æ®ï¼ˆ20ï¼‰ç«¯å£åˆ°å®¢æˆ·ç«¯ç«¯å£ï¼ˆ&gt;1023ï¼‰ï¼ˆæœåŠ¡å™¨åˆå§‹åŒ–æ•°æ®è¿æ¥åˆ°å®¢æˆ·ç«¯æ•°æ®ç«¯å£ï¼‰</li>
<li>4.FTPæœåŠ¡å™¨æ•°æ®ï¼ˆ20ï¼‰ç«¯å£æ¥å—å®¢æˆ·ç«¯ç«¯å£ï¼ˆ&gt;1023ï¼‰ï¼ˆå®¢æˆ·ç«¯å‘é€ACKåŒ…åˆ°æœåŠ¡å™¨çš„æ•°æ®ç«¯å£ï¼‰</li>
</ul>
<p>è¯´æ˜: åœ¨ç¬¬1æ­¥ä¸­å®¢æˆ·ç«¯çš„å‘½ä»¤ç«¯å£ä¸FTPæœåŠ¡å™¨çš„å‘½ä»¤ç«¯å£å»ºç«‹è¿æ¥ï¼Œå¹¶å‘é€å‘½ä»¤â€œPORT 1027â€ã€‚ç„¶ååœ¨ç¬¬2æ­¥ä¸­ï¼ŒFTPæœåŠ¡å™¨ç»™å®¢æˆ·ç«¯çš„å‘½ä»¤ç«¯å£è¿”å›ä¸€ä¸ªâ€ACKâ€ã€‚åœ¨ç¬¬3æ­¥ä¸­ï¼ŒFTPæœåŠ¡å™¨å‘èµ·ä¸€ä¸ªä»å®ƒè‡ªå·±çš„æ•°æ®ç«¯å£ï¼ˆ20ï¼‰åˆ°å®¢æˆ·ç«¯å…ˆå‰æŒ‡å®šçš„æ•°æ®ç«¯å£ï¼ˆ1027ï¼‰çš„è¿æ¥ï¼Œæœ€åå®¢æˆ·ç«¯åœ¨ç¬¬4æ­¥ä¸­ç»™æœåŠ¡å™¨ç«¯è¿”å›ä¸€ä¸ªâ€ACKâ€ã€‚<br><figure class="image-box">
                <a rel=FTPè¿œç¨‹æ–‡ä»¶ä¼ è¾“æœåŠ¡å®‰è£…ä¸é…ç½® href="https://img.weiyigeek.top/2021/5/20210718141957.png" target="_blank" title="WeiyiGeek.ä¸»åŠ¨æ¨¡å¼" data-fancybox="images"><img src="https://img.weiyigeek.top/2021/5/20210718141957.png" alt="WeiyiGeek.ä¸»åŠ¨æ¨¡å¼" title="" class=""></a>
                <p>WeiyiGeek.ä¸»åŠ¨æ¨¡å¼</p>
            </figure></p>
<p>Tips : åœ¨è¿æ¥FTPæœåŠ¡å™¨æ—¶å¦‚æœæ²¡æœ‰æŒ‡å®šæ¨¡å¼å®ƒé»˜è®¤ä½¿ç”¨çš„æ˜¯ä¸»åŠ¨æ¨¡å¼ã€‚</p>
<p>Tips : ä¸»åŠ¨æ–¹å¼FTPçš„ä¸»è¦é—®é¢˜å®é™…ä¸Šåœ¨äºå®¢æˆ·ç«¯ã€‚FTPçš„å®¢æˆ·ç«¯å¹¶æ²¡æœ‰å®é™…å»ºç«‹ä¸€ä¸ªåˆ°æœåŠ¡å™¨æ•°æ®ç«¯å£çš„è¿æ¥ï¼Œå®ƒåªæ˜¯ç®€å•çš„å‘Šè¯‰æœåŠ¡å™¨è‡ªå·±ç›‘å¬çš„ç«¯å£å·ï¼ŒæœåŠ¡å™¨å†å›æ¥è¿æ¥å®¢æˆ·ç«¯è¿™ä¸ªæŒ‡å®šçš„ç«¯å£ã€‚å¯¹äºå®¢æˆ·ç«¯çš„é˜²ç«å¢™æ¥è¯´ï¼Œè¿™æ˜¯ä»å¤–éƒ¨ç³»ç»Ÿå»ºç«‹åˆ°å†…éƒ¨å®¢æˆ·ç«¯çš„è¿æ¥ï¼Œè¿™æ˜¯é€šå¸¸ä¼šè¢«é˜»å¡çš„ã€‚</p>
<p><br></p>
<h3 id="2-FTPè¢«åŠ¨æ¨¡å¼-Passive"><a href="#2-FTPè¢«åŠ¨æ¨¡å¼-Passive" class="headerlink" title="2.FTPè¢«åŠ¨æ¨¡å¼ (Passive)"></a>2.FTPè¢«åŠ¨æ¨¡å¼ (Passive)</h3><p>æè¿°: åœ¨è¢«åŠ¨æ–¹å¼FTPä¸­å‘½ä»¤è¿æ¥å’Œæ•°æ®è¿æ¥éƒ½ç”±å®¢æˆ·ç«¯æ§åˆ¶ï¼Œè¯¥æ¨¡å¼æ˜¯è§£å†³äº†æœåŠ¡å™¨å‘èµ·åˆ°å®¢æˆ·çš„è¿æ¥çš„é—®é¢˜, å³è¢«åŠ¨æ–¹å¼æˆ–è€…å«åšPASVï¼Œå½“å®¢æˆ·ç«¯é€šçŸ¥æœåŠ¡å™¨å®ƒå¤„äºè¢«åŠ¨æ¨¡å¼æ—¶æ‰å¯ç”¨ã€‚</p>
<p>å½“å¼€å¯ä¸€ä¸ªFTPè¿æ¥æ—¶ï¼Œå®¢æˆ·ç«¯æ‰“å¼€ä¸¤ä¸ªä»»æ„çš„éç‰¹æƒæœ¬åœ°ç«¯å£ï¼ˆN &gt; 1024å’Œ N+1ï¼‰ï¼Œç¬¬ä¸€ä¸ªç«¯å£è¿æ¥æœåŠ¡å™¨çš„21ç«¯å£ï¼Œä½†ä¸ä¸»åŠ¨æ–¹å¼çš„FTPä¸åŒï¼Œå®¢æˆ·ç«¯ä¸ä¼šæäº¤PORTå‘½ä»¤å¹¶å…è®¸æœåŠ¡å™¨æ¥å›è¿å®ƒçš„æ•°æ®ç«¯å£è€Œæ˜¯æäº¤PASVå‘½ä»¤ã€‚è¿™æ ·åšçš„ç»“æœæ˜¯æœåŠ¡å™¨ä¼šå¼€å¯ä¸€ä¸ªä»»æ„çš„éç‰¹æƒç«¯å£ï¼ˆP &gt; 1024ï¼‰å¹¶å‘é€PORTå‘½ä»¤ç»™å®¢æˆ·ç«¯, ç„¶åå®¢æˆ·ç«¯å‘èµ·ä»æœ¬åœ°ç«¯å£N+1åˆ°æœåŠ¡å™¨çš„ç«¯å£Pçš„è¿æ¥ç”¨æ¥ä¼ é€æ•°æ®ã€‚</p>
<p><strong>ç¤ºä¾‹:</strong> å¯¹äºæœåŠ¡å™¨ç«¯çš„é˜²ç«å¢™æ¥è¯´ï¼Œå¿…é¡»å…è®¸ä¸‹é¢çš„é€šè®¯æ‰èƒ½æ”¯æŒè¢«åŠ¨æ–¹å¼çš„FTP:</p>
<ul>
<li>1.FTPæœåŠ¡å™¨å‘½ä»¤ï¼ˆ21ï¼‰ç«¯å£æ¥å—å®¢æˆ·ç«¯ä»»æ„ç«¯å£ï¼ˆå®¢æˆ·ç«¯åˆå§‹è¿æ¥ PASVï¼‰ ä¾‹å¦‚ 1026</li>
<li>2.FTPæœåŠ¡å™¨å‘½ä»¤ï¼ˆ21ï¼‰ç«¯å£åˆ°å®¢æˆ·ç«¯ç«¯å£ï¼ˆ&gt;1023ï¼‰ï¼ˆæœåŠ¡å™¨å“åº”å®¢æˆ·ç«¯å‘½ä»¤ï¼‰</li>
<li>3.FTPæœåŠ¡å™¨æ•°æ®ç«¯å£ï¼ˆ&gt;1023ï¼‰æ¥å—å®¢æˆ·ç«¯ç«¯å£ï¼ˆ&gt;1023ï¼‰ï¼ˆå®¢æˆ·ç«¯åˆå§‹åŒ–æ•°æ®è¿æ¥åˆ°æœåŠ¡å™¨æŒ‡å®šçš„ä»»æ„ç«¯å£ï¼‰ä¾‹å¦‚ 1027 -&gt; 2024</li>
<li>4.FTPæœåŠ¡å™¨æ•°æ®ç«¯å£ï¼ˆ&gt;1023ï¼‰åˆ°å®¢æˆ·ç«¯ç«¯å£ï¼ˆ&gt;1023ï¼‰ï¼ˆæœåŠ¡å™¨å‘é€ACKå“åº”å’Œæ•°æ®åˆ°å®¢æˆ·ç«¯çš„æ•°æ®ç«¯å£ï¼‰ ä¾‹å¦‚ 2024 -&gt; 1027</li>
</ul>
<p>è¯´æ˜: åœ¨ç¬¬1æ­¥ä¸­ï¼Œå®¢æˆ·ç«¯çš„å‘½ä»¤ç«¯å£ä¸æœåŠ¡å™¨çš„å‘½ä»¤ç«¯å£å»ºç«‹è¿æ¥ï¼Œå¹¶å‘é€å‘½ä»¤â€œPASVâ€ã€‚ç„¶ååœ¨ç¬¬2æ­¥ä¸­ï¼ŒæœåŠ¡å™¨è¿”å›å‘½ä»¤â€PORT 2024â€ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯ï¼ˆæœåŠ¡å™¨ï¼‰ç”¨å“ªä¸ªç«¯å£ä¾¦å¬æ•°æ®è¿æ¥ã€‚åœ¨ç¬¬3æ­¥ä¸­ï¼Œå®¢æˆ·ç«¯åˆå§‹åŒ–ä¸€ä¸ªä»è‡ªå·±çš„æ•°æ®ç«¯å£åˆ°æœåŠ¡å™¨ç«¯æŒ‡å®šçš„æ•°æ®ç«¯å£çš„æ•°æ®è¿æ¥ã€‚æœ€åæœåŠ¡å™¨åœ¨ç¬¬4 æ­¥ä¸­ç»™å®¢æˆ·ç«¯çš„æ•°æ®ç«¯å£è¿”å›ä¸€ä¸ªâ€ACKâ€å“åº”ã€‚</p>
<figure class="image-box">
                <a rel=FTPè¿œç¨‹æ–‡ä»¶ä¼ è¾“æœåŠ¡å®‰è£…ä¸é…ç½® href="https://img.weiyigeek.top/2021/5/20210718142754.png" target="_blank" title="WeiyiGeek.è¢«åŠ¨æ¨¡å¼" data-fancybox="images"><img src="https://img.weiyigeek.top/2021/5/20210718142754.png" alt="WeiyiGeek.è¢«åŠ¨æ¨¡å¼" title="" class=""></a>
                <p>WeiyiGeek.è¢«åŠ¨æ¨¡å¼</p>
            </figure>
<p>Tips : è¯¥æ¨¡å¼è§£å†³äº†å®¢æˆ·ç«¯çš„è®¸å¤šé—®é¢˜ä½†åŒæ—¶ç»™æœåŠ¡å™¨ç«¯å¸¦æ¥äº†æ›´å¤šçš„é—®é¢˜ï¼Œä¾‹å¦‚éœ€è¦å…è®¸ä»ä»»æ„è¿œç¨‹ç»ˆç«¯åˆ°æœåŠ¡å™¨é«˜ä½ç«¯å£çš„è¿æ¥ã€‚å¹¸è¿çš„æ˜¯è®¸å¤šFTPå®ˆæŠ¤ç¨‹åºï¼ŒåŒ…æ‹¬æµè¡Œçš„WU-FTPDå…è®¸ç®¡ç†å‘˜æŒ‡å®šFTPæœåŠ¡å™¨ä½¿ç”¨çš„ç«¯å£èŒƒå›´ã€‚å…¶æ¬¡æ˜¯å®¢æˆ·ç«¯æœ‰çš„æ”¯æŒè¢«åŠ¨æ¨¡å¼ï¼Œæœ‰çš„ä¸æ”¯æŒè¢«åŠ¨æ¨¡å¼ã€‚</p>
<p><br></p>
<p><strong>æ€»ç»“:</strong></p>
<p>Tips ï¼šæœ‰è¯»è€…æŒ‡å‡ºå½“<code>NAT(Network Address Translation)</code>è®¾å¤‡ä»¥ä¸»åŠ¨æ¨¡å¼è®¿é—®FTPæœåŠ¡å™¨æ—¶ï¼Œç”±äºNATè®¾å¤‡ä¸ä¼šèªæ˜çš„å˜æ›´FTPåŒ…ä¸­çš„IPåœ°å€ï¼Œä»è€Œå¯¼è‡´æ— æ³•è®¿é—®æœåŠ¡å™¨ã€‚</p>
<p><br></p>
<p>ç®€å•FTPå·¥ä½œè¿æ¥æ–¹å¼:</p>
<ul>
<li>ä¸»åŠ¨FTPï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å‘½ä»¤è¿æ¥ï¼šå®¢æˆ·ç«¯ &gt;1023ç«¯å£ -&gt; æœåŠ¡å™¨ 21ç«¯å£</span><br><span class="line">æ•°æ®è¿æ¥ï¼šå®¢æˆ·ç«¯ &gt;1024ç«¯å£ &lt;- æœåŠ¡å™¨ 20ç«¯å£</span><br></pre></td></tr></table></figure></li>
<li>è¢«åŠ¨FTPï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å‘½ä»¤è¿æ¥ï¼šå®¢æˆ·ç«¯ &gt;1023ç«¯å£ -&gt; æœåŠ¡å™¨ 21ç«¯å£</span><br><span class="line">æ•°æ®è¿æ¥ï¼šå®¢æˆ·ç«¯ &gt;1024ç«¯å£ -&gt; æœåŠ¡å™¨ &gt; nnnn ç«¯å£</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><br></p>
<p>ä¸»åŠ¨ä¸è¢«åŠ¨FTPä¼˜ç¼ºç‚¹çš„ç®€è¦æ€»ç»“ï¼š</p>
<ul>
<li><ol>
<li>ä¸»åŠ¨FTPå¯¹FTPæœåŠ¡å™¨çš„ç®¡ç†æœ‰åˆ©ï¼Œä½†å¯¹å®¢æˆ·ç«¯çš„ç®¡ç†ä¸åˆ©ã€‚å› ä¸ºFTPæœåŠ¡å™¨ä¼å›¾ä¸å®¢æˆ·ç«¯çš„é«˜ä½éšæœºç«¯å£å»ºç«‹è¿æ¥ï¼Œè€Œè¿™ä¸ªç«¯å£å¾ˆæœ‰å¯èƒ½è¢«å®¢æˆ·ç«¯çš„é˜²ç«å¢™é˜»å¡æ‰ã€‚</li>
</ol>
</li>
<li><ol start="2">
<li>è¢«åŠ¨FTPå¯¹FTPå®¢æˆ·ç«¯çš„ç®¡ç†æœ‰åˆ©ï¼Œä½†å¯¹æœåŠ¡å™¨ç«¯çš„ç®¡ç†ä¸åˆ©ã€‚å› ä¸ºå®¢æˆ·ç«¯è¦ä¸æœåŠ¡å™¨ç«¯å»ºç«‹ä¸¤ä¸ªè¿æ¥ï¼Œå…¶ä¸­ä¸€ä¸ªè¿åˆ°ä¸€ä¸ªé«˜ä½éšæœºç«¯å£ï¼Œè€Œè¿™ä¸ªç«¯å£å¾ˆæœ‰å¯èƒ½è¢«æœåŠ¡å™¨ç«¯çš„é˜²ç«å¢™é˜»å¡æ‰ã€‚</li>
</ol>
</li>
</ul>
<p>æŠ˜ä¸­æ–¹å¼: æ—¢ç„¶FTPæœåŠ¡å™¨çš„ç®¡ç†å‘˜éœ€è¦ä»–ä»¬çš„æœåŠ¡å™¨æœ‰æœ€å¤šçš„å®¢æˆ·è¿æ¥ï¼Œé‚£ä¹ˆå¿…é¡»å¾—æ”¯æŒè¢«åŠ¨FTPã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸ºFTPæœåŠ¡å™¨æŒ‡å®šä¸€ä¸ªæœ‰é™çš„ç«¯å£èŒƒå›´æ¥å‡å°æœåŠ¡å™¨é«˜ä½ç«¯å£çš„æš´éœ², è¿™æ ·ä¸åœ¨è¿™ä¸ªèŒƒå›´çš„ä»»ä½•ç«¯å£ä¼šè¢«æœåŠ¡å™¨çš„é˜²ç«å¢™é˜»å¡ï¼Œè™½ç„¶è¿™æ²¡æœ‰æ¶ˆé™¤æ‰€æœ‰é’ˆå¯¹æœåŠ¡å™¨çš„å±é™©ï¼Œä½†å®ƒå¤§å¤§å‡å°‘äº†å±é™©ã€‚</p>
<hr>
<h2 id="0x01-vsftpd-æœåŠ¡"><a href="#0x01-vsftpd-æœåŠ¡" class="headerlink" title="0x01 vsftpd æœåŠ¡"></a>0x01 vsftpd æœåŠ¡</h2><h3 id="1-å®‰è£…è¯´æ˜"><a href="#1-å®‰è£…è¯´æ˜" class="headerlink" title="1.å®‰è£…è¯´æ˜"></a>1.å®‰è£…è¯´æ˜</h3><p><strong>å®‰è£…ç¯å¢ƒ:</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">* CentOS7</span><br><span class="line">* Vsftpd</span><br></pre></td></tr></table></figure><br><br></p>
<h4 id="Centos7éƒ¨ç½²vsftpd"><a href="#Centos7éƒ¨ç½²vsftpd" class="headerlink" title="Centos7éƒ¨ç½²vsftpd"></a>Centos7éƒ¨ç½²vsftpd</h4><ol>
<li>é…ç½®é˜²ç«å¢™å¼€å¯FTPæœåŠ¡å™¨éœ€è¦çš„ç«¯å£CentOS 7.0é»˜è®¤ä½¿ç”¨çš„æ˜¯firewallä½œä¸ºé˜²ç«å¢™è¿™é‡Œæ”¹ä¸ºiptablesé˜²ç«å¢™(ä¹Ÿå¯ä»¥ä¸æ”¹)ã€‚</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">1) å…³é—­firewallï¼š</span><br><span class="line">systemctl stop firewalld.service <span class="comment">#åœæ­¢firewall</span></span><br><span class="line">systemctl <span class="built_in">disable</span> firewalld.service <span class="comment">#ç¦æ­¢firewallå¼€æœºå¯åŠ¨</span></span><br><span class="line"></span><br><span class="line">2) å®‰è£…iptablesé˜²ç«å¢™</span><br><span class="line">yum install iptables-services <span class="comment">#å®‰è£…</span></span><br><span class="line">vi /etc/sysconfig/iptables <span class="comment">#ç¼–è¾‘é˜²ç«å¢™é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="comment"># Firewall configuration written by system-config-firewall</span></span><br><span class="line"><span class="comment"># Manual customization of this file is not recommended.</span></span><br><span class="line">*filter</span><br><span class="line">:INPUT ACCEPT [0:0]</span><br><span class="line">:FORWARD ACCEPT [0:0]</span><br><span class="line">:OUTPUT ACCEPT [0:0]</span><br><span class="line">-A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT</span><br><span class="line">-A INPUT -p icmp -j ACCEPT</span><br><span class="line">-A INPUT -i lo -j ACCEPT</span><br><span class="line">-A INPUT -m state --state NEW -m tcp -p tcp --dport 22 -j ACCEPT</span><br><span class="line">-A INPUT -m state --state NEW -m tcp -p tcp --dport 21 -j ACCEPT</span><br><span class="line">-A INPUT -m state --state NEW -m tcp -p tcp --dport 10060:10090 -j ACCEPT</span><br><span class="line">-A INPUT -j REJECT --reject-with icmp-host-prohibited</span><br><span class="line">-A FORWARD -j REJECT --reject-with icmp-host-prohibited</span><br><span class="line">COMMIT</span><br><span class="line">:wq! <span class="comment">#ä¿å­˜é€€å‡º</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># firewalld-cmdç®€å•æ˜äº†</span></span><br><span class="line"><span class="comment"># [root@192 ROOT]# firewall-cmd --add-service=ftp --permanent</span></span><br><span class="line"><span class="comment"># success</span></span><br><span class="line"><span class="comment"># [root@192 ROOT]# firewall-cmd --reload</span></span><br><span class="line"><span class="comment"># success</span></span><br><span class="line"></span><br><span class="line">3) å¯åŠ¨iptablesæœåŠ¡å’Œè‡ªå¯</span><br><span class="line">systemctl restart iptables.service <span class="comment">#æœ€åé‡å¯é˜²ç«å¢™ä½¿é…ç½®ç”Ÿæ•ˆ</span></span><br><span class="line">systemctl <span class="built_in">enable</span> iptables.service <span class="comment">#è®¾ç½®é˜²ç«å¢™å¼€æœºå¯åŠ¨</span></span><br></pre></td></tr></table></figure>
<p>è¯´æ˜ï¼š21ç«¯å£æ˜¯ftpæœåŠ¡ç«¯å£ï¼›10060åˆ°10090æ˜¯Vsftpdè¢«åŠ¨æ¨¡å¼éœ€è¦çš„ç«¯å£ï¼Œå¯è‡ªå®šä¹‰ä¸€æ®µå¤§äº1024çš„tcpç«¯å£ã€‚</p>
<ol start="2">
<li>å…³é—­SELINUX<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/selinux/config</span><br><span class="line"><span class="comment">#SELINUX=enforcing #æ³¨é‡Šæ‰</span></span><br><span class="line"><span class="comment">#SELINUXTYPE=targeted #æ³¨é‡Šæ‰</span></span><br><span class="line">SELINUX=disabled <span class="comment">#å¢åŠ </span></span><br><span class="line"></span><br><span class="line">:wq! <span class="comment">#ä¿å­˜é€€å‡º</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æˆ–è€…</span></span><br><span class="line">setenforce 0 <span class="comment">#ä½¿é…ç½®ç«‹å³ç”Ÿæ•ˆï¼ˆä¸´æ—¶ï¼‰</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<ol start="3">
<li><p>å®‰è£…vsftpd</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">yum install -y vsftpd <span class="comment">#å®‰è£…vsftpd</span></span><br><span class="line">yum install -y psmisc net-tools systemd-devel libdb-devel perl-DBI  <span class="comment">#å®‰è£…vsftpdè™šæ‹Ÿç”¨æˆ·é…ç½®ä¾èµ–åŒ…</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å¯åŠ¨å’Œè‡ªå¯</span></span><br><span class="line">systemctl start vsftpd.service <span class="comment">#å¯åŠ¨</span></span><br><span class="line">systemctl <span class="built_in">enable</span> vsftpd.service <span class="comment">#è®¾ç½®vsftpdå¼€æœºå¯åŠ¨</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>é…ç½®vsftpæœåŠ¡å™¨</p>
<blockquote>
<p>cp /etc/vsftpd/vsftpd.conf /etc/vsftpd/vsftpd.conf-bak #å¤‡ä»½é»˜è®¤é…ç½®æ–‡ä»¶</p>
</blockquote>
</li>
</ol>
<p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œè®¾ç½®:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">sed -i <span class="string">"s/anonymous_enable=YES/anonymous_enable=NO/g"</span> <span class="string">'/etc/vsftpd/vsftpd.conf'</span></span><br><span class="line">sed -i <span class="string">"s/#anon_upload_enable=YES/anon_upload_enable=NO/g"</span> <span class="string">'/etc/vsftpd/vsftpd.conf'</span></span><br><span class="line">sed -i <span class="string">"s/#anon_mkdir_write_enable=YES/anon_mkdir_write_enable=NO/g"</span> <span class="string">'/etc/vsftpd/vsftpd.conf'</span></span><br><span class="line">sed -i <span class="string">"s/#chown_uploads=YES/chown_uploads=NO/g"</span> <span class="string">'/etc/vsftpd/vsftpd.conf'</span></span><br><span class="line">sed -i <span class="string">"s/#async_abor_enable=YES/async_abor_enable=YES/g"</span> <span class="string">'/etc/vsftpd/vsftpd.conf'</span></span><br><span class="line">sed -i <span class="string">"s/#ascii_upload_enable=YES/ascii_upload_enable=YES/g"</span> <span class="string">'/etc/vsftpd/vsftpd.conf'</span></span><br><span class="line">sed -i <span class="string">"s/#ascii_download_enable=YES/ascii_download_enable=YES/g"</span> <span class="string">'/etc/vsftpd/vsftpd.conf'</span></span><br><span class="line">sed -i <span class="string">"s/#ftpd_banner=Welcome to blah FTP service./ftpd_banner=Welcome to FTP service.Thanks/g"</span> <span class="string">'/etc/vsftpd/vsftpd.conf'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¸‹é¢æ˜¯å…³é”®ç‚¹guest_username</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"use_localtime=YES\nlisten_port=21\nchroot_local_user=YES\nidle_session_timeout=300</span></span><br><span class="line"><span class="string">\ndata_connection_timeout=1\nguest_enable=YES\nguest_username=vsftpd</span></span><br><span class="line"><span class="string">\nuser_config_dir=/etc/vsftpd/vconf\nvirtual_use_local_privs=YES</span></span><br><span class="line"><span class="string">\npasv_min_port=10000\npasv_max_port=10100</span></span><br><span class="line"><span class="string">\naccept_timeout=5\nconnect_timeout=1"</span> &gt;&gt; /etc/vsftpd/vsftpd.conf</span><br></pre></td></tr></table></figure></p>
<ol start="5">
<li>å»ºç«‹è™šæ‹Ÿç”¨æˆ·åå•æ–‡ä»¶</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">touch /etc/vsftpd/virtusers</span><br><span class="line"><span class="comment">#ç¼–è¾‘è™šæ‹Ÿç”¨æˆ·åå•æ–‡ä»¶ï¼šï¼ˆç¬¬ä¸€è¡Œè´¦å·ï¼Œç¬¬äºŒè¡Œå¯†ç ï¼Œæ³¨æ„ï¼šä¸èƒ½ä½¿ç”¨rootåšç”¨æˆ·åï¼Œç³»ç»Ÿä¿ç•™ï¼‰</span></span><br><span class="line">vi /etc/vsftpd/virtusers</span><br><span class="line">web1</span><br><span class="line">123456</span><br><span class="line">web2</span><br><span class="line">123456</span><br><span class="line">web3</span><br><span class="line">123456</span><br><span class="line">:wq! <span class="comment">#ä¿å­˜é€€å‡º</span></span><br><span class="line"><span class="comment">#æˆ–è€…</span></span><br><span class="line"><span class="built_in">echo</span> web &gt; /etc/vsftpd/virtusers</span><br><span class="line"><span class="built_in">echo</span> 123456 &gt; /etc/vsftpd/virtusers</span><br></pre></td></tr></table></figure>
<ol start="6">
<li><p>ç”Ÿæˆè™šæ‹Ÿç”¨æˆ·æ•°æ®æ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">db_load -T -t <span class="built_in">hash</span> -f /etc/vsftpd/virtusers /etc/vsftpd/virtusers.db</span><br><span class="line">chmod 600 /etc/vsftpd/virtusers.db <span class="comment">#è®¾å®šPAMéªŒè¯æ–‡ä»¶ï¼Œå¹¶æŒ‡å®šå¯¹è™šæ‹Ÿç”¨æˆ·æ•°æ®åº“æ–‡ä»¶è¿›è¡Œè¯»å–</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>åœ¨/etc/pam.d/vsftpdçš„æ–‡ä»¶å¤´éƒ¨åŠ å…¥ä»¥ä¸‹ä¿¡æ¯ï¼ˆ<code>åœ¨åé¢åŠ å…¥æ— æ•ˆ</code>ï¼‰<br>ä¿®æ”¹å‰å…ˆå¤‡ä»½ cp /etc/pam.d/vsftpd /etc/pam.d/vsftpdbak</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/pam.d/vsftpd</span><br><span class="line">auth sufficient /lib64/security/pam_userdb.so db=/etc/vsftpd/virtusers</span><br><span class="line">account sufficient /lib64/security/pam_userdb.so db=/etc/vsftpd/virtusers</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼šå¦‚æœç³»ç»Ÿä¸º32ä½ï¼Œä¸Šé¢æ”¹ä¸ºlibï¼Œå¦åˆ™é…ç½®å¤±è´¥</p>
</li>
<li><p>æ–°å»ºç³»ç»Ÿç”¨æˆ·vsftpdï¼Œç”¨æˆ·ç›®å½•ä¸º/home/wwwroot, ç”¨æˆ·ç™»å½•ç»ˆç«¯è®¾ä¸º/bin/false(å³ä½¿ä¹‹ä¸èƒ½ç™»å½•ç³»ç»Ÿ)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">useradd vsftpd -d /home/wwwroot -s /bin/<span class="literal">false</span></span><br><span class="line">chown vsftpd:vsftpd /home/wwwroot -R</span><br><span class="line">chown vsftpd:nginx /home/wwwroot -R <span class="comment">#å¦‚æœè™šæ‹Ÿç”¨æˆ·çš„å®¿ä¸»ç”¨æˆ·ä¸ºwwwï¼Œéœ€è¦è¿™æ ·è®¾ç½®ã€‚ï¼ˆNginxæœåŠ¡ï¼‰</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>å»ºç«‹è™šæ‹Ÿç”¨æˆ·ä¸ªäººVsftpçš„é…ç½®æ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mkdir /etc/vsftpd/vconf &amp;&amp; <span class="built_in">cd</span> /etc/vsftpd/vconf</span><br><span class="line">touch web1 web2 web3 <span class="comment">#è¿™é‡Œåˆ›å»ºä¸‰ä¸ªè™šæ‹Ÿç”¨æˆ·é…ç½®æ–‡ä»¶</span></span><br><span class="line">mkdir -p /home/wwwroot/web1/http/</span><br><span class="line"></span><br><span class="line">vi web1 <span class="comment">#ç¼–è¾‘ç”¨æˆ·web1é…ç½®æ–‡ä»¶ï¼Œå…¶ä»–çš„è·Ÿè¿™ä¸ªé…ç½®æ–‡ä»¶ç±»ä¼¼</span></span><br><span class="line">local_root=/home/wwwroot/web1/http/</span><br><span class="line">write_enable=YES</span><br><span class="line">anon_world_readable_only=NO</span><br><span class="line">anon_upload_enable=YES</span><br><span class="line">anon_mkdir_write_enable=YES</span><br><span class="line">anon_other_write_enable=YES</span><br><span class="line">allow_writeable_chroot=YES</span><br></pre></td></tr></table></figure>
</li>
<li><p>æœ€åé‡å¯vsftpdæœåŠ¡å™¨</p>
<blockquote>
<p>systemctl restart vsftpd.service</p>
</blockquote>
</li>
</ol>
<p><strong>å¤‡æ³¨ï¼š</strong></p>
<ul>
<li>guest_username=vsftpd #æŒ‡å®šè™šæ‹Ÿç”¨æˆ·çš„å®¿ä¸»ç”¨æˆ·ï¼ˆå°±æ˜¯æˆ‘ä»¬å‰é¢æ–°å»ºçš„ç”¨æˆ·ï¼‰</li>
<li>guest_username=www #å¦‚æœftpç›®å½•æ˜¯æŒ‡å‘ç½‘ç«™æ ¹ç›®å½•ï¼Œç”¨æ¥ä¸Šä¼ ç½‘ç«™ç¨‹åºï¼Œå¯ä»¥æŒ‡å®šè™šæ‹Ÿç”¨æˆ·çš„å®¿ä¸»ç”¨æˆ·ä¸ºnginxè¿è¡Œè´¦æˆ·wwwï¼Œå¯ä»¥é¿å…å¾ˆå¤šæƒé™è®¾ç½®é—®é¢˜</li>
<li>è‡³æ­¤ï¼ŒCentOS 7.0å®‰è£…é…ç½®VsftpæœåŠ¡å™¨é…ç½®å®Œæˆã€‚</li>
</ul>
<p><br></p>
<h4 id="Ubuntuéƒ¨ç½²vsftpd"><a href="#Ubuntuéƒ¨ç½²vsftpd" class="headerlink" title="Ubuntuéƒ¨ç½²vsftpd"></a>Ubuntuéƒ¨ç½²vsftpd</h4><p>æœ¬æ–‡åœ¨Ubuntu Server 14.04 amd64ç³»ç»Ÿæµ‹è¯•</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å®‰è£…ftp</span></span><br><span class="line">sudo apt-get install vsftpd</span><br><span class="line"><span class="comment">#é…ç½®vsftpd.conf</span></span><br><span class="line">sudo vi /etc/vsftpd.conf</span><br><span class="line">sudo gedit /etc/vsftpd.conf</span><br><span class="line"></span><br><span class="line"><span class="comment">#ç¦æ­¢åŒ¿åè®¿é—®</span></span><br><span class="line">anonymous_enable=NO</span><br><span class="line"><span class="comment">#æ¥å—æœ¬åœ°ç”¨æˆ·</span></span><br><span class="line">local_enable=YES</span><br><span class="line"><span class="comment">#å…è®¸ä¸Šä¼ </span></span><br><span class="line">write_enable=YES</span><br><span class="line"><span class="comment">#ç”¨æˆ·åªèƒ½è®¿é—®é™åˆ¶çš„ç›®å½•</span></span><br><span class="line">chroot_local_user=YES</span><br><span class="line"><span class="comment">#è®¾ç½®å›ºå®šç›®å½•ï¼Œåœ¨ç»“å°¾æ·»åŠ ã€‚å¦‚æœä¸æ·»åŠ è¿™ä¸€è¡Œï¼Œå„ç”¨æˆ·å¯¹åº”è‡ªå·±çš„ç›®å½•ï¼Œå½“ç„¶è¿™ä¸ªæ–‡ä»¶å¤¹è‡ªå·±å»º</span></span><br><span class="line">local_root=/home/ftp</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼špam_service_name=vsftpd,ä¸»è¦æ˜¯è¿›è¡Œè®¤è¯çš„</p>
<p>æ·»åŠ ftpç™»å½•ç”¨æˆ·<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">sudo useradd -d /home/ftp -M ftpuser</span><br><span class="line">sudo passwd ftpuser</span><br><span class="line"><span class="comment">#è°ƒæ•´æ–‡ä»¶å¤¹æƒé™ï¼Œè¿™ä¸ªæ˜¯é¿å…â€œ500 OOPS: vsftpd: refusing to run with writable root inside chroot()â€</span></span><br><span class="line">sudo chmod a-w /home/ftp   <span class="comment">#æ‰€æœ‰ç”¨æˆ·å–æ¶ˆå†™å…¥æƒé™ï¼ˆå®‰å…¨ï¼‰</span></span><br><span class="line">sudo mkdir /home/ftp/data</span><br><span class="line"></span><br><span class="line"><span class="comment">#è¿™æ—¶å€™ç›´æ¥ç”¨useraddçš„å¸å·ç™»å½•ftpä¼š530 login incorrect</span></span><br><span class="line">sudo nano /etc/pam.d/vsftpd</span><br><span class="line"><span class="comment">#auth    required pam_shells.so #æ³¨é‡Šæ‰ï¼Œè²Œä¼¼ä¸æ˜¯å¿…é¡»çš„</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#é‡å¯vsftpd</span></span><br><span class="line">sudo service vsftpd restart</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h4 id="å®¹å™¨éƒ¨ç½²-vsftpd"><a href="#å®¹å™¨éƒ¨ç½²-vsftpd" class="headerlink" title="å®¹å™¨éƒ¨ç½² vsftpd"></a>å®¹å™¨éƒ¨ç½² vsftpd</h4><p>ä½¿ç”¨K8Så¿«é€Ÿæ­å»ºvsftpdæœåŠ¡ï¼Œä¸€é”®éƒ¨ç½²æµ‹è¯•ç¯å¢ƒï¼Œæ­¤å¤„ä½¿ç”¨çš„æ˜¯[fauria/vsftpd][<a href="https://hub.docker.com/r/fauria/vsftpd]é•œåƒåŸºäºCentos" target="_blank" rel="noopener">https://hub.docker.com/r/fauria/vsftpd]é•œåƒåŸºäºCentos</a> 7çš„vsftpd Dockeré•œåƒï¼Œæ”¯æŒè¢«åŠ¨æ¨¡å¼å’Œè™šæ‹Ÿç”¨æˆ·ã€‚</p>
<p>k8s å¿«é€Ÿéƒ¨ç½²èµ„æºæ¸…å•:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line">tee deploy-vsftpd.yaml &lt;&lt;<span class="string">'EOF'</span></span><br><span class="line"><span class="comment"># ftp-pvc.yaml</span></span><br><span class="line"><span class="comment"># storageClassName å­˜å‚¨æŒ‰è‡ªå·±ç¯å¢ƒä¿®æ”¹ï¼Œæ­¤æ¬¡ä½¿ç”¨ nfs-localï¼Œä½ å¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹</span></span><br><span class="line"><span class="comment"># kubectl get storageclasses.storage.k8s.io </span></span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: PersistentVolumeClaim</span><br><span class="line">metadata:</span><br><span class="line">  name: vsftpd-pvc</span><br><span class="line">  namespace: default</span><br><span class="line">spec:</span><br><span class="line">  storageClassName: nfs-local</span><br><span class="line">  accessModes:</span><br><span class="line">    - ReadWriteMany</span><br><span class="line">  resources:</span><br><span class="line">    requests:</span><br><span class="line">      storage: 10Gi</span><br><span class="line">---</span><br><span class="line">apiVersion: apps/v1</span><br><span class="line">kind: Deployment</span><br><span class="line">metadata:</span><br><span class="line">  name: vsftpd</span><br><span class="line">  namespace: default</span><br><span class="line">spec:</span><br><span class="line">  replicas: 1</span><br><span class="line">  selector:</span><br><span class="line">    matchLabels:</span><br><span class="line">      app: vsftpd</span><br><span class="line">  template:</span><br><span class="line">    metadata:</span><br><span class="line">      labels:</span><br><span class="line">        app: vsftpd</span><br><span class="line">    spec:</span><br><span class="line">      <span class="comment"># å°†åˆ›å»ºçš„çš„PVCç»‘å®šåˆ°ftp-pv-storage</span></span><br><span class="line">      volumes:</span><br><span class="line">      - name: ftp-pv-storage</span><br><span class="line">        persistentVolumeClaim:</span><br><span class="line">          claimName: vsftpd-pvc</span><br><span class="line">      containers:</span><br><span class="line">      - name: ftp-container</span><br><span class="line">        image: fauria/vsftpd</span><br><span class="line">        <span class="comment"># é™¤21ç«¯å£å¤– æ­¤å¤„çš„ç«¯å£è¦ä¸ä¸‹æ–¹è®¾ç½®çš„è¢«åŠ¨æ¨¡å¼æœ€å¤§ç«¯å£å’Œæœ€å°ç«¯å£åŒ¹é…ï¼Œä¾‹å¦‚è®¾ç½®éšæœºç«¯å£èŒƒå›´ä¸º 31110-31115ã€‚å› ä¸ºæ­¤å¤„å®¹å™¨å†…çš„éšæœºç«¯å£è¦ä¸æ˜ å°„åçš„ä¸€è‡´ï¼Œæ‰€ä»¥è®¾ç½®ä¸º30000ä»¥ä¸Šï¼Œåœ¨k8sè®¾ç½®ç«¯å£èŒƒå›´å†…</span></span><br><span class="line">        ports:</span><br><span class="line">        - containerPort: 31110</span><br><span class="line">          protocol: TCP</span><br><span class="line">        - containerPort: 31111</span><br><span class="line">          protocol: TCP</span><br><span class="line">        - containerPort: 31112</span><br><span class="line">          protocol: TCP</span><br><span class="line">        - containerPort: 31113</span><br><span class="line">          protocol: TCP</span><br><span class="line">        - containerPort: 31114</span><br><span class="line">          protocol: TCP</span><br><span class="line">        - containerPort: 31115</span><br><span class="line">          protocol: TCP</span><br><span class="line">        - containerPort: 21</span><br><span class="line">          protocol: TCP</span><br><span class="line">        volumeMounts:</span><br><span class="line">        - mountPath: <span class="string">"/home/vsftpd"</span></span><br><span class="line">          name: ftp-pv-storage</span><br><span class="line">        env:</span><br><span class="line">        - name: FTP_USER</span><br><span class="line">          value: <span class="string">"weiyigeek"</span></span><br><span class="line">        - name: FTP_PASS</span><br><span class="line">          value: <span class="string">"password"</span></span><br><span class="line">          <span class="comment"># éšæœºæœ€å¤§ç«¯å£ä¸æœ€å°ç«¯å£ï¼Œè¦ä¸ä¸Šé¢è®¾ç½®çš„åŒ¹é…</span></span><br><span class="line">        - name: PASV_MIN_PORT</span><br><span class="line">          value: <span class="string">"31110"</span></span><br><span class="line">        - name: PASV_MAX_PORT</span><br><span class="line">          value: <span class="string">"31115"</span></span><br><span class="line">        - name: PASV_ENABLE</span><br><span class="line">          value: <span class="string">"yes"</span></span><br><span class="line">          <span class="comment"># æœåŠ¡å™¨ä¼ å›çš„IPåœ°å€ï¼Œä¸€èˆ¬ä¸ºå¯¹å¤–å…¬ç½‘åœ°å€ï¼Œå³å®¢æˆ·ç«¯è¿æ¥ftpæ‰€ç”¨çš„åœ°å€ã€‚</span></span><br><span class="line">        - name: PASV_ADDRESS</span><br><span class="line">          value: <span class="string">"10.20.176.215"</span></span><br><span class="line">        <span class="comment">#- name: PASV_ADDRESS</span></span><br><span class="line">        <span class="comment">#  valueFrom:</span></span><br><span class="line">        <span class="comment">#    fieldRef:</span></span><br><span class="line">        <span class="comment">#      fieldPath: status.hostIP</span></span><br><span class="line">---</span><br><span class="line"><span class="comment"># ftp-service.yaml</span></span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Service</span><br><span class="line">metadata:</span><br><span class="line">  name: vsftpd-service</span><br><span class="line">  labels:</span><br><span class="line">    app: vsftpd-service</span><br><span class="line">  namespace: default</span><br><span class="line">spec:</span><br><span class="line">  <span class="built_in">type</span>: NodePort</span><br><span class="line">  <span class="comment"># é™¤21ç«¯å£æ˜ å°„å¤–ï¼Œå…¶ä»–ç«¯å£éœ€ä¿æŒä¸€è‡´</span></span><br><span class="line">  ports:</span><br><span class="line">    - name: ftp-21</span><br><span class="line">      nodePort: 30021</span><br><span class="line">      port: 21</span><br><span class="line">    - name: ftp-31110</span><br><span class="line">      nodePort: 31110</span><br><span class="line">      port: 31110</span><br><span class="line">    - name: ftp-31111</span><br><span class="line">      nodePort: 31111</span><br><span class="line">      port: 31111</span><br><span class="line">    - name: ftp-31112</span><br><span class="line">      nodePort: 31112</span><br><span class="line">      port: 31112</span><br><span class="line">    - name: ftp-31113</span><br><span class="line">      nodePort: 31113</span><br><span class="line">      port: 31113</span><br><span class="line">    - name: ftp-31114</span><br><span class="line">      nodePort: 31114</span><br><span class="line">      port: 31114</span><br><span class="line">    - name: ftp-31115</span><br><span class="line">      nodePort: 31115</span><br><span class="line">      port: 31115</span><br><span class="line">  selector:</span><br><span class="line">    app: vsftpd</span><br><span class="line">EOF</span><br><span class="line">kubectl apply -f deploy-vsftpd.yaml</span><br><span class="line">kubectl get deploy,svc,pod,pvc</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h3 id="2-é…ç½®æ–‡ä»¶"><a href="#2-é…ç½®æ–‡ä»¶" class="headerlink" title="2.é…ç½®æ–‡ä»¶"></a>2.é…ç½®æ–‡ä»¶</h3><ol>
<li>vsftpdçš„é…ç½®æ–‡ä»¶è¯´æ˜ï¼š</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">* vsftpd.ftpusersï¼šä½äº/etcç›®å½•ä¸‹ã€‚å®ƒæŒ‡å®šäº†å“ªäº›ç”¨æˆ·è´¦æˆ·ä¸èƒ½è®¿é—®FTPæœåŠ¡å™¨ï¼Œä¾‹å¦‚rootç­‰ã€‚</span><br><span class="line">* vsftpd.user_listï¼šä½äº/etcç›®å½•ä¸‹ã€‚è¯¥æ–‡ä»¶é‡Œçš„ç”¨æˆ·è´¦æˆ·åœ¨é»˜è®¤æƒ…å†µä¸‹ä¹Ÿä¸èƒ½è®¿é—®FTPæœåŠ¡å™¨ï¼Œä»…å½“vsftpd.confé…ç½®æ–‡ä»¶é‡Œå¯ç”¨userlist_enable=NOé€‰é¡¹æ—¶æ‰å…è®¸è®¿é—®ã€‚ </span><br><span class="line">* vsftpd.confï¼šä½äº/etc/vsftpdç›®å½•ä¸‹ã€‚æ¥è‡ªå®šä¹‰ç”¨æˆ·ç™»å½•æ§åˆ¶ã€ç”¨æˆ·æƒé™æ§åˆ¶ã€è¶…æ—¶è®¾ç½®ã€æœåŠ¡å™¨åŠŸèƒ½é€‰é¡¹ã€æœåŠ¡å™¨æ€§èƒ½é€‰é¡¹ã€æœåŠ¡å™¨å“åº”æ¶ˆæ¯ç­‰FTPæœåŠ¡å™¨çš„é…ç½®ã€‚</span><br></pre></td></tr></table></figure>
<ul>
<li>(1)ç”¨æˆ·ç™»å½•æ§åˆ¶ <ul>
<li>anonymous_enable=YESï¼Œå…è®¸åŒ¿åç”¨æˆ·ç™»å½•ã€‚ </li>
<li>no_anon_password=YESï¼ŒåŒ¿åç”¨æˆ·ç™»å½•æ—¶ä¸éœ€è¦è¾“å…¥å¯†ç ã€‚ </li>
<li>local_enable=YESï¼Œå…è®¸æœ¬åœ°ç”¨æˆ·ç™»å½•ã€‚ </li>
<li>deny_email_enable=YESï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ä¿å­˜æŸäº›åŒ¿åç”µå­é‚®ä»¶çš„é»‘åå•ï¼Œä»¥é˜²æ­¢è¿™äº›äººä½¿ç”¨Dosæ”»å‡»ã€‚ </li>
<li>banned_email_file=/etc/vsftpd.banned_emailsï¼Œå½“å¯ç”¨deny_email_enableåŠŸèƒ½æ—¶ï¼Œæ‰€éœ€çš„ç”µå­é‚®ä»¶é»‘åå•ä¿å­˜è·¯å¾„(é»˜è®¤ä¸º/etc/vsftpd.banned_emails)ã€‚ </li>
</ul>
</li>
</ul>
<ul>
<li>(2)ç”¨æˆ·æƒé™æ§åˆ¶ <ul>
<li>write_enable=YESï¼Œå¼€å¯å…¨å±€ä¸Šä¼ æƒé™ã€‚ </li>
<li>local_umask=022ï¼Œæœ¬åœ°ç”¨æˆ·çš„ä¸Šä¼ æ–‡ä»¶çš„umaskè®¾ä¸º022(ç³»ç»Ÿé»˜è®¤æ˜¯077ï¼Œä¸€èˆ¬éƒ½å¯ä»¥æ”¹ä¸º022)ã€‚anon_upload_enable=YESï¼Œå…è®¸åŒ¿åç”¨æˆ·å…·æœ‰ä¸Šä¼ æƒé™ï¼Œå¾ˆæ˜æ˜¾å¿…é¡»å¯ç”¨write_enable=YESï¼Œæ‰å¯ä»¥ä½¿ç”¨æ­¤é¡¹ã€‚åŒæ—¶æˆ‘ä»¬è¿˜å¿…é¡»å»ºç«‹ä¸€ä¸ªå…è®¸ftpç”¨æˆ·å¯ä»¥è¯»å†™çš„ç›®å½•(å‰é¢è¯´è¿‡ï¼Œftpæ˜¯åŒ¿åç”¨æˆ·çš„æ˜ å°„ç”¨æˆ·è´¦å·)ã€‚ </li>
<li>anon_mkdir_write_enable=YESï¼Œå…è®¸åŒ¿åç”¨æˆ·æœ‰åˆ›å»ºç›®å½•çš„æƒåˆ©ã€‚ </li>
<li>chown_uploads=YESï¼Œå¯ç”¨æ­¤é¡¹ï¼ŒåŒ¿åä¸Šä¼ æ–‡ä»¶çš„å±ä¸»ç”¨æˆ·å°†æ”¹ä¸ºåˆ«çš„ç”¨æˆ·è´¦æˆ·ï¼Œæ³¨æ„ï¼Œè¿™é‡Œå»ºè®®ä¸è¦æŒ‡å®šrootè´¦å·ä¸ºåŒ¿åä¸Šä¼ æ–‡ä»¶çš„å±ä¸»ç”¨æˆ·ï¼ </li>
<li>chown_username=whoeverï¼Œå½“å¯ç”¨chown_uploads=YESæ—¶ï¼Œæ‰€æŒ‡å®šçš„å±ä¸»ç”¨æˆ·è´¦å·ï¼Œæ­¤å¤„çš„whoeverè‡ªç„¶è¦ç”¨åˆé€‚çš„ç”¨æˆ·è´¦å·æ¥ä»£æ›¿ã€‚ </li>
<li>chroot_list_enable=YESï¼Œå¯ä»¥ç”¨ä¸€ä¸ªåˆ—è¡¨é™å®šå“ªäº›æœ¬åœ°ç”¨æˆ·åªèƒ½åœ¨è‡ªå·±ç›®å½•ä¸‹æ´»åŠ¨ï¼Œå¦‚æœchroot_local_user=YESï¼Œé‚£ä¹ˆè¿™ä¸ªåˆ—è¡¨é‡ŒæŒ‡å®šçš„ç”¨æˆ·æ˜¯ä¸å—é™åˆ¶çš„ã€‚ </li>
<li>chroot_list_file=/etc/vsftpd.chroot_listï¼Œå¦‚æœchroot_local_user=YESï¼Œåˆ™æŒ‡å®šè¯¥åˆ—è¡¨(chroot_local_user)çš„ä¿å­˜è·¯å¾„(é»˜è®¤æ˜¯/etc/vsftpd.chroot_list)ã€‚ </li>
<li>nopriv_user=ftpsecureï¼ŒæŒ‡å®šä¸€ä¸ªå®‰å…¨ç”¨æˆ·è´¦å·ï¼Œè®©FTPæœåŠ¡å™¨ç”¨ä½œå®Œå…¨éš”ç¦»å’Œæ²¡æœ‰ç‰¹æƒçš„ç‹¬ç«‹ç”¨æˆ·ã€‚è¿™æ˜¯vsftpdç³»ç»Ÿæ¨èé€‰é¡¹ã€‚ </li>
<li>async_abor_enable=YESï¼Œå¼ºçƒˆå»ºè®®ä¸è¦å¯ç”¨è¯¥é€‰é¡¹ï¼Œå¦åˆ™å°†å¯èƒ½å¯¼è‡´å‡ºé”™ï¼ </li>
<li>ascii_upload_enable=YESï¼›</li>
<li>ascii_download_enable=YESï¼Œé»˜è®¤æƒ…å†µä¸‹æœåŠ¡å™¨ä¼šå‡è£…æ¥å—ASCâ…¡æ¨¡å¼è¯·æ±‚ä½†å®é™…ä¸Šæ˜¯å¿½ç•¥è¿™æ ·çš„è¯·æ±‚ï¼Œå¯ç”¨ä¸Šè¿°çš„ä¸¤ä¸ªé€‰é¡¹å¯ä»¥è®©æœåŠ¡å™¨çœŸæ­£å®ç°ASCâ…¡æ¨¡å¼çš„ä¼ è¾“ã€‚ </li>
</ul>
</li>
</ul>
<p>æ³¨æ„ï¼šå¯ç”¨ascii_download_enableé€‰é¡¹ä¼šè®©æ¶æ„è¿œç¨‹ç”¨æˆ·ä»¬åœ¨ASCâ…¡æ¨¡å¼ä¸‹ç”¨â€œSIZE/big/fileâ€è¿™æ ·çš„æŒ‡ä»¤å¤§é‡æ¶ˆè€—FTPæœåŠ¡å™¨çš„I/Oèµ„æºã€‚<br>è¿™äº›ASCâ…¡æ¨¡å¼çš„è®¾ç½®é€‰é¡¹åˆ†æˆä¸Šä¼ å’Œä¸‹è½½ä¸¤ä¸ªï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å…è®¸ASCâ…¡æ¨¡å¼çš„ä¸Šä¼ (å¯ä»¥é˜²æ­¢ä¸Šä¼ è„šæœ¬ç­‰æ¶æ„æ–‡ä»¶è€Œå¯¼è‡´å´©æºƒ)ï¼Œè€Œä¸ä¼šé­å—æ‹’ç»æœåŠ¡æ”»å‡»çš„å±é™©ã€‚ </p>
<ul>
<li><p>(3)ç”¨æˆ·è¿æ¥å’Œè¶…æ—¶é€‰é¡¹ </p>
<ul>
<li>idle_session_timeout=600ï¼Œå¯ä»¥è®¾å®šé»˜è®¤çš„ç©ºé—²è¶…æ—¶æ—¶é—´ï¼Œç”¨æˆ·è¶…è¿‡è¿™æ®µæ—¶é—´ä¸åŠ¨ä½œå°†è¢«æœåŠ¡å™¨è¸¢å‡ºã€‚ </li>
<li>data_connection_timeout=120ï¼Œè®¾å®šé»˜è®¤çš„æ•°æ®è¿æ¥è¶…æ—¶æ—¶é—´ã€‚ </li>
</ul>
</li>
<li><p>(4)æœåŠ¡å™¨æ—¥å¿—å’Œæ¬¢è¿ä¿¡æ¯</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">dirmessage_enable=YESï¼Œå…è®¸ä¸ºç›®å½•é…ç½®æ˜¾ç¤ºä¿¡æ¯ï¼Œæ˜¾ç¤ºæ¯ä¸ªç›®å½•ä¸‹é¢çš„message_fileæ–‡ä»¶ftpd_banner=Welcome to blah FTP serviceï¼Œå¯ä»¥è‡ªå®šä¹‰FTPç”¨æˆ·ç™»å½•åˆ°æœåŠ¡å™¨æ‰€çœ‹åˆ°çš„æ¬¢è¿ä¿¡æ¯ã€‚ </span><br><span class="line">xferlog_enable=YESï¼Œå¯ç”¨è®°å½•ä¸Šä¼ /ä¸‹è½½æ´»åŠ¨æ—¥å¿—åŠŸèƒ½ã€‚ </span><br><span class="line">xferlog_file=/var/<span class="built_in">log</span>/vsftpd.logï¼Œå¯ä»¥è‡ªå®šä¹‰æ—¥å¿—æ–‡ä»¶çš„ä¿å­˜è·¯å¾„å’Œæ–‡ä»¶åï¼Œé»˜è®¤æ˜¯/var/<span class="built_in">log</span>/vsftpd.logã€‚ </span><br><span class="line">anonymous_enable=YES å…è®¸åŒ¿åç™»å½•</span><br><span class="line">local_enable=YES å…è®¸æœ¬åœ°ç”¨æˆ·ç™»å½• </span><br><span class="line">write_enable=YES å¼€æ”¾æœ¬åœ°ç”¨æˆ·å†™æƒé™ </span><br><span class="line">local_umask=022 è®¾ç½®æœ¬åœ°ç”¨æˆ·ç”Ÿæˆæ–‡ä»¶çš„æ©ç ä¸º022 </span><br><span class="line"><span class="comment">#anon_upload_enable=YES æ­¤é¡¹è®¾ç½®å…è®¸åŒ¿åç”¨æˆ·ä¸Šä¼ æ–‡ä»¶ </span></span><br><span class="line"><span class="comment">#anon_mkdir_write_enable=YES å¼€å¯åŒ¿åç”¨æˆ·çš„å†™å’Œåˆ›å»ºç›®å½•çš„æƒé™ </span></span><br><span class="line">dirmessage_enable=YES å½“åˆ‡æ¢åˆ°ç›®å½•æ—¶ï¼Œæ˜¾ç¤ºè¯¥ç›®å½•ä¸‹çš„.messageéšè—æ–‡ä»¶çš„å†…å®¹ </span><br><span class="line">xferlog_enable=YES æ¿€æ´»ä¸Šä¼ å’Œä¸‹è½½æ—¥å¿— </span><br><span class="line">connect_from_port_20=YES å¯ç”¨FTPæ•°æ®ç«¯å£çš„è¿æ¥è¯·æ±‚ </span><br><span class="line"><span class="comment">#chown_uploads=YES æ˜¯å¦å…·æœ‰ä¸Šä¼ æƒé™. ç”¨æˆ·ç”±chown_usernameå‚æ•°æŒ‡å®šã€‚ </span></span><br><span class="line"><span class="comment">#chown_username=whoever æŒ‡å®šæ‹¥æœ‰ä¸Šä¼ æ–‡ä»¶æƒé™çš„ç”¨æˆ·ã€‚æ­¤å‚æ•°ä¸chown_uploadsè”ç”¨ã€‚ </span></span><br><span class="line"><span class="comment">#xferlog_file=/var/log/vsftpd.log </span></span><br><span class="line">xferlog_std_format=YES ä½¿ç”¨æ ‡å‡†çš„ftpd xferlogæ—¥å¿—æ ¼å¼ </span><br><span class="line"><span class="comment">#idle_session_timeout=600 æ­¤è®¾ç½®å°†åœ¨ç”¨æˆ·ä¼šè¯ç©ºé—²10åˆ†é’Ÿåè¢«ä¸­æ–­ </span></span><br><span class="line"><span class="comment">#data_connection_timeout=120 å°†åœ¨æ•°æ®è¿æ¥ç©ºé—²2åˆ†é’Ÿåè¢«ä¸­æ–­ </span></span><br><span class="line"><span class="comment">#ascii_upload_enable=YES å¯ç”¨ä¸Šä¼ çš„ASCIIä¼ è¾“æ–¹å¼ </span></span><br><span class="line"><span class="comment">#ascii_download_enable=YES å¯ç”¨ä¸‹è½½çš„ASCIIä¼ è¾“æ–¹å¼ </span></span><br><span class="line"><span class="comment">#ftpd_banner=Welcome to blah FTP service è®¾ç½®ç”¨æˆ·è¿æ¥æœåŠ¡å™¨åæ˜¾ç¤ºæ¶ˆæ¯ </span></span><br><span class="line"><span class="comment">#deny_email_enable=NO æ­¤å‚æ•°é»˜è®¤å€¼ä¸ºNOã€‚å½“å€¼ä¸ºYESæ—¶ï¼Œæ‹’ç»ä½¿ç”¨banned_email_fileå‚æ•°æŒ‡å®šæ–‡ä»¶ä¸­æ‰€åˆ—å‡ºçš„e-mailåœ°å€ç”¨æˆ·ç™»å½•ã€‚ </span></span><br><span class="line"><span class="comment">#banned_email_file=/etc/vd.banned_emails æŒ‡å®šåŒ…å«æ‹’ç»çš„e-mailåœ°å€çš„æ–‡ä»¶. </span></span><br><span class="line"><span class="comment">#chroot_list_enable=YES è®¾ç½®æœ¬åœ°ç”¨æˆ·ç™»å½•åä¸èƒ½åˆ‡æ¢åˆ°è‡ªå®¶ç›®å½•ä»¥å¤–çš„åˆ«çš„ç›®å½• </span></span><br><span class="line"><span class="comment">#chroot_list_file=/etc/vsftpd.chroot_list </span></span><br><span class="line"><span class="comment">#ls_recurse_enable=YES </span></span><br><span class="line">pam_service_name=vsftpd è®¾ç½®PAMè®¤è¯æœåŠ¡çš„é…ç½®æ–‡ä»¶åç§°ï¼Œè¯¥æ–‡ä»¶å­˜æ”¾åœ¨/etc/pam.d/ </span><br><span class="line">userlist_enable=YES æ­¤é¡¹é…ç½®/etc/vsftpd.user_listä¸­æŒ‡å®šçš„ç”¨æˆ·ä¹Ÿä¸èƒ½è®¿é—®æœåŠ¡å™¨ï¼Œè‹¥æ·»åŠ userlist_deny=No,åˆ™ä»…ä»…/etc/vsftpd.user_listæ–‡ä»¶ä¸­çš„ç”¨æˆ·å¯ä»¥è®¿é—®ï¼Œå…¶ä»–ç”¨æˆ·éƒ½ä¸å¯ä»¥è®¿é—®æœåŠ¡å™¨ã€‚å¦‚è¿‡userlist_enable=NO,userlist_deny=YES,åˆ™æŒ‡å®šä½¿æ–‡ä»¶/etc/vsftpd.user_listä¸­æŒ‡å®šçš„ç”¨æˆ·ä¸å¯ä»¥è®¿é—®æœåŠ¡å™¨ï¼Œå…¶ä»–æœ¬åœ°ç”¨æˆ·å¯ä»¥è®¿é—®æœåŠ¡å™¨ã€‚ </span><br><span class="line">listen=YES æŒ‡æ˜VSFTPDä»¥ç‹¬ç«‹è¿è¡Œæ–¹å¼å¯åŠ¨ </span><br><span class="line">tcp_wrappers=YES åœ¨VSFTPDä¸­ä½¿ç”¨TCP_Wrappersè¿œç¨‹è®¿é—®æ§åˆ¶æœºåˆ¶ï¼Œé»˜è®¤å€¼ä¸ºYES</span><br></pre></td></tr></table></figure>
<p><br></p>
<h3 id="3-å®‰å…¨é…ç½®"><a href="#3-å®‰å…¨é…ç½®" class="headerlink" title="3.å®‰å…¨é…ç½®"></a>3.å®‰å…¨é…ç½®</h3><ul>
<li>vsftpdé…ç½®æ–‡ä»¶:/etc/vsftpd/vsftpd.conf</li>
<li>vsftpdé»˜è®¤åŒ¿åç”¨æˆ·ä¸Šä¼ ç›®å½•:/var/ftp/pub<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ftpçš„å¯†ç ä¸ºç©ºï¼Œanonymousçš„å¯†ç ä¸ºç©ºæˆ–è€…guest</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>å®‰å…¨é…ç½®å¿…é¡»é€‰é¡¹:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ä¸å…è®¸åŒ¿åè®¿é—®ç™»å½•çš„ä»¥åŠæƒé™çš„ç®¡æ§(åŒ¿åç”¨æˆ·çš„æ–‡ä»¶å¤¹å¿…é¡»æ˜¯777æƒé™)))</span></span><br><span class="line">anonymous_enable=NO</span><br><span class="line">anon_world_readable_only=NO</span><br><span class="line">anon_upload_enable=NO</span><br><span class="line">anon_mkdir_write_enable=NO</span><br><span class="line">anon_other_write_enable=NO</span><br></pre></td></tr></table></figure></p>
<p>æœ¬åœ°ç”¨æˆ·ç™»é™†ftp<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#æ¥å—æœ¬åœ°ç”¨æˆ·</span><br><span class="line">local_enable&#x3D;YES</span><br><span class="line">#å…è®¸ä¸Šä¼ </span><br><span class="line">write_enable&#x3D;YES</span><br><span class="line">#ç”¨æˆ·åªèƒ½è®¿é—®é™åˆ¶çš„ç›®å½•</span><br><span class="line">chroot_local_user&#x3D;YES</span><br><span class="line">#è®¾ç½®å›ºå®šç›®å½•åœ¨ç»“å°¾æ·»åŠ ã€‚å¦‚æœä¸æ·»åŠ è¿™ä¸€è¡Œå„ç”¨æˆ·å¯¹åº”è‡ªå·±çš„ç›®å½•ï¼Œå½“ç„¶è¿™ä¸ªæ–‡ä»¶å¤¹è‡ªå·±å»º</span><br><span class="line">local_root&#x3D;&#x2F;home&#x2F;ftp</span><br></pre></td></tr></table></figure></p>
<p>ç”±äºæœ¬åœ°ç”¨æˆ·ç™»é™†ftpä¼šå‡ºç°ä¿¡æ¯æ³„éœ²çš„é—®é¢˜ï¼Œæœ¬åœ°ç”¨æˆ·ä¸æ­¢å¯ä»¥è®¿é—®ftpç«™ç‚¹çš„å†…å®¹ï¼Œè¿˜å¯ä»¥è®¿é—®ftpæœåŠ¡å™¨ä¸Šçš„å…¶ä»–ç›®å½•ï¼Œè§£å†³åŠæ³•å°±æ˜¯ç”¨è™šæ‹Ÿç”¨æˆ·ã€<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åˆ›å»ºFTPæ ¹ç›®å½•åŠè™šæ‹Ÿç”¨æˆ·æ˜ å°„çš„ç³»ç»Ÿç”¨æˆ·</span></span><br><span class="line">useradd -d /home/vftpuser -s /sbin/nologin vftpuser</span><br><span class="line"><span class="comment">#ä¸ºä¿è¯å…¶ä»–ç”¨æˆ·å¯ä»¥è®¿é—®ï¼Œç»™äºˆrwxr-xr-xæƒé™ï¼š</span></span><br><span class="line">chmod 755 /home/vftpuser</span><br><span class="line"><span class="comment">#å»ºç«‹è™šæ‹ŸFTPç”¨æˆ·æ•°æ®åº“æ–‡ä»¶ã€‚</span></span><br><span class="line">db_load -T -t <span class="built_in">hash</span> -f vuser_login.txt vuser_login.db</span><br><span class="line"><span class="comment">#æ‰¾åˆ°è®¤è¯æ–‡ä»¶çš„è·¯å¾„</span></span><br><span class="line">Find / -name pam_userdb.so</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä»¥ä¸‹è¿™äº›æ˜¯å…³äºvsftpdè™šæ‹Ÿç”¨æˆ·æ”¯æŒçš„é‡è¦é…ç½®é¡¹ï¼Œ</span></span><br><span class="line"><span class="comment">#é»˜è®¤vsftpd.confä¸­ä¸åŒ…å«è¿™äº›è®¾å®šé¡¹ç›®ï¼Œéœ€è¦è‡ªå·±æ‰‹åŠ¨æ·»åŠ </span></span><br><span class="line">guest_enable=YES   <span class="comment">#è®¾å®šå¯ç”¨è™šæ‹Ÿç”¨æˆ·åŠŸèƒ½</span></span><br><span class="line">guest_username=vsftpd <span class="comment">#æŒ‡å®šè™šæ‹Ÿç”¨æˆ·çš„å®¿ä¸»ç”¨æˆ·</span></span><br><span class="line">user_config_dir=/etc/vsftpd/vuser_conf <span class="comment">#è®¾å®šè™šæ‹Ÿç”¨æˆ·ä¸ªäººvsftpçš„CentOS FTPæœåŠ¡æ–‡ä»¶å­˜æ”¾è·¯å¾„</span></span><br><span class="line"><span class="comment">#ä¸ºè™šæ‹Ÿç”¨æˆ·è®¾ç½®ä¸åŒçš„æƒé™</span></span><br><span class="line"><span class="comment">#æŒ‡å®šç”¨æˆ·ç‹¬ç«‹çš„æƒé™é…ç½®æ–‡ä»¶å­˜æ”¾çš„ç›®å½•ï¼švim /etc/vsftpd/vsftpd.conf </span></span><br><span class="line">user_config_dir=/etc/vsftpd/vsftpd_user_conf</span><br><span class="line"><span class="comment">#åˆ‡æ¢è¿›å…¥åˆ°è¯¥ç›®å½•ä¸­ï¼šcd  /etc/vsftpd/vsftpd_user_conf</span></span><br><span class="line"><span class="comment">#æ¯”å¦‚è®¾ç½®webé»˜è®¤æ˜¯å¯è¯»æƒé™</span></span><br><span class="line">anon_mkdir_write_enable=YES   <span class="comment">#å…è®¸ç”¨æˆ·åˆ›å»ºæ–‡ä»¶</span></span><br><span class="line">anon_world_readable_only=YES       <span class="comment">#åªè¯»</span></span><br><span class="line">anon_upload_enable=YES   <span class="comment">#å…è®¸wangç”¨æˆ·ä¸Šä¼ æ–‡ä»¶</span></span><br><span class="line">anon_other_write_enable=YES <span class="comment">#ç”¨æˆ·å°±å…·æœ‰ä¿®æ”¹å’Œåˆ é™¤æ–‡ä»¶çš„æƒé™äº†</span></span><br></pre></td></tr></table></figure></p>
<hr>
<h3 id="4-å…¥å‘-amp-å‡ºå‘"><a href="#4-å…¥å‘-amp-å‡ºå‘" class="headerlink" title="4.å…¥å‘&amp;å‡ºå‘"></a>4.å…¥å‘&amp;å‡ºå‘</h3><ol>
<li>FTPç™»å½•æ—¶æŠ¥é”™500 OOPS: chroot<br>è§£å†³æ–¹æ³•ï¼šå…³é—­SElinux<blockquote>
<p>setenforce 0 #ä¸´æ—¶</p>
</blockquote>
</li>
</ol>
<p><br></p>
<ol start="2">
<li>500 OOPS: vsftpd: refusing to run with writable root inside chroot()<br>è§£å†³æ–¹æ³•ï¼šä¿®æ”¹é…ç½®æ–‡ä»¶/etc/vsftpd/vsftpd.confæˆ–è€…ä¸ªäººé…ç½®æ–‡ä»¶æ·»åŠ å‚æ•°ï¼š<blockquote>
<p>allow_writeable_chroot=YES</p>
</blockquote>
</li>
</ol>
<p>ä»2.3.5ä¹‹åï¼Œvsftpdå¢å¼ºäº†å®‰å…¨æ£€æŸ¥ï¼Œå¦‚æœç”¨æˆ·è¢«é™å®šåœ¨äº†å…¶ä¸»ç›®å½•ä¸‹ï¼Œåˆ™è¯¥ç”¨æˆ·çš„ä¸»ç›®å½•ä¸èƒ½å†å…·æœ‰å†™æƒé™äº†ï¼å¦‚æœæ£€æŸ¥å‘ç°è¿˜æœ‰å†™æƒé™ï¼Œå°±ä¼šæŠ¥è¯¥é”™è¯¯ã€‚<br>è¦ä¿®å¤è¿™ä¸ªé”™è¯¯ï¼Œå¯ä»¥ç”¨å‘½ä»¤<code>chmod a-w /home/userå»é™¤ç”¨æˆ·ä¸»ç›®å½•çš„å†™æƒé™ï¼Œæ³¨æ„æŠŠç›®å½•æ›¿æ¢æˆä½ è‡ªå·±çš„</code>ã€‚æˆ–è€…ä½ å¯ä»¥åœ¨vsftpdçš„é…ç½®æ–‡ä»¶ä¸­å¢åŠ ä¸‹åˆ—é¡¹ï¼š<code>allow_writeable_chroot=YES</code></p>
<p><br></p>
<h2 id="0x02-å‘½ä»¤è§£æ-amp-çŠ¶æ€ç "><a href="#0x02-å‘½ä»¤è§£æ-amp-çŠ¶æ€ç " class="headerlink" title="0x02 å‘½ä»¤è§£æ&amp;çŠ¶æ€ç "></a>0x02 å‘½ä»¤è§£æ&amp;çŠ¶æ€ç </h2><h3 id="1-ftp-å‘½ä»¤"><a href="#1-ftp-å‘½ä»¤" class="headerlink" title="1.ftp å‘½ä»¤"></a>1.ftp å‘½ä»¤</h3><p>æè¿°ï¼šftp æœåŠ¡ä¸»è¦ç”¨äºæ–‡ä»¶ä¼ è¾“åˆ°æœåŠ¡å™¨é»˜è®¤æœåŠ¡ç«¯å£21è¿›è¡Œå‘½ä»¤ä¼ é€’, FTPå‘½ä»¤æ˜¯Internetç”¨æˆ·ä½¿ç”¨æœ€é¢‘ç¹çš„å‘½ä»¤ä¹‹ä¸€ï¼Œç†Ÿæ‚‰å¹¶çµæ´»åº”ç”¨FTPçš„å†…éƒ¨å‘½ä»¤ï¼Œå¯ä»¥å¤§å¤§æ–¹ä¾¿ä½¿ç”¨è€…å¹¶æ”¶åˆ°äº‹åŠåŠŸå€ä¹‹æ•ˆã€‚</p>
<p><strong>åŸºç¡€è¯­æ³•:</strong><br>æè¿°: å°†æ–‡ä»¶ä¼ é€åˆ°è¿è¡Œ FTP æœåŠ¡å™¨æœåŠ¡(ç»å¸¸ç§°ä¸ºåå°ç¨‹åº)çš„è®¡ç®—æœºä»¥åŠå°†æ–‡ä»¶ä»è¯¥è®¡ç®—æœºä¼ å‡ºã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¯­æ³•</span></span><br><span class="line">FTP [-v] [-d] [-i] [-n] [-g] [-s:filename] [-a] [-A] [-x:sendbuffer] [-r:recvbuffer] [-b:asyncbuffers] [-w:windowsize] [host]</span><br><span class="line"></span><br><span class="line"><span class="comment"># å‚æ•°</span></span><br><span class="line">-v              æ˜¾ç¤ºè¿œç¨‹æœåŠ¡å™¨çš„å…¨éƒ¨å“åº”ï¼Œå¹¶æä¾›æ•°æ®ä¼ è¾“çš„ç»Ÿè®¡ä¿¡æ¯ï¼Œå³åœ¨ç¨‹åºè¿è¡Œæ—¶æ˜¾ç¤ºè¯¦ç»†çš„å¤„ç†ä¿¡æ¯ã€‚</span><br><span class="line">-n              ç¦æ­¢åœ¨åˆå§‹è¿æ¥æ—¶è‡ªåŠ¨ç™»å½•ã€‚å¦åˆ™ftp å‘½ä»¤ä¼šæœç´¢ <span class="variable">$HOME</span>/.netrc ç™»å½•é¡¹ï¼Œè¯¥ç™»å½•é¡¹æè¿°äº†è¿œç¨‹ä¸»æœºçš„ç™»å½•å’Œåˆå§‹åŒ–è¿‡ç¨‹ã€‚</span><br><span class="line">-i              å…³é—­å¤šæ–‡ä»¶ä¼ è¾“è¿‡ç¨‹ä¸­çš„äº¤äº’å¼æç¤ºã€‚</span><br><span class="line">-d              å¯ç”¨è°ƒè¯•(ä½†å¿…é¡»ç¼–è¾‘ /etc/syslog.conf æ–‡ä»¶å¹¶æ·»åŠ ä»¥ä¸‹ä¸­çš„ä¸€é¡¹ï¼šuser.info FileName æˆ– user.debug FileName)ã€‚</span><br><span class="line">-g              ç¦ç”¨æ–‡ä»¶åé€šé…(ç¦ç”¨æ–‡ä»¶åä¸­çš„å…ƒå­—ç¬¦æ‹“å±•ï¼Œå³å–æ¶ˆå…¨å±€æ–‡ä»¶å)ã€‚</span><br><span class="line">-s:filename     æŒ‡å®šåŒ…å« FTP å‘½ä»¤çš„æ–‡æœ¬æ–‡ä»¶ï¼›å‘½ä»¤åœ¨ FTP å¯åŠ¨åè‡ªåŠ¨è¿è¡Œã€‚</span><br><span class="line">-a              åœ¨ç»‘å­—æ•°æ®è¿æ¥æ—¶ä½¿ç”¨æ‰€æœ‰æœ¬åœ°æ¥å£ã€‚</span><br><span class="line">-A              åŒ¿åç™»å½•ã€‚</span><br><span class="line">-x:send sockbuf è¦†ç›–é»˜è®¤çš„ SO_SNDBUF å¤§å° 8192ã€‚</span><br><span class="line">-r:recv sockbuf è¦†ç›–é»˜è®¤çš„ SO_RCVBUF å¤§å° 8192ã€‚</span><br><span class="line">-b:async count  è¦†ç›–é»˜è®¤çš„å¼‚æ­¥è®¡æ•° 3</span><br><span class="line">-w:windowsize   è¦†ç›–é»˜è®¤çš„ä¼ è¾“ç¼“å†²åŒºå¤§å° 65535ã€‚</span><br><span class="line">host            æŒ‡å®šä¸»æœºåç§°æˆ–è¦è¿æ¥åˆ°çš„è¿œç¨‹ä¸»æœºçš„ IP åœ°å€ã€‚</span><br></pre></td></tr></table></figure></p>
<p>Tips: ä½¿ç”¨ Ctrl-C ä¸­æ­¢å‘½ä»¤ã€‚</p>
<p><br></p>
<p><strong>FTPä½¿ç”¨çš„å†…éƒ¨å‘½ä»¤å¦‚ä¸‹(ä¸­æ‹¬å·è¡¨ç¤ºå¯é€‰é¡¹):</strong></p>
<ul>
<li>0.?[cmd]ï¼šåŒhelp.</li>
<li>23.help[cmd]ï¼šæ˜¾ç¤ºftpå†…éƒ¨å‘½ä»¤cmdçš„å¸®åŠ©ä¿¡æ¯ï¼Œå¦‚ï¼šhelp getã€‚</li>
<li>1.![cmd[args]]ï¼šåœ¨æœ¬åœ°æœºä¸­æ‰§è¡Œäº¤äº’shellï¼Œexitå›åˆ°ftpç¯å¢ƒ<code>!ls *.zip</code></li>
<li>2.$macro-ame[args]ï¼š æ‰§è¡Œå®å®šä¹‰macro-nameã€‚</li>
<li>3.account[password]ï¼š æä¾›ç™»å½•è¿œç¨‹ç³»ç»ŸæˆåŠŸåè®¿é—®ç³»ç»Ÿèµ„æºæ‰€éœ€çš„è¡¥å……å£ä»¤ã€‚</li>
<li>4.append local-file[remote-file]ï¼šå°†æœ¬åœ°æ–‡ä»¶è¿½åŠ åˆ°è¿œç¨‹ç³»ç»Ÿä¸»æœºï¼Œè‹¥æœªæŒ‡å®šè¿œç¨‹ç³»ç»Ÿæ–‡ä»¶åï¼Œåˆ™ä½¿ç”¨æœ¬åœ°æ–‡ä»¶åã€‚</li>
<li>5.asciiï¼šä½¿ç”¨asciiç±»å‹ä¼ è¾“æ–¹å¼ã€‚</li>
<li>7.binaryï¼šä½¿ç”¨äºŒè¿›åˆ¶æ–‡ä»¶ä¼ è¾“æ–¹å¼ã€‚<ul>
<li>ã€å¦‚æœé€‰æ‹©binaryæ¥ä¼ è¾“æ•°æ®ï¼Œå‘é€æ–¹ä¸æ¥é€æ–¹ä¸èƒ½æ”¹å˜æ–‡ä»¶çš„å†…å®¹ã€‘</li>
<li>ã€å¦‚æœé€‰æ‹©asciiLæ¥ä¼ è¾“æ•°æ®ï¼Œå‘é€æ–¹å°†æ–‡æœ¬ä»å­—ç¬¦é›†è½¬æ¢æˆæ ‡å‡†çš„Asciiç åå‘é€æ•°æ®ï¼Œè€Œæ¥æ”¶æ–¹å°†æ¥å—åˆ°çš„Asciiç è½¬æ¢æˆæœ¬æ–¹çš„è®¡ç®—æœºçš„å­—ç¬¦é›†ã€‘</li>
</ul>
</li>
<li>6.bellï¼šæ¯ä¸ªå‘½ä»¤æ‰§è¡Œå®Œæ¯•åè®¡ç®—æœºå“é“ƒä¸€æ¬¡ã€‚</li>
<li>8.byeï¼šé€€å‡ºftpä¼šè¯è¿‡ç¨‹ã€‚</li>
<li>9.caseï¼šåœ¨ä½¿ç”¨mgetæ—¶ï¼Œå°†è¿œç¨‹ä¸»æœºæ–‡ä»¶åä¸­çš„å¤§å†™è½¬ä¸ºå°å†™å­—æ¯ã€‚</li>
<li>10.cd remote-dirï¼šè¿›å…¥è¿œç¨‹ä¸»æœºç›®å½•ã€‚</li>
<li>11.cdupï¼šè¿›å…¥è¿œç¨‹ä¸»æœºç›®å½•çš„çˆ¶ç›®å½•ã€‚</li>
<li>12.chmod mode file-nameï¼šå°†è¿œç¨‹ä¸»æœºæ–‡ä»¶file-nameçš„å­˜å–æ–¹å¼è®¾ç½®ä¸ºmodeï¼Œå¦‚ï¼š<code>chmod 777 a.out</code>ã€‚</li>
<li>13.closeï¼šä¸­æ–­ä¸è¿œç¨‹æœåŠ¡å™¨çš„ftpä¼šè¯(ä¸openå¯¹åº”)ã€‚</li>
<li>14.crï¼šä½¿ç”¨assciiæ–¹å¼ä¼ è¾“æ–‡ä»¶æ—¶ï¼Œå°†å›è½¦æ¢è¡Œè½¬æ¢ä¸ºå›è¡Œã€‚</li>
<li>15.delete remote-fileï¼šåˆ é™¤è¿œç¨‹ä¸»æœºæ–‡ä»¶ã€‚</li>
<li>16.debug[debug-value]ï¼šè®¾ç½®è°ƒè¯•æ–¹å¼ï¼Œ æ˜¾ç¤ºå‘é€è‡³è¿œç¨‹ä¸»æœºçš„æ¯æ¡å‘½ä»¤ï¼Œå¦‚ï¼š<code>deb up 3</code>ï¼Œè‹¥è®¾ä¸º0ï¼Œè¡¨ç¤ºå–æ¶ˆdebugã€‚</li>
<li>17.dir[remote-dir][local-file]ï¼šæ˜¾ç¤ºè¿œç¨‹ä¸»æœºç›®å½•ï¼Œå¹¶å°†ç»“æœå­˜å…¥æœ¬åœ°æ–‡ä»¶ã€‚</li>
<li>18.disconnectionï¼šåŒcloseã€‚</li>
<li>19.form formatï¼šå°†æ–‡ä»¶ä¼ è¾“æ–¹å¼è®¾ç½®ä¸ºformatï¼Œç¼ºçœä¸ºfileæ–¹å¼ã€‚</li>
<li>20.get remote-file[local-file]ï¼š å°†è¿œç¨‹ä¸»æœºçš„æ–‡ä»¶remote-fileä¼ è‡³æœ¬åœ°ç¡¬ç›˜çš„local-fileã€‚</li>
<li>21.globï¼šè®¾ç½®mdeleteï¼Œmgetï¼Œmputçš„æ–‡ä»¶åæ‰©å±•ï¼Œç¼ºçœæ—¶ä¸æ‰©å±•æ–‡ä»¶åï¼ŒåŒå‘½ä»¤è¡Œçš„-gå‚æ•°ã€‚</li>
<li>22.hashï¼šæ¯ä¼ è¾“1024å­—èŠ‚ï¼Œæ˜¾ç¤ºä¸€ä¸ªhashç¬¦å·(#)ã€‚</li>
<li>24.idle[seconds]ï¼šå°†è¿œç¨‹æœåŠ¡å™¨çš„ä¼‘çœ è®¡æ—¶å™¨è®¾ä¸º[seconds]ç§’ã€‚</li>
<li>25.imageï¼šè®¾ç½®äºŒè¿›åˆ¶ä¼ è¾“æ–¹å¼(åŒbinary)ã€‚</li>
<li>26.lcd[dir]ï¼šå°†æœ¬åœ°å·¥ä½œç›®å½•åˆ‡æ¢è‡³dirã€‚</li>
<li>27.ls[remote-dir][local-file]ï¼šæ˜¾ç¤ºè¿œç¨‹ç›®å½•remote-dirï¼Œ å¹¶å­˜å…¥æœ¬åœ°æ–‡ä»¶local-fileã€‚</li>
<li>28.macdef macro-nameï¼šå®šä¹‰ä¸€ä¸ªå®ï¼Œé‡åˆ°macdefä¸‹çš„ç©ºè¡Œæ—¶ï¼Œå®å®šä¹‰ç»“æŸã€‚</li>
<li>29.mdelete[remote-file]ï¼šåˆ é™¤è¿œç¨‹ä¸»æœºæ–‡ä»¶ã€‚</li>
<li>30.mdir remote-files local-fileï¼šä¸dirç±»ä¼¼ï¼Œä½†å¯æŒ‡å®šå¤šä¸ªè¿œç¨‹æ–‡ä»¶ï¼Œå¦‚ ï¼šmdir <em>.o.</em>.zipoutfile ã€‚</li>
<li>31.mget remote-filesï¼šä¼ è¾“å¤šä¸ªè¿œç¨‹æ–‡ä»¶(è·å–è¿œç«¯æ‰€åœ¨æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰æ–‡ä»¶)ã€‚</li>
<li>32.mkdir dir-nameï¼šåœ¨è¿œç¨‹ä¸»æœºä¸­å»ºä¸€ç›®å½•ã€‚</li>
<li>33.mls remote-file local-fileï¼šåŒnlistï¼Œä½†å¯æŒ‡å®šå¤šä¸ªæ–‡ä»¶åã€‚</li>
<li>34.mode[modename]ï¼šå°†æ–‡ä»¶ä¼ è¾“æ–¹å¼è®¾ç½®ä¸ºmodenameï¼Œ ç¼ºçœä¸ºstreamæ–¹å¼ã€‚</li>
<li>35.modtime file-nameï¼šæ˜¾ç¤ºè¿œç¨‹ä¸»æœºæ–‡ä»¶çš„æœ€åä¿®æ”¹æ—¶é—´ã€‚</li>
<li>36.mput local-fileï¼šå°†å¤šä¸ªæ–‡ä»¶ä¼ è¾“è‡³è¿œç¨‹ä¸»æœº(å°†æ‰€åœ¨æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰æ–‡ä»¶ä¸Šä¼ åˆ°FTPä¸Š)ã€‚</li>
<li>37.newer file-nameï¼š å¦‚æœè¿œç¨‹æœºä¸­file-nameçš„ä¿®æ”¹æ—¶é—´æ¯”æœ¬åœ°ç¡¬ç›˜åŒåæ–‡ä»¶çš„æ—¶é—´æ›´è¿‘ï¼Œåˆ™é‡ä¼ è¯¥æ–‡ä»¶ã€‚</li>
<li>38.nlist[remote-dir][local-file]ï¼šæ˜¾ç¤ºè¿œç¨‹ä¸»æœºç›®å½•çš„æ–‡ä»¶æ¸…å•ï¼Œå¹¶å­˜å…¥æœ¬åœ°ç¡¬ç›˜çš„local-fileã€‚</li>
<li>40.ntrans[inchars[outchars]]ï¼šè®¾ç½®æ–‡ä»¶åå­—ç¬¦çš„ç¿»è¯‘æœºåˆ¶ï¼Œå¦‚ntrans1Rï¼Œåˆ™æ–‡ä»¶åLLLå°†å˜ä¸ºRRRã€‚</li>
<li>41.open host[port]ï¼šå»ºç«‹æŒ‡å®šftpæœåŠ¡å™¨è¿æ¥ï¼Œå¯æŒ‡å®šè¿æ¥ç«¯å£(å¸¸ç”¨)ã€‚</li>
<li>42.passiveï¼šè¿›å…¥è¢«åŠ¨ä¼ è¾“æ–¹å¼ã€‚</li>
<li>43.promptï¼šè®¾ç½®å¤šä¸ªæ–‡ä»¶ä¼ è¾“æ—¶çš„äº¤äº’æç¤ºã€‚</li>
<li>44.proxy ftp-cmdï¼šåœ¨æ¬¡è¦æ§åˆ¶è¿æ¥ä¸­ï¼Œæ‰§è¡Œä¸€æ¡ftpå‘½ä»¤ï¼Œ è¯¥å‘½ä»¤å…è®¸è¿æ¥ä¸¤ä¸ªftpæœåŠ¡å™¨ï¼Œä»¥åœ¨ä¸¤ä¸ªæœåŠ¡å™¨é—´ä¼ è¾“æ–‡ä»¶ã€‚ç¬¬ä¸€æ¡ftpå‘½ä»¤å¿…é¡»ä¸ºopenï¼Œä»¥é¦–å…ˆå»ºç«‹ä¸¤ä¸ªæœåŠ¡å™¨é—´çš„è¿æ¥ã€‚</li>
<li>45.put local-file[remote-file]ï¼šå°†æœ¬åœ°æ–‡ä»¶local-fileä¼ é€è‡³è¿œç¨‹ä¸»æœºã€‚</li>
<li>46.pwdï¼šæ˜¾ç¤ºè¿œç¨‹ä¸»æœºçš„å½“å‰å·¥ä½œç›®å½•ã€‚</li>
<li>47.quitï¼šåŒbyeï¼Œé€€å‡ºftpä¼šè¯ã€‚</li>
<li>48.quote arg1ï¼Œarg2â€¦ï¼šå°†å‚æ•°é€å­—å‘è‡³è¿œç¨‹ftpæœåŠ¡å™¨ï¼Œå¦‚ï¼šquote syst.</li>
<li>49.recv remote-file[local-file]ï¼šåŒgetã€‚</li>
<li>50.reget remote-file[local-file]ï¼šç±»ä¼¼äºgetï¼Œ ä½†è‹¥local-fileå­˜åœ¨ï¼Œåˆ™ä»ä¸Šæ¬¡ä¼ è¾“ä¸­æ–­å¤„ç»­ä¼ ã€‚</li>
<li>51.rhelp[cmd-name]ï¼šè¯·æ±‚è·å¾—è¿œç¨‹ä¸»æœºçš„å¸®åŠ©ã€‚</li>
<li>52.rstatus[file-name]ï¼šè‹¥æœªæŒ‡å®šæ–‡ä»¶åï¼Œåˆ™æ˜¾ç¤ºè¿œç¨‹ä¸»æœºçš„çŠ¶æ€ï¼Œ å¦åˆ™æ˜¾ç¤ºæ–‡ä»¶çŠ¶æ€ã€‚</li>
<li>53.rename[from][to]ï¼šæ›´æ”¹è¿œç¨‹ä¸»æœºæ–‡ä»¶åã€‚</li>
<li>54.resetï¼šæ¸…é™¤å›ç­”é˜Ÿåˆ—ã€‚</li>
<li>55.restart markerï¼šä»æŒ‡å®šçš„æ ‡å¿—markerå¤„ï¼Œé‡æ–°å¼€å§‹getæˆ–putï¼Œå¦‚ï¼šrestart 130ã€‚</li>
<li>56.rmdir dir-nameï¼šåˆ é™¤è¿œç¨‹ä¸»æœºç›®å½•ã€‚</li>
<li>57.runiqueï¼šè®¾ç½®æ–‡ä»¶ååªä¸€æ€§å­˜å‚¨ï¼Œè‹¥æ–‡ä»¶å­˜åœ¨ï¼Œåˆ™åœ¨åŸæ–‡ä»¶ååŠ åç¼€.1ï¼Œ .2ç­‰ã€‚</li>
<li>58.send local-file[remote-file]ï¼šåŒputã€‚</li>
<li>59.sendportï¼šè®¾ç½®PORTå‘½ä»¤çš„ä½¿ç”¨ã€‚</li>
<li>60.site arg1ï¼Œarg2â€¦ï¼šå°†å‚æ•°ä½œä¸ºSITEå‘½ä»¤é€å­—å‘é€è‡³è¿œç¨‹ftpä¸»æœºã€‚</li>
<li>61.size file-nameï¼šæ˜¾ç¤ºè¿œç¨‹ä¸»æœºæ–‡ä»¶å¤§å°ï¼Œå¦‚ï¼šsite idle 7200ã€‚</li>
<li>62.statusï¼šæ˜¾ç¤ºå½“å‰ftpçŠ¶æ€ã€‚</li>
<li>63.struct[struct-name]ï¼šå°†æ–‡ä»¶ä¼ è¾“ç»“æ„è®¾ç½®ä¸ºstruct-nameï¼Œ ç¼ºçœæ—¶ä½¿ç”¨streamç»“æ„ã€‚</li>
<li>64.suniqueï¼šå°†è¿œç¨‹ä¸»æœºæ–‡ä»¶åå­˜å‚¨è®¾ç½®ä¸ºåªä¸€(ä¸runiqueå¯¹åº”)ã€‚</li>
<li>65.systemï¼šæ˜¾ç¤ºè¿œç¨‹ä¸»æœºçš„æ“ä½œç³»ç»Ÿç±»å‹ã€‚</li>
<li>66.tenexï¼šå°†æ–‡ä»¶ä¼ è¾“ç±»å‹è®¾ç½®ä¸ºTENEXæœºçš„æ‰€éœ€çš„ç±»å‹ã€‚</li>
<li>67.tickï¼šè®¾ç½®ä¼ è¾“æ—¶çš„å­—èŠ‚è®¡æ•°å™¨ã€‚</li>
<li>68.traceï¼šè®¾ç½®åŒ…è·Ÿè¸ªã€‚</li>
<li>69.type[type-name]ï¼šè®¾ç½®æ–‡ä»¶ä¼ è¾“ç±»å‹ä¸ºtype-nameï¼Œç¼ºçœä¸ºasciiï¼Œå¦‚:type binaryï¼Œè®¾ç½®äºŒè¿›åˆ¶ä¼ è¾“æ–¹å¼ã€‚</li>
<li>70.umask[newmask]ï¼šå°†è¿œç¨‹æœåŠ¡å™¨çš„ç¼ºçœumaskè®¾ç½®ä¸ºnewmaskï¼Œå¦‚ï¼šumask 3</li>
<li>71.user user-name[password][account]ï¼šå‘è¿œç¨‹ä¸»æœºè¡¨æ˜è‡ªå·±çš„èº«ä»½ï¼Œéœ€è¦å£ä»¤æ—¶ï¼Œå¿…é¡»è¾“å…¥å£ä»¤ï¼Œå¦‚ï¼šuser anonymous my@emailã€‚</li>
<li>72.verboseï¼šåŒå‘½ä»¤è¡Œçš„-vå‚æ•°ï¼Œå³è®¾ç½®è¯¦å°½æŠ¥å‘Šæ–¹å¼ï¼Œftp æœåŠ¡å™¨çš„æ‰€æœ‰å“ åº”éƒ½å°†æ˜¾ç¤ºç»™ç”¨æˆ·ï¼Œç¼ºçœä¸ºon.</li>
</ul>
<p><br/></p>
<p><strong>å®é™…æ¡ˆä¾‹ï¼š</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.åˆ©ç”¨Explorerèµ„æºç®¡ç†å™¨è¿›è¡Œç™»å½•FTPä»¥åŠæ–‡ä»¶ä¸‹è½½</span></span><br><span class="line">ftp://username:password@ip/path/file</span><br><span class="line">ftp://weiyigeektemp:@192.168.12.31/application-prod.yml</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.äº¤äº’å¼å‘½ä»¤ç™»å½•</span></span><br><span class="line">ftp </span><br><span class="line">&gt; open ip ç«¯å£  <span class="comment"># é»˜è®¤ä¸ºASCIIæ ¼å¼ä¼ é€(æ–‡æœ¬æ–‡ä»¶æ—¶)</span></span><br><span class="line">&gt; è¾“å…¥è´¦å·å¯†ç </span><br><span class="line">&gt; bin        <span class="comment"># binæŒ‡ç”¨äºŒè¿›åˆ¶æ–¹å¼ä¼ é€ï¼ˆå¯æ‰§è¡Œæ–‡ä»¶è¿›ï¼‰</span></span><br><span class="line">&gt; get pull.txt</span><br><span class="line">&gt; put push.txt</span><br><span class="line">&gt; <span class="built_in">bye</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.é‡‡ç”¨-sé€‰é¡¹è¿›è¡Œæ‰§è¡Œäº¤æ¢ä¸­çš„å‘½ä»¤</span></span><br><span class="line"><span class="comment"># æ ¼å¼</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"ftp ip port"</span> &gt;&gt;download.bat</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"user"</span> &gt;&gt;download.bat</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"password"</span> &gt;&gt;download.bat</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"bin"</span> &gt;&gt;download.bat</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"get back.exe"</span> &gt;&gt;download.bat</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"bye"</span> &gt;&gt;download.bat</span><br><span class="line">ftp -s:download.bat</span><br><span class="line"><span class="comment"># å®ä¾‹</span></span><br><span class="line"><span class="built_in">echo</span> open 192.168.1.31 21212 &gt; ftp.tmp</span><br><span class="line"><span class="built_in">echo</span> weiyigeek &gt;&gt; ftp.tmp</span><br><span class="line"><span class="built_in">echo</span> password &gt;&gt; ftp.tmp</span><br><span class="line"><span class="built_in">echo</span> bin &gt;&gt; ftp.tmp</span><br><span class="line"><span class="built_in">echo</span> mkdir %currentday% &gt;&gt; ftp.tmp</span><br><span class="line"><span class="built_in">echo</span> <span class="built_in">cd</span> %currentday% &gt;&gt; ftp.tmp</span><br><span class="line"><span class="built_in">echo</span> put %Backupfile% &gt;&gt; ftp.tmp</span><br><span class="line"><span class="built_in">echo</span> quit &gt;&gt; ftp.tmp</span><br><span class="line">ftp -i -s:ftp.tmp</span><br></pre></td></tr></table></figure></p>
<p>Tips ï¼š FTPæ–‡ä»¶ä¼ è¾“ç±»å‹æœ‰ï¼š<code>asciiã€binaryã€ebcdicã€imageã€local M å’Œ tenex</code>ã€‚<br>â€“ asciiï¼šå°†æ–‡ä»¶ä¼ è¾“ç±»å‹è®¾ç½®ä¸ºç½‘ç»œ ASCIIã€‚æ­¤ç±»å‹ä¸ºç¼ºçœå€¼ï¼Œå³é»˜è®¤ä½¿ç”¨asciiæ–¹å¼è¿›è¡Œä¼ è¾“ã€‚<br>â€“ binaryï¼šå°†æ–‡ä»¶ä¼ è¾“ç±»å‹è®¾ç½®ä¸ºäºŒè¿›åˆ¶æ˜ åƒã€‚éœ€è¦ä½¿ç”¨binaryæ–¹å¼ä¼ è¾“çš„æ–‡ä»¶ç±»å‹æœ‰ISOæ–‡ä»¶ã€å¯æ‰§è¡Œæ–‡ä»¶ã€å‹ç¼©æ–‡ä»¶ã€å›¾ç‰‡ç­‰ã€‚æ­¤ç±»å‹å¯èƒ½æ¯” ASCII ä¼ é€æ›´æœ‰æ•ˆã€‚<br>â€“ ebcdicï¼šå°†æ–‡ä»¶ä¼ è¾“ç±»å‹è®¾ä¸º EBCDICã€‚<br>â€“ imageï¼šå°†æ–‡ä»¶ä¼ è¾“ç±»å‹è®¾ç½®ä¸ºäºŒè¿›åˆ¶æ˜ åƒã€‚æ­¤ç±»å‹å¯èƒ½æ¯” ASCII ä¼ é€æ›´æœ‰æ•ˆã€‚<br>â€“ local Mï¼šå°†æ–‡ä»¶ä¼ è¾“ç±»å‹è®¾ç½®ä¸ºæœ¬åœ°ã€‚M å‚æ•°å®šä¹‰æ¯è®¡ç®—æœºå­—ä½çš„åè¿›åˆ¶æ•°ã€‚æ­¤å‚æ•°æ²¡æœ‰ç¼ºçœå€¼ã€‚<br>â€“ tenexï¼šå°†æ–‡ä»¶ä¼ è¾“ç±»å‹è®¾ä¸º TENEX æœºå™¨éœ€è¦çš„ç±»å‹ã€‚</p>
<p>Tips : &lt;&lt; æ˜¯ä½¿ç”¨å³æ—¶æ–‡ä»¶é‡å®šå‘è¾“å…¥, EOFæ˜¯å³æ—¶æ–‡ä»¶çš„æ ‡å¿—å®ƒå¿…é¡»æˆå¯¹å‡ºç°ï¼Œä»¥æ ‡è¯†å³æ—¶æ–‡ä»¶çš„å¼€å§‹å’Œç»“å°¾ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯EOFåªæ˜¯ä¸€ä¸ªåˆ†ç•Œç¬¦æ ‡å¿—ï¼Œå®Œå…¨å¯ä»¥ç”¨abc, ! ç­‰æ›¿æ¢ä¹Ÿä¸€æ ·çš„åŠŸèƒ½ï¼Œåªæ˜¯å¤§å®¶éƒ½ä¹ æƒ¯ç”¨EOFæ¥è¡¨ç¤ºã€‚<br>Tips : &lt;&lt; ç”¨æ³•å½“shellçœ‹åˆ°&lt;&lt;çš„æ—¶å€™ï¼Œå®ƒå°±ä¼šçŸ¥é“ä¸‹ä¸€ä¸ªè¯æ˜¯ä¸€ä¸ªåˆ†ç•Œç¬¦ã€‚åœ¨è¯¥åˆ†ç•Œç¬¦ä»¥åçš„å†…å®¹éƒ½è¢«å½“ä½œè¾“å…¥ï¼Œç›´åˆ°shellåˆçœ‹åˆ°è¯¥åˆ†ç•Œç¬¦(ä½äºå•ç‹¬çš„ä¸€è¡Œ)ã€‚å› æ­¤åˆ†ç•Œç¬¦å¯ä»¥æ˜¯å®šä¹‰çš„ä»»ä½•å­—ç¬¦ä¸²ã€‚</p>
<p><br></p>
<h3 id="2-tftp-å‘½ä»¤"><a href="#2-tftp-å‘½ä»¤" class="headerlink" title="2.tftp å‘½ä»¤"></a>2.tftp å‘½ä»¤</h3><p><strong>åŸºç¡€è¯­æ³•:</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-i æŒ‡ä»¥äºŒè¿›åˆ¶æ¨¡å¼ä¼ é€ï¼Œå¦‚ä¼ é€exeæ–‡ä»¶æ—¶ç”¨ï¼Œå¦‚ä¸åŠ -i åˆ™ä»¥ASCIIæ¨¡å¼ï¼ˆä¼ é€æ–‡æœ¬æ–‡ä»¶æ¨¡å¼ï¼‰è¿›è¡Œä¼ é€</span><br></pre></td></tr></table></figure></p>
<p><strong>åŸºç¡€å®ä¾‹:</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.ç™»é™†åå°†â€œIPâ€æœåŠ¡å™¨ä¸­server.exeä¸‹è½½åˆ°ç›®æ ‡ä¸»æœºc:server.exe </span></span><br><span class="line">tftp -i æœåŠ¡å™¨IP get server.exe c:server.exe </span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.ç™»é™†åä¸Šä¼ æœ¬åœ°c:server.exeæ–‡ä»¶è‡³IPæœåŠ¡å™¨</span></span><br><span class="line">tftp -i æœåŠ¡å™¨IP put c:server.exe</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h3 id="3-çŠ¶æ€ç "><a href="#3-çŠ¶æ€ç " class="headerlink" title="3.çŠ¶æ€ç "></a>3.çŠ¶æ€ç </h3><ul>
<li><p><strong>1xx - è‚¯å®šçš„åˆæ­¥ç­”å¤</strong> : è¿™äº›çŠ¶æ€ä»£ç æŒ‡ç¤ºä¸€é¡¹æ“ä½œå·²ç»æˆåŠŸå¼€å§‹ï¼Œä½†å®¢æˆ·ç«¯å¸Œæœ›åœ¨ç»§ç»­æ“ä½œæ–°å‘½ä»¤å‰å¾—åˆ°å¦ä¸€ä¸ªç­”å¤ã€‚<br>â€¢ 110 é‡æ–°å¯åŠ¨æ ‡è®°ç­”å¤ã€‚<br>â€¢ 120 æœåŠ¡å·²å°±ç»ªï¼Œåœ¨ nnn åˆ†é’Ÿåå¼€å§‹ã€‚<br>â€¢ 125 æ•°æ®è¿æ¥å·²æ‰“å¼€ï¼Œæ­£åœ¨å¼€å§‹ä¼ è¾“ã€‚<br>â€¢ 150 æ–‡ä»¶çŠ¶æ€æ­£å¸¸ï¼Œå‡†å¤‡æ‰“å¼€æ•°æ®è¿æ¥ã€‚</p>
</li>
<li><p><strong>2xx - è‚¯å®šçš„å®Œæˆç­”å¤</strong>: ä¸€é¡¹æ“ä½œå·²ç»æˆåŠŸå®Œæˆã€‚å®¢æˆ·ç«¯å¯ä»¥æ‰§è¡Œæ–°å‘½ä»¤ã€‚<br>â€¢ 200 å‘½ä»¤ç¡®å®šã€‚<br>â€¢ 202 æœªæ‰§è¡Œå‘½ä»¤ï¼Œç«™ç‚¹ä¸Šçš„å‘½ä»¤è¿‡å¤šã€‚<br>â€¢ 211 ç³»ç»ŸçŠ¶æ€ï¼Œæˆ–ç³»ç»Ÿå¸®åŠ©ç­”å¤ã€‚<br>â€¢ 212 ç›®å½•çŠ¶æ€ã€‚<br>â€¢ 213 æ–‡ä»¶çŠ¶æ€ã€‚<br>â€¢ 214 å¸®åŠ©æ¶ˆæ¯ã€‚<br>â€¢ 215 NAME ç³»ç»Ÿç±»å‹ï¼Œå…¶ä¸­ï¼ŒNAME æ˜¯ Assigned Numbers æ–‡æ¡£ä¸­æ‰€åˆ—çš„æ­£å¼ç³»ç»Ÿåç§°ã€‚<br>â€¢ 220 æœåŠ¡å°±ç»ªï¼Œå¯ä»¥æ‰§è¡Œæ–°ç”¨æˆ·çš„è¯·æ±‚ã€‚<br>â€¢ 221 æœåŠ¡å…³é—­æ§åˆ¶è¿æ¥ã€‚å¦‚æœé€‚å½“ï¼Œè¯·æ³¨é”€ã€‚<br>â€¢ 225 æ•°æ®è¿æ¥æ‰“å¼€ï¼Œæ²¡æœ‰è¿›è¡Œä¸­çš„ä¼ è¾“ã€‚<br>â€¢ 226 å…³é—­æ•°æ®è¿æ¥ã€‚è¯·æ±‚çš„æ–‡ä»¶æ“ä½œå·²æˆåŠŸï¼ˆä¾‹å¦‚ï¼Œä¼ è¾“æ–‡ä»¶æˆ–æ”¾å¼ƒæ–‡ä»¶ï¼‰ã€‚<br>â€¢ 227 è¿›å…¥è¢«åŠ¨æ¨¡å¼ (h1,h2,h3,h4,p1,p2)ã€‚<br>â€¢ 230 ç”¨æˆ·å·²ç™»å½•ï¼Œç»§ç»­è¿›è¡Œã€‚<br>â€¢ 250 è¯·æ±‚çš„æ–‡ä»¶æ“ä½œæ­£ç¡®ï¼Œå·²å®Œæˆã€‚<br>â€¢ 257 å·²åˆ›å»ºâ€œPATHNAMEâ€ã€‚</p>
</li>
<li><p><strong>3xx - è‚¯å®šçš„ä¸­é—´ç­”å¤</strong>: è¯¥å‘½ä»¤å·²æˆåŠŸä½†æœåŠ¡å™¨éœ€è¦æ›´å¤šæ¥è‡ªå®¢æˆ·ç«¯çš„ä¿¡æ¯ä»¥å®Œæˆå¯¹è¯·æ±‚çš„å¤„ç†ã€‚<br>â€¢ 331 ç”¨æˆ·åæ­£ç¡®ï¼Œéœ€è¦å¯†ç ã€‚<br>â€¢ 332 éœ€è¦ç™»å½•å¸æˆ·ã€‚<br>â€¢ 350 è¯·æ±‚çš„æ–‡ä»¶æ“ä½œæ­£åœ¨ç­‰å¾…è¿›ä¸€æ­¥çš„ä¿¡æ¯ã€‚</p>
</li>
<li><p><strong>4xx - ç¬æ€å¦å®šçš„å®Œæˆç­”å¤</strong>: è¯¥å‘½ä»¤ä¸æˆåŠŸï¼Œä½†é”™è¯¯æ˜¯æš‚æ—¶çš„ã€‚å¦‚æœå®¢æˆ·ç«¯é‡è¯•å‘½ä»¤ï¼Œå¯èƒ½ä¼šæ‰§è¡ŒæˆåŠŸã€‚<br>â€¢ 421 æœåŠ¡ä¸å¯ç”¨ï¼Œæ­£åœ¨å…³é—­æ§åˆ¶è¿æ¥ã€‚å¦‚æœæœåŠ¡ç¡®å®šå®ƒå¿…é¡»å…³é—­ï¼Œå°†å‘ä»»ä½•å‘½ä»¤å‘é€è¿™ä¸€åº”ç­”ã€‚<br>â€¢ 425 æ— æ³•æ‰“å¼€æ•°æ®è¿æ¥ã€‚<br>â€¢ 426 Connection closed; transferaborted.<br>â€¢ 450 æœªæ‰§è¡Œè¯·æ±‚çš„æ–‡ä»¶æ“ä½œã€‚æ–‡ä»¶ä¸å¯ç”¨ï¼ˆä¾‹å¦‚ï¼Œæ–‡ä»¶ç¹å¿™ï¼‰ã€‚<br>â€¢ 451 è¯·æ±‚çš„æ“ä½œå¼‚å¸¸ç»ˆæ­¢ï¼šæ­£åœ¨å¤„ç†æœ¬åœ°é”™è¯¯ã€‚<br>â€¢ 452 æœªæ‰§è¡Œè¯·æ±‚çš„æ“ä½œã€‚ç³»ç»Ÿå­˜å‚¨ç©ºé—´ä¸å¤Ÿã€‚</p>
</li>
<li><p><strong>5xx - æ°¸ä¹…æ€§å¦å®šçš„å®Œæˆç­”å¤</strong>: è¯¥å‘½ä»¤ä¸æˆåŠŸï¼Œé”™è¯¯æ˜¯æ°¸ä¹…æ€§çš„ã€‚å¦‚æœå®¢æˆ·ç«¯é‡è¯•å‘½ä»¤ï¼Œå°†å†æ¬¡å‡ºç°åŒæ ·çš„é”™è¯¯ã€‚<br>â€¢ 500 è¯­æ³•é”™è¯¯ï¼Œå‘½ä»¤æ— æ³•è¯†åˆ«ã€‚è¿™å¯èƒ½åŒ…æ‹¬è¯¸å¦‚å‘½ä»¤è¡Œå¤ªé•¿ä¹‹ç±»çš„é”™è¯¯ã€‚<br>â€¢ 501 åœ¨å‚æ•°ä¸­æœ‰è¯­æ³•é”™è¯¯ã€‚<br>â€¢ 502 æœªæ‰§è¡Œå‘½ä»¤ã€‚<br>â€¢ 503 é”™è¯¯çš„å‘½ä»¤åºåˆ—ã€‚<br>â€¢ 504 æœªæ‰§è¡Œè¯¥å‚æ•°çš„å‘½ä»¤ã€‚<br>â€¢ 530 æœªç™»å½•ã€‚<br>â€¢ 532 å­˜å‚¨æ–‡ä»¶éœ€è¦å¸æˆ·ã€‚<br>â€¢ 550 æœªæ‰§è¡Œè¯·æ±‚çš„æ“ä½œã€‚æ–‡ä»¶ä¸å¯ç”¨ï¼ˆä¾‹å¦‚ï¼Œæœªæ‰¾åˆ°æ–‡ä»¶ï¼Œæ²¡æœ‰è®¿é—®æƒé™ï¼‰ã€‚<br>â€¢ 551 è¯·æ±‚çš„æ“ä½œå¼‚å¸¸ç»ˆæ­¢ï¼šæœªçŸ¥çš„é¡µé¢ç±»å‹ã€‚<br>â€¢ 552 è¯·æ±‚çš„æ–‡ä»¶æ“ä½œå¼‚å¸¸ç»ˆæ­¢ï¼šè¶…å‡ºå­˜å‚¨åˆ†é…ï¼ˆå¯¹äºå½“å‰ç›®å½•æˆ–æ•°æ®é›†ï¼‰ã€‚<br>â€¢ 553 æœªæ‰§è¡Œè¯·æ±‚çš„æ“ä½œã€‚ä¸å…è®¸çš„æ–‡ä»¶åã€‚</p>
</li>
</ul>
<p><br/></p>
<p><strong>Q: å¸¸è§çš„ FTP çŠ¶æ€ä»£ç åŠå…¶åŸå› ?</strong><br>â€¢ 150 - FTP ä½¿ç”¨ä¸¤ä¸ªç«¯å£ï¼š<code>21 ç”¨äºå‘é€å‘½ä»¤ï¼Œ20 ç”¨äºå‘é€æ•°</code>æ®ã€‚çŠ¶æ€ä»£ç  150 è¡¨ç¤ºæœåŠ¡å™¨å‡†å¤‡åœ¨ç«¯å£ 20 ä¸Šæ‰“å¼€æ–°è¿æ¥å‘é€ä¸€äº›æ•°æ®ã€‚<br>â€¢ 226 - å‘½ä»¤åœ¨ç«¯å£ 20 ä¸Šæ‰“å¼€æ•°æ®è¿æ¥ä»¥æ‰§è¡Œæ“ä½œï¼Œå¦‚ä¼ è¾“æ–‡ä»¶ã€‚è¯¥æ“ä½œæˆåŠŸå®Œæˆï¼Œæ•°æ®è¿æ¥å·²å…³é—­ã€‚<br>â€¢ 230 - å®¢æˆ·ç«¯å‘é€æ­£ç¡®çš„å¯†ç åï¼Œæ˜¾ç¤ºè¯¥çŠ¶æ€ä»£ç ã€‚å®ƒè¡¨ç¤ºç”¨æˆ·å·²æˆåŠŸç™»å½•ã€‚<br>â€¢ 331 - å®¢æˆ·ç«¯å‘é€ç”¨æˆ·ååï¼Œæ˜¾ç¤ºè¯¥çŠ¶æ€ä»£ç ã€‚æ— è®ºæ‰€æä¾›çš„ç”¨æˆ·åæ˜¯å¦ä¸ºç³»ç»Ÿä¸­çš„æœ‰æ•ˆå¸æˆ·ï¼Œéƒ½å°†æ˜¾ç¤ºè¯¥çŠ¶æ€ä»£ç ã€‚<br>â€¢ 426 - å‘½ä»¤æ‰“å¼€æ•°æ®è¿æ¥ä»¥æ‰§è¡Œæ“ä½œï¼Œä½†è¯¥æ“ä½œå·²è¢«å–æ¶ˆï¼Œæ•°æ®è¿æ¥å·²å…³é—­ã€‚<br>â€¢ 530 - è¯¥çŠ¶æ€ä»£ç è¡¨ç¤ºç”¨æˆ·æ— æ³•ç™»å½•ï¼Œå› ä¸ºç”¨æˆ·åå’Œå¯†ç ç»„åˆæ— æ•ˆã€‚å¦‚æœä½¿ç”¨æŸä¸ªç”¨æˆ·å¸æˆ·ç™»å½•ï¼Œå¯èƒ½é”®å…¥é”™è¯¯çš„ç”¨æˆ·åæˆ–å¯†ç ï¼Œä¹Ÿå¯èƒ½é€‰æ‹©åªå…è®¸åŒ¿åè®¿é—®ã€‚å¦‚æœä½¿ç”¨åŒ¿åå¸æˆ·ç™»å½•ï¼ŒIIS çš„é…ç½®å¯èƒ½æ‹’ç»åŒ¿åè®¿é—®ã€‚<br>â€¢ 550 - å‘½ä»¤æœªè¢«æ‰§è¡Œï¼Œå› ä¸ºæŒ‡å®šçš„æ–‡ä»¶ä¸å¯ç”¨ã€‚ä¾‹å¦‚è¦ GET çš„æ–‡ä»¶å¹¶ä¸å­˜åœ¨æˆ–è¯•å›¾å°†æ–‡ä»¶ PUT åˆ°æ‚¨æ²¡æœ‰å†™å…¥æƒé™çš„ç›®å½•ã€‚</p>
<hr>
<h2 id="0x03-å¸¸ç”¨è„šæœ¬"><a href="#0x03-å¸¸ç”¨è„šæœ¬" class="headerlink" title="0x03 å¸¸ç”¨è„šæœ¬"></a>0x03 å¸¸ç”¨è„šæœ¬</h2><h3 id="1-å®ç°FTPä¸Šä¼ ä¸‹è½½æ–‡ä»¶"><a href="#1-å®ç°FTPä¸Šä¼ ä¸‹è½½æ–‡ä»¶" class="headerlink" title="1) å®ç°FTPä¸Šä¼ ä¸‹è½½æ–‡ä»¶"></a>1) å®ç°FTPä¸Šä¼ ä¸‹è½½æ–‡ä»¶</h3><p>æè¿°: åœ¨Linuxä¸­æˆ‘ä»¬å¯ä»¥é‡‡ç”¨FTPè¿›è¡Œæ–‡ä»¶å¾—æ‰¹é‡å¾—ä¸Šä¼ å’Œä¸‹è½½ã€‚</p>
<p><strong>ç¤ºä¾‹1.ä»FTPä¸Šå•ç‹¬æˆ–è€…æ‰¹é‡ä¸‹è½½æ–‡ä»¶åˆ°æœ¬åœ°</strong><br>ç¯å¢ƒè¯´æ˜:</p>
<ul>
<li>FTPæœåŠ¡å™¨ï¼š192.168.0.199</li>
<li>FTPè·¯å¾„ï¼š/ftphome/data</li>
<li>æœ¬åœ°è·¯å¾„ï¼š/local/data<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">ftp -v -n 192.168.0.199&lt;&lt;EOF</span><br><span class="line">user ftpuser ftppwd</span><br><span class="line">binary</span><br><span class="line"><span class="built_in">cd</span> /ftphome/downloadData</span><br><span class="line">lcd /<span class="built_in">local</span>/getDownloadData</span><br><span class="line">prompt</span><br><span class="line">get test.txt </span><br><span class="line">mget *</span><br><span class="line"><span class="built_in">bye</span></span><br><span class="line">EOF</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"download from ftp successfully"</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><br/></p>
<p><strong>ç¤ºä¾‹2.ä»FTPä¸Šå•ç‹¬æˆ–è€…æ‰¹é‡ä¸Šä¼ æœ¬åœ°æ–‡ä»¶åˆ°æœåŠ¡å™¨</strong><br>ç¯å¢ƒè¯´æ˜:</p>
<ul>
<li>FTPæœåŠ¡å™¨ï¼š192.168.0.199</li>
<li>FTPè·¯å¾„ï¼š/ftphome/uploadData</li>
<li>æœ¬åœ°è·¯å¾„ï¼š/local/getUploadData<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">PUTFILE = test.txt  <span class="comment"># æ­¤å¤„è§„å®šè¦ä¸Šä¼ å¾—æ–‡ä»¶</span></span><br><span class="line">ftp -v -n 192.168.0.199&lt;&lt;EOF</span><br><span class="line">user ftpuser ftppwd</span><br><span class="line">binary</span><br><span class="line"><span class="built_in">hash</span></span><br><span class="line"><span class="built_in">cd</span> /ftphome/uploadData</span><br><span class="line">lcd /ftphome/getUploadData</span><br><span class="line">prompt</span><br><span class="line">put <span class="variable">$PUTFILE</span></span><br><span class="line">mput *</span><br><span class="line"><span class="built_in">bye</span></span><br><span class="line"><span class="comment">#here document</span></span><br><span class="line">EOF</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"commit to ftp successfully"</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><br/></p>
<p><strong>ç¤ºä¾‹3.sftpè„šæœ¬è‡ªå®šç™»é™†ä¸Šä¼ ä»¥åŠå˜é‡è°ƒç”¨</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">FLAG=1</span><br><span class="line"><span class="built_in">export</span> backfile=<span class="string">"text.json"</span></span><br><span class="line"><span class="comment"># $(ls --time=atime /home/weiyigeek-gitlab/logs/gitlab-backup/ | head -n 1)</span></span><br><span class="line"><span class="keyword">if</span> [[ <span class="variable">$&#123;FLAG&#125;</span> -eq 1 ]];<span class="keyword">then</span></span><br><span class="line">lftp -u <span class="string">"gitlab"</span>,<span class="string">"weiyigeekgitlab"</span> sftp://192.168.12.31&lt;&lt;EOF</span><br><span class="line">lcd /home/weiyigeek-gitlab/logs/gitlab-backup/</span><br><span class="line">put <span class="variable">$&#123;backfile&#125;</span></span><br><span class="line">quit</span><br><span class="line"><span class="built_in">bye</span></span><br><span class="line">EOF</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h2 id="0x04-å…¥å‘å‡ºå‘"><a href="#0x04-å…¥å‘å‡ºå‘" class="headerlink" title="0x04 å…¥å‘å‡ºå‘"></a>0x04 å…¥å‘å‡ºå‘</h2><h3 id="é—®é¢˜1-ä½¿ç”¨FTPæŠ¥ftp-bind-Address-already-in-useé”™è¯¯ã€‚"><a href="#é—®é¢˜1-ä½¿ç”¨FTPæŠ¥ftp-bind-Address-already-in-useé”™è¯¯ã€‚" class="headerlink" title="é—®é¢˜1.ä½¿ç”¨FTPæŠ¥ftp: bind: Address already in useé”™è¯¯ã€‚"></a>é—®é¢˜1.ä½¿ç”¨FTPæŠ¥<code>ftp: bind: Address already in use</code>é”™è¯¯ã€‚</h3><ul>
<li>é—®é¢˜æè¿°: ä½¿ç”¨ftpå‘½ä»¤ä¸Šä¼ æ–‡ä»¶æ—¶å‡ºç°å¦‚ä¸‹é”™è¯¯<code>Server cannot accept argument.ftp: bind: Address already in use</code></li>
<li>é—®é¢˜åŸå› ï¼šftpä½¿ç”¨äº†ä¸»åŠ¨æ¨¡å¼ï¼Œå¯¼è‡´é˜²ç«å¢™å°†æœåŠ¡å™¨åˆ°å®¢æˆ·ç«¯çš„è¿æ¥é˜»å¡ã€‚ï¼ˆä¸»åŠ¨æ¨¡å¼ä¸‹ï¼ŒftpæœåŠ¡å™¨æ•°æ®ç«¯å£20è¦å»è¿æ¥å®¢æˆ·ç«¯æŒ‡å®šçš„æ•°æ®ç«¯å£ã€‚è€Œï¼Œä¸€èˆ¬æ¥è®²å¤–éƒ¨ç³»ç»Ÿåˆ°å†…éƒ¨çš„ç«¯å£è¿æ¥ä¼šè¢«é˜²ç«å¢™é˜»å¡ï¼‰</li>
<li>é—®é¢˜è§£å†³ï¼šä½¿ç”¨ftpè¢«åŠ¨æ¨¡å¼å³å¯ï¼ˆè¢«åŠ¨æ¨¡å¼ä¸‹ï¼ŒæœåŠ¡å™¨ä¼šå¯åŠ¨ä¸€ä¸ªç›‘å¬æ•°æ®çš„ç«¯å£ã€‚è®©å®¢æˆ·ç«¯çš„æ•°æ®ç«¯å£ï¼Œå»è¿æ¥æœåŠ¡å™¨ç›‘å¬æ•°æ®çš„ç«¯å£ã€‚ï¼‰<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¼€å¯è¢«åŠ¨æ¨¡å¼ </span></span><br><span class="line">ftp -p -n ipadress port</span><br><span class="line"><span class="comment"># -p enable passive mode (default for pftp)</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><br></p>
<h3 id="é—®é¢˜2-ä½¿ç”¨FTPftp-500-Illegal-PORT-command"><a href="#é—®é¢˜2-ä½¿ç”¨FTPftp-500-Illegal-PORT-command" class="headerlink" title="é—®é¢˜2.ä½¿ç”¨FTPftp:500 Illegal PORT command."></a>é—®é¢˜2.ä½¿ç”¨FTPftp:500 Illegal PORT command.</h3><ul>
<li>é—®é¢˜æè¿°ï¼šftpç™»å½•åä½¿ç”¨lså‘½ä»¤å‡ºç°å¦‚ä¸‹æç¤º<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ftp:500 Illegal PORT <span class="built_in">command</span>.</span><br><span class="line">ftp: <span class="built_in">bind</span>: Address already <span class="keyword">in</span> use</span><br></pre></td></tr></table></figure></li>
<li>é—®é¢˜åŸå› : é€ æˆè¿™ä¸ªåŸå› ä¸»è¦æ˜¯æ˜¯ç”±äºiptablesé˜²ç«å¢™ä¸æ”¯æŒ<code>ip_nat_ftp/ip_conntrack_ftp</code>æ¨¡å—ã€‚</li>
<li>è§£å†³æ–¹å¼:<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.åœ¨linuxçš„ftpæœåŠ¡å™¨ä¸Šæ‰§è¡Œä¸‹åˆ—å‘½ä»¤å³å¯è§£å†³</span></span><br><span class="line">modprobe ip_nat_ftp</span><br><span class="line">modprobe ip_conntrack_ftp</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><br></p>
<h3 id="é—®é¢˜3-åœ¨windowsä¸Šä½¿ç”¨FTPå®¢æˆ·ç«¯ç™»å½•åæ‰§è¡Œpassiveå‘½ä»¤é—®é¢˜"><a href="#é—®é¢˜3-åœ¨windowsä¸Šä½¿ç”¨FTPå®¢æˆ·ç«¯ç™»å½•åæ‰§è¡Œpassiveå‘½ä»¤é—®é¢˜" class="headerlink" title="é—®é¢˜3.åœ¨windowsä¸Šä½¿ç”¨FTPå®¢æˆ·ç«¯ç™»å½•åæ‰§è¡Œpassiveå‘½ä»¤é—®é¢˜"></a>é—®é¢˜3.åœ¨windowsä¸Šä½¿ç”¨FTPå®¢æˆ·ç«¯ç™»å½•åæ‰§è¡Œpassiveå‘½ä»¤é—®é¢˜</h3><ul>
<li>é—®é¢˜æè¿°ï¼šftpç™»å½•åä½¿ç”¨passiveå‘½ä»¤è¡¨ç¤ºå‘½ä»¤æ— æ•ˆã€‚</li>
<li>é—®é¢˜åŸå› : ç”±äºWindowsè‡ªå¸¦çš„ftpå·¥å…·ä¸æ”¯æŒftpè¢«åŠ¨æ¨¡å¼ã€‚</li>
<li>è§£å†³åŠæ³•: å®‰è£…å…¶ä»–ftpå·¥å…·æˆ–åœ¨linuxç³»ç»Ÿä¸‹ä½¿ç”¨ftpä¸Šä¼ æ“ä½œæ–‡ä»¶ã€‚</li>
</ul>

        </div>
        <!-- Google å¹¿å‘Š -->
        
<ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-9134434519967436" data-ad-slot="7905848205"></ins>
  

        
<hr/>
<div style="text-align: center;font-weight: bold;">
  <p> æ¬¢è¿å„ä½å¿—åŒé“åˆçš„æœ‹å‹ä¸€èµ·å­¦ä¹ äº¤æµï¼Œå¦‚æ–‡ç« æœ‰è¯¯è¯·åœ¨ä¸‹æ–¹ç•™ä¸‹æ‚¨å®è´µçš„ç»éªŒçŸ¥è¯†ï¼Œä¸ªäººé‚®ç®±åœ°å€<b style="color:#ff654e"><code>ã€master#weiyigeek.topã€‘</code></b>æˆ–è€…ä¸ªäººå…¬ä¼—å·<b style="color:#ff654e"><code>ã€WeiyiGeekã€‘</code></b>è”ç³»æˆ‘ã€‚ </p>
  <p> æ›´å¤šæ–‡ç« æ¥æºäº<b style="color:#03a9f4">ã€WeiyiGeek Blog - ä¸ºäº†èƒ½åˆ°è¿œæ–¹ï¼Œè„šä¸‹çš„æ¯ä¸€æ­¥éƒ½ä¸èƒ½å°‘ã€‘</b>, ä¸ªäººé¦–é¡µåœ°å€( <a style="color: #03a9f4;" href="https://weiyigeek.top" target="_blank"> https://weiyigeek.top </a> )</p>
<!-- 

  <ul style="font-weight: bolder;">
    <li>
      <p><span style="color: #03a9f4">echo&nbsp;&nbsp;"ã€ç‚¹ä¸ªèµã€‘ï¼ŒåŠ¨åŠ¨ä½ é‚£ç²—å£®çš„æ‹‡æŒ‡æˆ–è€…èŠŠèŠŠç‰æ‰‹ï¼Œäº²ï¼"</span></p>
    </li>
    <li>
      <p><span style="color: #ff9201">printf("%s",&nbsp;"ã€æŠ•ä¸ªå¸ã€‘ï¼Œä¸‡æ°´åƒå±±æ€»æ˜¯æƒ…ï¼ŒæŠ•ä¸ªç¡¬å¸è¡Œä¸è¡Œï¼Œäº²ï¼")</span></p>
    </li>
    <li>
      <p><span style="color: #02a2ff">fmt.Printf("ã€æ”¶ä¸ªè—ã€‘ï¼Œé˜…åå³ç„šä¸åƒç°ï¼Œäº²ï¼")&nbsp;&nbsp;</span></p>
    </li>
    <li>
      <p><span style="color:red">console.info("ã€è½¬ä¸ªå‘ã€‘ï¼Œè®©æ›´å¤šçš„å¿—åŒé“åˆçš„æœ‹å‹ä¸€èµ·å­¦ä¹ äº¤æµï¼Œäº²ï¼")</span></p>
    </li>
    <li>
      <p><span style="color: #ff654e">System.out.println("ã€å…³ä¸ªæ³¨ã€‘ï¼Œåç»­æµè§ˆæŸ¥çœ‹ä¸è¿·è·¯å“Ÿï¼Œäº²ï¼")</span></p>
    </li>
  </ul> -->
  <div>
    <img src="/img/share-wechat.jpg" class="img-responsive" alt="æ‰«æFollow(å…³æ³¨)WeiyiGeekå…¬ä¼—å·ä¸Visit(æµè§ˆ)æå®¢å…¨æ ˆä¿®ç‚¼å°ç¨‹åº" >
    <p>ä¸“æ ä¹¦å†™ä¸æ˜“ï¼Œå¦‚æœæ‚¨è§‰å¾—è¿™ä¸ªä¸“æ è¿˜ä¸é”™çš„ï¼Œè¯·ç»™è¿™ç¯‡ä¸“æ  <b style="color: red;">ã€ç‚¹ä¸ªèµã€æŠ•ä¸ªå¸ã€æ”¶ä¸ªè—ã€å…³ä¸ªæ³¨ã€è½¬ä¸ªå‘ã€èµä¸ªåŠ©ã€‘</b>ï¼Œè¿™å°†å¯¹æˆ‘çš„è‚¯å®šï¼Œæˆ‘å°†æŒç»­æ•´ç†å‘å¸ƒæ›´å¤šä¼˜è´¨åŸåˆ›æ–‡ç« ï¼ã€‚</p>
    <img src="/img/weiyigeek.jpg" class="img-responsive" alt="WeiyiGeek-banner">
  </div>
</div>
  <hr>
  

  <blockquote class="post-copyright">
    <div class="content">
      
        
<span class="post-time">
    æœ€åæ›´æ–°æ—¶é—´ï¼š<time datetime="2023-03-07T10:50:25.022Z" itemprop="dateUpdated">2023-03-07 18:50:25</time>
</span><br>


        <span>æ–‡ç« åŸå§‹è·¯å¾„ï¼š<a href="https://github.com/WeiyiGeek/blog/edit/master/source/_posts/ç³»ç»Ÿè¿ç»´/Application/Connect/FTPè¿œç¨‹æ–‡ä»¶ä¼ è¾“æœåŠ¡å®‰è£…ä¸é…ç½®.md" target="_blank" rel="noopener noreferrer">_posts/ç³»ç»Ÿè¿ç»´/Application/Connect/FTPè¿œç¨‹æ–‡ä»¶ä¼ è¾“æœåŠ¡å®‰è£…ä¸é…ç½®.md</a></span><br>
         <span class="copy-copyright">è½¬è½½æ³¨æ˜å‡ºå¤„ï¼ŒåŸæ–‡åœ°å€ï¼š<a href="/2019/10-4-74.html" target="_blank" rel="external">https://blog.weiyigeek.top/2019/10-4-74.html</a></span><br>æœ¬ç«™æ–‡ç« å†…å®¹éµå¾ª <a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">çŸ¥è¯†å…±äº« ç½²å - éå•†ä¸šæ€§ - ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…åè®®</a> 
    </div>
    <footer>
      <a href="https://blog.weiyigeek.top">
        <img src="/img/avatar.jpg" alt="WeiyiGeek">
        WeiyiGeek
      </a>
    </footer>
  </blockquote>


        
            <div class="page-reward">
  <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-rectangle waves-light">â˜•ï¸ è¯·ä½œè€…å–æ¯å’–å•¡!</a>
</div>
            
        
        <div class="post-footer">
            
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/connect/" rel="tag">connect</a></li></ul>

            <div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://blog.weiyigeek.top/2019/10-4-74.html&title=ã€ŠFTPè¿œç¨‹æ–‡ä»¶ä¼ è¾“æœåŠ¡å®‰è£…ä¸é…ç½®ã€‹ â€” WeiyiGeek Blog&pic=https://blog.weiyigeek.top/img/avatar.jpg" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.weiyigeek.top/2019/10-4-74.html&title=ã€ŠFTPè¿œç¨‹æ–‡ä»¶ä¼ è¾“æœåŠ¡å®‰è£…ä¸é…ç½®ã€‹ â€” WeiyiGeek Blog&source=[TOC]" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.weiyigeek.top/2019/10-4-74.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€ŠFTPè¿œç¨‹æ–‡ä»¶ä¼ è¾“æœåŠ¡å®‰è£…ä¸é…ç½®ã€‹ â€” WeiyiGeek Blog&url=https://blog.weiyigeek.top/2019/10-4-74.html&via=https://blog.weiyigeek.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://blog.weiyigeek.top/2019/10-4-74.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>

        </div>
        
          <!-- è¯„è®ºç»„ä»¶ -->


<div id="gitalk-container"></div>
<script type="text/javascript" src="/js/plugins/gitalk.min.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/custom/gitalk.init.js?v=1.6.6"></script>
        
    </div>
    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="prev">
      <a href="/2019/10-10-288.html" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">JAVAå…¥é—¨å­¦ä¹ ä¹</h4>
      </a>
    </div>
  

  
    <div class="next">
      <a href="/2019/10-1-13.html" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">Webç›¸å…³æŠ€æœ¯åŸºç¡€ä»‹ç»ä¸æµè§ˆå™¨è§£ææ¸²æŸ“æµç¨‹è¯¦è¿°</h4>
      </a>
    </div>
  
</nav>


    
    
        <aside class="post-widget">
            <nav class="post-toc-wrap" id="post-toc">
                <strong>ç›®å½•</strong>
                <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#0x00-å‰è¨€ç®€è¿°"><span class="post-toc-number">1.</span> <span class="post-toc-text">0x00 å‰è¨€ç®€è¿°</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-FTPä¸»åŠ¨æ¨¡å¼ï¼ˆActiveï¼‰"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">1.FTPä¸»åŠ¨æ¨¡å¼ï¼ˆActiveï¼‰</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-FTPè¢«åŠ¨æ¨¡å¼-Passive"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">2.FTPè¢«åŠ¨æ¨¡å¼ (Passive)</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#0x01-vsftpd-æœåŠ¡"><span class="post-toc-number">2.</span> <span class="post-toc-text">0x01 vsftpd æœåŠ¡</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-å®‰è£…è¯´æ˜"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">1.å®‰è£…è¯´æ˜</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Centos7éƒ¨ç½²vsftpd"><span class="post-toc-number">2.1.1.</span> <span class="post-toc-text">Centos7éƒ¨ç½²vsftpd</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Ubuntuéƒ¨ç½²vsftpd"><span class="post-toc-number">2.1.2.</span> <span class="post-toc-text">Ubuntuéƒ¨ç½²vsftpd</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#å®¹å™¨éƒ¨ç½²-vsftpd"><span class="post-toc-number">2.1.3.</span> <span class="post-toc-text">å®¹å™¨éƒ¨ç½² vsftpd</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-é…ç½®æ–‡ä»¶"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">2.é…ç½®æ–‡ä»¶</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-å®‰å…¨é…ç½®"><span class="post-toc-number">2.3.</span> <span class="post-toc-text">3.å®‰å…¨é…ç½®</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-å…¥å‘-amp-å‡ºå‘"><span class="post-toc-number">2.4.</span> <span class="post-toc-text">4.å…¥å‘&amp;å‡ºå‘</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#0x02-å‘½ä»¤è§£æ-amp-çŠ¶æ€ç "><span class="post-toc-number">3.</span> <span class="post-toc-text">0x02 å‘½ä»¤è§£æ&amp;çŠ¶æ€ç </span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-ftp-å‘½ä»¤"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">1.ftp å‘½ä»¤</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-tftp-å‘½ä»¤"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">2.tftp å‘½ä»¤</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-çŠ¶æ€ç "><span class="post-toc-number">3.3.</span> <span class="post-toc-text">3.çŠ¶æ€ç </span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#0x03-å¸¸ç”¨è„šæœ¬"><span class="post-toc-number">4.</span> <span class="post-toc-text">0x03 å¸¸ç”¨è„šæœ¬</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-å®ç°FTPä¸Šä¼ ä¸‹è½½æ–‡ä»¶"><span class="post-toc-number">4.1.</span> <span class="post-toc-text">1) å®ç°FTPä¸Šä¼ ä¸‹è½½æ–‡ä»¶</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#0x04-å…¥å‘å‡ºå‘"><span class="post-toc-number">5.</span> <span class="post-toc-text">0x04 å…¥å‘å‡ºå‘</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#é—®é¢˜1-ä½¿ç”¨FTPæŠ¥ftp-bind-Address-already-in-useé”™è¯¯ã€‚"><span class="post-toc-number">5.1.</span> <span class="post-toc-text">é—®é¢˜1.ä½¿ç”¨FTPæŠ¥ftp: bind: Address already in useé”™è¯¯ã€‚</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#é—®é¢˜2-ä½¿ç”¨FTPftp-500-Illegal-PORT-command"><span class="post-toc-number">5.2.</span> <span class="post-toc-text">é—®é¢˜2.ä½¿ç”¨FTPftp:500 Illegal PORT command.</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#é—®é¢˜3-åœ¨windowsä¸Šä½¿ç”¨FTPå®¢æˆ·ç«¯ç™»å½•åæ‰§è¡Œpassiveå‘½ä»¤é—®é¢˜"><span class="post-toc-number">5.3.</span> <span class="post-toc-text">é—®é¢˜3.åœ¨windowsä¸Šä½¿ç”¨FTPå®¢æˆ·ç«¯ç™»å½•åæ‰§è¡Œpassiveå‘½ä»¤é—®é¢˜</span></a></li></ol></li></ol>
            </nav>
            <div class="toc-bar"><div>
        </aside>
    


    <!-- æ”¯ä»˜å®å¾®ä¿¡æ–‡ç« èµèµ -->
    
      <div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        å¦‚æœæ­¤ç¯‡æ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œå°±è¯·ä½œè€…å–æ¯ Coffee â˜•ï¸â˜•ï¸!
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardwechat" src="/img/reward-wechat.jpg" height="250" height="250" alt="å¾®ä¿¡æ‰“èµäºŒç»´ç ">
            <img id="rewardalipay" src="/img/reward-alipay.png" height="250" height="250" alt="æ”¯ä»˜å®æ‰“èµäºŒç»´ç ">
        </div>
        
        <label class="reward-toggle">
            <!-- <input id="rewardToggle" type="checkbox" class="reward-toggle-check" data-wechat="/img/reward-wechat.jpg" data-alipay="/img/reward-alipay.png"> -->
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">å¾®ä¿¡</span>
                <span class="reward-toggle-item alipay">æ”¯ä»˜å®</span>
            </div>
        </label>
        
    </div>
</div>

      

    <!-- å¾®ä¿¡å…¬ä¼—å·å…³æ³¨/æ–‡ç« ç‰ˆæƒå¤åˆ¶ -->
    
      <div id="btw-mask" style="position: fixed; top: 0px; right: 0px; bottom: 0px; left: 0px; opacity: 0.7; z-index: 999; background: rgb(0, 0, 0); display:none"></div>
<div id="btw-modal" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 360px; text-align: center; font-size: 13px; background: rgb(255, 255, 255); border-radius: 10px; z-index: 9999; font-family: PingFangSC-Regular, sans-serif;display:none">
<span id="btw-modal-close-btn" style="position: absolute; top: 5px; right: 15px; line-height: 1.8; font-size: 15px; cursor: pointer; opacity: 0.2; z-index: 9999; color: rgb(0, 0, 0); background: none; border: none; outline: none;">X</span>
<p id="btw-modal-header" style="margin-top: 40px; line-height: 1.8; font-size: 13px; ">
<b style="color:#6190e8;">ä½ å¥½çœ‹å‹,æ¬¢è¿å…³æ³¨åšä¸»å¾®ä¿¡å…¬ä¼—å·å“Ÿ! â¤ <br> è¿™å°†æ˜¯æˆ‘æŒç»­æ›´æ–°æ–‡ç« çš„åŠ¨åŠ›æºæ³‰ï¼Œè°¢è°¢æ”¯æŒï¼(à¹‘â€²á´—â€µà¹‘) </b> <br> å¦‚ä¸æƒ³å…³æ³¨è¯·ç‚¹å‡»å³ä¸Šè§’çš„ã€Xã€‘å³å¯å…³é—­ç»§ç»­æµè§ˆæ–‡ç« .<br>  <b style="color:red;"> æ¸©é¦¨æç¤º: æœªè§£é”çš„ç”¨æˆ·ä¸èƒ½ç²˜è´´å¤åˆ¶æ–‡ç« å†…å®¹å“Ÿ!</b> <br>
<br>Method 1.Please visit <strong><a href="https://twitter.com/WeiyiGeek" target="_blank" rel="noopener" style="color: rgb(240, 65, 52);text-decoration:underline;">ã€My Twitterã€‘</a></strong>. There is an article verification code in the homepage.
<br>æ–¹å¼2.è¯·è®¿é—®æœ¬åšä¸»çš„Bç«™<strong><a href="https://space.bilibili.com/385802642" target="_blank" rel="noopener" style="color: rgb(240, 65, 52);text-decoration:underline;">ã€WeiyiGeekã€‘</a></strong>é¦–é¡µå…³æ³¨UPä¸»,<br>å°†è‡ªåŠ¨éšæœºè·å–è§£é”éªŒè¯ç ã€‚
<br>æ–¹å¼3.æ‰«ä¸€æ‰«ä¸‹æ–¹äºŒç»´ç ï¼Œå…³æ³¨æœ¬ç«™<strong>å®˜æ–¹å…¬ä¼—å·</strong><br>
å›å¤ï¼š<strong style="color: rgb(240, 65, 52);">éªŒè¯ç </strong>
å°†è·å–<strong style="color: rgb(240, 65, 52);">è§£é”(æœ‰æ•ˆæœŸ7å¤©)</strong>æœ¬ç«™æ‰€æœ‰æŠ€æœ¯æ–‡ç« å“Ÿ!</p>
<img src="/img/wechat-search.png" style="width: 300px; margin-top: 10px;">
<div id="btw-modal-input-code" style="margin-top: 20px; background: rgb(255, 255, 255);">
  <input id="btw-modal-input" type="number" minlength="4" maxlength="4" placeholder="è¯·è¾“å…¥éªŒè¯ç |Verification Code"
    style="width: 165px; height: 32px; line-height: 32px; padding: 0px 10px; margin: 0px 10px; font-size: 13px; text-rendering: auto; text-transform: none; cursor: text; outline: none; box-sizing: border-box; border: 1px solid rgb(221, 221, 221); -webkit-appearance: textfield; background-color: white; -webkit-rtl-ordering: logical;"/>
  <button id="btw-submit-btn" onclick="yzm_vertify()"
    style="padding: 0px 20px; height: 32px; font-size: 14px; outline: none; border: none; color: rgb(255, 255, 255); background: rgb(222, 104, 109); cursor: pointer;">æ
    äº¤</button> </div>
<p id="btw-footer" style="margin: 40px 0px 20px; color: rgb(153, 153, 153);">@WeiyiGeek - ä¸ºäº†èƒ½åˆ°è¿œæ–¹ï¼Œè„šä¸‹çš„æ¯ä¸€æ­¥éƒ½ä¸èƒ½å°‘</p>
</div>
        
</article>
</div>

    </main>
    <footer class="footer ">
    
    <div class="top">
        
            <p>
    <span>Linksï¼š</span>
    
    <span class="blogroll-item">
        <a href="https://weiyigeek.top" target="_blank">https://weiyigeek.top</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.weiyigeek.top" target="_blank">https://blog.weiyigeek.top</a>
    </span>
    
    <span class="blogroll-item">
        <a href="/img/share-wechat.jpg" target="_blank">å…¬ä¼—è´¦å·</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://space.bilibili.com/385802642/article" target="_blank">å“”å“©å“”å“©ä¸“æ </a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://github.com/weiyigeek" target="_blank">åšä¸»Github</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://gitee.com/WeiyiGeek" target="_blank">åšä¸»Gitee</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.zhihu.com/people/weiyiSec" target="_blank">çŸ¥ä¹</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.cnblogs.com/WeiyiGeek" target="_blank">åšå®¢å›­</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://my.oschina.net/weiyigeek" target="_blank">OSCHINA</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.toutiao.com/c/user/token/MS4wLjABAAAAqcPSoMqfctaEqJpGSF775eeCjWkrop4AOyLITdMx-L78F5iXzfQcSRM5sY4dq3wR" target="_blank">ä»Šæ—¥å¤´æ¡</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.csdn.net/u013072756?type=lately" target="_blank">CSDN</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.jianshu.com/u/5199a1104739" target="_blank">ç®€ä¹¦</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://cloud.tencent.com/developer/user/1389665/articles" target="_blank">è…¾è®¯äº‘ç¤¾åŒº</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://cuttlefish.baidu.com/shop/75c5dbd8d15abe23482f4d40" target="_blank">ç™¾åº¦æ–‡åº“</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://author.baidu.com/home?from=blog&app_id=1726736601523415" target="_blank">ITæå®¢çŸ¥è¯†åˆ†äº«</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.51cto.com/weiyigeek" target="_blank">51CTOåšå®¢</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://juejin.cn/user/122767337595934" target="_blank">æ˜é‡‘</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://weibo.com/a/hot/7622022703618049_1.html" target="_blank">å¾®åšæ–‡ç« </a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.xiaohongshu.com/user/profile/627c98bb000000001000e7ba" target="_blank">å°çº¢ä¹¦</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://segmentfault.com/u/weiyigeek" target="_blank">Segmentfault</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.modb.pro/u/506690" target="_blank">å¢¨å¤©è½®</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.douyin.com/user/MS4wLjABAAAAMSBdMja6XLsdmzafb0RNbFeBemIOk38K1PaOClZeI1Q" target="_blank">æŠ–éŸ³ä¸»é¡µ</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.kuaishou.com/profile/3xfbrsrhd2i69x9" target="_blank">å¿«æ‰‹ä¸»é¡µ</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.ixigua.com/home/3984243135350727" target="_blank">è¥¿ç“œè§†é¢‘</a>
    </span>
    
</p>

        
    </div>
    
    <div class="bottom">
      <p>
        <span>WeiyiGeek &copy; 2018 - 2023 <a href="https://weiyigeek.top" target="_blank" rel="noopener">weiyigeek.top</a> All rights reserved.å”¯ä¸€æå®¢ITçŸ¥è¯†åˆ†äº« ç‰ˆæƒæ‰€æœ‰ </span>
        
        <span>
          Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/weiyigeek" target="_blank">mellow</a>
        </span>
        
        <br/><a id="SiteRunTime"></a>
        <br/>è®¿é—®ç»Ÿè®¡
        <span><a href="/sitemap.xml" target="_blank" rel="Sitemaps-ç«™ç‚¹åœ°å›¾">Sitemaps</a> </span>
        <span><a href="/baidusitemap.xml" target="_blank" rel="baidusitemaps-ç™¾åº¦ç«™ç‚¹åœ°å›¾">ç«™ç‚¹åœ°å›¾</a> </span>
        <!-- 
  -->
        <br/>ICPå¤‡æ¡ˆå·<span><a href="https://beian.miit.gov.cn" target="_blank">æ¸ICPå¤‡2022003447å·</a></span>
        <br/>
        <div id="cc-myssl-id">
          <a href="https://myssl.com/blog.weiyigeek.top?from=mysslid" target="_blank" rel="noopener">
            <img src="https://static.myssl.com/res/images/myssl-id1.png" alt="MySSLå®‰å…¨è®¤è¯" style="max-height:50px;display:block;margin:0 auto">
          </a>
        </div>
      </p>
    </div>
</footer>



    <div class="mask" id="mask"></div>

<div id="go" class="waves-effect waves-light">
  <a href="javascript:;" id="goqrcode"> <span class="icon icon-lg icon-qrcode"></span> </a>
  <a href="javascript:;" id="gotop"> <span class="icon icon-lg icon-chevron-up"></span></a>
</div>





<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://blog.weiyigeek.top/2019/10-4-74.html&title=ã€ŠFTPè¿œç¨‹æ–‡ä»¶ä¼ è¾“æœåŠ¡å®‰è£…ä¸é…ç½®ã€‹ â€” WeiyiGeek Blog&pic=https://blog.weiyigeek.top/img/avatar.jpg" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.weiyigeek.top/2019/10-4-74.html&title=ã€ŠFTPè¿œç¨‹æ–‡ä»¶ä¼ è¾“æœåŠ¡å®‰è£…ä¸é…ç½®ã€‹ â€” WeiyiGeek Blog&source=[TOC]" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.weiyigeek.top/2019/10-4-74.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€ŠFTPè¿œç¨‹æ–‡ä»¶ä¼ è¾“æœåŠ¡å®‰è£…ä¸é…ç½®ã€‹ â€” WeiyiGeek Blog&url=https://blog.weiyigeek.top/2019/10-4-74.html&via=https://blog.weiyigeek.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://blog.weiyigeek.top/2019/10-4-74.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>æ‰«ä¸€æ‰«ï¼Œåˆ†äº«åˆ°å¾®ä¿¡</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACLElEQVR42u3aSXIDIQwFUN//0k5VtnaTL4GTNDxWLk/weqFCw+MRr+f3unr/dV396vU7+acLFgYGxm0Zz+G62mD8zph0xbt6Pf5nDAyMcxjjIFsNqePHlBw9PxsGBgbGzF/3kBgYGBirGONUs/qdPwu4GBgYt2KsSkHH2/+LXBwDA+OGjGpj4Ddff7C/gYGBcRPGs7jmg2C1zRmdCgMDY2tGtejfu0p+IvRHN1wMDIwtGL30tdqMzAcykof75p8xMDC2ZvQS194FsVomyy+mGBgYezOSQNYbCKsOZORJ8ptdMDAwtmZUr2vzgxTV70RjFhgYGIcxepez5EGMk9t8zCIqumFgYBzDyMe8PnGJTFqeGBgYJzDy4n71QNWGaP74fii3YWBgbMfopZS9AYvq6Fjz0WBgYGzKqPY850NwdVAjGrbAwMA4hpEcrnrEPIDmIRgDA+McRt5orAbNXqvgg4krBgbGzRm9UJgcLhn86hXgClVDDAyMmzOq268dC1ub9GJgYOzK6F0KV7U8E3x0BgwMjGMYeeq4NgTnhbxmuQ0DA+PmjFWltyTFrY5/TSWxGBgYGzGexVUtt80McBRCMwYGxtaMfE21GIvNgPm9MDAw9mMkQTYPu9XGZzUoX+6FgYFxAGMmCK4aIJsK/RgYGBjF8Jckt/mnUZEOAwMDozhsUS2T9S6XGBgYpzF6SWy5U1psdhaGLTAwMLZmzDcGkrZib+O8pYqBgbEp4wuGTR3zEzK+agAAAABJRU5ErkJggg==" alt="å¾®ä¿¡åˆ†äº«äºŒç»´ç ">
</div>


    
    <!-- main-js -->
<script type="text/javascript" src="/js/jquery/2.1.0-jquery.min.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/plugins/fastclick.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/plugins/ios-orientationchange-fix.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/jquery/3.5.2-jquery.fancybox.min.js?v=1.6.6"></script>
<!--  //cdn.bootcss.com/node-waves/0.7.4/waves.min.js -->
<script type="text/javascript" src="/js/node-waves/0.7.4-waves.min.js?v=1.6.6"></script> 

<script type="text/javascript" src="/js/method.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/blog.js?v=1.6.6"></script>

<!-- third-party -->
<script type="text/javascript" src="/js/plugins/local_search.js?v=1.6.6"></script>
<script type="text/javascript">
	var search_path = "search.xml";
	if (search_path.length === 0) { search_path = "search.xml";}
	var path = "/" + search_path;
	searchFunc(path, "local-search-input", "local-search-result");
</script> 

<script> (adsbygoogle = window.adsbygoogle || []).push({});</script>    


<!-- <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> --> 


  


<script>
  var _hmt = _hmt || [];
  (function() {
    // ç™¾åº¦ç»Ÿè®¡
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?53923c4b5560739bc0ed61e183be6acf";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();
</script>
 


<!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
            processEscapes: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.staticfile.org/mathjax/2.7.9/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
 
<script>
    (function() {
        var OriginTitile = document.title, titleTime;
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                document.title = 'WeiyiGeek Blog-å…³æ³¨äºç½‘ç»œå®‰å…¨_ç‰©è”ç½‘å®‰å…¨å¼€å‘_ç½‘ç»œå®‰å…¨è¿ç»´-å­¦ä¹ å¿ƒå¾—åˆ†äº«';
                clearTimeout(titleTime);
            } else {
                document.title = '(ã¤ã‚§âŠ‚)å’¦!åˆå¥½äº†!';
                titleTime = setTimeout(function() {
                    document.title = OriginTitile;
                },2000);
            }
        });
    })();
</script>
 

     <script type="text/javascript" src="/js/custom/copytips.js?v=1.6.6"></script> 
<script type="text/javascript">
// ç«™ç‚¹è¿è¡Œæ—¶é—´
var BootDate = new Date("2018/01/01 00:00:00");
function ShowRunTime(id) {
  var NowDate = new Date();
  var RunDateM = parseInt(NowDate - BootDate);
  var RunDays = Math.floor(RunDateM/(24*3600*1000));
  var RunHours = Math.floor(RunDateM%(24*3600*1000)/(3600*1000));
  var RunMinutes = Math.floor(RunDateM%(24*3600*1000)%(3600*1000)/(60*1000));
  var RunSeconds = Math.round(RunDateM%(24*3600*1000)%(3600*1000)%(60*1000)/1000);
  var RunTime = RunDays + "å¤©" + RunHours + "æ—¶" + RunMinutes + "åˆ†" + RunSeconds + "ç§’";
  document.getElementById(id).innerHTML = "ç½‘ç«™å·²åœ¨é£é›¨ä¸­å‹‰å‹‰å¼ºå¼ºè¿è¡Œäº†ã€" + RunTime + "ã€‘";
}
setInterval("ShowRunTime('SiteRunTime')", 1000);
</script>
</body>
</html>