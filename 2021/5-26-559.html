<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="content-language" content="zh-CN"/>
    <meta name="author" content="WeiyiGeek" />
    <meta name="msvalidate.01" content="5C552FB1D885E0E11D2957EC958C8018" />
    <meta name="shenma-site-verification" content="4c655e91c76be0a93c1b6954c666c9d6_1649049085"/>
    <meta name="bytedance-verification-code" content="lKs4FqwCHSJ3A/c5tT7X" />
    <meta name="sogou_site_verification" content="OC65iET6Bk" />
    
    <title>ğŸŒ WindowsæœåŠ¡å™¨æ ¸å¿ƒ(Server-Core)å®‰è£…ä¸åŸºç¡€é…ç½®ä½¿ç”¨|WeiyiGeek Blog|å”¯ä¸€æå®¢Geek-ITç½‘ç»œå®‰å…¨è¿ç»´å¼€å‘æŠ€æœ¯çŸ¥è¯†åˆ†äº«-åšå®¢ç«™ç‚¹</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    
    <meta name="keywords" content="Server-Core">
    <meta name="Description" content="WeiyiGeek-å”¯ä¸€æå®¢åšå®¢ç«™ç‚¹,å…³æ³¨äºç½‘ç»œå®‰å…¨è¿ç»´,Webå®‰å…¨å¼€å‘,IOTç‰©è”ç½‘å®‰å…¨å¼€å‘,åº”ç”¨å¼€å‘,åˆ†äº«æŠ€æœ¯å­¦ä¹ çŸ¥è¯†ä¸å…¥å‘è§£å†³,æå‡ç½‘ç»œå®‰å…¨æŠ€æœ¯ä¸è‡ªèº«æŠ€æœ¯èƒ½åŠ›,ç«‹å¿—ç»´æŠ¤å¤§ä¼—ç½‘ç»œå®‰å…¨ä¸ºå·±ä»»,åšä¸€ä¸ªå¯¹å›½å®¶æœ‰ç”¨çš„äºº,ä¸ºå®ç°ä¸­åæ°‘æ—ä¼Ÿå¤§å¤å…´çš„ä¸­å›½æ¢¦ä¸æ‡ˆå¥‹æ–—">
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="/css/jquery/3.5.2-jquery.fancybox.min.css?v=1.6.6" />
    <link rel="stylesheet" href="/css/style.css?v=1.6.6">
    <!--  -->
     <script type="text/javascript" src="/js/custom/articlecost.js?v=1.6.6"></script> 
    <link rel="stylesheet" href="/css/third-party/gitalk.css?v=1.6.6"> 
    <script type="text/javascript">
        // Data Center
        var DC = {
            reward:	true,
            lv: JSON.parse('{"enable":false,"app_id":null,"app_key":null,"icon":true}'),
            v: JSON.parse('{"enable":false,"appid":null,"appkey":null,"notify":true,"verify":true,"placeholder":"give me some sugers plz...","avatar":"wavatar"}')
        };
    </script>
    <script type="text/javascript">window.lazyScripts=[];</script>
<meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="WeiyiGeek Blog" type="application/atom+xml">
</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="">
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap">
      
      <img src="/img/brand.jpg" class="brand-bg" alt="WeiyiGeek-backgroud">
      
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg" alt="WeiyiGeek-å¤´åƒ">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">WeiyiGeek</h5>
          <a href="mailto:master@weiyigeek.top" title="master@weiyigeek.top" class="mail">
            <span>m</span><span>a</span><span>s</span><span>t</span><span>e</span><span>r</span><span>@</span><span>w</span><span>e</span><span>i</span><span>y</span><span>i</span><span>g</span><span>e</span><span>e</span><span>k</span><span>.</span><span>t</span><span>o</span><span>p</span>
          </a>
        </hgroup>
        
        <ul class="menu-link">
          
              <li>
                <a href="https://weiyigeek.top/img/wechat-search.png" target="_blank">
                  <i class="icon icon-lg icon-wechat"></i>
                </a>
              </li>
            
              <li>
                <a href="https://github.com/weiyigeek" target="_blank">
                  <i class="icon icon-lg icon-github"></i>
                </a>
              </li>
            
              <li>
                <a href="https://t.me/WeiyiGeek" target="_blank">
                  <i class="icon icon-lg icon-telegram"></i>
                </a>
              </li>
            
              <li>
                <a href="https://twitter.com/WeiyiGeek" target="_blank">
                  <i class="icon icon-lg icon-twitter"></i>
                </a>
              </li>
            
              <li>
                <a href="https://weibo.com/615643678" target="_blank">
                  <i class="icon icon-lg icon-weibo"></i>
                </a>
              </li>
            
        </ul>
        
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                é¦–é¡µ
              </a>
            </li>
        
            <li class="">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                æ–‡ç« åˆ†ç±»
              </a>
            </li>
        
            <li class="">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                æ–‡ç« æ ‡ç­¾
              </a>
            </li>
        
            <li class="">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                æ–‡ç« å½’æ¡£
              </a>
            </li>
        
            <li class="">
              <a href="/books"  >
                <i class="icon icon-lg icon-book"></i>
                å­¦ä¹ ä¹¦ç±
              </a>
            </li>
        
            <li class="">
              <a href="/about"  >
                <i class="icon icon-lg icon-user"></i>
                å…³äºä½œè€…
              </a>
            </li>
        
            <li class="">
              <a href="/links"  >
                <i class="icon icon-lg icon-link"></i>
                ç«™ç‚¹å¯¼èˆª
              </a>
            </li>
        
            <li class="">
              <a href="https://weiyigeek.top/img/wechat-search.png" target="_blank" >
                <i class="icon icon-lg icon-wechat"></i>
                å…¬ä¼—è´¦å·
              </a>
            </li>
        
            <li class="">
              <a href="https://space.bilibili.com/385802642" target="_blank" >
                <i class="icon icon-lg icon-youtube-play"></i>
                å“”å“©å“”å“©
              </a>
            </li>
        
            <li class="">
              <a href="https://github.com/weiyigeek" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="">
              <a href="https://twitter.com/WeiyiGeek" target="_blank" >
                <i class="icon icon-lg icon-twitter"></i>
                Twitter
              </a>
            </li>
        
            <li class="">
              <a href="https://weibo.com/615643678" target="_blank" >
                <i class="icon icon-lg icon-weibo"></i>
                Weibo
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row clearfix">
        <a href="javascript:;" class="header-icon pull-left waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">
            <span>WindowsæœåŠ¡å™¨æ ¸å¿ƒ(Server-Core)å®‰è£…ä¸åŸºç¡€é…ç½®ä½¿ç”¨</span>
            
        </div>

        
        <a href="javascript:;" id="site_search_btn" class="header-icon pull-right waves-effect waves-circle waves-light">
            <i class="icon icon-lg icon-search"></i>
        </a>
        

        
            <a href="/atom.xml" class="header-icon pull-right waves-effect waves-circle waves-light">
                <i class="icon icon-lg icon-rss"></i>
            </a>
        
    </div>
</header>
<header class="content-header post-header">
    <img src="/img/banner.jpg" class="header-bg" alt="æ–‡ç« å¤´éƒ¨èƒŒæ™¯">
    <div class="container fade-scale">
        <h1 class="title">WindowsæœåŠ¡å™¨æ ¸å¿ƒ(Server-Core)å®‰è£…ä¸åŸºç¡€é…ç½®ä½¿ç”¨</h1>
        <h5 class="subtitle">
            
                <time datetime="2021-05-26T11:37:47.000Z" itemprop="datePublished" class="page-time">
  2021-05-26
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Windows-Server/">Windows-Server</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Windows-Server/Windows%E9%85%8D%E7%BD%AE/">Windowsé…ç½®</a></li></ul></li></ul>


            
        </h5>
        
    </div>
    

</header>

<div id="site_search">
    <div class="search-title clearfix">
        <span class="pull-left">
          <i class="icon icon-lg icon-search"></i>
        </span>
        <input type="text" id="local-search-input" name="q" results="0" placeholder="search my blog..." class="form-control pull-left"/>
        <a href="javascript:;" class="close pull-right waves-effect waves-circle waves-light">
          <i class="icon icon-lg icon-close"></i>
        </a>
    </div>
    <div id="local-search-result"></div>
</div>


<div class="container body-wrap">
    <article id="post-ç³»ç»Ÿè¿ç»´/Windows/ç³»ç»Ÿé…ç½®/Server/Core/WindowsæœåŠ¡å™¨æ ¸å¿ƒ(Server-Core)å®‰è£…ä¸åŸºç¡€é…ç½®ä½¿ç”¨"
  class="post-article article-type-post" itemprop="blogPost">
    <div class="post-card">
        <h1 class="post-card-title">WindowsæœåŠ¡å™¨æ ¸å¿ƒ(Server-Core)å®‰è£…ä¸åŸºç¡€é…ç½®ä½¿ç”¨</h1>
        <div class="post-meta">
            <time class="post-time" title="2021-05-26 19:37:47" datetime="2021-05-26T11:37:47.000Z"  itemprop="datePublished">2021-05-26</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Windows-Server/">Windows-Server</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Windows-Server/Windows%E9%85%8D%E7%BD%AE/">Windowsé…ç½®</a></li></ul></li></ul>



            

            


            
        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            
            <p>[TOC]</p>
<a id="more"></a>
<h2 id="0x00-å‰è¨€ç®€è¿°"><a href="#0x00-å‰è¨€ç®€è¿°" class="headerlink" title="0x00 å‰è¨€ç®€è¿°"></a>0x00 å‰è¨€ç®€è¿°</h2><h3 id="1-ç®€å•ä»‹ç»"><a href="#1-ç®€å•ä»‹ç»" class="headerlink" title="1.ç®€å•ä»‹ç»"></a>1.ç®€å•ä»‹ç»</h3><p><strong>Q: Windows Server ä¸­çš„æœåŠ¡å™¨æ ¸å¿ƒå®‰è£…é€‰é¡¹æ˜¯ä»€ä¹ˆ?</strong></p>
<blockquote>
<p>ç­”: â€œæœåŠ¡å™¨æ ¸å¿ƒâ€ é€‰é¡¹æ˜¯åœ¨éƒ¨ç½² <code>Windows Server Standard</code> æˆ– Datacenter ç‰ˆæœ¬æ—¶å¯ç”¨çš„æœ€å°å®‰è£…é€‰é¡¹ã€‚ æœåŠ¡å™¨æ ¸å¿ƒåŒ…æ‹¬å¤§å¤šæ•°ä½†å¹¶éå…¨éƒ¨æœåŠ¡å™¨è§’è‰²ã€‚</p>
</blockquote>
<p>Tips : å¾®è½¯ä»‹ç»æœåŠ¡å™¨æ ¸å¿ƒæ—¶è¯´é“å…¶é™ä½çš„ç¡¬ä»¶è¦æ±‚ã€ç£ç›˜å ç”¨é‡è¾ƒå°ï¼Œå‡å°äº†æ›´æ–°éœ€æ±‚å› æ­¤æ”»å‡»é¢æ›´å°ã€‚<br>Tips : åœ¨è®¾è®¡ä¸ŠæœåŠ¡å™¨æ ¸å¿ƒä¸­æ²¡æœ‰æ¡Œé¢,è™½ç„¶ç»´æŠ¤æ”¯æŒä¼ ç»Ÿçš„ä¸šåŠ¡åº”ç”¨ç¨‹åºå’ŒåŸºäºè§’è‰²çš„å·¥ä½œè´Ÿè·æ‰€éœ€çš„åŠŸèƒ½ï¼Œä½†æœåŠ¡å™¨æ ¸å¿ƒæ²¡æœ‰ä¼ ç»Ÿçš„æ¡Œé¢ç•Œé¢ã€‚ ç›¸åï¼ŒæœåŠ¡å™¨æ ¸å¿ƒæ—¨<code>åœ¨é€šè¿‡å‘½ä»¤è¡Œã€PowerShell æˆ– GUI å·¥å…·è¿›è¡Œè¿œç¨‹ç®¡ç†</code> (å¦‚ RSAT æˆ– Windows ç®¡ç†ä¸­å¿ƒ) ã€‚</p>
<p><br/></p>
<p><strong>Q: æœåŠ¡å™¨ (æ ¸å¿ƒ) vs Server æ¡Œé¢ä½“éªŒ?</strong></p>
<blockquote>
<p>1.Server Core : å®‰è£…æ¶ˆé™¤äº†å¯¹æŸäº›å¸¸ç”¨æœåŠ¡å™¨è§’è‰²çš„æ”¯æŒä¸æ˜¯å¿…éœ€çš„ä»»ä½•æœåŠ¡å’Œå…¶ä»–åŠŸèƒ½, ä¾‹å¦‚ Hyper-v æœåŠ¡å™¨ä¸éœ€è¦å›¾å½¢ç”¨æˆ·ç•Œé¢ (GUI) ï¼Œå› ä¸ºä½ å¯ä»¥ä»å‘½ä»¤è¡Œä½¿ç”¨ Windows PowerShell æˆ–ä½¿ç”¨ Hyper-v ç®¡ç†å™¨è¿œç¨‹ç®¡ç† Hyper-v çš„æ‰€æœ‰æ–¹é¢ã€‚<br>2.Server æ¡Œé¢ä½“éªŒ: å®‰è£…é€‰é¡¹çš„æœåŠ¡å™¨ä»å°†å®‰è£…è®¸å¤šæœåŠ¡å’Œå…¶ä»–ç»„ä»¶è€Œè¿™äº›ç»„ä»¶é€šå¸¸ä¸éœ€è¦ç”¨äºç‰¹å®šçš„ä½¿ç”¨æ–¹æ¡ˆã€‚</p>
</blockquote>
<p>é™¤äº†ä¸æä¾›UIç•Œé¢å¤–å…¶ä¸»è¦åŒºåˆ«å¦‚ä¸‹:</p>
<ul>
<li>1.Windowsç³»ç»Ÿçš„èµ„æºç®¡ç†å™¨<code>explorer</code>æ²¡æœ‰äº†ã€‚</li>
<li>2.ä¾èµ–MMCçš„æ§åˆ¶å°ç•Œé¢æ²¡æœ‰äº†æ„å‘³ç€è¿è¡Œ*.mscçš„å‘½ä»¤å°†æ— æ³•æ‰“å¼€ã€‚</li>
<li>3.æ§åˆ¶é¢æ¿é€‰é¡¹<code>control</code>ä¹Ÿæ²¡æœ‰äº†ã€‚</li>
<li>4.Window Internet Explorerä¹Ÿæ²¡æœ‰äº†ã€‚</li>
<li>5.æœåŠ¡å™¨æ ¸å¿ƒæ²¡æœ‰ä»»ä½•è¾…åŠ©å·¥å…·</li>
<li>6.æ²¡æœ‰ç”¨äºè®¾ç½®æœåŠ¡å™¨æ ¸å¿ƒçš„ OOBE (å…¨æ–°ä½“éªŒ)</li>
<li>7.æ— éŸ³é¢‘æ”¯æŒ</li>
</ul>
<p><br/></p>
<h3 id="2-ç‰ˆæœ¬åŒºåˆ«"><a href="#2-ç‰ˆæœ¬åŒºåˆ«" class="headerlink" title="2.ç‰ˆæœ¬åŒºåˆ«"></a>2.ç‰ˆæœ¬åŒºåˆ«</h3><p>æè¿°: ä¸‹è¡¨æ˜¾ç¤ºäº†åœ¨å…·æœ‰æ¡Œé¢ä½“éªŒçš„æœåŠ¡å™¨æ ¸å¿ƒä¸æœåŠ¡å™¨ä¸Šæœ¬åœ°å¯ç”¨çš„åº”ç”¨ç¨‹åº</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">åº”ç”¨ç¨‹åº 	Server Core 	æœåŠ¡å™¨ï¼ˆæä¾›æ¡Œé¢ä½“éªŒï¼‰</span><br><span class="line">å‘½ä»¤æç¤ºç¬¦ 	å¯ç”¨ 	å¯ç”¨</span><br><span class="line">Windows PowerShell/Microsoft .NET 	å¯ç”¨ 	å¯ç”¨</span><br><span class="line">Perfmon.exe 	ä¸å¯ç”¨ 	å¯ç”¨</span><br><span class="line">Windbg (GUI) 	å—æ”¯æŒ 	å—æ”¯æŒ</span><br><span class="line">Resmon.exe 	ä¸å¯ç”¨ 	å¯ç”¨</span><br><span class="line">Regedit 	å¯ç”¨ 	å¯ç”¨</span><br><span class="line">Fsutil.exe 	å¯ç”¨ 	å¯ç”¨</span><br><span class="line">Disksnapshot.exe 	ä¸å¯ç”¨ 	å¯ç”¨</span><br><span class="line">Diskpart.exe 	å¯ç”¨ 	å¯ç”¨</span><br><span class="line">Diskmgmt.msc 	ä¸å¯ç”¨ 	å¯ç”¨</span><br><span class="line">Devmgmt.msc 	ä¸å¯ç”¨ 	å¯ç”¨</span><br><span class="line">æœåŠ¡å™¨ç®¡ç†å™¨ 	ä¸å¯ç”¨ 	å¯ç”¨</span><br><span class="line">Mmc.exe 	ä¸å¯ç”¨ 	å¯ç”¨</span><br><span class="line">Eventvwr.msc 	ä¸å¯ç”¨ 	å¯ç”¨</span><br><span class="line">Wevtutil (äº‹ä»¶æŸ¥è¯¢) 	å¯ç”¨ 	å¯ç”¨</span><br><span class="line">Services.msc 	ä¸å¯ç”¨ 	å¯ç”¨</span><br><span class="line">æ§åˆ¶é¢æ¿ 	ä¸å¯ç”¨ 	å¯ç”¨</span><br><span class="line">Windows æ›´æ–° (GUI) 	ä¸å¯ç”¨ 	å¯ç”¨</span><br><span class="line">Windows èµ„æºç®¡ç†å™¨ 	ä¸å¯ç”¨ 	å¯ç”¨</span><br><span class="line">ä»»åŠ¡æ  	ä¸å¯ç”¨ 	å¯ç”¨</span><br><span class="line">ä»»åŠ¡æ é€šçŸ¥ 	ä¸å¯ç”¨ 	å¯ç”¨</span><br><span class="line">ä»»åŠ¡ç®¡ç†å™¨ 	å¯ç”¨ 	å¯ç”¨</span><br><span class="line">Internet Explorer æˆ– Edge 	ä¸å¯ç”¨ 	å¯ç”¨</span><br><span class="line">å†…ç½®å¸®åŠ©ç³»ç»Ÿ 	ä¸å¯ç”¨ 	å¯ç”¨</span><br><span class="line">Windows 10 Shell 	ä¸å¯ç”¨ 	å¯ç”¨</span><br><span class="line">Windows Media Player 	ä¸å¯ç”¨ 	å¯ç”¨</span><br><span class="line">PowerShell 	å¯ç”¨ 	å¯ç”¨</span><br><span class="line">PowerShell ISE 	ä¸å¯ç”¨ 	å¯ç”¨</span><br><span class="line">PowerShell è¾“å…¥æ³• 	å¯ç”¨ 	å¯ç”¨</span><br><span class="line">Mstsc.exe 	ä¸å¯ç”¨ 	å¯ç”¨</span><br><span class="line">è¿œç¨‹æ¡Œé¢æœåŠ¡ 	å¯ç”¨ 	å¯ç”¨</span><br><span class="line">Hyper-V ç®¡ç†å™¨ 	ä¸å¯ç”¨ 	å¯ç”¨</span><br><span class="line">è®°äº‹æœ¬* 	ä¸å¯ç”¨ 	å¯ç”¨</span><br></pre></td></tr></table></figure>
<p><br></p>
<h3 id="3-å‚è€ƒæ¥æº"><a href="#3-å‚è€ƒæ¥æº" class="headerlink" title="3.å‚è€ƒæ¥æº"></a>3.å‚è€ƒæ¥æº</h3><ul>
<li>3.1 <a href="https://docs.microsoft.com/zh-cn/windows-server/administration/server-core/what-is-server-core" target="_blank" rel="noopener">what-is-server-core</a></li>
<li>3.2 <a href="https://docs.microsoft.com/zh-cn/windows-server/administration/server-core/server-core-roles-and-services" target="_blank" rel="noopener">æœåŠ¡å™¨æ ¸å¿ƒä¸­åŒ…å«çš„è§’è‰²-æœåŠ¡å™¨æ ¸å¿ƒä¸­åŒ…å«çš„è§’è‰²æœåŠ¡-æœåŠ¡å™¨æ ¸å¿ƒä¸­åŒ…å«çš„è§’è‰²æœåŠ¡</a></li>
</ul>
<hr>
<h2 id="0x01-Server-Core-å®‰è£…éƒ¨ç½²"><a href="#0x01-Server-Core-å®‰è£…éƒ¨ç½²" class="headerlink" title="0x01 Server-Core å®‰è£…éƒ¨ç½²"></a>0x01 Server-Core å®‰è£…éƒ¨ç½²</h2><h3 id="1-ç¯å¢ƒå‡†å¤‡"><a href="#1-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="1.ç¯å¢ƒå‡†å¤‡"></a>1.ç¯å¢ƒå‡†å¤‡</h3><p>æè¿°: åœ¨æ­¤å¤„å‡†å¤‡å¦‚ä¸‹åˆ—ç¯å¢ƒè¿›è¡Œ<code>Server-Core 2019æ ‡å‡†ç‰ˆ(ä¸å¸¦æ¡Œé¢)çš„æ“ä½œç³»ç»Ÿ</code>å®‰è£…ã€‚</p>
<ul>
<li>(1) vSphere ESXI((åšä¸»çš„ç¯å¢ƒ) æˆ–è€… WorkStation</li>
<li>(2) Server-Core åŸºç¡€é…ç½® 4G 4C 80GB(ç£ç›˜);</li>
<li>(3) ISO æ“ä½œç³»ç»Ÿ: <code>cn_windows_server_2019_updated_march_2019_x64_dvd_c1ffb46c.iso</code></li>
</ul>
<p><br></p>
<h3 id="2-å®‰è£…æµç¨‹"><a href="#2-å®‰è£…æµç¨‹" class="headerlink" title="2.å®‰è£…æµç¨‹"></a>2.å®‰è£…æµç¨‹</h3><p>æè¿°: Server Core çš„å…¶å®‰è£…æµç¨‹å¤§è‡´ä¸æ¡Œé¢ç‰ˆæœ¬çš„å®‰è£…æµç¨‹å·®è·ä¸å¤§ï¼Œä¸‹é¢è¿›è¡Œç®€è¦è¯´æ˜ã€‚</p>
<ul>
<li><p>Step 1.åœ¨ VMware ESXi ä¸Šåˆ›å»º Windows Server Core 2019 çš„è™šæ‹Ÿæœºã€‚</p>
<figure class="image-box">
                <a rel=WindowsæœåŠ¡å™¨æ ¸å¿ƒ(Server-Core)å®‰è£…ä¸åŸºç¡€é…ç½®ä½¿ç”¨ href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/5/20210519143109.png" target="_blank" title="WeiyiGeek.VMware ESXi" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/5/20210519143109.png" alt="WeiyiGeek.VMware ESXi" title="" class=""></a>
                <p>WeiyiGeek.VMware ESXi</p>
            </figure>
</li>
<li><p>Step 2.å¯åŠ¨è™šæ‹Ÿæœºç‚¹å‡»ä¸‹ä¸€æ­¥-&gt; æˆ‘æ²¡æœ‰äº§å“å¯†é’¥ (I) -&gt; é€‰æ‹©<code>Server 2019 Standard</code>ä¸å¸¦æ¡Œé¢ä½“éªŒçš„ -&gt; é€‰æ‹©å®‰è£…ç£ç›˜ -&gt; è¿›è¡ŒWindows ç³»ç»Ÿçš„å®‰è£…ã€‚</p>
<figure class="image-box">
                <a rel=WindowsæœåŠ¡å™¨æ ¸å¿ƒ(Server-Core)å®‰è£…ä¸åŸºç¡€é…ç½®ä½¿ç”¨ href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/5/20210519143636.png" target="_blank" title="WeiyiGeek.Server 2019 Standard" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/5/20210519143636.png" alt="WeiyiGeek.Server 2019 Standard" title="" class=""></a>
                <p>WeiyiGeek.Server 2019 Standard</p>
            </figure>
<p>Tips : ä¸å¸¦â€œæ¡Œé¢ä½“éªŒâ€çš„ç‰ˆæœ¬æ˜¯â€æœåŠ¡å™¨æ ¸å¿ƒâ€å®‰è£…é€‰é¡¹</p>
</li>
<li><p>Step 3.å®‰è£…å®Œæˆåï¼Œé€šè¿‡VMwareè¿œç¨‹ä¼šè¯è¿æ¥è¿›å»ä¹‹åï¼Œé‡Œé¢å…¨æ˜¯é»‘ä¹ä¹çš„ä¸€ä¸ªå‘½ä»¤è¡Œå…¶å®ƒå•¥ä¹Ÿæ²¡æœ‰ï¼›é¦–æ¬¡<code>éœ€è¦è¿›è¡Œç”¨æˆ·å¯†ç æ›´æ”¹ -&gt; è¾“å…¥ç³»ç»Ÿå¯†ç  -&gt; å®Œæˆåä¼šå‡ºç°cmdå‘½ä»¤è¡Œ</code>ã€‚</p>
<figure class="image-box">
                <a rel=WindowsæœåŠ¡å™¨æ ¸å¿ƒ(Server-Core)å®‰è£…ä¸åŸºç¡€é…ç½®ä½¿ç”¨ href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/5/20210519144154.png" target="_blank" title="WeiyiGeek.Server Core åˆå§‹åŒ–è®¾ç½®" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/5/20210519144154.png" alt="WeiyiGeek.Server Core åˆå§‹åŒ–è®¾ç½®" title="" class=""></a>
                <p>WeiyiGeek.Server Core åˆå§‹åŒ–è®¾ç½®</p>
            </figure>
</li>
</ul>
<h2 id="0x02-Server-Core-ç®¡ç†é…ç½®"><a href="#0x02-Server-Core-ç®¡ç†é…ç½®" class="headerlink" title="0x02 Server-Core ç®¡ç†é…ç½®"></a>0x02 Server-Core ç®¡ç†é…ç½®</h2><p>æè¿°: ç”±äºæœåŠ¡å™¨æ ¸å¿ƒæ²¡æœ‰UIå› æ­¤éœ€è¦ä½¿ç”¨ <code>Windows PowerShell</code> cmdletã€å‘½ä»¤è¡Œå·¥å…·æˆ–è¿œç¨‹å·¥å…·æ¥æ‰§è¡ŒåŸºæœ¬çš„ç®¡ç†ä»»åŠ¡,åœ¨ä½¿ç”¨ä¸Šæ›´åƒæ˜¯åœ¨Linuxä¸Šçš„å‘½ä»¤è¡Œè€Œåœ¨Coreä¸­åˆ™é‡‡ç”¨PowerShellè¿›è¡Œç³»ç»Ÿçš„ä¸»è¦ç®¡ç†ï¼Œåœ¨PSä¸­éšå¤„éƒ½å¯ä»¥çœ‹è§Linux Shellçš„å½±å­ä¾‹å¦‚lsã€wget|curl(<code>åˆ«åæŒ‡å‘çš„æ˜¯Invoke-WebRequest</code>)ã€‚</p>
<p>å‚è€ƒåœ°å€: <a href="https://docs.microsoft.com/zh-cn/windows-server/administration/server-core/server-core-administer" target="_blank" rel="noopener">https://docs.microsoft.com/zh-cn/windows-server/administration/server-core/server-core-administer</a></p>
<p><br/></p>
<h3 id="1-æœåŠ¡å™¨IPåœ°å€åŠDNSè®¾ç½®"><a href="#1-æœåŠ¡å™¨IPåœ°å€åŠDNSè®¾ç½®" class="headerlink" title="1.æœåŠ¡å™¨IPåœ°å€åŠDNSè®¾ç½®"></a>1.æœåŠ¡å™¨IPåœ°å€åŠDNSè®¾ç½®</h3><p>æè¿°: å®‰è£…æœåŠ¡å™¨æ ¸å¿ƒæœåŠ¡å™¨æ—¶ï¼Œé»˜è®¤æƒ…å†µä¸‹å®ƒå…·æœ‰ DHCP åœ°å€ã€‚å¦‚æœéœ€è¦é™æ€ IP åœ°å€ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ­¥éª¤è¿›è¡Œè®¾ç½®ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># - 1.è¿è¡Œ get-netipinterface æŸ¥çœ‹ IP æ¥å£çš„ IfIndex åˆ—ä¸­çš„æ•°å­—æˆ– InterfaceDescription å­—ç¬¦ä¸²ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># - 2. è¿è¡Œä»¥ä¸‹ cmdlet ä»¥è®¾ç½®é™æ€ IP åœ°å€ï¼š</span></span><br><span class="line">New-NetIPaddress -InterfaceIndex 5 -IPAddress 10.10.107.220 -PrefixLength 24 -DefaultGateway 10.10.107.1</span><br><span class="line"></span><br><span class="line"><span class="comment"># - 3.æ·»åŠ å¤šä¸ª DNS æœåŠ¡å™¨ï¼Œè¯·è¿è¡Œä»¥ä¸‹ cmdlet</span></span><br><span class="line">Set-DNSClientServerAddress -InterfaceIndex 5 -ServerAddresses 223.6.6.6ï¼Œ223.5.5.5</span><br><span class="line"></span><br><span class="line"><span class="comment"># - 4.å¦‚æœéœ€è¦åˆ‡æ¢åˆ°ä½¿ç”¨ DHCP è¯·è¿è¡Œä¸‹é¢çš„cmdlet</span></span><br><span class="line">DnsClientServerAddress -InterfaceIndex 12 â€“ ResetServerAddressesã€‚</span><br></pre></td></tr></table></figure></p>
<figure class="image-box">
                <a rel=WindowsæœåŠ¡å™¨æ ¸å¿ƒ(Server-Core)å®‰è£…ä¸åŸºç¡€é…ç½®ä½¿ç”¨ href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/5/20210519152843.png" target="_blank" title="WeiyiGeek.IPåœ°å€åŠDNSè®¾ç½®" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/5/20210519152843.png" alt="WeiyiGeek.IPåœ°å€åŠDNSè®¾ç½®" title="" class=""></a>
                <p>WeiyiGeek.IPåœ°å€åŠDNSè®¾ç½®</p>
            </figure>
<p><br/></p>
<h3 id="2-é‡å‘½åæœåŠ¡å™¨åç§°"><a href="#2-é‡å‘½åæœåŠ¡å™¨åç§°" class="headerlink" title="2.é‡å‘½åæœåŠ¡å™¨åç§°"></a>2.é‡å‘½åæœåŠ¡å™¨åç§°</h3><p>æè¿°: ä½¿ç”¨ä»¥ä¸‹æ­¥éª¤é‡å‘½åæœåŠ¡å™¨<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># - 1.ä½¿ç”¨ hostname æˆ– ipconfig å‘½ä»¤ç¡®å®šæœåŠ¡å™¨çš„å½“å‰åç§°ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># - 2.è¿è¡Œ rename-Computer &lt;new_name&gt; ComputerName</span></span><br><span class="line">Rename-Computer WeiyiGeek</span><br><span class="line"></span><br><span class="line"><span class="comment"># - 3.é‡æ–°å¯åŠ¨è®¡ç®—æœºã€‚</span></span><br><span class="line">Restart-Computer</span><br></pre></td></tr></table></figure></p>
<p><br/></p>
<h3 id="3-å°†æœåŠ¡å™¨åŠ å…¥åˆ°åŸŸä¸­"><a href="#3-å°†æœåŠ¡å™¨åŠ å…¥åˆ°åŸŸä¸­" class="headerlink" title="3.å°†æœåŠ¡å™¨åŠ å…¥åˆ°åŸŸä¸­"></a>3.å°†æœåŠ¡å™¨åŠ å…¥åˆ°åŸŸä¸­</h3><p>æè¿°: ä½¿ç”¨ä»¥ä¸‹cmdletå°†è®¡ç®—æœºåŠ å…¥åŸŸã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -1.ç³»ç»Ÿå°†æç¤ºæ‚¨è¾“å…¥åŠ å…¥åŸŸçš„å‡­æ®å’ŒåŸŸåã€‚</span></span><br><span class="line">Add-Computer</span><br><span class="line"></span><br><span class="line"><span class="comment"># -2.å¦‚æœéœ€è¦å°†åŸŸç”¨æˆ·å¸æˆ·æ·»åŠ åˆ°æœ¬åœ°Administratorsç»„ï¼Œè¯·åœ¨å‘½ä»¤æç¤ºç¬¦ä¸‹ï¼ˆä¸åœ¨PowerShellçª—å£ä¸­ï¼‰è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</span></span><br><span class="line">net localgroup administrators /add &lt;DomainName&gt;\&lt;UserName&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># -3.æ‚¨å¯ä»¥é€šè¿‡è¿è¡Œâ€œé‡æ–°å¯åŠ¨è®¡ç®—æœºâ€æ¥å®Œæˆæ­¤æ“ä½œã€‚</span></span><br><span class="line">Restart-Computer</span><br></pre></td></tr></table></figure></p>
<p><br/></p>
<h3 id="4-æ¿€æ´»å®‰è£…çš„æœåŠ¡å™¨"><a href="#4-æ¿€æ´»å®‰è£…çš„æœåŠ¡å™¨" class="headerlink" title="4.æ¿€æ´»å®‰è£…çš„æœåŠ¡å™¨"></a>4.æ¿€æ´»å®‰è£…çš„æœåŠ¡å™¨</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># - 1.æä¾›æ“ä½œç³»ç»Ÿç›¸å¯¹åº”çš„å¯†é’¥è¿›è¡Œæ¿€æ´»</span></span><br><span class="line">slmgr.vbs -ipk &lt;productkey&gt;</span><br><span class="line"><span class="comment"># slmgr.vbs -ipk WMDGN-G9PQG-XVVXX-R3X43-63DFG</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># - 2.å¦‚æœæ¿€æ´»æˆåŠŸï¼Œæ‚¨å°†ä¸ä¼šæ”¶åˆ°æ¶ˆæ¯ã€‚</span></span><br><span class="line">slmgr.vbs -ato</span><br><span class="line"></span><br><span class="line"><span class="comment"># - 3.æ‚¨è¿˜å¯ä»¥é€šè¿‡ç”µè¯ã€ä½¿ç”¨å¯†é’¥ç®¡ç†æœåŠ¡ï¼ˆKMSï¼‰æœåŠ¡å™¨æˆ–è¿œç¨‹æ¿€æ´»æœåŠ¡å™¨ã€‚è¦è¿œç¨‹æ¿€æ´»ï¼Œè¯·ä»è¿œç¨‹è®¡ç®—æœºè¿è¡Œä»¥ä¸‹cmdletï¼š</span></span><br><span class="line">cscript windows\system32\slmgr.vbs &lt;ServerName&gt; &lt;UserName&gt; &lt;password&gt;:-ato</span><br></pre></td></tr></table></figure>
<p><br></p>
<h3 id="5-å¯ç”¨Serverçš„è¿œç¨‹æ¡Œé¢"><a href="#5-å¯ç”¨Serverçš„è¿œç¨‹æ¡Œé¢" class="headerlink" title="5.å¯ç”¨Serverçš„è¿œç¨‹æ¡Œé¢"></a>5.å¯ç”¨Serverçš„è¿œç¨‹æ¡Œé¢</h3><p>æè¿°: è™½ç„¶ Server Core ä¸æä¾›mstsc.exe è¿œç¨‹æ¡Œé¢è¿æ¥å·¥å…·ä½†å¯ä»¥æä¾›è¿œç¨‹è¿æ¥çš„æœåŠ¡ï¼Œä¾¿äºæˆ‘ä»¬å®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨è¿œç¨‹æ¡Œé¢å·¥å…·è¿›è¡Œè¿æ¥ã€‚</p>
<p>ä½†é»˜è®¤æƒ…å†µä¸‹Windows Server 2019å°†å¤–éƒ¨è¿œç¨‹æ¡Œé¢è®¿é—®è®¾ç½®ä¸ºç¦ç”¨ä½œä¸ºå®‰å…¨æªæ–½ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°ä»PowerShellä¸­å¯ç”¨å®ƒã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># - 1.æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Set-ItemPropery cmdletä¿®æ”¹å¯ç”¨(0)æˆ–ç¦ç”¨(1)è¿œç¨‹æ¡Œé¢çš„æ³¨å†Œè¡¨å€¼ï¼š</span></span><br><span class="line">Set-ItemProperty -Path <span class="string">'HKLM:\System\CurrentControlSet\Control\Terminal Server'</span> -name <span class="string">"fDenyTSConnections"</span> -value 0</span><br><span class="line"></span><br><span class="line"><span class="comment"># - 2.ä½¿ç”¨'Enable-NetFirewallRule'é…ç½®Windowsé˜²ç«å¢™ä»¥å…è®¸è¿œç¨‹æ¡Œé¢è¿æ¥ï¼š</span></span><br><span class="line">New-NetFirewallRule -Name <span class="string">"RDP"</span> -DisplayName <span class="string">"Remote Desktop Services"</span> -Description <span class="string">"Remote Desktop Services"</span> -Enabled True -Direction Inbound -Protocol TCP -Action Allow -LocalPort 3389</span><br><span class="line">  <span class="comment"># Name                  : RDP</span></span><br><span class="line">  <span class="comment"># DisplayName           : Remote Desktop Services</span></span><br><span class="line">  <span class="comment"># Description           :</span></span><br><span class="line">  <span class="comment"># DisplayGroup          :</span></span><br><span class="line">  <span class="comment"># Group                 :</span></span><br><span class="line">  <span class="comment"># Enabled               : True</span></span><br><span class="line">  <span class="comment"># Profile               : Any</span></span><br><span class="line">  <span class="comment"># Platform              : &#123;&#125;</span></span><br><span class="line">  <span class="comment"># Direction             : Inbound</span></span><br><span class="line">  <span class="comment"># Action                : Allow</span></span><br><span class="line">  <span class="comment"># EdgeTraversalPolicy   : Block</span></span><br><span class="line">  <span class="comment"># LooseSourceMapping    : False</span></span><br><span class="line">  <span class="comment"># LocalOnlyMapping      : False</span></span><br><span class="line">  <span class="comment"># Owner                 :</span></span><br><span class="line">  <span class="comment"># PrimaryStatus         : OK</span></span><br><span class="line">  <span class="comment"># Status                : å·²ä»å­˜å‚¨åŒºæˆåŠŸåˆ†æè§„åˆ™ã€‚ (65536)</span></span><br><span class="line">  <span class="comment"># EnforcementStatus     : NotApplicable</span></span><br><span class="line">  <span class="comment"># PolicyStoreSource     : PersistentStore</span></span><br><span class="line">  <span class="comment"># PolicyStoreSourceType : Local</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># - 3.å¯ç”¨è¿œç¨‹æ¡Œé¢æœåŠ¡</span></span><br><span class="line">Get-Service -DisplayName <span class="string">"*Remote Desktop Services*"</span> | Start-Service -passthru</span><br><span class="line">Status   Name               DisplayName</span><br><span class="line">------   ----               -----------</span><br><span class="line">Running  TermService        Remote Desktop Services</span><br><span class="line">Running  UmRdpService       Remote Desktop Services UserMode Po...</span><br><span class="line"></span><br><span class="line"><span class="comment"># - 4.åœ¨æˆ‘ä»¬çš„å®¢æˆ·ç«¯æ‰§è¡Œmstsc.mscè¿›è¡Œè¿æ¥åˆ°CoreæœåŠ¡å™¨ä¸­</span></span><br><span class="line">mstsc.exe /admin</span><br></pre></td></tr></table></figure>
<figure class="image-box">
                <a rel=WindowsæœåŠ¡å™¨æ ¸å¿ƒ(Server-Core)å®‰è£…ä¸åŸºç¡€é…ç½®ä½¿ç”¨ href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/5/20210519184736.png" target="_blank" title="WeiyiGeek.Core-Server" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/5/20210519184736.png" alt="WeiyiGeek.Core-Server" title="" class=""></a>
                <p>WeiyiGeek.Core-Server</p>
            </figure>
<p><br></p>
<h3 id="5-å¯ç”¨Windows-PowerShellè¿œç¨‹ç®¡ç†"><a href="#5-å¯ç”¨Windows-PowerShellè¿œç¨‹ç®¡ç†" class="headerlink" title="5.å¯ç”¨Windows PowerShellè¿œç¨‹ç®¡ç†"></a>5.å¯ç”¨Windows PowerShellè¿œç¨‹ç®¡ç†</h3><p>æè¿°: æ‚¨å¯ä»¥å¯ç”¨Windows PowerShellè¿œç¨‹å¤„ç†ï¼Œå³åœ¨ä¸€å°è®¡ç®—æœºä¸Šçš„Windows PowerShellä¸­é”®å…¥çš„å‘½ä»¤åœ¨å¦ä¸€å°è®¡ç®—æœºä¸Šè¿è¡Œã€‚</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -1.ä½¿ç”¨Enable-PSRemotingå¯ç”¨Windows PowerShellè¿œç¨‹å¤„ç†ã€‚</span></span><br><span class="line"><span class="built_in">Enable-PSRemoting</span> -Force</span><br><span class="line"></span><br><span class="line"><span class="comment"># -2.è®¾ç½®å½“å‰æœºå™¨é˜²ç«å¢™å…è®¸ICMPv4åè®®å…¥ç«™è§„åˆ™ã€‚</span></span><br><span class="line">New-NetFirewallRule -DisplayName <span class="string">"Allow Ping"</span> -Description <span class="string">"Allow ping"</span> -Protocol ICMPv4 -IcmpType <span class="number">8</span> -Enabled True -Profile Any -Action Allow </span><br><span class="line"></span><br><span class="line"><span class="comment"># -3.è®¾ç½®coreæœåŠ¡å™¨çš„è¿›è¡ŒWINRMç®¡ç†çš„é˜²æŠ¤å¢™é€šä¿¡è§„åˆ™(å¦‚æœå®‰å…¨ç»„æœ‰é™åˆ¶ï¼Œ è¯·å¼€æ”¾å¯¹æ­¤æœºå™¨å…¥æ–¹å‘çš„5985ï¼ˆHTTP)å’Œ5986(HTTPS)ç«¯å£)</span></span><br><span class="line">Set-NetFirewallRule -Name <span class="string">"WINRM-HTTP-In-TCP-PUBLIC"</span> -RemoteAddress Any</span><br><span class="line"></span><br><span class="line"><span class="comment"># -4.æœ¬åœ°å®¢æˆ·ç«¯æœºå™¨ä¸Šæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</span></span><br><span class="line">PS C:\WINDOWS\system32&gt; <span class="built_in">Get-Service</span> winrm | <span class="built_in">Start-Service</span></span><br><span class="line">PS C:\WINDOWS\system32&gt; <span class="built_in">Set-Item</span> WSMan:localhost\client\trustedhosts -value <span class="number">10.10</span>.<span class="number">107.220</span> -Force</span><br><span class="line">PS C:\WINDOWS\system32&gt; <span class="built_in">Enter-PsSession</span> -ComputerName <span class="number">10.10</span>.<span class="number">107.220</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -5.æ‰§è¡Œå‘½ä»¤éªŒè¯</span></span><br><span class="line">hostname</span><br></pre></td></tr></table></figure>
<figure class="image-box">
                <a rel=WindowsæœåŠ¡å™¨æ ¸å¿ƒ(Server-Core)å®‰è£…ä¸åŸºç¡€é…ç½®ä½¿ç”¨ href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/5/20210519160606.png" target="_blank" title="WeiyiGeek.Enter-PsSession" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/5/20210519160606.png" alt="WeiyiGeek.Enter-PsSession" title="" class=""></a>
                <p>WeiyiGeek.Enter-PsSession</p>
            </figure>
<p><br></p>
<h3 id="6-ä½¿ç”¨OpenSSHè¿œç¨‹ç®¡ç†Windows"><a href="#6-ä½¿ç”¨OpenSSHè¿œç¨‹ç®¡ç†Windows" class="headerlink" title="6.ä½¿ç”¨OpenSSHè¿œç¨‹ç®¡ç†Windows"></a>6.ä½¿ç”¨OpenSSHè¿œç¨‹ç®¡ç†Windows</h3><p>æè¿°: OpenSSH æ˜¯å®‰å…¨ Shell (SSH) å·¥å…·çš„å¼€æ”¾æºä»£ç ç‰ˆæœ¬ï¼ŒLinux åŠå…¶ä»–é Windows ç³»ç»Ÿçš„ç®¡ç†å‘˜ä½¿ç”¨æ­¤ç±»å·¥å…·è·¨å¹³å°ç®¡ç†è¿œç¨‹ç³»ç»Ÿï¼ŒOpenSSH åœ¨ 2018 å¹´ç§‹å­£å·²æ·»åŠ è‡³ Windowsï¼Œå¹¶åŒ…å«åœ¨ Windows 10 å’Œ Windows Server 2019 ä¸­ã€‚</p>
<p>OpenSSH æ˜¯ä¸€æ¬¾ç”¨äºè¿œç¨‹ç™»å½•çš„è¿æ¥å·¥å…·ï¼Œå®ƒä½¿ç”¨ SSH åè®®ã€‚å®ƒä¼šåŠ å¯†å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„æ‰€æœ‰æµé‡ï¼Œä»è€Œéæ­¢çªƒå¬ã€è¿æ¥åŠ«æŒå’Œå…¶ä»–æ”»å‡», SSH æ˜¯åŸºäºå®¢æˆ·ç«¯-æœåŠ¡å™¨ä½“ç³»ç»“æ„ï¼Œç”¨æˆ·åœ¨å…¶ä¸­å·¥ä½œçš„ç³»ç»Ÿæ˜¯å®¢æˆ·ç«¯ï¼Œæ‰€ç®¡ç†çš„è¿œç¨‹ç³»ç»Ÿæ˜¯æœåŠ¡å™¨ï¼Œ</p>
<p>å…¶åŒ…å«ä¸€ç³»åˆ—ç»„ä»¶å’Œå·¥å…·ï¼Œç”¨äºæä¾›ä¸€ç§å®‰å…¨ä¸”ç®€å•çš„è¿œç¨‹ç³»ç»Ÿç®¡ç†æ–¹æ³•ï¼Œå…¶ä¸­åŒ…æ‹¬ï¼š</p>
<ul>
<li>sshd.exe: å®ƒæ˜¯è¿œç¨‹æ‰€ç®¡ç†çš„ç³»ç»Ÿä¸Šå¿…é¡»è¿è¡Œçš„ SSH æœåŠ¡å™¨ç»„ä»¶</li>
<li>ssh.exe: å®ƒæ˜¯åœ¨ç”¨æˆ·çš„æœ¬åœ°ç³»ç»Ÿä¸Šè¿è¡Œçš„ SSH å®¢æˆ·ç«¯ç»„ä»¶</li>
<li>ssh-keygen.exe: ä¸º SSH ç”Ÿæˆã€ç®¡ç†å’Œè½¬æ¢èº«ä»½éªŒè¯å¯†é’¥</li>
<li>ssh-agent.exe: å­˜å‚¨ç”¨äºå…¬é’¥èº«ä»½éªŒè¯çš„ç§é’¥</li>
<li>ssh-add.exe: å°†ç§é’¥æ·»åŠ åˆ°æœåŠ¡å™¨å…è®¸çš„åˆ—è¡¨ä¸­</li>
<li>ssh-keyscan.exe: å¸®åŠ©ä»è®¸å¤šä¸»æœºæ”¶é›†å…¬ç”¨ SSH ä¸»æœºå¯†é’¥</li>
<li>sftp.exe: è¿™æ˜¯æä¾›å®‰å…¨æ–‡ä»¶ä¼ è¾“åè®®çš„æœåŠ¡ï¼Œé€šè¿‡ SSH è¿è¡Œ</li>
<li>scp.exe: æ˜¯åœ¨ SSH ä¸Šè¿è¡Œçš„æ–‡ä»¶å¤åˆ¶å®ç”¨å·¥å…·</li>
</ul>
<p>Tips: ä¸» OpenSSH å¼€æºé¡¹ç›®æ˜¯ç”± OpenBSD é¡¹ç›®çš„å¼€å‘äººå‘˜ç®¡ç†çš„ã€‚ æ­¤é¡¹ç›®çš„ Microsoft åˆ†æ”¯åœ¨ GitHub ä¸­(<a href="https://github.com/PowerShell/openssh-portable" target="_blank" rel="noopener">https://github.com/PowerShell/openssh-portable</a>)</p>
<p><strong>1) ä½¿ç”¨ PowerShell å®‰è£… OpenSSH</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># - 1.è‹¥è¦ä½¿ç”¨ PowerShell å®‰è£… OpenSSHï¼Œè¯·å…ˆä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ PowerShell</span></span><br><span class="line">Get-WindowsCapability -Online | ? Name -like <span class="string">'OpenSSH*'</span></span><br><span class="line">  <span class="comment"># Name  : OpenSSH.Client~~~~0.0.1.0</span></span><br><span class="line">  <span class="comment"># State : Installed</span></span><br><span class="line">  <span class="comment"># Name  : OpenSSH.Server~~~~0.0.1.0</span></span><br><span class="line">  <span class="comment"># State : NotPresent</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># - 2.ç„¶åæ ¹æ®éœ€è¦å®‰è£…æœåŠ¡å™¨æˆ–å®¢æˆ·ç«¯ç»„ä»¶(ä¸Šé¢å¯ä»¥çœ‹è§Clientå·²ç»å®‰è£…)ä¸‹é¢æˆ‘ä»¬ç›´æ¥å®‰è£…Serverç«¯å³å¯</span></span><br><span class="line"><span class="comment"># Install the OpenSSH Client</span></span><br><span class="line"><span class="comment"># Add-WindowsCapability -Online -Name OpenSSH.Client~~~~0.0.1.0</span></span><br><span class="line"><span class="comment"># Install the OpenSSH Server</span></span><br><span class="line">Add-WindowsCapability -Online -Name OpenSSH.Server~~~~0.0.1.0</span><br><span class="line"></span><br><span class="line"><span class="comment"># - 3.å®‰è£…å®Œæˆä¼šè¿”å›ä»¥ä¸‹è¾“å‡ºï¼š</span></span><br><span class="line">Path          :</span><br><span class="line">Online        : True</span><br><span class="line">RestartNeeded : False</span><br></pre></td></tr></table></figure><br><br/></p>
<p><strong>2) å¯åŠ¨å¹¶é…ç½® OpenSSH</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># - 4.å¯åŠ¨å¹¶é…ç½® SSH æœåŠ¡å™¨è‡ªåŠ¨å¯åŠ¨</span></span><br><span class="line">Get-Service sshd | Start-Service -PassThru </span><br><span class="line">Get-Service sshd | Set-Service -StartupType <span class="string">'Automatic'</span></span><br><span class="line">  <span class="comment"># Status   Name               DisplayName</span></span><br><span class="line">  <span class="comment"># ------   ----               -----------</span></span><br><span class="line">  <span class="comment"># Running  sshd               OpenSSH SSH Server</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># - 5.é˜²ç«å¢™è§„åˆ™æŸ¥çœ‹åº”è¯¥æœ‰ä¸€ä¸ªåä¸ºâ€œOpenSSH Server In TCPâ€çš„é˜²ç«å¢™è§„åˆ™ï¼Œåº”è¯¥å¯ç”¨è¯¥è§„åˆ™</span></span><br><span class="line">Get-NetFirewallRule -Name *ssh*</span><br><span class="line">  <span class="comment"># Name                  : OpenSSH-Server-In-TCP</span></span><br><span class="line">  <span class="comment"># DisplayName           : OpenSSH SSH Server (sshd)</span></span><br><span class="line">  <span class="comment"># Description           : Inbound rule for OpenSSH SSH Server (sshd)</span></span><br><span class="line">  <span class="comment"># DisplayGroup          : OpenSSH Server</span></span><br><span class="line">  <span class="comment"># Group                 : OpenSSH Server</span></span><br><span class="line">  <span class="comment"># Enabled               : True</span></span><br><span class="line">  <span class="comment"># Profile               : Any</span></span><br><span class="line">  <span class="comment"># Platform              : &#123;&#125;</span></span><br><span class="line">  <span class="comment"># Direction             : Inbound</span></span><br><span class="line">  <span class="comment"># Action                : Allow</span></span><br><span class="line">  <span class="comment"># EdgeTraversalPolicy   : Block</span></span><br><span class="line">  <span class="comment"># LooseSourceMapping    : False</span></span><br><span class="line">  <span class="comment"># LocalOnlyMapping      : False</span></span><br><span class="line">  <span class="comment"># Owner                 :</span></span><br><span class="line">  <span class="comment"># PrimaryStatus         : OK</span></span><br><span class="line">  <span class="comment"># Status                : å·²ä»å­˜å‚¨åŒºæˆåŠŸåˆ†æè§„åˆ™ã€‚ (65536)</span></span><br><span class="line">  <span class="comment"># EnforcementStatus     : NotApplicable</span></span><br><span class="line">  <span class="comment"># PolicyStoreSource     : PersistentStore</span></span><br><span class="line">  <span class="comment"># PolicyStoreSourceType : Local</span></span><br><span class="line">Get-NetFirewallRule -Name *ssh* | Get-NetFirewallPortFilter</span><br><span class="line">  <span class="comment"># Protocol      : TCP</span></span><br><span class="line">  <span class="comment"># LocalPort     : 22</span></span><br><span class="line">  <span class="comment"># RemotePort    : Any</span></span><br><span class="line">  <span class="comment"># IcmpType      : Any</span></span><br><span class="line">  <span class="comment"># DynamicTarget : Any</span></span><br><span class="line"><span class="comment">#å¦‚æœé˜²ç«å¢™ä¸å­˜åœ¨ï¼Œè¯·åˆ›å»ºä¸€ä¸ª</span></span><br><span class="line">New-NetFirewallRule -Name sshd -DisplayName <span class="string">'OpenSSH Server (sshd)'</span> -Enabled True -Direction Inbound -Protocol TCP -Action Allow -LocalPort 22</span><br></pre></td></tr></table></figure></p>
<p>Tips : å®‰è£… OpenSSH æœåŠ¡å™¨å°†åˆ›å»ºå¹¶å¯ç”¨ä¸€ä¸ªåä¸º OpenSSH-Server-In-TCP çš„é˜²ç«å¢™è§„åˆ™ã€‚ è¿™å…è®¸ç«¯å£ 22 ä¸Šçš„å…¥ç«™ SSH æµé‡ã€‚ å¦‚æœæœªå¯ç”¨æ­¤è§„åˆ™ä¸”æœªæ‰“å¼€æ­¤ç«¯å£ï¼Œé‚£ä¹ˆè¿æ¥å°†è¢«æ‹’ç»æˆ–é‡ç½®ã€‚<br><br/></p>
<p><strong>3) è¿æ¥OpenSSHæœåŠ¡ç«¯</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># - 6.æœ¬åœ°SSHå®¢æˆ·ç«¯è¿æ¥åˆ°è¿œç¨‹Windows Server CoreæœåŠ¡å™¨ä¸Šã€‚(è¯·åŠ¡å¿…ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ)</span></span><br><span class="line">PS C:\WINDOWS\system32&gt; ssh administrator@10.10.107.220</span><br><span class="line">  <span class="comment"># The authenticity of host '10.10.107.220 (10.10.107.220)' can't be established.ECDSA key fingerprint is SHA256:2gsICyg/iN268lJ6RzAtf7lsRr7yUG4qLAnQIjSKEio.</span></span><br><span class="line">  <span class="comment"># Are you sure you want to continue connecting (yes/no/[fingerprint])? yesWarning: Permanently added '10.10.107.220' (ECDSA) to the list of known hosts.</span></span><br><span class="line"><span class="comment"># ç³»ç»Ÿæ­¤æ—¶ä¼šæç¤ºä½ è¾“å…¥å¯†ç ã€‚ ä½œä¸ºå®‰å…¨é¢„é˜²æªæ–½ï¼Œå¯†ç åœ¨é”®å…¥çš„è¿‡ç¨‹ä¸­ä¸ä¼šæ˜¾ç¤ºã€‚</span></span><br><span class="line">  <span class="comment"># administrator@10.10.107.220's password:</span></span><br><span class="line">  <span class="comment"># Microsoft Windows [ç‰ˆæœ¬ 10.0.17763.379]  # é»˜è®¤æ˜¯ä»¥  Windows Command shell (cmd.exe) ä½œä¸ºç»ˆç«¯</span></span><br><span class="line">  <span class="comment"># (c) 2018 Microsoft Corporationã€‚ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚</span></span><br><span class="line"><span class="comment"># è¿æ¥åï¼Œä½ å°†çœ‹åˆ° Windows å‘½ä»¤è¡Œç•Œé¢æç¤ºç¬¦ï¼š</span></span><br><span class="line">administrator@WEIYIGEEK C:\Users\Administrator&gt;hostname</span><br><span class="line">WeiyiGeek</span><br></pre></td></tr></table></figure><br><br/></p>
<p><strong>4) ä¸º Windows ä¸­çš„ OpenSSH é…ç½®é»˜è®¤ shell</strong><br>æè¿°: åœ¨ Windows ä¸­ sshd é»˜è®¤æƒ…å†µä¸‹ä» <code>%programdata%\ssh\sshd_config</code> ä¸­è¯»å–é…ç½®æ•°æ®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä½¿ç”¨ -f å‚æ•°å¯åŠ¨ sshd æ¥æŒ‡å®šä¸åŒçš„é…ç½®æ–‡ä»¶,å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åœ¨å¯åŠ¨è¯¥æœåŠ¡æ—¶ï¼Œsshd å°†ä½¿ç”¨é»˜è®¤é…ç½®ç”Ÿæˆä¸€ä¸ªæ–‡ä»¶ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># - 1.é…ç½®æ–‡ä»¶æŸ¥çœ‹</span></span><br><span class="line">administrator@WEIYIGEEK C:\ProgramData\ssh&gt;more C:\ProgramData\ssh\sshd_config</span><br><span class="line"></span><br><span class="line"><span class="comment"># - 2.é€šè¿‡å°† shell å¯æ‰§è¡Œæ–‡ä»¶çš„å®Œæ•´è·¯å¾„æ·»åŠ åˆ° \SOFTWARE\OpenSSH å­—ç¬¦ä¸²å€¼ DefaultShell ä¸­çš„ Computer\HKEY_LOCAL_MACHINE\SOFTWARE\OpenSSHï¼Œåœ¨ Windows æ³¨å†Œè¡¨ä¸­é…ç½®é»˜è®¤ ssh shellã€‚</span></span><br><span class="line"><span class="comment"># ä¾‹å¦‚ï¼Œä»¥ä¸‹ Powershell å‘½ä»¤å°†é»˜è®¤ shell è®¾ç½®ä¸º PowerShell.exeï¼š</span></span><br><span class="line">New-ItemProperty -Path <span class="string">"HKLM:\SOFTWARE\OpenSSH"</span> -Name DefaultShell -Value <span class="string">"C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe"</span> -PropertyType String -Force</span><br><span class="line">  <span class="comment"># DefaultShell : C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe</span></span><br><span class="line">  <span class="comment"># PSPath       : Microsoft.PowerShell.Core\Registry::HKEY_LOCAL_MACHINE\SOFTWARE\OpenSSH</span></span><br><span class="line">  <span class="comment"># PSParentPath : Microsoft.PowerShell.Core\Registry::HKEY_LOCAL_MACHINE\SOFTWARE</span></span><br><span class="line">  <span class="comment"># PSChildName  : OpenSSH</span></span><br><span class="line">  <span class="comment"># PSDrive      : HKLM</span></span><br><span class="line">  <span class="comment"># PSProvider   : Microsoft.PowerShell.Core\Registry</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># - 3.ç™»é™†éªŒè¯æŸ¥çœ‹é…ç½®æ˜¯å¦ç”Ÿæ•ˆ</span></span><br><span class="line">PS C:\WINDOWS\system32&gt; ssh administrator@10.10.107.220</span><br><span class="line">  <span class="comment"># administrator@10.10.107.220's password:</span></span><br><span class="line">  <span class="comment"># Windows PowerShell   # åˆ‡æ¢åé‡‡ç”¨</span></span><br><span class="line">  <span class="comment"># ç‰ˆæƒæ‰€æœ‰ (C) Microsoft Corporationã€‚ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚</span></span><br></pre></td></tr></table></figure></p>
<p><br></p>
<p><strong>5) OpenSSH å¯†é’¥ç®¡ç†</strong><br>æè¿°:å¯¹äº Windows OpenSSH çš„ AuthenticationMethodsï¼Œå”¯ä¸€å¯ç”¨çš„èº«ä»½éªŒè¯æ–¹æ³•æ˜¯<code>â€œpasswordâ€å’Œâ€œpublickeyâ€</code>ã€‚Windows ç¯å¢ƒä¸­çš„å¤§å¤šæ•°èº«ä»½éªŒè¯éƒ½æ˜¯ä½¿ç”¨ç”¨æˆ·å-å¯†ç ï¼ˆpasswordï¼‰å¯¹å®Œæˆçš„é€‚ç”¨äºå…±äº«å…¬å…±åŸŸçš„ç³»ç»Ÿ(å¯èƒ½ä¼šå¯¼è‡´å…³é”®ä¿¡æ¯æ³„éœ²)ï¼Œè·¨åŸŸå·¥ä½œæ—¶ï¼ˆä¾‹å¦‚åœ¨æœ¬åœ°å’Œäº‘æ‰˜ç®¡çš„ç³»ç»Ÿä¹‹é—´ï¼‰å¾ˆå®¹æ˜“å—åˆ°æš´åŠ›æ”»å‡»å…¥ä¾µã€‚æ‰€ä»¥ç›¸æ¯”ä¹‹ä¸‹ Linux ç¯å¢ƒé€šå¸¸ä½¿ç”¨å…¬é’¥/ç§é’¥(<code>publickey</code>)å¯¹æ¥é©±åŠ¨èº«ä»½éªŒè¯ï¼Œè¿™ä¸è¦æ±‚ä½¿ç”¨å¯æ¨æµ‹çš„å¯†ç ã€‚ OpenSSH æä¾›äº†å·¥å…·æ¥å¸®åŠ©æ”¯æŒæ­¤ç”¨é€”ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p>
<ul>
<li>ssh-keygen ï¼Œç”¨äºç”Ÿæˆå®‰å…¨çš„å¯†é’¥</li>
<li>ssh-agent å’Œ ssh-add ï¼Œç”¨äºå®‰å…¨åœ°å­˜å‚¨ç§é’¥</li>
<li>scp å’Œ sftp ï¼Œåœ¨é¦–æ¬¡ä½¿ç”¨æœåŠ¡å™¨æ—¶å®‰å…¨åœ°å¤åˆ¶å…¬é’¥æ–‡ä»¶</li>
</ul>
<p>Tips : å¯†é’¥å¯¹æŒ‡çš„æ˜¯ç”±ç‰¹å®šçš„èº«ä»½éªŒè¯åè®®ä½¿ç”¨çš„å…¬é’¥å’Œç§é’¥æ–‡ä»¶, SSH å…¬é’¥èº«ä»½éªŒè¯ä½¿ç”¨ä¸å¯¹ç§°åŠ å¯†ç®—æ³•æ¥ç”Ÿæˆä¸¤ä¸ªå¯†é’¥æ–‡ä»¶<code>ä¸€ä¸ªä¸ºâ€œç§é’¥â€æ–‡ä»¶ï¼Œä¸€ä¸ªä¸ºâ€œå…¬é’¥â€æ–‡ä»¶</code>ã€‚</p>
<ul>
<li>Step 1.<code>ä¸»æœºå¯†é’¥ç”Ÿæˆ</code>:å…¶å…·æœ‰ç‰¹å®šçš„ ACL è¦æ±‚ï¼Œåœ¨ Windows ä¸Šè¿™äº›è¦æ±‚ç­‰åŒäºä»…å…è®¸ç®¡ç†å‘˜å’Œ System è¿›è¡Œè®¿é—®ï¼Œè‹¥è¦ä½¿ç”¨ SSH æœåŠ¡å™¨è½»æ¾è¿›è¡Œå¯†é’¥èº«ä»½éªŒè¯ï¼Œè¯·åœ¨æƒé™æå‡çš„ PowerShell æç¤ºç¬¦ä¸‹è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å·²åˆ›å»ºäº† OpenSSHUtils PowerShell æ¨¡å—æ¥æ­£ç¡®è®¾ç½®å¯†é’¥ ACLï¼Œå¹¶ä¸”åº”å½“å°†è¯¥æ¨¡å—å®‰è£…åœ¨æœåŠ¡å™¨ä¸Š</span></span><br><span class="line">Install-Module -Force OpenSSHUtils -Scope AllUsers</span><br><span class="line"></span><br><span class="line"><span class="comment"># é¦–æ¬¡ä½¿ç”¨ sshd æ—¶ï¼Œå°†è‡ªåŠ¨ç”Ÿæˆä¸»æœºçš„å¯†é’¥å¯¹ã€‚å¦‚æœ ssh-agent æ­£åœ¨è¿è¡Œåˆ™å¯†é’¥å°†è‡ªåŠ¨æ·»åŠ åˆ°æœ¬åœ°å­˜å‚¨ä¸­ã€‚</span></span><br><span class="line">Get-Service -Name ssh-agent | Set-Service -StartupType Manual</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯åŠ¨sshä»£ç†æœåŠ¡ä»¥ä¿ç•™æœåŠ¡å™¨å¯†é’¥</span></span><br><span class="line">Start-Service ssh-agent</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç°åœ¨å¯åŠ¨sshdæœåŠ¡</span></span><br><span class="line">Start-Service sshd</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>Tips : ç”±äºæ²¡æœ‰ä¸ sshd æœåŠ¡å…³è”çš„ç”¨æˆ·ï¼Œå› æ­¤ä¸»æœºå¯†é’¥å­˜å‚¨åœ¨ <code>\ProgramData\ssh</code> ä¸‹ã€‚</p>
<ul>
<li><p>Step 2.<code>ç”¨æˆ·å¯†é’¥ç”Ÿæˆ</code>: è‹¥è¦ä½¿ç”¨åŸºäºå¯†é’¥çš„èº«ä»½éªŒè¯ï¼Œé¦–å…ˆéœ€è¦ä¸ºå®¢æˆ·ç«¯ç”Ÿæˆä¸€äº›å…¬é’¥/ç§é’¥å¯¹ã€‚é€šè¿‡ PowerShell æˆ– cmdä½¿ç”¨ ssh-keygen ç”Ÿæˆä¸€äº›å¯†é’¥æ–‡ä»¶ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># - å¯†é’¥ç”Ÿæˆä¸Linuxç±»ä¼¼é‡‡ç”¨ ssh-keygenå‘½ä»¤ï¼ˆå¯é‡‡ç”¨-tæŒ‡å®šå¯†é’¥ç±»å‹ï¼‰</span></span><br><span class="line"><span class="built_in">cd</span> ~\.ssh\</span><br><span class="line">ssh-keygen</span><br><span class="line"></span><br><span class="line"><span class="comment"># - ç°åœ¨ä½ æœ‰äº†ä¸€ä¸ªå…¬é’¥/ç§é’¥ ED25519 å¯†é’¥å¯¹ï¼ˆ.pub æ–‡ä»¶æ˜¯å…¬é’¥ï¼Œå…¶ä½™çš„æ˜¯ç§é’¥ï¼‰ï¼š</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Step 3.ç§é’¥æ–‡ä»¶ç­‰æ•ˆäºå¯†ç åº”å½“é‡‡ç”¨ä¸ä¿æŠ¤å¯†ç ç›¸åŒçš„æ–¹å¼æ¥ä¿æŠ¤å®ƒã€‚ä¸ºäº†å®ç°æ­¤ç›®çš„è¯·ä½¿ç”¨ ssh-agent æ¥å°†ç§é’¥å®‰å…¨åœ°å­˜å‚¨åœ¨ä¸ä½ çš„ Windows ç™»å½•å…³è”çš„ Windows å®‰å…¨ä¸Šä¸‹æ–‡ä¸­ã€‚ ä¸ºæ‰§è¡Œè¯¥æ“ä½œï¼Œè¯·ä»¥ç®¡ç†å‘˜èº«ä»½å¯åŠ¨ ssh-agent æœåŠ¡å¹¶ä½¿ç”¨ ssh-add æ¥å­˜å‚¨ç§é’¥ã€‚</p>
</li>
</ul>
<ul>
<li>Step 4.<code>å…¬é’¥éƒ¨ç½²</code>: è‹¥è¦ä½¿ç”¨ä¸Šé¢åˆ›å»ºçš„ç”¨æˆ·å¯†é’¥ï¼Œéœ€è¦å°†å…¬é’¥æ”¾ç½®åœ¨æœåŠ¡å™¨ä¸Šçš„ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ä¸­ï¼Œè¯¥æ–‡ä»¶åä¸º authorized_keysï¼Œä½äº <code>users\username\.ssh\</code> ä¸‹, å°†å…¬é’¥ (~.ssh\id_ed25519.pub) çš„å†…å®¹ç§»åŠ¨åˆ°æœåŠ¡å™¨/ä¸»æœºä¸Š ~.ssh ä¸­åä¸º authorized_keys çš„æ–‡æœ¬æ–‡ä»¶ä¸­ã€‚</li>
</ul>
<p>æ­¤ç¤ºä¾‹ä½¿ç”¨äº†ä¹‹å‰åœ¨ä¸Šé¢çš„è¯´æ˜ä¸­åœ¨ä¸»æœºä¸Šå®‰è£…çš„ OpenSSHUtils æ¨¡å—ä¸­çš„ <code>Repair-AuthorizedKeyPermissions</code>å‡½æ•°ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Make sure that the .ssh directory exists in your server's home folder</span></span><br><span class="line">ssh user1@domain1@contoso.com mkdir C:\users\user1\.ssh\</span><br><span class="line"></span><br><span class="line"><span class="comment"># Use scp to copy the public key file generated previously to authorized_keys on your server</span></span><br><span class="line">scp C:\Users\user1\.ssh\id_ed25519.pub user1@domain1@contoso.com:C:\Users\user1\.ssh\authorized_keys</span><br><span class="line"></span><br><span class="line"><span class="comment"># Appropriately ACL the authorized_keys file on your server</span></span><br><span class="line">ssh --% user1@domain1@contoso.com powershell -c <span class="variable">$ConfirmPreference</span> = <span class="string">'None'</span>; Repair-AuthorizedKeyPermission C:\Users\user1\.ssh\authorized_keys</span><br></pre></td></tr></table></figure></p>
<p>Tips : AuthorizedKeysFile é»˜è®¤å€¼ä¸º<code>â€œ.ssh/authorized_keys .ssh/authorized_keys2â€</code>ã€‚ å¦‚æœè·¯å¾„ä¸æ˜¯ç»å¯¹è·¯å¾„ï¼Œåˆ™å®ƒç›¸å¯¹äºç”¨æˆ·çš„ä¸»ç›®å½•ï¼ˆæˆ–é…ç½®æ–‡ä»¶å›¾åƒè·¯å¾„ï¼‰ã€‚<br>è¯·æ³¨æ„å¦‚æœç”¨æˆ·å±äºç®¡ç†å‘˜ç»„ï¼Œåˆ™æ”¹ä¸ºä½¿ç”¨ <code>%programdata%/ssh/administrators_authorized_keysã€‚</code></p>
<p>Tips : è¿™äº›æ­¥éª¤å®Œæˆäº†å¯¹ Windows ä¸Šçš„ SSH ä½¿ç”¨åŸºäºå¯†é’¥çš„èº«ä»½éªŒè¯æ‰€éœ€çš„é…ç½®,å®Œæˆæ­¤é¡¹åç”¨æˆ·å¯ä»¥ä»å…·æœ‰ç§é’¥çš„ä»»ä½•å®¢æˆ·ç«¯è¿æ¥åˆ° sshd ä¸»æœºã€‚<br><br/></p>
<p><strong>6) ä½¿ç”¨ PowerShell å¸è½½ OpenSSH</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># - 7.ä½¿ç”¨ PowerShell å¸è½½ OpenSSH (å¦‚æœåœ¨å¸è½½æ—¶æœåŠ¡æ­£åœ¨ä½¿ç”¨ä¸­ï¼Œç¨åå¯èƒ½éœ€è¦é‡å¯ Windowsã€‚)</span></span><br><span class="line"><span class="comment"># Uninstall the OpenSSH Client</span></span><br><span class="line">Remove-WindowsCapability -Online -Name OpenSSH.Client~~~~0.0.1.0</span><br><span class="line"></span><br><span class="line"><span class="comment"># Uninstall the OpenSSH Server</span></span><br><span class="line">Remove-WindowsCapability -Online -Name OpenSSH.Server~~~~0.0.1.0</span><br></pre></td></tr></table></figure></p>

        </div>
        
  <hr>
  <p> æ¬¢è¿å„ä½å¿—åŒé“åˆçš„æœ‹å‹ä¸€èµ·å­¦ä¹ äº¤æµï¼Œå¦‚æ–‡ç« æœ‰è¯¯è¯·åœ¨ä¸‹æ–¹ç•™ä¸‹æ‚¨å®è´µçš„ç»éªŒçŸ¥è¯†ï¼Œä¸ªäººé‚®ç®±åœ°å€<b style="color:#ff654e"><code>ã€master#weiyigeek.topã€‘</code></b>æˆ–è€…ä¸ªäººå…¬ä¼—å·<b style="color:#ff654e"><code>ã€WeiyiGeekã€‘</code></b>è”ç³»æˆ‘ã€‚ </p>

  <p> æ›´å¤šæ–‡ç« æ¥æºäº<b style="color:#03a9f4">ã€WeiyiGeek Blog - ä¸ºäº†èƒ½åˆ°è¿œæ–¹ï¼Œè„šä¸‹çš„æ¯ä¸€æ­¥éƒ½ä¸èƒ½å°‘ã€‘</b>, ä¸ªäººé¦–é¡µåœ°å€( <a style="color: #03a9f4;" href="https://weiyigeek.top" target="_blank"> https://weiyigeek.top </a> )</p>

  <p>ä¸“æ ä¹¦å†™ä¸æ˜“ï¼Œå¦‚æœæ‚¨è§‰å¾—è¿™ä¸ªä¸“æ è¿˜ä¸é”™çš„ï¼Œè¯·ç»™è¿™ç¯‡ä¸“æ  <b style="color: red;">ã€ç‚¹ä¸ªèµã€æŠ•ä¸ªå¸ã€æ”¶ä¸ªè—ã€å…³ä¸ªæ³¨ï¼Œè½¬ä¸ªå‘ã€‘(äººé—´äº”å¤§æƒ…)</b>ï¼Œè¿™å°†å¯¹æˆ‘çš„è‚¯å®šï¼Œè°¢è°¢ï¼ã€‚</p>

  <div>
    <img src="https://www.weiyigeek.top/img/weiyigeek.jpg" class="img-responsive" alt="WeiyiGeek-banner">
  </div>

  <ul style="font-weight: bolder;">
    <li>
      <p><span style="color: #03a9f4">echo&nbsp;&nbsp;"ã€ç‚¹ä¸ªèµã€‘ï¼ŒåŠ¨åŠ¨ä½ é‚£ç²—å£®çš„æ‹‡æŒ‡æˆ–è€…èŠŠèŠŠç‰æ‰‹ï¼Œäº²ï¼"</span></p>
    </li>
    <li>
      <p><span style="color: #ff9201">printf("%s",&nbsp;"ã€æŠ•ä¸ªå¸ã€‘ï¼Œä¸‡æ°´åƒå±±æ€»æ˜¯æƒ…ï¼ŒæŠ•ä¸ªç¡¬å¸è¡Œä¸è¡Œï¼Œäº²ï¼")</span></p>
    </li>
    <li>
      <p><span style="color: #02a2ff">fmt.Printf("ã€æ”¶ä¸ªè—ã€‘ï¼Œé˜…åå³ç„šä¸åƒç°ï¼Œäº²ï¼")&nbsp;&nbsp;</span></p>
    </li>
    <li>
      <p><span style="color:red">console.info("ã€è½¬ä¸ªå‘ã€‘ï¼Œè®©æ›´å¤šçš„å¿—åŒé“åˆçš„æœ‹å‹ä¸€èµ·å­¦ä¹ äº¤æµï¼Œäº²ï¼")</span></p>
    </li>
    <li>
      <p><span style="color: #ff654e">System.out.println("ã€å…³ä¸ªæ³¨ã€‘ï¼Œåç»­æµè§ˆæŸ¥çœ‹ä¸è¿·è·¯å“Ÿï¼Œäº²ï¼")</span></p>
    </li>
  </ul>

  <div>
    <img src="https://www.weiyigeek.top/img/wechat-search.png" class="img-responsive" alt="æ‰«æfollow(å…³æ³¨)WeiyiGeekå…¬ä¼—å·"  width="328" height="149">
  </div>

  <hr>
  


  <blockquote class="post-copyright">
    <div class="content">
      
        
<span class="post-time">
    æœ€åæ›´æ–°æ—¶é—´ï¼š<time datetime="2022-03-29T05:39:06.300Z" itemprop="dateUpdated">2022-03-29 13:39:06</time>
</span><br>


        <span>æ–‡ç« åŸå§‹è·¯å¾„ï¼š<a href="https://github.com/WeiyiGeek/blog/edit/master/source/_posts/ç³»ç»Ÿè¿ç»´/Windows/ç³»ç»Ÿé…ç½®/Server/Core/WindowsæœåŠ¡å™¨æ ¸å¿ƒ(Server-Core)å®‰è£…ä¸åŸºç¡€é…ç½®ä½¿ç”¨.md" target="_blank" rel="noopener noreferrer">_posts/ç³»ç»Ÿè¿ç»´/Windows/ç³»ç»Ÿé…ç½®/Server/Core/WindowsæœåŠ¡å™¨æ ¸å¿ƒ(Server-Core)å®‰è£…ä¸åŸºç¡€é…ç½®ä½¿ç”¨.md</a></span><br>
         <span class="copy-copyright">è½¬è½½æ³¨æ˜å‡ºå¤„ï¼ŒåŸæ–‡åœ°å€ï¼š<a href="/2021/5-26-559.html" target="_blank" rel="external">https://blog.weiyigeek.top/2021/5-26-559.html</a></span><br>æœ¬ç«™æ–‡ç« å†…å®¹éµå¾ª <a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">çŸ¥è¯†å…±äº« ç½²å - éå•†ä¸šæ€§ - ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…åè®®</a> 
    </div>
    <footer>
      <a href="https://blog.weiyigeek.top">
        <img src="/img/avatar.jpg" alt="WeiyiGeek">
        WeiyiGeek
      </a>
    </footer>
  </blockquote>


        
            <div class="page-reward">
  <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-rectangle waves-light">ğŸ‘ é’Ÿæ„ä½œè€…</a>
</div>
            
        
        <div class="post-footer">
            
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Server-Core/" rel="tag">Server-Core</a></li></ul>

            <div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://blog.weiyigeek.top/2021/5-26-559.html&title=ã€ŠWindowsæœåŠ¡å™¨æ ¸å¿ƒ(Server-Core)å®‰è£…ä¸åŸºç¡€é…ç½®ä½¿ç”¨ã€‹ â€” WeiyiGeek Blog&pic=https://blog.weiyigeek.top/img/avatar.jpg" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.weiyigeek.top/2021/5-26-559.html&title=ã€ŠWindowsæœåŠ¡å™¨æ ¸å¿ƒ(Server-Core)å®‰è£…ä¸åŸºç¡€é…ç½®ä½¿ç”¨ã€‹ â€” WeiyiGeek Blog&source=[TOC]" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.weiyigeek.top/2021/5-26-559.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€ŠWindowsæœåŠ¡å™¨æ ¸å¿ƒ(Server-Core)å®‰è£…ä¸åŸºç¡€é…ç½®ä½¿ç”¨ã€‹ â€” WeiyiGeek Blog&url=https://blog.weiyigeek.top/2021/5-26-559.html&via=https://blog.weiyigeek.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://blog.weiyigeek.top/2021/5-26-559.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>

        </div>
        
          <!-- è¯„è®ºç»„ä»¶ -->


<div id="gitalk-container"></div>
<script type="text/javascript" src="/js/plugins/gitalk.min.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/custom/gitalk.init.js?v=1.6.6"></script>
        
    </div>
    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="prev">
      <a href="/2021/6-10-617.html" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">HelmåŒ…ç®¡ç†å·¥å…·å…¥é—¨å­¦ä¹ åŠä½¿ç”¨</h4>
      </a>
    </div>
  

  
    <div class="next">
      <a href="/2021/5-11-615.html" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">Kubernetesä¹‹Kuboardå¤šé›†ç¾¤ç®¡ç†å·¥å…·å®‰è£…å®è·µ</h4>
      </a>
    </div>
  
</nav>


    
    
        <aside class="post-widget">
            <nav class="post-toc-wrap" id="post-toc">
                <strong>ç›®å½•</strong>
                <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#0x00-å‰è¨€ç®€è¿°"><span class="post-toc-number">1.</span> <span class="post-toc-text">0x00 å‰è¨€ç®€è¿°</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-ç®€å•ä»‹ç»"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">1.ç®€å•ä»‹ç»</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-ç‰ˆæœ¬åŒºåˆ«"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">2.ç‰ˆæœ¬åŒºåˆ«</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-å‚è€ƒæ¥æº"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">3.å‚è€ƒæ¥æº</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#0x01-Server-Core-å®‰è£…éƒ¨ç½²"><span class="post-toc-number">2.</span> <span class="post-toc-text">0x01 Server-Core å®‰è£…éƒ¨ç½²</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-ç¯å¢ƒå‡†å¤‡"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">1.ç¯å¢ƒå‡†å¤‡</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-å®‰è£…æµç¨‹"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">2.å®‰è£…æµç¨‹</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#0x02-Server-Core-ç®¡ç†é…ç½®"><span class="post-toc-number">3.</span> <span class="post-toc-text">0x02 Server-Core ç®¡ç†é…ç½®</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-æœåŠ¡å™¨IPåœ°å€åŠDNSè®¾ç½®"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">1.æœåŠ¡å™¨IPåœ°å€åŠDNSè®¾ç½®</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-é‡å‘½åæœåŠ¡å™¨åç§°"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">2.é‡å‘½åæœåŠ¡å™¨åç§°</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-å°†æœåŠ¡å™¨åŠ å…¥åˆ°åŸŸä¸­"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">3.å°†æœåŠ¡å™¨åŠ å…¥åˆ°åŸŸä¸­</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-æ¿€æ´»å®‰è£…çš„æœåŠ¡å™¨"><span class="post-toc-number">3.4.</span> <span class="post-toc-text">4.æ¿€æ´»å®‰è£…çš„æœåŠ¡å™¨</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-å¯ç”¨Serverçš„è¿œç¨‹æ¡Œé¢"><span class="post-toc-number">3.5.</span> <span class="post-toc-text">5.å¯ç”¨Serverçš„è¿œç¨‹æ¡Œé¢</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-å¯ç”¨Windows-PowerShellè¿œç¨‹ç®¡ç†"><span class="post-toc-number">3.6.</span> <span class="post-toc-text">5.å¯ç”¨Windows PowerShellè¿œç¨‹ç®¡ç†</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-ä½¿ç”¨OpenSSHè¿œç¨‹ç®¡ç†Windows"><span class="post-toc-number">3.7.</span> <span class="post-toc-text">6.ä½¿ç”¨OpenSSHè¿œç¨‹ç®¡ç†Windows</span></a></li></ol></li></ol>
            </nav>
            <div class="toc-bar"><div>
        </aside>
    
</article>

  <div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        äººé—´è‡ªæœ‰äº”å¤§æƒ…ã€ç‚¹èµã€æŠ•å¸(èµèµ)ã€æ”¶è—ã€å…³æ³¨ï¼Œè½¬å‘ã€‘, è°¢è°¢çœ‹å‹æ”¯æŒ!
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardwechat" src="/img/reward-wechat.jpg" height="228" height="228" alt="æ‰“èµäºŒç»´ç ">
            <img id="rewardalipay" src="/img/reward-alipay.png" height="228" height="228" alt="æ‰“èµäºŒç»´ç ">
        </div>
        
        <label class="reward-toggle">
            <!-- <input id="rewardToggle" type="checkbox" class="reward-toggle-check" data-wechat="/img/reward-wechat.jpg" data-alipay="/img/reward-alipay.png"> -->
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">å¾®ä¿¡</span>
                <span class="reward-toggle-item alipay">æ”¯ä»˜å®</span>
            </div>
        </label>
        
    </div>
</div>

  
 <!-- å¾®ä¿¡å…¬ä¼—å·å…³æ³¨/æ–‡ç« ç‰ˆæƒå¤åˆ¶ -->

  <div id="btw-mask" style="position: fixed; top: 0px; right: 0px; bottom: 0px; left: 0px; opacity: 0.7; z-index: 999; background: rgb(0, 0, 0); display:none"></div>
<div id="btw-modal" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 360px; text-align: center; font-size: 13px; background: rgb(255, 255, 255); border-radius: 10px; z-index: 9999; font-family: PingFangSC-Regular, sans-serif;display:none">
<span id="btw-modal-close-btn" style="position: absolute; top: 5px; right: 15px; line-height: 1.8; font-size: 15px; cursor: pointer; opacity: 0.2; z-index: 9999; color: rgb(0, 0, 0); background: none; border: none; outline: none;">X</span>
<p id="btw-modal-header" style="margin-top: 40px; line-height: 1.8; font-size: 13px; ">
<b style="color:#6190e8;">ä½ å¥½æœ‹å‹,å¯ä»¥å…³ä¸ªæ³¨å—? â¤ <br> è¿™å°†æ˜¯æˆ‘æŒç»­æ›´æ–°æ–‡ç« çš„åŠ¨åŠ›æºæ³‰ï¼Œè°¢è°¢æ”¯æŒï¼(à¹‘â€²á´—â€µà¹‘) </b> <br> å¦‚ä¸æƒ³å…³æ³¨è¯·ç‚¹å‡»å³ä¸Šè§’çš„ã€Xã€‘<br>
<br>Method 1.Please visit <strong><a href="https://twitter.com/WeiyiGeek" target="_blank" rel="noopener" style="color: rgb(240, 65, 52);text-decoration:underline;">ã€My Twitterã€‘</a></strong>. There is an article verification code in the homepage.
<br>æ–¹å¼2.è¯·è®¿é—®æœ¬åšä¸»çš„Bç«™<strong><a href="https://space.bilibili.com/385802642" target="_blank" rel="noopener" style="color: rgb(240, 65, 52);text-decoration:underline;">ã€WeiyiGeekã€‘</a></strong>é¦–é¡µå…³æ³¨UPä¸»,<br>å°†è‡ªåŠ¨éšæœºè·å–è§£é”éªŒè¯ç ã€‚
<br>æ–¹å¼3.æ‰«ä¸€æ‰«ä¸‹æ–¹äºŒç»´ç ï¼Œå…³æ³¨æœ¬ç«™<strong>å®˜æ–¹å…¬ä¼—å·</strong><br>
å›å¤ï¼š<strong style="color: rgb(240, 65, 52);">éªŒè¯ç </strong>
å°†è·å–<strong style="color: rgb(240, 65, 52);">è§£é”(æœ‰æ•ˆæœŸ7å¤©)</strong>æœ¬ç«™æ‰€æœ‰æŠ€æœ¯æ–‡ç« å“Ÿ!</p>
<img src="/img/wechat-search.png" style="width: 300px; margin-top: 10px;">
<div id="btw-modal-input-code" style="margin-top: 20px; background: rgb(255, 255, 255);">
  <input id="btw-modal-input" type="number" minlength="4" maxlength="4" placeholder="è¯·è¾“å…¥éªŒè¯ç |Verification Code"
    style="width: 165px; height: 32px; line-height: 32px; padding: 0px 10px; margin: 0px 10px; font-size: 13px; text-rendering: auto; text-transform: none; cursor: text; outline: none; box-sizing: border-box; border: 1px solid rgb(221, 221, 221); -webkit-appearance: textfield; background-color: white; -webkit-rtl-ordering: logical;"/>
  <button id="btw-submit-btn" onclick="yzm_vertify()"
    style="padding: 0px 20px; height: 32px; font-size: 14px; outline: none; border: none; color: rgb(255, 255, 255); background: rgb(222, 104, 109); cursor: pointer;">æ
    äº¤</button> </div>
<p id="btw-footer" style="margin: 40px 0px 20px; color: rgb(153, 153, 153);">@WeiyiGeek - ä¸ºäº†èƒ½åˆ°è¿œæ–¹ï¼Œè„šä¸‹çš„æ¯ä¸€æ­¥éƒ½ä¸èƒ½å°‘</p>
</div>


</div>

    </main>
    <footer class="footer ">
    
    <div class="top">
        
            <p>
    <span>Linksï¼š</span>
    
    <span class="blogroll-item">
        <a href="https://weiyigeek.top" target="_blank">https://weiyigeek.top</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.weiyigeek.top" target="_blank">https://blog.weiyigeek.top</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://weiyigeek.top/img/wechat-search.png" target="_blank">å…¬ä¼—è´¦å·</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://space.bilibili.com/385802642/article" target="_blank">å“”å“©å“”å“©ä¸“æ </a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://github.com/weiyigeek" target="_blank">ä¸ªäººGithub</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://gitee.com/WeiyiGeek" target="_blank">ä¸ªäººGitee</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.zhihu.com/people/weiyiSec" target="_blank">ä¸ªäººçŸ¥ä¹</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.cnblogs.com/WeiyiGeek" target="_blank">åšå®¢å›­</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://my.oschina.net/weiyigeek" target="_blank">OSCHINA</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.toutiao.com/c/user/token/MS4wLjABAAAAqcPSoMqfctaEqJpGSF775eeCjWkrop4AOyLITdMx-L78F5iXzfQcSRM5sY4dq3wR" target="_blank">ä»Šæ—¥å¤´æ¡</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.csdn.net/u013072756?type=lately" target="_blank">CSDN</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.jianshu.com/u/5199a1104739" target="_blank">ç®€ä¹¦</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://cloud.tencent.com/developer/user/1389665/articles" target="_blank">è…¾è®¯äº‘+äº‘ç¤¾åŒº</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://cuttlefish.baidu.com/shop/75c5dbd8d15abe23482f4d40" target="_blank">ç™¾åº¦æ–‡åº“</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://author.baidu.com/home?from=blog&app_id=1726736601523415" target="_blank">ITæå®¢çŸ¥è¯†åˆ†äº«</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.51cto.com/weiyigeek" target="_blank">51CTOåšå®¢</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://juejin.cn/user/122767337595934" target="_blank">æ˜é‡‘</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://weibo.com/a/hot/7622022703618049_1.html" target="_blank">å¾®åšæ–‡ç« </a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.xiaohongshu.com/user/profile/627c98bb000000001000e7ba" target="_blank">å°çº¢ä¹¦</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://segmentfault.com/u/weiyigeek" target="_blank">Segmentfault</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.douyin.com/user/MS4wLjABAAAAMSBdMja6XLsdmzafb0RNbFeBemIOk38K1PaOClZeI1Q" target="_blank">æŠ–éŸ³ä¸»é¡µ</a>
    </span>
    
</p>

        
    </div>
    
    <div class="bottom">
      <p>
        <span>WeiyiGeek &copy; 2018 - 2022 <a href="https://weiyigeek.top" target="_blank" rel="noopener">weiyigeek.top</a> All rights reserved. ITå”¯ä¸€æå®¢ ç‰ˆæƒæ‰€æœ‰ </span>
        
        <span>
          Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/weiyigeek" target="_blank">mellow</a>
        </span>
        
        <br/>è®¿é—®ç»Ÿè®¡
        <span><a href="/sitemap.xml" target="_blank" rel="Sitemaps-ç«™ç‚¹åœ°å›¾">Sitemaps</a> </span>
        <span><a href="/baidusitemap.xml" target="_blank" rel="baidusitemaps-ç™¾åº¦ç«™ç‚¹åœ°å›¾">ç«™ç‚¹åœ°å›¾</a> </span>
        <!-- 
  -->
        <br/>ICPå¤‡æ¡ˆå·<span><a href="https://beian.miit.gov.cn" target="_blank">æ¸ICPå¤‡2022003447å·</a></span>
        <br/>
        <div id="cc-myssl-id">
          <a href="https://myssl.com/blog.weiyigeek.top?from=mysslid" target="_blank" rel="noopener"><img src="https://static.myssl.com/res/images/myssl-id1.png" alt="MySSLå®‰å…¨è®¤è¯" style="max-height:50px;display:block;margin:0 auto"></a>
        </div>
      </p>
    </div>
</footer>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>


<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://blog.weiyigeek.top/2021/5-26-559.html&title=ã€ŠWindowsæœåŠ¡å™¨æ ¸å¿ƒ(Server-Core)å®‰è£…ä¸åŸºç¡€é…ç½®ä½¿ç”¨ã€‹ â€” WeiyiGeek Blog&pic=https://blog.weiyigeek.top/img/avatar.jpg" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.weiyigeek.top/2021/5-26-559.html&title=ã€ŠWindowsæœåŠ¡å™¨æ ¸å¿ƒ(Server-Core)å®‰è£…ä¸åŸºç¡€é…ç½®ä½¿ç”¨ã€‹ â€” WeiyiGeek Blog&source=[TOC]" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.weiyigeek.top/2021/5-26-559.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€ŠWindowsæœåŠ¡å™¨æ ¸å¿ƒ(Server-Core)å®‰è£…ä¸åŸºç¡€é…ç½®ä½¿ç”¨ã€‹ â€” WeiyiGeek Blog&url=https://blog.weiyigeek.top/2021/5-26-559.html&via=https://blog.weiyigeek.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://blog.weiyigeek.top/2021/5-26-559.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>æ‰«ä¸€æ‰«ï¼Œåˆ†äº«åˆ°å¾®ä¿¡</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACKElEQVR42u3aS1LEMAxF0d7/psMUqivhPskNZfl6RIV8dBgIWfLrhdf1tu5+S+7/fs/zexYvGTJkbMu4Hlca1t1Td6G/X3/+7m0MMmTIOICRvjpNxM/3dNgyZMiQkd5Tu9L5rgwZMmS0yjWwQf3n/xsyZMjYikE2saTg6293P74XlyFDxoYM3nX/+58/Mt+QIUPGVowrXP254apIfrxThgwZoxk8wdWKuXRD24lHhgwZpzF4qq0Fyhtw/IoMGTJmMzrDRRIoeX867ES9QxkyZAxiFN0g3M7AMv2uDBkypjKCkguXkqSVtvYPIUOGjNmMWknHt6DkqfQQWDDglCFDxghGqky3nf1hAHpKhgwZBzBqxyxIxuNUcv32PTJkyBjNqNWSfPT4HBAfQqTDURkyZMxmkDTH22SdRlvaBJQhQ8ZUxqrRY61wJIkYxSBDhoxjGOTV6aY0ZS+YY8iQIWMco/NwumXlI0ye+mXIkHEmgxdz6aCRb4nTIxoyZMg4jdFp+pOyMh1zBuMEGTJkHMNY9Zn+gbM49cuQIeMYBm/Q1/C10UJxLy5DhowRjCtcfFNKAuVNt1+SrwwZMkYz0jTXaajxkpGXicUxpwwZMjZkrGqQ8akiGVKmKVuGDBknMGqJLw29dnQDIWXIkCEjHGqmCbd2gAP9JWTIkHE8g/Nq44QAL0OGjAMY6TCAwPrp9SPtNhkyZGzIaJ3UKI0W0rKvc+BMhgwZmzO+AGFqA/EHRB61AAAAAElFTkSuQmCC" alt="å¾®ä¿¡åˆ†äº«äºŒç»´ç ">
</div>


    
    <!-- main-js -->
<script type="text/javascript" src="/js/jquery/2.1.0-jquery.min.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/plugins/fastclick.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/plugins/ios-orientationchange-fix.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/jquery/3.5.2-jquery.fancybox.min.js?v=1.6.6"></script>
<!--  //cdn.bootcss.com/node-waves/0.7.4/waves.min.js -->
<script type="text/javascript" src="/js/node-waves/0.7.4-waves.min.js?v=1.6.6"></script> 

<script type="text/javascript" src="/js/method.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/blog.js?v=1.6.6"></script>

<!-- third-party -->
<script type="text/javascript" src="/js/plugins/local_search.js?v=1.6.6"></script>
<script type="text/javascript">
	var search_path = "search.xml";
	if (search_path.length === 0) { search_path = "search.xml";}
	var path = "/" + search_path;
	searchFunc(path, "local-search-input", "local-search-result");
</script> 

<!-- <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> --> 



  


<script>
  var _hmt = _hmt || [];
  (function() {
    // ç™¾åº¦ç»Ÿè®¡
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?53923c4b5560739bc0ed61e183be6acf";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();
</script>
 


<!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
            processEscapes: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.staticfile.org/mathjax/2.7.9/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
 
<script>
    (function() {
        var OriginTitile = document.title, titleTime;
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                document.title = 'WeiyiGeek Blog-å…³æ³¨äºç½‘ç»œå®‰å…¨_ç‰©è”ç½‘å®‰å…¨å¼€å‘_ç½‘ç»œå®‰å…¨è¿ç»´-å­¦ä¹ å¿ƒå¾—åˆ†äº«';
                clearTimeout(titleTime);
            } else {
                document.title = '(ã¤ã‚§âŠ‚)å’¦!åˆå¥½äº†!';
                titleTime = setTimeout(function() {
                    document.title = OriginTitile;
                },2000);
            }
        });
    })();
</script>
 
     <script type="text/javascript" src="/js/custom/copytips.js?v=1.6.6"></script> 
</body>
</html>
