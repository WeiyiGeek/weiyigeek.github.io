<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="content-language" content="zh-CN"/>
    <meta name="author" content="WeiyiGeek" />
    <meta name="msvalidate.01" content="5C552FB1D885E0E11D2957EC958C8018" />
    <meta name="shenma-site-verification" content="4c655e91c76be0a93c1b6954c666c9d6_1649049085"/>
    <meta name="bytedance-verification-code" content="lKs4FqwCHSJ3A/c5tT7X" />
    <meta name="sogou_site_verification" content="OC65iET6Bk" />
    
    <title>🌐 shell脚本编程之路1|WeiyiGeek Blog|唯一极客Geek-IT网络安全运维开发技术知识分享-博客站点</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    
    <meta name="keywords" content="Shell">
    <meta name="Description" content="WeiyiGeek-唯一极客博客站点,关注于网络安全运维,Web安全开发,IOT物联网安全开发,应用开发,分享技术学习知识与入坑解决,提升网络安全技术与自身技术能力,立志维护大众网络安全为己任,做一个对国家有用的人,为实现中华民族伟大复兴的中国梦不懈奋斗">
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="/css/jquery/3.5.2-jquery.fancybox.min.css?v=1.6.6" />
    <link rel="stylesheet" href="/css/style.css?v=1.6.6">
    <!--  -->
     <script type="text/javascript" src="/js/custom/articlecost.js?v=1.6.6"></script> 
    <link rel="stylesheet" href="/css/third-party/gitalk.css?v=1.6.6"> 
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9134434519967436" crossorigin="anonymous"></script>    
    <script type="text/javascript">
        // Data Center
        var DC = {
          reward:	true,
          lv: JSON.parse('{"enable":false,"app_id":null,"app_key":null,"icon":true}'),
          v: JSON.parse('{"enable":false,"appid":null,"appkey":null,"notify":true,"verify":true,"placeholder":"give me some sugers plz...","avatar":"wavatar"}')
        };
    </script>
    <script type="text/javascript">window.lazyScripts=[];</script>
<meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="WeiyiGeek Blog" type="application/atom+xml">
</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="">
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap">
      
      <img src="/img/brand.jpg" class="brand-bg" alt="WeiyiGeek-backgroud">
      
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg" alt="WeiyiGeek-头像">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">WeiyiGeek</h5>
          <a href="mailto:master@weiyigeek.top" title="master@weiyigeek.top" class="mail">
            <span>m</span><span>a</span><span>s</span><span>t</span><span>e</span><span>r</span><span>@</span><span>w</span><span>e</span><span>i</span><span>y</span><span>i</span><span>g</span><span>e</span><span>e</span><span>k</span><span>.</span><span>t</span><span>o</span><span>p</span>
          </a>
        </hgroup>
        
        <ul class="menu-link">
          
              <li>
                <a href="https://weiyigeek.top/img/wechat-search.png" target="_blank">
                  <i class="icon icon-lg icon-wechat"></i>
                </a>
              </li>
            
              <li>
                <a href="https://github.com/weiyigeek" target="_blank">
                  <i class="icon icon-lg icon-github"></i>
                </a>
              </li>
            
              <li>
                <a href="https://t.me/WeiyiGeek" target="_blank">
                  <i class="icon icon-lg icon-telegram"></i>
                </a>
              </li>
            
              <li>
                <a href="https://twitter.com/WeiyiGeek" target="_blank">
                  <i class="icon icon-lg icon-twitter"></i>
                </a>
              </li>
            
              <li>
                <a href="https://weibo.com/615643678" target="_blank">
                  <i class="icon icon-lg icon-weibo"></i>
                </a>
              </li>
            
        </ul>
        
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                首页
              </a>
            </li>
        
            <li class="">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                文章分类
              </a>
            </li>
        
            <li class="">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                文章标签
              </a>
            </li>
        
            <li class="">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                文章归档
              </a>
            </li>
        
            <li class="">
              <a href="/2018/1-1-1.html"  >
                <i class="icon icon-lg icon-mortar-board"></i>
                学习之路
              </a>
            </li>
        
            <li class="">
              <a href="/books"  >
                <i class="icon icon-lg icon-book"></i>
                学习书籍
              </a>
            </li>
        
            <li class="">
              <a href="/about"  >
                <i class="icon icon-lg icon-user"></i>
                关于作者
              </a>
            </li>
        
            <li class="">
              <a href="/sites"  >
                <i class="icon icon-lg icon-globe"></i>
                站点导航
              </a>
            </li>
        
            <li class="">
              <a href="/img/share-wechat.jpg" target="_blank" >
                <i class="icon icon-lg icon-wechat"></i>
                公众账号
              </a>
            </li>
        
            <li class="">
              <a href="https://space.bilibili.com/385802642" target="_blank" >
                <i class="icon icon-lg icon-youtube-play"></i>
                哔哩哔哩
              </a>
            </li>
        
            <li class="">
              <a href="/img/video-account.jpg" target="_blank" >
                <i class="icon icon-lg icon-video-camera"></i>
                视频号
              </a>
            </li>
        
            <li class="">
              <a href="/links"  >
                <i class="icon icon-lg icon-link"></i>
                友情链接
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row clearfix">
        <a href="javascript:;" class="header-icon pull-left waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">
            <span>shell脚本编程之路1</span>
            
        </div>

        
        <a href="javascript:;" id="site_search_btn" class="header-icon pull-right waves-effect waves-circle waves-light">
            <i class="icon icon-lg icon-search"></i>
        </a>
        

        
            <a href="/atom.xml" class="header-icon pull-right waves-effect waves-circle waves-light">
                <i class="icon icon-lg icon-rss"></i>
            </a>
        
    </div>
</header>
<header class="content-header post-header">
    <img src="/img/banner.jpg" class="header-bg" alt="文章头部背景">
    <div class="container fade-scale">
        <h1 class="title">shell脚本编程之路1</h1>
        <h5 class="subtitle">
            
                <time datetime="2019-06-28T10:34:30.000Z" itemprop="datePublished" class="page-time">
  2019-06-28
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Development/">Development</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Development/Programming/">Programming</a></li></ul></li></ul>


            
        </h5>
        
    </div>
    

</header>

<div id="site_search">
    <div class="search-title clearfix">
        <span class="pull-left">
          <i class="icon icon-lg icon-search"></i>
        </span>
        <input type="text" id="local-search-input" name="q" results="0" placeholder="search my blog..." class="form-control pull-left"/>
        <a href="javascript:;" class="close pull-right waves-effect waves-circle waves-light">
          <i class="icon icon-lg icon-close"></i>
        </a>
    </div>
    <div id="local-search-result"></div>
</div>


<div class="container body-wrap" style="display: none;">
  <article id="post-系统运维/Linux/Shell编程/shell脚本编程之路1"
  class="post-article article-type-post" itemprop="blogPost">
    <div class="post-card">
        <h1 class="post-card-title">shell脚本编程之路1</h1>
        <div class="post-meta">
            <time class="post-time" title="2019-06-28 18:34:30" datetime="2019-06-28T10:34:30.000Z"  itemprop="datePublished">2019-06-28</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Development/">Development</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Development/Programming/">Programming</a></li></ul></li></ul>



            

            


            
        </div>
        <span class="post-href" style="display: none;">|</span> 
        <div class="post-content" id="post-content" itemprop="postContent">
            
            <p>[TOC]</p>
<a id="more"></a>
<h2 id="0x00-快速入门"><a href="#0x00-快速入门" class="headerlink" title="0x00 快速入门"></a>0x00 快速入门</h2><p><strong>（1）前言</strong><br><em>Shell是什么？</em><br>答：Shell（壳）本身是一个用C语言编写的程序也是一个是<code>解释执行的脚本语言即命令解释器</code>，它在操作系统最外层是用户使用Unix/Linux的桥梁，把用户输入解释给操作系统等待操作系统处理后，将结果输出返回给用户,用户的大部分工作都是通过Shell完成的,还是一个<code>功能强大的编程语言,易编写,易调试,灵活性较强</code>。</p>
<p>它虽然不是Unix/Linux系统内核的一部分，但它调用了系统核心的大部分功能来执行程序、建立文件并以并行的方式协调各个程序的运行。因此，对于用户来说，shell是最重要的实用程序，深入了解和熟练掌握shell的特性极其使用方法，是用好Unix/Linux系统的关键。</p>
<figure class="image-box">
                <a rel=shell脚本编程之路1 href="https://img.weiyigeek.top/2019/20190712113117.png" target="_blank" title="WeiyiGeek.shell位置层次" data-fancybox="images"><img src="https://img.weiyigeek.top/2019/20190712113117.png" alt="WeiyiGeek.shell位置层次" title="" class=""></a>
                <p>WeiyiGeek.shell位置层次</p>
            </figure>
<p><em>什么是shell脚本？</em><br>答：当Linux命令会语句不在命令行下执行(严格的说命令行执行的语句也是shell脚本),而是通过一个脚本程序文件执行时候,该程序就被称为shell脚本或shell程序；与windows中的bat批处理很类似；用户可以在shell脚本中嵌套命令/变量以及流程控制语句从而形成一个功能强大的shell脚本;</p>
<p>Shell是弱类型语言，既是一种命令语言，又是一种程序设计语言,</p>
<ul>
<li>作为<code>命令语言</code>：它交互式地解释和执行用户输入的命令,它为用户提供了一个向Linux内核发送请求以便运行程序的界面系统级程序</li>
<li>作为<code>程序设计语言</code>：它定义了各种变量和参数，并提供了许多在高级语言中才具有的控制结构，包括变量和流程控制语句</li>
</ul>
<p><em>为什么要学Shell编程</em><br>答：Shell脚本是实现Linux系统及运维自动化管理的重要且必备的工具,尤其是shell脚本擅长处理村文本类型数据，而linux系统中的配置文件万物皆文件，所有极大的方便了我们使用者进行文件处理;几乎每一个合格的Linux系统管理或者运维工程师都需要学习Shell编程;</p>
<p>脚本的优势：</p>
<ul>
<li>我们所知道的PHP/java他们主要是用来编写应用程序或是网站主要是实现服务端程序；</li>
<li>shell编程他是一个脚本语言(所见即所得),<code>它不需要执行编译过程之后再执行,他是将编译过程放在执行过程中,</code>所以执行起来要慢得多。</li>
<li>Shell脚本帮助我们通过简单的脚本或其它方式来自动化、简单化任务的需求。比如,批量增加用户,定时备份脚本,批量记录什么LOG.</li>
</ul>
<p><em>Shell有两种执行命令的方式</em>：</p>
<ul>
<li>交互式（Interactive）：解释执行用户的命令，用户输入一条命令，Shell就解释执行一条。</li>
<li>批处理（Batch）：用户事先写一个Shell脚本(Script)，其中有很多条命令让Shell一次把这些命令执行完，而不必一条一条地敲命令。</li>
</ul>
<p><em>我们需要掌握哪一些基础知识？</em></p>
<ul>
<li>命令基础(Linux上常常使用的命令文件管理/字符截取等);</li>
<li>Linux正则表达式以及三剑客(Grep/sed/awk)要熟练;</li>
<li>俗话说工欲善其事必先利其器,vi/vim 或者 nano 必须熟练操作;</li>
</ul>
<p><br></p>
<p><strong>（2）Shell 发展史</strong><br>人物介绍：<code>Steve Bourne</code> 也是贝尔实验室的成员，<code>Dennis Ritchie</code> 和 <code>Ken Thompson</code> 的同事，本来他也就是一个默默无闻的码农。但由于 Ritchie 和 Thompson 玩游戏玩出了个 UNIX，一下子整个贝尔实验室都炸开了锅！</p>
<p>刚开始的时候Thompson 写了个简单的程序作为 UNIX 操作系统的接口界面，有了它人类和操作系统就可以进行交流了，叫 shell（我们在 Linux 打开的那个 Terminal 就是一个 shell）， Thompson 还给它起了个名字，叫“Thompson shell”（这哥们可真不低调 ）Thompson shell 的功能很简单，用户通过它输入一些指定的命令</p>
<ul>
<li>利用：它负责解释为需要计算机做的操作并去执行，另外它还能够支持一些简单的脚本，就是把一堆命令写进一个文件里依次执行</li>
<li>缺点：但并没有更高级的例如流程控制，分支，变量，函数之类的东西。</li>
</ul>
<p>主人公 Bourne 出现了（逮到机会赶紧上 ），也设计了一个 shell，叫<code>“Bourne shell，sh”</code>（似乎都生怕别人不知道程序是谁写的 ）。</p>
<ul>
<li>升级：有了基本的流控制源，可以写简单的函数。</li>
</ul>
<p>这俩好面子的大牛都力挺自己设计的 shell，渐渐的两种 shell 都有了各自的追随者，渐渐的形成了两大阵营（就像如今的 Vim 和 Emacs）。<br>Thompson 的粉丝觉得简洁才是真理,Bourne 的死忠则认为实用才是王道！就这样撕逼大战一触即发……<br><figure class="image-box">
                <a rel=shell脚本编程之路1 href="https://img.weiyigeek.top/2019/20190630113229.png" target="_blank" title="WeiyiGeek.SHELL标准转变" data-fancybox="images"><img src="https://img.weiyigeek.top/2019/20190630113229.png" alt="WeiyiGeek.SHELL标准转变" title="" class=""></a>
                <p>WeiyiGeek.SHELL标准转变</p>
            </figure></p>
<p><em>那现在打开的 Terminal 到底是什么 shell？</em><br>答：事实上现在大多数 Linux 发行版的<code>默认 Shell 叫 Bash</code>，它的名字是 Bourne-Again SHell 的缩写，这是关于 Bourne shell（sh）的一个双关语：<code>“Bourne again / born again，Bourne再次/重生”,</code>由 <code>Brian J. Fox</code>所编写（看还是低调的哥们赢得了最后的胜利 ）。</p>
<p><strong>（3）Shell的分类</strong><br>由于历史原因，shell有很多不同的版本，而且也有很多有相同功能的命令需要我们进行取舍，以至于代码的规范很难统一。</p>
<p>Shell的两种主要语法类型有Bourne和C这两种语法彼此不兼容，由于Linux的标准Shell是Bash！Bash和sh是相互兼容的。<br><code>Bourne Shell</code>:也称为B Shell,1979年起Unix就开始使用它主文件名为<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#sh、ksh、bash、psh、zsh</span></span><br><span class="line">Bourne shell ：sh</span><br><span class="line">Korn Shell : ksh</span><br><span class="line">Bourne Again shell : bash</span><br><span class="line">POSIX shell : psh</span><br></pre></td></tr></table></figure></p>
<p><code>C Shell</code>:主要是BSD版的Unix系统中使用,因其语法和C语言相类似而得名:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#csh、tcsh</span></span><br><span class="line">c shell : csh</span><br><span class="line">TENEX/TOPS C shell : tcsh</span><br></pre></td></tr></table></figure><br><figure class="image-box">
                <a rel=shell脚本编程之路1 href="https://img.weiyigeek.top/2019/20190630132306.png" target="_blank" title="WeiyiGeek.shell分类介绍" data-fancybox="images"><img src="https://img.weiyigeek.top/2019/20190630132306.png" alt="WeiyiGeek.shell分类介绍" title="" class=""></a>
                <p>WeiyiGeek.shell分类介绍</p>
            </figure></p>
<p>Linux支持的shell<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$SHELL</span> <span class="comment">#通过执行echo $SHELL就可以看到当前系统支持的哪种Shell</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># cat /etc/shells  (脚本文件执行路径) //可以看到当前Linux支持的所有Shell</span></span><br><span class="line">/bin/sh  或者 /usr/bin/sh  <span class="comment">#前者实际指向一个文件就是后者</span></span><br><span class="line">/bin/bash 或者 /usr/bin/bash</span><br><span class="line">/bin/tcsh</span><br><span class="line">/bin/csh</span><br></pre></td></tr></table></figure></p>
<hr>
<h2 id="0x01-Shell脚本初识"><a href="#0x01-Shell脚本初识" class="headerlink" title="0x01 Shell脚本初识"></a>0x01 Shell脚本初识</h2><p>Step1.建立和编写Shell脚本<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vi hello.sh <span class="comment">#创建一个名为hello的脚本文件,#按`I`插入内容</span></span><br><span class="line"><span class="comment">#first program# #是注释,，会被解释器忽略。可以注释中文</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#!/bin/bash             #开头必须加上这行注释,脚本才能执行(解释器)建议采用#!/usr/bin/env bash</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"hello world!"</span>     <span class="comment">#echo是输出命令</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#VIM编辑器，按`ESC`退出编辑,键入`:wq`保存并退出（具体参考vim编辑器的使用）</span></span><br></pre></td></tr></table></figure></p>
<p>Step2.赋予执行权限运行脚本直接运行<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">chmod 755 hello.sh <span class="comment">#赋予执行权限 rwxr-xr-x</span></span><br><span class="line">./hello.sh    <span class="comment">#`./`用来执行脚本,表示当前目录下,也可以用绝对路径</span></span><br><span class="line">bash hello.sh  <span class="comment">#通过bash调用执行脚本</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#补充：当然也可以不同赋予权限采用source执行(两种形式)</span></span><br><span class="line"><span class="comment"># File文件默认权限：644 rw-r--r-- ，最大权限是x</span></span><br><span class="line"><span class="comment"># Directory目录默认权限：755 rwxr-xr-x，最大权限是w</span></span><br><span class="line"><span class="built_in">source</span> hello.sh</span><br><span class="line">. hellp.sh</span><br><span class="line"></span><br><span class="line"><span class="comment">#进入shell域退出shell</span></span><br><span class="line">sh   <span class="comment">#从Bash进入到了sh</span></span><br><span class="line"><span class="built_in">exit</span> <span class="comment">#退出当前Shell</span></span><br><span class="line"><span class="comment">#使用bash命令可以在已有的Bash下创建一个子Shell,同样使用exit退出,调用和退出都是一级一级连贯的.</span></span><br></pre></td></tr></table></figure></p>
<p><em>注意事项</em>：</p>
<ul>
<li>sh里面没有多行注释,只能每一行加一个#号;</li>
</ul>
<hr>

<h2 id="0x02-Shell编程之变量"><a href="#0x02-Shell编程之变量" class="headerlink" title="0x02 Shell编程之变量"></a>0x02 Shell编程之变量</h2><p>描述：主要学习用户自定义变量、环境变量、语系变量、位置参数变量和预定义变量等变量;变量是PC内存的单元Part,其中修改的值可以改变。</p>
<h3 id="1-变量类型分类"><a href="#1-变量类型分类" class="headerlink" title="(1)变量类型分类"></a>(1)变量类型分类</h3><p><em>变量的分类: (变量分类从上到下越来越严格)</em></p>
<ul>
<li>1，用户自定义变量</li>
<li>2，环境变量：主要保存的是和系统操作环境相关的数据</li>
<li>3，位置参数变量：主要用来向脚本传递参数或数据，变量名不能自定义，变量名固定的</li>
<li>4，预定义变量：Bash中已经定义好的变量变量名不能自定义，变量作用也是固定的</li>
</ul>
<p>变量命名规则：</p>
<ul>
<li>1，和c语言一样，首字母/下划线为首加数字<code>变量名的长度不得超过255个字符</code>.</li>
<li>2，中间不能有空格，可以使用下划线（_）,不能使用标点符号。</li>
<li>3，变量名在有效范围内必须唯一且不能使用bash里的关键字（可用help命令查看保留关键字)</li>
<li>4，在Bash中<code>变量的默认类型都是字符串型</code>.</li>
<li>5，用户自定义变量小写,系统环境变量大写（注意shell编程格式保持良好的风格）</li>
</ul>
<p>变量的数据类型：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">字符串    CHAR  <span class="comment">#shell默认类型</span></span><br><span class="line"><span class="comment"># 整型      INT   #需要将字符转整形</span></span><br><span class="line"><span class="comment"># 浮点型    Float、Double</span></span><br><span class="line"><span class="comment"># 日期型    Date</span></span><br></pre></td></tr></table></figure></p>
<p>运行Shell的时候会同时存在三种变量：</p>
<ul>
<li>局部变量: 在脚本或命令中定义,仅仅在当前shell实例中有效,其他shell启动的程序不能访问局部变量;</li>
<li>环境变量：所有程序包括shell启动的程序都能访问环境变量,有些程序需要环境变量来保证其正常运行,必要时候shell脚本也可以定义环境变量;</li>
<li>shell变量：由shel程序设置的特殊变量,其包括了环境变量已经局部变量,这些变量保证了shell的正常运行;</li>
</ul>
<p><em>注意事项：</em></p>
<ul>
<li>Linux中<code>默认变量类型都是字符串类型不含有其他类型</code>，所以对数字计算时要用特殊方法将字符串转变为数字才能计算。</li>
</ul>
<p><br></p>
<p><strong>(2)各种括号的作用()、(())、[]、[[]]、{}</strong><br>描述：为了更好的学习shell中的变量,我们需要先学习各个括号的作用;</p>
<p><em>1.小括号，圆括号()</em></p>
<ul>
<li>命令组：<ul>
<li>括号中的命令将会新开一个子shell顺序执行，所以<code>括号中的变量不能够被脚本余下的部分使用</code>。</li>
<li>括号中多个命令之间用分号隔开，最后一个命令可以没有分号，各命令和括号之间不必有空格。</li>
</ul>
</li>
<li>命令替换：<ul>
<li>等同于<code>cmd</code>shell扫描一遍命令行，发现了<code>$(cmd)</code>结构，便将<code>$(cmd)</code>中的cmd执行一次，得到其标准输出，再将此输出放到原来命令。</li>
<li>注意：有些shell不支持如tcsh。</li>
</ul>
</li>
<li>初始化数组：<ul>
<li>如：array=(a b c d)</li>
</ul>
</li>
</ul>
<p><br></p>
<p><strong>2.双小括号 (( ))</strong></p>
<ul>
<li>整数扩展<ul>
<li>扩展计算是整数型的计算不支持浮点型((exp))结构扩展并计算一个算术表达式的值</li>
<li>如果表达式的结果为0，那么返回的退出状态码为1，或者 是”假”，而一个非零值的表达式所返回的退出状态码将为0，或者是”true”</li>
<li>若是逻辑判断，表达式exp为真则为1,假则为0。</li>
</ul>
</li>
<li>括号中的运算符、表达式符合C语言运算规则<ul>
<li>都可用在$((exp))中，甚至是三目运算符。作不同进位(如二进制、八进制、十六进制)运算时，输出结果全都自动转化成了十进制</li>
<li>单纯用 (( )) 也可重定义变量值，比如 a=5; $((a++)) 可将 $a 重定义为6</li>
<li>如：<code>echo $((16#5f)) 结果为95 (16进位转十进制)</code>，echo $((8#12)) = 10 ,值得学习借鉴;</li>
</ul>
</li>
<li>用于算术运算比较，双括号中的变量可以不使用$符号前缀。括号内支持多个表达式用逗号分开<ul>
<li>只要括号中的表达式符合C语言运算规则,比如可以直接使用for((i=0;i&lt;5;i++)), </li>
<li>如果不使用双括号, 则为<code>for i in $(seq 0 4)或者for i in {0..4}</code>,再如 if(($i&lt;5)), 如果不使用双括号,则为if [ $i -lt 5 ]</li>
</ul>
</li>
</ul>
<hr/>

<p><strong>3.单中括号，方括号[]</strong></p>
<ul>
<li>bash 的内部命令:<ul>
<li>[和test是等同的,如果我们不用绝对路径指明，通常我们用的都是bash自带的命令。</li>
<li>if/test结构中的左中括号是调用test的命令标识/右中括号是关闭条件判断的,注意结构中并不是必须有中括号，但是新版的Bash中要求必须这样。</li>
<li>这个命令把它的参数作为比较表达式或者作为文件测试，并且根据比较的结果来返回一个退出状态码。</li>
</ul>
</li>
<li>Test和[]中可用的比较运算符只有==和!=<ul>
<li>两者都是用于字符串比较的，不可用于整数比较，整数比较只能<code>使用-eq，-gt形式</code>。</li>
<li>无论是字符串比较还是整数比较都不支持大于号小于号。如果实在想用，对于字符串比较可以使用转义形式，如果<code>比较&quot;ab&quot;和&quot;bc&quot;：[ ab \&lt; bc ]</code>，结果为真也就是返回状态为0。</li>
<li style="list-style: none"><input type="checkbox"></input> 中的逻辑与和逻辑或使用-a 和-o 表示。</li>
</ul>
</li>
<li>字符范围:用作正则表达式的一部分，描述一个匹配的字符范围，但是作为test用途的中括号内不能使用正则。</li>
<li>在一个array 结构的上下文中，中括号用来引用数组中每个元素的编号，如a[1]</li>
</ul>
<p><br></p>
<p><strong>4.双中括号，方括号[[]]</strong></p>
<ul>
<li>[[是 bash 程序语言的关键字:<ul>
<li>它并不是一个命令，[[ ]] 结构比[ ]结构更加通用。</li>
<li>在[[和]]之间所有的字符都不会发生文件名扩展或者单词分割，但是会发生参数扩展和命令替换。</li>
</ul>
</li>
<li>支持字符串的模式匹配：<ul>
<li>使用=~操作符时甚至支持shell的正则表达式</li>
<li>字符串比较时可以把右边的作为一个模式，而不仅仅是一个字符串，比如<code>[[ hello == hell? ]]，结果为真</code></li>
<li>[[ ]] 中匹配字符串或通配符，不需要引号</li>
</ul>
</li>
<li>使用[[ … ]]条件判断结构，而不是[ … ]，能够防止脚本中的许多逻辑错误。<ul>
<li>比如：&amp;&amp;、||、&lt;和&gt; 操作符能够正常存在于[[ ]]条件判断结构中，但是如果出现在[ ]结构中的话，会报错。</li>
<li>比如：可以直接使用if [[ $a != 1 &amp;&amp; $a != 2 ]] 如果不适用双括号, 则为<code>if [ $a -ne 1] &amp;&amp; [ $a != 2 ] 或者 if [ $a -ne 1 -a $a != 2 ]</code></li>
</ul>
</li>
<li>bash把双中括号中的表达式看作一个单独的元素，并返回一个退出状态码。</li>
</ul>
<p>实际案例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ <span class="variable">$i</span> -lt 5 ] </span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$a</span> -ne 1 -a <span class="variable">$a</span> != 2 ] </span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$a</span> -ne 1] &amp;&amp; [ <span class="variable">$a</span> != 2 ] </span><br><span class="line"><span class="keyword">if</span> [[ <span class="variable">$a</span> != 1 &amp;&amp; <span class="variable">$a</span> != 2 ]] </span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(seq 0 4);<span class="keyword">do</span> <span class="built_in">echo</span> <span class="variable">$i</span>;<span class="keyword">done</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `seq 0 4`;<span class="keyword">do</span> <span class="built_in">echo</span> <span class="variable">$i</span>;<span class="keyword">done</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;0..4&#125;;<span class="keyword">do</span> <span class="built_in">echo</span> <span class="variable">$i</span>;<span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> ((i=0;i&lt;5;i++));<span class="keyword">do</span> <span class="built_in">echo</span> <span class="variable">$i</span>;<span class="keyword">done</span></span><br><span class="line"><span class="comment"># 执行结果</span></span><br><span class="line"><span class="comment"># 0</span></span><br><span class="line"><span class="comment"># 1</span></span><br><span class="line"><span class="comment"># 2</span></span><br><span class="line"><span class="comment"># 3</span></span><br><span class="line"><span class="comment"># 4</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 补充示例.正则判断变量输入</span></span><br><span class="line">PROD_TIPS=N</span><br><span class="line"><span class="keyword">if</span> [[ <span class="string">"<span class="variable">$&#123;PROD_TIPS&#125;</span>"</span> =~ ^[<span class="string">'N'</span>,<span class="string">'n'</span>]$ ]]; <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">"PROD_TIPS 变量值为 N 或者 n"</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure></p>
<hr>

<p><strong>5.大括号、花括号 {}</strong></p>
<ul>
<li>常规用法:<ul>
<li>大括号拓展:通配(globbing))将对大括号中的文件名做扩展。在大括号中不允许有空白，除非这个空白被引用或转义。</li>
<li>代码块:又被称为内部组结构事实上创建了一个匿名函数 。<code>与小括号中的命令不同，大括号内的命令不会新开一个子shell运行，即脚本余下部分仍可使用括号内变量</code>。括号内的命令间用分号隔开<code>最后一个也必须有分号</code>，十分注意：{}的第一个命令和左括号之间必须要有一个空格。</li>
</ul>
</li>
<li>四种特殊的替换结构:（<em>非常重要后面详解</em>）</li>
<li>四种模式匹配替换结构：<ul>
<li># 是去掉左边(在键盘上#在$之左边)</li>
<li>% 是去掉右边(在键盘上%在$之右边)</li>
<li>#和%中的单一符号是最小匹配，两个相同符号是最大匹配。</li>
</ul>
</li>
<li>四种模式字符串提取和替换:</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#第一种：对大括号中的以逗号分割的文件列表进行拓展。如 touch &#123;a,b&#125;.txt 结果为a.txt b.txt。</span></span><br><span class="line"><span class="comment">#第二种：对大括号中以点点（..）分割的顺序文件列表起拓展作用，如：touch &#123;a..d&#125;.txt 结果为a.txt b.txt c.txt d.txt</span></span><br><span class="line"><span class="comment"># ls &#123;ex1,ex2&#125;.sh </span></span><br><span class="line">ex1.sh ex2.sh </span><br><span class="line"><span class="comment"># ls &#123;ex&#123;1..3&#125;,ex4&#125;.sh </span></span><br><span class="line">ex1.sh ex2.sh ex3.sh ex4.sh </span><br><span class="line"><span class="comment"># ls &#123;ex[1-3],ex4&#125;.sh </span></span><br><span class="line">ex1.sh ex2.sh ex3.sh ex4.sh</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#间接引用（值得注意）</span></span><br><span class="line">var1=1024</span><br><span class="line">var2=<span class="string">"var1"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;!var2&#125;</span>  <span class="comment">#输出1024</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 替换结果</span></span><br><span class="line"><span class="variable">$&#123;var:-string&#125;</span> <span class="comment">#若变量var为空，则用在命令行中用string来替换$&#123;var:-string&#125;，否则变量var不为空时，则用变量var的值来替换</span></span><br><span class="line"><span class="variable">$&#123;var:=string&#125;</span> <span class="comment">#用string替换$&#123;var:=string&#125;的同时，把string赋给变量var，常用模式</span></span><br><span class="line"><span class="variable">$&#123;var:+string&#125;</span> <span class="comment">#替换规则和上面的相反，即只有当var不是空的时候才替换成string，若var为空时则不替换或者说是替换成变量 var的值，即空值。(因为变量var此时为空，所以这两种说法是等价的)</span></span><br><span class="line"><span class="variable">$&#123;var:?string&#125;</span> <span class="comment">#替换规则为：若变量var不为空，则用变量var的值来替换$&#123;var:?string&#125;；若变量var为空，则把string输出到标准错误中，并从脚本中退出。我们可利用此特性来检查是否设置了变量的值。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 匹配结果</span></span><br><span class="line"><span class="variable">$&#123;var%pattern&#125;</span>   <span class="comment">#shell在variable中查找，看它是否一给的模式pattern结尾，如果是，就从命令行把variable中的内容去掉 右边最短 的匹配模式</span></span><br><span class="line"><span class="variable">$&#123;var%%pattern&#125;</span>  <span class="comment">#如果是，就从命令行把把variable中的内容去掉 右边最长 的匹配模式</span></span><br><span class="line"><span class="variable">$&#123;var#pattern&#125;</span>   <span class="comment">#如果是，就从命令行把variable中的内容去掉 左边 最短的匹配模式</span></span><br><span class="line"><span class="variable">$&#123;var##pattern&#125;</span>  <span class="comment">#如果是，就从命令行把variable中的内容去掉 左边 最长的匹配模式</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 字符串提取和替换</span></span><br><span class="line"><span class="variable">$&#123;var:num&#125;</span>       <span class="comment">#shell在var中提取第num个字符到末尾的所有字符 </span></span><br><span class="line"><span class="comment"># 若num为正数，从左边0处开始</span></span><br><span class="line"><span class="comment"># 若num为负数，从右边开始提取字串，但必须使用在冒号后面加空格或一个数字或整个num加上括号，如$&#123;var: -2&#125;、$&#123;var: 1-3&#125;（注意这里）或$&#123;var:(-2)&#125;。</span></span><br><span class="line"><span class="variable">$&#123;var:num1:num2&#125;</span>        <span class="comment">#num1是位置/num2是长度。表示从$var字符串的第$num1个位置开始提取长度为$num2的子串,不能为负数。</span></span><br><span class="line"><span class="variable">$&#123;var/pattern/pattern&#125;</span>  <span class="comment">#表示将var字符串的第一个匹配的pattern替换为另一个pattern。</span></span><br><span class="line"><span class="variable">$&#123;var//pattern/pattern&#125;</span> <span class="comment">#表示将var字符串中的所有能匹配的pattern替换为另一个pattern。</span></span><br></pre></td></tr></table></figure>
<p>这四种模式中都不会改变variable的值，其中只有在pattern中使用了*匹配符号时，%和%%，#和##才有区别。</p>
<blockquote>
<p>结构中的pattern支持通配符，*表示零个或多个任意字符，?表示仅与一个任意字符匹配，[…]表示匹配中括号里面的字符，[!…]表示不匹配中括号里面的字符 （基础正则）。</p>
</blockquote>
<p>实际案例：</p>
<ul>
<li><p>示例1、shell变量替换</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ZBX_MAIN_DB=<span class="variable">$&#123;ZBX_MAIN_DB:-"mysql"&#125;</span>  <span class="comment">#如果ZBX_MAIN_DB变量为空则采用mysql进行替换</span></span><br><span class="line"><span class="variable">$echo</span> <span class="variable">$ZBX_MAIN_DB</span>  <span class="comment">#mysql</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>示例2、shell变量匹配</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">var=testcase </span><br><span class="line"><span class="variable">$echo</span> <span class="variable">$var</span> </span><br><span class="line">testcase </span><br><span class="line"><span class="variable">$echo</span> <span class="variable">$&#123;var%s*e&#125;</span>   <span class="comment">#去除右边 最短 匹配</span></span><br><span class="line">testca </span><br><span class="line"><span class="variable">$echo</span> <span class="variable">$&#123;var%%s*e&#125;</span>  <span class="comment">#去除右边 最长 匹配</span></span><br><span class="line">te </span><br><span class="line"></span><br><span class="line"><span class="variable">$echo</span> <span class="variable">$&#123;var#?e&#125;</span>  <span class="comment"># 去掉 左边 最短的匹配模式</span></span><br><span class="line">stcase </span><br><span class="line"><span class="variable">$echo</span> <span class="variable">$&#123;var##?e&#125;</span> </span><br><span class="line">stcase </span><br><span class="line"><span class="variable">$echo</span> <span class="variable">$&#123;var##*e&#125;</span>   <span class="comment"># 去掉 左边 最长的匹配模式</span></span><br><span class="line"><span class="variable">$echo</span> <span class="variable">$&#123;var##*s&#125;</span> </span><br><span class="line">e  </span><br><span class="line"><span class="variable">$echo</span> <span class="variable">$&#123;var##test&#125;</span> </span><br><span class="line"><span class="keyword">case</span></span><br><span class="line"></span><br><span class="line">var=/home/centos </span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$var</span> </span><br><span class="line">/home/centos</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;var:5&#125;</span>   <span class="comment">#取子字符串</span></span><br><span class="line">/centos</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;var: -6&#125;</span> </span><br><span class="line">centos </span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;var:(-6)&#125;</span> </span><br><span class="line">centos </span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;var:1:4&#125;</span>  <span class="comment">#注意字符是从0开始，这个案例是表示从1开始偏移后面的4位数;</span></span><br><span class="line">home </span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;var/o/h&#125;</span>  <span class="comment">#匹配从左到右开始的第一个字符并将其替换</span></span><br><span class="line">/hhme/centos</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;var//o/h&#125;</span> <span class="comment">#完全匹配替换</span></span><br><span class="line">/hhme/cenths</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>

<p><strong>6.符号$后的括号以及大括号</strong></p>
<ul>
<li>(1)${a} 变量a的值, 在不引起歧义的情况下可以省略大括号,加花括号是为了帮助解释器识别变量的边界;</li>
<li>(2)$(cmd) 命令替换，和<code>cmd</code>效果相同，结果为shell命令cmd的输，过某些Shell版本不支持$()形式的命令替换, 如tcsh。</li>
<li>(3)$((expression)) 和<code>exprexpression</code>效果相同, 计算数学表达式exp的数值, 其中exp只要符合C语言的运算规则即可, 甚至三目运算符和逻辑表达式都可以计算。</li>
</ul>
<p>实际案例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#示例1.建议采用$&#123;变量形式&#125;，推荐给所有变量加上花括号这是个好的编程习惯</span></span><br><span class="line"><span class="comment">#如果不给skill变量加花括号，写成echo "I am good at $skillScript"，解释器就会把$skillScript当成一个变量（其值为空），代码执行结果就不是我们期望的样子了</span></span><br><span class="line">$ <span class="keyword">for</span> skill <span class="keyword">in</span> Ada Coffe Action Java</span><br><span class="line">&gt;     <span class="keyword">do</span></span><br><span class="line">&gt;         <span class="built_in">echo</span> <span class="string">"I am good at <span class="variable">$&#123;skill&#125;</span>Script"</span>  </span><br><span class="line">&gt;     <span class="keyword">done</span></span><br><span class="line"><span class="comment"># I am good at AdaScript</span></span><br><span class="line"><span class="comment"># I am good at CoffeScript</span></span><br><span class="line"><span class="comment"># I am good at ActionScript</span></span><br><span class="line"><span class="comment"># I am good at JavaScript</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例2.拼接字符串</span></span><br><span class="line">yourname=<span class="string">"test"</span></span><br><span class="line">greeting=<span class="string">"hello,"</span><span class="variable">$yourname</span><span class="string">"！"</span></span><br><span class="line">greeting1=<span class="string">"hello,<span class="variable">$&#123;yourname&#125;</span>！"</span> <span class="comment">#建议形式</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$greeting</span>;<span class="built_in">echo</span> greeting1</span><br><span class="line"><span class="comment"># hello,test！</span></span><br><span class="line"><span class="comment"># hello,test！</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例3.字符串长度 $&#123;#test&#125;、 取子字符串$&#123;test:1:4&#125;（上面已经说了）</span></span><br><span class="line"><span class="built_in">test</span>=linux123456linux</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;#test&#125;</span>        <span class="comment">#统计字符个数</span></span><br><span class="line"><span class="comment"># 16</span></span><br><span class="line"></span><br><span class="line">string=<span class="string">"alibaba is a great company"</span> <span class="comment">#提取字符串</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;string:0:5&#125;</span>  <span class="comment">#输出aliba , 注意是:号 【从0开始后面的五位字符】</span></span><br><span class="line"><span class="built_in">echo</span> `expr index <span class="string">"<span class="variable">$string</span>"</span> o`  <span class="comment">#输出字符串索引位置 【从1开始记】</span></span><br></pre></td></tr></table></figure></p>
<p>补充：单个小括号与单个大括号多条命令执行</p>
<ul>
<li>(1)单小括号 <code>(cmd1;cmd2;cmd3)</code> 新开一个子shell顺序执行命令cmd1,cmd2,cmd3, 各命令之间用分号隔开, 最后一个命令后可以没有分号。</li>
<li>(2)单大括号 <code>{ cmd1;cmd2;cmd3;}</code> 在当前shell顺序执行命令cmd1,cmd2,cmd3, 各命令之间用分号隔开, 最后一个命令后必须有分号, <code>第一条命令和左括号之间必须用空格隔开</code>。</li>
<li>对{}和()而言, 括号中的重定向符只影响该条命令而括号外的重定向符影响到括号中的所有命令。</li>
</ul>
<hr>

<h3 id="3-用户自定义变量"><a href="#3-用户自定义变量" class="headerlink" title="(3)用户自定义变量"></a>(3)用户自定义变量</h3><p>字符串是shell编程中最常用最有用的数据类型（除了数字和字符串，也没啥其它类型好用了），字符串可以用单引号也可以用双引号，也可以不用引号。<code>单双引号的区别跟PHP类似</code>，识别变量和不识别变量。</p>
<table>
<thead>
<tr>
<th>符号</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>‘ ‘</td>
<td>单引号:在单引号中所有的特殊符号,如’$’和’`’（反引号）都没有特殊含义</td>
</tr>
<tr>
<td>“ “</td>
<td>双引号:在双引号中特殊符号都没有特殊含义,但是”$”、”`”和”\”是例外,拥有”调用变量的值”、”引用命令”和”转义符”的特殊含义</td>
</tr>
<tr>
<td>`id`</td>
<td><code>插入的命令</code>可以直接执行</td>
</tr>
<tr>
<td>$()</td>
<td>和反引号一样,用来引用系统命令</td>
</tr>
<tr>
<td>$</td>
<td>用于调用变量的值,如需要调用变量name的值时,需要用$name的方式得到变量的值。</td>
</tr>
<tr>
<td>\</td>
<td>转义符,跟在\之后的特殊符号将失去特殊含义,变味普通字符。如\$将输出”$”符号,而不当作是变量引用</td>
</tr>
</tbody>
</table>
<p><em>实际案例：</em><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#单引号</span></span><br><span class="line">- 任何字符都会原样输出,所以单引号字符串中的变量是无效的;</span><br><span class="line">- 单引号字串中不能出现单引号(对单引号使用转义字符后也不不行);</span><br><span class="line">str=<span class="string">'this is a string $var'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#双引号</span></span><br><span class="line">- 可以解析变量并且可以出现转义字符</span><br><span class="line">str1=<span class="string">"this is a variable <span class="variable">$test</span>"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例1.Shell变量声明和调用</span></span><br><span class="line">变量名=变量值</span><br><span class="line"><span class="built_in">echo</span> $变量名</span><br><span class="line"></span><br><span class="line"><span class="built_in">test</span>=12346</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$test</span>"</span>   <span class="comment"># $调用变量 123456</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$str</span>      <span class="comment">#变量不被解析 this is a string $var</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$str1</span>     <span class="comment">#变量被解析 this is a variable 123456</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例2.命令替换</span></span><br><span class="line"><span class="variable">$echo</span> `id`</span><br><span class="line"><span class="variable">$echo</span> $(id)  <span class="comment">#这样执行的命令不会换行</span></span><br><span class="line">uid=0(root) gid=0(root) 组=0(root)</span><br><span class="line"><span class="comment">#常用方式</span></span><br><span class="line">aa=$(who)</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$aa</span>"</span> <span class="variable">$&#123;aa&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例3.变量叠加</span></span><br><span class="line">x=123   </span><br><span class="line">x=<span class="string">"<span class="variable">$x</span>"</span>456  </span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$x</span>  <span class="comment"># 则x变成123456</span></span><br></pre></td></tr></table></figure><br><figure class="image-box">
                <a rel=shell脚本编程之路1 href="https://img.weiyigeek.top/2019/20190701095426.png" target="_blank" title="WeiyiGeek.单双引号" data-fancybox="images"><img src="https://img.weiyigeek.top/2019/20190701095426.png" alt="WeiyiGeek.单双引号" title="" class=""></a>
                <p>WeiyiGeek.单双引号</p>
            </figure></p>
<p>不同变量类型申明：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#示例1.declare与set和unset联合使用</span></span><br><span class="line"><span class="variable">$declare</span> TPATH=<span class="string">'Visual C++ -- JAVA'</span></span><br><span class="line"><span class="variable">$set</span> -a TPATH <span class="comment">#设置环境变量</span></span><br><span class="line"><span class="variable">$env</span> | grep <span class="string">"TPATH"</span></span><br><span class="line">TPATH=Visual C++ -- JAVA          <span class="comment">#写入了env环境变量,变量名大写</span></span><br><span class="line"><span class="variable">$unset</span> -v TPATH    <span class="comment">#删除tpath变量</span></span><br><span class="line"><span class="variable">$env</span> | grep <span class="string">"TPATH"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#数组整型</span></span><br><span class="line"><span class="comment"># -a  数组类型</span></span><br><span class="line"><span class="comment"># -i   整数</span></span><br><span class="line"><span class="comment"># -x  环境变量</span></span><br><span class="line"><span class="comment"># -r  只读变量</span></span><br><span class="line"><span class="comment"># -p  显示类型</span></span><br><span class="line"><span class="built_in">declare</span> -a <span class="built_in">test</span>=0</span><br><span class="line"><span class="built_in">declare</span> -a <span class="built_in">test</span>[1]=1</span><br><span class="line"><span class="built_in">declare</span> -a <span class="built_in">test</span>[2]=2</span><br><span class="line"><span class="variable">$echo</span> <span class="variable">$&#123;test[1]&#125;</span> <span class="variable">$&#123;test[2]&#125;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;test[*]&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#类型查看</span></span><br><span class="line"><span class="built_in">declare</span> -i <span class="built_in">test</span>=1024</span><br><span class="line"><span class="variable">$declare</span> -p <span class="built_in">test</span></span><br><span class="line"><span class="comment"># declare -i test="1024"</span></span><br></pre></td></tr></table></figure></p>
<p><em>注意事项：</em></p>
<ul>
<li><code>变量名和等号之间不能有空格</code>，这可能和你熟悉的所有编程语言都不一样.</li>
<li>用户可以使用env命令和grep命令对其进行查询，已经删除的环境变量再次使用指令查询时，将出现查询不到指定环境变量的输出信息。</li>
</ul>
<hr>

<h3 id="4-环境变量"><a href="#4-环境变量" class="headerlink" title="(4)环境变量"></a>(4)环境变量</h3><ul>
<li>用户自定义变量：局部变量（<code>只在当前shell中生效，临时</code>）</li>
<li>系统环境变量：全局变量但是<code>对系统生效的环境变量名和变量作用是固定的一般大写</code>（当前父shell和所有子shell中生效）</li>
</ul>
<p><em>环境变量配置文件:</em><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">全局配置文件：/etc/profile</span><br><span class="line">用户配置文件：~/.bash_profile</span><br><span class="line">注销时生效的环境变量配置：~/.bash_logout</span><br><span class="line">历史操作：~/.bash_history</span><br><span class="line"></span><br><span class="line"><span class="comment">#重新加载bash配置文件:</span></span><br><span class="line"><span class="built_in">source</span> .bashrc  <span class="comment">#立即生效</span></span><br></pre></td></tr></table></figure></p>
<p><em>系统启动加载Shell环境顺序图：</em><br><figure class="image-box">
                <a rel=shell脚本编程之路1 href="https://img.weiyigeek.top/2019/20190703174501.png" target="_blank" title="WeiyiGeek.Shell环境顺序图" data-fancybox="images"><img src="https://img.weiyigeek.top/2019/20190703174501.png" alt="WeiyiGeek.Shell环境顺序图" title="" class=""></a>
                <p>WeiyiGeek.Shell环境顺序图</p>
            </figure></p>
<p>设置环境变量的方法：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#示例1：</span></span><br><span class="line"><span class="built_in">declare</span> -x T1=<span class="string">"demo"</span></span><br><span class="line"><span class="built_in">set</span> -a T2=<span class="string">"demo"</span></span><br><span class="line"><span class="built_in">export</span> T3=<span class="string">"demo"</span></span><br></pre></td></tr></table></figure></p>
<p>查看环境变量：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">env   <span class="comment">#env命令用于显示系统中已存在的环境变量，以及在定义的环境中执行指令。</span></span><br><span class="line"><span class="comment"># XDG_SESSION_ID=60</span></span><br><span class="line"><span class="comment"># HOSTNAME=master</span></span><br><span class="line"><span class="comment"># TERM=xterm  #终端环境</span></span><br><span class="line"><span class="comment"># SHELL=/bin/bash</span></span><br><span class="line"><span class="comment"># HISTSIZE=1000</span></span><br><span class="line"><span class="comment"># SSH_CLIENT=10.20.172.108 51849 22  #当前SSH连接信息</span></span><br><span class="line"><span class="comment"># SSH_TTY=/dev/pts/1  #ssh连接的终端时pts/1</span></span><br><span class="line"><span class="comment"># USER=root</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$LOGNAME</span> <span class="comment">#登录用户相关信息</span></span><br><span class="line"><span class="variable">$UID</span></span><br><span class="line"><span class="variable">$Shell</span></span><br><span class="line"><span class="variable">$HOME</span> <span class="comment">#家目录</span></span><br><span class="line"><span class="variable">$PWD</span></span><br><span class="line"><span class="variable">$PATH</span> <span class="comment">#用户所输入的命令是在哪些目录中查找</span></span><br><span class="line"><span class="variable">$PS1</span></span><br><span class="line"><span class="variable">$PS2</span></span><br><span class="line"><span class="variable">$RANDOM</span> <span class="comment">#随机数 (重要)</span></span><br></pre></td></tr></table></figure><br><br></p>
<p>在<code>PATH环境变量</code>中Linux中执行可执行文件常用的方法是输入绝对路径，但是如果不输入路径时，系统会在PATH中的路径中寻找该可执行文件，直到找到该指定文件，就执行，但是找不到时就报错。<br>直接输入文件名就能执行自定义脚本</p>
<ul>
<li>①将该脚本文件复制到PATH中的任意路径中；</li>
<li>②在PATH中添加该脚本文件的路径；</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$PATH</span>    <span class="comment">#系统搜索命令的路径，路径之间用：分割。</span></span><br><span class="line">/usr/<span class="built_in">local</span>/sbin:/usr/<span class="built_in">local</span>/bin:/usr/sbin:/usr/bin:/root/bin</span><br><span class="line"></span><br><span class="line"><span class="comment">#增加PATH环境变量（拼接即可），tab补全命令也是按照PATH中的来补全</span></span><br><span class="line">PATH=<span class="string">"<span class="variable">$PATH</span>"</span>:/root/sh</span><br></pre></td></tr></table></figure>
<figure class="image-box">
                <a rel=shell脚本编程之路1 href="https://img.weiyigeek.top/2019/20190703163037.png" target="_blank" title="WeiyiGeek." data-fancybox="images"><img src="https://img.weiyigeek.top/2019/20190703163037.png" alt="WeiyiGeek." title="" class=""></a>
                <p>WeiyiGeek.</p>
            </figure>
<p>下面就是设置命令行显示格式对于有强迫症的患者来说是极大的好处,可以随心所欲的设置<code>$PS1变量</code>;<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> | grep PS1</span><br><span class="line"><span class="comment">#PS1='[\u@\h \W]\$ ' ==&gt;&gt; [root@master ~]#</span></span><br><span class="line">[root@WeiyiGeek ~] <span class="comment"># [当前用户的账号名称@主机名的第一个名字 工作目录的最后一层目录名]#</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#PS1的常用参数以及含义:</span></span><br><span class="line">　　\d ：代表日期，格式为weekday month date，例如：<span class="string">"Mon Aug 1"</span></span><br><span class="line">　　\H ：完整的主机名称</span><br><span class="line">　　\h ：仅取主机名中的第一个名字</span><br><span class="line">　　\t ：显示时间为24小时格式，如：HH：MM：SS</span><br><span class="line">　　\T ：显示时间为12小时格式</span><br><span class="line">　　\A ：显示时间为24小时格式：HH：MM</span><br><span class="line">　　\u ：当前用户的账号名称</span><br><span class="line">　　\v ：BASH的版本信息</span><br><span class="line">　　\w ：完整的工作目录名称</span><br><span class="line">　　\W ：利用basename取得工作目录名称，只显示最后一个目录名</span><br><span class="line">　　\<span class="comment"># ：下达的第几个命令</span></span><br><span class="line">　　\$ ：提示字符，如果是root用户，提示符为 <span class="comment"># ，普通用户则为 $</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 在PS1中设置字符颜色的格式为：</span></span><br><span class="line">\[\e[F;Bm\] 其中“F“为字体颜色编号为30-37，“B”为背景颜色，编号为40-47。</span><br></pre></td></tr></table></figure><br><figure class="image-box">
                <a rel=shell脚本编程之路1 href="https://img.weiyigeek.top/2019/20190703163549.png" target="_blank" title="WeiyiGeek.Front-backgroudcolor" data-fancybox="images"><img src="https://img.weiyigeek.top/2019/20190703163549.png" alt="WeiyiGeek.Front-backgroudcolor" title="" class=""></a>
                <p>WeiyiGeek.Front-backgroudcolor</p>
            </figure></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#设置命令行的格式为绿字黑底(\[\e[32;40m\])，显示当前用户的账号名称(\u)、主机的第一个名字(\h)、完整的当前工作目录名称(\w)、24小时格式时间(\t)</span></span><br><span class="line">PS1=<span class="string">'[\[\e[32;40m\]\u@\h \w \t]\$ '</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#经过多次测试后,最终确定了一个适合我自己的格式</span></span><br><span class="line"><span class="comment">#Centos</span></span><br><span class="line">vim .bashrc   <span class="comment">##设置永久生效,修改.bashrc文件,加入PS1</span></span><br><span class="line">PS1=<span class="string">"[\[\e[32;40m\]\u\[\e[37;40m\]@\h \[\e[31;40m\]\w \[\e[43;40m\]\t\[\e[0m\]]\\$ "</span></span><br><span class="line"><span class="built_in">source</span> .bashrc    <span class="comment">#立即生效</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Debian：</span></span><br><span class="line">/etc/bash.bashrc</span><br><span class="line">PS1=<span class="string">'$&#123;debian_chroot:+($debian_chroot)&#125;\[\e[32;40m\]\u\[\e[37;40m\]@\h:\[\e[34;40m\]\w \[\e[31;40m\]\A\[\e[0m\]\$ '</span></span><br></pre></td></tr></table></figure>
<p><br></p>
<p>还有一个重要的环境变量就是<code>语序环境变量</code>,我们在讲解locale命令的时候是有所涉及的，就是<code>$LANG定义系统主语系的变量</code>;<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#输出当前语系：</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$LANG</span></span><br><span class="line">zh_CN.UTF-8</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看系统可支持的语系：</span></span><br><span class="line">locale -a | more</span><br><span class="line">LC_ALL : 定义整体语系变量</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置语系：(临时)</span></span><br><span class="line">LANG=en_US.UTF-8 <span class="comment">#英文</span></span><br><span class="line">LANG=zh_CN.UTF-8 <span class="comment">#中文</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#永久设置:</span></span><br><span class="line">语系信息放在文件 /etc/sysconfig/i18n 下（`Centos 7以下版本才有`）下次开机以后的系统环境,然后你需要做的就是找到LANG 和 SUPPORTED 这两行，然后将以下内容对应着替换上</span><br><span class="line">LANG=<span class="string">"zh_CN.UTF-8"</span></span><br><span class="line">SUPPORTED=<span class="string">"ZH_CN.UTF-8:ZH_CN:ZH"</span></span><br></pre></td></tr></table></figure><br><figure class="image-box">
                <a rel=shell脚本编程之路1 href="https://img.weiyigeek.top/2019/20190703164049.png" target="_blank" title="WeiyiGeek.语言环境" data-fancybox="images"><img src="https://img.weiyigeek.top/2019/20190703164049.png" alt="WeiyiGeek.语言环境" title="" class=""></a>
                <p>WeiyiGeek.语言环境</p>
            </figure></p>
<p>如果没有图形界面还非要显示中文的两种方法:</p>
<ul>
<li>一个是使用第三方工具，且支持中文显示</li>
<li>还有一个使用第三方插件（要在linux字符界面下显示支持中文，需要安装zhcon插件）</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rpm -ql zhcon.rpm   <span class="comment">#查询</span></span><br><span class="line">rpm -ivh zhcon.rpm  <span class="comment">#安装</span></span><br><span class="line">rpm -e zhcon.rpm    <span class="comment">#卸载</span></span><br></pre></td></tr></table></figure>
<p><br></p>
<p><em>内部字段分隔符变量IFS</em></p>
<p>描述：internal field separator，IFS 是shell脚本中的一个特殊变量在处理文本数据时很有用。<br>把单个数据流划分成不同的数据元素的定界符，内部字段分隔符就是用于特定用途的定界符。<br><code>IFS是存储定界符的环境变量，是shell环境中的默认定界符字符串，默认值为空白字符（换行符、制表符、空格）</code><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="variable">$IFS</span></span><br></pre></td></tr></table></figure></p>
<p>实际案例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#迭代一个字符串或者CSV(comma separated value，都好分隔型数值)中的单词：</span></span><br><span class="line">data=<span class="string">"111,222,333|444,555,666"</span></span><br><span class="line"></span><br><span class="line">oldIFS=<span class="variable">$IFS</span>  <span class="comment">#定义一个变量为默认IFS</span></span><br><span class="line">IFS=<span class="string">'|'</span>      <span class="comment">#设置IFS为逗号</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="variable">$data</span>   <span class="comment"># date的取值列表</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"> <span class="built_in">echo</span> S:<span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">IFS=<span class="variable">$oldIFS</span>  <span class="comment">#还原IFS为默认值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#执行结果</span></span><br><span class="line">S:111</span><br><span class="line">S:222</span><br><span class="line">S:333</span><br><span class="line">S:444</span><br><span class="line">S:555</span><br><span class="line">S:666</span><br><span class="line"><span class="comment">#如果IFS为1</span></span><br><span class="line">S:111,222,333</span><br><span class="line">S:444,555,666</span><br></pre></td></tr></table></figure><br>IFS被设置为逗号’,’ , shell将逗号解释为一个定界符，因此变量$i在每次迭代中读取由逗号分隔的字符串作为变量值</p>
<hr>

<h3 id="5-位置参数变量"><a href="#5-位置参数变量" class="headerlink" title="(5)位置参数变量"></a>(5)位置参数变量</h3><p>主要是向脚本文件中传递脚本运算需要的值，更适合给程序的编写者使用，在我们写可变参数脚本尤其有用的;</p>
<p>主要位置参数变量：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$&#123;n&#125;</span> : <span class="variable">$0</span>代表脚本本身,<span class="variable">$0</span>~9代表第一个到底九个参数,如果是9个以上参数需要使用大括号包含 <span class="variable">$&#123;10&#125;</span></span><br><span class="line"><span class="variable">$&#123;*&#125;</span> ：代表命令行中的所有参数,它把所有参数 看成一个整体</span><br><span class="line"><span class="variable">$&#123;@&#125;</span> ：代表命令行中的所有参数,它把所有参数 区分对待(划分个体)</span><br><span class="line"><span class="variable">$&#123;#&#125;</span> ：代表命令行中所有参数的个数;</span><br></pre></td></tr></table></figure></p>
<p>实际案例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#说明：$&#123;0&#125; 或者 $0 就是输出文件本身，从命令行中输入得参数$1/9,$&#123;10&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#!/usr/bin/env bash</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"文件名称："</span> <span class="variable">$&#123;0&#125;</span> <span class="variable">$0</span></span><br><span class="line">basename <span class="variable">$&#123;0&#125;</span></span><br><span class="line"></span><br><span class="line">num1=<span class="variable">$1</span>;num2=<span class="variable">$2</span></span><br><span class="line"><span class="built_in">let</span> num3=<span class="variable">$num1</span>+<span class="variable">$num2</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"<span class="variable">$num1</span> + <span class="variable">$num2</span> = <span class="variable">$num3</span>  \n"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `seq <span class="variable">$num3</span>`;<span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"for output: <span class="variable">$i</span>"</span></span><br><span class="line">  <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"\n"</span></span><br><span class="line"><span class="comment">#其他三个特色是字符（区别）</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"A total of <span class="variable">$#</span> Parameters"</span> <span class="comment">#代表所有参数的个数</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Every Paraments is:$*"</span>  <span class="comment">#代表所有参数一个整体</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"The Paraments is:<span class="variable">$@</span> \n"</span>  <span class="comment">#用这个代表各个参数的值（个体）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#整体和个体的区别</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="string">"$*"</span>;<span class="keyword">do</span></span><br><span class="line">      <span class="built_in">echo</span> <span class="string">"整体 output:<span class="variable">$i</span>"</span>   <span class="comment">#整体</span></span><br><span class="line">  <span class="keyword">done</span></span><br><span class="line"><span class="keyword">for</span> j <span class="keyword">in</span> <span class="string">"<span class="variable">$@</span>"</span>;<span class="keyword">do</span></span><br><span class="line">      <span class="built_in">echo</span> <span class="string">"个体 output:<span class="variable">$j</span>"</span>   <span class="comment">#个体</span></span><br><span class="line">  <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#执行结果</span></span><br><span class="line"><span class="comment"># 文件名称： ./var.sh ./var.sh</span></span><br><span class="line"><span class="comment"># var.sh</span></span><br><span class="line"><span class="comment"># 1 + 2 = 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># for output: 1</span></span><br><span class="line"><span class="comment"># for output: 2</span></span><br><span class="line"><span class="comment"># for output: 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># A total of 2 Parameters</span></span><br><span class="line"><span class="comment"># Every Paraments is:1 2</span></span><br><span class="line"><span class="comment"># The Paraments is:1 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 整体 output:1 2</span></span><br><span class="line"><span class="comment"># 个体 output:1</span></span><br><span class="line"><span class="comment"># 个体 output:2</span></span><br></pre></td></tr></table></figure></p>
<p><strong>shift 迁移语句</strong><br>描述：用于迁移位置变量，将$1~$9依次向左传递；通常用于在不知道传入参数个数的情况下依次遍历每个参数然后进行相应处理（常见于Linux中各种程序的启动脚本）。<br>例如<code>当shell程序处理完前九个命令行参数后，可以使用shift 9命令把$10移到$1</code>;并且位置参数熟料也会随之而变化;</p>
<p>简单说明:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#例如：若当前脚本程序获得的位置变量如下：</span></span><br><span class="line"><span class="variable">$1</span>=file1、<span class="variable">$2</span>=file2、<span class="variable">$3</span>=file3、<span class="variable">$4</span>=file4</span><br><span class="line"></span><br><span class="line"><span class="comment">#执行一次shift命令后，各位置变量为：</span></span><br><span class="line"><span class="variable">$2</span>=file2、<span class="variable">$3</span>=file3、<span class="variable">$4</span>=file4</span><br><span class="line"> </span><br><span class="line"><span class="comment">#在执行一次：</span></span><br><span class="line"><span class="variable">$3</span>=file3、<span class="variable">$4</span>=file4</span><br></pre></td></tr></table></figure></p>
<p>实际案例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#示例1：依次读取输入的参数并打印参数个数</span></span><br><span class="line"><span class="comment">#每次运行shift(不带参数的),销毁一个参数，后面的参数前移</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">while</span> [ <span class="variable">$#</span> != 0 ]</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"prama is <span class="variable">$1</span>,prama size is <span class="variable">$#</span>"</span></span><br><span class="line">  <span class="built_in">shift</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#输入如下命令运行：</span></span><br><span class="line">./shift_test.sh a b c</span><br><span class="line">prama is a,prama size is 3</span><br><span class="line">prama is b,prama size is 2</span><br><span class="line">prama is c,prama size is 1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例2.同理shift n后，前n位参数都会被销毁，比如：</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"参数个数为：<span class="variable">$#</span>,其中："</span>  </span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(seq 1 <span class="variable">$#</span>)  </span><br><span class="line"><span class="keyword">do</span>  </span><br><span class="line">  <span class="built_in">eval</span> j=\$<span class="variable">$i</span>  </span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"第<span class="variable">$i</span>个参数($"</span><span class="variable">$i</span><span class="string">")：<span class="variable">$j</span>"</span>  </span><br><span class="line"><span class="keyword">done</span>  </span><br><span class="line">  </span><br><span class="line"><span class="built_in">shift</span> 3  </span><br><span class="line">  </span><br><span class="line"><span class="built_in">echo</span> <span class="string">"执行shift 3操作后："</span>  </span><br><span class="line"><span class="built_in">echo</span> <span class="string">"参数个数为：<span class="variable">$#</span>,其中："</span>  </span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(seq 1 <span class="variable">$#</span>)  </span><br><span class="line"><span class="keyword">do</span>  </span><br><span class="line">  <span class="comment">#通过eval把i变量的值($i)作为变量j的名字  </span></span><br><span class="line">  <span class="built_in">eval</span> j=\$<span class="variable">$i</span>  </span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"第<span class="variable">$i</span>个参数($"</span><span class="variable">$i</span><span class="string">")：<span class="variable">$j</span>"</span>  </span><br><span class="line"><span class="keyword">done</span>  </span><br><span class="line"><span class="comment">#输出结果为：</span></span><br><span class="line">参数个数为：5,其中：</span><br><span class="line">第1个参数(<span class="variable">$1</span>)：a</span><br><span class="line">第2个参数(<span class="variable">$2</span>)：b</span><br><span class="line">第3个参数(<span class="variable">$3</span>)：c</span><br><span class="line">第4个参数(<span class="variable">$4</span>)：d</span><br><span class="line">第5个参数(<span class="variable">$5</span>)：e</span><br><span class="line"><span class="comment">#执行shift 3操作后：</span></span><br><span class="line">参数个数为：2,其中：</span><br><span class="line">第1个参数(<span class="variable">$1</span>)：d</span><br><span class="line">第2个参数(<span class="variable">$2</span>)：e</span><br></pre></td></tr></table></figure></p>
<hr>

<h3 id="6-预定义变量"><a href="#6-预定义变量" class="headerlink" title="(6)预定义变量"></a>(6)预定义变量</h3><p>描述:该变量在发挥着及其重要的角色特别是在Shell编程的时候;</p>
<table>
<thead>
<tr>
<th>符号</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>$?</td>
<td>检测上一个命令的返回值,判断是不是执行成功,是则为0不是则不为0</td>
</tr>
<tr>
<td>$$</td>
<td>当前 Shell 进程的 pid </td>
</tr>
<tr>
<td>$!</td>
<td>：上一个后台进程的 pid 可以使用这两个指令来获取相应的进程 pid</td>
</tr>
</tbody>
</table>
<p>实际案例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#示例1.上一个进程执行情况</span></span><br><span class="line"><span class="built_in">echo</span> $?;text=`<span class="built_in">echo</span> $?`;</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$text</span></span><br><span class="line">0</span><br><span class="line"><span class="comment"># bash: 0: 正确执行</span></span><br><span class="line"><span class="comment"># bash: 127(random): 没正确执行（非0）</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例2.当前进程号</span></span><br><span class="line">$ <span class="built_in">echo</span> $$</span><br><span class="line">3672</span><br><span class="line">$ ps aux | grep <span class="string">"3672"</span></span><br><span class="line">root       3672  0.0  0.2 116040  2676 pts/1    Ss   21:28   0:00 -bash</span><br><span class="line"></span><br><span class="line"><span class="comment">#示例3.例如，如果需要获取某个正在执行的进程的 pid（并写入指定的文件）</span></span><br><span class="line">date &gt;&gt; /tmp/txt.log &amp;</span><br><span class="line">[1] 2795 <span class="comment">#上一个进程号pid</span></span><br><span class="line"><span class="built_in">echo</span> $!</span><br><span class="line">2795</span><br></pre></td></tr></table></figure>
<figure class="image-box">
                <a rel=shell脚本编程之路1 href="https://img.weiyigeek.top/2019/20190703114112.png" target="_blank" title="WeiyiGeek.当前进程PID" data-fancybox="images"><img src="https://img.weiyigeek.top/2019/20190703114112.png" alt="WeiyiGeek.当前进程PID" title="" class=""></a>
                <p>WeiyiGeek.当前进程PID</p>
            </figure>
<p><em>总结事项：</em></p>
<ul>
<li>多看书本多操作,很简单的代码。其实真正自己写出来,在运行起来得到结果,也不容易</li>
<li>切勿眼高手低要不得</li>
<li>有时候要求有空格（比如条件判断时）,有时候不能有空格（变量赋值时）,有时候,单引号有时候又 反引号</li>
</ul>
<hr>

<h3 id="7-变量的间接引用"><a href="#7-变量的间接引用" class="headerlink" title="(7)变量的间接引用"></a>(7)变量的间接引用</h3><p>描述：在Shell高级编程中可以采用eval命令进行变量间的间接引用,eval命令会多次扫描自己的参数(变量)并且运行;些需要进行两次扫描的变量有时候被称为复杂变量。</p>
<p>基础示例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#示例1.间接引用变量</span></span><br><span class="line">vara=varb</span><br><span class="line">varb=<span class="string">"ls -lah"</span>  <span class="comment">#注意这里双引号很重要</span></span><br><span class="line"><span class="built_in">eval</span> \$<span class="variable">$vara</span> <span class="comment">#注意转义字符  == 执行了 ls -alh</span></span><br><span class="line">-rwxr-xr-x 2 Administrator 197121  39K 九月 11  2018 git.exe</span><br><span class="line">-rwxr-xr-x 1 Administrator 197121 145K 九月 11  2018 git-gui.exe</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#实例2.间接引用变量进行输出</span></span><br><span class="line">var=varc</span><br><span class="line">varc=<span class="string">"weiyigeek"</span></span><br><span class="line"><span class="built_in">eval</span> vard=\$<span class="variable">$var</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Name: <span class="variable">$&#123;vard&#125;</span>"</span>  <span class="comment">#Name: weiyigeek</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例3.变量间接调用之 $&#123;!&#125;</span></span><br><span class="line">x=var</span><br><span class="line">var=1024</span><br><span class="line"><span class="variable">$&#123;!x&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>shell脚本案例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># 实现变量的间接引用</span></span><br><span class="line">BLACK=<span class="string">'\E[1;30m'</span></span><br><span class="line">RED=<span class="string">'\E[1;31m'</span></span><br><span class="line">GREEN=<span class="string">'\E[1;32m'</span></span><br><span class="line">YEELOW=<span class="string">'\E[1;33m'</span></span><br><span class="line">BLUE=<span class="string">'\E[1;34m'</span></span><br><span class="line">PINK=<span class="string">'\E[1;35m'</span></span><br><span class="line">CYAN=<span class="string">'\E[1;36m'</span></span><br><span class="line">WHITE=<span class="string">'\E[1;37m'</span></span><br><span class="line">RES=<span class="string">'\E[0m'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#关键点1</span></span><br><span class="line"><span class="keyword">function</span> demo()</span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment">#获得最后一个参数</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"Last argument is <span class="variable">$(eval echo \$$#)</span>"</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"Last argument is <span class="variable">$(eval echo $#)</span>"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> colorPrint()</span><br><span class="line">&#123;</span><br><span class="line">  <span class="built_in">eval</span> COLOR=\$<span class="variable">$1</span></span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">"<span class="variable">$&#123;COLOR&#125;</span><span class="variable">$&#123;2&#125;</span><span class="variable">$&#123;RES&#125;</span>"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#关键点2</span></span><br><span class="line"><span class="keyword">function</span> usage()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">"<span class="variable">$&#123;RED&#125;</span>Usage:<span class="variable">$0</span> COLOR=[BLACK|RED|YELLOW|BLUE|PINK|CYAN|WHITE] [CONTENT]<span class="variable">$&#123;RES&#125;</span>"</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#判断参数个数 2 &gt; 2 | $# 从0 开始 计数</span></span><br><span class="line">[ 2 -gt <span class="variable">$#</span> ] &amp;&amp; usage</span><br><span class="line"></span><br><span class="line">demo $*</span><br><span class="line">colorPrint $*</span><br></pre></td></tr></table></figure><br>执行结果:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#脚本帮助</span></span><br><span class="line">Usage:eval.sh COLOR=[BLACK|RED|YELLOW|BLUE|PINK|CYAN|WHITE] [CONTENT]</span><br></pre></td></tr></table></figure><br><figure class="image-box">
                <a rel=shell脚本编程之路1 href="https://img.weiyigeek.top/2019/1/20190801225645.png" target="_blank" title="WeiyiGeek.eval变量间接引用" data-fancybox="images"><img src="https://img.weiyigeek.top/2019/1/20190801225645.png" alt="WeiyiGeek.eval变量间接引用" title="" class=""></a>
                <p>WeiyiGeek.eval变量间接引用</p>
            </figure></p>
<p><br></p>
<h3 id="8-变量接收命令"><a href="#8-变量接收命令" class="headerlink" title="(8)变量接收命令"></a>(8)变量接收命令</h3><p>描述:在写shell的时候常常利用执行命令后返回结果作为参考或者进行判断,可以说是非常的常用;</p>
<p>命令的执行结果重定向到变量的几种方式<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#示例1：</span></span><br><span class="line">var1=$(<span class="built_in">command</span>)</span><br><span class="line">var3=$(<span class="built_in">command</span> 2&gt;&amp;1) <span class="comment">#要将stdout和stderr保存到变量，需要在结尾处添加2&gt;＆1。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例2</span></span><br><span class="line">var2=`<span class="built_in">command</span>`</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h3 id="9-补充变量"><a href="#9-补充变量" class="headerlink" title="(9)补充变量"></a>(9)补充变量</h3><ul>
<li><p>$- : 记录着当前设置的shell选项,可通过set命令进行修改;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> $-</span><br><span class="line">himBH</span><br><span class="line"><span class="comment">#5个字母分别有各自含义</span></span><br><span class="line">* h：hashall 将命令所在的路径记录下来避免每次都要查询。<span class="comment">#举例：当h选项开启时，如果将某个自定义命令从/usr/bin/目录下移动到/usr/local/bin/再运行，会提示无此命令。而当通过set +h将h选项关闭后，上述情况就不会出现。</span></span><br><span class="line">* i：interactive-comments 当前的 shell 是一个交互式的 </span><br><span class="line">* m：monitor 打开监控模式就可以通过Job control来控制进程的停止、继续，后台或者前台执行等。</span><br><span class="line">* B：braceexpand 大括号扩展。`cp A_File&#123;,.back_up&#125;`</span><br><span class="line">* H：<span class="built_in">history</span> 执行过的命令将被记录下来，然后再用户登出的时候保存再用户家目录下的bash_history中;</span><br></pre></td></tr></table></figure>
</li>
<li><p>$_ <code>(类比\!\$)</code>: 记录上一个命令执行的参数(<code>最后一个参数前面以空格进行分割否则整体</code>)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#案例1:</span></span><br><span class="line"><span class="variable">$mkdir</span> -p /k8s/kubernetes/ssl/ &amp;&amp; <span class="built_in">cd</span> <span class="variable">$_</span> &amp;&amp; <span class="built_in">pwd</span></span><br><span class="line">/k8s/kubernetes/ssl/</span><br><span class="line"></span><br><span class="line"><span class="comment">#案例2:</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"WeiyiGeek"</span> &amp;&amp; <span class="built_in">echo</span> <span class="variable">$_</span></span><br><span class="line">WeiyiGeek</span><br><span class="line">WeiyiGeek</span><br></pre></td></tr></table></figure></li>
</ul>

        </div>
        
        <!-- 微信公众号关注/文章版权复制 -->
        
        <div id="btw-mask" style="position: fixed; top: 0px; right: 0px; bottom: 0px; left: 0px; opacity: 0.7; z-index: 999; background: rgb(0, 0, 0); display:none"></div>
<div id="btw-modal" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 360px; text-align: center; font-size: 13px; background: rgb(255, 255, 255); border-radius: 10px; z-index: 9999; font-family: PingFangSC-Regular, sans-serif;display:none">
<span id="btw-modal-close-btn" style="position: absolute; top: 5px; right: 15px; line-height: 1.8; font-size: 15px; cursor: pointer; opacity: 0.2; z-index: 9999; color: rgb(0, 0, 0); background: none; border: none; outline: none;">X</span>
<p id="btw-modal-header" style="margin-top: 40px; line-height: 1.8; font-size: 13px; ">
<b style="color:#6190e8;">你好看友,欢迎关注博主微信公众号哟! ❤ <br> 这将是我持续更新文章的动力源泉，谢谢支持！(๑′ᴗ‵๑) </b> <br> 如不想关注请点击右上角的【X】即可关闭继续浏览文章.<br>  <b style="color:red;"> 温馨提示: 未解锁的用户不能粘贴复制文章内容哟!</b> <br>
<br>Method 1.Please visit <strong><a href="https://twitter.com/WeiyiGeek" target="_blank" rel="noopener" style="color: rgb(240, 65, 52);text-decoration:underline;">【My Twitter】</a></strong>. There is an article verification code in the homepage.
<br>方式2.请访问本博主的B站<strong><a href="https://space.bilibili.com/385802642" target="_blank" rel="noopener" style="color: rgb(240, 65, 52);text-decoration:underline;">【WeiyiGeek】</a></strong>首页关注UP主,<br>将自动随机获取解锁验证码。
<br>方式3.扫一扫下方二维码，关注本站<strong>官方公众号</strong><br>
回复：<strong style="color: rgb(240, 65, 52);">验证码</strong>
将获取<strong style="color: rgb(240, 65, 52);">解锁(有效期7天)</strong>本站所有技术文章哟!</p>
<img src="/img/wechat-search.png" style="width: 300px; margin-top: 10px;">
<div id="btw-modal-input-code" style="margin-top: 20px; background: rgb(255, 255, 255);">
  <input id="btw-modal-input" type="number" minlength="4" maxlength="4" placeholder="请输入验证码|Verification Code"
    style="width: 165px; height: 32px; line-height: 32px; padding: 0px 10px; margin: 0px 10px; font-size: 13px; text-rendering: auto; text-transform: none; cursor: text; outline: none; box-sizing: border-box; border: 1px solid rgb(221, 221, 221); -webkit-appearance: textfield; background-color: white; -webkit-rtl-ordering: logical;"/>
  <button id="btw-submit-btn" onclick="yzm_vertify()"
    style="padding: 0px 20px; height: 32px; font-size: 14px; outline: none; border: none; color: rgb(255, 255, 255); background: rgb(222, 104, 109); cursor: pointer;">提
    交</button> </div>
<p id="btw-footer" style="margin: 40px 0px 20px; color: rgb(153, 153, 153);">@WeiyiGeek - 为了能到远方，脚下的每一步都不能少</p>
</div>
           

        <!-- Google 广告 -->
        
<ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-9134434519967436" data-ad-slot="7905848205"></ins>
  

        
<hr/>
<div style="text-align: center;font-weight: bold;">
  <p> 欢迎各位志同道合的朋友一起学习交流，如文章有误请在下方留下您宝贵的经验知识，个人邮箱地址<b style="color:#ff654e"><code>【master#weiyigeek.top】</code></b>或者个人公众号<b style="color:#ff654e"><code>【WeiyiGeek】</code></b>联系我。 </p>
  <p> 更多文章来源于<b style="color:#03a9f4">【WeiyiGeek Blog - 为了能到远方，脚下的每一步都不能少】</b>, 个人首页地址( <a style="color: #03a9f4;" href="https://weiyigeek.top" target="_blank"> https://weiyigeek.top </a> )</p>
<!-- 

  <ul style="font-weight: bolder;">
    <li>
      <p><span style="color: #03a9f4">echo&nbsp;&nbsp;"【点个赞】，动动你那粗壮的拇指或者芊芊玉手，亲！"</span></p>
    </li>
    <li>
      <p><span style="color: #ff9201">printf("%s",&nbsp;"【投个币】，万水千山总是情，投个硬币行不行，亲！")</span></p>
    </li>
    <li>
      <p><span style="color: #02a2ff">fmt.Printf("【收个藏】，阅后即焚不吃灰，亲！")&nbsp;&nbsp;</span></p>
    </li>
    <li>
      <p><span style="color:red">console.info("【转个发】，让更多的志同道合的朋友一起学习交流，亲！")</span></p>
    </li>
    <li>
      <p><span style="color: #ff654e">System.out.println("【关个注】，后续浏览查看不迷路哟，亲！")</span></p>
    </li>
  </ul> -->
  <div>
    <img src="/img/share-wechat.jpg" class="img-responsive" alt="扫描Follow(关注)WeiyiGeek公众号与Visit(浏览)极客全栈修炼小程序" >
    <p>专栏书写不易，如果您觉得这个专栏还不错的，请给这篇专栏 <b style="color: red;">【点个赞、投个币、收个藏、关个注、转个发、赞个助】</b>，这将对我的肯定，我将持续整理发布更多优质原创文章！。</p>
    <img src="/img/weiyigeek.jpg" class="img-responsive" alt="WeiyiGeek-banner">
  </div>
</div>
  <hr>
  

  <blockquote class="post-copyright">
    <div class="content">
      
        
<span class="post-time">
    最后更新时间：<time datetime="2023-01-31T02:29:10.385Z" itemprop="dateUpdated">2023-01-31 10:29:10</time>
</span><br>


        <span>文章原始路径：<a href="https://github.com/WeiyiGeek/blog/edit/master/source/_posts/系统运维/Linux/Shell编程/shell脚本编程之路1.md" target="_blank" rel="noopener noreferrer">_posts/系统运维/Linux/Shell编程/shell脚本编程之路1.md</a></span><br>
         <span class="copy-copyright">转载注明出处，原文地址：<a href="/2019/6-28-132.html" target="_blank" rel="external">https://blog.weiyigeek.top/2019/6-28-132.html</a></span><br>本站文章内容遵循 <a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a> 
    </div>
    <footer>
      <a href="https://blog.weiyigeek.top">
        <img src="/img/avatar.jpg" alt="WeiyiGeek">
        WeiyiGeek
      </a>
    </footer>
  </blockquote>


        
            <div class="page-reward">
  <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-rectangle waves-light">☕️ 请作者喝杯咖啡!</a>
</div>
            
        
        <div class="post-footer">
            
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Shell/" rel="tag">Shell</a></li></ul>

            <div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://blog.weiyigeek.top/2019/6-28-132.html&title=《shell脚本编程之路1》 — WeiyiGeek Blog&pic=https://blog.weiyigeek.top/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.weiyigeek.top/2019/6-28-132.html&title=《shell脚本编程之路1》 — WeiyiGeek Blog&source=[TOC]" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.weiyigeek.top/2019/6-28-132.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《shell脚本编程之路1》 — WeiyiGeek Blog&url=https://blog.weiyigeek.top/2019/6-28-132.html&via=https://blog.weiyigeek.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://blog.weiyigeek.top/2019/6-28-132.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>

        </div>
        
          <!-- 评论组件 -->


<div id="gitalk-container"></div>
<script type="text/javascript" src="/js/plugins/gitalk.min.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/custom/gitalk.init.js?v=1.6.6"></script>
        
    </div>
    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="prev">
      <a href="/2019/6-28-133.html" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">shell脚本编程之路2</h4>
      </a>
    </div>
  

  
    <div class="next">
      <a href="/2019/6-28-266.html" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">Ansible自动化运维学习笔记1</h4>
      </a>
    </div>
  
</nav>


    
    
        <aside class="post-widget">
            <nav class="post-toc-wrap" id="post-toc">
                <strong>目录</strong>
                <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#0x00-快速入门"><span class="post-toc-number">1.</span> <span class="post-toc-text">0x00 快速入门</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#0x01-Shell脚本初识"><span class="post-toc-number">2.</span> <span class="post-toc-text">0x01 Shell脚本初识</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#0x02-Shell编程之变量"><span class="post-toc-number">3.</span> <span class="post-toc-text">0x02 Shell编程之变量</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-变量类型分类"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">(1)变量类型分类</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-用户自定义变量"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">(3)用户自定义变量</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-环境变量"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">(4)环境变量</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-位置参数变量"><span class="post-toc-number">3.4.</span> <span class="post-toc-text">(5)位置参数变量</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-预定义变量"><span class="post-toc-number">3.5.</span> <span class="post-toc-text">(6)预定义变量</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-变量的间接引用"><span class="post-toc-number">3.6.</span> <span class="post-toc-text">(7)变量的间接引用</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#8-变量接收命令"><span class="post-toc-number">3.7.</span> <span class="post-toc-text">(8)变量接收命令</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#9-补充变量"><span class="post-toc-number">3.8.</span> <span class="post-toc-text">(9)补充变量</span></a></li></ol></li></ol>
            </nav>
            <div class="toc-bar"><div>
        </aside>
    
    <!-- 
  <div id="post-wechat" class="post-wechat" style="position:fixed;top: 360px;bottom: 500px;right: 3%;width: 190px;text-align: center; z-index: 9999">
    <p><b>关注【全栈工程师修炼指南】</b></p>
    <img src="/img/wechat-gzh.jpg" class="img-responsive" alt="weiyigeek">
    <p><b>欢迎添加【作者】微信</b></p>
    <img src="/img/wehat.jpg" class="img-responsive" alt="weiyigeek">
  </div>


 -->

    <!-- 支付宝微信文章赞赏 -->
    
      <div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        如果此篇文章对您有帮助，就请作者喝杯 Coffee ☕️☕️!
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardwechat" src="/img/reward-wechat.jpg" height="250" height="250" alt="微信打赏二维码">
            <img id="rewardalipay" src="/img/reward-alipay.png" height="250" height="250" alt="支付宝打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <!-- <input id="rewardToggle" type="checkbox" class="reward-toggle-check" data-wechat="/img/reward-wechat.jpg" data-alipay="/img/reward-alipay.png"> -->
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>

      
</article>
</div>

    </main>
    <footer class="footer ">
    
    <div class="top">
        
            <p>
    <span>Links：</span>
    
    <span class="blogroll-item">
        <a href="https://weiyigeek.top" target="_blank">https://weiyigeek.top</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.weiyigeek.top" target="_blank">https://blog.weiyigeek.top</a>
    </span>
    
    <span class="blogroll-item">
        <a href="/img/share-wechat.jpg" target="_blank">公众账号</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://space.bilibili.com/385802642/article" target="_blank">哔哩哔哩专栏</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://github.com/weiyigeek" target="_blank">博主Github</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://gitee.com/WeiyiGeek" target="_blank">博主Gitee</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.zhihu.com/people/weiyiSec" target="_blank">知乎</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.cnblogs.com/WeiyiGeek" target="_blank">博客园</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://my.oschina.net/weiyigeek" target="_blank">OSCHINA</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.toutiao.com/c/user/token/MS4wLjABAAAAqcPSoMqfctaEqJpGSF775eeCjWkrop4AOyLITdMx-L78F5iXzfQcSRM5sY4dq3wR" target="_blank">今日头条</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.csdn.net/u013072756?type=lately" target="_blank">CSDN</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.jianshu.com/u/5199a1104739" target="_blank">简书</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://cloud.tencent.com/developer/user/1389665/articles" target="_blank">腾讯云社区</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://cuttlefish.baidu.com/shop/75c5dbd8d15abe23482f4d40" target="_blank">百度文库</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://author.baidu.com/home?from=blog&app_id=1726736601523415" target="_blank">IT极客知识分享</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.51cto.com/weiyigeek" target="_blank">51CTO博客</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://juejin.cn/user/122767337595934" target="_blank">掘金</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://weibo.com/a/hot/7622022703618049_1.html" target="_blank">微博文章</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.xiaohongshu.com/user/profile/627c98bb000000001000e7ba" target="_blank">小红书</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://segmentfault.com/u/weiyigeek" target="_blank">Segmentfault</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.modb.pro/u/506690" target="_blank">墨天轮</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.douyin.com/user/MS4wLjABAAAAMSBdMja6XLsdmzafb0RNbFeBemIOk38K1PaOClZeI1Q" target="_blank">抖音主页</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.kuaishou.com/profile/3xfbrsrhd2i69x9" target="_blank">快手主页</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.ixigua.com/home/3984243135350727" target="_blank">西瓜视频</a>
    </span>
    
</p>

        
    </div>
    
    <div class="bottom">
      <p>
        <span>WeiyiGeek &copy; 2018 - 2023 <a href="https://weiyigeek.top" target="_blank" rel="noopener">weiyigeek.top</a> All rights reserved.唯一极客IT知识分享 版权所有 </span>
        
        <span>
          Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/weiyigeek" target="_blank">mellow</a>
        </span>
        
        <br/><a id="SiteRunTime"></a>
        <br/>访问统计
        <span><a href="/sitemap.xml" target="_blank" rel="Sitemaps-站点地图">Sitemaps</a> </span>
        <span><a href="/baidusitemap.xml" target="_blank" rel="baidusitemaps-百度站点地图">站点地图</a> </span>
        <!-- 
  -->
        <br/>ICP备案号<span><a href="https://beian.miit.gov.cn" target="_blank">渝ICP备2022003447号</a></span>
        <br/>
        <div>
        <div id="blog-wormhole-id" >
          <a href="https://www.foreverblog.cn/go.html" target="_blank"> 
            <img src="https://img.foreverblog.cn/wormhole_2_tp.gif" alt="十年之约虫洞" style="height:32px;max-height:50px;display:block;margin:0 auto;" title="穿梭虫洞-随机访问十年之约友链博客">
          </a>
        </div>
        <div id="cc-myssl-id" >
          <a href="https://myssl.com/blog.weiyigeek.top?from=mysslid" target="_blank">
            <img src="https://static.myssl.com/res/images/myssl-id1.png" alt="MySSL安全认证" style="max-height:50px;display:block;margin:0 auto">
          </a>
        </div>
      </p>
    </div>
</footer>



    <div class="mask" id="mask"></div>

<div id="go" class="waves-effect waves-light">
  <a href="javascript:;" id="goqrcode"> <span class="icon icon-lg icon-qrcode"></span> </a>
  <a href="javascript:;" id="gotop"> <span class="icon icon-lg icon-chevron-up"></span></a>
</div>





<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://blog.weiyigeek.top/2019/6-28-132.html&title=《shell脚本编程之路1》 — WeiyiGeek Blog&pic=https://blog.weiyigeek.top/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.weiyigeek.top/2019/6-28-132.html&title=《shell脚本编程之路1》 — WeiyiGeek Blog&source=[TOC]" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.weiyigeek.top/2019/6-28-132.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《shell脚本编程之路1》 — WeiyiGeek Blog&url=https://blog.weiyigeek.top/2019/6-28-132.html&via=https://blog.weiyigeek.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://blog.weiyigeek.top/2019/6-28-132.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACKklEQVR42u3ay3LCMAwFUP7/p9MtHYZwJYVOY5+sOoHGPlkIPfx4xNfxdD3fOf/09f7rM89XufjCwMC4LeM4vc4XyDHvtv7uOfneMDAw9mHkj07C8fkmqi8iCdYYGBgY59/Jw3SyUQwMDIw5o1qszpNLDAwMjLyITb6fN9qS1/GVWhwDA+OGjLzr/vd/f2W+gYGBcStGL3Qmo8dkqDDZya9nYmBgLM3IA9ykoZYXtL39YGBg7MBIwmi1WL2qAZffwcDAWJWRjxInCV81fay2/DAwMHZg9I5z5WF6MrCM1sXAwNiYkYTR/H7+OqovAgMDY21GEl7zdPCqEUI+QH3kvxIYGBgLMS5r0F80DCj8FwYGxqKMXqk5D6/VQcKH52BgYGzA6G0rD7XVBLQcgjEwMLZhJKGteoRi0mgrJKkYGBhbMvItJu2wXhAvJKwYGBhLM6rLJMlfdZzQW6uwPAYGxs0Z1QQuKUTz7yTHLKKfBAwMjKUZSeJV3XQvoZwPITAwMNZm9EaP89BcbfB92AMGBsYGjOZBh1ZhXC2Ao/4/BgbGBozqEYcjviYNuGReiYGBsTbjKF493mSQEAVfDAyMpRlXTQknxeokTbx42ImBgfGPGVcldvmdZEhZDdkYGBg7MOYtsHwAWaiw86NjGBgYGIPQWR1wNstjDAwMjHEdnFB7JAwMjH0YvYZar0mXp49fabdhYGDckDE5qZGkg3kqmSeUzUEmBgbG/Rg/cO+Jh2IXDjoAAAAASUVORK5CYII=" alt="微信分享二维码">
</div>


    
    <!-- main-js -->
<script type="text/javascript" src="/js/jquery/2.1.0-jquery.min.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/plugins/fastclick.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/plugins/ios-orientationchange-fix.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/jquery/3.5.2-jquery.fancybox.min.js?v=1.6.6"></script>
<!--  //cdn.bootcss.com/node-waves/0.7.4/waves.min.js -->
<script type="text/javascript" src="/js/node-waves/0.7.4-waves.min.js?v=1.6.6"></script> 

<script type="text/javascript" src="/js/method.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/blog.js?v=1.6.6"></script>

<!-- third-party -->
<script type="text/javascript" src="/js/plugins/local_search.js?v=1.6.6"></script>
<script type="text/javascript">
	var search_path = "search.xml";
	if (search_path.length === 0) { search_path = "search.xml";}
	var path = "/" + search_path;
	searchFunc(path, "local-search-input", "local-search-result");
</script> 

<script> (adsbygoogle = window.adsbygoogle || []).push({});</script>    


<!-- <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> --> 


  


<script>
  var _hmt = _hmt || [];
  (function() {
    // 百度统计
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?53923c4b5560739bc0ed61e183be6acf";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();
</script>
 


<!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
            processEscapes: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.staticfile.org/mathjax/2.7.9/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
 
<script>
    (function() {
        var OriginTitile = document.title, titleTime;
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                document.title = 'WeiyiGeek Blog-唯一极客-关注于网络安全_物联网安全开发_网络安全运维-学习心得分享';
                clearTimeout(titleTime);
            } else {
                document.title = '(つェ⊂)咦!又好了!';
                titleTime = setTimeout(function() {
                    document.title = OriginTitile;
                },2000);
            }
        });
    })();
</script>
 

     <script type="text/javascript" src="/js/custom/copytips.js?v=1.6.6"></script> 
<script type="text/javascript">
// 站点运行时间
var BootDate = new Date("2018/01/01 00:00:00");
function ShowRunTime(id) {
  var NowDate = new Date();
  var RunDateM = parseInt(NowDate - BootDate);
  var RunDays = Math.floor(RunDateM/(24*3600*1000));
  var RunHours = Math.floor(RunDateM%(24*3600*1000)/(3600*1000));
  var RunMinutes = Math.floor(RunDateM%(24*3600*1000)%(3600*1000)/(60*1000));
  var RunSeconds = Math.round(RunDateM%(24*3600*1000)%(3600*1000)%(60*1000)/1000);
  var RunTime = RunDays + " 天 " + RunHours + " 时 " + RunMinutes + " 分 " + RunSeconds + " 秒";
  document.getElementById(id).innerHTML = "网站已在风雨中勉勉强强运行了【 " + RunTime + " 】";
}
setInterval("ShowRunTime('SiteRunTime')", 1000);
</script>
    
  <div id="post-wechat" class="post-wechat" style="position:fixed;top: 360px;bottom: 500px;right: 3%;width: 190px;text-align: center; z-index: 9999">
    <p><b>关注【全栈工程师修炼指南】</b></p>
    <img src="/img/wechat-gzh.jpg" class="img-responsive" alt="weiyigeek">
    <p><b>欢迎添加【作者】微信</b></p>
    <img src="/img/wehat.jpg" class="img-responsive" alt="weiyigeek">
  </div>



</body>
</html>