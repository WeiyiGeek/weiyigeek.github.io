{"title":"文件查看分割命令","slug":"系统运维/Linux/常用命令/文件管理类命令/文件查看分割命令","date":"2019-06-05T10:35:30.000Z","updated":"2022-08-26T10:19:14.080Z","url":"2019/6-5-156.html","path":"api/articles/2019/6-5-156.html.json","covers":["https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190627230532.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190627223718.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190626102609.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190627221432.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190629093058.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190629135548.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190629140052.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190629141603.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190629094106.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190629095035.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190629084802.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190629084847.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190629090256.png"],"content":"<p>[TOC]</p>\n<a id=\"more\"></a>\n<h4 id=\"0x00-文件查看\"><a href=\"#0x00-文件查看\" class=\"headerlink\" title=\"0x00 文件查看\"></a>0x00 文件查看</h4><h5 id=\"cat-命令-从第一行完整显示文件内容\"><a href=\"#cat-命令-从第一行完整显示文件内容\" class=\"headerlink\" title=\"cat 命令 - 从第一行完整显示文件内容\"></a>cat 命令 - 从第一行完整显示文件内容</h5><p>描述：cat命令(Concatenate)连接文件并打印到标准输出设备上(显示、读取或拼接文件内容),他经常用来显示文件的内容,类似于下的type命令。<br>当文件较大的时候建议采用more或者less命令进行查看文件：</p>\n<ul>\n<li>Ctrl+S:停止滚屏</li>\n<li>Ctrl+Q:恢复滚屏</li>\n<li>Ctrl+C:(中断)可以终止该命令执行,并返回shell提示符</li>\n</ul>\n<p>语法参数：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-n&#x2F;--number:显示文本行号从1开始</span><br><span class=\"line\">-b&#x2F;--number-noblank:不对空白行编号</span><br><span class=\"line\">-s&#x2F;--squeeze-blank:当遇到连续两行以上的空白行就代替为1行的空白行</span><br><span class=\"line\">-A：显示不可打印字符，行尾显示“$”；</span><br><span class=\"line\">-E: 将行尾的断行字符$显示出来 </span><br><span class=\"line\">-T: 将[Tab]按键以^I显示出来</span><br><span class=\"line\">-v: 列出一些看不出来的特殊字符</span><br><span class=\"line\">-e：等价于&quot;-vE&quot;选项；</span><br><span class=\"line\">-t：等价于&quot;-vT&quot;选项；</span><br></pre></td></tr></table></figure></p>\n<p><strong>实际案例：</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 示例1.常见示例</span></span><br><span class=\"line\">cat -n time.sh</span><br><span class=\"line\">cat -b time.sh</span><br><span class=\"line\">cat m1 m2 （同时显示文件ml和m2的内容）</span><br><span class=\"line\">cat m1 m2 &gt; file （将文件ml和m2合并后放入文件file中）</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 示例2.特殊字符的显示</span></span><br><span class=\"line\">cat -A /etc/pam.conf</span><br><span class=\"line\"><span class=\"comment\"># ---------------------------------------------------------------------------#$</span></span><br><span class=\"line\"><span class=\"comment\"># /etc/pam.conf^I^I^I^I^I^I^I^I     #$</span></span><br><span class=\"line\"><span class=\"comment\"># ---------------------------------------------------------------------------#$</span></span><br><span class=\"line\"><span class=\"comment\">#$</span></span><br><span class=\"line\"><span class=\"comment\"># NOTE$</span></span><br><span class=\"line\"><span class=\"comment\"># ----$</span></span><br><span class=\"line\"><span class=\"comment\">#$</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 示例2.从命令行中获取字符串以及变量写入文件之中。</span></span><br><span class=\"line\">cat &lt;&lt; EOF &gt; es.env</span><br><span class=\"line\">ES_HOME=<span class=\"variable\">$&#123;ES_HOME&#125;</span></span><br><span class=\"line\">EOF</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 示例3.使用cat输出变量到文件时如果是\"EOF\"并不会将该变量进行赋值改变（小差别值得注意）。</span></span><br><span class=\"line\">demo=<span class=\"string\">\"WeiyiGeek\"</span></span><br><span class=\"line\">cat &gt; demo1.yaml &lt;&lt;<span class=\"string\">\"EOF\"</span></span><br><span class=\"line\">name=<span class=\"variable\">$&#123;demo&#125;</span></span><br><span class=\"line\">EOF</span><br><span class=\"line\"><span class=\"comment\"># 执行结果: name=$&#123;demo&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 可解析变量</span></span><br><span class=\"line\">cat &gt; demo2.yaml &lt;&lt;EOF</span><br><span class=\"line\">name=<span class=\"variable\">$&#123;demo&#125;</span></span><br><span class=\"line\">EOF</span><br><span class=\"line\"><span class=\"comment\"># 执行结果: name=WeiyiGeek</span></span><br></pre></td></tr></table></figure><br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190627230532.png\" alt=\"WeiyiGeek.cat案例\" title=\"\" class=\"\">\n                <p>WeiyiGeek.cat案例</p>\n            </figure></p>\n<p><br></p>\n<h5 id=\"tac-命令-从最后一行完整显示文件内容\"><a href=\"#tac-命令-从最后一行完整显示文件内容\" class=\"headerlink\" title=\"tac 命令 - 从最后一行完整显示文件内容\"></a>tac 命令 - 从最后一行完整显示文件内容</h5><p>描述: 该命令实际是cat的反向显示的命令;</p>\n<p>基础示例:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 1.cat 与 tac 对比显示;</span></span><br><span class=\"line\">❯ cat /etc/resolv.conf</span><br><span class=\"line\">nameserver 223.5.5.5</span><br><span class=\"line\">nameserver 223.6.6.6</span><br><span class=\"line\">nameserver fec0:0:0:ffff::1</span><br><span class=\"line\">❯ tac  /etc/resolv.conf</span><br><span class=\"line\">nameserver fec0:0:0:ffff::1</span><br><span class=\"line\">nameserver 223.6.6.6</span><br><span class=\"line\">nameserver 223.5.5.5</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<h5 id=\"nl-命令-显示的时候顺便输出行号\"><a href=\"#nl-命令-显示的时候顺便输出行号\" class=\"headerlink\" title=\"nl 命令 - 显示的时候顺便输出行号\"></a>nl 命令 - 显示的时候顺便输出行号</h5><p>描述: 该命令是添加行号打印;</p>\n<p>语法参数:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nl [-bnw] 文件</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 参数:</span></span><br><span class=\"line\">-b ：指定行号指定的方式主要两个中方式;</span><br><span class=\"line\">  a : 不论是否有空行页列出行号</span><br><span class=\"line\">  t : 对于空行不列出行号进行跳过</span><br><span class=\"line\">- n : 列出行号的表示方法主要有三种;</span><br><span class=\"line\">  ln : 行号在屏幕最左方显示</span><br><span class=\"line\">  rn : 行号在屏幕最右方显示，且不加0</span><br><span class=\"line\">  rz : 行号在屏幕最右方显示，且加0</span><br><span class=\"line\">- w : 行号字段占用的位数;</span><br></pre></td></tr></table></figure></p>\n<p>基础示例:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 示例1.用nl列出/etc/issue的内容包括空行</span></span><br><span class=\"line\">❯ nl -b a /etc/issue</span><br><span class=\"line\">  1  Ubuntu 20.04 LTS \\n \\l</span><br><span class=\"line\">  2  Windows WSL</span><br><span class=\"line\">  3</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 示例2.行号格式设置</span></span><br><span class=\"line\">❯ nl -b a -n rz /etc/issue       <span class=\"comment\"># 缺省</span></span><br><span class=\"line\">000001  Ubuntu 20.04 LTS \\n \\l</span><br><span class=\"line\">000002  Windows WSL</span><br><span class=\"line\">000003</span><br><span class=\"line\">❯ nl -b a -n rz -w 3 /etc/issue  <span class=\"comment\"># 指定行号宽度</span></span><br><span class=\"line\">001     Ubuntu 20.04 LTS \\n \\l</span><br><span class=\"line\">002     Windows WSL</span><br><span class=\"line\">003</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<h5 id=\"head-命令-显示从头开始的几行\"><a href=\"#head-命令-显示从头开始的几行\" class=\"headerlink\" title=\"head 命令 - 显示从头开始的几行\"></a>head 命令 - 显示从头开始的几行</h5><p>描述：用于显示文件的开头的内容,在默认情况下，head命令显示文件的头10行内容。<br>如果指定了多于一个文件在每一段输出前会给出文件名作为文件头，如果不指定文件，或者文件为”-“，则从标准输入读取数据。</p>\n<p>语法参数：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-数字 ：显示行数</span><br><span class=\"line\">-n &lt;数字&gt; ：指定文件头部要显示内容的行数;</span><br><span class=\"line\">-c &lt;字符数&gt; ：指定显示头部内容的字符数;</span><br><span class=\"line\">-v ：总是显示文件名的头信息;</span><br><span class=\"line\">-q : 不显示文件名信息;</span><br></pre></td></tr></table></figure></p>\n<p>操作示例：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#示例1.基础示例</span></span><br><span class=\"line\">head /etc/passwd    <span class=\"comment\">#显示开头前10行</span></span><br><span class=\"line\">head -1 /etc/passwd  <span class=\"comment\">#显示开头前 -k 行</span></span><br><span class=\"line\">head -2 run.js</span><br><span class=\"line\"><span class=\"comment\"># const &#123; exec &#125; = require('child_process')</span></span><br><span class=\"line\"><span class=\"comment\"># exec('hexo server -p 80 -d',(error, stdout, stderr) =&gt; &#123;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#示例2. #除最后k行外，显示剩余全部内容</span></span><br><span class=\"line\">head -n -k /etc/passwd </span><br><span class=\"line\">head -n -10 10.txt  <span class=\"comment\">#不打印后10行及开头到倒数10行被打印</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 示例3.1个字符占1个字节，注意回车换行各算一个字节</span></span><br><span class=\"line\">head -c 100 /etc/passwd       <span class=\"comment\">#显示前100字节的字符</span></span><br><span class=\"line\">head -c -100 /etc/passwd      <span class=\"comment\">#显示从0到倒数第100字节的字符</span></span><br></pre></td></tr></table></figure><br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190627223718.png\" alt=\"WeiyiGeek.heade示例\" title=\"\" class=\"\">\n                <p>WeiyiGeek.heade示例</p>\n            </figure></p>\n<h5 id=\"tail-命令-显示从结尾开始显示几行\"><a href=\"#tail-命令-显示从结尾开始显示几行\" class=\"headerlink\" title=\"tail 命令 - 显示从结尾开始显示几行\"></a>tail 命令 - 显示从结尾开始显示几行</h5><p>描述：用于输入文件中的尾部内容,命令也可以指定开始点将文件标准输出,默认在屏幕上显示指定文件的末尾10行。<br>如果给定的文件不止一个，则在显示的每个文件前面加一个文件名标题，如果没有指定文件或者文件名为“-”，则读取标准输入。</p>\n<p>语法参数：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tail(选项)(参数)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 参数</span></span><br><span class=\"line\">--retry：即是在tail命令启动时，文件不可访问或者文件稍后变得不可访问，都始终尝试打开文件。使用此选项时需要与选项“——follow=name”连用；</span><br><span class=\"line\">-c&lt;N&gt;或——bytes=&lt;N&gt;：输出文件尾部的N（N为整数）个字节内容；</span><br><span class=\"line\">-f&lt;name/descriptor&gt;或 ；--follow&lt;nameldescript&gt;：显示文件最新追加的内容。“name”表示以文件名的方式监视文件的变化。“-f”与“-fdescriptor”等效；(常用)</span><br><span class=\"line\">-F：与选项“-follow=name”和“--retry<span class=\"string\">\"连用时功能相同\"</span> </span><br><span class=\"line\">-n&lt;N&gt;或——line=&lt;N&gt;：输出文件的尾部N（N位数字）行内容。  (常用)</span><br><span class=\"line\">--pid=&lt;进程号&gt;：与“-f”选项连用，当指定的进程号的进程终止后，自动退出tail命令；</span><br><span class=\"line\">-q或——quiet或——silent：当有多个文件参数时，不输出各个文件名；</span><br><span class=\"line\">-s&lt;秒数&gt;或——sleep-interal=&lt;秒数&gt;：与“-f”选项连用，指定监视文件变化时间隔的秒数； (常用)</span><br><span class=\"line\">-v或——verbose：当有多个文件参数时，总是输出各个文件名；</span><br></pre></td></tr></table></figure></p>\n<p>实际案例：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 示例1.简单监控查看更新文件3行</span></span><br><span class=\"line\">tail -f -n 3 -s 3 /var/<span class=\"built_in\">log</span>/messages  <span class=\"comment\">#每3秒更新</span></span><br><span class=\"line\">Jun 26 08:01:01 master systemd: Removed slice User Slice of root.</span><br><span class=\"line\">Jun 26 09:01:01 master systemd: Created slice User Slice of root.</span><br><span class=\"line\">Jun 26 09:01:01 master systemd: Started Session 25 of user root.</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 示例2.简单使用</span></span><br><span class=\"line\">tail file       <span class=\"comment\"># 默认显示文件file的最后10行</span></span><br><span class=\"line\">tail +20 file   <span class=\"comment\"># 显示文件file的内容，从第20行至文件末尾</span></span><br><span class=\"line\">tail -c 10 file <span class=\"comment\"># 显示文件file的最后10个字符</span></span><br><span class=\"line\">tail -n 4 file  <span class=\"comment\"># 显示文件file的最后四行</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 示例3.head与tail联合使用取文件的11行到20行</span></span><br><span class=\"line\">head -n 20 demo.txt | tail -n 10</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 示例4.从第二行显示到末尾</span></span><br><span class=\"line\">cat /etc/passwd | tail -n+2</span><br></pre></td></tr></table></figure></p>\n<p><em>注意事项</em>：</p>\n<ul>\n<li>如果表示字节或行数的N值之前有一个”+”号，则从文件开头的第N项开始显示，而不是显示文件的最后N项。</li>\n<li>N值后面可以有后缀：b表示512，k表示1024，m表示1048576(1M)。</li>\n</ul>\n<p><br></p>\n<h5 id=\"watch-命令\"><a href=\"#watch-命令\" class=\"headerlink\" title=\"watch 命令\"></a>watch 命令</h5><p>描述：监测一个命令的运行结果，省的你一遍遍的手动运行，在Linux下，watch是周期性的执行下个程序，并全屏显示执行的结果;</p>\n<ul>\n<li>命令功能：可以将命令的输出结果输出到标准输出设备，多用于周期性执行命令/定时执行命令</li>\n<li>比如 tail 一个 log 文件，ls 监测某个文件的大小变化</li>\n</ul>\n<p>语法参数：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#命令格式：</span></span><br><span class=\"line\">　　　　watch[ 参数 ][命令]</span><br><span class=\"line\"><span class=\"comment\">#命令参数：</span></span><br><span class=\"line\">-n或--interval watch 缺省每2秒运行一下程序，多用于周期性执行命令/定时执行命令。</span><br><span class=\"line\">-d或-differences watch 会高亮显示变化的区域，而-d = cumulative 选项会把变动过的地方（不管最近的那次有没有变动）都会高亮显示出来。</span><br><span class=\"line\">-t或-no-title 会关闭watch 命令在顶部的时间间隔命令，</span><br></pre></td></tr></table></figure></p>\n<p>实际案例：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">watch -n 2 tail -20 /var/<span class=\"built_in\">log</span>/messages 每隔两秒钟跳一下最后20行的内容查看事实的信息</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#实例1：每隔一秒高亮显示网络链接数的变化情况 (重要)</span></span><br><span class=\"line\">命令　watch -n 1 -d netstat  -ant </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#实例2：每隔一秒高亮显示命令链接数的变化情况</span></span><br><span class=\"line\">命令　watch -n 1 -d <span class=\"string\">' pstree | grep http '</span>   <span class=\"comment\">#每隔一秒高亮显示http 链接数的变化情况，后面接的命令若带有管道符，需要加“将命令区域归整”。</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#实例3：实时查看模拟攻击客户机建立起来的链接数</span></span><br><span class=\"line\">命令　watch <span class=\"string\">'netstat -an | grep:21 | \\grep&lt;模拟攻击客户机的IP&gt; wc -1'</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#实例4：检测当前目录中 scf ' 的文件的变化</span></span><br><span class=\"line\">命令：watch -d <span class=\"string\">'ls -l | grep scf'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#实例5:10秒一次输出系统的平均负载</span></span><br><span class=\"line\">命令：watch -n  10 <span class=\"string\">' cat /proc/loadavg'</span></span><br></pre></td></tr></table></figure><br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190626102609.png\" alt=\"WeiyiGeek.watch示例\" title=\"\" class=\"\">\n                <p>WeiyiGeek.watch示例</p>\n            </figure></p>\n<p><br></p>\n<h5 id=\"wc-命令\"><a href=\"#wc-命令\" class=\"headerlink\" title=\"wc 命令\"></a>wc 命令</h5><p>描述：用于统计文本中行数的单词数以及字节数;<br>参数：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wc【选项】【文件名】   <span class=\"comment\">#字符/行数/字节所统计</span></span><br><span class=\"line\"><span class=\"comment\">#选项：</span></span><br><span class=\"line\">-l 统计行数</span><br><span class=\"line\">-w 统计单词数</span><br><span class=\"line\">-c 统计字节数</span><br><span class=\"line\">-m 统计字符数(对于中文)</span><br><span class=\"line\">-L 统计字符串长度</span><br></pre></td></tr></table></figure></p>\n<p>实际操作：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#示例1.显示文件的内容信息</span></span><br><span class=\"line\"><span class=\"variable\">$wc</span> run.js</span><br><span class=\"line\">9  26 251 run.js   <span class=\"comment\">#'行数' '单词数' '字节数' install.log</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#其他示例</span></span><br><span class=\"line\">wc -c test.txt  <span class=\"comment\">#显示字节数中午也显示1个字节</span></span><br><span class=\"line\">wc -m test.txt  <span class=\"comment\">#主要针对于中午字符(两个字节)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#示例3.验证文件字符长度</span></span><br><span class=\"line\">$ <span class=\"built_in\">echo</span> 1234567890 &gt; www.txt</span><br><span class=\"line\">$ <span class=\"built_in\">echo</span> 1234567890 | wc -L <span class=\"comment\"># 长度为10  （重点）</span></span><br><span class=\"line\">$ cat www.txt | wc -L     <span class=\"comment\">#长度为10</span></span><br></pre></td></tr></table></figure><br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190627221432.png\" alt=\"WeiyiGeek.wc示例\" title=\"\" class=\"\">\n                <p>WeiyiGeek.wc示例</p>\n            </figure></p>\n<p><br></p>\n<h5 id=\"stat-命令\"><a href=\"#stat-命令\" class=\"headerlink\" title=\"stat 命令\"></a>stat 命令</h5><p>描述:显示文件或文件系统的状态,显示出文件的大小以及块大写所属权限用户组和创修访问时间。</p>\n<p><strong>语法和参数:</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">stat</span> [选项]... 文件</span><br><span class=\"line\"><span class=\"comment\"># 必选参数对长短选项同时适用。</span></span><br><span class=\"line\">-L, --dereference     跟随链接</span><br><span class=\"line\">-f, --file-system     显示文件系统状态而非文件状态</span><br><span class=\"line\">-c  --format=FORMAT   use the specified FORMAT instead of the default;output a newline after each use of FORMAT</span><br><span class=\"line\">--<span class=\"built_in\">printf</span>=FORMAT       Like --format, but interpret backslash escapes,and <span class=\"keyword\">do</span> not output a mandatory trailing newline; <span class=\"keyword\">if</span> you want a newline, include \\n <span class=\"keyword\">in</span> FORMAT</span><br><span class=\"line\">-t, --terse           以简洁方式输出信息；</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 格式化字符串</span></span><br><span class=\"line\">The valid format sequences <span class=\"keyword\">for</span> files (without --file-system):</span><br><span class=\"line\">  %a   access rights <span class=\"keyword\">in</span> octal</span><br><span class=\"line\">  %A   access rights <span class=\"keyword\">in</span> human readable form</span><br><span class=\"line\">  %b   number of blocks allocated (see %B)</span><br><span class=\"line\">  %B   the size <span class=\"keyword\">in</span> bytes of each block reported by %b</span><br><span class=\"line\">  %C   SELinux security context string</span><br><span class=\"line\">  %d   device number <span class=\"keyword\">in</span> decimal</span><br><span class=\"line\">  %D   device number <span class=\"keyword\">in</span> hex</span><br><span class=\"line\">  %f   raw mode <span class=\"keyword\">in</span> hex</span><br><span class=\"line\">  %F   file <span class=\"built_in\">type</span></span><br><span class=\"line\">  %g   group ID of owner</span><br><span class=\"line\">  %G   group name of owner</span><br><span class=\"line\">  %h   number of hard links</span><br><span class=\"line\">  %i   inode number</span><br><span class=\"line\">  %m   mount point</span><br><span class=\"line\">  %n   file name</span><br><span class=\"line\">  %N   quoted file name with dereference <span class=\"keyword\">if</span> symbolic link</span><br><span class=\"line\">  %o   optimal I/O transfer size hint</span><br><span class=\"line\">  %s   total size, <span class=\"keyword\">in</span> bytes</span><br><span class=\"line\">  %t   major device <span class=\"built_in\">type</span> <span class=\"keyword\">in</span> hex, <span class=\"keyword\">for</span> character/block device special files</span><br><span class=\"line\">  %T   minor device <span class=\"built_in\">type</span> <span class=\"keyword\">in</span> hex, <span class=\"keyword\">for</span> character/block device special files</span><br><span class=\"line\">  %u   user ID of owner</span><br><span class=\"line\">  %U   user name of owner</span><br><span class=\"line\">  %w   time of file birth, human-readable; - <span class=\"keyword\">if</span> unknown</span><br><span class=\"line\">  %W   time of file birth, seconds since Epoch; 0 <span class=\"keyword\">if</span> unknown</span><br><span class=\"line\">  %x   time of last access, human-readable</span><br><span class=\"line\">  %X   time of last access, seconds since Epoch</span><br><span class=\"line\">  %y   time of last modification, human-readable</span><br><span class=\"line\">  %Y   time of last modification, seconds since Epoch</span><br><span class=\"line\">  %z   time of last change, human-readable</span><br><span class=\"line\">  %Z   time of last change, seconds since Epoch</span><br><span class=\"line\"></span><br><span class=\"line\">Valid format sequences <span class=\"keyword\">for</span> file systems:</span><br><span class=\"line\">  %a   free blocks available to non-superuser</span><br><span class=\"line\">  %b   total data blocks <span class=\"keyword\">in</span> file system</span><br><span class=\"line\">  %c   total file nodes <span class=\"keyword\">in</span> file system</span><br><span class=\"line\">  %d   free file nodes <span class=\"keyword\">in</span> file system</span><br><span class=\"line\">  %f   free blocks <span class=\"keyword\">in</span> file system</span><br><span class=\"line\">  %i   file system ID <span class=\"keyword\">in</span> hex</span><br><span class=\"line\">  %l   maximum length of filenames</span><br><span class=\"line\">  %n   file name</span><br><span class=\"line\">  %s   block size (<span class=\"keyword\">for</span> faster transfers)</span><br><span class=\"line\">  %S   fundamental block size (<span class=\"keyword\">for</span> block counts)</span><br><span class=\"line\">  %t   file system <span class=\"built_in\">type</span> <span class=\"keyword\">in</span> hex</span><br><span class=\"line\">  %T   file system <span class=\"built_in\">type</span> <span class=\"keyword\">in</span> human readable form</span><br><span class=\"line\"></span><br><span class=\"line\">--terse 等同于以下格式: %n %s %b %f %u %g %D %i %h %t %T %X %Y %Z %W %o %C</span><br><span class=\"line\">--terse --file-system 等同于以下格式: %n %i %l %t %s %S %b %f %a %c %d</span><br></pre></td></tr></table></figure></p>\n<p><strong>实际案例:</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#实例1.常规形式打印文件的详细信息</span></span><br><span class=\"line\"><span class=\"built_in\">stat</span> weiyigeek.txt</span><br><span class=\"line\">文件：weiyigeek.txt</span><br><span class=\"line\"><span class=\"comment\">#   大小：15              块：8          IO 块：4096   普通文件</span></span><br><span class=\"line\"><span class=\"comment\"># 设备：fe00h/65024d      Inode：2105407     硬链接：1</span></span><br><span class=\"line\"><span class=\"comment\"># 权限：(0644/-rw-r--r--)  Uid：(    0/    root)   Gid：(    0/    root)</span></span><br><span class=\"line\"><span class=\"comment\"># 最近访问：2026-07-22 01:29:48.574588495 +0800 Access Time</span></span><br><span class=\"line\"><span class=\"comment\"># 最近更改：2026-07-22 01:29:45.246588379 +0800 Modifiy Time</span></span><br><span class=\"line\"><span class=\"comment\"># 最近改动：2026-07-22 01:29:45.246588379 +0800 Change Time</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#示例2.显示文件系统的详细信息</span></span><br><span class=\"line\"><span class=\"built_in\">stat</span> -f /etc/passwd</span><br><span class=\"line\"><span class=\"comment\">#   文件：\"/etc/passwd\"</span></span><br><span class=\"line\"><span class=\"comment\">#     ID：fd0000000000 文件名长度：255     类型：xfs</span></span><br><span class=\"line\"><span class=\"comment\"># 块大小：4096       基本块大小：4096</span></span><br><span class=\"line\"><span class=\"comment\">#     块：总计：11821425   空闲：10717632   可用：10717632</span></span><br><span class=\"line\"><span class=\"comment\"># Inodes: 总计：23654400   空闲：23573486</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#实例3.用简洁的形式打印信息</span></span><br><span class=\"line\"><span class=\"built_in\">stat</span> -t weiyigeek.txt</span><br><span class=\"line\"><span class=\"comment\"># weiyigeek.txt 15 8 81a4 0 0 fe00 2105407 1 0 0 1784654988 1784654985 1784654985 0 4096</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#示例4.-c选项的妙用</span></span><br><span class=\"line\"><span class=\"built_in\">stat</span> -c <span class=\"string\">\"%a %A %u %U %g %G\"</span> /etc/passwd <span class=\"comment\">#文件权限完整显示文件的权限以八进制</span></span><br><span class=\"line\"><span class=\"comment\"># 644 -rw-r--r-- 0 root 0 root</span></span><br><span class=\"line\"><span class=\"built_in\">stat</span> -c <span class=\"string\">\"%i %f %F %h\"</span> /etc/passwd      <span class=\"comment\">#文件信息完整显示</span></span><br><span class=\"line\"><span class=\"comment\"># 33582780 81a4 普通文件 1</span></span><br><span class=\"line\"><span class=\"built_in\">stat</span> -c <span class=\"string\">\"%s %b %B\"</span> /etc/passwd  <span class=\"comment\">#文件大小以byte以及块大小和个块的字节大小</span></span><br><span class=\"line\"><span class=\"comment\"># 1034 8 512</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#示例5.-L，跟踪显示链接文件信息</span></span><br><span class=\"line\">ls -alh phantomjs</span><br><span class=\"line\"><span class=\"comment\"># lrwxrwxrwx. 1 root root 38 5月  29 11:41 phantomjs -&gt; /usr/local/src/phantomjs/bin/phantomjs</span></span><br><span class=\"line\"><span class=\"built_in\">stat</span> -L phantomjs</span><br><span class=\"line\"><span class=\"comment\">#   文件：\"phantomjs\"</span></span><br><span class=\"line\"><span class=\"comment\">#   大小：67932064        块：132680     IO 块：4096   普通文件</span></span><br><span class=\"line\"><span class=\"comment\"># 设备：fd00h/64768d      Inode：34604541    硬链接：1</span></span><br><span class=\"line\"><span class=\"comment\"># 权限：(0755/-rwxr-xr-x)  Uid：(    0/    root)   Gid：(    0/    root)</span></span><br><span class=\"line\"><span class=\"comment\"># 环境：unconfined_u:object_r:admin_home_t:s0</span></span><br><span class=\"line\"><span class=\"comment\"># 最近访问：2020-07-01 08:30:01.326875354 +0800</span></span><br><span class=\"line\"><span class=\"comment\"># 最近更改：2016-01-25 09:01:06.000000000 +0800</span></span><br><span class=\"line\"><span class=\"comment\"># 最近改动：2020-05-29 11:41:42.369696124 +0800</span></span><br><span class=\"line\"><span class=\"comment\"># 创建时间：-</span></span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<h5 id=\"jq-命令\"><a href=\"#jq-命令\" class=\"headerlink\" title=\"jq 命令\"></a>jq 命令</h5><p>描述:jq它能轻松地把你拥有的数据转换成你期望的格式，而且需要写的程序通常也比你期望的更加简短。<code>它可以对json数据进行分片、过滤、映射和转换</code>，和sed、awk、grep等命令一样，都可以让你轻松地把玩文本。</p>\n<p>基础语法:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Usage: jq [options] &lt;jq filter&gt; [file...]</span><br><span class=\"line\">-c 单行输出json字符串;</span><br><span class=\"line\">-n 使用“null”作为单个输入值;</span><br><span class=\"line\">-e 设置输出时候的退出状态码；</span><br><span class=\"line\">-s               <span class=\"built_in\">read</span> (slurp) all inputs into an array; apply filter to it;</span><br><span class=\"line\">-r               output raw strings, not JSON texts; 输出原始字符串，而不是JSON文本;</span><br><span class=\"line\">-R               <span class=\"built_in\">read</span> raw strings, not JSON texts;</span><br><span class=\"line\">-C               colorize JSON;</span><br><span class=\"line\">-M               monochrome (dont colorize JSON);</span><br><span class=\"line\">-S               sort keys of objects on output;</span><br><span class=\"line\">--tab            use tabs <span class=\"keyword\">for</span> indentation;</span><br><span class=\"line\">--arg a v        <span class=\"built_in\">set</span> variable <span class=\"variable\">$a</span> to value &lt;v&gt;;</span><br><span class=\"line\">--argjson a v    <span class=\"built_in\">set</span> variable <span class=\"variable\">$a</span> to JSON value &lt;v&gt;;</span><br><span class=\"line\">--slurpfile a f  <span class=\"built_in\">set</span> variable <span class=\"variable\">$a</span> to an array of JSON texts <span class=\"built_in\">read</span> from &lt;f&gt;;</span><br><span class=\"line\">--rawfile a f    <span class=\"built_in\">set</span> variable <span class=\"variable\">$a</span> to a string consisting of the contents of &lt;f&gt;;</span><br><span class=\"line\">--args           remaining arguments are string arguments, not files;</span><br><span class=\"line\">--jsonargs       remaining arguments are JSON arguments, not files;</span><br></pre></td></tr></table></figure></p>\n<p><em>注意事项:</em></p>\n<ul>\n<li>jq命令不是系统自带的在linux系统中也可以直接用yum安装<ul>\n<li>下载页面: <a href=\"https://stedolan.github.io/jq/download/\" target=\"_blank\" rel=\"noopener\">https://stedolan.github.io/jq/download/</a></li>\n<li>帮助文档: <a href=\"https://stedolan.github.io/jq/tutorial/\" target=\"_blank\" rel=\"noopener\">https://stedolan.github.io/jq/tutorial/</a></li>\n</ul>\n</li>\n<li>jq命令是用C编写没有运行时依赖，所以几乎可以运行在任何系统上。预编译的二进制文件可以直接在Linux、OS X和windows系统上运行，当然在linux和OS X系统你需要赋与其可执行权限；</li>\n</ul>\n<p>基础示例:例子文件在文件json.txt中保存如下内容<br><figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[&#123;<span class=\"attr\">\"name\"</span>:<span class=\"string\">\"WeiyiGeek\"</span>,<span class=\"attr\">\"url\"</span>:<span class=\"string\">\"http://tool.chinaz.com\"</span>,<span class=\"attr\">\"address\"</span>:&#123;<span class=\"attr\">\"city\"</span>:<span class=\"string\">\"xiameng\"</span>,<span class=\"attr\">\"country\"</span>:<span class=\"string\">\"China\"</span>&#125;,<span class=\"attr\">\"arrayBrowser\"</span>:[&#123;<span class=\"attr\">\"name\"</span>:<span class=\"string\">\"Google\"</span>,<span class=\"attr\">\"url\"</span>:<span class=\"string\">\"http://www.google.com\"</span>&#125;,&#123;<span class=\"attr\">\"name\"</span>:<span class=\"string\">\"Baidu\"</span>,<span class=\"attr\">\"url\"</span>:<span class=\"string\">\"http://www.baidu.com\"</span>&#125;]&#125;,&#123;<span class=\"attr\">\"name\"</span>:<span class=\"string\">\"WeiyiGeek\"</span>,<span class=\"attr\">\"url\"</span>:<span class=\"string\">\"http://tool.zzhome.com\"</span>,<span class=\"attr\">\"address\"</span>:&#123;<span class=\"attr\">\"city\"</span>:<span class=\"string\">\"dalian\"</span>,<span class=\"attr\">\"country\"</span>:<span class=\"string\">\"China\"</span>&#125;,<span class=\"attr\">\"arrayBrowser\"</span>:[&#123;<span class=\"attr\">\"name\"</span>:<span class=\"string\">\"360\"</span>,<span class=\"attr\">\"url\"</span>:<span class=\"string\">\"http://www.so.com\"</span>&#125;,&#123;<span class=\"attr\">\"name\"</span>:<span class=\"string\">\"bing\"</span>,<span class=\"attr\">\"url\"</span>:<span class=\"string\">\"http://www.bing.com\"</span>&#125;]&#125;]</span><br></pre></td></tr></table></figure><br><br></p>\n<ol>\n<li><p>最简单的jq程序是表达式”.” 个人理解为根，它不改变输入，但可以将其优美地输出便于阅读和理解</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'&#123;\"foo\": 0,\"bar\":1&#125;'</span> | ./jq .</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">\"foo\"</span>: 0,</span><br><span class=\"line\">  <span class=\"string\">\"bar\"</span>: 1</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">cat &gt; json.txt &lt;&lt;<span class=\"string\">'EOF'</span></span><br><span class=\"line\">[&#123;</span><br><span class=\"line\">  <span class=\"string\">\"name\"</span>: <span class=\"string\">\"WeiyiGeek\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"url\"</span>: <span class=\"string\">\"http://tool.chinaz.com\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"address\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">\"city\"</span>: <span class=\"string\">\"厦门\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"country\"</span>: <span class=\"string\">\"China\"</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">\"name\"</span>: <span class=\"string\">\"Weiyi\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"url\"</span>: <span class=\"string\">\"http://tool.chinaz.com\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"address\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">\"city\"</span>: <span class=\"string\">\"长沙\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"country\"</span>: <span class=\"string\">\"China\"</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;]</span><br><span class=\"line\">EOF</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>输出列表中的第一个元素，可以使用[index]，也可以输出指定字符：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat json.txt | jq <span class=\"string\">'.'</span> <span class=\"comment\">#方式1.可以采用管道符传递数据</span></span><br><span class=\"line\">jq <span class=\"string\">'.'</span> json.txt       <span class=\"comment\">#方式2.美化输出</span></span><br><span class=\"line\">jq -r <span class=\"string\">'.'</span> json.txt  </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#如果json是数组的话，可以采用此种方法;</span></span><br><span class=\"line\">jq -r <span class=\"string\">'.[0]'</span> json.txt </span><br><span class=\"line\">jq <span class=\"string\">'.[0]'</span> json.txt</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">\"name\"</span>: <span class=\"string\">\"WeiyiGeek\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"url\"</span>: <span class=\"string\">\"http://tool.chinaz.com\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"address\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">\"city\"</span>: <span class=\"string\">\"厦门\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"country\"</span>: <span class=\"string\">\"China\"</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#遍历访问每个元素的属性</span></span><br><span class=\"line\">jq -r <span class=\"string\">\".[].name\"</span> json.txt</span><br><span class=\"line\">WeiyiGeek</span><br><span class=\"line\">Weiyi</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>jq支持管道线|，它如同linux命令中的管道线——把前面命令的输出当作是后面命令的输入</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat json.txt | jq <span class=\"string\">'.[0] | &#123;name:.name,city:.address.city&#125;'</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">\"name\"</span>: <span class=\"string\">\"WeiyiGeek\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"city\"</span>: <span class=\"string\">\"厦门\"</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#值得注意的地方 [] 索引值</span></span><br><span class=\"line\">cat json.txt | jq <span class=\"string\">'.[0] | &#123;name:.arrayBrowser[1].name,city:.address.city&#125;'</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">\"name\"</span>: <span class=\"string\">\"Baidu\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"city\"</span>: <span class=\"string\">\"厦门\"</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#遍历数组，注意下面的[]没有加上索引默认是全部满足条件的</span></span><br><span class=\"line\">cat json.txt | jq <span class=\"string\">\".[] | &#123;name:.arrayBrowser[1].name,city:.address.city&#125;\"</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">\"name\"</span>: <span class=\"string\">\"Baidu\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"city\"</span>: <span class=\"string\">\"厦门\"</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">\"name\"</span>: <span class=\"string\">\"bing\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"city\"</span>: <span class=\"string\">\"大连\"</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>如果希望把jq的输出当作一个数组，可以在前后加上[]：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat json.txt | jq <span class=\"string\">\"[.[] | &#123;name:.arrayBrowser[1].name,city:.address.city&#125;]\"</span></span><br><span class=\"line\">[</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"string\">\"name\"</span>: <span class=\"string\">\"Baidu\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"city\"</span>: <span class=\"string\">\"厦门\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"string\">\"name\"</span>: <span class=\"string\">\"bing\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"city\"</span>: <span class=\"string\">\"大连\"</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p><br></p>\n<ol start=\"5\">\n<li><p>自定义key在{}中冒号前面的名字是映射的名称，你可以任意修改</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat json.txt | jq <span class=\"string\">\"[.[] | &#123;name_001:.arrayBrowser[1].name,city_002:.address.city&#125;]\"</span></span><br><span class=\"line\">[</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"string\">\"name_001\"</span>: <span class=\"string\">\"Baidu\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"city_002\"</span>: <span class=\"string\">\"厦门\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"string\">\"name_001\"</span>: <span class=\"string\">\"bing\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"city_002\"</span>: <span class=\"string\">\"大连\"</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 补充</span></span><br><span class=\"line\">curl -s -u <span class=\"string\">'weiyigeek:123456'</span> -H <span class=\"string\">'Accept: application/vnd.docker.distribution.manifest.v2+json'</span> -X GET https://localhost/v2/library/alpine/manifests/3.12 | jq <span class=\"string\">'.layers[0]'</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">\"mediaType\"</span>: <span class=\"string\">\"application/vnd.docker.image.rootfs.diff.tar.gzip\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"size\"</span>: 2797541,</span><br><span class=\"line\">  <span class=\"string\">\"digest\"</span>: <span class=\"string\">\"sha256:df20fa9351a15782c64e6dddb2d4a6f50bf6d3688060a34c4014b0d9a752eb4c\"</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>内建函数jq还有一些内建函数如 key，has(用来是判断是否存在某个key)</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#比如key是用来获取JSON中的key元素的：</span></span><br><span class=\"line\">$ jq <span class=\"string\">'keys'</span> json.txt</span><br><span class=\"line\">[</span><br><span class=\"line\">  0,</span><br><span class=\"line\">  1</span><br><span class=\"line\">]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#比如has是用来是判断是否存在某个key，注意这里由于和shell中的&#123;&#125;冲突所以用()</span></span><br><span class=\"line\">[root@192 ~]<span class=\"comment\"># jq 'has(2)' json.txt</span></span><br><span class=\"line\"><span class=\"literal\">false</span></span><br><span class=\"line\">[root@192 ~]<span class=\"comment\"># jq 'has(1)' json.txt</span></span><br><span class=\"line\"><span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>提取指定的多个json字段(重点)，遍历数组采用[]</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ jq -r <span class=\"string\">'.[1].name+\",\"+(.[1].url|tostring)'</span> json.txt</span><br><span class=\"line\">Weiyi,http://tool.chinaz.com</span><br><span class=\"line\"></span><br><span class=\"line\">$ jq -r <span class=\"string\">'.[].name+\",\"+(.[1].url|tostring)+\",\"+.[].address.city'</span> json.txt</span><br><span class=\"line\">WeiyiGeek,http://tool.chinaz.com,厦门</span><br><span class=\"line\">Weiyi,http://tool.chinaz.com,厦门</span><br><span class=\"line\">WeiyiGeek,http://tool.chinaz.com,长沙</span><br><span class=\"line\">Weiyi,http://tool.chinaz.com,长沙</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>调用数组的join方法，来将数组转换成拼接字符串，</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">jq -r <span class=\"string\">\"[.[].name]\"</span> json.txt</span><br><span class=\"line\">[</span><br><span class=\"line\">  <span class=\"string\">\"WeiyiGeek\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"Weiyi\"</span></span><br><span class=\"line\">]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#字符串拼接</span></span><br><span class=\"line\">jq -r <span class=\"string\">'[.[].name]|join(\",\")'</span> json.txt</span><br><span class=\"line\">WeiyiGeek,Weiyi</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>指定格式输出</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">jq -r <span class=\"string\">'[.[].name,.[].url]|@text'</span> json.txt</span><br><span class=\"line\">[<span class=\"string\">\"WeiyiGeek\"</span>,<span class=\"string\">\"Weiyi\"</span>,<span class=\"string\">\"http://tool.chinaz.com\"</span>,<span class=\"string\">\"http://tool.chinaz.com\"</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">jq -r <span class=\"string\">'[.[].name,.[].url]|@text'</span> json.txt</span><br><span class=\"line\">[<span class=\"string\">\"WeiyiGeek\"</span>,<span class=\"string\">\"Weiyi\"</span>,<span class=\"string\">\"http://tool.chinaz.com\"</span>,<span class=\"string\">\"http://tool.chinaz.com\"</span>]</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p><strong>补充说明:</strong></p>\n<ul>\n<li>属性名前的点号(.productId)点号表示根节点</li>\n<li>字符串拼接采用+将两个字段以及逗号进行拼接;</li>\n<li>数值不能直接和字符串进行拼接需要调用tostring的方法进行换行语法为(.click|tostring)</li>\n<li>数组访问可以采用<code>[]</code>形式，<code>[]</code>表示遍历整个数组,如果你只想访问数组中的第2个元素(下标从0开始)，你可以使用[1]；如果想要访问第3个到第5个元素，可以使用[2:4]；</li>\n</ul>\n<p><strong>附录</strong><br>官方文档：<a href=\"https://stedolan.github.io/jq/manual\" target=\"_blank\" rel=\"noopener\">https://stedolan.github.io/jq/manual</a><br>表达式在线测试器：<a href=\"https://jqplay.org/\" target=\"_blank\" rel=\"noopener\">https://jqplay.org/</a><br>教程：<a href=\"https://github.com/stedolan/jq/wiki/Cookbook\" target=\"_blank\" rel=\"noopener\">https://github.com/stedolan/jq/wiki/Cookbook</a></p>\n<p><br></p>\n<h5 id=\"lslocks-命令\"><a href=\"#lslocks-命令\" class=\"headerlink\" title=\"lslocks 命令\"></a>lslocks 命令</h5><p>描述:lslocks列出有关的所有信息在Linux系统中已保存的文件锁;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 示例1.列出当前系统中被加锁的文件</span></span><br><span class=\"line\"><span class=\"variable\">$lslocks</span></span><br><span class=\"line\"><span class=\"comment\"># COMMAND           PID  TYPE SIZE MODE  M START END PATH</span></span><br><span class=\"line\"><span class=\"comment\"># master           1203 FLOCK  33B WRITE 0     0   0 /var/spool/postfix/pid/master.pid</span></span><br><span class=\"line\"><span class=\"comment\"># master           1203 FLOCK  33B WRITE 0     0   0 /var/lib/postfix/master.lock</span></span><br><span class=\"line\"><span class=\"comment\"># ctcm_agentd      1075 POSIX   4B WRITE 0     0   0 /run/ctcm_agentd.pid</span></span><br><span class=\"line\"><span class=\"comment\"># ctcm_agentd      2173 POSIX   4B WRITE 0     0   0 /run/ctcm_agent#ce1b2bd8-01d8-47c3-8.pid</span></span><br><span class=\"line\"><span class=\"comment\"># crond            1208 FLOCK   5B WRITE 0     0   0 /run/crond.pid</span></span><br></pre></td></tr></table></figure>\n<hr>\n\n<h4 id=\"0x01-文件比较与分割\"><a href=\"#0x01-文件比较与分割\" class=\"headerlink\" title=\"0x01 文件比较与分割\"></a>0x01 文件比较与分割</h4><h5 id=\"diff-命令\"><a href=\"#diff-命令\" class=\"headerlink\" title=\"diff  命令\"></a>diff  命令</h5><p>描述：比较给定的两个文件不同之处,并以所在行的形式进行显示;默认是以逐行的方式进行比较文本文件的异同处,比较两个文件的内容 （源文件 和 目标文件）,如果使用“-”代替“文件”参数,则要比较的内容将来自标准输入。</p>\n<p><strong>基础语法</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">diff [选项] … [文件1或目录1] [文件2或目录2]（四种组合方式）</span><br></pre></td></tr></table></figure></p>\n<p><strong>命令参数</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-a,--text 把所有文件当做文本文件逐行比较</span><br><span class=\"line\">-b,--ignore-space-change 忽略空格产生的变化</span><br><span class=\"line\">-B,--ignore-blank-lines 忽略空白行的变化</span><br><span class=\"line\">-c,–C NUM，--context[=NUM] 使用上下文输出格式（文件1在上，文件2在下，在差异点会标注出来），输出NUM（默认3）行的上下文（上下各NUM行，不包括差异行）</span><br><span class=\"line\">-d,--minimal 使用不同的算法，努力寻找一个较小的变化集合。这会使diff变慢（有时更慢）</span><br><span class=\"line\">-D NAME,--ifdef=NAME 合并<span class=\"keyword\">if</span>-then-else格式输出，预处理宏（由NAME参数提供）条件</span><br><span class=\"line\">-e,--ed 输出一个ed格式的脚本文件</span><br><span class=\"line\">-E,--ignore-all-space 忽略由于Tab扩展而导致的变化</span><br><span class=\"line\">-F RE,--show-function-line=RE 在上下文输出格式（文件1在上，文件2在下）和统一输出格式中，对于每一大块的不同，显示出匹配RE（regexp正则表达式）最近的行</span><br><span class=\"line\">-i,--ignore-case 忽略大小写的区别</span><br><span class=\"line\">-I RE,--ignore-matching-lines=RE 忽略所有匹配RE（regexp正则表达式）的行的更改</span><br><span class=\"line\">-l,--paginate 通过pr编码传递输出，使其分页</span><br><span class=\"line\">-n,--rcs 输出RCS格式差异</span><br><span class=\"line\"></span><br><span class=\"line\">-N,--new-file 把缺少的文件当做空白文件处理</span><br><span class=\"line\"></span><br><span class=\"line\">-p,--show-c-function 显示带有C函数的变化</span><br><span class=\"line\"></span><br><span class=\"line\">-q,--brief 仅输出文件是否有差异，不报告详细差异</span><br><span class=\"line\"></span><br><span class=\"line\">-r,--recursive 当比较目录时，递归比较所有找到的子目录</span><br><span class=\"line\"></span><br><span class=\"line\">-s,--report-identical-files 当两个文件相同时报告</span><br><span class=\"line\"></span><br><span class=\"line\">-S FILE,--starting-file=FILE 在比较目录时，从FILE开始。用于继续中断的比较</span><br><span class=\"line\"></span><br><span class=\"line\">-t,--expand-tabs 将输出时扩展Tab转换为空格，保护输入文件的tab对齐方式</span><br><span class=\"line\"></span><br><span class=\"line\">-T,--initial-tab 通过预先设置的tab使选项卡对齐（？？？）</span><br><span class=\"line\"></span><br><span class=\"line\">-u,-U NUM,--unified[=NUM] 使用统一输出格式（输出一个整体，只有在差异的地方会输出差异点，并标注出来），输出NUM（默认3）行的上下文（上下各NUM行，不包括差异行）</span><br><span class=\"line\"></span><br><span class=\"line\">-v,--version 输出版本号</span><br><span class=\"line\"></span><br><span class=\"line\">-w,--ignore-all-space 比较时忽略所有空格</span><br><span class=\"line\"></span><br><span class=\"line\">-W NUM,--width=NUM 在并列输出格式时，指定列的宽度为NUM（默认130）</span><br><span class=\"line\"></span><br><span class=\"line\">-x PAT,--exclude=PAT 排除与PAT（pattern样式）匹配的文件</span><br><span class=\"line\"></span><br><span class=\"line\">-X FILE,--exclude-from=FILE 排除与FILE中样式匹配的文件</span><br><span class=\"line\"></span><br><span class=\"line\">-y,--side-by-side 使用并列输出格式</span><br><span class=\"line\"></span><br><span class=\"line\">--from-file=FILE1 FILE1与所有操作对象比较，FILE1可以是目录</span><br><span class=\"line\"></span><br><span class=\"line\">--<span class=\"built_in\">help</span> 输出帮助信息</span><br><span class=\"line\"></span><br><span class=\"line\">--horizon-lines=NUM 保留NUM行的公共前缀和后缀</span><br><span class=\"line\"></span><br><span class=\"line\">--ignore-file-name-case 比较时忽略文件名大小写</span><br><span class=\"line\"></span><br><span class=\"line\">--label LABEL 使用LABEL（标识）代替文件名</span><br><span class=\"line\"></span><br><span class=\"line\">--left-column （在并列输出格式中）只输出左列的公共行</span><br><span class=\"line\"></span><br><span class=\"line\">--no- ignore-file-name-case 比较时考虑文件名大小写</span><br><span class=\"line\"></span><br><span class=\"line\">--normal 输出一个正常的差异</span><br><span class=\"line\"></span><br><span class=\"line\">--speed-large-files 假设文件十分大，而且有许多微小的差异</span><br><span class=\"line\"></span><br><span class=\"line\">--strip-trailing-cr 去掉在输入时尾随的回车符</span><br><span class=\"line\"></span><br><span class=\"line\">--suppress-common-lines 不输出公共行</span><br><span class=\"line\"></span><br><span class=\"line\">--to-file=FILE2 所有操作对象与FILE2比较，FILE2可以是目录</span><br><span class=\"line\"></span><br><span class=\"line\">--unidiredtional-newfile 将缺少的第一个文件视为空文件</span><br><span class=\"line\"></span><br><span class=\"line\"> </span><br><span class=\"line\"></span><br><span class=\"line\">--GTYPE-group-format=GFMT 以GFMT格式化GTYPE输入组</span><br><span class=\"line\"></span><br><span class=\"line\">--line-format=LFMT 以LFMT格式化输入所有行</span><br><span class=\"line\"></span><br><span class=\"line\">--LTYPE-line-format=LFMT 以LFMT格式化LTYPE输入行</span><br><span class=\"line\"></span><br><span class=\"line\">LTYPE可以是’old’,’new’或’unchanged’。GTYPE可以是LTYPE选项或’changed’</span><br><span class=\"line\"></span><br><span class=\"line\">       GFMT包括：</span><br><span class=\"line\"></span><br><span class=\"line\">              %&lt; 该行属于FILE1</span><br><span class=\"line\"></span><br><span class=\"line\">              %&gt; 该行属于FILE2</span><br><span class=\"line\"></span><br><span class=\"line\">              %= 该行属于FILE1和FILE2公共行</span><br><span class=\"line\"></span><br><span class=\"line\">              %[-][WIDTH（宽度）][.[PREC（精确度）]]&#123;doxX&#125;LETTER（字母） <span class=\"built_in\">printf</span>格式规范LETTER。如下字母表示属于新的文件，小写表示属于旧的文件：</span><br><span class=\"line\"></span><br><span class=\"line\">                     F 行组中第一行的行号</span><br><span class=\"line\"></span><br><span class=\"line\">                     L 行组中最后一行的行号</span><br><span class=\"line\"></span><br><span class=\"line\">                     N 行数（=L-F+1）</span><br><span class=\"line\"></span><br><span class=\"line\">                     E F-1</span><br><span class=\"line\"></span><br><span class=\"line\">                     M L+1</span><br><span class=\"line\"></span><br><span class=\"line\">       LFMT可包含：</span><br><span class=\"line\"></span><br><span class=\"line\">              %L 该行内容</span><br><span class=\"line\"></span><br><span class=\"line\">              %l 该行内容，但不包括尾随的换行符</span><br><span class=\"line\"></span><br><span class=\"line\">              %[-][WIDTH][.[PREC]]&#123;doxX&#125;n <span class=\"built_in\">printf</span>格式规范输入行编号</span><br><span class=\"line\"></span><br><span class=\"line\">       GFMT或LFMT可包含：</span><br><span class=\"line\"></span><br><span class=\"line\">       %% %</span><br><span class=\"line\"></span><br><span class=\"line\">%c’C’ 单个字符C</span><br><span class=\"line\"></span><br><span class=\"line\">%c’\\000’ 八进制000所代表的字符</span><br></pre></td></tr></table></figure></p>\n<p>特殊字符含义:</p>\n<ul>\n<li>其中字母”a”、”d”、”c”分别表示添加、删除及修改操作。</li>\n<li>其中以&lt;开始的行属于文件1，以&gt;开始的行属于文件2。</li>\n<li>而”n1”、”n2”表示在文件1中的行号，”n3”、”n4”表示在文件2中的行号,后面会以&gt;显示具体属于哪一个文件</li>\n</ul>\n<p>实际案例：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#示例1.将目录/usr/li下的文件\"test.txt\"与当前目录下的文件\"test.txt\"进行比较</span></span><br><span class=\"line\">diff /usr/li test.txt     <span class=\"comment\">#使用diff指令对文件进行比较</span></span><br><span class=\"line\">n1 a n3,n4         </span><br><span class=\"line\">n1,n2 d n3  </span><br><span class=\"line\">n1,n2 c n3,n4 </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#示例2.比较两个文件夹不同和和递归比较</span></span><br><span class=\"line\">diff -r myweb/ html</span><br></pre></td></tr></table></figure></p>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190629093058.png\" alt=\"WeiyiGeek.示例2\" title=\"\" class=\"\">\n                <p>WeiyiGeek.示例2</p>\n            </figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#示例3.将补定文件进行输入到新文件夹中</span></span><br><span class=\"line\"><span class=\"comment\">#从效果来看事是将两个文件的不同之处都输出 -3,5 代表 删除两个字符， +3,5代表添加两个字符</span></span><br><span class=\"line\">diff -ruN test1.rb,test1.rb</span><br><span class=\"line\">diff -ruN test.rb test1.rb &gt; test.diff   <span class=\"comment\">#diff的输出文件被称为补丁（patch），可以使用patch命令将文件内容更新</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#示例4.以并列输出格式展示两个文件的不同</span></span><br><span class=\"line\">diff -y t1.txt t2.txt</span><br><span class=\"line\">diff -y -W 40 t1.txt t2.txt <span class=\"comment\"># 并列输出格式下控制宽度</span></span><br><span class=\"line\">this is a text!      this is aaa text!</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#示例5.以上下文输出格式展示两个文件的不同</span></span><br><span class=\"line\">diff -c t1.txt t2.txt </span><br><span class=\"line\">diff -c t1.txt t2.txt </span><br><span class=\"line\"><span class=\"comment\">#*代表t1.txt - 代表t2.txt - !标注差异行</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#示例6.以统一输出格式展示两个文件的不同</span></span><br><span class=\"line\">--- t1.txt  2018-06-23 21:44:15.171207940 +0800　　<span class=\"comment\">#-代表t1.txt</span></span><br><span class=\"line\">+++ t2.txt  2018-06-23 21:44:54.987207910 +0800　  <span class=\"comment\">#+代表t2.txt</span></span><br><span class=\"line\"><span class=\"comment\">#//-代表前面的文件比后面的文件多一行，+代表后面的文件比前面的文件多一行，一般一一对应</span></span><br></pre></td></tr></table></figure>\n<p><em>注意事项</em>：</p>\n<ul>\n<li>diff - - 比较一份标准输入的它自己的拷贝，如果 <code>源文件 是一个目录和 目标文件 不是（目录）</code>, diff 会比较在 <code>源文件（目录） 里的文件的中和目标文件同名的（文件）</code> , 反过来也一样非目录文件不能是 - .</li>\n<li>如果该命令指定进行目录的比较,则将会比较该目录中具有相同文件名的文件, 依照字母次序排序;而不会对其子目录文件进行任何比较操作,这个比较是不会递归的,除非给出 -r 或者 –recursive.</li>\n<li>diff 不把一个目录的内容看为它是一个文件来比较。被指定的文件不能是标准的输入, 因为标准的输入是无名的并且＂有一样的名字的文件＂的观点不适用。</li>\n</ul>\n<p><br></p>\n<h5 id=\"comm-命令\"><a href=\"#comm-命令\" class=\"headerlink\" title=\"comm 命令\"></a>comm 命令</h5><p>描述：可以用于两个文件之间的比较( 逐行比较两个已排序的文件)，它有一些选项可以用来调整输出，以便执行交集、求差、以及差集操作。</p>\n<ul>\n<li>交集：打印出两个文件所共有的行。</li>\n<li>求差：打印出指定文件所包含的且不相同的行。</li>\n<li>差集：打印出包含在一个文件中，但不包含在其他指定文件中的行。</li>\n</ul>\n<p>基础语法：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">comm(选项)(参数)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#选项</span></span><br><span class=\"line\">-1：不显示在第一个文件出现的内容；</span><br><span class=\"line\">-2：不显示在第二个文件中出现的内容；</span><br><span class=\"line\">-3：不显示同时在两个文件中都出现的内容。</span><br><span class=\"line\">--check-order     check that the input is correctly sorted, even <span class=\"keyword\">if</span> all input lines are pairable</span><br><span class=\"line\">--nocheck-order   <span class=\"keyword\">do</span> not check that the input is correctly sorted</span><br><span class=\"line\">--output-delimiter=STR  separate columns with STR</span><br></pre></td></tr></table></figure></p>\n<p>实际案例：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#示例1.输出的第一列只包含在aaa.txt中出现的行，第二列包含在bbb.txt中出现的行，第三列包含在aaa.txt和bbb.txt中相同的行。各列是以制表符（\\t）作为定界符。</span></span><br><span class=\"line\">$ comm aaa.txt bbb.txt </span><br><span class=\"line\">aaa</span><br><span class=\"line\">                bbb</span><br><span class=\"line\">                ccc</span><br><span class=\"line\">        aaa</span><br><span class=\"line\">ddd</span><br><span class=\"line\">eee</span><br><span class=\"line\">111</span><br><span class=\"line\">222</span><br><span class=\"line\">        hhh</span><br><span class=\"line\">        ttt</span><br><span class=\"line\">        jjj</span><br><span class=\"line\">第一列  第二列  第三列</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#示例2. 交集 打印两个文件的交集，需要删除第一列和第二列：</span></span><br><span class=\"line\">comm aaa.txt bbb.txt -1 -2 <span class=\"comment\">#即自显示第三列</span></span><br><span class=\"line\"><span class=\"comment\"># bbb</span></span><br><span class=\"line\"><span class=\"comment\"># ccc</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#示例3. 求差 打印出两个文件中不相同的行，需要删除第三列：</span></span><br><span class=\"line\">comm aaa.txt bbb.txt -3 | sed <span class=\"string\">'s/^\\t//'</span>   <span class=\"comment\"># 连续的bbb，ccc可以匹配, 是将制表符（\\t）删除，以便把两列合并成一列。</span></span><br><span class=\"line\">comm -3 t1.txt t2.txt --nocheck-order | tr -d <span class=\"string\">'\\t'</span></span><br><span class=\"line\">aaa</span><br><span class=\"line\">aaa</span><br><span class=\"line\">ddd</span><br><span class=\"line\">eee</span><br><span class=\"line\">111</span><br><span class=\"line\">222</span><br><span class=\"line\">hhh</span><br><span class=\"line\">ttt</span><br><span class=\"line\">jjj</span><br><span class=\"line\">comm -3 t1.txt t2.txt --nocheck-order | tr -d <span class=\"string\">'\\t'</span> | uniq -u  <span class=\"comment\">#删除重复的行</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#示例3.差集通过删除不需要的列，可以得到aaa.txt和bbb.txt的差集：</span></span><br><span class=\"line\"><span class=\"variable\">$comm</span> aaa.txt bbb.txt -1 -3   <span class=\"comment\">#aaa.txt的差集</span></span><br><span class=\"line\"><span class=\"variable\">$comm</span> aaa.txt bbb.txt -2 -3   <span class=\"comment\">#bbb.txt的差集</span></span><br><span class=\"line\">aaa</span><br><span class=\"line\">ddd</span><br><span class=\"line\">eee</span><br><span class=\"line\">111</span><br><span class=\"line\">222</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<h5 id=\"split-命令\"><a href=\"#split-命令\" class=\"headerlink\" title=\"split 命令\"></a>split 命令</h5><p>split命令可以将一个大文件分割成很多个小文件，有时需要将文件分割成更小的片段，比如为提高可读性，生成日志等</p>\n<p>语法参数：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-d 使用数字而不是字母作为切割后的小文件的后缀；</span><br><span class=\"line\">-a &lt;number&gt;,后缀的length </span><br><span class=\"line\">-v 显示详细的处理信息</span><br><span class=\"line\">-b &lt;字节&gt; 每个分割文件的大小</span><br><span class=\"line\">-C &lt;数字&gt; 指定输出到每一个文件的每一行的大小，数字后缀可以是</span><br><span class=\"line\">    b:  512(blocks)   <span class=\"comment\">#非常注意</span></span><br><span class=\"line\">    K:  1024(kibiBytes)</span><br><span class=\"line\">    KB: 1000(kiloBytes)</span><br><span class=\"line\">    M:  1024*1024(mebiBytes)</span><br><span class=\"line\">    MB: 1000*1000(megaBytes)</span><br><span class=\"line\">    G:  1024*1024*1024(gibiBytes)</span><br><span class=\"line\">    GB: 1000*1000*1000(gibaBytes)  <span class=\"comment\">#T, P, E, Z, Y</span></span><br><span class=\"line\">-l&lt;行数&gt; 指定切割的行数作为切割文件的单位；</span><br></pre></td></tr></table></figure></p>\n<p>实际案例：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#示例1.生成一个大小为100KB的测试文件：然后将其进行分割</span></span><br><span class=\"line\">dd <span class=\"keyword\">if</span>=/dev/zero bs=100k count=1 of=date.file</span><br><span class=\"line\">split -b 10k date.file  <span class=\"comment\">#使用split命令将上面创建的date.file文件分割成大小为10KB的小文件：</span></span><br></pre></td></tr></table></figure><br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190629135548.png\" alt=\"WeiyiGeek.split分割\" title=\"\" class=\"\">\n                <p>WeiyiGeek.split分割</p>\n            </figure></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#示例2.文件被分割成多个带有字母的后缀文件，如果想用数字后缀可使用-d参数，同时可以使用-a length来指定后缀的长度：</span></span><br><span class=\"line\">split -b 10k date.file -d -a 3; ls </span><br><span class=\"line\"><span class=\"comment\"># date.file  x000 x001 x002 x003 x004 x005 x006 x007 x008 x009</span></span><br><span class=\"line\">split -b 1b anaconda-ks.cfg -d -a 2 split <span class=\"comment\">#为分割后的文件指定文件名的前缀</span></span><br><span class=\"line\"><span class=\"comment\"># -rw-r--r--. 1 root root  512 Jun 26 06:33 split00</span></span><br><span class=\"line\"><span class=\"comment\"># -rw-r--r--. 1 root root  512 Jun 26 06:33 split01</span></span><br><span class=\"line\"><span class=\"comment\"># -rw-r--r--. 1 root root  261 Jun 26 06:33 split02</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#示例4.还可以以分割流媒体</span></span><br><span class=\"line\">split -b 20m RevolutionOS.rmvb RevOS_part_ ; ls -lh</span><br><span class=\"line\"><span class=\"comment\"># 总计 552M</span></span><br><span class=\"line\"><span class=\"comment\"># -rwx------ 1 hoho hoho 276M 2005-09-09 RevolutionOS.rmvb</span></span><br><span class=\"line\"><span class=\"comment\"># -rw-r--r-- 1 root root  20M 03-19 17:59 RevOS_part_aa</span></span><br><span class=\"line\"><span class=\"comment\"># -rw-r--r-- 1 root root  20M 03-19 17:59 RevOS_part_ab</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#示例3.# 使用-l选项根据文件的行数来分割文件，例如把文件分割成每个包含10行的小文件：</span></span><br><span class=\"line\">split -l 10 date.file</span><br><span class=\"line\">split -l 10 test.txt text_</span><br></pre></td></tr></table></figure>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190629140052.png\" alt=\"WeiyiGeek.split示例\" title=\"\" class=\"\">\n                <p>WeiyiGeek.split示例</p>\n            </figure>\n<p><br></p>\n<h5 id=\"csplit-命令\"><a href=\"#csplit-命令\" class=\"headerlink\" title=\"csplit 命令\"></a>csplit 命令</h5><p>描述：用于将一个大文件分割成小的碎片，并且将分割后的每个碎片保存成一个文件。碎片文件的命名类似“xx00”，“xx01”，同时每个分块文件的字节数也将被输出到标准输出。</p>\n<p>csplit命令是split的一个变体，他们的不同点：</p>\n<ul>\n<li>split只能够根据文件大小或行数来分割</li>\n<li>csplit能够根据文件本身特点来分割文件。</li>\n</ul>\n<p>语法参数：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">csplit [选项]... 文件or格式  <span class=\"comment\">#如果文件为\"-\"，则读取标准输入</span></span><br><span class=\"line\">csplit [-kqsz][-b&lt;输出格式&gt;][-f&lt;输出字首字符串&gt;][-n&lt;输出文件名位数&gt;][文件][范本样式...] </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#长选项必须使用的参数对于短选项时也是必需使用的：</span></span><br><span class=\"line\">-b, --suffix-format=格式    使用sprintf 格式代替%02d.log,与-n连用形成后缀;</span><br><span class=\"line\">-f, --prefix=前缀        使用指定前缀代替<span class=\"string\">\"xx\"</span>,“hello”，则输出的文件名称会变成hello00，hello、</span><br><span class=\"line\">-k, --keep-files        不移除错误的输出文件</span><br><span class=\"line\">-n, --digits=数位        使用指定的进制数位代替二进制,“3”，则输出的文件名称会变成xx000，xx001等</span><br><span class=\"line\">-z, --elide-empty-files    删除空的输出文件</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#格式\"可以是,一个行的偏移量需要在正整数值之后声明\"+\" 或 \"-\"</span></span><br><span class=\"line\">整数                不包括指定的行，并以其为文件分块边界</span><br><span class=\"line\">/表达式/[偏移量]    不包括匹配到的行，并以其为文件分块边界</span><br><span class=\"line\">%表达式%[偏移量]    预先跳过匹配的行数，以其为文件分块边界</span><br><span class=\"line\"></span><br><span class=\"line\">-s, --quiet, --silent    不显示输出文件的尺寸计数</span><br><span class=\"line\">&#123;整数&#125;             将之前指定的模式重复指定的次数</span><br><span class=\"line\">&#123;*&#125;                将之前指定的模式重复尽可能多的次数。</span><br></pre></td></tr></table></figure></p>\n<p>实际案例：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#示例1。需要将server.log分割成server1.log、server2.log、server3.log，这些文件的内容分别取自原文件中不同的SERVER部分：</span></span><br><span class=\"line\">csplit server.log /SERVER/ -n2 -s &#123;*&#125; -f server -b <span class=\"string\">\"%02d.log\"</span>; rm server00.log ; ls  <span class=\"comment\">#匹配SERVER边界每次以它作为分割界限</span></span><br><span class=\"line\"><span class=\"variable\">$csplit</span> textfile /<span class=\"string\">\"Chapter X\"</span>/   <span class=\"comment\">#把文件以字符串\"Chapter X\"为分界符，分成两部分 </span></span><br><span class=\"line\"><span class=\"comment\">#承上例， 但分割文件时以\"Chapter X\"字符串往下4行才是分割点 </span></span><br><span class=\"line\"><span class=\"variable\">$csplit</span> textfile /<span class=\"string\">\"Chapter X\"</span>/+4server01.log server02.log server03.log server.log</span><br></pre></td></tr></table></figure><br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190629141603.png\" alt=\"WeiyiGeek.内容分割\" title=\"\" class=\"\">\n                <p>WeiyiGeek.内容分割</p>\n            </figure></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#示例3.按行分割</span></span><br><span class=\"line\">csplit test.txt -z -f server -b <span class=\"string\">\"%02d.log\"</span> 6 &#123;1&#125;    <span class=\"comment\"># 6 line 需要除去 \\n一行，分成3份 （自动匹配分割可能会出错）</span></span><br><span class=\"line\"><span class=\"comment\"># 93</span></span><br><span class=\"line\"><span class=\"comment\"># 102</span></span><br><span class=\"line\"><span class=\"comment\"># 87</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 把文件 FILE 分解，分解后大小为 15000 行，文件名前缀为 prefix 后缀为 00、01、02 ......99，而文件个数不多于100个。 </span></span><br><span class=\"line\">csplit -k -f prefix FILE 15000 &#123;99&#125;</span><br></pre></td></tr></table></figure>\n<p><em>注意事项：</em></p>\n<ul>\n<li>您可以使用星号通配符来告诉 csplit 尽可能多地重复分割。这听起来很酷，但是如果文件不能等分，则可能会失败</li>\n</ul>\n<hr>\n\n<h4 id=\"0x02-内容分割与排序\"><a href=\"#0x02-内容分割与排序\" class=\"headerlink\" title=\"0x02 内容分割与排序\"></a>0x02 内容分割与排序</h4><h5 id=\"cut-命令\"><a href=\"#cut-命令\" class=\"headerlink\" title=\"cut 命令\"></a>cut 命令</h5><p>描述：用来显示行中的指定部分,删除文件中指定字段,在文件的每一行中提取片断,在 每个文件 FILE 的 各行 中, 把 提取的片断显示在标准输出.</p>\n<p>cut命令有两项功能：</p>\n<ul>\n<li>一是用来显示文件的内容，它依次读取由参数file所指 明的文件，将它们的内容输出到标准输出上;</li>\n<li>二是连接两个或多个文件，如cut fl f2 &gt; f3将把文件fl和几的内容合并起来;</li>\n</ul>\n<p>参数语法：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-b, --bytes=LIST：仅显示行中指定直接范围的内容；</span><br><span class=\"line\">-c, --characters=LIST：仅显示行中指定范围的字符；</span><br><span class=\"line\">-d, --delimiter=DELIM：指定字段的分隔符，默认的字段分隔符为“TAB”；</span><br><span class=\"line\">-f, --fields=LIST：显示指定字段的内容；</span><br><span class=\"line\">-n：与“-b”选项连用，不分割多字节字符；</span><br><span class=\"line\">--complement：补足被选择的字节、字符或字段；(取反显示)</span><br><span class=\"line\">--output-delimiter=&lt;字段分隔符&gt;：指定输出内容是的字段分割符；</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#使用且只使用 -b, -c 或 -f 中的一个选项. LIST 由 一个 范围 (range) 或 逗号 隔开的多个范围组成. 范围是下列形式 之一:</span></span><br><span class=\"line\">N  ： 第 N 个 字节, 字符 或 字段, 从 1 计数 起</span><br><span class=\"line\">N- ： 从 第 N 个 字节, 字符 或 字段 直至 行尾</span><br><span class=\"line\">N-M：从 第 N 到 第 M (并包括 第M) 个 字节, 字符 或 字段</span><br><span class=\"line\">-M ： 从 第 1 到 第 M (并包括 第M) 个 字节, 字符 或 字段</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#如果 没有 指定 文件 FILE, 或 FILE 是 -, 就从 标准输入 读取 数据.</span></span><br></pre></td></tr></table></figure></p>\n<p>实际操作：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat test.txt </span><br><span class=\"line\">No Name Mark Percent</span><br><span class=\"line\">01 tom 69 91</span><br><span class=\"line\">02 jack 71 87</span><br><span class=\"line\">03 alex 68 98</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#示例1：采用默认的&lt;tab&gt;分割然后使用-f来提取指定字段</span></span><br><span class=\"line\">cut -f 1 test.txt</span><br><span class=\"line\"><span class=\"comment\"># No</span></span><br><span class=\"line\"><span class=\"comment\"># 01</span></span><br><span class=\"line\"><span class=\"comment\"># 02</span></span><br><span class=\"line\"><span class=\"comment\"># 以:分割文件,输出第一,二,三个字段（指定分隔符）</span></span><br><span class=\"line\">cat /etc/passwd | cut -f 1,2,3 -d <span class=\"string\">\":\"</span> | head -5</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#示例2.输出passwd中得第一个字符</span></span><br><span class=\"line\">cat /etc/passwd | cut -b 1</span><br><span class=\"line\">cat /etc/passwd | cut -b 1-4 | head -5    <span class=\"comment\">#输出文件的前四个字符</span></span><br></pre></td></tr></table></figure><br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190629094106.png\" alt=\"WeiyiGeek.cut示例1融合\" title=\"\" class=\"\">\n                <p>WeiyiGeek.cut示例1融合</p>\n            </figure></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#示例3.以特殊符号进行分割时 $'\\n' (换行), $'\\t'（Tab建），按照反斜杠控制的字符转换进行转换（printf 输出格式）：</span></span><br><span class=\"line\">cat <span class=\"built_in\">test</span> | cut -f1,3 -d $<span class=\"string\">'\\t'</span>   <span class=\"comment\"># 以tab作为分割符号</span></span><br><span class=\"line\">cat <span class=\"built_in\">test</span> | cut -f1,3 -d $<span class=\"string\">'\\n'</span>   <span class=\"comment\"># 以换行符作为分割符号</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#示例4.打印0字段到3字段得数据和排除</span></span><br><span class=\"line\">cut -d $<span class=\"string\">'\\t'</span> -f -3 test.txt </span><br><span class=\"line\"><span class=\"comment\">#--complement 选项提取指定字段之外的列（打印除了第二列之外的列）：</span></span><br><span class=\"line\">cut -f2 --complement test.txt </span><br><span class=\"line\"><span class=\"comment\"># No Mark Percent</span></span><br><span class=\"line\"><span class=\"comment\"># 01 69 91</span></span><br><span class=\"line\"><span class=\"comment\"># 02 71 87</span></span><br><span class=\"line\"><span class=\"comment\"># 03 68 98</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#示例5.将所有行的2-3字符打印出来</span></span><br><span class=\"line\">cut -c 2,3 test.txt </span><br><span class=\"line\">cut -c 1-4 test.txt  <span class=\"comment\">#两种形式都可以</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"variable\">$RANDOM</span> | md5sum | cut -c 1-8  <span class=\"comment\">#值得学习 </span></span><br><span class=\"line\">60354ab3</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#示例6.采用制定输出符输出分割的字符</span></span><br><span class=\"line\">$ cut -d <span class=\"string\">\" \"</span> -f 1,3 --output-delimiter=<span class=\"string\">'-'</span> init.sh</span><br><span class=\"line\"><span class=\"meta\">#!/bin/sh</span></span><br><span class=\"line\">npm-set</span><br><span class=\"line\">npm-set</span><br><span class=\"line\">npm--g</span><br><span class=\"line\">npm---save</span><br><span class=\"line\">hexo</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#示例7.采用切割排序去重进行图片目录创建</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> dir <span class=\"keyword\">in</span> $(cut -d <span class=\"string\">\" \"</span> -f 3 gzkz.sh  | cut -d <span class=\"string\">\"/\"</span> -f 4 | sort | uniq );<span class=\"keyword\">do</span>  mkdir -vp <span class=\"variable\">$&#123;dir&#125;</span>; <span class=\"keyword\">done</span> </span><br><span class=\"line\">mkdir: 已创建目录 <span class=\"string\">\"0101\"</span></span><br><span class=\"line\">....</span><br><span class=\"line\">mkdir: 已创建目录 <span class=\"string\">\"0140\"</span></span><br></pre></td></tr></table></figure>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190629095035.png\" alt=\"WeiyiGeek.cut示例\" title=\"\" class=\"\">\n                <p>WeiyiGeek.cut示例</p>\n            </figure>\n<p><em>注意事项：</em></p>\n<ul>\n<li>在使用-d指定特殊分割字符的时候<code>需要采用&#39;&#39;单引号</code>否则会报错;</li>\n</ul>\n<p><br></p>\n<h5 id=\"sort-命令\"><a href=\"#sort-命令\" class=\"headerlink\" title=\"sort 命令\"></a>sort 命令</h5><p>描述：在Linux里非常有用,它将文件进行排序,并将排序结果标准输出,sort命令既可以从特定的文件,也可以从stdin中获取输入。</p>\n<p>参数语法：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">用法：sort [选项]... [文件]...  或： sort [选项]... --files0-from=F</span><br><span class=\"line\"><span class=\"comment\">#串联排序所有指定文件并将结果写到标准输出，如果不指定文件,或者文件为\"-\",则从标准输入读取数据。</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#排序选项：</span></span><br><span class=\"line\">  -b, --ignore-leading-blanks   忽略前导的空白区域</span><br><span class=\"line\">  -d, --dictionary-order        只考虑空白区域和字母字符</span><br><span class=\"line\">  -f, --ignore-case             忽略字母大小写</span><br><span class=\"line\">  -g, --general-numeric-sort    按照常规数值排序</span><br><span class=\"line\">  -i, --ignore-nonprinting      只排序可打印字符</span><br><span class=\"line\">  -M, --month-sort              比较 (未知) &lt; <span class=\"string\">\"一月\"</span> &lt; ... &lt; <span class=\"string\">\"十二月\"</span> 在LC_ALL=C 时为(unknown) &lt; <span class=\"string\">'JAN'</span> &lt; ... &lt; <span class=\"string\">'`DEC'</span></span><br><span class=\"line\">  -h, --human-numeric-sort      使用易读性数字(例如： 2K 1G-即文件大小排序)</span><br><span class=\"line\">  -n, --numeric-sort            根据字符串数值比较(数字排序，默认是升序)</span><br><span class=\"line\">  -R, --random-sort             根据随机<span class=\"built_in\">hash</span> 排序</span><br><span class=\"line\">      --random-source=文件      从指定文件中获得随机字节</span><br><span class=\"line\">  -r, --reverse                 逆序输出排序结果</span><br><span class=\"line\">  --sort=WORD                   按照WORD 指定的格式排序：一般数字-g,高可读性-h,月份-M,数字-n,随机-R,版本  <span class=\"string\">\"general-numeric\"</span> - <span class=\"string\">\"human-numeric\"</span> - <span class=\"string\">\"month\"</span> - <span class=\"string\">\"numeric\"</span> - <span class=\"string\">\"random\"</span> - <span class=\"string\">\"version\"</span></span><br><span class=\"line\">  -V, --version-sort            在文本内进行自然版本排序</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#其他选项：</span></span><br><span class=\"line\">--batch-size=NMERGE       一次最多合并NMERGE 个输入;如果输入更多则使用临时文件</span><br><span class=\"line\">-c, --check, --check=diagnose-first   检查输入是否已排序,若已有序则不进行操作</span><br><span class=\"line\">-C, --check=quiet, --check=silent     类似-c,但不报告第一个无序行</span><br><span class=\"line\">    --compress-program=程序   使用指定程序压缩临时文件;使用该程序的-d 参数解压缩文件</span><br><span class=\"line\">    --debug                   为用于排序的行添加注释,并将有可能有问题的用法输出到标准错误输出</span><br><span class=\"line\">    --files0-from=文件        从指定文件读取以NUL 终止的名称,如果该文件被指定为<span class=\"string\">\"-\"</span>则从标准输入读文件名</span><br><span class=\"line\">-k, --key=位置1[,位置2]       在位置1 开始一个key,在位置2 终止(默认为行尾)参看POS语法</span><br><span class=\"line\"><span class=\"comment\">#补充-k选项的具体语法格式：</span></span><br><span class=\"line\"><span class=\"comment\"># FStart(字段).CStart(列) Modifie,FEnd.CEnd Modifier</span></span><br><span class=\"line\"><span class=\"comment\"># -------Start--------,-------End--------</span></span><br><span class=\"line\"><span class=\"comment\"># FStart.CStart 选项  ,  FEnd.CEnd 选项</span></span><br><span class=\"line\"><span class=\"comment\"># Start部分也由三部分组成于End部分以`,`分割，其中的Modifier部分就是我们之前说过的类似n和r的选项部分;，</span></span><br><span class=\"line\"><span class=\"comment\"># - 其中FStart就是表示使用的域，而CStart则表示在FStart域中从第几个字符开始算“排序首字符”。</span></span><br><span class=\"line\"><span class=\"comment\"># - 如果你省略.CEnd，则表示结尾到“域尾”，即本域的最后一个字符。或者如果你将CEnd设定为0(零)，也是表示结尾到“域尾”。</span></span><br><span class=\"line\"></span><br><span class=\"line\">-u, --unique     <span class=\"comment\"># 配合-c,严格校验排序;不配合-c,则只输出一次排序结果(可以去重复)</span></span><br><span class=\"line\">-m, --merge                   合并已排序的文件,不再进行排序</span><br><span class=\"line\">-o, --output=文件             <span class=\"comment\">#将结果写入到文件而非标准输出</span></span><br><span class=\"line\">-s, --stable                  禁用last-resort 比较以稳定比较算法</span><br><span class=\"line\">-S, --buffer-size=大小        指定主内存缓存大小</span><br><span class=\"line\">-t, --field-separator=分隔符  <span class=\"comment\">#使用指定的分隔符代替非空格到空格的转换 类似于awk的-F,cut的-d选项;</span></span><br><span class=\"line\">-T, --temporary-directory=目录        使用指定目录而非<span class=\"variable\">$TMPDIR</span> 或/tmp 作为临时目录,可用多个选项指定多个目录</span><br><span class=\"line\">--parallel=N                      将同时运行的排序数改变为N</span><br><span class=\"line\">-z, --zero-terminated 以0 字节而非新行作为行尾标志</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#指定的大小可以使用以下单位之一：</span></span><br><span class=\"line\">内存使用率% 1%,b 1、K 1024 (默认),M、G、T、P、E、Z、Y 等依此类推</span><br></pre></td></tr></table></figure></p>\n<p>实际案例:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#示例0.会按照先字母后数字进行排序 (Default)即依次按ASCII码值进行比较，最后将他们按升序输出。</span></span><br><span class=\"line\">sort -n 1.txt <span class=\"comment\">#默认以第一个数据来排序,而且默认是以字符串形式来排序,所以由字母 a 开始升序排序 (可以不加上-k 1,1)</span></span><br><span class=\"line\"><span class=\"comment\"># admin</span></span><br><span class=\"line\"><span class=\"comment\"># blog</span></span><br><span class=\"line\"><span class=\"comment\"># pass</span></span><br><span class=\"line\"><span class=\"comment\"># 123</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#示例1.直接去重复进行排序</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> -e <span class=\"string\">\" 10.0.0.1 \\n 10.0.0.2 \\n 10.0.0.2 \\n 10.0.0.1 \\n 10.0.0.1 \\n 10.0.0.3 \"</span> | sort -u</span><br><span class=\"line\"><span class=\"comment\">#  10.0.0.1</span></span><br><span class=\"line\"><span class=\"comment\">#  10.0.0.2</span></span><br><span class=\"line\"><span class=\"comment\">#  10.0.0.3</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#示例1.指定分隔符与位置去掉重复值</span></span><br><span class=\"line\">sort -t <span class=\"string\">\":\"</span> -k 1,1 /etc/passwd <span class=\"comment\">#内容是以 : 来分隔的,以第一栏第一个单词排序来排序（默认按照字母排序）</span></span><br><span class=\"line\">cat /etc/passwd | sort -t<span class=\"string\">':'</span> -k 7 -u</span><br><span class=\"line\">cat /etc/passwd | sort -t <span class=\"string\">':'</span> -k 3n      <span class=\"comment\">#用数字排序,默认是以字符串来排序的</span></span><br><span class=\"line\">cat /etc/passwd | sort -t <span class=\"string\">':'</span> -k 3nr     <span class=\"comment\">#倒序排列,默认是升序排序</span></span><br></pre></td></tr></table></figure><br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190629084802.png\" alt=\"WeiyiGeek.sort示例1\" title=\"\" class=\"\">\n                <p>WeiyiGeek.sort示例1</p>\n            </figure></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#示例2.-k选项基础使用于进阶</span></span><br><span class=\"line\"><span class=\"comment\">#从公司英文名称的第二个字母开始进行排序：</span></span><br><span class=\"line\">$ sort -t <span class=\"string\">' '</span> -k 1.2 facebook.txt  <span class=\"comment\">#-k 1.2 表示对第一个域的第二个字符开始到本域的最后一个字符为止的字符串进行排序</span></span><br><span class=\"line\"><span class=\"comment\"># baidu 100 5000 #baidu因为第二个字母是a而名列榜首。</span></span><br><span class=\"line\"><span class=\"comment\"># sohu 100 4500 #sohu和 google第二个字符都是o，但sohu的h在google的o前面，所以两者分别排在第二和第三。</span></span><br><span class=\"line\"><span class=\"comment\"># google 110 5000 </span></span><br><span class=\"line\"><span class=\"comment\"># guge 50 3000 #guge只能屈居第四了。</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#只针对公司英文名称的第二个字母进行排序，如果相同的按照员工工资进行降序排序：</span></span><br><span class=\"line\">$ sort -t <span class=\"string\">' '</span> -k 1.2,1.2 -nrk 3,3 facebook.txt  <span class=\"comment\">#n 数字/ -r 反向  # -k 3,3 指定员工工资域</span></span><br><span class=\"line\"><span class=\"comment\"># baidu 100 5000  #使用了-k 1.2,1.2的表示方式，表示我们“只”对第二个字母进行排序</span></span><br><span class=\"line\"><span class=\"comment\"># google 110 5000</span></span><br><span class=\"line\"><span class=\"comment\"># sohu 100 4500</span></span><br><span class=\"line\"><span class=\"comment\"># guge 50 3000</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#对/etc/passwd,先以第六个域的第2个字符到第4个字符进行正向排序,再基于第一个域进行反向排序</span></span><br><span class=\"line\">cat /etc/passwd | sort -t<span class=\"string\">':'</span> -k 6.2,6.4 -k 1r</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#示例3.个人理解、</span></span><br><span class=\"line\">sort -t <span class=\"string\">\",\"</span> -rk 1.2,1,5 -u file.txt <span class=\"comment\">#对文件中内容以,号分割然后再第一个域的第二个字母开始到第五个字母机进行逆向排序(降序)，然后去掉重复内容；</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#示例4.IP与MAC处理</span></span><br><span class=\"line\">sort -t <span class=\"string\">'.'</span> -k 3.1,3.1nr -k4.1,4.3nr arp.txt</span><br><span class=\"line\">172.25.27.33 16-15-16-EE-76-BD</span><br><span class=\"line\">192.168.137.26 16-15-16-EE-76-BD</span><br><span class=\"line\">192.168.137.1 16-15-16-EE-76-BD</span><br><span class=\"line\">255.255.255.240 16-15-16-EE-76-BD</span><br></pre></td></tr></table></figure>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190629084847.png\" alt=\"WeiyiGeek.sort示例2\" title=\"\" class=\"\">\n                <p>WeiyiGeek.sort示例2</p>\n            </figure>\n<p><br></p>\n<h5 id=\"uniq-命令\"><a href=\"#uniq-命令\" class=\"headerlink\" title=\"uniq 命令\"></a>uniq 命令</h5><p>描述：用于报告或忽略文件中的重复行,一般与sort命令结合使用</p>\n<p>语法参数：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">uniq(选项)(参数)</span><br><span class=\"line\">输入文件：指定要去除的重复行文件。如果不指定此项，则从标准读取数据；</span><br><span class=\"line\">输出文件：指定要去除重复行后的内容要写入的输出文件。如果不指定此选项，则将内容显示到标准输出设备（显示终端）。</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#[选项]</span></span><br><span class=\"line\">-c或--count：在每列旁边显示该行重复出现的次数；</span><br><span class=\"line\">-d或--repeated：仅显示重复出现的行列，即表示显示重复的行；</span><br><span class=\"line\">-f n或--skip-fields=n：忽略比较指定的栏位,前n个字段与每个字段前的空白一起被忽略;</span><br><span class=\"line\">-s&lt;字符位置&gt;或--skip-chars=&lt;字符位置&gt;：忽略比较指定的字符；</span><br><span class=\"line\">-u或--unique：仅显示出一次的行列，即表示显示不重复的行；</span><br><span class=\"line\">-w&lt;字符位置&gt;或--check-chars=&lt;字符位置&gt;：指定要比较的字符。</span><br></pre></td></tr></table></figure></p>\n<p>实际案例：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#示例0。不加参数只对相邻的行相同的内容去重</span></span><br><span class=\"line\">uniq file.txt</span><br><span class=\"line\"><span class=\"built_in\">echo</span> -e <span class=\"string\">\"10.0.0.1 \\n 10.0.0.2 \\n 10.0.0.2 \\n 10.0.0.1 \\n 10.0.0.1 \\n 10.0.0.3 \"</span> | uniq </span><br><span class=\"line\"><span class=\"comment\">#  10.0.0.1</span></span><br><span class=\"line\"><span class=\"comment\">#  10.0.0.2</span></span><br><span class=\"line\"><span class=\"comment\">#  10.0.0.1  （还是有重复）</span></span><br><span class=\"line\"><span class=\"comment\">#  10.0.0.3</span></span><br><span class=\"line\">uniq file.txt</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#示例1.原本使用sort输出的内容中有很多重复(实际将重复的放在一起),可在后面加上|uniq完全去重</span></span><br><span class=\"line\">sort file.txt | uniq</span><br><span class=\"line\"><span class=\"built_in\">echo</span> -e <span class=\"string\">\" 10.0.0.1 \\n 10.0.0.2 \\n 10.0.0.2 \\n 10.0.0.1 \\n 10.0.0.1 \\n 10.0.0.3 \"</span> | sort | uniq </span><br><span class=\"line\"><span class=\"comment\">#  10.0.0.1</span></span><br><span class=\"line\"><span class=\"comment\">#  10.0.0.2</span></span><br><span class=\"line\"><span class=\"comment\">#  10.0.0.3</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#示例2.按照顺序排列并且显示不重复</span></span><br><span class=\"line\">sort -u file <span class=\"comment\">#作用相同去重复</span></span><br><span class=\"line\">sort file | uniq -u</span><br><span class=\"line\">uniq -u file <span class=\"comment\">#不显示重复的数据（\"只显示出现一次的数据,有重复过的数据则不显示\"）</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#示例3.统计各行在文件中出现的次数</span></span><br><span class=\"line\">sort file.txt | uniq -c</span><br><span class=\"line\"><span class=\"built_in\">echo</span> -e <span class=\"string\">\" 10.0.0.1 \\n 10.0.0.2 \\n 10.0.0.2 \\n 10.0.0.1 \\n 10.0.0.1 \\n 10.0.0.3 \"</span> | sort | uniq -c</span><br><span class=\"line\"><span class=\"comment\"># 3  10.0.0.1</span></span><br><span class=\"line\"><span class=\"comment\"># 2  10.0.0.2</span></span><br><span class=\"line\"><span class=\"comment\"># 1  10.0.0.3</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#示例4.文件中找出重复行</span></span><br><span class=\"line\">sort file.txt | uniq -d</span><br></pre></td></tr></table></figure></p>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190629090256.png\" alt=\"WeiyiGeek.基础示例\" title=\"\" class=\"\">\n                <p>WeiyiGeek.基础示例</p>\n            </figure>\n<p><br></p>\n<h5 id=\"fold-命令\"><a href=\"#fold-命令\" class=\"headerlink\" title=\"fold 命令\"></a>fold 命令</h5><p>描述：用于限制文件列宽,fold指令会从指定的文件里读取内容，将超过限定列宽的列加入增列字符后，输出到标准输出设备。若不指定任何文件名称，或是所给予的文件名为”-“，则fold指令会从标准输入设备读取数据。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#语法</span></span><br><span class=\"line\">fold [-bs][-w&lt;每列行数&gt;][--<span class=\"built_in\">help</span>][--version][文件...]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#参数：</span></span><br><span class=\"line\">-b或--bytes 以Byte为单位计算列宽，而非采用行数编号为单位。</span><br><span class=\"line\">-c或--characters 以字符为单位，指定宽度</span><br><span class=\"line\">-s或--spaces 以空格字符作为换列点。</span><br><span class=\"line\">-w&lt;每列行数&gt;或--width&lt;每列行数&gt; 设置每列的最大行数。</span><br></pre></td></tr></table></figure>\n<p>实际案例：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#示例1.将一个0~9的数字文件进行行折叠宽度成为2</span></span><br><span class=\"line\">fold -w 2 test.log</span><br><span class=\"line\"><span class=\"comment\"># 0123456789</span></span><br><span class=\"line\"><span class=\"comment\"># 01</span></span><br><span class=\"line\"><span class=\"comment\"># 23</span></span><br><span class=\"line\"><span class=\"comment\"># 45</span></span><br><span class=\"line\"><span class=\"comment\"># 67</span></span><br><span class=\"line\"><span class=\"comment\"># 89</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#示例2.密码字符长度截取</span></span><br><span class=\"line\">cat /dev/urandom | tr -dc <span class=\"string\">'_a-zA-Z0-9!@#$%&amp;*.-+'</span> | fold -w 12 | head -1</span><br><span class=\"line\"><span class=\"comment\"># yduDZvYNLY42</span></span><br><span class=\"line\"><span class=\"comment\"># .g0VvfzPooh*</span></span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<h5 id=\"truncate-命令\"><a href=\"#truncate-命令\" class=\"headerlink\" title=\"truncate 命令\"></a>truncate 命令</h5><p>描述:truncate命令可以将一个文件缩小或者扩展到某个给定的大小;</p>\n<ul>\n<li>如果指定文件不存在则创建。</li>\n<li>如果指定文件超出指定大小则超出的数据将丢失。</li>\n<li>如果指定文件小于指定大小则用0 补足。</li>\n</ul>\n<p>基础用法:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">用法：truncate 选项... 文件...</span><br><span class=\"line\"><span class=\"comment\">#长选项必须使用的参数对于短选项时也是必需使用的。</span></span><br><span class=\"line\">-c, --no-create\t不创建文件</span><br><span class=\"line\">-o, --io-blocks\t将SIZE 视为IO 块数而不使用字节数</span><br><span class=\"line\">-r, --reference=文件   使用此文件的大小</span><br><span class=\"line\">-s, --size=大小\t使用此大小 KB 1000，K 1024，MB 1000*1000，M 1024*1024，还有 G、T、P、E、Z、Y。</span><br><span class=\"line\">    --<span class=\"built_in\">help</span>\t\t显示此帮助信息并退出</span><br><span class=\"line\">    --version\t\t显示版本信息并退出</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#指定大小也可使用以下前缀修饰：</span></span><br><span class=\"line\"><span class=\"string\">\"+\"</span> 增加，<span class=\"string\">\"-\"</span> 减少，<span class=\"string\">\"&lt;\"</span> 至多，<span class=\"string\">\"&gt;\"</span> 至少，</span><br><span class=\"line\"><span class=\"string\">\"/\"</span> 小于等于原尺寸数字的指定数字的最小倍数，<span class=\"string\">\"%\"</span> 大于等于原尺寸数字的指定数字的最大倍数。</span><br><span class=\"line\">译者注：当输入值为m，参考值为n 时，</span><br><span class=\"line\"><span class=\"string\">\"/\"</span> 运算的数学计算式为 m / n * n；</span><br><span class=\"line\"><span class=\"string\">\"%\"</span> 运算的数学计算式为( m + n - 1 ) / n * n</span><br></pre></td></tr></table></figure></p>\n<p>注意：-r 和-s 是互斥的选项。</p>\n<p>基础实例:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#实例1.清空文件</span></span><br><span class=\"line\">truncate -s 0 /tmp/<span class=\"built_in\">test</span>  </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#实例2.设置文件大小与文件扩容</span></span><br><span class=\"line\">truncate -s +100M /tmp/<span class=\"built_in\">test</span>  </span><br><span class=\"line\">[root@initiator tmp]$ du -ah <span class=\"built_in\">test</span>  <span class=\"comment\">#显示真实文件的大小</span></span><br><span class=\"line\">0 <span class=\"built_in\">test</span></span><br><span class=\"line\">[root@initiator tmp]$ ls -alh <span class=\"built_in\">test</span> <span class=\"comment\">#显示扩容后的文件大小</span></span><br><span class=\"line\">-rw-r--r--. 1 root root 100M 4月  20 22:16 <span class=\"built_in\">test</span></span><br></pre></td></tr></table></figure></p>\n","comments":true,"excerpt":"[TOC]","categories":[{"name":"Linux命令","path":"api/categories/Linux命令.json"}],"tags":[{"name":"文件查看分割","path":"api/tags/文件查看分割.json"}]}