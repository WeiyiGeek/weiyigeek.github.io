<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="content-language" content="zh-CN"/>
    <meta name="author" content="WeiyiGeek" />
    <meta name="msvalidate.01" content="5C552FB1D885E0E11D2957EC958C8018" />
    <meta name="shenma-site-verification" content="4c655e91c76be0a93c1b6954c666c9d6_1649049085"/>
    <meta name="bytedance-verification-code" content="lKs4FqwCHSJ3A/c5tT7X" />
    <meta name="sogou_site_verification" content="OC65iET6Bk" />
    
    <title>ğŸŒ ServletåŸºç¡€å…¥é—¨å­¦ä¹ 1|WeiyiGeek Blog|å”¯ä¸€æå®¢Geek-ITç½‘ç»œå®‰å…¨è¿ç»´å¼€å‘æŠ€æœ¯çŸ¥è¯†åˆ†äº«-åšå®¢ç«™ç‚¹</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    
    <meta name="keywords" content="Servlet">
    <meta name="Description" content="WeiyiGeek-å”¯ä¸€æå®¢åšå®¢ç«™ç‚¹,å…³æ³¨äºç½‘ç»œå®‰å…¨è¿ç»´,Webå®‰å…¨å¼€å‘,IOTç‰©è”ç½‘å®‰å…¨å¼€å‘,åº”ç”¨å¼€å‘,åˆ†äº«æŠ€æœ¯å­¦ä¹ çŸ¥è¯†ä¸å…¥å‘è§£å†³,æå‡ç½‘ç»œå®‰å…¨æŠ€æœ¯ä¸è‡ªèº«æŠ€æœ¯èƒ½åŠ›,ç«‹å¿—ç»´æŠ¤å¤§ä¼—ç½‘ç»œå®‰å…¨ä¸ºå·±ä»»,åšä¸€ä¸ªå¯¹å›½å®¶æœ‰ç”¨çš„äºº,ä¸ºå®ç°ä¸­åæ°‘æ—ä¼Ÿå¤§å¤å…´çš„ä¸­å›½æ¢¦ä¸æ‡ˆå¥‹æ–—">
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="/css/jquery/3.5.2-jquery.fancybox.min.css?v=1.6.6" />
    <link rel="stylesheet" href="/css/style.css?v=1.6.6">
    <!--  -->
     <script type="text/javascript" src="/js/custom/articlecost.js?v=1.6.6"></script> 
    <link rel="stylesheet" href="/css/third-party/gitalk.css?v=1.6.6"> 
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9134434519967436" crossorigin="anonymous"></script>    
    <script type="text/javascript">
        // Data Center
        var DC = {
          reward:	true,
          lv: JSON.parse('{"enable":false,"app_id":null,"app_key":null,"icon":true}'),
          v: JSON.parse('{"enable":false,"appid":null,"appkey":null,"notify":true,"verify":true,"placeholder":"give me some sugers plz...","avatar":"wavatar"}')
        };
    </script>
    <script type="text/javascript">window.lazyScripts=[];</script>
<meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="WeiyiGeek Blog" type="application/atom+xml">
</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="">
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap">
      
      <img src="/img/brand.jpg" class="brand-bg" alt="WeiyiGeek-backgroud">
      
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg" alt="WeiyiGeek-å¤´åƒ">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">WeiyiGeek</h5>
          <a href="mailto:master@weiyigeek.top" title="master@weiyigeek.top" class="mail">
            <span>m</span><span>a</span><span>s</span><span>t</span><span>e</span><span>r</span><span>@</span><span>w</span><span>e</span><span>i</span><span>y</span><span>i</span><span>g</span><span>e</span><span>e</span><span>k</span><span>.</span><span>t</span><span>o</span><span>p</span>
          </a>
        </hgroup>
        
        <ul class="menu-link">
          
              <li>
                <a href="https://weiyigeek.top/img/wechat-search.png" target="_blank">
                  <i class="icon icon-lg icon-wechat"></i>
                </a>
              </li>
            
              <li>
                <a href="https://github.com/weiyigeek" target="_blank">
                  <i class="icon icon-lg icon-github"></i>
                </a>
              </li>
            
              <li>
                <a href="https://t.me/WeiyiGeek" target="_blank">
                  <i class="icon icon-lg icon-telegram"></i>
                </a>
              </li>
            
              <li>
                <a href="https://twitter.com/WeiyiGeek" target="_blank">
                  <i class="icon icon-lg icon-twitter"></i>
                </a>
              </li>
            
              <li>
                <a href="https://weibo.com/615643678" target="_blank">
                  <i class="icon icon-lg icon-weibo"></i>
                </a>
              </li>
            
        </ul>
        
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                é¦–é¡µ
              </a>
            </li>
        
            <li class="">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                æ–‡ç« åˆ†ç±»
              </a>
            </li>
        
            <li class="">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                æ–‡ç« æ ‡ç­¾
              </a>
            </li>
        
            <li class="">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                æ–‡ç« å½’æ¡£
              </a>
            </li>
        
            <li class="">
              <a href="/2018/1-1-1.html"  >
                <i class="icon icon-lg icon-mortar-board"></i>
                å­¦ä¹ ä¹‹è·¯
              </a>
            </li>
        
            <li class="">
              <a href="/books"  >
                <i class="icon icon-lg icon-book"></i>
                å­¦ä¹ ä¹¦ç±
              </a>
            </li>
        
            <li class="">
              <a href="/about"  >
                <i class="icon icon-lg icon-user"></i>
                å…³äºä½œè€…
              </a>
            </li>
        
            <li class="">
              <a href="/links"  >
                <i class="icon icon-lg icon-link"></i>
                ç«™ç‚¹å¯¼èˆª
              </a>
            </li>
        
            <li class="">
              <a href="/img/share-wechat.jpg" target="_blank" >
                <i class="icon icon-lg icon-wechat"></i>
                å…¬ä¼—è´¦å·
              </a>
            </li>
        
            <li class="">
              <a href="https://space.bilibili.com/385802642" target="_blank" >
                <i class="icon icon-lg icon-youtube-play"></i>
                å“”å“©å“”å“©
              </a>
            </li>
        
            <li class="">
              <a href="/img/video-account.jpg" target="_blank" >
                <i class="icon icon-lg icon-video-camera"></i>
                è§†é¢‘å·
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row clearfix">
        <a href="javascript:;" class="header-icon pull-left waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">
            <span>ServletåŸºç¡€å…¥é—¨å­¦ä¹ 1</span>
            
        </div>

        
        <a href="javascript:;" id="site_search_btn" class="header-icon pull-right waves-effect waves-circle waves-light">
            <i class="icon icon-lg icon-search"></i>
        </a>
        

        
            <a href="/atom.xml" class="header-icon pull-right waves-effect waves-circle waves-light">
                <i class="icon icon-lg icon-rss"></i>
            </a>
        
    </div>
</header>
<header class="content-header post-header">
    <img src="/img/banner.jpg" class="header-bg" alt="æ–‡ç« å¤´éƒ¨èƒŒæ™¯">
    <div class="container fade-scale">
        <h1 class="title">ServletåŸºç¡€å…¥é—¨å­¦ä¹ 1</h1>
        <h5 class="subtitle">
            
                <time datetime="2020-02-11T05:34:30.000Z" itemprop="datePublished" class="page-time">
  2020-02-11
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Java/">Java</a></li></ul>


            
        </h5>
        
    </div>
    

</header>

<div id="site_search">
    <div class="search-title clearfix">
        <span class="pull-left">
          <i class="icon icon-lg icon-search"></i>
        </span>
        <input type="text" id="local-search-input" name="q" results="0" placeholder="search my blog..." class="form-control pull-left"/>
        <a href="javascript:;" class="close pull-right waves-effect waves-circle waves-light">
          <i class="icon icon-lg icon-close"></i>
        </a>
    </div>
    <div id="local-search-result"></div>
</div>


<div class="container body-wrap" style="display: none;">
  <article id="post-ç¼–ç¨‹ä¸–ç•Œ/JavaWeb/1.Servlet/ServletåŸºç¡€å…¥é—¨å­¦ä¹ 1"
  class="post-article article-type-post" itemprop="blogPost">
    <div class="post-card">
        <h1 class="post-card-title">ServletåŸºç¡€å…¥é—¨å­¦ä¹ 1</h1>
        <div class="post-meta">
            <time class="post-time" title="2020-02-11 13:34:30" datetime="2020-02-11T05:34:30.000Z"  itemprop="datePublished">2020-02-11</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Java/">Java</a></li></ul>



            

            


            
        </div>
        <span class="post-href" style="display: none;">|</span> 
        <div class="post-content" id="post-content" itemprop="postContent">
            
            <p>[TOC]</p>
<a id="more"></a>
<h4 id="0x01-å¿«é€Ÿå…¥é—¨"><a href="#0x01-å¿«é€Ÿå…¥é—¨" class="headerlink" title="0x01 å¿«é€Ÿå…¥é—¨"></a>0x01 å¿«é€Ÿå…¥é—¨</h4><p>æè¿°:åœ¨è¿›è¡ŒJavaWebå¼€å‘å­¦ä¹ çš„æ—¶å€™å¿…ä¸å¯å°‘å°±æ˜¯Tomcat Web å®¹å™¨æœåŠ¡å™¨ï¼Œå› ä¸ºå®ƒå¼€æºå…è´¹ã€ä¾¿äºä¸Šæ‰‹ï¼Œå¹¶ä¸”ä½¿ç”¨å®‰è£…ç®€å•ã€‚</p>
<p><strong>ç®€å•ä»‹ç»:</strong><br>Tomcatæ˜¯ä¸€æ¬¾å¼€æºè½¯ä»¶ã€å…è´¹çš„Webå®¹å™¨è½¯ä»¶ï¼Œç”±ApacheåŸºé‡‘ä¼šæ——ä¸‹é‡‡ç”¨JAVAè¿›è¡Œå¼€å‘ï¼ŒTomcatæ˜¯ä¸€æ¬¾Webå®¹å™¨è‡ªèº«ä¸èƒ½ä½œä¸ºè´Ÿè½½å‡è¡¡çš„è½¯ä»¶;<br>ä¸»è¦åº”ç”¨äºå‘å¸ƒç½‘é¡µä»£ç ï¼Œæä¾›ç½‘é¡µä¿¡æ¯æœåŠ¡ï¼Œç”¨æˆ·é€šè¿‡æµè§ˆå¯ä»¥å®ç°ç•Œé¢çš„è®¿é—®ï¼›Tomcaté»˜è®¤å¯ä»¥å¤„ç†é™æ€çš„ç½‘é¡µï¼Œä¹Ÿå¯ä»¥å¤„ç†åŠ¨æ€çš„ç½‘é¡µï¼›</p>
<p>åœ¨è¿™é‡Œæˆ‘ä»¬å°±è¯¦ç»†æ¼”ç¤ºå®‰è£…æµç¨‹äº†ï¼Œåœ¨æˆ‘å…¶ä»–çš„Tomcatè¿ç»´æ–‡ç« ä¸­æœ‰å®ƒçš„è¯¦ç»†ä»¥åŠä¼˜åŒ–é…ç½®ç­‰.</p>
<p>å­¦ä¹ ç¯å¢ƒå‡†å¤‡:</p>
<ul>
<li>Javaçš„JDK8ï¼ˆå¹¶ä¸”é…ç½®å¥½ç¯å¢ƒå˜é‡ï¼‰</li>
<li>Tomcat 7.0.100 : <a href="http://tomcat.apache.org/download-70.cgi" target="_blank" rel="noopener">http://tomcat.apache.org/download-70.cgi</a></li>
<li>Eclipse IDE</li>
</ul>
<figure class="image-box">
                <a rel=ServletåŸºç¡€å…¥é—¨å­¦ä¹ 1 href="https://img.weiyigeek.top/2020/1/20200215222021.png" target="_blank" title="WeiyiGeek.Tomcat" data-fancybox="images"><img src="https://img.weiyigeek.top/2020/1/20200215222021.png" alt="WeiyiGeek.Tomcat" title="" class=""></a>
                <p>WeiyiGeek.Tomcat</p>
            </figure>
<p><strong>Tomcat 7.0ç›®å½•ç»“æ„è¯´æ˜</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">* bin:Tomcat å¯ç”¨binaryä»¥åŠä¸€äº›å¯åŠ¨jaråŒ…</span><br><span class="line">* conf:Tomcaté…ç½®æ–‡æ¡£</span><br><span class="line">* lib:Tomcatè¿è¡Œæ‰€ä¾èµ–çš„jaræ–‡ä»¶</span><br><span class="line">* logs:è¿è¡Œè¿‡ç¨‹ä¸­çš„æ—¥å¿—æ–‡ä»¶</span><br><span class="line">* temp:ä¸´æ—¶æ–‡ä»¶</span><br><span class="line">* webapps:é¡¹ç›®å‘å¸ƒçš„ç›®å½•ï¼Œä»¥åŠwarè§£å‹çš„ç›®å½•;</span><br><span class="line">* work:JSPbuildæˆä¸ºjavaæ–‡ä»¶çš„ä¸´æ—¶å­˜æ”¾åœ°</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h4 id="0x02-é¡¹ç›®å‘å¸ƒ"><a href="#0x02-é¡¹ç›®å‘å¸ƒ" class="headerlink" title="0x02 é¡¹ç›®å‘å¸ƒ"></a>0x02 é¡¹ç›®å‘å¸ƒ</h4><p>æè¿°:å¦‚ä½•å°†é¡¹ç›®å‘å¸ƒåˆ°Tomcatä¸­è¿è¡Œ?</p>
<p><strong>æ–¹å¼1:ç§»åŠ¨é¡¹ç›®åˆ°Webappsç›®å½•ï¼ˆä½¿ç”¨è¾ƒå¤šï¼‰</strong><br>æè¿°:å†·éƒ¨ç½²å¯ä»¥ç›´æ¥å°†é¡¹ç›®æ–‡ä»¶å¤¹æ‹–å…¥Webappsç›®å½•ä¹‹ä¸­å¹¶éœ€è¦é‡æ–°å¯åŠ¨Tomcat;<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Tomcatæ§åˆ¶å°æç¤º</span></span><br><span class="line"><span class="comment"># ä¿¡æ¯: æŠŠweb åº”ç”¨ç¨‹åºéƒ¨ç½²åˆ°ç›®å½• [W:\apache-tomcat-7.0.100\webapps\Demo1]</span></span><br><span class="line"><span class="comment"># äºŒæœˆ 15, 2020 10:40:11 ä¸‹åˆ org.apache.catalina.util.SessionIdGeneratorBase crea</span></span><br><span class="line"><span class="comment"># eSecureRandom</span></span><br></pre></td></tr></table></figure><br><figure class="image-box">
                <a rel=ServletåŸºç¡€å…¥é—¨å­¦ä¹ 1 href="https://img.weiyigeek.top/2020/1/20200215224230.png" target="_blank" title="WeiyiGeek.æ–¹å¼1" data-fancybox="images"><img src="https://img.weiyigeek.top/2020/1/20200215224230.png" alt="WeiyiGeek.æ–¹å¼1" title="" class=""></a>
                <p>WeiyiGeek.æ–¹å¼1</p>
            </figure></p>
<p><br></p>
<p><strong>æ–¹å¼2:Hosté…ç½®è™šæ‹Ÿè·¯å¾„</strong><br>æè¿°:é€šè¿‡åœ¨Conf/Server.xmlé…ç½®æ–‡ä»¶ä¸­HOSTå…ƒç´ æ¥åœ°æ·»åŠ ä¸Š<code>&lt;Content&gt;</code>å±æ€§ 130 è¡Œå·¦å³;è¯¥æ–¹å¼çš„åŒºåˆ«ä¸åŒäºç¬¬ä¸€ç§æ˜¯åœ¨äºå®ƒä¸ä¼šåœ¨Tomcatæ§åˆ¶ç»ˆç«¯æ—¥å¿—ä¸­æ˜¾ç¤ºã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">Host</span> <span class="attr">name</span>=<span class="string">"localhost"</span>  <span class="attr">appBase</span>=<span class="string">"webapps"</span> <span class="attr">unpackWARs</span>=<span class="string">"true"</span> <span class="attr">autoDeploy</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Context</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">docBase</span>=<span class="string">"D:\apache-tomcat-7.0.100\webapps\Demo1"</span>  </span></span><br><span class="line"><span class="tag">    <span class="attr">path</span>=<span class="string">"/Demo2"</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">override</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Context</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Valve</span> <span class="attr">className</span>=<span class="string">"org.apache.catalina.valves.AccessLogValve"</span> <span class="attr">directory</span>=<span class="string">"logs"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">prefix</span>=<span class="string">"localhost_access_log."</span> <span class="attr">suffix</span>=<span class="string">".txt"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">pattern</span>=<span class="string">"%h %l %u %t &amp;quot;%r&amp;quot; %s %b"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Host</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">å±æ€§è§£é‡Š:</span></span><br><span class="line"><span class="comment">1.docBase=å­˜æ”¾webåº”ç”¨ç¨‹åºçš„æ–‡æ¡£åŸºç¡€(ä¹Ÿç§°ä¸ºä¸Šä¸‹æ–‡æ ¹)ç›®å½•æˆ–è€…webåº”ç”¨ç¨‹åºå­˜æ¡£æ–‡ä»¶(å¦‚æœæ­¤webåº”ç”¨ç¨‹åºç›´æ¥ä»WARæ–‡ä»¶æ‰§è¡Œ)ã€‚</span></span><br><span class="line"><span class="comment">2.path=ç½‘é¡µè®¿é—®çš„è·¯å¾„</span></span><br><span class="line"><span class="comment">3.override=è®¾ç½®ä¸ºtrueå¯ä»¥å¿½ç•¥å…¨å±€æˆ–ä¸»æœºé»˜è®¤ä¸Šä¸‹æ–‡ä¸­çš„ä»»ä½•è®¾ç½®ã€‚é»˜è®¤æƒ…å†µä¸‹å°†ä½¿ç”¨é»˜è®¤ä¸Šä¸‹æ–‡çš„è®¾ç½®ï¼Œä½†æ˜¯å¯èƒ½ä¼šè¢«ä¸Šä¸‹æ–‡çš„è®¾ç½®æ˜¾å¼åœ°è¦†ç›–ç›¸åŒçš„å±æ€§ã€‚ </span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure>
<p>å‚è€ƒåœ°å€:<a href="http://127.0.0.1:8080/docs/config/context.html#Defining_a_context" target="_blank" rel="noopener">http://127.0.0.1:8080/docs/config/context.html#Defining_a_context</a><br>è®¿é—®åœ°å€æ•ˆæœå¦‚ä¸Šé¢å›¾æ˜¾ç¤ºä¸€è‡´:<a href="http://127.0.0.1:8080/Demo2/index.xml" target="_blank" rel="noopener">http://127.0.0.1:8080/Demo2/index.xml</a></p>
<p><br></p>
<p><strong>æ–¹å¼3:Engineé…ç½®è™šæ‹Ÿè·¯å¾„</strong><br>æè¿°:ä¸æ–¹å¼2å¤§è‡´ç›¸åŒä¸åŒçš„æ˜¯è¿›è¡ŒåŠ è½½çš„ç›®å½•ä¸åŒè€Œå·²ä¾èµ–äºEngineè¿›è¡Œå•ç‹¬çš„ä¸Šä¸‹æ–‡å…ƒç´ å¯å°†Contextå…ƒç´ å¤åˆ¶åˆ°å¼•æ“æ–‡ä»¶ä¸­å³å¯;<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#$CATALINA_BASE/conf/[enginename]/[hostname]/</span></span><br><span class="line">Server.xml</span><br><span class="line">&lt;Engine name=<span class="string">"Catalina"</span> defaultHost=<span class="string">"localhost"</span>&gt;</span><br><span class="line">..</span><br><span class="line">&lt;/Engome&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">#ç”±æ­¤å¯çŸ¥è·¯å¾„ä¸º Conf/Catalina/localhost å¹¶åœ¨ç›®å½•ä¸‹å»ºç«‹ä¸€ä¸ªDemo3.xml (è®¿é—®æ—¶å€™ä¾¿ä»¥/Demo3ä½œä¸ºè®¿é—®è·¯å¾„)</span></span><br><span class="line"><span class="comment">#å³D:\apache-tomcat-7.0.100\conf\Catalina\localhost\Demo3.XMLæ³¨æ„docBaseæŒ‡å‘Webappsä¸­ç›®å½•ä¼šæŠ¥é”™</span></span><br><span class="line">&lt;?xml version=<span class="string">'1.0'</span> encoding=<span class="string">'utf-8'</span>?&gt;</span><br><span class="line">&lt;Context docBase=<span class="string">"D:\xampp\htdocs"</span> override=<span class="string">"true"</span>&gt;&lt;/Context&gt;</span><br></pre></td></tr></table></figure><br><figure class="image-box">
                <a rel=ServletåŸºç¡€å…¥é—¨å­¦ä¹ 1 href="https://img.weiyigeek.top/2020/1/20200215233656.png" target="_blank" title="WeiyiGeek.Engineé…ç½®è™šæ‹Ÿè·¯å¾„" data-fancybox="images"><img src="https://img.weiyigeek.top/2020/1/20200215233656.png" alt="WeiyiGeek.Engineé…ç½®è™šæ‹Ÿè·¯å¾„" title="" class=""></a>
                <p>WeiyiGeek.Engineé…ç½®è™šæ‹Ÿè·¯å¾„</p>
            </figure></p>
<p><br></p>
<p>æ ¹æ®ä¸Šé¢çš„åˆ†æå¯ä»¥æ€»ç»“å‡ºTomcatä¸»è¦åŒ…å«äº† 2 ä¸ªæ ¸å¿ƒç»„ä»¶ï¼š<code>è¿æ¥å™¨(Connector)</code>å’Œ<code>å®¹å™¨(Container)</code>,</p>
<ul>
<li>1.ä¸€ä¸ªTomcatæ˜¯ä¸€ä¸ªServer,</li>
<li>2.è€Œä¸€ä¸ªServerä¸‹æœ‰å¤šä¸ªServiceï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬éƒ¨ç½²çš„å¤šä¸ªåº”ç”¨ï¼Œä¸€ä¸ªåº”ç”¨ä¸‹æœ‰å¤šä¸ªè¿æ¥å™¨(Connector)å’Œä¸€ä¸ªå®¹å™¨ï¼ˆContainerï¼‰å®¹å™¨ä¸‹æœ‰å¤šä¸ªå­å®¹å™¨;</li>
<li>3.Engineä¸‹æœ‰å¤šä¸ªHostå­å®¹å™¨ï¼ŒHostä¸‹æœ‰å¤šä¸ªContextå­å®¹å™¨ï¼ŒContextä¸‹æœ‰å¤šä¸ªWrapperå­å®¹å™¨ã€‚</li>
</ul>
<figure class="image-box">
                <a rel=ServletåŸºç¡€å…¥é—¨å­¦ä¹ 1 href="https://img.weiyigeek.top/2020/1/20200401161035.png" target="_blank" title="WeiyiGeek." data-fancybox="images"><img src="https://img.weiyigeek.top/2020/1/20200401161035.png" alt="WeiyiGeek." title="" class=""></a>
                <p>WeiyiGeek.</p>
            </figure>
<hr>
<h4 id="0x03-é¡¹ç›®æ‰“åŒ…"><a href="#0x03-é¡¹ç›®æ‰“åŒ…" class="headerlink" title="0x03 é¡¹ç›®æ‰“åŒ…"></a>0x03 é¡¹ç›®æ‰“åŒ…</h4><p>æè¿°:åœ¨å®é™…çš„å¼€å‘ä¸­æˆ‘ä»¬éœ€è¦å°†æˆ‘ä»¬çš„webå·¥ç¨‹æ‰“å‹æˆä¸ºwaråŒ…æˆ–è€…jaråŒ…è¿›è¡Œtomcatéƒ¨ç½²æˆ–è€…åœ¨jvmè™šæ‹Ÿæœºä¸­è¿è¡Œï¼›</p>
<p>é—®ï¼šå¦‚ä½•å°†é¡¹ç›®æ‰“åŒ…æˆä¸ºjar?</p>
<ul>
<li>1.å³é”®å·¥ç¨‹é€‰æ‹©<code>Export</code>é€‰æ‹©otheråœ¨javaç›®å½•ä¸‹é€‰æ‹©jarï¼›</li>
</ul>
<figure class="image-box">
                <a rel=ServletåŸºç¡€å…¥é—¨å­¦ä¹ 1 href="https://img.weiyigeek.top/2020/1/20200217130641.png" target="_blank" title="WeiyiGeek." data-fancybox="images"><img src="https://img.weiyigeek.top/2020/1/20200217130641.png" alt="WeiyiGeek." title="" class=""></a>
                <p>WeiyiGeek.</p>
            </figure>
<ul>
<li>2.è¿›è¡Œå¯¼å‡ºjaré…ç½®ä¸€èˆ¬é»˜è®¤å°±è¡Œï¼›</li>
</ul>
<figure class="image-box">
                <a rel=ServletåŸºç¡€å…¥é—¨å­¦ä¹ 1 href="https://img.weiyigeek.top/2020/1/20200217130827.png" target="_blank" title="WeiyiGeek." data-fancybox="images"><img src="https://img.weiyigeek.top/2020/1/20200217130827.png" alt="WeiyiGeek." title="" class=""></a>
                <p>WeiyiGeek.</p>
            </figure>
<p><br></p>
<h4 id="0x04-ServletåŸºç¡€"><a href="#0x04-ServletåŸºç¡€" class="headerlink" title="0x04 ServletåŸºç¡€"></a>0x04 ServletåŸºç¡€</h4><p>æè¿°:Servlet<code>[ /ËˆsÉœËvlÉªt/ ]</code> API æ˜¯è¿è¡Œåœ¨Tomcat WebæœåŠ¡å™¨å®¹å™¨ä¸­çš„å°å‹Javaç¨‹åº<code>ä¼ºæœå°ç¨‹å¼ï¼›å°æœåŠ¡ç¨‹</code>ï¼Œé€šè¿‡HTTP(è¶…æ–‡æœ¬ä¼ è¾“åè®®)æ¥æ”¶å’Œå“åº”æ¥è‡ªWebå®¢æˆ·ç«¯çš„è¯·æ±‚;æ›´å¤šçš„æ˜¯é…åˆåŠ¨æ€èµ„æºåšé¡¹ç›®ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨åˆ°Servletåªä¸è¿‡åœ¨Tomcaté‡Œé¢å·²ç»å®šä¹‰äº†ä¸€ä¸ªDefaultServlet;</p>
<p><br></p>
<h5 id="1-Hello-World"><a href="#1-Hello-World" class="headerlink" title="1.Hello World"></a>1.Hello World</h5><p>æè¿°:åœ¨ä¸Šé¢Tomcatå®‰è£…å¥½åå®ƒç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªç¤ºä¾‹é¡µé¢ï¼Œè¿›è¡Œä½¿ç”¨å’Œå­¦ä¹  Servlet ï¼ˆ Servlet Examples with Code ï¼‰ ï¼›<br>åœ°å€: <a href="http://127.0.0.1:8080/examples/servlets/" target="_blank" rel="noopener">http://127.0.0.1:8080/examples/servlets/</a></p>
<p><em>é™æ€é¡¹ç›®åˆ›å»ºæµç¨‹</em>:</p>
<ul>
<li>1.é‡‡ç”¨Eclipseå»ºç«‹ä¸€ä¸ªWebå·¥ç¨‹,é¦–å…ˆåˆ‡æ¢åˆ° <code>Java EE</code> è§†å›¾ï¼Œç„¶åé€‰æ‹©Serveré€‰é¡¹å¡å¹¶ä¸”é…ç½®å¥½TomcatæœåŠ¡å™¨;</li>
</ul>
<figure class="image-box">
                <a rel=ServletåŸºç¡€å…¥é—¨å­¦ä¹ 1 href="https://img.weiyigeek.top/2020/1/20200216213835.png" target="_blank" title="WeiyiGeek.Step1" data-fancybox="images"><img src="https://img.weiyigeek.top/2020/1/20200216213835.png" alt="WeiyiGeek.Step1" title="" class=""></a>
                <p>WeiyiGeek.Step1</p>
            </figure>
<ul>
<li>2.é€‰æ‹©å®Œæˆçš„Tomcat 7 Server è¿›è¡Œæœ€åä¸€æ­¥é…ç½®Webé¡¹ç›®å­˜æ”¾åˆ°æ–°å»ºç«‹çš„wtpWebappsç›®å½•ä¸­ä¿å­˜å³å¯,å³<code>D:\apache-tomcat-7.0.100\wtpwebapps</code>;</li>
</ul>
<figure class="image-box">
                <a rel=ServletåŸºç¡€å…¥é—¨å­¦ä¹ 1 href="https://img.weiyigeek.top/2020/1/20200216214042.png" target="_blank" title="WeiyiGeek.Step2" data-fancybox="images"><img src="https://img.weiyigeek.top/2020/1/20200216214042.png" alt="WeiyiGeek.Step2" title="" class=""></a>
                <p>WeiyiGeek.Step2</p>
            </figure>
<ul>
<li>3.æ–°å»ºä¸€ä¸ªåŠ¨æ€çš„Webå·¥ç¨‹(Dynamic Web Project),è®¾ç½®é¡¹ç›®åç§°ä¸ºHelloWorldï¼›</li>
</ul>
<figure class="image-box">
                <a rel=ServletåŸºç¡€å…¥é—¨å­¦ä¹ 1 href="https://img.weiyigeek.top/2020/1/20200216214346.png" target="_blank" title="WeiyiGeek.Step3" data-fancybox="images"><img src="https://img.weiyigeek.top/2020/1/20200216214346.png" alt="WeiyiGeek.Step3" title="" class=""></a>
                <p>WeiyiGeek.Step3</p>
            </figure>
<ul>
<li>4.æµ‹è¯•ä¸€ä¸ªWebå·¥ç¨‹,åœ¨WebContentç›®å½•ä¸­å»ºç«‹ä¸€ä¸ªé™æ€èµ„æºindex.htmlæ¥æµ‹è¯•åº”ç”¨æœåŠ¡å™¨ï¼Œé€‰æ‹©é¡¹ç›®è¿›è¡ŒRun on Serverä¹Ÿå¯ä»¥å¿«æ·é”®<code>ALT+SHIFT+X,R</code>,ç¬¬ä¸€æ¬¡è¿è¡ŒæŒ‰ç…§æç¤ºå³å¯å‘å¸ƒï¼›<br>è®¿é—®åœ°å€:<a href="http://localhost:8080/HelloWorld/" target="_blank" rel="noopener">http://localhost:8080/HelloWorld/</a></li>
</ul>
<figure class="image-box">
                <a rel=ServletåŸºç¡€å…¥é—¨å­¦ä¹ 1 href="https://img.weiyigeek.top/2020/1/20200216215332.png" target="_blank" title="WeiyiGeek.Step4" data-fancybox="images"><img src="https://img.weiyigeek.top/2020/1/20200216215332.png" alt="WeiyiGeek.Step4" title="" class=""></a>
                <p>WeiyiGeek.Step4</p>
            </figure>
<p>æ³¨é‡Š:å®é™…ä¸Šæ˜¯é‡‡ç”¨ä¸Šé¢éƒ¨ç½²çš„ç¬¬äºŒç§æ–¹æ³•,åœ¨Server.xmlä¸­æ·»åŠ äº†ä¸€å¥<code>&lt;Context docBase=&quot;D:\apache-tomcat-7.0.100\wtpwebapps\HelloWorld&quot; path=&quot;/HelloWorld&quot; reloadable=&quot;true&quot; source=&quot;org.eclipse.jst.jee.server:HelloWorld&quot;/&gt;</code></p>
<p><br></p>
<p><em>Serveleté¡¹ç›®åˆ›å»ºæµç¨‹</em>:</p>
<ul>
<li>5.åœ¨é¡¹ç›®çš„JAVA Resourceä¸­çš„srcä¸­åˆ›å»ºä¸€ä¸ªæµ‹è¯•Servletçš„pakeageï¼Œå¹¶ä¸”å»ºç«‹ä¸€ä¸ªjavaæ–‡ä»¶å®ç°Servlet;</li>
</ul>
<p>/HelloWorld/src/cn/weiyigeek/servlet/HelloWorld.java<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.weiyigeek.servlet;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.Servlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletConfig;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Administrator</span></span><br><span class="line"><span class="comment"> *  è¯´æ˜:æµ‹è¯•éªŒè¯Servlet</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// 1.å®ç°Servletæ¥å£</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> <span class="keyword">implements</span> <span class="title">Servlet</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//2.é‡å†™é‡Œé¢çš„æ–¹æ³•</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest arg0, ServletResponse arg1)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">    System.out.println(<span class="string">"&lt;p style='color:red'&gt;Hello World, Servlet!&lt;/p&gt;"</span>);</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">    ..... </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="image-box">
                <a rel=ServletåŸºç¡€å…¥é—¨å­¦ä¹ 1 href="https://img.weiyigeek.top/2020/1/20200216221656.png" target="_blank" title="WeiyiGeek.Step5" data-fancybox="images"><img src="https://img.weiyigeek.top/2020/1/20200216221656.png" alt="WeiyiGeek.Step5" title="" class=""></a>
                <p>WeiyiGeek.Step5</p>
            </figure>
<ul>
<li>6.é…ç½®Servleté¡¹ç›®åœ¨<code>WebContent &gt; WEB-INF &gt; web.xml</code>æ·»åŠ Servletçš„åç§°ä»¥åŠç±».åŒ…åç§°<code>cn.weiyigeek.servlet.HelloWorld</code>,ç„¶åæ·»åŠ æ³¨å†Œä¸€ä¸ªServletæ˜ å°„urlè®¿é—®è·¯å¾„ï¼Œé‡æ–°å‘å¸ƒé¡¹ç›®å³å¯;<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xmlns</span>=<span class="string">"http://java.sun.com/xml/ns/javaee"</span> <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"</span> <span class="attr">id</span>=<span class="string">"WebApp_ID"</span> <span class="attr">version</span>=<span class="string">"2.5"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>HelloWorld<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- é»˜è®¤çš„é¦–é¡µåœ°å€ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.html<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.htm<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>default.html<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>default.htm<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>default.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 1.å‘ŠçŸ¥Tomcatæˆ‘ä»¬åº”ç”¨ä¸­æœ‰ä¸ªServlet,åå­—å«åšHelloHelloWorldï¼Œä»¥åŠåŒ….ç±»çš„è·¯å¾„åç§°ï¼› --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>HelloWorld<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>cn.weiyigeek.servlet.HelloWorld<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 2.æ³¨å†ŒServletæ˜ å°„ä»¥åŠURLåŒ¹é…è®¿é—®çš„è·¯å¾„ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>HelloWorld<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/hello<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<figure class="image-box">
                <a rel=ServletåŸºç¡€å…¥é—¨å­¦ä¹ 1 href="https://img.weiyigeek.top/2020/1/20200216222850.png" target="_blank" title="WeiyiGeek.Step6" data-fancybox="images"><img src="https://img.weiyigeek.top/2020/1/20200216222850.png" alt="WeiyiGeek.Step6" title="" class=""></a>
                <p>WeiyiGeek.Step6</p>
            </figure>
<p><em>å“åº”æµç¨‹:</em><br>(1) å½“ç”¨æˆ·è®¿é—®<code>http://127.0.0.1:8080/HelloWorld/hello</code>æ—¶å€™ï¼ŒåŒ¹é…åˆ°äº†æ³¨å†Œçš„Servletæ˜ å°„çš„urlè·¯å¾„ï¼Œåå‘æ‰¾åˆ°servlet-nameåº”ç”¨åç§°<br>(2) å†ä»Servletåº”ç”¨ä¸­æŸ¥è¯¢å‡ºè¯¥servlet nameåç§°çš„åº”ç”¨ï¼Œå¹¶åå‘æ‰¾åˆ°<code>å…¶åŒ…å.ç±»</code>åç§°;<br>(3) ç¼–è¯‘å¹¶ä¸”åˆ›å»º<code>cn.weiyigeek.servlet.HelloWorld</code>è¯¥ç±»çš„å®ä¾‹ï¼Œç„¶åTomcaté€šè¿‡Java VMè™šæ‹Ÿæœºè¿è¡Œå…¶æ‰€äº§ç”Ÿçš„å­—èŠ‚ç æ–‡ä»¶ï¼›<br>(4) ç»§è€Œæ‰§è¡Œè¯¥Servletä¸­çš„servicesæ–¹ï¼Œå¹¶ä¸”åé¦ˆè¾“å‡ºåˆ°æˆ‘ä»¬çš„æ§åˆ¶å°ä¹‹ä¸­;</p>
<p><br></p>
<h5 id="2-HttpServlet"><a href="#2-HttpServlet" class="headerlink" title="2.HttpServlet"></a>2.HttpServlet</h5><p>æè¿°:åœ¨Eclipseä¸­é€‰æ‹©æ¥å£åç§°æŒ‰<code>CTRL+T</code>é”®ï¼Œæ˜¾ç¤ºå…¶ç»§æ‰¿å±‚çº§å·²ç»å®ç°äº†Servletæ¥å£çš„ä¸€äº›é€šç”¨å†™æ³•ï¼Œæ¥é¿å…é‡å¤é‡å†™Servletä¸­çš„æ–¹æ³•;<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Servlet æ¥å£ -&gt; GenericServlet -&gt; HttpServlent (ç”¨äºå¤„ç†HTTPçš„è¯·)</span><br></pre></td></tr></table></figure><br><figure class="image-box">
                <a rel=ServletåŸºç¡€å…¥é—¨å­¦ä¹ 1 href="https://img.weiyigeek.top/2020/1/20200216224307.png" target="_blank" title="WeiyiGeek.é€šç”¨å†™æ³•" data-fancybox="images"><img src="https://img.weiyigeek.top/2020/1/20200216224307.png" alt="WeiyiGeek.é€šç”¨å†™æ³•" title="" class=""></a>
                <p>WeiyiGeek.é€šç”¨å†™æ³•</p>
            </figure></p>
<p>æˆ‘ä»¬å‚ç…§Tomcatç»™æˆ‘ä»¬æä¾›çš„helloworld.htmlç¤ºä¾‹æ–‡æ¡£è¿›è¡Œå®ç°,åœ¨ä¸Šé¢çš„åŸºç¡€ä¹‹ä¸Šæ·»åŠ ä¸€ä¸ªæ–°çš„classæ–‡ä»¶ï¼Œè¿›è¡Œç»§æ‰¿HttpServletä»¥åŠå¤ä¹ doGetå’ŒdoPostæ–¹æ³•;</p>
<p>åŸºç¡€ç¤ºä¾‹:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// cn.weiyigeek.servlet.HttpHelloWorld</span></span><br><span class="line"><span class="keyword">package</span> cn.weiyigeek.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Administrator</span></span><br><span class="line"><span class="comment"> * è¯´æ˜ï¼šå®ç° Generialé€šç”¨httpServetç»§æ‰¿çš„å¤å†™</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpHelloWorld</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//1.getè¯·æ±‚</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">//è®¾ç½®å“åº”æ–‡æœ¬å†…å®¹ç±»å‹</span></span><br><span class="line">    resp.setContentType(<span class="string">"text/html"</span>);</span><br><span class="line">        <span class="comment">//å®ä¾‹åŒ–å¹¶è®¾ç½®å“åº”æ–‡æœ¬å†…å®¹</span></span><br><span class="line">    PrintWriter out = resp.getWriter();</span><br><span class="line">    out.print(<span class="string">"&lt;!DOCTYPE HTML&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;HttpServlet Hello&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;Hello World,HttpServlet!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//2.postè¯·æ±‚</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.doPost(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Web.xml:æ·»åŠ  servlet æ˜ å°„</span></span><br><span class="line">&lt;web-app ...&gt;</span><br><span class="line"> &lt;servlet&gt;</span><br><span class="line">  	&lt;servlet-name&gt;HttpHelloWorld&lt;/servlet-name&gt;</span><br><span class="line">  	&lt;servlet-<span class="class"><span class="keyword">class</span>&gt;<span class="title">cn</span>.<span class="title">weiyigeek</span>.<span class="title">servlet</span>.<span class="title">HttpHelloWorld</span>&lt;/<span class="title">servlet</span>-<span class="title">class</span>&gt;</span></span><br><span class="line"><span class="class">  &lt;/<span class="title">servlet</span>&gt;</span></span><br><span class="line"><span class="class">  &lt;<span class="title">servlet</span>-<span class="title">mapping</span>&gt;</span></span><br><span class="line"><span class="class">  	&lt;<span class="title">servlet</span>-<span class="title">name</span>&gt;<span class="title">HttpHelloWorld</span>&lt;/<span class="title">servlet</span>-<span class="title">name</span>&gt;</span></span><br><span class="line"><span class="class">  	&lt;<span class="title">url</span>-<span class="title">pattern</span>&gt;/<span class="title">web</span>&lt;/<span class="title">url</span>-<span class="title">pattern</span>&gt;</span></span><br><span class="line"><span class="class">  &lt;/<span class="title">servlet</span>-<span class="title">mapping</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">web</span>-<span class="title">app</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<figure class="image-box">
                <a rel=ServletåŸºç¡€å…¥é—¨å­¦ä¹ 1 href="https://img.weiyigeek.top/2020/1/20200216232427.png" target="_blank" title="WeiyiGeek." data-fancybox="images"><img src="https://img.weiyigeek.top/2020/1/20200216232427.png" alt="WeiyiGeek." title="" class=""></a>
                <p>WeiyiGeek.</p>
            </figure>
<p><br></p>
<h5 id="3-Servletç”Ÿå‘½å‘¨æœŸ"><a href="#3-Servletç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="3.Servletç”Ÿå‘½å‘¨æœŸ"></a>3.Servletç”Ÿå‘½å‘¨æœŸ</h5><p>é—®:ä»€ä¹ˆæ˜¯ç”Ÿå‘½å‘¨æœŸï¼Ÿä»€ä¹ˆæ˜¯ç”Ÿå‘½å‘¨æœŸæ–¹æ³•?</p>
<blockquote>
<p>ä»åˆ›å»ºåˆ°é”€æ¯çš„ä¸€æ®µæ—¶é—´ï¼Œä»åˆ›å»ºåˆ°é”€æ¯çš„æ‰€è°ƒç”¨çš„æ–¹æ³•;</p>
</blockquote>
<p><strong>Servletç”Ÿå‘½å‘¨æœŸæµç¨‹:</strong></p>
<ul>
<li>1.init() åˆå§‹åŒ–:åœ¨åˆ›å»ºè¯¥Servletå®ä¾‹æ—¶å€™æ‰§è¡Œè¯¥æ–¹æ³•ï¼ˆä¹Ÿå¯ä»¥æå‰è¿›è¡Œåˆå§‹åŒ–åé¢ä»£ç å®ç°ï¼‰,åœ¨ç”Ÿå‘½å‘¨æœŸå†…åªä¼šåœ¨å¯åŠ¨ååˆæ¬¡è®¿é—®æ—¶å€™è§¦å‘ä¸€æ¬¡,åç»­è®¿é—®ä¸ä¼šå†è§¦å‘;</li>
<li>2.service() æœåŠ¡è¯·æ±‚:å½“å®¢æˆ·ç«¯æ¯æ¥ä¸€ä¸ªè¯·æ±‚å°±è¦è§¦å‘æ‰§è¡Œè¯¥æ–¹æ³•;</li>
<li>3.destory() é”€æ¯:è¯¥é¡¹ç›®ä»tomcatåº”ç”¨ä¸­ç§»å‡ºçš„æ—¶å€™ä»¥åŠtomcatæœåŠ¡å™¨æ­£å¸¸shutdownçš„æ—¶å€™ä¼šè§¦å‘æ‰§è¡Œè¯¥æ–¹æ³•;</li>
</ul>
<p><br></p>
<p><strong>æå‰Servletåˆå§‹åŒ–:</strong><br>æè¿°:åœ¨æœ‰æ—¶å€™æˆ‘ä»¬å¯èƒ½éœ€è¦åœ¨initåˆå§‹åŒ–è¿™ä¸ªæ–¹æ³•ä¸­æ‰§è¡Œä¸€äº›åˆå§‹åŒ–å·¥ä½œï¼Œç”šè‡³åšä¸€äº›æ¯”è¾ƒè€—æ—¶çš„æ“ä½œçš„é€»è¾‘ï¼Œé‚£ä¹ˆè¿™æ—¶æˆ‘ä»¬å¯ä»¥å°†åˆå§‹åŒ–çš„æ—¶æœºè¿›è¡Œæå‰åˆ°åº”ç”¨å¯åŠ¨çš„æ—¶å€™ï¼›<br>é…ç½®ï¼šåœ¨éœ€è¦çš„servletæå‰åˆå§‹åŒ–è¿è¡Œçš„servletåç§°ä¸‹æ·»åŠ load-on-startupå…ƒç´ ;</p>
<p>åŸºç¡€ç¤ºä¾‹:<br>cn.weiyigeek.servlet.Lifecycle<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.weiyigeek.servlet;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.Servlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletConfig;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Administrator</span></span><br><span class="line"><span class="comment"> *   è¯´æ˜:Servlet å£°æ˜å‘¨æœŸçš„éªŒè¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Lifecycle</span> <span class="keyword">implements</span> <span class="title">Servlet</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">int</span> num = <span class="number">0</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig config)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">    <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">    System.out.println(<span class="string">"1.Lifecycle åˆå§‹åŒ–æ“ä½œ ..."</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> ServletConfig <span class="title">getServletConfig</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest req, ServletResponse res)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">    num++;</span><br><span class="line">    System.out.println(<span class="string">"2.Lifecycle æœåŠ¡æä¾›æ“ä½œï¼Œæ‚¨è®¿é—®äº† "</span>+num+<span class="string">" æ¬¡!"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">getServletInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">    System.out.println(<span class="string">"3.Lifecycle é”€æ¯æ“ä½œ..."</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//web.xml</span></span><br><span class="line">&lt;web-app ...&gt;</span><br><span class="line">  &lt;!-- å£°æ˜å‘¨æœŸéªŒè¯å¹¶æå‰åˆå§‹åŒ– --&gt;</span><br><span class="line">  &lt;servlet&gt;</span><br><span class="line">  	&lt;servlet-name&gt;Lifecycle&lt;/servlet-name&gt;</span><br><span class="line">  	&lt;servlet-<span class="class"><span class="keyword">class</span>&gt;<span class="title">cn</span>.<span class="title">weiyigeek</span>.<span class="title">servlet</span>.<span class="title">Lifecycle</span>&lt;/<span class="title">servlet</span>-<span class="title">class</span>&gt;</span></span><br><span class="line"><span class="class">  	&lt;<span class="title">load</span>-<span class="title">on</span>-<span class="title">startup</span>&gt;3&lt;/<span class="title">load</span>-<span class="title">on</span>-<span class="title">startup</span>&gt;</span></span><br><span class="line"><span class="class">  &lt;/<span class="title">servlet</span>&gt;</span></span><br><span class="line"><span class="class">   &lt;<span class="title">servlet</span>-<span class="title">mapping</span>&gt;</span></span><br><span class="line"><span class="class">   	&lt;<span class="title">servlet</span>-<span class="title">name</span>&gt;<span class="title">Lifecycle</span>&lt;/<span class="title">servlet</span>-<span class="title">name</span>&gt;</span></span><br><span class="line"><span class="class">   	&lt;<span class="title">url</span>-<span class="title">pattern</span>&gt;/<span class="title">lifecycletest</span>&lt;/<span class="title">url</span>-<span class="title">pattern</span>&gt;</span></span><br><span class="line"><span class="class">   &lt;/<span class="title">servlet</span>-<span class="title">mapping</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">web</span>-<span class="title">app</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>æ‰§è¡Œç»“æœ:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">ä¿¡æ¯: Starting Servlet Engine: Apache Tomcat/7.0.100</span><br><span class="line">äºŒæœˆ 17, 2020 12:21:37 ä¸Šåˆ org.apache.catalina.util.SessionIdGeneratorBase createSecureRandom</span><br><span class="line">è­¦å‘Š: Creation of SecureRandom instance <span class="keyword">for</span> session ID generation using [SHA1PRNG] took [293] milliseconds.</span><br><span class="line"></span><br><span class="line">1.Lifecycle åˆå§‹åŒ–æ“ä½œ ...</span><br><span class="line">äºŒæœˆ 17, 2020 12:21:37 ä¸Šåˆ org.apache.catalina.startup.HostConfig deployDescriptor</span><br><span class="line">ä¿¡æ¯: éƒ¨ç½²æè¿°ç¬¦[D:\apache-tomcat-7.0.100\conf\Catalina\localhost\Demo3.xml]çš„éƒ¨ç½²å·²åœ¨[69]mså†…å®Œæˆ</span><br><span class="line"></span><br><span class="line">äºŒæœˆ 17, 2020 12:21:37 ä¸Šåˆ org.apache.catalina.core.ApplicationContext <span class="built_in">log</span></span><br><span class="line">ä¿¡æ¯: SessionListener: contextInitialized()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ä¿¡æ¯: å¼€å§‹åè®®å¤„ç†å¥æŸ„[<span class="string">"http-bio-8080"</span>]</span><br><span class="line">äºŒæœˆ 17, 2020 12:21:38 ä¸Šåˆ org.apache.catalina.startup.Catalina start</span><br><span class="line">ä¿¡æ¯: Server startup <span class="keyword">in</span> 1887 ms</span><br><span class="line"></span><br><span class="line">2.Lifecycle æœåŠ¡æä¾›æ“ä½œï¼Œæ‚¨è®¿é—®äº† 1 æ¬¡!</span><br><span class="line">2.Lifecycle æœåŠ¡æä¾›æ“ä½œï¼Œæ‚¨è®¿é—®äº† 2 æ¬¡!</span><br><span class="line">2.Lifecycle æœåŠ¡æä¾›æ“ä½œï¼Œæ‚¨è®¿é—®äº† 3 æ¬¡!</span><br><span class="line"></span><br><span class="line">ä¿¡æ¯: Pausing ProtocolHandler [<span class="string">"http-bio-8080"</span>]</span><br><span class="line">äºŒæœˆ 17, 2020 12:32:36 ä¸Šåˆ org.apache.catalina.core.StandardService stopInternal</span><br><span class="line">ä¿¡æ¯: æ­£åœ¨åœæ­¢æœåŠ¡[Catalina]</span><br><span class="line"></span><br><span class="line">3.Lifecycle é”€æ¯æ“ä½œ...</span><br><span class="line">äºŒæœˆ 17, 2020 12:32:36 ä¸Šåˆ org.apache.catalina.core.ApplicationContext <span class="built_in">log</span></span><br><span class="line">ä¿¡æ¯: SessionListener: contextDestroyed()</span><br><span class="line">äºŒæœˆ 17, 2020 12:32:36 ä¸Šåˆ org.apache.coyote.AbstractProtocol stop</span><br><span class="line">ä¿¡æ¯: æ­£åœ¨åœæ­¢ProtocolHandler [<span class="string">"http-bio-8080"</span>]</span><br><span class="line">äºŒæœˆ 17, 2020 12:32:36 ä¸Šåˆ org.apache.coyote.AbstractProtocol destroy</span><br><span class="line">ä¿¡æ¯: æ­£åœ¨æ‘§æ¯åè®®å¤„ç†å™¨ [<span class="string">"http-bio-8080"</span>]</span><br></pre></td></tr></table></figure></p>
<p>æ³¨æ„äº‹é¡¹:</p>
<ul>
<li>1.ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æ˜¯æŒ‡ï¼Œä»å¯¹è±¡åˆ›å»ºåˆ°é”€æ¯ä¸€å®šä¼šæ‰§è¡Œçš„æ–¹æ³•ï¼Œè€ŒdoGetå’ŒdoPostä¸ç®—ç”Ÿå‘½å‘¨æœŸæ–¹æ³•å› ä¸ºä»–ä»¬å¯èƒ½ä¼šæ‰§è¡Œæˆ–è€…ä¸ä¼šæ‰§è¡Œ;</li>
<li>2.Servletåˆå§‹åŒ–æå‰load-on-startupå€¼è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ä¸”æ˜¯ä¸€ä¸ªæ­£å€¼;</li>
</ul>
<p><br></p>
<h5 id="4-Servleté…ç½®å¯¹è±¡"><a href="#4-Servleté…ç½®å¯¹è±¡" class="headerlink" title="4.Servleté…ç½®å¯¹è±¡"></a>4.Servleté…ç½®å¯¹è±¡</h5><p>æè¿°:æˆ‘ä»¬å¯ä»¥åˆ©ç”¨Servleté…ç½®å¯¹è±¡è¿›è¡Œè·å–æˆ–æ£€æµ‹web.xmlä¸­çš„servleté…ç½®ä¿¡æ¯;<br>åœ¨æœªæ¥æˆ‘ä»¬è¿›è¡Œå®é™…å¼€å‘æ—¶å€™ï¼Œé‡‡ç”¨å…¶ä»–äººå¼€å‘å‡ºæ¥çš„servletç±»ï¼Œæˆ‘ä»¬ä½¿ç”¨å®ƒçš„jarè¿›è¡Œå¯¼å…¥åˆ°æˆ‘ä»¬çš„å·¥ç¨‹ä¹‹ä¸­ï¼Œç„¶åå®ƒè®¾ç½®çš„servletå¿…é¡»æ³¨å†ŒæŸä¸€ä¸ªå‚æ•°æ‰å¯ä»¥ä½¿ç”¨ï¼Œå¦åˆ™çˆ†å‡ºå¼‚å¸¸ï¼›</p>
<p>å¦‚ä½•å£°æ˜init-paramså’Œinit-valuesï¼Ÿ</p>
<blockquote>
<p>åœ¨Web.xmlä¸­çš„servletå…ƒç´ ä¸­åŠ å…¥<code>&lt;init-param&gt;&lt;param-name&gt;name&lt;/param-name&gt;&lt;param-value&gt;WeiyiGeek&lt;/param-value&gt;&lt;/init-param&gt;</code>ç­‰å­å…ƒç´ å’Œå­™å­å…ƒç´ ;</p>
</blockquote>
<p>åŸºç¡€ç¤ºä¾‹:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">///HelloWorld/src/cn/weiyigeek/servlet/SevletConfig.java</span></span><br><span class="line"><span class="keyword">package</span> cn.weiyigeek.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Enumeration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletConfig;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Administrator</span></span><br><span class="line"><span class="comment"> * Descript: éªŒè¯ServletConfigçš„ä½¿ç”¨è·å–web.xmlé…ç½®çš„ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SevletConfig</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>&#123;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    <span class="comment">//1.è·å¾—Servleté…ç½®å¯¹è±¡ä¸“é—¨ç”¨äºé…ç½®servletçš„ä¿¡æ¯</span></span><br><span class="line">    ServletConfig config = getServletConfig();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//2.å¯ä»¥è·å–å…·ä½“servleté…ç½®ä¸­çš„åç§°;</span></span><br><span class="line">    String servletName = config.getServletName();</span><br><span class="line">    System.out.println(<span class="string">"Servlet-Name = "</span> + servletName);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//3.æ£€æµ‹å‚æ•°æ˜¯å¦å­˜åœ¨è¢«è®¾ç½®è¿›è¡Œéæ³•å‚æ•°å¼‚å¸¸æŠ›å‡º(å€¼å¾—å­¦ä¹  illeal è‹± /ÉªËˆliËÉ¡l/ )</span></span><br><span class="line">    String myself = config.getInitParameter(<span class="string">"WeiyiGeek"</span>);</span><br><span class="line">    <span class="keyword">if</span>(myself == <span class="keyword">null</span>) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"åœ¨Servleté…ç½®ä¸­æœªæ‰¾åˆ°WeiyiGeekå‚æ•°ï¼Œè¯·æ ¸éªŒWeb.xmlæ–‡ä»¶!"</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      System.out.println(<span class="string">"WeiyiGeek load ...."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//4.è·å–å•ä¸ªå…·ä½“å‚æ•°</span></span><br><span class="line">    String name = config.getInitParameter(<span class="string">"name"</span>);</span><br><span class="line">    System.out.println(<span class="string">"é…ç½®æ–‡ä»¶ä¸­  name å€¼ä¸º"</span> + name);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//5.éå†é…ç½®ä¸­è®¾ç½®çš„å¤šä¸ªå‚æ•°</span></span><br><span class="line">    Enumeration&lt;String&gt; para = config.getInitParameterNames();</span><br><span class="line">    <span class="keyword">while</span>(para.hasMoreElements()) &#123;</span><br><span class="line">      String key = para.nextElement();</span><br><span class="line">      String value = config.getInitParameter(key);</span><br><span class="line">      System.out.println(<span class="string">"å‚æ•°"</span>+key+<span class="string">",å€¼="</span>+value);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>web.xml:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 4.éªŒè¯ServletConfigé…ç½® --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ServletConfig<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>cn.weiyigeek.servlet.SevletConfig<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">    		<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>WeiyiGeek<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    		<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>ServletConfig<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">    		<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>name<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    		<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>WeiyiGeek<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">    		<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>age<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    		<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>88<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ServletConfig<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/config<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>æ‰§è¡Œç»“æœ:<br><figure class="image-box">
                <a rel=ServletåŸºç¡€å…¥é—¨å­¦ä¹ 1 href="https://img.weiyigeek.top/2020/1/20200217125744.png" target="_blank" title="WeiyiGeek.Servleté…ç½®å¯¹è±¡" data-fancybox="images"><img src="https://img.weiyigeek.top/2020/1/20200217125744.png" alt="WeiyiGeek.Servleté…ç½®å¯¹è±¡" title="" class=""></a>
                <p>WeiyiGeek.Servleté…ç½®å¯¹è±¡</p>
            </figure></p>
<p><br></p>
<h5 id="5-Servleté…ç½®æ–¹å¼"><a href="#5-Servleté…ç½®æ–¹å¼" class="headerlink" title="5.Servleté…ç½®æ–¹å¼"></a>5.Servleté…ç½®æ–¹å¼</h5><p>æè¿°:Servlet é…ç½®æ–¹å¼å¸¸ç”¨çš„æœ‰ä¸‰ç§:<br><strong>1) å…¨è·¯å¾„åŒ¹é…</strong></p>
<blockquote>
<p>web.xml ä¸­çš„ <code>&lt;servlet&gt; &lt;/servlet&gt;</code> æ ‡ç­¾ä¸­ä»¥ / å¼€å§‹ /a æˆ–è€… /aa/bb<br>è®¿é—®: 127.0.0.1:8080/é¡¹ç›®åç§°/aa//bb è®¿é—®å³å¯</p>
</blockquote>
<p><strong>2ï¼‰è·¯å¾„åŒ¹é…ï¼Œå‰ç‰ˆæœ¬åŒ¹é…</strong></p>
<blockquote>
<p>ä»¥ / å¼€å§‹ï¼Œä½†æ˜¯ä»¥ <em> ç»“æŸ /a/</em> æˆ–è€… /*;<br>è®¿é—®: localhost:8080/é¡¹ç›®åç§°/aa/bb</p>
</blockquote>
<p><strong>3) ä»¥æ‰©å±•åå¼€å§‹</strong></p>
<blockquote>
<p>æ²¡æœ‰ / è€Œæ˜¯ä»¥ <em> å¼€å§‹ </em>.æ‰©å±•åç§°ï¼Œæ¯”å¦‚ *.aa æˆ–è€… .bb<br>è®¿é—®:localhost:8080/é¡¹ç›®åç§°/weiyigeek.aa</p>
</blockquote>
<BR>

<p>åœ¨ä¸‹é¢æˆ‘æ¼”ç¤ºServletçš„ç¬¬äºŒç§é…ç½®æ–¹å¼ï¼š</p>
<ul>
<li>1.å³é”®æ–°å»ºç«‹ä¸€ä¸ªServletæ–‡ä»¶ï¼Œéœ€è¦æ‚¨æä¾›åŒ…packageå’Œç±»åç§°ï¼›</li>
</ul>
<figure class="image-box">
                <a rel=ServletåŸºç¡€å…¥é—¨å­¦ä¹ 1 href="https://img.weiyigeek.top/2020/1/20200223141546.png" target="_blank" title="WeiyiGeek." data-fancybox="images"><img src="https://img.weiyigeek.top/2020/1/20200223141546.png" alt="WeiyiGeek." title="" class=""></a>
                <p>WeiyiGeek.</p>
            </figure>
<ul>
<li><p>2.åˆ é™¤å»ºç«‹çš„ServletMethodæ–‡ä»¶ä¸­ä¸éœ€è¦çš„æ–¹æ³•ï¼Œå¹¶ä¸”æŸ¥çœ‹web.xml é»˜è®¤ç”Ÿæˆçš„servleté…ç½®ï¼›</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span><span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>ServletMethod<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ServletMethod<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>cn.weiyigeek.servlet.ServletMethod<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ServletMethod<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/ServletMethod<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>3.éªŒè¯ä¸Šé¢çš„é…ç½®æ–¹å¼çš„ä¸€ç§å°†<code>url-pattern</code>è¿›è¡Œæ›´æ”¹</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-- 1. <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/aa/bb<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">-- 2. <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/aa/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">-- 3. <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>*.weiyigeek<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>æ‰§è¡Œç»“æœ:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.weiyigeek.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Servlet implementationï¼ˆå®ç°ï¼‰ class ServletMethod</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServletMethod</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">    </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@see</span> HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">    response.getWriter().append(<span class="string">"Served at: "</span>).append(request.getContextPath());</span><br><span class="line">    System.out.println(<span class="string">"æœ‰äººè®¿é—®äº†ä¸€ä¸ªè¯·æ±‚...!ï¼"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@see</span> HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">    doGet(request, response);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><figure class="image-box">
                <a rel=ServletåŸºç¡€å…¥é—¨å­¦ä¹ 1 href="https://img.weiyigeek.top/2020/1/20200223142928.png" target="_blank" title="WeiyiGeek.Servleté…ç½®æ–¹å¼" data-fancybox="images"><img src="https://img.weiyigeek.top/2020/1/20200223142928.png" alt="WeiyiGeek.Servleté…ç½®æ–¹å¼" title="" class=""></a>
                <p>WeiyiGeek.Servleté…ç½®æ–¹å¼</p>
            </figure></p>
<hr>

<h4 id="0x05-Servletè¿›é˜¶"><a href="#0x05-Servletè¿›é˜¶" class="headerlink" title="0x05 Servletè¿›é˜¶"></a>0x05 Servletè¿›é˜¶</h4><h5 id="1-ServletContextå¯¹è±¡"><a href="#1-ServletContextå¯¹è±¡" class="headerlink" title="1.ServletContextå¯¹è±¡"></a>1.ServletContextå¯¹è±¡</h5><p>æè¿°:æ¯ä¸ªJAVAè™šæ‹Ÿæœºä¸­çš„WEB applicationåº”ç”¨å·¥ç¨‹åªæœ‰ä¸€ä¸ªServletContextå¯¹è±¡ï¼Œç®€å•çš„è¯´å°±æ˜¯ä¸ç®¡åœ¨å“ªä¸€ä¸ªservleté‡Œé¢è·å¾—åˆ°çš„è¿™ä¸ªç±»çš„å¯¹è±¡éƒ½æ˜¯åŒä¸€ä¸ªï¼›</p>
<p>ServletContextå¯¹è±¡çš„ä½œç”¨</p>
<ul>
<li>1.è·å–å…¨å±€é…ç½®å‚æ•°</li>
<li>2.è·å–Webå·¥ç¨‹ä¸­çš„èµ„æº</li>
<li>3.å­˜å–æ•°æ®Servleté—´å…±äº«æ•°æ®ï¼ˆåŸŸå¯¹è±¡ï¼‰</li>
</ul>
<p><strong>ServletContext ç”Ÿå‘½å‘¨æœŸ</strong><br>é—®é¢˜:ServletContextä½•æ—¶åˆ›å»ºï¼Œä½•æ—¶é”€æ¯ï¼Ÿ</p>
<blockquote>
<p>åˆ›å»º:æœåŠ¡å™¨å¯åŠ¨çš„æ—¶å€™ï¼Œä¼šä¸ºæ‰˜ç®¡çš„æ¯ä¸€ä¸ªWebåº”ç”¨ç¨‹åºï¼Œåˆ›å»ºä¸€ä¸ªServletContextå¯¹è±¡ï¼›<br>é”€æ¯:ä»æœåŠ¡å™¨ç§»é™¤æ‰˜ç®¡æˆ–è€…æ˜¯å…³é—­æœåŠ¡å™¨ï¼›</p>
</blockquote>
<p><em>ServletContext ä½œç”¨èŒƒå›´</em>ï¼šåŒä¸€ä¸ªé¡¹ç›®ä¹‹ä¸­å…±äº«æ•°æ®ï¼Œä½†æ˜¯å¦‚æœæ˜¯ä¸åŒçš„é¡¹ç›®ä¹‹é—´å­˜å–å€¼æ˜¯ä¸ä¸€æ ·çš„(å–ä¸åˆ°)ï¼Œå› ä¸ºServletContextçš„å¯¹è±¡ä¸åŒ;</p>
<p><br></p>
<p><strong>1) é‡‡ç”¨ServletContextè·å–èµ„æºæ–‡ä»¶</strong><br>åœ¨å·¥ç¨‹ä¸­çš„web.xmlä¸­å»ºç«‹çš„context-paramå‚æ•°æ˜¯å…¨å±€çš„ä¸Šä¸‹æ–‡å‚æ•°æˆ–è€…åœ¨WebContextä¸­å»ºç«‹ä¸€ä¸ªæ–‡ä»¶å¤¹å­˜å‚¨Propertiesæ–‡ä»¶;<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 1.åœ¨Servletä¸­é‡‡ç”¨getServletContextè·å–å¯¹è±¡--&gt;</span></span><br><span class="line">ServletContext context = getServletContext();</span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 2.å…¨å±€ä¸Šä¸‹æ–‡å‚æ•°--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>name<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>WeiyiGeek<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>age<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>100<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--3.åœ¨WebContextç›®å½•ä¸­å»ºç«‹ä¸€ä¸ªç›®å½•å’Œpropæ–‡ä»¶--&gt;</span></span><br><span class="line">Config/WeiyiGeek.Properties;</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<p>åŸºç¡€ç¤ºä¾‹:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.weiyigeek.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContext;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Servletcontext1</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//æ–¹å¼1:ServletContextè·å–èµ„æºæ–‡ä»¶</span></span><br><span class="line">    Scmethod1(response);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ–¹å¼2:ServletContext + Propersties è·å–èµ„æºæ–‡ä»¶</span></span><br><span class="line">    Scmethod2(response);</span><br><span class="line">  </span><br><span class="line">    <span class="comment">//æ–¹å¼3:ServletContextèµ„æºæ–‡ä»¶è·å–</span></span><br><span class="line">    ServletContext sc = getServletContext();</span><br><span class="line">    Properties prop = <span class="keyword">new</span> Properties();</span><br><span class="line">    <span class="comment">//ç»™ç›¸å¯¹è·¯å¾„ç„¶åç›´æ¥è·å–æ–‡ä»¶ç»å¯¹åœ°å€å’Œè¯»å–æ–‡ä»¶è½¬åŒ–æˆä¸ºæµå¯¹è±¡</span></span><br><span class="line">    InputStream is = sc.getResourceAsStream(<span class="string">"Config/WeiyiGeek.Properties"</span>); </span><br><span class="line">    prop.load(is);</span><br><span class="line">    System.out.println(<span class="string">"\næ–¹å¼ä¸‰:ServletContextèµ„æºæ–‡ä»¶è·å–\n"</span>);</span><br><span class="line">    System.out.println(<span class="string">"Name = "</span> + prop.getProperty(<span class="string">"name"</span>) + <span class="string">"\n"</span>);</span><br><span class="line">    System.out.println(<span class="string">"Age = "</span> + prop.getProperty(<span class="string">"age"</span>));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line">  <span class="comment">//æ–¹å¼2</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Scmethod2</span><span class="params">(HttpServletResponse response)</span> <span class="keyword">throws</span> FileNotFoundException, IOException </span>&#123;</span><br><span class="line">    <span class="comment">//1.è·å–ä¸Šä¸‹æ–‡å¯¹è±¡</span></span><br><span class="line">    ServletContext context = getServletContext();</span><br><span class="line">    <span class="comment">//2.æˆ–è€…Propertiesä¸­çš„å‚æ•°å€¼é‡‡ç”¨ServletContextè¿›è¡Œè¯»å–</span></span><br><span class="line">    Properties prop = <span class="keyword">new</span> Properties();</span><br><span class="line">    String proppath = context.getRealPath(<span class="string">"Config/WeiyiGeek.Properties"</span>); <span class="comment">//è·å–åˆ°äº†WeiyiGeek.Propertiesç»å¯¹è·¯å¾„</span></span><br><span class="line">    System.out.println(<span class="string">"Properties é…ç½®æ–‡ä»¶è·¯å¾„ = "</span> + proppath);</span><br><span class="line">    <span class="comment">//Properties é…ç½®æ–‡ä»¶è·¯å¾„ = D:\apache-tomcat-7.0.100\wtpwebapps\HelloWorld\Config\WeiyiGeek.Properties</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//3.æŒ‡å®špropertiesæ•°æ®æº(ä½†æ˜¯éœ€è¦æ³¨æ„è¿™é‡Œæ˜¯webåº”ç”¨ï¼Œå¦‚æœæƒ³è·å–webå·¥ç¨‹çš„ä¸‹èµ„æºéœ€è¦é‡‡ç”¨ServletContextè·å–é…ç½®æ–‡ä»¶è·¯å¾„)</span></span><br><span class="line">    InputStream is = <span class="keyword">new</span> FileInputStream(proppath);</span><br><span class="line">    prop.load(is);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//4.è·å–å±æ€§çš„å€¼</span></span><br><span class="line">    String name = prop.getProperty(<span class="string">"name"</span>);</span><br><span class="line">    String age = prop.getProperty(<span class="string">"age"</span>);</span><br><span class="line">    response.getWriter().append(<span class="string">"\n ------------------ \n"</span>);</span><br><span class="line">    response.getWriter().append(<span class="string">"ServletContext-&gt; Properties Param Name = "</span>).append(name  + <span class="string">"\n"</span>);</span><br><span class="line">    response.getWriter().append(<span class="string">"ServletContext-&gt; Properties Param Age = "</span>).append(age);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//æ–¹å¼1</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Scmethod1</span><span class="params">(HttpServletResponse response)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    <span class="comment">//1.è·å–ä¸Šä¸‹æ–‡å¯¹è±¡</span></span><br><span class="line">    ServletContext context = getServletContext();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//2.è·å–web.xmlä¸­Context-paramä¸­è®¾ç½®å…¨å±€é…ç½®å‚æ•°çš„keyå’Œvalue;</span></span><br><span class="line">    response.getWriter().append(<span class="string">"ServletContext Param Name = "</span>).append(context.getInitParameter(<span class="string">"name"</span>) + <span class="string">"\n"</span>);</span><br><span class="line">    response.getWriter().append(<span class="string">"ServletContext Param Age = "</span>).append(context.getInitParameter(<span class="string">"age"</span>));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><figure class="image-box">
                <a rel=ServletåŸºç¡€å…¥é—¨å­¦ä¹ 1 href="https://img.weiyigeek.top/2020/1/20200223154642.png" target="_blank" title="WeiyiGeek." data-fancybox="images"><img src="https://img.weiyigeek.top/2020/1/20200223154642.png" alt="WeiyiGeek." title="" class=""></a>
                <p>WeiyiGeek.</p>
            </figure></p>
<p><br></p>
<p><em>æ³¨æ„äº‹é¡¹:</em></p>
<ul>
<li>1.åœ¨Webå·¥ç¨‹æŒ‰ç…§æˆ‘ä»¬å‰é¢å­¦ä¹ çš„Properitesè¿›è¡Œè¯»å–é…ç½®æ–‡ä»¶æ˜¯ä¸è¡Œï¼Œå¦‚æœæ‚¨å°†propæ–‡ä»¶å»ºç«‹åœ¨srcä¸­åœ¨webé¡¹ç›®éƒ¨ç½²çš„æ—¶å€™ä¼šä¿å­˜åˆ°WEB-INF/CLASSES/ç›®å½•ä¸­ï¼Œå¯¼è‡´FileInputStreamä¸èƒ½å¤Ÿæ­£å¸¸è¯»å–åˆ°è¯¥æ–‡ä»¶åˆ™propertiesæ–¹å¼ä¹Ÿä¸èƒ½è·å–åˆ°å‚æ•°çš„å€¼ï¼Œå› ä¸ºæ­¤æ—¶FIleInputStreamæµç¨‹è¯»å–æ˜¯bin/src/xxx.Propertiesï¼›</li>
<li>2.è§£å†³æ³¨æ„1çš„æ–¹å¼æ˜¯é‡‡ç”¨ServletContextä¸­çš„getRealPathæ–¹æ³•è·å–åˆ°webContextçš„ç»å¯¹è·¯å¾„ï¼Œç„¶ååœ¨æŒ‡å®šdir/xx.Propertiesä¹‹åå¸¸è§„è¯»å–å³å¯</li>
<li>3.å¯¹æ³¨æ„2è¿›è¡Œä¼˜åŒ–å¯ä»¥ç›´æ¥é‡‡ç”¨ServletContextä¸­çš„getResoureAsStreamæ–¹æ³•è¯»å–æ–‡ä»¶æµï¼Œç„¶åé‡‡ç”¨prop.load()åŠ è½½æ­¤å¯¹è±¡å³å¯;</li>
</ul>
<p><br></p>
<p><strong>2) ä½¿ç”¨ClassLoaderè·å–èµ„æºæ–‡ä»¶</strong><br>æè¿°:é‡‡ç”¨ClassLoaderå¯ä»¥ç›´æ¥è¯»å–å½“å‰å·¥ç¨‹ä¸‹çš„å­—èŠ‚ç æ–‡ä»¶å’Œé…ç½®æ–‡ä»¶ï¼›</p>
<p>åŸºç¡€æ¡ˆä¾‹:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.weiyigeek.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Servletcontext2</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">//1.æ‰“å°getClassLoaderè·¯å¾„</span></span><br><span class="line">    System.out.println(<span class="keyword">this</span>.getClass().getClassLoader());</span><br><span class="line">    </span><br><span class="line">       <span class="comment">//2.å®ä¾‹åŒ–Propertieså’ŒInputStreamå¯¹è±¡</span></span><br><span class="line">    Properties prop = <span class="keyword">new</span> Properties();</span><br><span class="line">    InputStream is = <span class="keyword">this</span>.getClass().getClassLoader().getResourceAsStream(<span class="string">"../../Config/WeiyiGeek.Properties"</span>);</span><br><span class="line">    prop.load(is);</span><br><span class="line">    System.out.println(<span class="string">"å§“å:"</span> + prop.getProperty(<span class="string">"name"</span>) + <span class="string">",å¹´é¾„ : "</span> + prop.getProperty(<span class="string">"age"</span>) );</span><br><span class="line">    is.close();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>è®¿é—®:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è¿è¡Œç»“æœï¼š</span></span><br><span class="line">WebappClassLoader</span><br><span class="line">  context: /HelloWorld</span><br><span class="line">  delegate: <span class="literal">false</span></span><br><span class="line">  repositories:</span><br><span class="line">    /WEB-INF/classes/   <span class="comment">#å› ä¸ºé»˜è®¤æ˜¯åœ¨è¿™ä¸ªç›®å½•ä¹‹ä¸­ï¼Œè€Œæˆ‘ä»¬å»ºç«‹çš„æ˜¯åœ¨WebContextä¸­åˆ™éœ€è¦ä¸¤æ¬¡å›åˆ°ä¸Šçº§ç›®å½•ä¹‹ä¸­</span></span><br><span class="line">----------&gt; Parent Classloader:</span><br><span class="line">java.net.URLClassLoader@7440e464</span><br><span class="line"></span><br><span class="line">å§“å:WeiyiGeek,å¹´é¾„ : 2020</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<p><strong>3) ServletContextå­˜å–æ•°æ®</strong><br>æè¿°:æ­¤å¤„é‡‡ç”¨ServletContextè¿›è¡Œè·å–ç™»å½•æˆåŠŸçš„æ€»æ•°ï¼Œå…·ä½“æµç¨‹å¦‚ä¸‹:</p>
<ol>
<li>è·å–æäº¤è¿‡æ¥çš„æ•°æ®</li>
<li>åˆ¤æ–­è´¦å·å¯†ç æ•°æ®æ˜¯å¦æœ‰è¯¯</li>
<li>å¦‚æœæ­£ç¡®è¿›è¡Œé¡µé¢çš„è·³è½¬å¹¶ä¸”è¾“å‡ºâ€è¯¥ç”¨æˆ·æ˜¯ç½‘ç«™æˆåŠŸç™»é™†çš„ç¬¬å‡ äººâ€ï¼Œé‡‡ç”¨Servletè®°å½•å…¶å€¼;</li>
<li>å¦‚æœé”™è¯¯è¾“å‡ºâ€ç™»å½•å¤±è´¥â€ï¼›</li>
</ol>
<p>è¡¥å……è¯´æ˜:ä¸€ä¸ªè¯·æ±‚URLå¯¹åº”ä¸€ä¸ªServletæ–‡ä»¶è¿›è¡Œå¤„ç†;</p>
<p>åŸºç¡€è¯­æ³•è¯´æ˜:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è·å–è®¾ç½®çš„å±æ€§å€¼</span></span><br><span class="line">getServletContext().getAttribute(<span class="string">"key"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//è®¾ç½®å±æ€§å€¼</span></span><br><span class="line">getServletContext().setAttribute(<span class="string">"key"</span>,value);</span><br></pre></td></tr></table></figure></p>
<p>å®ä¾‹æ¼”ç¤º:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Servlet Class ç±»</span></span><br><span class="line">Login</span><br><span class="line">CountTotal</span><br><span class="line"></span><br><span class="line"><span class="comment">//HTMLé¡µé¢</span></span><br><span class="line">Login.html</span><br><span class="line">Success.html</span><br></pre></td></tr></table></figure><br><figure class="image-box">
                <a rel=ServletåŸºç¡€å…¥é—¨å­¦ä¹ 1 href="https://img.weiyigeek.top/2020/1/20200224220557.png" target="_blank" title="WeiyiGeek." data-fancybox="images"><img src="https://img.weiyigeek.top/2020/1/20200224220557.png" alt="WeiyiGeek." title="" class=""></a>
                <p>WeiyiGeek.</p>
            </figure></p>
<p>åŸºç¡€ä»£ç :<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Login.html --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æ³¨æ„ action è¿™é‡Œç”±äºlogin.html ä¸ Login æ˜¯å¤„äºåŒä¸€çº§ç›®å½•çš„ï¼Œæ‚¨ä¹Ÿå¯ä»¥å†™ /é¡¹ç›®åç§°/Login --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"Login"</span> <span class="attr">method</span>=<span class="string">"get"</span>&gt;</span></span><br><span class="line">  ç”¨æˆ·å:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"username"</span>/&gt;</span></span><br><span class="line">  å¯†    ç :<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"password"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"ç™»å½•"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Success.html --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span> å°Šæ•¬çš„ç”¨æˆ·æ‚¨å·²æˆåŠŸç™»é™†! <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"CountTotal"</span>&gt;</span>è·å–æˆåŠŸç™»é™†çš„æ¬¡æ•°<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>javaä»£ç :<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Servlet -&gt; Login</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Login</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    <span class="comment">//1.è·å–ç™»å½•é¡µé¢ä¼ é€’çš„å‚æ•°</span></span><br><span class="line">    String user = request.getParameter(<span class="string">"username"</span>);</span><br><span class="line">    String pass = request.getParameter(<span class="string">"password"</span>);</span><br><span class="line">    System.out.println(<span class="string">"Get è¯·æ±‚è·å–çš„å‚æ•° ï¼šuser = "</span> + user + <span class="string">"?pass = "</span> + pass );</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//2.åˆ¤æ–­ç”¨æˆ·è¾“å…¥è´¦å·å¯†ç æ˜¯å¦æ­£ç¡®</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="string">"admin"</span>.equals(user) &amp;&amp; <span class="string">"123"</span>.equals(pass)) </span><br><span class="line">        &#123;</span><br><span class="line">      </span><br><span class="line">      <span class="comment">//3.ç™»å½•æˆåŠŸåœ¨å“åº”å’Œç»ˆç«¯æ§åˆ¶å°è¿›è¡Œæ‰“å°</span></span><br><span class="line">      response.getWriter().append(<span class="string">"ç™»å½•æˆåŠŸ!"</span>);</span><br><span class="line">      </span><br><span class="line">      <span class="comment">//4.è®°å½•å’Œè·å–åœ¨Servletä¸­å­˜å‚¨ç™»å½•æˆåŠŸçš„å€¼</span></span><br><span class="line">      <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">      Object ob = getServletContext().getAttribute(<span class="string">"total"</span>); <span class="comment">//è·å–ServletContextå±æ€§</span></span><br><span class="line">      <span class="keyword">if</span>(ob != <span class="keyword">null</span> )</span><br><span class="line">      &#123;</span><br><span class="line">        count = (<span class="keyword">int</span>) ob;</span><br><span class="line">      &#125;</span><br><span class="line">      getServletContext().setAttribute(<span class="string">"total"</span>, ++count); <span class="comment">//è®¾ç½®å­˜å‚¨ServletContextå±æ€§</span></span><br><span class="line">      System.out.println(<span class="string">"ç™»å½•æˆåŠŸ! æ‚¨ç´¯ç§¯æˆåŠŸç™»é™† "</span> + count +<span class="string">"æ¬¡"</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">//5.è®¾ç½®ç™»å½•æˆåŠŸè·³è½¬é¡µé¢</span></span><br><span class="line">      response.setStatus(<span class="number">302</span>); <span class="comment">//è®¾ç½®çŠ¶æ€ç </span></span><br><span class="line">      response.setHeader(<span class="string">"Location"</span>, <span class="string">"success.html"</span>); <span class="comment">//è®¾ç½®è·³è½¬å¤´</span></span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">      response.getWriter().print(<span class="string">"ç™»å½•å¤±è´¥,è´¦å·æˆ–è€…å¯†ç é”™è¯¯!"</span>);</span><br><span class="line">      System.out.println(<span class="string">"è´¦å·æˆ–è€…å¯†ç é”™è¯¯!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//Servlet -&gt; CountTotal</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    <span class="comment">//1.åœ¨ServletContextä¸­è·å–æˆåŠŸç™»é™†çš„æ¬¡æ•°</span></span><br><span class="line">    <span class="keyword">int</span> total = (<span class="keyword">int</span>) getServletContext().getAttribute(<span class="string">"total"</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//2.æ‰“å°è¾“å‡ºæˆåŠŸçš„æ¬¡æ•°</span></span><br><span class="line">    response.getWriter().append(<span class="string">"å°Šæ•¬çš„ç”¨æˆ·æ‚¨æˆåŠŸç™»é™† "</span> + total +<span class="string">" æ¬¡"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><a rel=ServletåŸºç¡€å…¥é—¨å­¦ä¹ 1 href="https://img.weiyigeek.top/2020/1/20200224224525.png" target="_blank" title="WeiyiGeek." data-fancybox="images"><img src="https://img.weiyigeek.top/2020/1/20200224224525.png" alt="WeiyiGeek."></a></p>
<p><br></p>
<h5 id="2-HttpServletRequest"><a href="#2-HttpServletRequest" class="headerlink" title="2.HttpServletRequest"></a>2.HttpServletRequest</h5><p><strong>1) Requestè·å–è¯·æ±‚å¤´</strong><br>åŸºç¡€è¯­æ³•:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">request.getHeaderNames(); <span class="comment">//è¿”å›ä¸€ä¸ªæšä¸¾åˆé›†Enumerationè¯·æ±‚å¤´</span></span><br><span class="line">request.getHeader(<span class="string">"è¯·æ±‚å¤´éƒ¨"</span>); <span class="comment">//è·å–è¯¥è¯·æ±‚çš„å“åº”å¤´å€¼</span></span><br></pre></td></tr></table></figure></p>
<p><br></p>
<p><strong>2) Requestè¯·æ±‚ä¿¡æ¯æå–</strong><br>åŸºç¡€è¯­æ³•:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(<span class="string">"å½“å‰å®¢æˆ·ç«¯åè®®  ï¼š"</span> + request.getProtocol());</span><br><span class="line">System.out.println(<span class="string">"å½“å‰è¯·æ±‚ç¼–ç  ï¼š"</span> + request.getCharacterEncoding());</span><br><span class="line">System.out.println(<span class="string">"é¡¹ç›®åç§° :"</span> + request.getContextPath());</span><br><span class="line">System.out.println(<span class="string">"é¡¹ç›®URL:"</span> + request.getRequestURI());</span><br><span class="line">System.out.println(<span class="string">"æœ¬æœºä¿¡æ¯ ï¼š"</span> + request.getLocalName() + <span class="string">" - "</span> + request.getLocalAddr()  + <span class="string">" - "</span> + request.getLocalPort());</span><br><span class="line">System.out.println(<span class="string">"å®¢æˆ·ç«¯ä¿¡æ¯ : "</span> + request.getRemoteUser() + <span class="string">" - "</span> + request.getRemoteAddr() + <span class="string">" - "</span> + request.getRemoteHost() + <span class="string">" - "</span> + request.getRemotePort());</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<p><strong>3) Requestè¯·æ±‚æ•°æ®æ‹¿å–</strong><br>åŸºç¡€è¯­æ³•:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¯·æ±‚å‚æ•°å€¼è·å–å•ä¸ª</span></span><br><span class="line">request.getParameter(<span class="string">"key"</span>)</span><br><span class="line"><span class="comment">//æ–¹å¼1.è·å–å¤šä¸ªè¯·æ±‚å‚æ•°ä¸ºé›†åˆ</span></span><br><span class="line">request.getParameterMap();  <span class="comment">// Map Set Iterator ç­‰</span></span><br><span class="line"><span class="comment">//æ–¹å¼2ï¼šè·å–å¤šä¸ªè¯·æ±‚å‚æ•°ä¸ºé›†åˆ</span></span><br><span class="line">request.getParameterNames(); <span class="comment">// è·å¾—å‚æ•°åç§°</span></span><br><span class="line">request.getParameterValues(<span class="string">"key"</span>) <span class="comment">//åˆ©ç”¨å‚æ•°åç§°æŸ¥è¯¢å…¶å€¼</span></span><br></pre></td></tr></table></figure></p>
<p><br></p>
<p><strong>4) Requestè¯·æ±‚ä¸­æ–‡ä¹±ç è§£å†³</strong><br>æè¿°:åœ¨å®¢æˆ·ç«¯è¿›è¡ŒGet/POSTè¯·æ±‚çš„æ—¶å€™åœ¨URLåœ°å€å·²ç»ç»è¿‡äº†urlç¼–ç ï¼Œè€ŒTomcatè·å–åˆ°çš„è¿™æ‰¹æ•°æ®getParameteré»˜è®¤ä½¿ç”¨ISO-8859-1å»è§£ç ,æ‰€ä»¥ä¼šå¯¼è‡´ç­”åº”ä¸­æ–‡ä¹±ç ;</p>
<p>è§£å†³åŠæ³•:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.ç»ˆç«¯/ç½‘é¡µæ˜¾ç¤ºä¸ä¹±ç ï¼ˆæ¨èå½¢å¼-æˆåŠŸï¼‰</span></span><br><span class="line">String val = <span class="keyword">new</span> String(value[i].getBytes(<span class="string">"ISO-8859-1"</span>),<span class="string">"utf-8"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.ç½‘é¡µå›æ˜¾ä¸ä¹±ç ï¼ˆPOST è¯·æ±‚ - æœªéªŒè¯æˆåŠŸï¼‰</span></span><br><span class="line">request.setCharacterEncoding(<span class="string">"UTF-8"</span>);  <span class="comment">//è¾“å…¥çš„æ ¼å¼ä¸ä¹±ç  ï¼ˆéœ€è¦å†™åœ¨è·å–å‚æ•°ä¹‹å‰ - POST è¯·æ±‚ä½¿ç”¨ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//3.ç›´æ¥åœ¨Tomcatä¸­è¿›è¡Œé…ç½®ä»¥åGETè¯·æ±‚çš„æ•°æ®æ°¸è¿œéƒ½æ˜¯UTF-8ç¼–ç </span></span><br><span class="line"><span class="comment">//conf/server.xml</span></span><br><span class="line">&lt;Connector connectionTimeout=<span class="string">"20000"</span> port=<span class="string">"8080"</span> protocol=<span class="string">"HTTP/1.1"</span> redirectPort=<span class="string">"8443"</span> URLEncoding=<span class="string">"UTF-8"</span> /&gt;</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<p>åŸºç¡€ç¤ºä¾‹(1):<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.weiyigeek.httpServletRequest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Enumeration;</span><br><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpHeader</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">//0.é‡‡ç”¨ç½‘é¡µè¿›è¡Œå›æ˜¾</span></span><br><span class="line">    request.setCharacterEncoding(<span class="string">"utf-8"</span>);  <span class="comment">//è¾“å…¥çš„æ ¼å¼ä¸ä¹±ç </span></span><br><span class="line">    response.setContentType(<span class="string">"text/html"</span>);   <span class="comment">//è¾“å‡ºæ ¼å¼</span></span><br><span class="line">        </span><br><span class="line">    <span class="comment">//1.æšä¸¾é›†åˆ</span></span><br><span class="line">    response.getWriter().append(<span class="string">"------- è¯·æ±‚å¤´è·å–  ------- &lt;br/&gt;"</span>);</span><br><span class="line">    Enumeration&lt;String&gt; headers = request.getHeaderNames();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//2.å¾ªç¯è¿­ä»£è¯·æ±‚å¤´</span></span><br><span class="line">    <span class="keyword">while</span>(headers.hasMoreElements())</span><br><span class="line">    &#123;</span><br><span class="line">      String reqname = headers.nextElement();</span><br><span class="line">      String reqvalue = request.getHeader(reqname);</span><br><span class="line">      <span class="comment">//3.å‘ç½‘é¡µä¸­è¿›è¡Œè¾“å‡º</span></span><br><span class="line">      response.getWriter().append(reqname + <span class="string">":"</span> + reqvalue + <span class="string">"&lt;br/&gt;"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    response.getWriter().append(<span class="string">"&lt;br/&gt; ------- è·å–å¤šä¸ªå‚æ•° ------- &lt;br/&gt;"</span>);</span><br><span class="line">    <span class="comment">//4.æ–¹å¼1ï¼šè·å–å¤šä¸ªè¯·æ±‚å‚æ•°(å€¼å¾—å­¦ä¹ )</span></span><br><span class="line">    Map&lt;String, String[]&gt; map= request.getParameterMap(); <span class="comment">//map é›†åˆ</span></span><br><span class="line">    Set&lt;String&gt; keySet = map.keySet();  <span class="comment">//Set é›†åˆ</span></span><br><span class="line">    Iterator&lt;String&gt; iterator = keySet.iterator(); <span class="comment">//è¿­ä»£å™¨</span></span><br><span class="line">    <span class="keyword">while</span>(iterator.hasNext()) &#123;</span><br><span class="line">      String key = (String) iterator.next();</span><br><span class="line">      String[] value = map.get(key);  <span class="comment">//é»˜è®¤ä»¥é¦–æ¬¡å‡ºç°çš„å‚æ•°åç§°ä¸ºå‡†</span></span><br><span class="line">      </span><br><span class="line">      <span class="comment">//5.éªŒè¯å­˜åœ¨å¤šä¸ªç›¸åŒçš„å‚æ•°</span></span><br><span class="line">      <span class="keyword">if</span>(value.length &gt; <span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; value.length; i++) &#123;</span><br><span class="line">          String val = <span class="keyword">new</span> String(value[i].getBytes(<span class="string">"ISO-8859-1"</span>),<span class="string">"utf-8"</span>); <span class="comment">// é˜²æ­¢è¾“å…¥è¾“å‡ºçš„ä¸­æ–‡ä¹±ç (ç»ˆç«¯|ç½‘é¡µ)</span></span><br><span class="line">          response.getWriter().append(key+ <span class="string">":"</span> + val + <span class="string">"&lt;br/&gt;"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        response.getWriter().append(key+ <span class="string">":"</span> + value[<span class="number">0</span>] + <span class="string">"&lt;br/&gt;"</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//6.æ–¹å¼2ï¼šè·å–è¯·æ±‚çš„å‚æ•°(ä¸­æ–‡è¾“å‡ºä¸ä¹±ç )</span></span><br><span class="line">  	    Enumeration&lt;String&gt; para = request.getParameterNames();</span><br><span class="line">  	    <span class="keyword">while</span>(para.hasMoreElements())</span><br><span class="line">  	    &#123;</span><br><span class="line">  	    	String paraname = para.nextElement();</span><br><span class="line">  	    	String[] value = request.getParameterValues(paraname);</span><br><span class="line">  	    	<span class="keyword">if</span>(value.length &gt; <span class="number">1</span>) &#123;</span><br><span class="line">  	    		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; value.length; j++) &#123;</span><br><span class="line">  	  				String val = <span class="keyword">new</span> String(value[j].getBytes(<span class="string">"ISO-8859-1"</span>),<span class="string">"utf-8"</span>); <span class="comment">// é˜²æ­¢è¾“å…¥è¾“å‡ºçš„ä¸­æ–‡ä¹±ç (ç»ˆç«¯|ç½‘é¡µ)</span></span><br><span class="line">  	  	    		System.out.println(paraname +  <span class="string">" = "</span> + val);</span><br><span class="line">        &#125;</span><br><span class="line">  	    	&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">  	    		 System.out.println(paraname +  <span class="string">" = "</span> + value[<span class="number">0</span>] + <span class="string">"\n"</span>);</span><br><span class="line"></span><br><span class="line">  	    	&#125;</span><br><span class="line">  	    &#125;		</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="image-box">
                <a rel=ServletåŸºç¡€å…¥é—¨å­¦ä¹ 1 href="https://img.weiyigeek.top/2020/1/20200225162216.png" target="_blank" title="WeiyiGeek.æ‰§è¡Œç»“æœ" data-fancybox="images"><img src="https://img.weiyigeek.top/2020/1/20200225162216.png" alt="WeiyiGeek.æ‰§è¡Œç»“æœ" title="" class=""></a>
                <p>WeiyiGeek.æ‰§è¡Œç»“æœ</p>
            </figure>
<p><br></p>
<p>åŸºç¡€ç¤ºä¾‹(2):POSTè¯·æ±‚éªŒè¯è¾“å…¥è¾“å‡ºä¸ä¹±ç å’Œè¯·æ±‚ä¿¡æ¯è·å–;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpPostInfo</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    <span class="comment">//2.POSTè¯·æ±‚è¾“å‡ºä¸ä¹±ç </span></span><br><span class="line">    request.setCharacterEncoding(<span class="string">"UTF-8"</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//3.è·å–è¾“å‡ºPOSTè¯·æ±‚çš„å‚æ•°</span></span><br><span class="line">    System.out.println(<span class="string">"ç¼–ç è®¾ç½®å ---  name = "</span> + <span class="keyword">new</span> String(request.getParameter(<span class="string">"name"</span>).getBytes(<span class="string">"ISO-8859-1"</span>),<span class="string">"UTF-8"</span>) + <span class="string">"\n----"</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//4.è·å–å®¢æˆ·ç«¯çš„ä¿¡æ¯</span></span><br><span class="line">    System.out.println(<span class="string">"å½“å‰å®¢æˆ·ç«¯åè®®  ï¼š"</span> + request.getProtocol());</span><br><span class="line">    System.out.println(<span class="string">"å½“å‰è¯·æ±‚ç¼–ç  ï¼š"</span> + request.getCharacterEncoding());</span><br><span class="line">    System.out.println(<span class="string">"é¡¹ç›®åç§° :"</span> + request.getContextPath());</span><br><span class="line">    System.out.println(<span class="string">"é¡¹ç›®URL:"</span> + request.getRequestURI());</span><br><span class="line">    System.out.println(<span class="string">"æœ¬æœºä¿¡æ¯ ï¼š"</span> + request.getLocalName() + <span class="string">" - "</span> + request.getLocalAddr()  + <span class="string">" - "</span> + request.getLocalPort());</span><br><span class="line">    System.out.println(<span class="string">"å®¢æˆ·ç«¯ä¿¡æ¯ : "</span> + request.getRemoteUser() + <span class="string">" - "</span> + request.getRemoteAddr() + <span class="string">" - "</span> + request.getRemoteHost() + <span class="string">" - "</span> + request.getRemotePort());</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    <span class="comment">//1.POST è¯·æ±‚å…¥å£</span></span><br><span class="line">    System.out.println(<span class="string">"POST è¯·æ±‚....."</span>);</span><br><span class="line">    System.out.println(<span class="string">"ç¼–ç è®¾ç½®å‰ ---  name = "</span> + request.getParameter(<span class="string">"name"</span>));</span><br><span class="line">    doGet(request, response);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åŸºç¡€ä¿¡æ¯</span></span><br><span class="line">POST è¯·æ±‚.....</span><br><span class="line">ç¼–ç è®¾ç½®å‰ ---  name = ??????</span><br><span class="line">ç¼–ç è®¾ç½®å ---  name = å¼ ä¼Ÿ</span><br><span class="line">----</span><br><span class="line">å½“å‰å®¢æˆ·ç«¯åè®®  ï¼šHTTP/<span class="number">1.1</span></span><br><span class="line">å½“å‰è¯·æ±‚ç¼–ç  ï¼šUTF-<span class="number">8</span></span><br><span class="line">é¡¹ç›®åç§° :/HelloWorld</span><br><span class="line">é¡¹ç›®URL:/HelloWorld/HttpPostInfo</span><br><span class="line">æœ¬æœºä¿¡æ¯ ï¼šHackOne - <span class="number">192.168</span>.1.3 - <span class="number">8080</span></span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h5 id="3-HttpServletResponse"><a href="#3-HttpServletResponse" class="headerlink" title="3.HttpServletResponse"></a>3.HttpServletResponse</h5><p>æè¿°: æœåŠ¡å™¨ç«¯è¿”å›ç»™å®¢æˆ·ç«¯çš„å†…å®¹ä¿¡æ¯;<br><strong>1) å“åº”æ•°æ®</strong><br>åŸºç¡€è¯­æ³•:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">response.getWriter().write(<span class="string">"&lt;h1&gt;å­—ç¬¦é›†&lt;/h1&gt;"</span>); <span class="comment">//ä»¥å­—ç¬¦æµçš„æ–¹å¼å†™æ•°æ®</span></span><br><span class="line">response.getOutputStream().write(<span class="string">"Hello World!"</span>.getBytes()); <span class="comment">//å­—èŠ‚æµçš„æ–¹å¼å†™æ•°æ®</span></span><br></pre></td></tr></table></figure></p>
<p><br></p>
<p><strong>2) å“åº”ä¸­æ–‡ä¹±ç </strong><br>æè¿°:åœ¨è¯·æ±‚å“åº”ä¸­æœ‰ä¸­æ–‡å­—ç¬¦ä¹±ç çš„å­˜åœ¨ï¼Œåœ¨ä½¿ç”¨Tomcatçš„Servletè¿›è¡Œå†™å‡ºå»çš„æ–‡å­—é»˜è®¤æ˜¯ä»¥ISO-8859-1ç¼–ç å†™å‡ºï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é‡‡ç”¨æŒ‡å®šç¼–ç è¿›è¡Œå†™å‡ºé˜²æ­¢ä¹±ç ï¼›<br>åŸºç¡€è¯­æ³•:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä»¥å­—ç¬¦æµçš„æ–¹å¼ </span></span><br><span class="line">response.setHeader(<span class="string">"Content-type"</span>,<span class="string">"text/html; charset=UTF-8"</span>); <span class="comment">//è§„å®šæµè§ˆå™¨æ˜¾ç¤ºä»€ä¹ˆç¼–ç </span></span><br><span class="line">response.setCharacterEncoding(<span class="string">"UTF-8"</span>); <span class="comment">//å“åº”å†…å®¹ç¼–ç ï¼ˆæ ¹æ®æµè§ˆå™¨æœ‰å…³ï¼‰</span></span><br><span class="line">response.getWriter().write(<span class="string">"&lt;h1&gt;å­—ç¬¦é›†&lt;/h1&gt;"</span>); <span class="comment">//ä»¥å­—ç¬¦æµçš„æ–¹å¼å†™æ•°æ®</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»¥å­—èŠ‚æµçš„æ–¹å¼</span></span><br><span class="line">response.setContentType(<span class="string">"text/html; charset=UTF-8"</span>);   <span class="comment">//å“åº”å†…å®¹æ ¼å¼å’Œç¼–ç </span></span><br><span class="line">response.getOutputStream().write(<span class="string">"ä¸­æ–‡å­—ç¬¦ä¸²"</span>.getBytes(<span class="string">"UTF-8"</span>)); <span class="comment">//é»˜è®¤è¾“å‡ºæ˜¯UTF-8</span></span><br></pre></td></tr></table></figure></p>
<p>æ€»ç»“:</p>
<ul>
<li>ä¸ç®¡æ˜¯å­—èŠ‚æµè¿˜æ˜¯å­—ç¬¦æµç›´æ¥ä½¿ç”¨setContentType()æ–¹æ³•è¿›è¡Œå“åº”æ ¼å¼å’Œç¼–ç ï¼Œä¹‹åç›´æ¥å†™æ•°æ®å³å¯;</li>
</ul>
<p><br></p>
<p><strong>3) å“åº”å¤´è®¾ç½®</strong></p>
<p>åŸºç¡€è¯­æ³•:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">response.setStatus(<span class="number">302</span>) <span class="comment">//å“åº”çŠ¶æ€ç è®¾ç½®</span></span><br><span class="line">response.setHeader(<span class="string">"Location"</span>,<span class="string">"WeiyiGeek.top"</span>) <span class="comment">//å“åº”å¤´è®¾ç½®</span></span><br></pre></td></tr></table></figure></p>
<p><br></p>
<p><strong>4) Servletè¯·æ±‚é‡å®šå‘å’Œè½¬å‘</strong><br>æè¿°:é‡å®šå‘ä¸è½¬å‘çš„åŒºåˆ«;</p>
<ul>
<li>1.å®¢æˆ·ç«¯æ˜¾ç¤ºURLä¸åŒ:å‰è€…é‡å®šå‘çš„åœ°å€(<code>æ­¤æ—¶requestå¯¹è±¡å­˜å‚¨çš„æ•°æ®ä¸­åŸæ¥çš„å‚æ•°å°†ä¸ä¼šè¢«å¸¦äºº</code>)ï¼Œåè€…ç”¨æˆ·è®¿é—®çš„Servletåœ°å€ï¼ˆ<code>ä¼šå°†å‚æ•°ä¸€èµ·å¾…å…¥åˆ°è½¬å‘çš„é¡µé¢</code>ï¼‰;</li>
<li>2.è¯·æ±‚æ¬¡æ•°çš„ä¸åŒ:å‰è€…ç”±äºè¿”å›302çŠ¶æ€ç Clintè¯·æ±‚äº†ä¸¤æ¬¡,åè€…åªè¯·æ±‚äº†ä¸€æ¬¡;</li>
<li>3.è·³è½¬çš„é™åˆ¶:å‰è€…ä»»æ„å·¥ç¨‹è·³è½¬ï¼Œåè€…è‡ªå·±é¡¹ç›®å·¥ç¨‹è°ƒæ•´;</li>
<li>4.æ•ˆç‡å¯¹æ¯”:å‰è€…æ•ˆç‡è¾ƒåè€…ä½;</li>
</ul>
<p>åŸºç¡€è¯­æ³•:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é‡å®šå‘æ—©æœŸæ¡ˆä¾‹</span></span><br><span class="line">response.setStatus(<span class="number">302</span>);</span><br><span class="line">response.setHeader(<span class="string">"Location"</span>,<span class="string">"Login_Success.html"</span>);</span><br><span class="line"><span class="comment">//é‡å®šå‘å¸¸ç”¨æ¡ˆä¾‹ï¼ˆå³é‡æ–°å®šä½æ–¹å‘å³Login_Success.htmlç½‘é¡µåœ°å€ï¼‰</span></span><br><span class="line">response.sendRedirect(<span class="string">"Login_Success.html"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¯·æ±‚è½¬å‘æ¡ˆä¾‹ï¼ˆä½†æ˜¯è¯·æ±‚çš„URLè¿˜æ˜¯åŸåœ°å€ä¸æ˜¯Login_Success.htmlï¼ŒæœåŠ¡å™¨å†…éƒ¨è¿›è¡Œå¤„ç†äº†åç»­çš„å·¥ä½œï¼‰</span></span><br><span class="line"><span class="comment">//å¸¦å‚æ•°å’Œè·³è½¬ä½ç½®è¿›è¡Œæ‹¼æ¥åˆ°è¯·æ±‚çš„Servlet</span></span><br><span class="line">response.getRequestDispatcher(<span class="string">"Login_Success.html"</span>).forward(request,response);</span><br></pre></td></tr></table></figure></p>
<figure class="image-box">
                <a rel=ServletåŸºç¡€å…¥é—¨å­¦ä¹ 1 href="https://img.weiyigeek.top/2020/1/20200226123229.png" target="_blank" title="WeiyiGeek.åŒºåˆ«" data-fancybox="images"><img src="https://img.weiyigeek.top/2020/1/20200226123229.png" alt="WeiyiGeek.åŒºåˆ«" title="" class=""></a>
                <p>WeiyiGeek.åŒºåˆ«</p>
            </figure>
<p><br></p>
<p><strong>5) èµ„æºä¸‹è½½</strong></p>
<ul>
<li>1.é‡‡ç”¨è¶…è¿æ¥çš„å½¢å¼ä¸‹è½½å®šä½é™æ€èµ„æºï¼Œä½†æ˜¯é‡åˆ°jpgæˆ–è€…txtç±»å‹çš„æ•°æ®è¿˜æ˜¯å¯ä»¥ä¸‹è½½ï¼Œåªä¸è¿‡è¦å³é”®å¦å­˜ä¸ºï¼Œæ‰€ä»¥å½“æˆ‘ä»¬æ²¡æœ‰å†™Servletæ–‡ä»¶è¿›è¡Œå¤„ç†ï¼Œä¹Ÿèƒ½è¿›è¡Œè§£æï¼ŒåŸå› æ˜¯ç”±äºTomcaté‡Œæœ‰ä¸ªé»˜è®¤çš„Servletå«DefaultServletä¸“é—¨å¤„ç†æ”¾åœ¨TomcatæœåŠ¡å™¨ä¸Šçš„é™æ€èµ„æº;</li>
<li>2.æ‰‹åŠ¨ç¼–ç è¿›è¡Œä¸‹è½½ï¼Œè®¾ç½®å“åº”å¤´<code>Content-Disposition: attachment; filename=&quot;æ–‡ä»¶åç§°&quot;</code>;</li>
</ul>
<p>åŸºç¡€ç¤ºä¾‹:èµ„æºä¸‹è½½<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpFileDown</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    <span class="comment">//1.è¿”å›ç»™å®¢æˆ·ç«¯çš„æ–‡å­—å†…å®¹ä½¿ç”¨çš„é»˜è®¤ç¼–ç </span></span><br><span class="line">    response.setCharacterEncoding(<span class="string">"UTF-8"</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//2.æŒ‡å®šæµè§ˆå™¨è§£ææ•°æ®çš„æ ¼å¼å’Œç¼–ç </span></span><br><span class="line">    <span class="comment">//response.setHeader("Content-Type", "text/html; charset=UTF-8");</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//3.é‡‡ç”¨å­—ç¬¦æµè¿›è¡Œè¾“å‡ºä¸­æ–‡ä¸ä¹±ç </span></span><br><span class="line">    String filename = <span class="keyword">new</span> String(request.getParameter(<span class="string">"filename"</span>).getBytes(<span class="string">"ISO-8859-1"</span>),<span class="string">"UTF-8"</span>); <span class="comment">//ä¸‹è½½æ–‡ä»¶å¸¦ä¸­æ–‡å­—ç¬¦</span></span><br><span class="line">    <span class="comment">//response.getWriter().write("1.å­—ç¬¦æµï¼ˆæ–¹å¼ï¼‰ï¼šå½“å‰æ‚¨ä¸‹è½½çš„æ–‡ä»¶æ˜¯  " +  filename + "&lt;br/&gt;");</span></span><br><span class="line">        <span class="comment">//String csn = Charset.defaultCharset().name();		//getBytes()é»˜è®¤ç è¡¨</span></span><br><span class="line">        <span class="comment">//response.getWriter().append("2.getBytes()é»˜è®¤ç è¡¨:" + csn);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//4.é‡‡ç”¨å­—èŠ‚æµè¿›è¡ŒæŒ‡å®šç¼–ç è¾“å‡ºä¸­æ–‡ä¸ä¹±ç ï¼ˆå…¶å®getBytes()æ–¹æ³•çš„é»˜è®¤ç è¡¨å°±æ˜¯UTF-8ä¸Tomcaté»˜è®¤ç è¡¨æ— å…³ç³»ï¼‰</span></span><br><span class="line">    <span class="comment">//response.setContentType("text/html; charset=UTF-8");   //å“åº”å†…å®¹æ ¼å¼å’Œç¼–ç </span></span><br><span class="line">    </span><br><span class="line">    String path = getServletContext().getRealPath(<span class="string">"Config/"</span>+filename);</span><br><span class="line">    String name = <span class="string">"3.å­—èŠ‚æµï¼ˆæ–¹å¼ï¼‰ï¼šå½“å‰æ‚¨ä¸‹è½½çš„æ–‡ä»¶è·¯å¾„æ˜¯  ï¼š"</span>  + path; </span><br><span class="line">    <span class="comment">//response.getOutputStream().write(name.getBytes("UTF-8"));  //æ³¨æ„ä¸èƒ½å’Œå­—ç¬¦æµåŒæ—¶å­˜åœ¨ï¼›</span></span><br><span class="line">    <span class="comment">//response.getOutputStream().print(name);</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//5.è®¾ç½®ä¸‹è½½æ–‡ä»¶çš„å“åº”å¤´å¹¶ä¸”å¦‚æœå­˜åœ¨ä¸­æ–‡åç§°éœ€è¦å¯¹å…¶è¿›è¡Œç¼–ç ï¼›</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">		 * å¦‚æœIEæˆ–è€…Chromeä½¿ç”¨çš„URLEncodingç¼–ç </span></span><br><span class="line"><span class="comment">		      å¦‚æœæ˜¯Firefoxä½¿ç”¨çš„æ˜¯base64ç¼–ç </span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">    </span><br><span class="line">    String clientType = request.getHeader(<span class="string">"User-Agent"</span>);</span><br><span class="line">    <span class="comment">//æ³¨æ„å¤§å°å†™ï¼Œå½“ç„¶ä¸ºäº†æ–¹ä¾¿æ‚¨å¯ä»¥</span></span><br><span class="line">    <span class="keyword">if</span>(clientType.contains(<span class="string">"Firefox"</span>)) </span><br><span class="line">    &#123;</span><br><span class="line">      filename = base64EncodeFileName(filename);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      filename = URLEncoder.encode(filename,<span class="string">"UTF-8"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    response.setHeader(<span class="string">"Content-Disposition"</span>, <span class="string">"attachment; filename="</span>+filename);	<span class="comment">//è¿”å›æ–‡ä»¶ä¸­æ–‡ä¸ä¹±ç </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//6.è¯»å–æ–‡ä»¶åˆ°å­—èŠ‚æµç„¶åè¿›è¡Œä¸‹è½½</span></span><br><span class="line">    InputStream is = <span class="keyword">new</span> FileInputStream(path); <span class="comment">//é‡‡ç”¨ç»å¯¹è·¯å¾„è¿›è¡Œè¯»å–æ–‡ä»¶</span></span><br><span class="line">    OutputStream os = response.getOutputStream(); </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">byte</span>[] buf = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">    <span class="keyword">while</span>((len = is.read(buf)) != -<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="comment">//7.å†™å‡ºæ–‡ä»¶</span></span><br><span class="line">      os.write(buf, <span class="number">0</span>, len);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//8.å…³é—­è¾“å…¥è¾“å‡ºæµ</span></span><br><span class="line">    os.close();</span><br><span class="line">    is.close();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">    doGet(request, response);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//è¿›è¡ŒBase64ç¼–ç </span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">base64EncodeFileName</span><span class="params">(String fileName)</span> </span>&#123;</span><br><span class="line">    BASE64Encoder base64Encoder = <span class="keyword">new</span> BASE64Encoder();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">"=?UTF-8?B?"</span> + <span class="keyword">new</span> String(base64Encoder.encode(fileName.getBytes(<span class="string">"UTF-8"</span>))) + <span class="string">"?="</span>;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>æ‰§è¡Œç»“æœ:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ä½¿ç”¨getWriter()</span></span><br><span class="line">1.å­—ç¬¦æµï¼ˆæ–¹å¼ï¼‰ï¼šå½“å‰æ‚¨ä¸‹è½½çš„æ–‡ä»¶æ˜¯ WeiyiGeek.Properties</span><br><span class="line">2.getBytes()é»˜è®¤ç è¡¨:GBK</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä½¿ç”¨getOutPutStream() æ³¨æ„ä¸èƒ½å’Œå­—ç¬¦æµåŒæ—¶å­˜åœ¨</span></span><br><span class="line">3.å­—èŠ‚æµï¼ˆæ–¹å¼ï¼‰ï¼šå½“å‰æ‚¨ä¸‹è½½çš„æ–‡ä»¶è·¯å¾„æ˜¯  ï¼šD:\apache-tomcat-7.0.100\wtpwebapps\HelloWorld\Config\WeiyiGeek.Properties</span><br></pre></td></tr></table></figure></p>
<figure class="image-box">
                <a rel=ServletåŸºç¡€å…¥é—¨å­¦ä¹ 1 href="https://img.weiyigeek.top/2020/1/20200226011304.png" target="_blank" title="WeiyiGeek.æ‰§è¡Œç»“æœ" data-fancybox="images"><img src="https://img.weiyigeek.top/2020/1/20200226011304.png" alt="WeiyiGeek.æ‰§è¡Œç»“æœ" title="" class=""></a>
                <p>WeiyiGeek.æ‰§è¡Œç»“æœ</p>
            </figure>
<p>æ³¨æ„äº‹é¡¹:</p>
<ul>
<li>é’ˆå¯¹äºæµè§ˆå™¨ç±»å‹å¯¹ä¸‹è½½çš„æ–‡ä»¶åç§°åšç¼–ç å¤„ç†ï¼ŒFireé‡‡ç”¨Base64ç¼–ç è€ŒIEå’ŒGoogleé‡‡ç”¨URLEncodingç¼–ç </li>
</ul>
<hr>

<h4 id="0x06-æœ¬æ–‡æ€»ç»“"><a href="#0x06-æœ¬æ–‡æ€»ç»“" class="headerlink" title="0x06 æœ¬æ–‡æ€»ç»“"></a>0x06 æœ¬æ–‡æ€»ç»“</h4><p><strong>ServletContext</strong><br>ä»‹ç»:ä»€ä¹ˆæ˜¯ServletContext?</p>
<ul>
<li>ç­”:æœåŠ¡å™¨åœ¨å¯åŠ¨çš„æ—¶å€™ç»™æ¯ä¸€ä¸ªåº”ç”¨ç¨‹åºéƒ½åˆ›å»ºä¸€ä¸ªServletContextï¼Œå¹¶ä¸”æœ‰ä¸”åªæœ‰ä¸€ä¸ªï¼›</li>
</ul>
<p>ä½œç”¨:æœ‰ä»€ä¹ˆç”¨?</p>
<ul>
<li>ç­”:è·å–å…¨å±€å‚æ•° / è·å–å·¥ç¨‹ä¸‹çš„èµ„æº / å­˜å–æ•°æ®å’Œå…±äº«æ•°æ®</li>
</ul>
<p>ä¾‹å­:æ€ä¹ˆç”¨?<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è·å–å…¨å±€å‚æ•°</span></span><br><span class="line">getServletContext().getInitParams();</span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å–å·¥ç¨‹ä¸‹çš„èµ„æº</span></span><br><span class="line">getServletContext().getRealPath();</span><br><span class="line">getServletContext().getResourceAsStream();</span><br><span class="line"><span class="keyword">this</span>.getClass().getClassLoader();</span><br><span class="line"></span><br><span class="line"><span class="comment">//å­˜å–çš„æ•°æ®(åœ¨åŒä¸€å·¥ç¨‹ä¸‹)</span></span><br><span class="line">getServletContext.setAttribute()</span><br><span class="line">getServletContext.getAttribute()</span><br></pre></td></tr></table></figure></p>
<p>å®é™…é—®é¢˜:ä¸ºä»€ä¹ˆä½¿ç”¨å®ƒä¼šäº§ç”Ÿè¿™ä¸ªæ ·çš„æ ·å­ï¼Œå…¶ä¸­æœ‰å…¶ä»–çš„å‚æ•°;</p>
<p><br></p>
<p><strong>ServletConfig</strong><br>ä»‹ç»:ä»€ä¹ˆæ˜¯ServletConfig?</p>
<ul>
<li>ç­”:æ˜¯åœ¨é¡¹ç›®å¯åŠ¨éƒ¨ç½²çš„æ—¶å€™æˆ‘ä»¬åœ¨web.xmlä¸­è¿›è¡Œå¯¹Servletçš„é…ç½®å½“æˆ‘ä»¬éœ€è¦è·å–Servleté…ç½®ä¿¡æ¯çš„æ—¶å€™å°±éœ€è¦å®ƒ;</li>
</ul>
<p>ä½œç”¨:æœ‰ä»€ä¹ˆç”¨?</p>
<ul>
<li>ç­”:è·å–åœ¨Servleté…ç½®web.xmlæ–‡ä»¶ä¸­å‚æ•°;</li>
</ul>
<p>ä¾‹å­:æ€ä¹ˆç”¨?<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è·å–Web.xmlä¸­çš„Servleté…ç½®ä¿¡æ¯</span></span><br><span class="line">getServletConfig().getInitParams();</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<p><strong>HttpServletResquest</strong><br>ä»‹ç»:</p>
<ul>
<li>ç­”:ä¸€ä¸ªè¯·æ±‚å¯¹è±¡ç”¨äºå°è£…å®¢æˆ·ç«¯æäº¤è¿‡æ¥çš„ä¿¡æ¯ï¼›</li>
</ul>
<p>ä½œç”¨:</p>
<ul>
<li>ç­”:è·å–å¤´ / è·å–å®¢æˆ·ç«¯å‚æ•° / è·å–æäº¤è¿‡æ¥çš„æ•°æ®;</li>
</ul>
<p>ä¾‹å­:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">request.getParameter(<span class="string">"key"</span>);</span><br></pre></td></tr></table></figure></p>
<p>å­˜åœ¨é—®é¢˜: GET/POSTè¯·æ±‚ä¹±ç ï¼ˆéœ€è¦è®¾ç½®ç¼–ç ï¼‰</p>
<p><br></p>
<p><strong>HttpServletResquest</strong><br>ä»‹ç»:</p>
<ul>
<li>ç­”:è¿™æ˜¯ä¸€ä¸ªå“åº”å¯¹è±¡ï¼Œæ˜¯æœåŠ¡å™¨è¦ç»™å®¢æˆ·ç«¯è¿”å›çš„æ•°æ®ï¼Œéƒ½é è¿™ä¸ªå¯¹è±¡æ¥å®Œæˆ;</li>
</ul>
<p>ä½œç”¨:</p>
<ul>
<li>ç­”:è¿”å›ä¸åŒæ ¼å¼çš„å†…å®¹ / é¡µé¢çŠ¶æ€è®¾ç½®å’Œè·³è½¬</li>
</ul>
<p>ä¾‹å­ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¿”å›ä¸åŒæ ¼å¼(ä¸¤ç§æ–¹å¼)</span></span><br><span class="line">response.setHeader(<span class="string">"Content-Type"</span>, <span class="string">"text/html; charset=UTF-8"</span>);</span><br><span class="line">response.setContentType(<span class="string">"text/html; charset=UTF-8"</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">//çŠ¶æ€ç è®¾ç½®</span></span><br><span class="line">response.setStatus(<span class="number">302</span>);</span><br><span class="line">response.setHeader(<span class="string">"Location"</span>,<span class="string">""</span>)</span><br></pre></td></tr></table></figure></p>

        </div>
        
        <!-- å¾®ä¿¡å…¬ä¼—å·å…³æ³¨/æ–‡ç« ç‰ˆæƒå¤åˆ¶ -->
        
        <div id="btw-mask" style="position: fixed; top: 0px; right: 0px; bottom: 0px; left: 0px; opacity: 0.7; z-index: 999; background: rgb(0, 0, 0); display:none"></div>
<div id="btw-modal" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 360px; text-align: center; font-size: 13px; background: rgb(255, 255, 255); border-radius: 10px; z-index: 9999; font-family: PingFangSC-Regular, sans-serif;display:none">
<span id="btw-modal-close-btn" style="position: absolute; top: 5px; right: 15px; line-height: 1.8; font-size: 15px; cursor: pointer; opacity: 0.2; z-index: 9999; color: rgb(0, 0, 0); background: none; border: none; outline: none;">X</span>
<p id="btw-modal-header" style="margin-top: 40px; line-height: 1.8; font-size: 13px; ">
<b style="color:#6190e8;">ä½ å¥½çœ‹å‹,æ¬¢è¿å…³æ³¨åšä¸»å¾®ä¿¡å…¬ä¼—å·å“Ÿ! â¤ <br> è¿™å°†æ˜¯æˆ‘æŒç»­æ›´æ–°æ–‡ç« çš„åŠ¨åŠ›æºæ³‰ï¼Œè°¢è°¢æ”¯æŒï¼(à¹‘â€²á´—â€µà¹‘) </b> <br> å¦‚ä¸æƒ³å…³æ³¨è¯·ç‚¹å‡»å³ä¸Šè§’çš„ã€Xã€‘å³å¯å…³é—­ç»§ç»­æµè§ˆæ–‡ç« .<br>  <b style="color:red;"> æ¸©é¦¨æç¤º: æœªè§£é”çš„ç”¨æˆ·ä¸èƒ½ç²˜è´´å¤åˆ¶æ–‡ç« å†…å®¹å“Ÿ!</b> <br>
<br>Method 1.Please visit <strong><a href="https://twitter.com/WeiyiGeek" target="_blank" rel="noopener" style="color: rgb(240, 65, 52);text-decoration:underline;">ã€My Twitterã€‘</a></strong>. There is an article verification code in the homepage.
<br>æ–¹å¼2.è¯·è®¿é—®æœ¬åšä¸»çš„Bç«™<strong><a href="https://space.bilibili.com/385802642" target="_blank" rel="noopener" style="color: rgb(240, 65, 52);text-decoration:underline;">ã€WeiyiGeekã€‘</a></strong>é¦–é¡µå…³æ³¨UPä¸»,<br>å°†è‡ªåŠ¨éšæœºè·å–è§£é”éªŒè¯ç ã€‚
<br>æ–¹å¼3.æ‰«ä¸€æ‰«ä¸‹æ–¹äºŒç»´ç ï¼Œå…³æ³¨æœ¬ç«™<strong>å®˜æ–¹å…¬ä¼—å·</strong><br>
å›å¤ï¼š<strong style="color: rgb(240, 65, 52);">éªŒè¯ç </strong>
å°†è·å–<strong style="color: rgb(240, 65, 52);">è§£é”(æœ‰æ•ˆæœŸ7å¤©)</strong>æœ¬ç«™æ‰€æœ‰æŠ€æœ¯æ–‡ç« å“Ÿ!</p>
<img src="/img/wechat-search.png" style="width: 300px; margin-top: 10px;">
<div id="btw-modal-input-code" style="margin-top: 20px; background: rgb(255, 255, 255);">
  <input id="btw-modal-input" type="number" minlength="4" maxlength="4" placeholder="è¯·è¾“å…¥éªŒè¯ç |Verification Code"
    style="width: 165px; height: 32px; line-height: 32px; padding: 0px 10px; margin: 0px 10px; font-size: 13px; text-rendering: auto; text-transform: none; cursor: text; outline: none; box-sizing: border-box; border: 1px solid rgb(221, 221, 221); -webkit-appearance: textfield; background-color: white; -webkit-rtl-ordering: logical;"/>
  <button id="btw-submit-btn" onclick="yzm_vertify()"
    style="padding: 0px 20px; height: 32px; font-size: 14px; outline: none; border: none; color: rgb(255, 255, 255); background: rgb(222, 104, 109); cursor: pointer;">æ
    äº¤</button> </div>
<p id="btw-footer" style="margin: 40px 0px 20px; color: rgb(153, 153, 153);">@WeiyiGeek - ä¸ºäº†èƒ½åˆ°è¿œæ–¹ï¼Œè„šä¸‹çš„æ¯ä¸€æ­¥éƒ½ä¸èƒ½å°‘</p>
</div>
           

        <!-- Google å¹¿å‘Š -->
        
<ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-9134434519967436" data-ad-slot="7905848205"></ins>
  

        
<hr/>
<div style="text-align: center;font-weight: bold;">
  <p> æ¬¢è¿å„ä½å¿—åŒé“åˆçš„æœ‹å‹ä¸€èµ·å­¦ä¹ äº¤æµï¼Œå¦‚æ–‡ç« æœ‰è¯¯è¯·åœ¨ä¸‹æ–¹ç•™ä¸‹æ‚¨å®è´µçš„ç»éªŒçŸ¥è¯†ï¼Œä¸ªäººé‚®ç®±åœ°å€<b style="color:#ff654e"><code>ã€master#weiyigeek.topã€‘</code></b>æˆ–è€…ä¸ªäººå…¬ä¼—å·<b style="color:#ff654e"><code>ã€WeiyiGeekã€‘</code></b>è”ç³»æˆ‘ã€‚ </p>
  <p> æ›´å¤šæ–‡ç« æ¥æºäº<b style="color:#03a9f4">ã€WeiyiGeek Blog - ä¸ºäº†èƒ½åˆ°è¿œæ–¹ï¼Œè„šä¸‹çš„æ¯ä¸€æ­¥éƒ½ä¸èƒ½å°‘ã€‘</b>, ä¸ªäººé¦–é¡µåœ°å€( <a style="color: #03a9f4;" href="https://weiyigeek.top" target="_blank"> https://weiyigeek.top </a> )</p>
<!-- 

  <ul style="font-weight: bolder;">
    <li>
      <p><span style="color: #03a9f4">echo&nbsp;&nbsp;"ã€ç‚¹ä¸ªèµã€‘ï¼ŒåŠ¨åŠ¨ä½ é‚£ç²—å£®çš„æ‹‡æŒ‡æˆ–è€…èŠŠèŠŠç‰æ‰‹ï¼Œäº²ï¼"</span></p>
    </li>
    <li>
      <p><span style="color: #ff9201">printf("%s",&nbsp;"ã€æŠ•ä¸ªå¸ã€‘ï¼Œä¸‡æ°´åƒå±±æ€»æ˜¯æƒ…ï¼ŒæŠ•ä¸ªç¡¬å¸è¡Œä¸è¡Œï¼Œäº²ï¼")</span></p>
    </li>
    <li>
      <p><span style="color: #02a2ff">fmt.Printf("ã€æ”¶ä¸ªè—ã€‘ï¼Œé˜…åå³ç„šä¸åƒç°ï¼Œäº²ï¼")&nbsp;&nbsp;</span></p>
    </li>
    <li>
      <p><span style="color:red">console.info("ã€è½¬ä¸ªå‘ã€‘ï¼Œè®©æ›´å¤šçš„å¿—åŒé“åˆçš„æœ‹å‹ä¸€èµ·å­¦ä¹ äº¤æµï¼Œäº²ï¼")</span></p>
    </li>
    <li>
      <p><span style="color: #ff654e">System.out.println("ã€å…³ä¸ªæ³¨ã€‘ï¼Œåç»­æµè§ˆæŸ¥çœ‹ä¸è¿·è·¯å“Ÿï¼Œäº²ï¼")</span></p>
    </li>
  </ul> -->
  <div>
    <img src="/img/share-wechat.jpg" class="img-responsive" alt="æ‰«æFollow(å…³æ³¨)WeiyiGeekå…¬ä¼—å·ä¸Visit(æµè§ˆ)æå®¢å…¨æ ˆä¿®ç‚¼å°ç¨‹åº" >
    <p>ä¸“æ ä¹¦å†™ä¸æ˜“ï¼Œå¦‚æœæ‚¨è§‰å¾—è¿™ä¸ªä¸“æ è¿˜ä¸é”™çš„ï¼Œè¯·ç»™è¿™ç¯‡ä¸“æ  <b style="color: red;">ã€ç‚¹ä¸ªèµã€æŠ•ä¸ªå¸ã€æ”¶ä¸ªè—ã€å…³ä¸ªæ³¨ã€è½¬ä¸ªå‘ã€èµä¸ªåŠ©ã€‘</b>ï¼Œè¿™å°†å¯¹æˆ‘çš„è‚¯å®šï¼Œæˆ‘å°†æŒç»­æ•´ç†å‘å¸ƒæ›´å¤šä¼˜è´¨åŸåˆ›æ–‡ç« ï¼ã€‚</p>
    <img src="/img/weiyigeek.jpg" class="img-responsive" alt="WeiyiGeek-banner">
  </div>
</div>
  <hr>
  

  <blockquote class="post-copyright">
    <div class="content">
      
        
<span class="post-time">
    æœ€åæ›´æ–°æ—¶é—´ï¼š<time datetime="2023-01-31T02:29:10.672Z" itemprop="dateUpdated">2023-01-31 10:29:10</time>
</span><br>


        <span>æ–‡ç« åŸå§‹è·¯å¾„ï¼š<a href="https://github.com/WeiyiGeek/blog/edit/master/source/_posts/ç¼–ç¨‹ä¸–ç•Œ/JavaWeb/1.Servlet/ServletåŸºç¡€å…¥é—¨å­¦ä¹ 1.md" target="_blank" rel="noopener noreferrer">_posts/ç¼–ç¨‹ä¸–ç•Œ/JavaWeb/1.Servlet/ServletåŸºç¡€å…¥é—¨å­¦ä¹ 1.md</a></span><br>
         <span class="copy-copyright">è½¬è½½æ³¨æ˜å‡ºå¤„ï¼ŒåŸæ–‡åœ°å€ï¼š<a href="/2020/2-11-301.html" target="_blank" rel="external">https://blog.weiyigeek.top/2020/2-11-301.html</a></span><br>æœ¬ç«™æ–‡ç« å†…å®¹éµå¾ª <a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">çŸ¥è¯†å…±äº« ç½²å - éå•†ä¸šæ€§ - ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…åè®®</a> 
    </div>
    <footer>
      <a href="https://blog.weiyigeek.top">
        <img src="/img/avatar.jpg" alt="WeiyiGeek">
        WeiyiGeek
      </a>
    </footer>
  </blockquote>


        
            <div class="page-reward">
  <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-rectangle waves-light">â˜•ï¸ è¯·ä½œè€…å–æ¯å’–å•¡!</a>
</div>
            
        
        <div class="post-footer">
            
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Servlet/" rel="tag">Servlet</a></li></ul>

            <div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://blog.weiyigeek.top/2020/2-11-301.html&title=ã€ŠServletåŸºç¡€å…¥é—¨å­¦ä¹ 1ã€‹ â€” WeiyiGeek Blog&pic=https://blog.weiyigeek.top/img/avatar.jpg" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.weiyigeek.top/2020/2-11-301.html&title=ã€ŠServletåŸºç¡€å…¥é—¨å­¦ä¹ 1ã€‹ â€” WeiyiGeek Blog&source=[TOC]" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.weiyigeek.top/2020/2-11-301.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€ŠServletåŸºç¡€å…¥é—¨å­¦ä¹ 1ã€‹ â€” WeiyiGeek Blog&url=https://blog.weiyigeek.top/2020/2-11-301.html&via=https://blog.weiyigeek.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://blog.weiyigeek.top/2020/2-11-301.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>

        </div>
        
          <!-- è¯„è®ºç»„ä»¶ -->


<div id="gitalk-container"></div>
<script type="text/javascript" src="/js/plugins/gitalk.min.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/custom/gitalk.init.js?v=1.6.6"></script>
        
    </div>
    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="prev">
      <a href="/2020/2-11-300.html" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">Tomcatåœ¨Javaå¼€å‘ä¸­çš„ä½¿ç”¨ç¬”è®°</h4>
      </a>
    </div>
  

  
    <div class="next">
      <a href="/2020/2-10-46.html" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">MySQLæ•°æ®åº“ç¼–ç¨‹åŸºç¡€å…¥é—¨4</h4>
      </a>
    </div>
  
</nav>


    
    
        <aside class="post-widget">
            <nav class="post-toc-wrap" id="post-toc">
                <strong>ç›®å½•</strong>
                <ol class="post-toc"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#0x01-å¿«é€Ÿå…¥é—¨"><span class="post-toc-number">1.</span> <span class="post-toc-text">0x01 å¿«é€Ÿå…¥é—¨</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#0x02-é¡¹ç›®å‘å¸ƒ"><span class="post-toc-number">2.</span> <span class="post-toc-text">0x02 é¡¹ç›®å‘å¸ƒ</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#0x03-é¡¹ç›®æ‰“åŒ…"><span class="post-toc-number">3.</span> <span class="post-toc-text">0x03 é¡¹ç›®æ‰“åŒ…</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#0x04-ServletåŸºç¡€"><span class="post-toc-number">4.</span> <span class="post-toc-text">0x04 ServletåŸºç¡€</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#0x05-Servletè¿›é˜¶"><span class="post-toc-number">5.</span> <span class="post-toc-text">0x05 Servletè¿›é˜¶</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#0x06-æœ¬æ–‡æ€»ç»“"><span class="post-toc-number">6.</span> <span class="post-toc-text">0x06 æœ¬æ–‡æ€»ç»“</span></a></li></ol>
            </nav>
            <div class="toc-bar"><div>
        </aside>
    
    <!-- 
  <div class="post-wechat" style="position:fixed;top: 360px;bottom: 500px;right: 3%;width: 190px;text-align: center;">
    <p><b>å…³æ³¨ã€å…¨æ ˆå·¥ç¨‹å¸ˆä¿®ç‚¼æŒ‡å—ã€‘</b></p>
    <img src="/img/wechat-gzh.jpg" class="img-responsive" alt="weiyigeek">
    <p><b>æ¬¢è¿æ·»åŠ ã€ä½œè€…ã€‘å¾®ä¿¡</b></p>
    <img src="/img/wehat.jpg" class="img-responsive" alt="weiyigeek">
  </div>
 -->

    <!-- æ”¯ä»˜å®å¾®ä¿¡æ–‡ç« èµèµ -->
    
      <div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        å¦‚æœæ­¤ç¯‡æ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œå°±è¯·ä½œè€…å–æ¯ Coffee â˜•ï¸â˜•ï¸!
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardwechat" src="/img/reward-wechat.jpg" height="250" height="250" alt="å¾®ä¿¡æ‰“èµäºŒç»´ç ">
            <img id="rewardalipay" src="/img/reward-alipay.png" height="250" height="250" alt="æ”¯ä»˜å®æ‰“èµäºŒç»´ç ">
        </div>
        
        <label class="reward-toggle">
            <!-- <input id="rewardToggle" type="checkbox" class="reward-toggle-check" data-wechat="/img/reward-wechat.jpg" data-alipay="/img/reward-alipay.png"> -->
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">å¾®ä¿¡</span>
                <span class="reward-toggle-item alipay">æ”¯ä»˜å®</span>
            </div>
        </label>
        
    </div>
</div>

      
</article>
</div>

    </main>
    <footer class="footer ">
    
    <div class="top">
        
            <p>
    <span>Linksï¼š</span>
    
    <span class="blogroll-item">
        <a href="https://weiyigeek.top" target="_blank">https://weiyigeek.top</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.weiyigeek.top" target="_blank">https://blog.weiyigeek.top</a>
    </span>
    
    <span class="blogroll-item">
        <a href="/img/share-wechat.jpg" target="_blank">å…¬ä¼—è´¦å·</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://space.bilibili.com/385802642/article" target="_blank">å“”å“©å“”å“©ä¸“æ </a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://github.com/weiyigeek" target="_blank">åšä¸»Github</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://gitee.com/WeiyiGeek" target="_blank">åšä¸»Gitee</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.zhihu.com/people/weiyiSec" target="_blank">çŸ¥ä¹</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.cnblogs.com/WeiyiGeek" target="_blank">åšå®¢å›­</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://my.oschina.net/weiyigeek" target="_blank">OSCHINA</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.toutiao.com/c/user/token/MS4wLjABAAAAqcPSoMqfctaEqJpGSF775eeCjWkrop4AOyLITdMx-L78F5iXzfQcSRM5sY4dq3wR" target="_blank">ä»Šæ—¥å¤´æ¡</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.csdn.net/u013072756?type=lately" target="_blank">CSDN</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.jianshu.com/u/5199a1104739" target="_blank">ç®€ä¹¦</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://cloud.tencent.com/developer/user/1389665/articles" target="_blank">è…¾è®¯äº‘ç¤¾åŒº</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://cuttlefish.baidu.com/shop/75c5dbd8d15abe23482f4d40" target="_blank">ç™¾åº¦æ–‡åº“</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://author.baidu.com/home?from=blog&app_id=1726736601523415" target="_blank">ITæå®¢çŸ¥è¯†åˆ†äº«</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.51cto.com/weiyigeek" target="_blank">51CTOåšå®¢</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://juejin.cn/user/122767337595934" target="_blank">æ˜é‡‘</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://weibo.com/a/hot/7622022703618049_1.html" target="_blank">å¾®åšæ–‡ç« </a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.xiaohongshu.com/user/profile/627c98bb000000001000e7ba" target="_blank">å°çº¢ä¹¦</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://segmentfault.com/u/weiyigeek" target="_blank">Segmentfault</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.modb.pro/u/506690" target="_blank">å¢¨å¤©è½®</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.douyin.com/user/MS4wLjABAAAAMSBdMja6XLsdmzafb0RNbFeBemIOk38K1PaOClZeI1Q" target="_blank">æŠ–éŸ³ä¸»é¡µ</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.kuaishou.com/profile/3xfbrsrhd2i69x9" target="_blank">å¿«æ‰‹ä¸»é¡µ</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.ixigua.com/home/3984243135350727" target="_blank">è¥¿ç“œè§†é¢‘</a>
    </span>
    
</p>

        
    </div>
    
    <div class="bottom">
      <p>
        <span>WeiyiGeek &copy; 2018 - 2023 <a href="https://weiyigeek.top" target="_blank" rel="noopener">weiyigeek.top</a> All rights reserved.å”¯ä¸€æå®¢ITçŸ¥è¯†åˆ†äº« ç‰ˆæƒæ‰€æœ‰ </span>
        
        <span>
          Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/weiyigeek" target="_blank">mellow</a>
        </span>
        
        <br/><a id="SiteRunTime"></a>
        <br/>è®¿é—®ç»Ÿè®¡
        <span><a href="/sitemap.xml" target="_blank" rel="Sitemaps-ç«™ç‚¹åœ°å›¾">Sitemaps</a> </span>
        <span><a href="/baidusitemap.xml" target="_blank" rel="baidusitemaps-ç™¾åº¦ç«™ç‚¹åœ°å›¾">ç«™ç‚¹åœ°å›¾</a> </span>
        <!-- 
  -->
        <br/>ICPå¤‡æ¡ˆå·<span><a href="https://beian.miit.gov.cn" target="_blank">æ¸ICPå¤‡2022003447å·</a></span>
        <br/>
        <div id="cc-myssl-id">
          <a href="https://myssl.com/blog.weiyigeek.top?from=mysslid" target="_blank" rel="noopener">
            <img src="https://static.myssl.com/res/images/myssl-id1.png" alt="MySSLå®‰å…¨è®¤è¯" style="max-height:50px;display:block;margin:0 auto">
          </a>
        </div>
      </p>
    </div>
</footer>



    <div class="mask" id="mask"></div>

<div id="go" class="waves-effect waves-light">
  <a href="javascript:;" id="goqrcode"> <span class="icon icon-lg icon-qrcode"></span> </a>
  <a href="javascript:;" id="gotop"> <span class="icon icon-lg icon-chevron-up"></span></a>
</div>





<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://blog.weiyigeek.top/2020/2-11-301.html&title=ã€ŠServletåŸºç¡€å…¥é—¨å­¦ä¹ 1ã€‹ â€” WeiyiGeek Blog&pic=https://blog.weiyigeek.top/img/avatar.jpg" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.weiyigeek.top/2020/2-11-301.html&title=ã€ŠServletåŸºç¡€å…¥é—¨å­¦ä¹ 1ã€‹ â€” WeiyiGeek Blog&source=[TOC]" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.weiyigeek.top/2020/2-11-301.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€ŠServletåŸºç¡€å…¥é—¨å­¦ä¹ 1ã€‹ â€” WeiyiGeek Blog&url=https://blog.weiyigeek.top/2020/2-11-301.html&via=https://blog.weiyigeek.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://blog.weiyigeek.top/2020/2-11-301.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>æ‰«ä¸€æ‰«ï¼Œåˆ†äº«åˆ°å¾®ä¿¡</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACKElEQVR42u3ay3KDMAwF0P7/T9NtO3n0XivpBHy8YggYDgtFlvz1FY/jx0h+PW7Go7vyp7xgYGBgnJZxPB3Pr8kxj1799nzy3DvzYGBgbMBop04Ca46fsDEwMDDaa9bOTJ6LgYGBsXacL4M/6H8DAwPj4xnJIjZJ+PJCW3LXW9biGBgYJ2TkVff/P35LfwMDA+NUjKMc877hq97k15wYGBiXZuQBLkkW1146WqAmM2BgYGzGaDdVtC+aF+DyMxgYGFdltOlgW/bKi/6Tkh8GBsYOjLb0P98olrcHovQRAwNjA0a7BC2yzrKp2Samd/43MDAwLseYlNXaBuc75n9BdRADA+PjGXmoff74tRnyYP1H0MfAwNiA0Za98pQxTz3XPiIGBsYOjLUkL2895k2FtSVx8S0xMDBOy2gLZG2COCm05R8IAwPj2oy1Qli+waItwE3anxgYGDsw8mSuDZFrbdEiyGJgYGzJmJf415LLNuxiYGBgtBuz1q5PPlByLwYGxrUZkzL9JKFM2pPFFg0MDIwNGGsFsrX25KR1ioGBgZGHubbEtljWj9uuGBgYV2Uc5ZhT8yCbt1QxMDCuzZi0M9uCWp4y5mlijcHAwDgtoy2QrT24bVLWAR0DA2MDRrtJK28etGniYujHwMDAiDdGJNQ27EaLWAwMDIy4zfnadkLxETEwMDZgtM2AySaMPHy/pdyGgYFxQsZkp8Zk8ZnPOdlwhoGBcXLGN2B+2xmb/xqlAAAAAElFTkSuQmCC" alt="å¾®ä¿¡åˆ†äº«äºŒç»´ç ">
</div>


    
    <!-- main-js -->
<script type="text/javascript" src="/js/jquery/2.1.0-jquery.min.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/plugins/fastclick.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/plugins/ios-orientationchange-fix.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/jquery/3.5.2-jquery.fancybox.min.js?v=1.6.6"></script>
<!--  //cdn.bootcss.com/node-waves/0.7.4/waves.min.js -->
<script type="text/javascript" src="/js/node-waves/0.7.4-waves.min.js?v=1.6.6"></script> 

<script type="text/javascript" src="/js/method.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/blog.js?v=1.6.6"></script>

<!-- third-party -->
<script type="text/javascript" src="/js/plugins/local_search.js?v=1.6.6"></script>
<script type="text/javascript">
	var search_path = "search.xml";
	if (search_path.length === 0) { search_path = "search.xml";}
	var path = "/" + search_path;
	searchFunc(path, "local-search-input", "local-search-result");
</script> 

<script> (adsbygoogle = window.adsbygoogle || []).push({});</script>    


<!-- <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> --> 


  





<!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
            processEscapes: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.staticfile.org/mathjax/2.7.9/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
 
<script>
    (function() {
        var OriginTitile = document.title, titleTime;
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                document.title = 'WeiyiGeek Blog-å…³æ³¨äºç½‘ç»œå®‰å…¨_ç‰©è”ç½‘å®‰å…¨å¼€å‘_ç½‘ç»œå®‰å…¨è¿ç»´-å­¦ä¹ å¿ƒå¾—åˆ†äº«';
                clearTimeout(titleTime);
            } else {
                document.title = '(ã¤ã‚§âŠ‚)å’¦!åˆå¥½äº†!';
                titleTime = setTimeout(function() {
                    document.title = OriginTitile;
                },2000);
            }
        });
    })();
</script>
 

     <script type="text/javascript" src="/js/custom/copytips.js?v=1.6.6"></script> 
<script type="text/javascript">
// ç«™ç‚¹è¿è¡Œæ—¶é—´
var BootDate = new Date("2018/01/01 00:00:00");
function ShowRunTime(id) {
  var NowDate = new Date();
  var RunDateM = parseInt(NowDate - BootDate);
  var RunDays = Math.floor(RunDateM/(24*3600*1000));
  var RunHours = Math.floor(RunDateM%(24*3600*1000)/(3600*1000));
  var RunMinutes = Math.floor(RunDateM%(24*3600*1000)%(3600*1000)/(60*1000));
  var RunSeconds = Math.round(RunDateM%(24*3600*1000)%(3600*1000)%(60*1000)/1000);
  var RunTime = RunDays + "å¤©" + RunHours + "æ—¶" + RunMinutes + "åˆ†" + RunSeconds + "ç§’";
  document.getElementById(id).innerHTML = "ç½‘ç«™å·²åœ¨é£é›¨ä¸­å‹‰å‹‰å¼ºå¼ºè¿è¡Œäº†ã€" + RunTime + "ã€‘";
}
setInterval("ShowRunTime('SiteRunTime')", 1000);
</script>
    
  <div class="post-wechat" style="position:fixed;top: 360px;bottom: 500px;right: 3%;width: 190px;text-align: center;">
    <p><b>å…³æ³¨ã€å…¨æ ˆå·¥ç¨‹å¸ˆä¿®ç‚¼æŒ‡å—ã€‘</b></p>
    <img src="/img/wechat-gzh.jpg" class="img-responsive" alt="weiyigeek">
    <p><b>æ¬¢è¿æ·»åŠ ã€ä½œè€…ã€‘å¾®ä¿¡</b></p>
    <img src="/img/wehat.jpg" class="img-responsive" alt="weiyigeek">
  </div>

</body>
</html>