{"title":"MsSQL2019安装基础流程与入坑梳理","slug":"数据存储/Database-运维/MsSQL/MsSQL2019安装基础流程与入坑梳理","date":"2020-03-24T06:34:30.000Z","updated":"2022-03-29T05:39:06.312Z","url":"2020/3-24-78.html","path":"api/articles/2020/3-24-78.html.json","covers":["https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200324215112.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200324211244.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200324211428.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200324211538.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200324211707.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200324211900.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200324212658.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200324212752.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200324212913.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200324213248.png"],"content":"<p>[TOC]</p>\n<a id=\"more\"></a>\n<h4 id=\"0x00-前言\"><a href=\"#0x00-前言\" class=\"headerlink\" title=\"0x00 前言\"></a>0x00 前言</h4><p>描述:由于公司有测试项目需要用到MsSQL 2019所以将搭建流程做个简单的记录，方便以后运维MsSQ做参考;</p>\n<p>环境准备:</p>\n<ul>\n<li>SQL Server镜像下载地址:<a href=\"http://msdn.itellyou.cn/\" target=\"_blank\" rel=\"noopener\">http://msdn.itellyou.cn/</a> (<code>SQL Server 2019 Enterprise (x64) - DVD (Chinese-Simplified)</code>)</li>\n<li>OS 版本:Microsoft Windows Server 2019 Standard 10.0.17763 暂缺 Build 17763</li>\n<li>.NET framework3.5</li>\n<li>SQL Server 注册码:<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#SQL Server 2019</span></span><br><span class=\"line\">Enterprise：HMWJ3-KY3J2-NMVD7-KG4JR-X2G8G</span><br><span class=\"line\">Enterprise Core：2C9JR-K3RNG-QD4M4-JQ2HR-8468J</span><br><span class=\"line\">Strandard：PMBDC-FXVM3-T777P-N4FY8-PKFF4</span><br><span class=\"line\">Web：33QQK-WWQNB-G6T46-C86YB-TX2PH</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#SQL Server 2017</span></span><br><span class=\"line\">Enterprise：TDKQD-PKV44-PJT4N-TCJG2-3YJ6B</span><br><span class=\"line\">Enterprise Core：6GPYM-VHN83-PHDM2-Q9T2R-KBV83</span><br><span class=\"line\">Strandard：PHDV4-3VJWD-N7JVP-FGPKY-XBV89</span><br><span class=\"line\">Web：WV79P-7K6YG-T7QFN-M3WHF-37BXC</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#SQL Server 2016</span></span><br><span class=\"line\">Enterprise：MDCJV-3YX8N-WG89M-KV443-G8249</span><br><span class=\"line\">Enterprise Core：TBR8B-BXC4Y-298NV-PYTBY-G3BCP</span><br><span class=\"line\">Standard：B9GQY-GBG4J-282NY-QRG4X-KQBCR</span><br><span class=\"line\">Web：BXJTY-X3GNH-WHTHG-8V3XK-T8243</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#SQL Server 2014</span></span><br><span class=\"line\">Business Intelligence：GJPF4-7PTW4-BB9JH-BVP6M-WFTMJ</span><br><span class=\"line\">Developer：82YJF-9RP6B-YQV9M-VXQFR-YJBGX</span><br><span class=\"line\">Enterprise：27HMJ-GH7P9-X2TTB-WPHQC-RG79R</span><br><span class=\"line\">Enterprise Core：TJYBJ-8YGH6-QK2JJ-M9DFB-D7M9D</span><br><span class=\"line\">Strandard：P7FRV-Y6X6Y-Y8C6Q-TB4QR-DMTTK</span><br><span class=\"line\">Web：J9MBB-R8PMP-R8WTW-8JJRD-C6GGW</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><br/></p>\n<p>安装前请访问 <a href=\"https://docs.microsoft.com/zh-cn/sql/sql-server/install/hardware-and-software-requirements-for-installing-sql-server-ver15?view=sql-server-ver15\" target=\"_blank\" rel=\"noopener\">Microsft SQL Server 2019</a> 的安装依赖说明:</p>\n<ul>\n<li>1.操作系统:Windows 10 TH1 1507 或更高版本 Windows Server 2016 或更高版本</li>\n</ul>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200324215112.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure>\n<ul>\n<li>2.硬盘:SQL Server 要求最少 6 GB 的可用硬盘空间。</li>\n<li>3.内存:最低要求1G推荐至少 4 GB，并且应随着数据库大小的增加而增加来确保最佳性能。(其中<code>Express Edition</code>精简版本可以最低512MB)</li>\n<li>4.CPU:最低要求：x64/1.4 GHz,推荐 2.0 GHz 或更快,注意:<code>不支持X86</code></li>\n<li>5.SSMS版本支持说明:<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#受支持的操作系统 (SSMS 18.4) 支持以下 64 位平台：</span></span><br><span class=\"line\">Windows 10（64 位）*</span><br><span class=\"line\">Windows 8.1（64 位）</span><br><span class=\"line\">Windows Server 2019（64 位）</span><br><span class=\"line\">Windows Server 2016（64 位）*</span><br><span class=\"line\">Windows Server 2012 R2（64 位）</span><br><span class=\"line\">Windows Server 2012（64 位）</span><br><span class=\"line\">Windows Server 2008 R2（64 位）</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h4 id=\"0x01-安装流程\"><a href=\"#0x01-安装流程\" class=\"headerlink\" title=\"0x01 安装流程\"></a>0x01 安装流程</h4><p>1.进行装载cn_sql_server_2019_enterprise_x64_dvd_2bfe815a.iso镜像以管理员运行setup.exe即可，显示安装界面进行全新SQL Server安装,然后按照提示一步一步进行操作即可;</p>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200324211244.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure>\n<p>2.进行功能的选择，建议用到什么功能就安装什么功能即可，我这里安装选择如下图所示:</p>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200324211428.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure>\n<p>3.继续按照提示进行选择实例配置（注意:实例是安装路径的一部分）</p>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200324211538.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure>\n<p>4.进行服务账号和排序规则配置,特别注意排序规则默认是不区分大小写的,此处我们设置<code>Chinese_PRC_CS_AS</code>;</p>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200324211707.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure>\n<p>5.进行数据库引擎配置，这里需要选择混合模式既可以采用账号密码形式验证(sa账号)也可以采用Windows身份验证，同时需要将本机添加为SQL Server 管理员(重要)</p>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200324211900.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure>\n<p>6.配置完成后会生成此机器安装SQL Server 2019的配置文件即<code>C:\\Program Files\\Microsoft SQL Server\\150\\Setup Bootstrap\\Log\\20200324_170915\\ConfigurationFile.ini</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">;SQL Server 2019 Configuration File</span><br><span class=\"line\">[OPTIONS]</span><br><span class=\"line\"></span><br><span class=\"line\">; 指定此参数并接受 Microsoft R Open 和 Microsoft R Server 条款即表明你确认已阅读并了解使用条款。 </span><br><span class=\"line\"></span><br><span class=\"line\">IACCEPTPYTHONLICENSETERMS=<span class=\"string\">\"False\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; 指定安装程序的工作流，如 INSTALL、UNINSTALL 或 UPGRADE。这是必需的参数。 </span><br><span class=\"line\"></span><br><span class=\"line\">ACTION=<span class=\"string\">\"Install\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; 指定此参数并接受 Microsoft R Open 和 Microsoft R Server 条款即表明你确认已阅读并了解使用条款。 </span><br><span class=\"line\"></span><br><span class=\"line\">IACCEPTROPENLICENSETERMS=<span class=\"string\">\"False\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; 指定从命令行运行时，SQL Server 安装程序不应显示隐私声明。 </span><br><span class=\"line\"></span><br><span class=\"line\">SUPPRESSPRIVACYSTATEMENTNOTICE=<span class=\"string\">\"False\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; 使用 /ENU 参数可在本地化的 Windows 操作系统上安装英语版本的 SQL Server。 </span><br><span class=\"line\"></span><br><span class=\"line\">ENU=<span class=\"string\">\"False\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; 安装程序将不会显示任何用户界面。 </span><br><span class=\"line\"></span><br><span class=\"line\">QUIET=<span class=\"string\">\"False\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; 安装程序将只显示进度，而不需要任何用户交互。 </span><br><span class=\"line\"></span><br><span class=\"line\">QUIETSIMPLE=<span class=\"string\">\"False\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; 用于控制用户界面行为的参数。有效值对于完整 UI 为 Normal，对于简化的 UI 为 AutoAdvance，为 EnableUIOnServerCore 则跳过 Server Core 安装程序 GUI 块。 </span><br><span class=\"line\"></span><br><span class=\"line\">UIMODE=<span class=\"string\">\"Normal\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; 指定 SQL Server 安装程序是否应发现和包括产品更新。有效值是 True 和 False 或者 1 和 0。默认情况下，SQL Server 安装程序将包括找到的更新。 </span><br><span class=\"line\"></span><br><span class=\"line\">UpdateEnabled=<span class=\"string\">\"True\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; 如果提供了此参数，则此计算机将使用 Microsoft 更新检查更新。 </span><br><span class=\"line\"></span><br><span class=\"line\">USEMICROSOFTUPDATE=<span class=\"string\">\"False\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; 指定通过命令行运行的 SQL Server 安装程序不得显示付费版本通知。 </span><br><span class=\"line\"></span><br><span class=\"line\">SUPPRESSPAIDEDITIONNOTICE=<span class=\"string\">\"False\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; 指定 SQL Server 安装程序将获取产品更新的位置。有效值为 <span class=\"string\">\"MU\"</span> (以便搜索产品更新)、有效文件夹路径以及 .\\MyUpdates 或 UNC 共享目录之类的相对路径。默认情况下，SQL Server 安装程序将通过 Window Server Update Services 搜索 Microsoft Update 或 Windows Update 服务。 </span><br><span class=\"line\"></span><br><span class=\"line\">UpdateSource=<span class=\"string\">\"MU\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; 指定要安装、卸载或升级的功能。顶级功能列表包括 SQL、AS、IS、MDS 和工具。SQL 功能将安装数据库引擎、复制、全文和 Data Quality Services (DQS)服务器。工具功能将安装共享组件。 </span><br><span class=\"line\"></span><br><span class=\"line\">FEATURES=SQLENGINE,REPLICATION,FULLTEXT,CONN</span><br><span class=\"line\"></span><br><span class=\"line\">; 显示命令行参数用法 </span><br><span class=\"line\"></span><br><span class=\"line\">HELP=<span class=\"string\">\"False\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; 指定应将详细的安装程序日志传送到控制台。 </span><br><span class=\"line\"></span><br><span class=\"line\">INDICATEPROGRESS=<span class=\"string\">\"False\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; 指定安装程序应该安装到 WOW64 中。IA64 或 32 位系统不支持此命令行参数。 </span><br><span class=\"line\"></span><br><span class=\"line\">X86=<span class=\"string\">\"False\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; 指定默认实例或命名实例。MSSQLSERVER 是非 Express 版本的默认实例，SQLExpress 则是 Express 版本的默认实例。在安装 SQL Server 数据库引擎(SQL)或 Analysis Services (AS)时，此参数是必需的。 </span><br><span class=\"line\"></span><br><span class=\"line\">INSTANCENAME=<span class=\"string\">\"MSSQLSERVER\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; 指定共享组件的安装根目录。在已安装共享组件后，此目录保持不变。 </span><br><span class=\"line\"></span><br><span class=\"line\">INSTALLSHAREDDIR=<span class=\"string\">\"C:\\Program Files\\MicrosoftSQLServer\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; 指定 WOW64 共享组件的安装根目录。在已安装 WOW64 共享组件后，此目录保持不变。 </span><br><span class=\"line\"></span><br><span class=\"line\">INSTALLSHAREDWOWDIR=<span class=\"string\">\"C:\\Program Files (x86)\\MicrosoftSQLServer\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; 为您已指定的 SQL Server 功能指定实例 ID。SQL Server 目录结构、注册表结构和服务名称将包含 SQL Server 实例的实例 ID。 </span><br><span class=\"line\"></span><br><span class=\"line\">INSTANCEID=<span class=\"string\">\"MSSQLSERVER\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; TelemetryUserNameConfigDescription </span><br><span class=\"line\"></span><br><span class=\"line\">SQLTELSVCACCT=<span class=\"string\">\"NT Service\\SQLTELEMETRY\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; TelemetryStartupConfigDescription </span><br><span class=\"line\"></span><br><span class=\"line\">SQLTELSVCSTARTUPTYPE=<span class=\"string\">\"Automatic\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; 指定安装目录。 </span><br><span class=\"line\"></span><br><span class=\"line\">INSTANCEDIR=<span class=\"string\">\"C:\\Program Files\\MicrosoftSQLServer\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; 代理帐户名 </span><br><span class=\"line\"></span><br><span class=\"line\">AGTSVCACCOUNT=<span class=\"string\">\"NT Service\\SQLSERVERAGENT\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; 安装后自动启动服务。  </span><br><span class=\"line\"></span><br><span class=\"line\">AGTSVCSTARTUPTYPE=<span class=\"string\">\"Manual\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; CM 程序块 TCP 通信端口 </span><br><span class=\"line\"></span><br><span class=\"line\">COMMFABRICPORT=<span class=\"string\">\"0\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; 矩阵如何使用专用网络 </span><br><span class=\"line\"></span><br><span class=\"line\">COMMFABRICNETWORKLEVEL=<span class=\"string\">\"0\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; 如何保护程序块间的通信 </span><br><span class=\"line\"></span><br><span class=\"line\">COMMFABRICENCRYPTION=<span class=\"string\">\"0\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; CM 程序块使用的 TCP 端口 </span><br><span class=\"line\"></span><br><span class=\"line\">MATRIXCMBRICKCOMMPORT=<span class=\"string\">\"0\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; SQL Server 服务的启动类型。 </span><br><span class=\"line\"></span><br><span class=\"line\">SQLSVCSTARTUPTYPE=<span class=\"string\">\"Automatic\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; 启用 FILESTREAM 功能的级别(0、1、2 或 3)。 </span><br><span class=\"line\"></span><br><span class=\"line\">FILESTREAMLEVEL=<span class=\"string\">\"0\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; The max degree of parallelism (MAXDOP) server configuration option. </span><br><span class=\"line\"></span><br><span class=\"line\">SQLMAXDOP=<span class=\"string\">\"2\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; 设置为 <span class=\"string\">\"1\"</span> 可为 SQL Server Express 启用 RANU。 </span><br><span class=\"line\"></span><br><span class=\"line\">ENABLERANU=<span class=\"string\">\"False\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; 指定要用于数据库引擎的 Windows 排序规则或 SQL 排序规则。 </span><br><span class=\"line\"></span><br><span class=\"line\">SQLCOLLATION=<span class=\"string\">\"Chinese_PRC_CS_AS\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; SQL Server 服务的帐户: 域\\用户或系统帐户。 </span><br><span class=\"line\"></span><br><span class=\"line\">SQLSVCACCOUNT=<span class=\"string\">\"NT Service\\MSSQLSERVER\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; 设置为 <span class=\"string\">\"True\"</span> 以启用 SQL Server 服务的即时文件初始化。如果已启用，安装程序将授予数据库引擎服务 SID“执行卷维护任务”特权。这可能会导致信息泄漏，因为这会允许未经授权的主体访问已删除的内容。 </span><br><span class=\"line\"></span><br><span class=\"line\">SQLSVCINSTANTFILEINIT=<span class=\"string\">\"False\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; 要设置为 SQL Server 系统管理员的 Windows 帐户。 </span><br><span class=\"line\"></span><br><span class=\"line\">SQLSYSADMINACCOUNTS=<span class=\"string\">\"WIN-RNCP250REBP\\Administrator\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; 默认值为 Windows 身份验证。使用 <span class=\"string\">\"SQL\"</span> 表示采用混合模式身份验证。 </span><br><span class=\"line\"></span><br><span class=\"line\">SECURITYMODE=<span class=\"string\">\"SQL\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; 数据库引擎 TempDB 文件数。 </span><br><span class=\"line\"></span><br><span class=\"line\">SQLTEMPDBFILECOUNT=<span class=\"string\">\"2\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; 指定数据库引擎 TempDB 数据文件的初始大小(MB)。 </span><br><span class=\"line\"></span><br><span class=\"line\">SQLTEMPDBFILESIZE=<span class=\"string\">\"8\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; 指定每个数据库引擎 TempDB 数据文件的自动增长增量(MB)。 </span><br><span class=\"line\"></span><br><span class=\"line\">SQLTEMPDBFILEGROWTH=<span class=\"string\">\"64\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; 指定数据库引擎 TempDB 日志文件的初始大小(MB)。 </span><br><span class=\"line\"></span><br><span class=\"line\">SQLTEMPDBLOGFILESIZE=<span class=\"string\">\"8\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; 指定数据库引擎 TempDB 日志文件的自动增长增量(MB)。 </span><br><span class=\"line\"></span><br><span class=\"line\">SQLTEMPDBLOGFILEGROWTH=<span class=\"string\">\"64\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; 将当前用户设置为 %SQL_PRODUCT_SHORT_NAME% Express 的数据库引擎系统管理员。 </span><br><span class=\"line\"></span><br><span class=\"line\">ADDCURRENTUSERASSQLADMIN=<span class=\"string\">\"False\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; 指定 0 禁用 TCP/IP 协议，指定 1 则启用该协议。 </span><br><span class=\"line\"></span><br><span class=\"line\">TCPENABLED=<span class=\"string\">\"1\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; 指定 0 禁用 Named Pipes 协议，指定 1 则启用该协议。 </span><br><span class=\"line\"></span><br><span class=\"line\">NPENABLED=<span class=\"string\">\"0\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; Browser 服务的启动类型。 </span><br><span class=\"line\"></span><br><span class=\"line\">BROWSERSVCSTARTUPTYPE=<span class=\"string\">\"Disabled\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; 添加输入参数 FTSVCACCOUNT 的描述 </span><br><span class=\"line\"></span><br><span class=\"line\">FTSVCACCOUNT=<span class=\"string\">\"NT Service\\MSSQLFDLauncher\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; Use SQLMAXMEMORY to minimize the risk of the OS experiencing detrimental memory pressure. </span><br><span class=\"line\"></span><br><span class=\"line\">SQLMAXMEMORY=<span class=\"string\">\"2147483647\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">; Use SQLMINMEMORY to reserve a minimum amount of memory available to the SQL Server Memory Manager. </span><br><span class=\"line\"></span><br><span class=\"line\">SQLMINMEMORY=<span class=\"string\">\"0\"</span></span><br></pre></td></tr></table></figure>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200324212658.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure>\n<p><em>补充(tips):</em> 在相同的虚拟机环境中可以采用SQL Server的ConfigurationFile.ini配置文件进行静默等待完成即可，若出现中断查看安装日志什么错误。<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#SQL装载目录中</span></span><br><span class=\"line\">setup.exe /CONFIGURATIONFILE=<span class=\"string\">\"C:\\PerfLogs\\ConfigurationFile.ini\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#SQL安装日志</span></span><br><span class=\"line\">C:\\Program Files\\Microsoft SQL Server\\150\\Setup Bootstrap\\Log</span><br></pre></td></tr></table></figure></p>\n<p>7.等待进度条完成SQL Server安装</p>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200324212752.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure>\n<p>8.进行下载 SQL Server Management Studio (SSMS) SQL SERVER管理工具安装；<br>注意：SSMS 18.4 是 SSMS 的最新正式发布 (GA) 版; <code>如果安装了之前的 SSMS 18 GA 版本，请安装 SSMS 18.4 将它升级到 18.4。</code></p>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200324212913.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure>\n<p>9.安装SSMS后重启电脑，然后设置防火墙让外网可以访问SQL SERVER 服务,并采用SSMS连接测试安装的SQL SERVER;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ New-NetFirewallRule -DisplayName <span class=\"string\">\"Allow MsSQL Connnect\"</span> -Direction Inbound -LocalPort 1433 -Protocol TCP -Action Allow</span><br><span class=\"line\"><span class=\"comment\"># Name                  : MsSQL-TCP</span></span><br><span class=\"line\"><span class=\"comment\"># DisplayName           : Allow MsSQL Connnect</span></span><br><span class=\"line\"><span class=\"comment\"># Description           : </span></span><br><span class=\"line\"><span class=\"comment\"># DisplayGroup          : </span></span><br><span class=\"line\"><span class=\"comment\"># Group                 : </span></span><br><span class=\"line\"><span class=\"comment\"># Enabled               : True</span></span><br><span class=\"line\"><span class=\"comment\"># Profile               : Any</span></span><br><span class=\"line\"><span class=\"comment\"># Platform              : &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"># Direction             : Inbound</span></span><br><span class=\"line\"><span class=\"comment\"># Action                : Allow</span></span><br><span class=\"line\"><span class=\"comment\"># EdgeTraversalPolicy   : Block</span></span><br><span class=\"line\"><span class=\"comment\"># LooseSourceMapping    : False</span></span><br><span class=\"line\"><span class=\"comment\"># LocalOnlyMapping      : False</span></span><br><span class=\"line\"><span class=\"comment\"># Owner                 : </span></span><br><span class=\"line\"><span class=\"comment\"># PrimaryStatus         : OK</span></span><br><span class=\"line\"><span class=\"comment\"># Status                : 已从存储区成功分析规则。 (65536)</span></span><br><span class=\"line\"><span class=\"comment\"># EnforcementStatus     : NotApplicable</span></span><br><span class=\"line\"><span class=\"comment\"># PolicyStoreSource     : PersistentStore</span></span><br><span class=\"line\"><span class=\"comment\"># PolicyStoreSourceType : Local</span></span><br></pre></td></tr></table></figure></p>\n<p>10.采用外部SQL SERVER CLIENT 进行访问服务</p>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200324213248.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure>\n<p>以上就是SQL SERVER 2019 安装流程;</p>\n<hr>\n<h4 id=\"0x02-入坑记录\"><a href=\"#0x02-入坑记录\" class=\"headerlink\" title=\"0x02 入坑记录\"></a>0x02 入坑记录</h4><hr>\n<h4 id=\"0x03-笔记总结\"><a href=\"#0x03-笔记总结\" class=\"headerlink\" title=\"0x03 笔记总结\"></a>0x03 笔记总结</h4>","comments":true,"excerpt":"[TOC]","categories":[{"name":"Database","path":"api/categories/Database.json"},{"name":"DBA","path":"api/categories/DBA.json"}],"tags":[{"name":"MsSQL","path":"api/tags/MsSQL.json"}]}