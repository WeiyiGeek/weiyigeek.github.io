{"title":"YAML基础语法","slug":"编程世界/Yaml/YAML基础语法","date":"2019-07-22T07:36:30.000Z","updated":"2020-11-08T07:00:58.439Z","url":"2019/7-22-353.html","path":"api/articles/2019/7-22-353.html.json","covers":null,"content":"<p>[TOC]</p>\n<a id=\"more\"></a>\n<h4 id=\"0x00-前言\"><a href=\"#0x00-前言\" class=\"headerlink\" title=\"0x00 前言\"></a>0x00 前言</h4><p>YAML是<code>&quot;YAML Ain&#39;t a Markup Language&quot;</code>的缩写，它是一种可读性高，用来表达数据序列化语言，你仍然可以理解是是一种标记语言，但是为了强调这种语言以数据未中心，而不是以标记语言为重点;<br>YAML(带有”骆驼”的韵律)是一种基于 Unicode 的基于 Unicode 的数据序列化语言,它围绕敏捷编程语言的常见本机数据类型而设计，它使用 Unicode可打印字符,其中一些字符提供结构信息,其余字符包含数据本身；但是如果你使用过类似XML/JSON这种标记语言(<code>利于人们读写的数据格式</code>)，那么你可能会很快的学会YAML，与XML相同的是我们可以使用YAML编写配置文件;</p>\n<p>YAML 通过最小化结构字符的数量并允许数据以自然和有意义的方式显示自身, 它对于编程需求(从配置文件到 Internet 消息传递、对象持久性到数据审核)都非常有用。</p>\n<p>YAML格式的文件拓展名包括：<code>.yml 和 .yaml</code>，两个都表示YAML文件；</p>\n<p>三个基本基元(数据结构)来充分表示:</p>\n<ul>\n<li>对象:键值对的集合，又称为映射建(mapping) / 哈希9Hash) / 字典 (Dictionary)</li>\n<li>数组:一组安装次序排列的值，又称为序列(sequence) / 列表(List)</li>\n<li>存量: 单个的不可再分得值也叫标量，例如字符串 String / 数字  scalars</li>\n</ul>\n<p><em>目前经过三个版本：</em></p>\n<ul>\n<li>YAML 1.2 (3rd Edition): <a href=\"http://yaml.org/spec/1.2/spec.html\" target=\"_blank\" rel=\"noopener\">http://yaml.org/spec/1.2/spec.html</a></li>\n<li>YAML 1.1 (2nd Edition): <a href=\"http://yaml.org/spec/1.1/\" target=\"_blank\" rel=\"noopener\">http://yaml.org/spec/1.1/</a></li>\n<li>YAML 1.0 (1st Edition): <a href=\"http://yaml.org/spec/1.0/\" target=\"_blank\" rel=\"noopener\">http://yaml.org/spec/1.0/</a></li>\n</ul>\n<p>YAML优缺点：</p>\n<ul>\n<li>YAML 很容易被人类阅读。</li>\n<li>YAML 数据可移植到编程语言之间。</li>\n<li>YAML 与敏捷语言的本机数据结构相匹配。</li>\n<li>YAML 具有一致的模型来支持通用工具。</li>\n<li>YAML 支持单通道处理。</li>\n<li>YAML 具有表现力和可扩展性。</li>\n<li>YAML 易于实现和使用(独特的清洁)。</li>\n</ul>\n<p>应用场景:</p>\n<ul>\n<li>ansible清单也支持YAML的语法，可以使用YAML语法编写清单从而管理受管主机;</li>\n<li>docker-compose的DockerFile的文件内容中使用它;</li>\n<li>kubernetes 资源清单</li>\n<li>如Perl、Python、PHP、Ruby和Javascript都有对应的解析库</li>\n</ul>\n<p><em>Renfencer</em></p>\n<ul>\n<li>YAML官网以及解析库：<a href=\"https://yaml.org/\" target=\"_blank\" rel=\"noopener\">https://yaml.org/</a></li>\n<li>JS-YAML在线示例：<a href=\"http://nodeca.github.io/js-yaml/\" target=\"_blank\" rel=\"noopener\">http://nodeca.github.io/js-yaml/</a></li>\n<li>帮助文档：<a href=\"https://yaml.org/spec/1.2/spec.pdf\" target=\"_blank\" rel=\"noopener\">https://yaml.org/spec/1.2/spec.pdf</a></li>\n</ul>\n<p><br></p>\n<h4 id=\"0x01-语法格式\"><a href=\"#0x01-语法格式\" class=\"headerlink\" title=\"0x01 语法格式\"></a>0x01 语法格式</h4><p>每一个 YAML 文件都是从一个列表开始. 列表中的每一项都是一个键值对, 通常它们被称为一个 “哈希” 或 “字典”. 所以我们需要知道如何在 YAML 中编写列表和字典.<br>YAML注释:<code>使用#作为注释</code>，并且YAML中只有行注释。</p>\n<p>基本格式要求:</p>\n<ul>\n<li>1，YAML大小写敏感；</li>\n<li>2，使用缩进代表层级关系；</li>\n<li>3，缩进<code>只能使用空格不能使用TAB</code>，不要求空格个数，只需要相同层级左对齐（一般2个或4个空格）</li>\n<li>4, 标识注释符 # 从该字符到行尾都将被解释器忽略;</li>\n</ul>\n<p><br></p>\n<h5 id=\"常量\"><a href=\"#常量\" class=\"headerlink\" title=\"常量\"></a>常量</h5><p>YAML中提供了多种常量结构，包括：整数，浮点数，字符串，NULL，日期，布尔，时间,还允许表示三种格式分别是<code>常量值，对象和数组</code><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#即表示url属性值</span></span><br><span class=\"line\">url: http://www.wolfcode.cn </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#即表示server.host属性的值</span></span><br><span class=\"line\">server:</span><br><span class=\"line\">    host: http://www.wolfcode.cn </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#数组即表示server为[a,b,c]</span></span><br><span class=\"line\">server:</span><br><span class=\"line\">    - 120.168.117.21</span><br><span class=\"line\">    - 120.168.117.22</span><br><span class=\"line\">    - 120.168.117.23</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#使用两个感叹号进行强制转换数据类型</span></span><br><span class=\"line\">e: !!str 123</span><br><span class=\"line\">f: !!str <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#常量(存量)</span></span><br><span class=\"line\">pi: 3.14   <span class=\"comment\">#定义一个数值3.14</span></span><br><span class=\"line\">hasChild: <span class=\"literal\">true</span>  <span class=\"comment\">#定义一个boolean值</span></span><br><span class=\"line\">boolean: </span><br><span class=\"line\">    - TRUE  <span class=\"comment\">#true,True都可以</span></span><br><span class=\"line\">    - FALSE  <span class=\"comment\">#false，False都可以</span></span><br><span class=\"line\"><span class=\"built_in\">float</span>:</span><br><span class=\"line\">    - 3.14</span><br><span class=\"line\">    - 6.8523015e+5  <span class=\"comment\">#可以使用科学计数法</span></span><br><span class=\"line\">int:</span><br><span class=\"line\">    - 123</span><br><span class=\"line\">    - 0b1010_0111_0100_1010_1110    <span class=\"comment\">#二进制表示</span></span><br><span class=\"line\">null:</span><br><span class=\"line\">    nodeName: <span class=\"string\">'node'</span></span><br><span class=\"line\">    parent: ~  <span class=\"comment\">#使用~表示null</span></span><br><span class=\"line\"></span><br><span class=\"line\">name: <span class=\"string\">'你好YAML'</span>   <span class=\"comment\">#定义一个字符串</span></span><br><span class=\"line\">string:</span><br><span class=\"line\">    - 哈哈</span><br><span class=\"line\">    - <span class=\"string\">'Hello world'</span>  <span class=\"comment\">#可以使用双引号或者单引号包裹特殊字符</span></span><br><span class=\"line\">    - newline</span><br><span class=\"line\">      newline2    <span class=\"comment\">#字符串可以拆成多行，每一行会被转化成一个空格</span></span><br><span class=\"line\">date:</span><br><span class=\"line\">    - 2018-02-17    <span class=\"comment\">#日期必须使用ISO 8601格式，即yyyy-MM-dd</span></span><br><span class=\"line\">datetime: </span><br><span class=\"line\">    -  2018-02-17T15:02:31+08:00    <span class=\"comment\">#时间使用ISO 8601格式，时间和日期之间使用T连接，最后使用+代表时区</span></span><br></pre></td></tr></table></figure></p>\n<p>注意：在定义字符串类型的时里面的字符串你需要使用引号来包裹;</p>\n<p><br></p>\n<h5 id=\"对象\"><a href=\"#对象\" class=\"headerlink\" title=\"对象\"></a>对象</h5><p>描述：使用冒号代表，格式为<code>key: value</code>,冒号后面要加一个空格;可以使用缩进表示层级关系；<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#方式1:常规方式</span></span><br><span class=\"line\">key: </span><br><span class=\"line\">    child-key: value</span><br><span class=\"line\">    child-key2: value2</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#方式2：YAML中还支持流式(flow)语法表示对象</span></span><br><span class=\"line\">key: &#123;child-key: value, child-key2: value2&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#方式3：较为复杂的对象格式,可以使用问号加一个空格代表一个复杂的key，配合一个冒号加一个空格代表一个value</span></span><br><span class=\"line\">?</span><br><span class=\"line\">  - Key1</span><br><span class=\"line\">  - Key2</span><br><span class=\"line\">:</span><br><span class=\"line\">  - Value1</span><br><span class=\"line\">  - Value2</span><br></pre></td></tr></table></figure><br>意思:即对象的属性是一个数组<code>[key1,key2]</code>，对应的值也是一个数组<code>[value1,value2]</code>;</p>\n<p><br></p>\n<h5 id=\"数组\"><a href=\"#数组\" class=\"headerlink\" title=\"数组\"></a>数组</h5><p>描述：使用一个短横线加一个空格代表一个数组项：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#方式1：</span></span><br><span class=\"line\">array:</span><br><span class=\"line\">    - Java</span><br><span class=\"line\">    - C++</span><br><span class=\"line\">    - C<span class=\"comment\">#</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#方式2:可以简单理解为：[[Java,LOL]]</span></span><br><span class=\"line\">-</span><br><span class=\"line\">    - Java</span><br><span class=\"line\">    - LOL</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#方式3：使用流式(flow)的方式</span></span><br><span class=\"line\">companies: [</span><br><span class=\"line\">  &#123;id: 1,name: company1,price: 200W&#125;,</span><br><span class=\"line\">  &#123;id: 2,name: company2,price: 500W&#125;</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure></p>\n<p>示例：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#companies属性是一个数组，每一个数组元素又是由id,name,price三个属性构成；</span></span><br><span class=\"line\">companies:</span><br><span class=\"line\">    -</span><br><span class=\"line\">        id: 1</span><br><span class=\"line\">        name: company1</span><br><span class=\"line\">        price: 200W</span><br><span class=\"line\">    -</span><br><span class=\"line\">        id: 2</span><br><span class=\"line\">        name: company2</span><br><span class=\"line\">        price: 500W</span><br></pre></td></tr></table></figure></p>\n<hr>\n\n<h5 id=\"特殊符号\"><a href=\"#特殊符号\" class=\"headerlink\" title=\"特殊符号\"></a>特殊符号</h5><p>YAML中提供了很多特殊符号，比如 <code>---(文档开始)</code> , <code>...(文档结束)</code> , <code>!!(强制转换)</code> ,  <code>&gt; (不换行) 与 | (换行)</code> , <code>&amp; (锚点) 与  * (引用)</code> , <code>&lt;&lt; (合并)</code> , <code>~ (代表NULL)</code>, <code>&#39;(转义&#39;符号)</code>, <code>+/-(表示保留与删除换行)</code></p>\n<ol>\n<li><code>--- YAML</code>可以在同一个文件中，使用—<code>表示一个文档的开始</code><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#比如Springboot中profile的定义</span></span><br><span class=\"line\"><span class=\"attr\">server:</span></span><br><span class=\"line\"><span class=\"attr\">    address:</span> <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.100</span></span><br><span class=\"line\"><span class=\"meta\">---</span></span><br><span class=\"line\"><span class=\"attr\">spring:</span></span><br><span class=\"line\"><span class=\"attr\">    profiles:</span> <span class=\"string\">development</span></span><br><span class=\"line\"><span class=\"attr\">    server:</span></span><br><span class=\"line\"><span class=\"attr\">        address:</span> <span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span></span><br><span class=\"line\"><span class=\"meta\">---</span></span><br><span class=\"line\"><span class=\"attr\">spring:</span></span><br><span class=\"line\"><span class=\"attr\">    profiles:</span> <span class=\"string\">production</span></span><br><span class=\"line\"><span class=\"attr\">    server:</span></span><br><span class=\"line\"><span class=\"attr\">        address:</span> <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.120</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#代表定义了两个profile，一个是development，一个production；也常常使用---来分割不同的内容，比如记录日志：     </span></span><br><span class=\"line\"><span class=\"meta\">---</span></span><br><span class=\"line\"><span class=\"attr\">Time:</span> <span class=\"number\">2018</span><span class=\"bullet\">-02</span><span class=\"bullet\">-17</span><span class=\"attr\">T15:02:31+08:00</span></span><br><span class=\"line\"><span class=\"attr\">User:</span> <span class=\"string\">ed</span></span><br><span class=\"line\"><span class=\"attr\">Warning:</span></span><br><span class=\"line\">     <span class=\"string\">This</span> <span class=\"string\">is</span> <span class=\"string\">an</span> <span class=\"string\">error</span> <span class=\"string\">message</span> <span class=\"string\">for</span> <span class=\"string\">the</span> <span class=\"string\">log</span> <span class=\"string\">file</span></span><br><span class=\"line\"><span class=\"meta\">---</span></span><br><span class=\"line\"><span class=\"attr\">Time:</span> <span class=\"number\">2018</span><span class=\"bullet\">-02</span><span class=\"bullet\">-17</span><span class=\"attr\">T15:05:21+08:00</span></span><br><span class=\"line\"><span class=\"attr\">User:</span> <span class=\"string\">ed</span></span><br><span class=\"line\"><span class=\"attr\">Warning:</span></span><br><span class=\"line\">    <span class=\"string\">A</span> <span class=\"string\">slightly</span> <span class=\"string\">different</span> <span class=\"string\">error</span> <span class=\"string\">message.</span></span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p><br></p>\n<ol start=\"2\">\n<li><code>... 和---配合使用</code>，在一个配置文件中<code>代表一个文件的结束</code>：<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#相当于在一个yaml文件中连续写了两个yaml配置项。</span></span><br><span class=\"line\">---</span><br><span class=\"line\">time: 20:03:20</span><br><span class=\"line\">player: Sammy Sosa</span><br><span class=\"line\">action: strike (miss)</span><br><span class=\"line\">...</span><br><span class=\"line\">---</span><br><span class=\"line\">time: 20:03:47</span><br><span class=\"line\">player: Sammy Sosa</span><br><span class=\"line\">action: grand slam</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p><br></p>\n<ol start=\"3\">\n<li><code>!! YAML中使用!!做类型强行转换</code><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#相当于把数字和布尔类型强转为字符串</span></span><br><span class=\"line\">string:</span><br><span class=\"line\">    - !!str 54321</span><br><span class=\"line\">    - !!str <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#当然允许转型的类型很多，比如：</span></span><br><span class=\"line\">--- !!<span class=\"built_in\">set</span></span><br><span class=\"line\">- Mark McGwire: 65</span><br><span class=\"line\">- Sammy Sosa: 63</span><br><span class=\"line\">- Sammy Sosa: 63</span><br><span class=\"line\">- Ken Griffy: 58</span><br></pre></td></tr></table></figure>\n将数组解析为set，简单理解转化的内容就是：[{Ken Griffy=58}, {Mark McGwire=65}, {Sammy Sosa=63}]，重复的Sammy Sosa去掉；</li>\n</ol>\n<p><br></p>\n<ol start=\"4\">\n<li><code>&gt;在字符串中折叠换行（变成单行）</code>, <code>|保留换行符</code>这两个符号是YAML中字符串经常使用的符号，比如</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#示例1. &gt; 与 | 符号的不同</span></span><br><span class=\"line\">accomplishment: &gt;</span><br><span class=\"line\"> Mark <span class=\"built_in\">set</span> a major league</span><br><span class=\"line\"> home run record <span class=\"keyword\">in</span> 1998.</span><br><span class=\"line\">stats: |</span><br><span class=\"line\"> 65 Home Runs</span><br><span class=\"line\"> 0.278 Batting Average</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#执行结果</span></span><br><span class=\"line\"><span class=\"comment\"># accomplishment=Mark set a major league home run record in 1998.</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># stats=65 Home Runs</span></span><br><span class=\"line\"><span class=\"comment\">#  0.278 Batting Average,</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># |符号常见用于在YAML中配置HTML片段：</span></span><br><span class=\"line\">phraseTemplate: |</span><br><span class=\"line\">  &lt;p style=<span class=\"string\">\"color: red\"</span>&gt;</span><br><span class=\"line\">    some template <span class=\"variable\">$&#123;msg&#125;</span></span><br><span class=\"line\">  &lt;/p&gt;</span><br></pre></td></tr></table></figure>\n<p>即将换行符转化成了空格；要注意一点的是，<code>每行的文本前一定要有一个空格</code>。</p>\n<p><br></p>\n<ol start=\"5\">\n<li>引用重复的内容在YAML中可以<code>使用&amp;来完成锚点定义，使用*来完成锚点引用</code><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#在hr中，使用&amp;SS为Sammy Sosa设置了一个锚点（引用）名称为SS，在rbi中使用*SS完成了锚点使用</span></span><br><span class=\"line\">hr:</span><br><span class=\"line\">- Mark McGwire</span><br><span class=\"line\">- &amp;SS Sammy Sosa</span><br><span class=\"line\">rbi:</span><br><span class=\"line\">- *SS </span><br><span class=\"line\">- Ken Griffey</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#执行结果</span></span><br><span class=\"line\">&#123;rbi=[Sammy Sosa, Ken Griffey], hr=[Mark McGwire, Sammy Sosa]&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#方式2：注意不能独立的定义锚点，比如不能直接这样写： &amp;SS Sammy Sosa；</span></span><br><span class=\"line\">SS: &amp;SS Sammy Sosa</span><br><span class=\"line\">hr:</span><br><span class=\"line\"> - Mark McGwire</span><br><span class=\"line\"> - *SS</span><br><span class=\"line\">rbi:</span><br><span class=\"line\"> - *SS </span><br><span class=\"line\"> - Ken Griffey</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#方式3.另外锚点能够定义更复杂的内容，比如：那么hr相当于引用了default的数组，</span></span><br><span class=\"line\">default: &amp;default</span><br><span class=\"line\">    - Mark McGwire</span><br><span class=\"line\">    - Sammy Sosa</span><br><span class=\"line\">hr: *default  <span class=\"comment\">#注意hr: *default要写在同一行。</span></span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p><br></p>\n<ol start=\"6\">\n<li>合并内容 <code>&lt;&lt;</code>。主要和锚点配合使用，可以将一个锚点内容直接合并到一个对象中。<br>来看一个示例：<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#在merge中，定义了四个锚点，分别在sample中使用。</span></span><br><span class=\"line\"><span class=\"attr\">merge:</span></span><br><span class=\"line\"><span class=\"bullet\">  -</span> <span class=\"meta\">&amp;CENTER</span> <span class=\"string\">&#123;</span> <span class=\"attr\">x:</span> <span class=\"number\">1</span><span class=\"string\">,</span> <span class=\"attr\">y:</span> <span class=\"number\">2</span> <span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"bullet\">  -</span> <span class=\"meta\">&amp;LEFT</span> <span class=\"string\">&#123;</span> <span class=\"attr\">x:</span> <span class=\"number\">0</span><span class=\"string\">,</span> <span class=\"attr\">y:</span> <span class=\"number\">2</span> <span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"bullet\">  -</span> <span class=\"meta\">&amp;BIG</span> <span class=\"string\">&#123;</span> <span class=\"attr\">r:</span> <span class=\"number\">10</span> <span class=\"string\">&#125;</span></span><br><span class=\"line\"><span class=\"bullet\">  -</span> <span class=\"meta\">&amp;SMALL</span> <span class=\"string\">&#123;</span> <span class=\"attr\">r:</span> <span class=\"number\">1</span> <span class=\"string\">&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#sample1中，&lt;&lt;: *CENTER意思是引用&#123;x: 1,y: 2&#125;，并且合并到sample1中，那么合并的结果为：sample1=&#123;r=10, y=2, x=1&#125;</span></span><br><span class=\"line\"><span class=\"attr\">sample1:</span> </span><br><span class=\"line\">    <span class=\"string\">&lt;&lt;:</span> <span class=\"meta\">*CENTER</span></span><br><span class=\"line\"><span class=\"attr\">    r:</span> <span class=\"number\">10</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#sample2中，&lt;&lt;: [*CENTER, *BIG] 意思是联合引用&#123;x: 1,y: 2&#125;和&#123;r: 10&#125;，并且合并到sample2中，那么合并的结果为：sample2=&#123;other=haha, x=1, y=2, r=10&#125;</span></span><br><span class=\"line\"><span class=\"attr\">sample2:</span></span><br><span class=\"line\">    <span class=\"string\">&lt;&lt;</span> <span class=\"string\">:</span> <span class=\"string\">[</span> <span class=\"string\">*CENTER,</span> <span class=\"meta\">*BIG</span> <span class=\"string\">]</span></span><br><span class=\"line\"><span class=\"attr\">    other:</span> <span class=\"string\">haha</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">#sample3中，引入了*CENTER, *BIG，还使用了r: 100覆盖了引入的r: 10，所以sample3值为：sample3=&#123;r=100, y=2, x=1&#125;</span></span><br><span class=\"line\"><span class=\"attr\">sample3:</span></span><br><span class=\"line\">    <span class=\"string\">&lt;&lt;</span> <span class=\"string\">:</span> <span class=\"string\">[</span> <span class=\"string\">*CENTER,</span> <span class=\"meta\">*BIG</span> <span class=\"string\">]</span></span><br><span class=\"line\"><span class=\"attr\">    r:</span> <span class=\"number\">100</span></span><br></pre></td></tr></table></figure>\n有了合并，我们就可以在配置中，把相同的基础配置抽取出来，在不同的子配置中合并引用即可。</li>\n</ol>\n<ol start=\"7\">\n<li><p>特殊符号与转义<code>&#39;</code>符号妙用</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 1.如果字符串之中包含空格或特殊字符需要放在引号之中;</span></span><br><span class=\"line\">str: <span class=\"string\">'内容:  字符串'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 2.单引号和双引号都可以使用，但是双引号不会对特殊字符转义;</span></span><br><span class=\"line\">s1: <span class=\"string\">'内容\\n字符串'</span></span><br><span class=\"line\">s2：<span class=\"string\">\"内容\\n字符串\"</span> <span class=\"comment\"># 会进行换行</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>使用<code>+ 保留文件块末尾换行, - 表示删除字符串末尾的换行</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">s1: |</span><br><span class=\"line\">  Foo</span><br><span class=\"line\"></span><br><span class=\"line\">s2: |+</span><br><span class=\"line\">  Foo</span><br><span class=\"line\"></span><br><span class=\"line\">s3: |-</span><br><span class=\"line\">  Foo</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p><br></p>\n<h4 id=\"0x02-补充示例\"><a href=\"#0x02-补充示例\" class=\"headerlink\" title=\"0x02 补充示例\"></a>0x02 补充示例</h4><h5 id=\"编码存放\"><a href=\"#编码存放\" class=\"headerlink\" title=\"编码存放\"></a>编码存放</h5><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#yaml配置文件，demo是一个数组，成员是一个属性值</span></span><br><span class=\"line\"><span class=\"meta\">---</span></span><br><span class=\"line\"><span class=\"attr\">demo:</span></span><br><span class=\"line\"><span class=\"attr\">  - unicode:</span> <span class=\"string\">\"Sosa did fine.\\u263A\"</span></span><br><span class=\"line\"><span class=\"attr\">  - control:</span> <span class=\"string\">\"\\b1998\\t1999\\t2000\\n\"</span></span><br><span class=\"line\"><span class=\"bullet\">  -</span> <span class=\"string\">hex</span> <span class=\"attr\">esc:</span> <span class=\"string\">\"\\x0d\\x0a is \\r\\n\"</span></span><br><span class=\"line\"><span class=\"attr\">  - single:</span> <span class=\"string\">'\"Howdy!\" he cried.'</span></span><br><span class=\"line\"><span class=\"attr\">  - quoted:</span> <span class=\"string\">' # Not a '</span><span class=\"string\">'comment'</span><span class=\"string\">'.'</span></span><br><span class=\"line\"><span class=\"attr\">  - tie-fighter:</span> <span class=\"string\">'|\\-*-/|'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#转换结果</span></span><br><span class=\"line\"><span class=\"string\">&#123;</span> <span class=\"attr\">demo:</span> </span><br><span class=\"line\">   <span class=\"string\">[</span> <span class=\"string\">&#123;</span> <span class=\"attr\">unicode:</span> <span class=\"string\">'Sosa did fine.☺'</span> <span class=\"string\">&#125;,</span></span><br><span class=\"line\">     <span class=\"string\">&#123;</span> <span class=\"attr\">control:</span> <span class=\"string\">'\\b1998\\t1999\\t2000\\n'</span> <span class=\"string\">&#125;,</span></span><br><span class=\"line\">     <span class=\"string\">&#123;</span> <span class=\"string\">'hex esc'</span><span class=\"string\">:</span> <span class=\"string\">'\\r\\n is \\r\\n'</span> <span class=\"string\">&#125;,</span></span><br><span class=\"line\">     <span class=\"string\">&#123;</span> <span class=\"attr\">single:</span> <span class=\"string\">'\"Howdy!\" he cried.'</span> <span class=\"string\">&#125;,</span></span><br><span class=\"line\">     <span class=\"string\">&#123;</span> <span class=\"attr\">quoted:</span> <span class=\"string\">' # Not a \\'comment\\'.'</span> <span class=\"string\">&#125;,</span></span><br><span class=\"line\">     <span class=\"string\">&#123;</span> <span class=\"string\">'tie-fighter'</span><span class=\"string\">:</span> <span class=\"string\">'|\\\\-*-/|'</span> <span class=\"string\">&#125;</span> <span class=\"string\">]</span> <span class=\"string\">&#125;</span></span><br></pre></td></tr></table></figure>\n<p><br></p>\n<h5 id=\"时间时区\"><a href=\"#时间时区\" class=\"headerlink\" title=\"时间时区\"></a>时间时区</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#yaml配置文件</span></span><br><span class=\"line\">timestamp:</span><br><span class=\"line\">  canonical:        2001-12-15T02:59:43.1Z</span><br><span class=\"line\">  valid iso8601:    2001-12-14t21:59:43.10-05:00</span><br><span class=\"line\">  space separated:  2001-12-14 21:59:43.10 -5</span><br><span class=\"line\">  no time zone (Z): 2001-12-15 2:59:43.10</span><br><span class=\"line\">  date (00:00:00Z): 2002-12-14</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#执行结果</span></span><br><span class=\"line\">timestamp: </span><br><span class=\"line\">  &#123; canonical: Sat Dec 15 2001 10:59:43 GMT+0800 (中国标准时间),</span><br><span class=\"line\">    <span class=\"string\">'valid iso8601'</span>: Sat Dec 15 2001 10:59:43 GMT+0800 (中国标准时间),</span><br><span class=\"line\">    <span class=\"string\">'space separated'</span>: Sat Dec 15 2001 10:59:43 GMT+0800 (中国标准时间),</span><br><span class=\"line\">    <span class=\"string\">'no time zone (Z)'</span>: Sat Dec 15 2001 10:59:43 GMT+0800 (中国标准时间),</span><br><span class=\"line\">    <span class=\"string\">'date (00:00:00Z)'</span>: Sat Dec 14 2002 08:00:00 GMT+0800 (中国标准时间) &#125;,</span><br></pre></td></tr></table></figure>\n<p><br></p>\n<h5 id=\"yaml正则\"><a href=\"#yaml正则\" class=\"headerlink\" title=\"yaml正则\"></a>yaml正则</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#全局对象-正则匹配</span></span><br><span class=\"line\">regexp:</span><br><span class=\"line\">  simple: !!js/regexp      foobar</span><br><span class=\"line\">  modifiers: !!js/regexp   /foobar/mi</span><br><span class=\"line\"><span class=\"comment\"># regexp: &#123; simple: /foobar/, modifiers: /foobar/im &#125;,</span></span><br><span class=\"line\"></span><br><span class=\"line\">undefined: !!js/undefined ~</span><br><span class=\"line\"><span class=\"comment\"># undefined: undefined,</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span>: !!js/<span class=\"keyword\">function</span> &gt;</span><br><span class=\"line\">  <span class=\"keyword\">function</span> <span class=\"function\"><span class=\"title\">foobar</span></span>() &#123;</span><br><span class=\"line\">    <span class=\"built_in\">return</span> <span class=\"string\">'Wow! JS-YAML Rocks!'</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"><span class=\"comment\"># function: [Function: anonymous],</span></span><br></pre></td></tr></table></figure>","comments":true,"excerpt":"[TOC]","categories":[{"name":"Development","path":"api/categories/Development.json"}],"tags":[{"name":"YAML语法","path":"api/tags/YAML语法.json"}]}