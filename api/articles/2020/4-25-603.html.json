{"title":"1.Go语言编程学习课后实践","slug":"编程世界/Go/Example/1.Go语言编程学习课后实践","date":"2020-04-25T03:16:58.000Z","updated":"2023-01-31T02:29:10.674Z","url":"2020/4-25-603.html","path":"api/articles/2020/4-25-603.html.json","covers":["https://img.weiyigeek.top/2021/5/20210731115534.png","https://img.weiyigeek.top/2021/5/20211021101428.png"],"content":"<p>[TOC]</p>\n<a id=\"more\"></a>\n<h2 id=\"0x01-变量类型章节\"><a href=\"#0x01-变量类型章节\" class=\"headerlink\" title=\"0x01 变量类型章节\"></a>0x01 变量类型章节</h2><p><strong>示例1.编写代码统计出字符串<code>&quot;为 Hello 中国 World,Go 语言 学习&quot;</code>中汉字的数量。</strong></p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 方式1.统计字符串中中文个数</span></span><br><span class=\"line\">s2 := <span class=\"string\">\"为 Hello 中国 World,Go 语言 学习\"</span></span><br><span class=\"line\">res := []<span class=\"keyword\">rune</span>(s2)</span><br><span class=\"line\">reslen := <span class=\"built_in\">len</span>(res)</span><br><span class=\"line\">count := <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> i := <span class=\"number\">0</span>; i &lt; reslen; i++ &#123;</span><br><span class=\"line\">  <span class=\"comment\">// UTF-8 由于中文或者其它语言占用3b~4b所以排除(0~255) 英文、符号以及特殊字符</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> res[i] &gt; <span class=\"number\">255</span> &#123;</span><br><span class=\"line\">    count++</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">fmt.Printf(<span class=\"string\">\"字符串:%s (Length = %d),一共有 %d 个中文字符\"</span>, s2, reslen, count)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 方式2.利用unicode中提供的方法统计字符串中的个数</span></span><br><span class=\"line\">count = <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> _, c := <span class=\"keyword\">range</span> s2 &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 判断字符是否该字符集编码，来统计中文字符</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> unicode.Is(unicode.Han, c) &#123;</span><br><span class=\"line\">    count++</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">fmt.Printf(<span class=\"string\">\"字符串:%s (Length = %d),一共有 %d 个中文字符\"</span>, s2, reslen, count)</span><br></pre></td></tr></table></figure>\n<p>执行结果:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">字符串:为 Hello 中国 World,Go 语言 学习 (Length = 25),一共有 7 个中文字符</span><br></pre></td></tr></table></figure></p>\n<hr>\n<h2 id=\"0x02-运算符与流程控制章节\"><a href=\"#0x02-运算符与流程控制章节\" class=\"headerlink\" title=\"0x02 运算符与流程控制章节\"></a>0x02 运算符与流程控制章节</h2><p><strong>示例1.有一堆数字，如果除了一个数字以外，其他数字都出现了两次，那么如何找到出现一次的数字？</strong></p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 查看出现一次的数字</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">showsinglenumber</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  numbers := <span class=\"number\">1234945579785321</span></span><br><span class=\"line\">  snumbers := fmt.Sprintf(<span class=\"string\">\"%d\"</span>, numbers)</span><br><span class=\"line\">  slength := <span class=\"built_in\">len</span>(snumbers)</span><br><span class=\"line\">  <span class=\"keyword\">for</span> i := <span class=\"number\">0</span>; i &lt; slength; i++ &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 判断其索引位置</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> strings.Index(snumbers, <span class=\"keyword\">string</span>(snumbers[i])) == strings.LastIndex(snumbers, <span class=\"keyword\">string</span>(snumbers[i])) &#123;</span><br><span class=\"line\">      fmt.Println(<span class=\"string\">\"只出现一次的数字 : \"</span>, <span class=\"keyword\">string</span>(snumbers[i])) <span class=\"comment\">// 注意输出时需要强制转换否则为byte类型输出Ascii值</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>执行结果:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">只出现一次的数字 :  8</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<p><strong>示例2.用Go语言编写一个九九乘法表</strong><br><figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 九九乘法表</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">MultiTable</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> i := <span class=\"number\">1</span>; i &lt;= <span class=\"number\">9</span>; i++ &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> j := <span class=\"number\">1</span>; j &lt;= i; j++ &#123;</span><br><span class=\"line\">      fmt.Printf(<span class=\"string\">\"%d * %d = %d, \"</span>, i, j, i*j)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    fmt.Println()</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><br><figure class=\"image-box\">\n                <img src=\"https://img.weiyigeek.top/2021/5/20210731115534.png\" alt=\"WeiyiGeek.GO九九乘法表\" title=\"\" class=\"\">\n                <p>WeiyiGeek.GO九九乘法表</p>\n            </figure></p>\n<hr>\n<h2 id=\"0x03-数组章节\"><a href=\"#0x03-数组章节\" class=\"headerlink\" title=\"0x03 数组章节\"></a>0x03 数组章节</h2><p><strong>示例1:求数组<code>[1, 3, 5, 7, 8]</code>所有元素的和</strong><br><figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">homework1</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 求数组`[1, 3, 5, 7, 8]`所有元素的和</span></span><br><span class=\"line\">  arr := [...]<span class=\"keyword\">int</span>&#123;<span class=\"number\">1</span>, <span class=\"number\">3</span>, <span class=\"number\">5</span>, <span class=\"number\">7</span>, <span class=\"number\">8</span>&#125;</span><br><span class=\"line\">  sum := <span class=\"number\">0</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> _, v := <span class=\"keyword\">range</span> arr &#123;</span><br><span class=\"line\">    sum += v</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  fmt.Printf(<span class=\"string\">\"%v 元素集合之和 : %d\"</span>, arr, sum)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><br>执行结果:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[1 3 5 7 8] 元素集合之和 : 24</span><br></pre></td></tr></table></figure></p>\n<p><strong>示例2.找出数组中和为指定值的两个元素的下标，比如从数组<code>[1, 3, 5, 7, 8]</code>中找出和为8的两个元素的下标分别为<code>(0,3)</code>和<code>(1,2)</code>。</strong><br><figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">homework2</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 比如从数组`[1, 3, 5, 7, 8]`中找出和为8的两个元素的下标分别为`(0,3)`和`(1,2)`。**</span></span><br><span class=\"line\">  arr := [...]<span class=\"keyword\">int</span>&#123;<span class=\"number\">1</span>, <span class=\"number\">3</span>, <span class=\"number\">5</span>, <span class=\"number\">7</span>, <span class=\"number\">8</span>&#125;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> i, v := <span class=\"keyword\">range</span> arr &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> j := i + <span class=\"number\">1</span>; j &lt; <span class=\"built_in\">len</span>(arr); j++ &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> v+arr[j] == <span class=\"number\">8</span> &#123;</span><br><span class=\"line\">        fmt.Printf(<span class=\"string\">\"arr[%d] + arr[%d] = %d \\n\"</span>, i, j, <span class=\"number\">8</span>)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><br>执行结果：<br><figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">arr[<span class=\"number\">0</span>] + arr[<span class=\"number\">3</span>] = <span class=\"number\">8</span> </span><br><span class=\"line\">arr[<span class=\"number\">1</span>] + arr[<span class=\"number\">2</span>] = <span class=\"number\">8</span></span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<p><strong>示例3.请使用内置的sort包对数组<code>var a = [...]int{3, 7, 8, 9, 1}</code>进行排序（附加题，自行查资料解答）。</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 把数组变成切片</span></span><br><span class=\"line\">func <span class=\"function\"><span class=\"title\">textsort</span></span>() &#123;</span><br><span class=\"line\">  a := [...]int&#123;3, 7, 8, 9, 1&#125;</span><br><span class=\"line\">  fmt.Printf(<span class=\"string\">\"a : %T , %v , ptr : %p \\n\"</span>, a, a, &amp;a)            // 数组</span><br><span class=\"line\">  sort.Ints(a[:])                                              // 排序</span><br><span class=\"line\">  fmt.Printf(<span class=\"string\">\"a[:] : %T , %v , ptr : %p \\n\"</span>, a[:], a[:], a[:]) // 切片</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"After sorted: \"</span>, a)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">a : [5]int , [3 7 8 9 1] , ptr : 0xc0000c6000 </span><br><span class=\"line\">a[:] : []int , [1 3 7 8 9] , ptr : 0xc0000c6000 </span><br><span class=\"line\">After sorted:  [1 3 7 8 9]</span><br></pre></td></tr></table></figure></p>\n<hr>\n<h2 id=\"0x04-切片章节\"><a href=\"#0x04-切片章节\" class=\"headerlink\" title=\"0x04 切片章节\"></a>0x04 切片章节</h2><p><strong>示例1.请写出下面代码的输出结果</strong><br><figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">text</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> a = <span class=\"built_in\">make</span>([]<span class=\"keyword\">string</span>, <span class=\"number\">5</span>, <span class=\"number\">10</span>)</span><br><span class=\"line\">  <span class=\"keyword\">for</span> i := <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i++ &#123;</span><br><span class=\"line\">    a = <span class=\"built_in\">append</span>(a, fmt.Sprintf(<span class=\"string\">\"%v\"</span>, i))  <span class=\"comment\">// 扩容 + 10 ，容量 + 10</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  fmt.Println(<span class=\"built_in\">len</span>(a), <span class=\"built_in\">cap</span>(a), a)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><br>实际执行结果:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">15 20 [0 1 2 3 4 5 6 7 8 9]</span><br></pre></td></tr></table></figure></p>\n<hr>\n<h2 id=\"0x05-映射章节\"><a href=\"#0x05-映射章节\" class=\"headerlink\" title=\"0x05 映射章节\"></a>0x05 映射章节</h2><p><strong>示例1.观察下面代码，写出最终的打印结果。</strong><br><figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">type</span> Map <span class=\"keyword\">map</span>[<span class=\"keyword\">string</span>][]<span class=\"keyword\">int</span></span><br><span class=\"line\">  m := <span class=\"built_in\">make</span>(Map)</span><br><span class=\"line\">  s := []<span class=\"keyword\">int</span>&#123;<span class=\"number\">1</span>, <span class=\"number\">2</span>&#125;</span><br><span class=\"line\">  s = <span class=\"built_in\">append</span>(s, <span class=\"number\">3</span>)</span><br><span class=\"line\">  fmt.Printf(<span class=\"string\">\"%+v\\n\"</span>, s)         <span class=\"comment\">// [ 1,2,3 ]</span></span><br><span class=\"line\">  m[<span class=\"string\">\"s\"</span>] = s</span><br><span class=\"line\">  s = <span class=\"built_in\">append</span>(s[:<span class=\"number\">1</span>], s[<span class=\"number\">2</span>:]...)    <span class=\"comment\">// 关键点</span></span><br><span class=\"line\">  fmt.Printf(<span class=\"string\">\"%+v\\n\"</span>, s)         <span class=\"comment\">// [ 1,3 ]</span></span><br><span class=\"line\">  fmt.Printf(<span class=\"string\">\"%+v\\n\"</span>, m[<span class=\"string\">\"s\"</span>])    <span class=\"comment\">// [ 1,3,3 ]</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<p><strong>示例2.写一个程序，统计一个字符串中每个单词出现的次数。比如：”how do you do”中how=1 do=2 you=1。</strong></p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">homework2</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> a = <span class=\"string\">\"how do you do\"</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> splitA = strings.Split(a, <span class=\"string\">\" \"</span>)</span><br><span class=\"line\">  <span class=\"keyword\">var</span> count = <span class=\"built_in\">make</span>(<span class=\"keyword\">map</span>[<span class=\"keyword\">string</span>]<span class=\"keyword\">int</span>, <span class=\"built_in\">len</span>(splitA))</span><br><span class=\"line\">  <span class=\"comment\">// 方式1</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> _, v := <span class=\"keyword\">range</span> splitA &#123;</span><br><span class=\"line\">    value, ok := count[v]</span><br><span class=\"line\">    <span class=\"keyword\">if</span> !ok &#123;</span><br><span class=\"line\">      value = <span class=\"number\">1</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      value++</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    count[v] = value</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  fmt.Printf(<span class=\"string\">\"统计 %v 字符串每个单词出现的结果: %+v \\n\"</span>, a, count)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 方式2 (非常值得学习)</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> _, w := <span class=\"keyword\">range</span> splitA &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> _, ok := count[w]; !ok &#123;</span><br><span class=\"line\">      count[w] = <span class=\"number\">1</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      count[w]++</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  fmt.Printf(<span class=\"string\">\"统计 %v 字符串每个单词出现的结果: %+v \\n\"</span>, a, count)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>执行结果:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">统计 how <span class=\"keyword\">do</span> you <span class=\"keyword\">do</span> 字符串每个单词出现的结果: map[<span class=\"keyword\">do</span>:2 how:1 you:1]</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<p><strong>示例3.判断中文字符串的回文如，一行白鹭与鹭白行一</strong></p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">homework1</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  s := <span class=\"string\">\"a一行白鹭与鹭白行一a\"</span></span><br><span class=\"line\">  srune := []<span class=\"keyword\">rune</span>(s)</span><br><span class=\"line\">  fmt.Printf(<span class=\"string\">\"%T, Len : %d , Cap : %d \\n\"</span>, srune, <span class=\"built_in\">len</span>(srune), <span class=\"built_in\">cap</span>(srune))</span><br><span class=\"line\">  <span class=\"keyword\">for</span> i := <span class=\"keyword\">range</span> srune &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> srune[i] != srune[<span class=\"built_in\">len</span>(srune)<span class=\"number\">-1</span>-i] &#123;</span><br><span class=\"line\">      fmt.Printf(<span class=\"string\">\"`%v`不是回文字符串\"</span>, s)</span><br><span class=\"line\">      <span class=\"keyword\">return</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> i &gt;= <span class=\"built_in\">len</span>(srune)/<span class=\"number\">2</span> &#123;</span><br><span class=\"line\">      fmt.Printf(<span class=\"string\">\"`%v`是回文字符串\"</span>, s)</span><br><span class=\"line\">      <span class=\"keyword\">return</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>执行结果:<br><figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[]<span class=\"keyword\">int32</span>, Len : <span class=\"number\">11</span> , Cap : <span class=\"number\">12</span></span><br><span class=\"line\"><span class=\"string\">`a一行白鹭与鹭白行一a`</span>是回文字符串</span><br></pre></td></tr></table></figure></p>\n<hr>\n<h2 id=\"0x06-函数章节\"><a href=\"#0x06-函数章节\" class=\"headerlink\" title=\"0x06 函数章节\"></a>0x06 函数章节</h2><p><strong>示例1.分金币</strong><br><figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">你有50枚金币，需要分配给以下几个人：Matthew,Sarah,Augustus,Heidi,Emilie,Peter,Giana,Adriano,Aaron,Elizabeth。</span></span><br><span class=\"line\"><span class=\"comment\">分配规则如下：</span></span><br><span class=\"line\"><span class=\"comment\">a. 名字中每包含1个'e'或'E'分1枚金币</span></span><br><span class=\"line\"><span class=\"comment\">b. 名字中每包含1个'i'或'I'分2枚金币</span></span><br><span class=\"line\"><span class=\"comment\">c. 名字中每包含1个'o'或'O'分3枚金币</span></span><br><span class=\"line\"><span class=\"comment\">d: 名字中每包含1个'u'或'U'分4枚金币</span></span><br><span class=\"line\"><span class=\"comment\">写一个程序，计算每个用户分到多少金币，以及最后剩余多少金币？</span></span><br><span class=\"line\"><span class=\"comment\">程序结构如下，请实现 ‘dispatchCoin’ 函数</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> (</span><br><span class=\"line\">  coins = <span class=\"number\">50</span></span><br><span class=\"line\">  users = []<span class=\"keyword\">string</span>&#123;</span><br><span class=\"line\">    <span class=\"string\">\"Matthew\"</span>, <span class=\"string\">\"Sarah\"</span>, <span class=\"string\">\"Augustus\"</span>, <span class=\"string\">\"Heidi\"</span>, <span class=\"string\">\"Emilie\"</span>, <span class=\"string\">\"Peter\"</span>, <span class=\"string\">\"Giana\"</span>, <span class=\"string\">\"Adriano\"</span>, <span class=\"string\">\"Aaron\"</span>, <span class=\"string\">\"Elizabeth\"</span>,</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  distribution = <span class=\"built_in\">make</span>(<span class=\"keyword\">map</span>[<span class=\"keyword\">string</span>]<span class=\"keyword\">int</span>, <span class=\"built_in\">len</span>(users))</span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">dispatchCoin</span><span class=\"params\">()</span> <span class=\"title\">int</span></span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 1.遍历用户</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> _, name := <span class=\"keyword\">range</span> users &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 2.判断用户时候是否在 map 中</span></span><br><span class=\"line\">    _, ok := distribution[name]</span><br><span class=\"line\">    <span class=\"keyword\">if</span> ok &#123;</span><br><span class=\"line\">      <span class=\"keyword\">continue</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// 3.利用匿名函数求出每个人的获得金币数</span></span><br><span class=\"line\">    temp := <span class=\"function\"><span class=\"keyword\">func</span><span class=\"params\">()</span> <span class=\"title\">int</span></span> &#123;</span><br><span class=\"line\">      count := <span class=\"number\">0</span></span><br><span class=\"line\">      <span class=\"keyword\">for</span> _, crune := <span class=\"keyword\">range</span> name &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 方式1</span></span><br><span class=\"line\">        <span class=\"comment\">// c := string(crune)</span></span><br><span class=\"line\">        <span class=\"comment\">// if c == \"e\" || c == \"E\" &#123;</span></span><br><span class=\"line\">        <span class=\"comment\">// \tcount += 1</span></span><br><span class=\"line\">        <span class=\"comment\">// &#125; else if c == \"i\" || c == \"I\" &#123;</span></span><br><span class=\"line\">        <span class=\"comment\">// \tcount += 2</span></span><br><span class=\"line\">        <span class=\"comment\">// &#125; else if c == \"o\" || c == \"O\" &#123;</span></span><br><span class=\"line\">        <span class=\"comment\">// \tcount += 3</span></span><br><span class=\"line\">        <span class=\"comment\">// &#125; else if c == \"u\" || c == \"U\" &#123;</span></span><br><span class=\"line\">        <span class=\"comment\">// \tcount += 4</span></span><br><span class=\"line\">        <span class=\"comment\">// &#125;</span></span><br><span class=\"line\">        <span class=\"comment\">// 方式2（推荐）</span></span><br><span class=\"line\">        <span class=\"keyword\">switch</span> crune &#123;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"string\">'e'</span>, <span class=\"string\">'E'</span>:</span><br><span class=\"line\">          count += <span class=\"number\">1</span></span><br><span class=\"line\">          coins -= <span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"string\">'i'</span>, <span class=\"string\">'I'</span>:</span><br><span class=\"line\">          count += <span class=\"number\">2</span></span><br><span class=\"line\">          coins -= <span class=\"number\">2</span></span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"string\">'o'</span>, <span class=\"string\">'O'</span>:</span><br><span class=\"line\">          count += <span class=\"number\">3</span></span><br><span class=\"line\">          coins -= <span class=\"number\">3</span></span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"string\">'u'</span>, <span class=\"string\">'U'</span>:</span><br><span class=\"line\">          count += <span class=\"number\">4</span></span><br><span class=\"line\">          coins -= <span class=\"number\">4</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> count</span><br><span class=\"line\">    &#125;()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 4.将人员和金币数进行绑定</span></span><br><span class=\"line\">    distribution[name] = temp</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// 5.输出所有人员占有的金币数</span></span><br><span class=\"line\">  fmt.Println(distribution)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 6.返回剩余金币数量</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> coins</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">homework</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  left := dispatchCoin()</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"剩下的金币数:\"</span>, left)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><br>执行结果:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">map[Aaron:3 Adriano:5 Augustus:12 Elizabeth:4 Emilie:6 Giana:2 Heidi:5 Matthew:1 Peter:2 Sarah:0]</span><br><span class=\"line\">剩下的金币数: 10</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<p><strong>示例2.有n个台阶，一次可以走一步或者两步，问一共有多少种走法</strong><br><figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">ladder</span><span class=\"params\">(step <span class=\"keyword\">uint64</span>)</span> <span class=\"params\">(ret <span class=\"keyword\">uint64</span>)</span></span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 如果只有一步阶梯则只有一种走法。</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> step == <span class=\"number\">1</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">1</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// 如果有两步阶梯则有两种走法。</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> step == <span class=\"number\">2</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">2</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// 如有三步则有3种走法，所以 n 步 = (n - 1) + （n -2）</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> ladder(step<span class=\"number\">-1</span>) + ladder(step<span class=\"number\">-2</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">demo2</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  ret := ladder(<span class=\"number\">6</span>)</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"当有六步阶梯时,有\"</span>, ret, <span class=\"string\">\"种走法!\"</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><br>执行结果:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">当有六步阶梯时,有 13 种走法!</span><br></pre></td></tr></table></figure></p>\n<hr>\n<h2 id=\"0x07-结构体章节\"><a href=\"#0x07-结构体章节\" class=\"headerlink\" title=\"0x07 结构体章节\"></a>0x07 结构体章节</h2><p><strong>示例1.请问下面代码的执行结果是什么？</strong><br><figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> student <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  name <span class=\"keyword\">string</span></span><br><span class=\"line\">  age  <span class=\"keyword\">int</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">homework1</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  m := <span class=\"built_in\">make</span>(<span class=\"keyword\">map</span>[<span class=\"keyword\">string</span>]*student)</span><br><span class=\"line\">  <span class=\"comment\">// 后进先出</span></span><br><span class=\"line\">  stus := []student&#123;</span><br><span class=\"line\">    &#123;name: <span class=\"string\">\"小王\"</span>, age: <span class=\"number\">18</span>&#125;,</span><br><span class=\"line\">    &#123;name: <span class=\"string\">\"娜扎\"</span>, age: <span class=\"number\">23</span>&#125;,</span><br><span class=\"line\">    &#123;name: <span class=\"string\">\"大王\"</span>, age: <span class=\"number\">900</span>&#125;, <span class=\"comment\">// 初始指针指向的位置</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  fmt.Printf(<span class=\"string\">\"stus ： %p \\n\"</span>, &amp;stus)</span><br><span class=\"line\">  <span class=\"keyword\">for</span> _, stu := <span class=\"keyword\">range</span> stus &#123;</span><br><span class=\"line\">    m[stu.name] = &amp;stu</span><br><span class=\"line\">    fmt.Printf(<span class=\"string\">\"for stu ：%p, value : %v, Size: %d\\n\"</span>, &amp;stu, stu, unsafe.Sizeof(stu.age))</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> k, v := <span class=\"keyword\">range</span> m &#123;</span><br><span class=\"line\">    fmt.Println(k, <span class=\"string\">\"=&gt;\"</span>, v.name)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><br>执行结果:<br><figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">stus ： <span class=\"number\">0xc00000c030</span> </span><br><span class=\"line\"><span class=\"keyword\">for</span> stu ：<span class=\"number\">0xc00000c048</span>, value : &#123;小王 <span class=\"number\">18</span>&#125;, Size: <span class=\"number\">8</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> stu ：<span class=\"number\">0xc00000c048</span>, value : &#123;娜扎 <span class=\"number\">23</span>&#125;, Size: <span class=\"number\">8</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> stu ：<span class=\"number\">0xc00000c048</span>, value : &#123;大王 <span class=\"number\">900</span>&#125;, Size: <span class=\"number\">8</span></span><br><span class=\"line\">小王 =&gt; 大王</span><br><span class=\"line\">娜扎 =&gt; 大王</span><br><span class=\"line\">大王 =&gt; 大王</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<p><strong>示例2.利用函数Funtion实现考生信息系统</strong><br><figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">  <span class=\"string\">\"os\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**\tDesc: 采用函数实现考生信息的增加与删除**/</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> (</span><br><span class=\"line\">  <span class=\"comment\">// options</span></span><br><span class=\"line\">  flag <span class=\"keyword\">uint8</span></span><br><span class=\"line\">  <span class=\"comment\">// key : value</span></span><br><span class=\"line\">  allStudent <span class=\"keyword\">map</span>[<span class=\"keyword\">int64</span>]*Student</span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 结构体</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> Student <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  id   <span class=\"keyword\">int64</span></span><br><span class=\"line\">  name <span class=\"keyword\">string</span></span><br><span class=\"line\">  age  <span class=\"keyword\">uint8</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 构造函数</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">newStudent</span><span class=\"params\">(id <span class=\"keyword\">int64</span>, name <span class=\"keyword\">string</span>, age <span class=\"keyword\">uint8</span>)</span> *<span class=\"title\">Student</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &amp;Student&#123;</span><br><span class=\"line\">    id:   id,</span><br><span class=\"line\">    name: name,</span><br><span class=\"line\">    age:  age,</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 验证考生是否存在</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">judgeStudent</span><span class=\"params\">(id <span class=\"keyword\">int64</span>)</span> <span class=\"title\">bool</span></span> &#123;</span><br><span class=\"line\">  _, ok := allStudent[id]</span><br><span class=\"line\">  <span class=\"keyword\">if</span> ok &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 添加考生</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">addStudent</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> (</span><br><span class=\"line\">    id   <span class=\"keyword\">int64</span></span><br><span class=\"line\">    name <span class=\"keyword\">string</span></span><br><span class=\"line\">    age  <span class=\"keyword\">uint8</span></span><br><span class=\"line\">  )</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"#请输入考生 id name age 信息以空格分割：\"</span>)</span><br><span class=\"line\">  fmt.Scan(&amp;id, &amp;name, &amp;age)</span><br><span class=\"line\">  <span class=\"keyword\">if</span> !judgeStudent(id) &#123;</span><br><span class=\"line\">    student := newStudent(id, name, age)</span><br><span class=\"line\">    allStudent[id] = student</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    fmt.Println(<span class=\"string\">\"该id号的考生已存在无需重复添加.\"</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 删除考生</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">delStuednt</span><span class=\"params\">(id <span class=\"keyword\">int64</span>)</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> judgeStudent(id) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">delete</span>(allStudent, id)</span><br><span class=\"line\">    fmt.Printf(<span class=\"string\">\"已删除考生号为 %d 的学生信息.\\n\"</span>, id)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    fmt.Println(<span class=\"string\">\"该id号的考生不存在.\"</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 显示考生</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">showStudent</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> k, v := <span class=\"keyword\">range</span> allStudent &#123;</span><br><span class=\"line\">    fmt.Printf(<span class=\"string\">\"uid: %d 姓名: %s 年龄: %d\\n\"</span>, k, v.name, v.age)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// Step 0.初始化存放考生信息的Map</span></span><br><span class=\"line\">  allStudent = <span class=\"built_in\">make</span>(<span class=\"keyword\">map</span>[<span class=\"keyword\">int64</span>]*Student)</span><br><span class=\"line\">  fmt.Printf(<span class=\"string\">\"allStudent len %v\"</span>, <span class=\"built_in\">len</span>(allStudent))</span><br><span class=\"line\">  <span class=\"comment\">// Step 1</span></span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"欢迎使用学生信息系统简单版本\"</span>)</span><br><span class=\"line\">  fmt.Printf(<span class=\"string\">\"功能说明: \\n1.增加学生\\n2.查看学生\\n3.删除学生\\n4.退出程序\\n\\n\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// Step 2</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> &#123;</span><br><span class=\"line\">    fmt.Printf(<span class=\"string\">\"功能选择: \"</span>)</span><br><span class=\"line\">    fmt.Scanln(&amp;flag)</span><br><span class=\"line\">    fmt.Printf(<span class=\"string\">\"#你选择第 %d 个的选项\\n\"</span>, flag)</span><br><span class=\"line\">    <span class=\"comment\">// step 3</span></span><br><span class=\"line\">    <span class=\"keyword\">switch</span> flag &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">1</span>:</span><br><span class=\"line\">      addStudent()</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">2</span>:</span><br><span class=\"line\">      showStudent()</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">3</span>:</span><br><span class=\"line\">      fmt.Printf(<span class=\"string\">\"请输入要删除的学生 uid:\"</span>)</span><br><span class=\"line\">      <span class=\"keyword\">var</span> uid <span class=\"keyword\">int64</span></span><br><span class=\"line\">      fmt.Scanln(&amp;uid)</span><br><span class=\"line\">      delStuednt(uid)</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">4</span>:</span><br><span class=\"line\">      fmt.Printf(<span class=\"string\">\"程序结束 :\"</span>)</span><br><span class=\"line\">      os.Exit(<span class=\"number\">1</span>)</span><br><span class=\"line\">    <span class=\"keyword\">default</span>:</span><br><span class=\"line\">      fmt.Printf(<span class=\"string\">\"功能说明: \\n1.增加学生\\n2.查看学生\\n3.删除学生\\n4.退出程序\"</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><br>执行结果:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">欢迎使用学生信息系统简单版本</span><br><span class=\"line\">功能说明: </span><br><span class=\"line\">1.增加学生</span><br><span class=\"line\">2.查看学生</span><br><span class=\"line\">3.删除学生</span><br><span class=\"line\">4.退出程序</span><br><span class=\"line\"></span><br><span class=\"line\">功能选择: 1</span><br><span class=\"line\"><span class=\"comment\"># 你选择第 1 个的选项</span></span><br><span class=\"line\"><span class=\"comment\"># 请输入考生 id name age 信息以空格分割：</span></span><br><span class=\"line\">10086 移动 25</span><br><span class=\"line\">功能选择: 1</span><br><span class=\"line\"><span class=\"comment\"># 你选择第 1 个的选项</span></span><br><span class=\"line\"><span class=\"comment\"># 请输入考生 id name age 信息以空格分割：</span></span><br><span class=\"line\">10010 联通 25</span><br><span class=\"line\">功能选择: 1 </span><br><span class=\"line\"><span class=\"comment\"># 你选择第 1 个的选项</span></span><br><span class=\"line\"><span class=\"comment\"># 请输入考生 id name age 信息以空格分割：</span></span><br><span class=\"line\">10000 典电信 26</span><br><span class=\"line\">功能选择: 2</span><br><span class=\"line\"><span class=\"comment\"># 你选择第 2 个的选项</span></span><br><span class=\"line\">uid: 10086 姓名: 移动 年龄: 25</span><br><span class=\"line\">uid: 10010 姓名: 联通 年龄: 25</span><br><span class=\"line\">uid: 10000 姓名: 电信 年龄: 26</span><br><span class=\"line\">功能选择: 3</span><br><span class=\"line\"><span class=\"comment\"># 你选择第 3 个的选项</span></span><br><span class=\"line\">请输入要删除的学生 uid:10000</span><br><span class=\"line\">已删除考生号为 10000 的学生信息.</span><br><span class=\"line\">功能选择: 2</span><br><span class=\"line\"><span class=\"comment\"># 你选择第 2 个的选项</span></span><br><span class=\"line\">uid: 10086 姓名: 移动 年龄: 25</span><br><span class=\"line\">uid: 10010 姓名: 联通 年龄: 25</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<p><strong>示例3.利用结构体方法进行实现考生信息管理系统</strong><br><figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">  <span class=\"string\">\"os\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"><span class=\"comment\">/**\tDesc: 采用结构体方法实现考生信息的增加与删除**/</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> (</span><br><span class=\"line\">  <span class=\"comment\">// options</span></span><br><span class=\"line\">  flag <span class=\"keyword\">uint8</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// key : value</span></span><br><span class=\"line\">  allStudent <span class=\"keyword\">map</span>[<span class=\"keyword\">int64</span>]*Student</span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 结构体</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> Student <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  id   <span class=\"keyword\">int64</span></span><br><span class=\"line\">  name <span class=\"keyword\">string</span></span><br><span class=\"line\">  age  <span class=\"keyword\">uint8</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 构造函数</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">newStudent</span><span class=\"params\">(id <span class=\"keyword\">int64</span>, name <span class=\"keyword\">string</span>, age <span class=\"keyword\">uint8</span>)</span> *<span class=\"title\">Student</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &amp;Student&#123;</span><br><span class=\"line\">    id:   id,</span><br><span class=\"line\">    name: name,</span><br><span class=\"line\">    age:  age,</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 验证考生是否存在</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(s *Student)</span> <span class=\"title\">judge</span><span class=\"params\">(id <span class=\"keyword\">int64</span>)</span> <span class=\"title\">bool</span></span> &#123;</span><br><span class=\"line\">  _, ok := allStudent[id]</span><br><span class=\"line\">  <span class=\"keyword\">if</span> ok &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 添加考生</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(s *Student)</span> <span class=\"title\">add</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> (</span><br><span class=\"line\">    id   <span class=\"keyword\">int64</span></span><br><span class=\"line\">    name <span class=\"keyword\">string</span></span><br><span class=\"line\">    age  <span class=\"keyword\">uint8</span></span><br><span class=\"line\">  )</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"#请输入考生 id name age 信息以空格分割：\"</span>)</span><br><span class=\"line\">  fmt.Scan(&amp;id, &amp;name, &amp;age)</span><br><span class=\"line\">  <span class=\"keyword\">if</span> !s.judge(id) &#123;</span><br><span class=\"line\">    student := newStudent(id, name, age)</span><br><span class=\"line\">    allStudent[id] = student</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    fmt.Println(<span class=\"string\">\"该id号的考生已存在无需重复添加.\"</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 删除考生</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(s *Student)</span> <span class=\"title\">del</span><span class=\"params\">(id <span class=\"keyword\">int64</span>)</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> s.judge(id) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">delete</span>(allStudent, id)</span><br><span class=\"line\">    fmt.Printf(<span class=\"string\">\"已删除考生号为 %d 的学生信息.\\n\"</span>, id)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    fmt.Println(<span class=\"string\">\"该id号的考生不存在.\"</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 显示考生</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(s *Student)</span> <span class=\"title\">show</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> k, v := <span class=\"keyword\">range</span> allStudent &#123;</span><br><span class=\"line\">    fmt.Printf(<span class=\"string\">\"uid: %d 姓名: %s 年龄: %d\\n\"</span>, k, v.name, v.age)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// Step 0.初始化存放考生信息的Map</span></span><br><span class=\"line\">  allStudent = <span class=\"built_in\">make</span>(<span class=\"keyword\">map</span>[<span class=\"keyword\">int64</span>]*Student, <span class=\"number\">48</span>)</span><br><span class=\"line\">  student := Student&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// Step 1</span></span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"欢迎使用学生信息系统简单版本\"</span>)</span><br><span class=\"line\">  fmt.Printf(<span class=\"string\">\"功能说明: \\n1.增加学生\\n2.查看学生\\n3.删除学生\\n4.退出程序\\n\\n\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// Step 2</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> &#123;</span><br><span class=\"line\">    fmt.Printf(<span class=\"string\">\"功能选择: \"</span>)</span><br><span class=\"line\">    fmt.Scanln(&amp;flag)</span><br><span class=\"line\">    fmt.Printf(<span class=\"string\">\"#你选择第 %d 个的选项\\n\"</span>, flag)</span><br><span class=\"line\">    <span class=\"comment\">// step 3</span></span><br><span class=\"line\">    <span class=\"keyword\">switch</span> flag &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">1</span>:</span><br><span class=\"line\">      student.add()  <span class=\"comment\">// 结构体中调用add方法</span></span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">2</span>:</span><br><span class=\"line\">      student.show()  <span class=\"comment\">// 结构体中调用show方法</span></span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">3</span>:</span><br><span class=\"line\">      fmt.Printf(<span class=\"string\">\"请输入要删除的学生 uid:\"</span>)</span><br><span class=\"line\">      <span class=\"keyword\">var</span> uid <span class=\"keyword\">int64</span></span><br><span class=\"line\">      fmt.Scanln(&amp;uid)</span><br><span class=\"line\">      student.del(uid)  <span class=\"comment\">// 结构体中调用del方法</span></span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">4</span>:</span><br><span class=\"line\">      fmt.Printf(<span class=\"string\">\"程序结束 :\"</span>)</span><br><span class=\"line\">      os.Exit(<span class=\"number\">1</span>)</span><br><span class=\"line\">    <span class=\"keyword\">default</span>:</span><br><span class=\"line\">      fmt.Printf(<span class=\"string\">\"功能说明: \\n1.增加学生\\n2.查看学生\\n3.删除学生\\n4.退出程序\"</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><br>执行结果:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">功能选择: 1</span><br><span class=\"line\"><span class=\"comment\">#你选择第 1 个的选项</span></span><br><span class=\"line\"><span class=\"comment\">#请输入考生 id name age 信息以空格分割：</span></span><br><span class=\"line\">10086 移动 25</span><br><span class=\"line\">功能选择: 1</span><br><span class=\"line\"><span class=\"comment\">#你选择第 1 个的选项</span></span><br><span class=\"line\"><span class=\"comment\">#请输入考生 id name age 信息以空格分割：</span></span><br><span class=\"line\">10010 联通 24</span><br><span class=\"line\">功能选择: 2</span><br><span class=\"line\"><span class=\"comment\">#你选择第 2 个的选项</span></span><br><span class=\"line\">uid: 10086 姓名: 移动 年龄: 25</span><br><span class=\"line\">uid: 10010 姓名: 联通 年龄: 24</span><br><span class=\"line\">功能选择: 3</span><br><span class=\"line\"><span class=\"comment\">#你选择第 3 个的选项</span></span><br><span class=\"line\">请输入要删除的学生 uid:10010</span><br><span class=\"line\">已删除考生号为 10010 的学生信息.</span><br><span class=\"line\">功能选择: 2</span><br><span class=\"line\"><span class=\"comment\">#你选择第 2 个的选项</span></span><br><span class=\"line\">uid: 10086 姓名: 移动 年龄: 25</span><br><span class=\"line\">功能选择: 4</span><br><span class=\"line\"><span class=\"comment\">#你选择第 4 个的选项</span></span><br><span class=\"line\">程序结束 :<span class=\"built_in\">exit</span> status 1</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<p><strong>作业4.反转一个单链表</strong><br>示例说明: <code>1-&gt;2-&gt;3-&gt;4-&gt;5-&gt;NULL</code>, <code>5-&gt;4-&gt;3-&gt;2-&gt;1-&gt;NULL</code><br>代码示例:<br><figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\"><span class=\"comment\">// 链表结构体</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> ListNode <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  val  <span class=\"keyword\">int</span></span><br><span class=\"line\">  Next *ListNode</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 反转链表函数</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">reverseList</span><span class=\"params\">(head *ListNode)</span> *<span class=\"title\">ListNode</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> pre *ListNode</span><br><span class=\"line\">  cur := head</span><br><span class=\"line\">  <span class=\"keyword\">for</span> cur != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">    tmp := cur.Next <span class=\"comment\">// 把下一个节点存放到临时变量中</span></span><br><span class=\"line\">    cur.Next = pre  <span class=\"comment\">// 首节点赋予下一指向节点（首次Nil）</span></span><br><span class=\"line\">    pre = cur       <span class=\"comment\">// 将当前节点（首次val为1的地址）赋予pre</span></span><br><span class=\"line\">    cur = tmp       <span class=\"comment\">// 将上面临时变量地址（首次val为2的地址）赋予cur</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> pre <span class=\"comment\">// 返回反转链表</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 1.实例化链表</span></span><br><span class=\"line\">  head := &amp;ListNode&#123;</span><br><span class=\"line\">    val: <span class=\"number\">1</span>,</span><br><span class=\"line\">    Next: &amp;ListNode&#123;</span><br><span class=\"line\">      val: <span class=\"number\">2</span>,</span><br><span class=\"line\">      Next: &amp;ListNode&#123;</span><br><span class=\"line\">        val: <span class=\"number\">3</span>,</span><br><span class=\"line\">        Next: &amp;ListNode&#123;</span><br><span class=\"line\">          val: <span class=\"number\">4</span>,</span><br><span class=\"line\">          Next: &amp;ListNode&#123;</span><br><span class=\"line\">            val:  <span class=\"number\">5</span>,</span><br><span class=\"line\">            Next: <span class=\"literal\">nil</span>,</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 链表实例化对象副本拷贝</span></span><br><span class=\"line\">  header := head</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"反转前首地址:\"</span>, header)</span><br><span class=\"line\">  <span class=\"keyword\">for</span> header != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">    fmt.Printf(<span class=\"string\">\"%v-&gt;\"</span>, header.val)</span><br><span class=\"line\">    header = header.Next</span><br><span class=\"line\">    <span class=\"keyword\">if</span> header == <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">      fmt.Printf(<span class=\"string\">\"Nil\\n\"</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 2.调用反转链表</span></span><br><span class=\"line\">  res := reverseList(head)</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"反转后首地址:\"</span>, res)</span><br><span class=\"line\">  <span class=\"keyword\">for</span> res != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">    fmt.Printf(<span class=\"string\">\"%v-&gt;\"</span>, res.val)</span><br><span class=\"line\">    res = res.Next</span><br><span class=\"line\">    <span class=\"keyword\">if</span> res == <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">      fmt.Printf(<span class=\"string\">\"Nil\\n\"</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>执行结果:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">反转前首地址: &amp;&#123;1 0xc000046240&#125;</span><br><span class=\"line\">1-&gt;2-&gt;3-&gt;4-&gt;5-&gt;Nil</span><br><span class=\"line\">反转后首地址: &amp;&#123;5 0xc000046260&#125;</span><br><span class=\"line\">5-&gt;4-&gt;3-&gt;2-&gt;1-&gt;Nil</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"0x08-接口章节\"><a href=\"#0x08-接口章节\" class=\"headerlink\" title=\"0x08 接口章节\"></a>0x08 接口章节</h2><p><strong>作业1.利用接口既可以求三角形的面积也能求正方形的面积</strong><br><figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">  <span class=\"string\">\"math\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> GarphicArea <span class=\"keyword\">interface</span> &#123;</span><br><span class=\"line\">  Square(<span class=\"keyword\">float64</span>) <span class=\"keyword\">float64</span>                     <span class=\"comment\">// 正方形</span></span><br><span class=\"line\">  Triangle(<span class=\"keyword\">float64</span>, <span class=\"keyword\">float64</span>, <span class=\"keyword\">float64</span>) <span class=\"keyword\">float64</span> <span class=\"comment\">//三角形</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">type</span> GarphicName <span class=\"keyword\">struct</span>&#123; Name <span class=\"keyword\">string</span> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(g *GarphicName)</span> <span class=\"title\">Square</span><span class=\"params\">(a <span class=\"keyword\">float64</span>)</span> <span class=\"title\">float64</span></span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// S = a^2</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> math.Pow(a, <span class=\"number\">2</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(g *GarphicName)</span> <span class=\"title\">Triangle</span><span class=\"params\">(a, b, c <span class=\"keyword\">float64</span>)</span> <span class=\"title\">float64</span></span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">//（海伦公式）（p=(a+b+c)/2） S=sqrt[p(p-a)(p-b)(p-c)]</span></span><br><span class=\"line\">  p := (a + b + c) / <span class=\"number\">2</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> math.Sqrt(p * (p - a) * (p - b) * (p - c))</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> ga GarphicArea = &amp;GarphicName&#123;<span class=\"string\">\"正方形\"</span>&#125;</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"正方形面积: \"</span>, ga.Square(<span class=\"number\">4</span>))</span><br><span class=\"line\">  ga = &amp;GarphicName&#123;<span class=\"string\">\"三角形\"</span>&#125;</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"三角形面积: \"</span>, ga.Triangle(<span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>))</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><br>执行结果:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">正方形面积:  16</span><br><span class=\"line\">三角形面积:  6</span><br></pre></td></tr></table></figure></p>\n<hr>\n<h2 id=\"0x09-包章节\"><a href=\"#0x09-包章节\" class=\"headerlink\" title=\"0x09 包章节\"></a>0x09 包章节</h2><p><strong>作业1.利用包来封装调用位移运算符进行左移或者右移多少位，并输出其二进制表示的结果</strong><br><figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// # weiyigeek.top/custom/pkg/bitmove.go</span></span><br><span class=\"line\"><span class=\"comment\">// # packeageName bitmove</span></span><br><span class=\"line\"><span class=\"keyword\">package</span> bitmove</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">Leftmove</span><span class=\"params\">(n <span class=\"keyword\">int</span>, shift <span class=\"keyword\">int</span>)</span></span> &#123;</span><br><span class=\"line\">  fmt.Printf(<span class=\"string\">\"%v &lt;&lt; %v = %08b\\n\"</span>, n, shift, n&lt;&lt;shift)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">RightMove</span><span class=\"params\">(n <span class=\"keyword\">int</span>, shift <span class=\"keyword\">int</span>)</span></span> &#123;</span><br><span class=\"line\">  fmt.Printf(<span class=\"string\">\"%v &gt;&gt; %v = %08b\\n\"</span>, n, shift, n&gt;&gt;shift)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// # 主入口文件我们可使用import来导入我们自己编写的包（注意包中属性、函数、结构体、接口需要首字母大小才能被外部引用）</span></span><br><span class=\"line\"><span class=\"comment\">// # weiyigeek.top/studygo/homework/2.packeage/displacement.go</span></span><br><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">  bitmove <span class=\"string\">\"weiyigeek.top/custom/pkg\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  bitmove.Leftmove(<span class=\"number\">4</span>, <span class=\"number\">2</span>)</span><br><span class=\"line\">  bitmove.RightMove(<span class=\"number\">10</span>, <span class=\"number\">2</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>执行结果:<br><figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">4</span> &lt;&lt; <span class=\"number\">2</span> = <span class=\"number\">00010000</span></span><br><span class=\"line\"><span class=\"number\">10</span> &gt;&gt; <span class=\"number\">2</span> = <span class=\"number\">00000010</span></span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<h2 id=\"0x10-Time章节\"><a href=\"#0x10-Time章节\" class=\"headerlink\" title=\"0x10 Time章节\"></a>0x10 Time章节</h2><p><strong>作业1.获取当前时间，格式化输出为2006/01/02 15:04:05`格式。</strong></p>\n<blockquote>\n<p>fmt.Println(“当前时间: “, time.Now().Format(“2006/01/02 15:04:05”))<br>当前时间:  2021/09/27 15:02:31</p>\n</blockquote>\n<p><br></p>\n<p><strong>作业2.编写程序统计一段代码的执行耗时时间，单位精确到微秒。</strong><br><figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">demo2</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 开始时间</span></span><br><span class=\"line\">  startTime := time.Now()</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 从1+...+1000之和</span></span><br><span class=\"line\">  sum := <span class=\"number\">0</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> i := <span class=\"number\">0</span>; i &lt;= <span class=\"number\">1000</span>; i++ &#123;</span><br><span class=\"line\">    sum += i</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"从1+...+1000之和为\"</span>, sum)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 结束时间</span></span><br><span class=\"line\">  endTime := time.Now()</span><br><span class=\"line\"></span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"该段代码耗时时间为:\"</span>, endTime.Sub(startTime))</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ==== 执行结果 ====</span></span><br><span class=\"line\">从<span class=\"number\">1</span>+...+<span class=\"number\">1000</span>之和为 <span class=\"number\">500500</span></span><br><span class=\"line\">该段代码耗时时间为: <span class=\"number\">6.765</span>µs</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<h2 id=\"0x11-阶段性综合实践\"><a href=\"#0x11-阶段性综合实践\" class=\"headerlink\" title=\"0x11 阶段性综合实践\"></a>0x11 阶段性综合实践</h2><p><strong>日志库</strong><br>程序需求分析:</p>\n<ul>\n<li>(1) 支持向不同的地方输出日志,例如文件或者终端<code>stdout</code>。</li>\n<li>(2) 日志多级别展示,例如<code>Debug/Trace/Info/Warning/Error/Falat</code></li>\n<li>(3) 开发测试与线上生产定义显示级别(Info 及以上)。</li>\n<li>(4) 日志出现异常时间，异常错误文件，函数及其行数。</li>\n<li>(5) 日志文件切割(按照小时、天、文件大小切割)</li>\n</ul>\n<p><br/></p>\n<p>项目代码演示:</p>\n<ul>\n<li>(1) weiyigeek.top/custom/mlogger/consolelogger.go</li>\n</ul>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> mlogger</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"errors\"</span></span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">  <span class=\"string\">\"path\"</span></span><br><span class=\"line\">  <span class=\"string\">\"runtime\"</span></span><br><span class=\"line\">  <span class=\"string\">\"strings\"</span></span><br><span class=\"line\">  <span class=\"string\">\"time\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 1.自定义日志库等级</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> Loglevel <span class=\"keyword\">uint8</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> (</span><br><span class=\"line\">  UNKNOWN Loglevel = <span class=\"literal\">iota</span></span><br><span class=\"line\">  DEBUG</span><br><span class=\"line\">  TRACE</span><br><span class=\"line\">  INFO</span><br><span class=\"line\">  WARNING</span><br><span class=\"line\">  ERROR</span><br><span class=\"line\">  FATAL</span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 2.解析日志等级方法</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">parseLogLevel</span><span class=\"params\">(s <span class=\"keyword\">string</span>)</span> <span class=\"params\">(Loglevel, error)</span></span> &#123;</span><br><span class=\"line\">  s = strings.ToUpper(s)</span><br><span class=\"line\">  <span class=\"keyword\">switch</span> s &#123;</span><br><span class=\"line\">  <span class=\"keyword\">case</span> <span class=\"string\">\"DEBUG\"</span>:</span><br><span class=\"line\">    <span class=\"keyword\">return</span> DEBUG, <span class=\"literal\">nil</span></span><br><span class=\"line\">  <span class=\"keyword\">case</span> <span class=\"string\">\"TRACE\"</span>:</span><br><span class=\"line\">    <span class=\"keyword\">return</span> TRACE, <span class=\"literal\">nil</span></span><br><span class=\"line\">  <span class=\"keyword\">case</span> <span class=\"string\">\"INFO\"</span>:</span><br><span class=\"line\">    <span class=\"keyword\">return</span> INFO, <span class=\"literal\">nil</span></span><br><span class=\"line\">  <span class=\"keyword\">case</span> <span class=\"string\">\"WARNING\"</span>:</span><br><span class=\"line\">    <span class=\"keyword\">return</span> WARNING, <span class=\"literal\">nil</span></span><br><span class=\"line\">  <span class=\"keyword\">case</span> <span class=\"string\">\"ERROR\"</span>:</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ERROR, <span class=\"literal\">nil</span></span><br><span class=\"line\">  <span class=\"keyword\">case</span> <span class=\"string\">\"FATAL\"</span>:</span><br><span class=\"line\">    <span class=\"keyword\">return</span> FATAL, <span class=\"literal\">nil</span></span><br><span class=\"line\">  <span class=\"keyword\">default</span>:</span><br><span class=\"line\">    <span class=\"comment\">// 主意不能以标点符号来结束错误信息抛出</span></span><br><span class=\"line\">    err := errors.New(<span class=\"string\">\"无效的日志级别-Log Levels Error\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> UNKNOWN, err</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 3.ConsoleLogger结构体</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> ConsoleLogger <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  level Loglevel</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 4.ConsoleLogger结构体构造方法</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">NewConsoleLog</span><span class=\"params\">(level <span class=\"keyword\">string</span>)</span> <span class=\"title\">ConsoleLogger</span></span> &#123;</span><br><span class=\"line\">  logLevel, err := parseLogLevel(level)</span><br><span class=\"line\">  <span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">    fmt.Print(err)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// 返回ConsoleLogger结构体对象</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> ConsoleLogger&#123;</span><br><span class=\"line\">    level: logLevel,</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 5.解析日志等级字符串名称</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">getLevelName</span><span class=\"params\">(lv Loglevel)</span> <span class=\"title\">string</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">switch</span> lv &#123;</span><br><span class=\"line\">  <span class=\"keyword\">case</span> DEBUG:</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">\"DEBUG\"</span></span><br><span class=\"line\">  <span class=\"keyword\">case</span> TRACE:</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">\"TRACE\"</span></span><br><span class=\"line\">  <span class=\"keyword\">case</span> INFO:</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">\"INFO\"</span></span><br><span class=\"line\">  <span class=\"keyword\">case</span> WARNING:</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">\"WARNING\"</span></span><br><span class=\"line\">  <span class=\"keyword\">case</span> ERROR:</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">\"ERROR\"</span></span><br><span class=\"line\">  <span class=\"keyword\">case</span> FATAL:</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">\"FATAL\"</span></span><br><span class=\"line\">  <span class=\"keyword\">default</span>:</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">\"UNKNOWN\"</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 6.获取错误的函数名 文件 以及 行号的方法</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">getFileLine</span><span class=\"params\">(skip <span class=\"keyword\">int</span>)</span> <span class=\"params\">(funcName, fileName <span class=\"keyword\">string</span>, lineNum <span class=\"keyword\">int</span>)</span></span> &#123;</span><br><span class=\"line\">  pc, fileName, lineNum, ok := runtime.Caller(skip)</span><br><span class=\"line\">  <span class=\"keyword\">if</span> !ok &#123;</span><br><span class=\"line\">    fmt.Printf(<span class=\"string\">\"Runtime,Caller() failed\\n\"</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  funcName = runtime.FuncForPC(pc).Name()</span><br><span class=\"line\">  fileName = path.Base(fileName)</span><br><span class=\"line\">  funcName = strings.Split(funcName, <span class=\"string\">\".\"</span>)[<span class=\"number\">1</span>]</span><br><span class=\"line\">  <span class=\"keyword\">return</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 7.日志显示的等级(当前日志级别大传入的日志级别则显示)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(l ConsoleLogger)</span> <span class=\"title\">enable</span><span class=\"params\">(Loglevel Loglevel)</span> <span class=\"title\">bool</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> Loglevel &gt;= l.level</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 8.向终端打印日志的方法</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">printLogs</span><span class=\"params\">(lv, format <span class=\"keyword\">string</span>, custom ...<span class=\"keyword\">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 错误信息拼接</span></span><br><span class=\"line\">  msg := fmt.Sprintf(format, custom...)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 时间&amp;时区</span></span><br><span class=\"line\">  now := time.Now()</span><br><span class=\"line\">  <span class=\"comment\">//timezone, _ := time.LoadLocation(\"Asia/Shanghai\")</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 错误文件以及函数名称</span></span><br><span class=\"line\">  funcName, fileName, linwNum := getFileLine(<span class=\"number\">2</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  fmt.Printf(<span class=\"string\">\"[%s] [%s] [%s:%s:%d] %s \\n\"</span>, now.Format(<span class=\"string\">\"2006-01-02 15:04:05\"</span>), lv, fileName, funcName, linwNum, msg)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 9.各日志等级打印</span></span><br><span class=\"line\"><span class=\"comment\">// Debug</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(l ConsoleLogger)</span> <span class=\"title\">Debug</span><span class=\"params\">(format <span class=\"keyword\">string</span>, custom ...<span class=\"keyword\">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 满足等级则打印日志</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> l.enable(DEBUG) &#123;</span><br><span class=\"line\">    printLogs(<span class=\"string\">\"DEBUG\"</span>, format, custom...)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Trace</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(l ConsoleLogger)</span> <span class=\"title\">Trace</span><span class=\"params\">(format <span class=\"keyword\">string</span>, custom ...<span class=\"keyword\">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 满足等级则打印日志</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> l.enable(TRACE) &#123;</span><br><span class=\"line\">    printLogs(<span class=\"string\">\"TRACE\"</span>, format, custom...)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Info</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(l ConsoleLogger)</span> <span class=\"title\">Info</span><span class=\"params\">(format <span class=\"keyword\">string</span>, custom ...<span class=\"keyword\">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 满足等级则打印日志</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> l.enable(INFO) &#123;</span><br><span class=\"line\">    printLogs(<span class=\"string\">\"INFO\"</span>, format, custom...)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Error</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(l ConsoleLogger)</span> <span class=\"title\">Error</span><span class=\"params\">(format <span class=\"keyword\">string</span>, custom ...<span class=\"keyword\">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 满足等级则打印日志</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> l.enable(ERROR) &#123;</span><br><span class=\"line\">    printLogs(<span class=\"string\">\"ERROR\"</span>, format, custom...)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Warning</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(l ConsoleLogger)</span> <span class=\"title\">Warning</span><span class=\"params\">(format <span class=\"keyword\">string</span>, custom ...<span class=\"keyword\">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 满足等级则打印日志</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> l.enable(WARNING) &#123;</span><br><span class=\"line\">    printLogs(<span class=\"string\">\"WARNING\"</span>, format, custom...)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Falat</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(l ConsoleLogger)</span> <span class=\"title\">Falat</span><span class=\"params\">(format <span class=\"keyword\">string</span>, custom ...<span class=\"keyword\">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 满足等级则打印日志</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> l.enable(FATAL) &#123;</span><br><span class=\"line\">    printLogs(<span class=\"string\">\"FATAL\"</span>, format, custom...)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 方法接口定义</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> Logger <span class=\"keyword\">interface</span> &#123;</span><br><span class=\"line\">  Debug(format <span class=\"keyword\">string</span>, custom ...<span class=\"keyword\">interface</span>&#123;&#125;)</span><br><span class=\"line\">  Trace(format <span class=\"keyword\">string</span>, custom ...<span class=\"keyword\">interface</span>&#123;&#125;)</span><br><span class=\"line\">  Info(format <span class=\"keyword\">string</span>, custom ...<span class=\"keyword\">interface</span>&#123;&#125;)</span><br><span class=\"line\">  Warning(format <span class=\"keyword\">string</span>, custom ...<span class=\"keyword\">interface</span>&#123;&#125;)</span><br><span class=\"line\">  Error(format <span class=\"keyword\">string</span>, custom ...<span class=\"keyword\">interface</span>&#123;&#125;)</span><br><span class=\"line\">  Falat(format <span class=\"keyword\">string</span>, custom ...<span class=\"keyword\">interface</span>&#123;&#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><br/></p>\n<ul>\n<li>(2) weiyigeek.top/custom/mlogger/filelogger.go<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> mlogger</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 主要向文件里写入日志相关信息</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">  <span class=\"string\">\"os\"</span></span><br><span class=\"line\">  <span class=\"string\">\"path\"</span></span><br><span class=\"line\">  <span class=\"string\">\"time\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 1.文件记录日志结构体</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> FileLogger <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  level       Loglevel</span><br><span class=\"line\">  filePath    <span class=\"keyword\">string</span></span><br><span class=\"line\">  fileName    <span class=\"keyword\">string</span></span><br><span class=\"line\">  fileObj     *os.File</span><br><span class=\"line\">  errFileObj  *os.File</span><br><span class=\"line\">  maxFileSize <span class=\"keyword\">int64</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 2.文件日志构造方法</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">NewFileLogger</span><span class=\"params\">(levelStr, fp, fn <span class=\"keyword\">string</span>, maxSize <span class=\"keyword\">int64</span>)</span> *<span class=\"title\">FileLogger</span></span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 解析日志等级</span></span><br><span class=\"line\">  Loglevel, err := parseLogLevel(levelStr)</span><br><span class=\"line\">  <span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">panic</span>(err)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 文件日志结构体对象</span></span><br><span class=\"line\">  fobj := &amp;FileLogger&#123;</span><br><span class=\"line\">    level:       Loglevel,</span><br><span class=\"line\">    filePath:    fp,</span><br><span class=\"line\">    fileName:    fn,</span><br><span class=\"line\">    maxFileSize: maxSize,</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 初始化文件日志文件句柄</span></span><br><span class=\"line\">  initErr := fobj.init()</span><br><span class=\"line\">  <span class=\"keyword\">if</span> initErr != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">panic</span>(initErr)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 返回对象</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> fobj</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 3.文件日志显示的等级控制方法(当前日志级别大传入的日志级别则显示)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(f FileLogger)</span> <span class=\"title\">enable</span><span class=\"params\">(Loglevel Loglevel)</span> <span class=\"title\">bool</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> Loglevel &gt;= f.level</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 4.初始化文件日志文件句柄方法</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(f *FileLogger)</span> <span class=\"title\">init</span><span class=\"params\">()</span> <span class=\"title\">error</span></span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 通用日志名称与错误日志名称路径拼接</span></span><br><span class=\"line\">  fullName := path.Join(f.filePath, f.fileName) + <span class=\"string\">\".logs\"</span></span><br><span class=\"line\">  fullErrName := path.Join(f.filePath, f.fileName) + <span class=\"string\">\".err.logs\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 创建文件句柄并</span></span><br><span class=\"line\">  fileObj, err := os.OpenFile(fullName, os.O_APPEND|os.O_CREATE|os.O_WRONLY, <span class=\"number\">0644</span>)</span><br><span class=\"line\">  <span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">    fmt.Printf(<span class=\"string\">\"Open Logs file failed, err : %v \\n\"</span>, err)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> err</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  errFileObj, err := os.OpenFile(fullErrName, os.O_APPEND|os.O_CREATE|os.O_WRONLY, <span class=\"number\">0644</span>)</span><br><span class=\"line\">  <span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">    fmt.Printf(<span class=\"string\">\"Open Error logs file failed, err : %v \\n\"</span>, err)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> err</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 赋值其对象</span></span><br><span class=\"line\">  f.fileObj = fileObj</span><br><span class=\"line\">  f.errFileObj = errFileObj</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">nil</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 5.验证文件的大小方法</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(f *FileLogger)</span> <span class=\"title\">checkFileSize</span><span class=\"params\">(file *os.File)</span> <span class=\"title\">bool</span></span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 文件信息返回的是结构体</span></span><br><span class=\"line\">  fileInfo, err := file.Stat()</span><br><span class=\"line\">  <span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">    fmt.Printf(<span class=\"string\">\"checkFileSize - Get file info failed, err : %v \\n\"</span>, err)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// 如果当前文件的大小值大于返回True,则进行切割</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> fileInfo.Size() &gt; f.maxFileSize &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 6.进行日志文件的切割方法</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(f *FileLogger)</span> <span class=\"title\">SplitFile</span><span class=\"params\">(file *os.File)</span> <span class=\"params\">(*os.File, error)</span></span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 1) 获取文件句柄信息并关闭当前日志文件</span></span><br><span class=\"line\">  fileInfo, err := file.Stat()</span><br><span class=\"line\">  <span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">    fmt.Printf(<span class=\"string\">\"SplitFile - Get file info failed, err : %v \\n\"</span>, err)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">nil</span>, err</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  nowStr := time.Now().Format(<span class=\"string\">\"2006-01-02_150405\"</span>)</span><br><span class=\"line\">  LogName := path.Join(f.filePath, fileInfo.Name())</span><br><span class=\"line\">  newLogName := fmt.Sprintf(<span class=\"string\">\"%s.bak.%s\"</span>, LogName, nowStr)</span><br><span class=\"line\">  file.Close()</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 2) 备份并重命名日志文件</span></span><br><span class=\"line\">  os.Rename(LogName, newLogName)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 3) 重新打开一个新的日志文件</span></span><br><span class=\"line\">  fileObj, err := os.OpenFile(LogName, os.O_APPEND|os.O_CREATE|os.O_WRONLY, <span class=\"number\">0644</span>)</span><br><span class=\"line\">  <span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">    fmt.Printf(<span class=\"string\">\"Open New Logs file failed, err : %v \\n\"</span>, err)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">nil</span>, err</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 4) 将对象进行返回</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> fileObj, <span class=\"literal\">nil</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 7.将日志分别打印进对应的文件之中</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(f *FileLogger)</span> <span class=\"title\">printLogs</span><span class=\"params\">(level Loglevel, format <span class=\"keyword\">string</span>, custom ...<span class=\"keyword\">interface</span>&#123;&#125;)</span> <span class=\"title\">error</span></span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 1) 判断日志等级是否满足指定等级之上的要求</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> f.enable(level) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 2) 异常信息</span></span><br><span class=\"line\">    msg := fmt.Sprintf(format, custom...)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 3) 时间与时区</span></span><br><span class=\"line\">    now := time.Now()</span><br><span class=\"line\">    <span class=\"comment\">//timezone, _ := time.LoadLocation(\"Asia/Shanghai\")</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 4) 异常文件函数信息</span></span><br><span class=\"line\">    funcName, fileName, linwNum := getFileLine(<span class=\"number\">2</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 5) 通用日志文件切割判断及输入</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> f.checkFileSize(f.fileObj) &#123;</span><br><span class=\"line\">      f.fileObj, _ = f.SplitFile(f.fileObj)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    fmt.Fprintf(f.fileObj, <span class=\"string\">\"[%s] [%s] [%s:%s:%d] %s \\n\"</span>, now.Format(<span class=\"string\">\"2006-01-02 15:04:05\"</span>), getLevelName(level), fileName, funcName, linwNum, msg)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 6) 严重与错误日志文件切割判断及输入</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> level &gt;= ERROR &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> f.checkFileSize(f.errFileObj) &#123;</span><br><span class=\"line\">        f.errFileObj, _ = f.SplitFile(f.errFileObj)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      fmt.Fprintf(f.errFileObj, <span class=\"string\">\"[%s] [%s] [%s:%s:%d] %s \\n\"</span>, now.Format(<span class=\"string\">\"2006-01-02 15:04:05\"</span>), getLevelName(level), fileName, funcName, linwNum, msg)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">nil</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 8.日志等级调用分别方法</span></span><br><span class=\"line\"><span class=\"comment\">// Debug</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(f *FileLogger)</span> <span class=\"title\">Debug</span><span class=\"params\">(format <span class=\"keyword\">string</span>, custom ...<span class=\"keyword\">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class=\"line\">  f.printLogs(DEBUG, format, custom...)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Trace</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(f *FileLogger)</span> <span class=\"title\">Trace</span><span class=\"params\">(format <span class=\"keyword\">string</span>, custom ...<span class=\"keyword\">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class=\"line\">  f.printLogs(TRACE, format, custom...)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Info</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(f *FileLogger)</span> <span class=\"title\">Info</span><span class=\"params\">(format <span class=\"keyword\">string</span>, custom ...<span class=\"keyword\">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class=\"line\">  f.printLogs(INFO, format, custom...)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Error</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(f *FileLogger)</span> <span class=\"title\">Error</span><span class=\"params\">(format <span class=\"keyword\">string</span>, custom ...<span class=\"keyword\">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class=\"line\">  f.printLogs(ERROR, format, custom...)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Warning</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(f *FileLogger)</span> <span class=\"title\">Warning</span><span class=\"params\">(format <span class=\"keyword\">string</span>, custom ...<span class=\"keyword\">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class=\"line\">  f.printLogs(WARNING, format, custom...)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Falat</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(f *FileLogger)</span> <span class=\"title\">Falat</span><span class=\"params\">(format <span class=\"keyword\">string</span>, custom ...<span class=\"keyword\">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class=\"line\">  f.printLogs(FATAL, format, custom...)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(f *FileLogger)</span> <span class=\"title\">Close</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  f.fileObj.Close()</span><br><span class=\"line\">  f.errFileObj.Close()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><br/></p>\n<ul>\n<li>(3) main.go<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**自定义日志库调用演示入口**/</span></span><br><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"time\"</span></span><br><span class=\"line\">  <span class=\"string\">\"weiyigeek.top/custom/mlogger\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 示例1.向终端中进行日志信息的打印</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">demo1</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  log := mlogger.NewConsoleLog(<span class=\"string\">\"Debug\"</span>)</span><br><span class=\"line\">  <span class=\"keyword\">for</span> &#123;</span><br><span class=\"line\">    log.Debug(<span class=\"string\">\"Debug 日志: %s\"</span>, <span class=\"string\">\"Deveploment Debug\"</span>)</span><br><span class=\"line\">    log.Trace(<span class=\"string\">\"Trace 日志: %s\"</span>, <span class=\"string\">\"Deveploment Trace\"</span>)</span><br><span class=\"line\">    log.Info(<span class=\"string\">\"Info 日志: %s,%d\"</span>, <span class=\"string\">\"Production Info\"</span>, <span class=\"number\">1024</span>)</span><br><span class=\"line\">    log.Warning(<span class=\"string\">\"Warning 日志: %s\"</span>, <span class=\"string\">\"Production Warning\"</span>)</span><br><span class=\"line\">    log.Error(<span class=\"string\">\"Error 日志: %s\"</span>, <span class=\"string\">\"Production Error\"</span>)</span><br><span class=\"line\">    log.Falat(<span class=\"string\">\"Falat 日志: %s\"</span>, <span class=\"string\">\"Production Falat\"</span>)</span><br><span class=\"line\">    time.Sleep(time.Second * <span class=\"number\">1</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 示例2.将日志信息输入到文件之中</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">demo2</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  log := mlogger.NewFileLogger(<span class=\"string\">\"INFO\"</span>, <span class=\"string\">\"./\"</span>, <span class=\"string\">\"weiyigeek\"</span>, <span class=\"number\">5</span>*<span class=\"number\">1024</span>)</span><br><span class=\"line\">  <span class=\"keyword\">for</span> &#123;</span><br><span class=\"line\">    log.Debug(<span class=\"string\">\"Debug 日志: %s\"</span>, <span class=\"string\">\"FileLogger - 开发环境日志基级别 Debug\"</span>)</span><br><span class=\"line\">    log.Trace(<span class=\"string\">\"Trace 日志: %s\"</span>, <span class=\"string\">\"FileLogger - 开发环境日志基级别 Trace\"</span>)</span><br><span class=\"line\">    log.Info(<span class=\"string\">\"Info 日志: %s,%d\"</span>, <span class=\"string\">\"FileLogger - 生产环境日志基级别 Info\"</span>, <span class=\"number\">1024</span>)</span><br><span class=\"line\">    log.Warning(<span class=\"string\">\"Warning 日志: %s\"</span>, <span class=\"string\">\"FileLogger - 生产环境日志基级别 Warning\"</span>)</span><br><span class=\"line\">    log.Error(<span class=\"string\">\"Error 日志: %s\"</span>, <span class=\"string\">\"FileLogger - 生产环境日志基级别 Error\"</span>)</span><br><span class=\"line\">    log.Falat(<span class=\"string\">\"Falat 日志: %s\"</span>, <span class=\"string\">\"FileLogger - 生产环境日志基级别 Falat\"</span>)</span><br><span class=\"line\">    time.Sleep(time.Second * <span class=\"number\">1</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  demo1()</span><br><span class=\"line\">  demo2()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>运行结果:<br><figure class=\"image-box\">\n                <img src=\"https://img.weiyigeek.top/2021/5/20211021101428.png\" alt=\"WeiyiGeek.Logger两种实现方式\" title=\"\" class=\"\">\n                <p>WeiyiGeek.Logger两种实现方式</p>\n            </figure></p>\n","comments":true,"excerpt":"[TOC]","categories":[{"name":"Development","path":"api/categories/Development.json"},{"name":"Programming","path":"api/categories/Programming.json"}],"tags":[{"name":"Go","path":"api/tags/Go.json"}]}