{"title":"PentestBox入门到进阶使用","slug":"网安大类/SecurityTools/PentestBox入门到进阶使用","date":"2019-08-03T05:34:30.000Z","updated":"2022-03-29T05:39:05.027Z","url":"2019/8-3-409.html","path":"api/articles/2019/8-3-409.html.json","covers":["https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190803125308.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190803125451.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190803125957.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190803130300.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/2019080402025030634.bmp","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/2019080402024732416.jpg","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/2019080402024820243.jpg","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/2019080402024824785.jpg","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/2019080402024923788.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/201908040202475096.jpg","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/2019080402024931251.jpg","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/201908040202513711.jpg","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/201908040202504092.jpg","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/201908040202503341.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/2019080402024821434.jpg","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/2019080402025111755.jpg","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/2019080402024812358.jpg","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/201908040202504667.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/2019080402025123975.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/201908040202497122.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/2019080402024810713.jpg","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/2019080402025217234.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/2019080402024822024.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/2019080402024713775.jpg","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/201908040202505023.png"],"content":"<p>[TOC]</p>\n<a id=\"more\"></a>\n<h4 id=\"0x00-前言介绍\"><a href=\"#0x00-前言介绍\" class=\"headerlink\" title=\"0x00 前言介绍\"></a>0x00 前言介绍</h4><p>PentestBox：渗透测试盒子 顾名思义，这是一个渗透工具包，但是不同于绝大多数国内xx工具包的是，这里集成的大都是Linux下的工具,Kali Linux上面的常用的很多工具这里面也都集成了。<br>官方的介绍如下：PentestBox是一款Windows平台下预配置的便携式开源渗透测试环境</p>\n<p><em>为什么又有一个渗透测试环境？</em><br>PentestBox不同于运行在虚拟机或者双启动环境的Linux渗透测试发行版。<br>它打包了所有的安全工具，并且可以在Windows系统中原生地运行，有效地降低了对虚拟机或者双启动环境的需求。我们发现超过50%的渗透测试发行版是运行在Windows系统下的虚拟机程序这激发我们创造了它。</p>\n<p><em>参考来源：</em></p>\n<ul>\n<li>PentestBox官网：<a href=\"https://pentestbox.org/zh/\" target=\"_blank\" rel=\"noopener\">https://pentestbox.org/zh/</a></li>\n</ul>\n<hr>\n\n<h4 id=\"0x01-下载安装\"><a href=\"#0x01-下载安装\" class=\"headerlink\" title=\"0x01 下载安装\"></a>0x01 下载安装</h4><p>官网上自带的下载速度还是蛮快的，这里我下载的是附带 metasploit版本的PentestBox<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PentestBox： https://sourceforge.net/projects/pentestbox/files/PentestBox-v2.2.exe/download</span><br><span class=\"line\"><span class=\"comment\">#种子：https://pentestbox.org/PentestBox-v2.2.torrent</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#安装有 Metasploit 的 PentestBox：</span></span><br><span class=\"line\">https://sourceforge.net/projects/pentestbox/files/PentestBox-with-Metasploit-v2.2.exe/download</span><br><span class=\"line\"><span class=\"comment\">#种子：https://pentestbox.org/PentestBox-with-Metasploit-v2.2.torrent</span></span><br></pre></td></tr></table></figure></p>\n<p>个人提示：建议在虚拟机里面进行安装测试后面可以直接从网络共享过来即可，当然您也可以将它安装到U盘上;<br>官网提示：按照带有metasploit 的版本的时候得关闭windows自带的防火墙,因为metasploit生成的攻击载荷 对于windows的安全来说是个威胁。</p>\n<p>防火墙的关闭:</p>\n<ul>\n<li>Windows7直接在控制面板里面关闭防火墙即可</li>\n<li>Windows 10的话，除了关闭上述的防火墙还得关闭 Windows Defender (设置-更新和安全-Windows Defender 中关闭)</li>\n</ul>\n<p>安装非常简单：直接运行 文件 选择安装的文件位置路径，即可安装，安装其实就是文件的释放，最后整个文件夹大小为4.55GB左右(2018年7月3日12:52:40);<br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190803125308.png\" alt=\"WeiyiGeek.PentestBox\" title=\"\" class=\"\">\n                <p>WeiyiGeek.PentestBox</p>\n            </figure></p>\n<p>_补充_：</p>\n<ul>\n<li>采用安装在U盘或者文件网络共享都能直接运行pentestBox;</li>\n<li>文件网络共享：共享该文件夹作为一个驱动器上的其他计算机在同一个网络；更改读取权限读/写，并单击共享。现在在局域网的其他电脑上的的 资源管理器 中的 网络 可以看到共享的文件夹</li>\n</ul>\n<hr>\n\n<h4 id=\"0x02-工具文件结构\"><a href=\"#0x02-工具文件结构\" class=\"headerlink\" title=\"0x02 工具文件结构\"></a>0x02 工具文件结构</h4><p>描述：从上面我们可以看到是PentestBox共5个文件夹,2个库文件，一个bat批处理和一个exe启动程序(bat和exe都可以启动PentestBox)。<br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190803125451.png\" alt=\"WeiyiGeek.文件结构\" title=\"\" class=\"\">\n                <p>WeiyiGeek.文件结构</p>\n            </figure></p>\n<h5 id=\"工具快捷键\"><a href=\"#工具快捷键\" class=\"headerlink\" title=\"工具快捷键\"></a>工具快捷键</h5><ul>\n<li>CTRL + T ：要打开新的标签页</li>\n<li>CTRL + C ：要关闭脚本/程序运行。</li>\n<li>CTRL + w ：这将关闭当前活动的控制台。</li>\n<li>ALT + Enter ：Pentestbox 会去全屏。</li>\n<li>SHIFT + ALT + number : 则打开 cmd 和 poweshell 新的窗口,可以自己设置; </li>\n</ul>\n<p><br></p>\n<h5 id=\"工具集结构\"><a href=\"#工具集结构\" class=\"headerlink\" title=\"工具集结构\"></a>工具集结构</h5><p>描述：PentextBox 工具集<a href=\"https://cloud.tencent.com/developer/article/1078945\" target=\"_blank\" rel=\"noopener\">+可参考</a></p>\n<p>PentextBox工具一览表:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#信息收集：</span></span><br><span class=\"line\">dnsrecon （DNS）</span><br><span class=\"line\">sublist3r</span><br><span class=\"line\">subbrute</span><br><span class=\"line\">automater （URL /域名,IP地址和Md5 <span class=\"built_in\">hash</span> OSINT工具旨在使分析过程更容易入侵分析师）</span><br><span class=\"line\">urlcrazy （RL劫持,钓鱼,和企业间谍活动）</span><br><span class=\"line\">theharvester</span><br><span class=\"line\">Responder （是一个LLMNR NBT-NS和mdn投毒者）- 探测内网获取域控权限总结</span><br><span class=\"line\">crackmapexec （其中的瑞士军刀Windows /活动目录环境。多亏了托马斯。编译的版本。）</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#Web漏洞扫描器：</span></span><br><span class=\"line\">msfconsole</span><br><span class=\"line\">Burp Suite </span><br><span class=\"line\">sqlmap</span><br><span class=\"line\">Nmap</span><br><span class=\"line\">ncat\t</span><br><span class=\"line\">ndiff</span><br><span class=\"line\">nping</span><br><span class=\"line\">Wireshark</span><br><span class=\"line\">SnmpWalk （允许你检测一组变量可用于某一设备上阅读。）</span><br><span class=\"line\">ipscan （C段扫描）</span><br><span class=\"line\">dirbuster（目录爆破）</span><br><span class=\"line\">Commix（系统命令注入漏洞自动化测试工具）</span><br><span class=\"line\">Vega （扫描仪和测试平台） -- 实用</span><br><span class=\"line\">jSQL（SQL注入）-- 可以学习SQL - 实用</span><br><span class=\"line\">testsslserver （PentestBox SSL / TLS服务器(名称和端口给出参数)）</span><br><span class=\"line\">sslscan （SSL扫描）</span><br><span class=\"line\"></span><br><span class=\"line\">Nikto（web服务器(GPL)扫描仪对web服务器执行全面测试多个项目）</span><br><span class=\"line\">dotdotpwn（目录遍历模糊器）</span><br><span class=\"line\">fimap（webapps本地和远程文件包含漏洞）</span><br><span class=\"line\">Golismero（安全性测试的是一个开源框架）</span><br><span class=\"line\">PadBuster 自动化脚本执行Padding Oracle的攻击</span><br><span class=\"line\">wpscan （kail）</span><br><span class=\"line\">joomscan（kail）</span><br><span class=\"line\">cmsmap （python开源CMS扫描）,自动检测安全漏洞的过程中最受欢迎的CMS</span><br><span class=\"line\">VBScan （基于perl编程语言是）一个开源项目的检测链入页面CMS漏洞和分析。</span><br><span class=\"line\">joomscan（kail）Joomla它可能是最广泛使用的CMS，由于其灵活性，用户友好性，可扩展性命名一些；</span><br><span class=\"line\">Instarecon （自动化的基本数字侦察）伟大的目标获得最初的足迹,发现额外的子域。InstaRecon会做的事:DNS(直接、PTR MX,NS)查找域名查询服务(域和IP)查找谷歌在搜索的</span><br><span class=\"line\"></span><br><span class=\"line\">SpiderFoot（信息收集-不行）</span><br><span class=\"line\">sslstrip（不行）</span><br><span class=\"line\">sslyze（不行）</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#开发工具(框架)：</span></span><br><span class=\"line\">Metasploit Framework</span><br><span class=\"line\">beefproject （beef是浏览器开发框架。这是一个渗透测试工具,它关注的是web浏览器。）</span><br></pre></td></tr></table></figure></p>\n<hr>\n\n<h4 id=\"0x03-基本操作\"><a href=\"#0x03-基本操作\" class=\"headerlink\" title=\"0x03 基本操作\"></a>0x03 基本操作</h4><h5 id=\"安装升级卸载\"><a href=\"#安装升级卸载\" class=\"headerlink\" title=\"安装升级卸载\"></a>安装升级卸载</h5><p>描述：在PentextBox中软件安装 安装/升级/卸载 软件：<code>toolsmanager</code> 它会从github上进行检测是否存在更新;</p>\n<ul>\n<li>首先，它会从GitHub的信息库自动更新，然后会显示菜单。如果没有互联网连接，脚本会等待一段时间，然后显示菜单。</li>\n<li>其次，可以通过选择编号进入相关的模块进行<code>安装、升级、卸载</code><ul>\n<li>安装：例如如果我选择了Web应用程序类别然后按10;</li>\n<li>更新：如果要更新的话这里直接输入编号 11将会升级所有安装的模块;</li>\n<li>卸载：在toolsmanager 的软件目录里面 我们现在想卸载已经安装过的软件的话，直接键入uninstall + 软件名比如uninstall xssless</li>\n</ul>\n</li>\n<li>现在，如果你想安装imagejs然后键入install imagejs它会安装它。安装后重启 PentestBox，你所安装的工具会生效。</li>\n</ul>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190803125957.png\" alt=\"WeiyiGeek.软件升级\" title=\"\" class=\"\">\n                <p>WeiyiGeek.软件升级</p>\n            </figure>\n<p>由于PentestBox是一个开源项目，让在PentestBox使用的所有文件都存在于它的Github上库。终端下输入：<code>update</code>从它的Github上库，如果有任何更改，然后显示菜单将先进行自我更新。如果没有互联网连接，脚本会等待一段时间，然后显示菜单。<br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20190803130300.png\" alt=\"WeiyiGeek.update\" title=\"\" class=\"\">\n                <p>WeiyiGeek.update</p>\n            </figure></p>\n<p><br></p>\n<h5 id=\"渗透利器详解\"><a href=\"#渗透利器详解\" class=\"headerlink\" title=\"渗透利器详解\"></a>渗透利器详解</h5><p>功能界面设置介绍：<br><a href=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/file/2019/PentestBox%E7%AE%80%E6%98%8E%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B.pdf\" target=\"_blank\" rel=\"noopener\">+PDF功能界面介绍</a></p>\n<p><em>参考网站：</em></p>\n<ul>\n<li>模块参考：modules.pentestbox.com</li>\n</ul>\n<hr>\n\n<h4 id=\"0x04-自定义工具\"><a href=\"#0x04-自定义工具\" class=\"headerlink\" title=\"0x04 自定义工具\"></a>0x04 自定义工具</h4><p>描述：很多情况下自己的工具 toolsmanager或默认PentestBox未安装，可以按照下面的指南来手动添加自己的工具</p>\n<ul>\n<li>1.下载/克隆工具文件，2.设置别名 别名是基本上是需要PentestBox控制台通过；</li>\n</ul>\n<p>Step1.首先复制文件到 C:/PentestBox/bin/customtools/下添加一个别名,需要编辑customaliases文件 位于/PentestBox/bin/customtools/文件夹下。<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hello=python <span class=\"string\">\"%pentestbox_ROOT%\\bin\\customtools\\Hello.py\"</span> $*  /**python*/</span><br><span class=\"line\">tool=<span class=\"string\">\"%pentestbox_ROOT%\\bin\\customtools\\tool.exe\"</span> $*   /**exe*/</span><br><span class=\"line\">tool=start javaw -jar <span class=\"string\">\"%pentestbox_ROOT%\\bin\\customtools\\tool.jar\"</span> $*  /**Java */</span><br><span class=\"line\">wpscan=ruby <span class=\"string\">\"%pentestbox_ROOT%\\bin\\customtools\\wpscan\\wpscan.rb\"</span> $*   /**Ruby */</span><br></pre></td></tr></table></figure><br>在PentestBox 中添加自己的Java 和 Ruby工具，方法的原理是一样的，只是在编辑 customaliases文件的时候，语法格式有点区别工具格式参考上面的格式。</p>\n<hr>\n\n<h4 id=\"0x05-入坑解决\"><a href=\"#0x05-入坑解决\" class=\"headerlink\" title=\"0x05 入坑解决\"></a>0x05 入坑解决</h4><p><em>问题1：MSF(metasploit)无法在PenTeseBox中启用</em><br>注意：安装好后，一定不要 updata all ， 发如果运行了这个命令，因为盒子本身有的工具和环境是老版本的，update all 命令会导致环境错误而工具无法使用！<br>否则会导致msf打不开，非要升级采用独立升级；<br>问题：<br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/2019080402025030634.bmp\" alt=\"Weiyigeek\" title=\"\" class=\"\">\n                <p>Weiyigeek</p>\n            </figure></p>\n<p>解决方法：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim +72 C:&#x2F;PentestBox&#x2F;bin&#x2F;metasploit-framework&#x2F;lib&#x2F;msf&#x2F;core&#x2F;payload&#x2F;dalvik.rb; &#x2F;**将时间改小一点*&#x2F;</span><br></pre></td></tr></table></figure></p>\n<p>保存启动 msfconsole<br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/2019080402024732416.jpg\" alt=\"Weiyigeek\" title=\"\" class=\"\">\n                <p>Weiyigeek</p>\n            </figure></p>\n<p><br></p>\n<p><em>问题2：Python 依赖无法下载问题</em></p>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/2019080402024820243.jpg\" alt=\"Weiyigeek\" title=\"\" class=\"\">\n                <p>Weiyigeek</p>\n            </figure>\n<p>解决方法：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python –m pip install --upgrade pip</span><br><span class=\"line\">python –m pip install BeautifulSoup4</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<p><em>问题3： MSF 与 RUBY更新问题 |http以及https源的问题完成实例：</em></p>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/2019080402024824785.jpg\" alt=\"Weiyigeek\" title=\"\" class=\"\">\n                <p>Weiyigeek</p>\n            </figure>\n<p>需要下载的文件:</p>\n<ul>\n<li>ruby(2.3.3)[32位]：<a href=\"https://dl.bintray.com/oneclick/rubyinstaller/ruby-2.3.3-i386-mingw32.7z\" target=\"_blank\" rel=\"noopener\">https://dl.bintray.com/oneclick/rubyinstaller/ruby-2.3.3-i386-mingw32.7z</a></li>\n<li>msf：git clone <a href=\"https://github.com/rapid7/metasploit-framework.git\" target=\"_blank\" rel=\"noopener\">https://github.com/rapid7/metasploit-framework.git</a></li>\n<li>ruby_devkit：<a href=\"http://dl.bintray.com/oneclick/rubyinstaller/DevKit-mingw64-32-4.7.2-20130224-1151-sfx.exe\" target=\"_blank\" rel=\"noopener\">http://dl.bintray.com/oneclick/rubyinstaller/DevKit-mingw64-32-4.7.2-20130224-1151-sfx.exe</a></li>\n<li>WpdPack：<a href=\"http://www.winpcap.org/install/bin/WpdPack_4_1_2.zip\" target=\"_blank\" rel=\"noopener\">http://www.winpcap.org/install/bin/WpdPack_4_1_2.zip</a> </li>\n</ul>\n<p>分别解压在：<br>（1）替换ruby，删除原C:\\PentestBox\\base\\ruby  内的文件 替换文件<br>（2）ruby_devkit 删除原文件   打开DevKit-mingw64-32-4.7.2-20130224-1151-sfx.exe 并解压到C:\\PentestBox\\base\\ruby_devkit<br>（3）替换下载最新版本的msf</p>\n<p>路径设置：<br>ruby:%Pentestbox%\\base\\ruby<br>ruby_devkit:%Pentestbox%\\base\\ruby_devkit<br>msf:%Pentestbox%\\bin\\metasploit-framework</p>\n<p>查看ruby是不是按照成功<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ruby -v</span><br><span class=\"line\">ruby 2.2.6p396 (2016-11-15 revision 56800) [i386-mingw32]</span><br></pre></td></tr></table></figure></p>\n<p>进行下一步-&gt;解决法子：我们就需要将原本https的证书更替掉<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">gem update --system              <span class=\"comment\">##gem更新系统,不行就下面</span></span><br><span class=\"line\"><span class=\"comment\">#更新源 自己按情况来</span></span><br><span class=\"line\">gem sources --add http://rubygems.org/--remove https://rubygems.org/ </span><br><span class=\"line\">gem sources --add https://gems.ruby-china.org/ --remove https://rubygems.org/</span><br><span class=\"line\">gem sources --add http://gems.ruby-china.org/ --remove https://rubygems.org/ </span><br><span class=\"line\"></span><br><span class=\"line\">gem sources -l                   --<span class=\"comment\">##查看源</span></span><br><span class=\"line\">gem sources –u                   --<span class=\"comment\">##更新源的缓存 </span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#再进行更新：</span></span><br><span class=\"line\">update all                               <span class=\"comment\">##更新全部应用</span></span><br><span class=\"line\">gem install bundler</span><br><span class=\"line\">gem install bundle </span><br><span class=\"line\">gem update bundler               ---<span class=\"comment\">##更新bundler</span></span><br></pre></td></tr></table></figure></p>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/2019080402024923788.png\" alt=\"Weiyigeek\" title=\"\" class=\"\">\n                <p>Weiyigeek</p>\n            </figure>\n<p>切入到msfconsole及metasploit-framwork的中,在metasploit下执行：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bundle update</span><br><span class=\"line\">bundle install</span><br></pre></td></tr></table></figure><br>应该会出现下面的错误<br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/201908040202475096.jpg\" alt=\"Weiyigeek\" title=\"\" class=\"\">\n                <p>Weiyigeek</p>\n            </figure></p>\n<p>下一步-&gt; 接着修改%Pentestbox%\\base\\ruby\\lib\\ruby\\gems\\2.3.0\\gems\\pcaprub-0.12.4\\ext\\pcaprub_c下的extconf.rb文件，在pcap_libdir 和have_library之间添加两行代码：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$CFLAGS</span> = <span class=\"string\">\"-I#&#123;pcap_includedir&#125;\"</span></span><br><span class=\"line\"><span class=\"variable\">$LDFLAGS</span> = <span class=\"string\">\"-L#&#123;pcap_libdir&#125;\"</span></span><br></pre></td></tr></table></figure><br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/2019080402024931251.jpg\" alt=\"Weiyigeek\" title=\"\" class=\"\">\n                <p>Weiyigeek</p>\n            </figure></p>\n<p>然后直接安装pcaprub 0.12.4 ：<code>gem install pcaprub -v &#39;0.12.4&#39; --source &#39;https://rubygems.org/&#39;</code><br>安装完成后使用，有可能要下载其他依赖这时执行 bundle insatall 即可</p>\n<p>下一步-&gt;由于WpdPack默认在C盘，但是作为渗透测试盒子，怎么可以不方便。<br>这里的WpdPack路径可以修改。复制之前解压到C盘的WpdPack文件夹到PentestBox目录。<br>C:\\PentestBox\\base\\ruby\\lib\\ruby\\gems\\2.3.0\\gems\\pcaprub-0.12.4\\ext\\pcaprub_c\\extconf.rb<br><img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/201908040202513711.jpg\" alt=\"Weiyigeek\"></p>\n<p>完成后执行：<br>bundle install<br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/201908040202504092.jpg\" alt=\"Weiyigeek\" title=\"\" class=\"\">\n                <p>Weiyigeek</p>\n            </figure></p>\n<p><br></p>\n<p><em>问题3：MSF(metasploit)无法连接PostGreSql数据库？</em></p>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/201908040202503341.png\" alt=\"Weiyigeek\" title=\"\" class=\"\">\n                <p>Weiyigeek</p>\n            </figure>\n<p>在PentestBox的bin\\customtools\\customaliases进行修改 （F代表：pentest box整个路径）</p>\n<p>其中 msfupdate = cd / d“％pentestbox_ROOT％ （d代表：pentestbox文件路径）<br>msfupdate = cd /d “%pentestbox_ROOT%\\bin\\metasploit-framework\\”$ T ruby” %pentestbox_ROOT%\\bin\\metasploit-framework\\msfupdate”$ *<br>下载PostgrepSQL:：<a href=\"http://www.enterprisedb.com/products-services-training/pgdownload\" target=\"_blank\" rel=\"noopener\">http://www.enterprisedb.com/products-services-training/pgdownload</a></p>\n<p>安装<br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/2019080402024821434.jpg\" alt=\"Weiyigeek\" title=\"\" class=\"\">\n                <p>Weiyigeek</p>\n            </figure></p>\n<p>即可：<br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/2019080402025111755.jpg\" alt=\"Weiyigeek\" title=\"\" class=\"\">\n                <p>Weiyigeek</p>\n            </figure></p>\n<p>创建一个msf数据库切且postgres的用户；</p>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/2019080402024812358.jpg\" alt=\"Weiyigeek\" title=\"\" class=\"\">\n                <p>Weiyigeek</p>\n            </figure>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/201908040202504667.png\" alt=\"Weiyigeek\" title=\"\" class=\"\">\n                <p>Weiyigeek</p>\n            </figure>\n<p>修改bin\\metasploit-framework\\config 的database.yml?文件，更改以下代码并保存：</p>\n<ul>\n<li>database: msf //新建的数据库名称</li>\n<li>username: postgres //数据库用户</li>\n<li>password: passwod //数据库用户的密码</li>\n</ul>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/2019080402025123975.png\" alt=\"Weiyigeek\" title=\"\" class=\"\">\n                <p>Weiyigeek</p>\n            </figure>\n<p>使用以下代码链接数据库：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">db_connect postgres:密码@localhost/数据库名称</span><br><span class=\"line\">db_status</span><br></pre></td></tr></table></figure><br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/201908040202497122.png\" alt=\"Weiyigeek\" title=\"\" class=\"\">\n                <p>Weiyigeek</p>\n            </figure></p>\n<p><br></p>\n<p><em>问题5：ettercap无法运行，缺少packet.dll.wpcap.dll ?</em><br><a href=\"http://www.33lc.com/soft/32448.html\" target=\"_blank\" rel=\"noopener\">http://www.33lc.com/soft/32448.html</a><br><a href=\"http://www.3987.com/xiazai/1/18/43559.html#down\" target=\"_blank\" rel=\"noopener\">http://www.3987.com/xiazai/1/18/43559.html#down</a><br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/2019080402024810713.jpg\" alt=\"Weiyigeek\" title=\"\" class=\"\">\n                <p>Weiyigeek</p>\n            </figure></p>\n<ol>\n<li>退出正在运行的所有程序，并将xapofx1_5.dll文件复制到系统目录下<br>Windows 95/98/Me系统，则复制到C:\\WINdows\\system32\\ 目录下。<br>Windows NT/2000系统，则复制到C:\\WINNT\\system32\\ 目录下。<br>Windows XP系统，则复制到C:\\WINdows\\system32\\ 目录下。<br>Windows 7/8系统，则复制到C:\\WINdows\\system32\\目录下。</li>\n<li>单击开始，然后单击运行。</li>\n<li>输入 regsvr32 xapofx1_5.dll，然后单击确定。wpcap.dll</li>\n<li>当收到“DllRegisterServer in Rld.dll succeeded”即成功修复。</li>\n</ol>\n<p><em>问题6：输入’beef‘命令，为什么会提示以下命令提示？</em><br>解答疑惑： 因为你没去看官方文档，默认启动命令根本不是所谓的’beef‘，而是‘beefproject’，<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;lamb&#125; beefproject</span><br><span class=\"line\">C:\\PentestBox\\bin\\beef &#123;git&#125;</span><br><span class=\"line\">&#123;lamb&#125; Could not find addressable-2.4.0 <span class=\"keyword\">in</span> any of the sources</span><br></pre></td></tr></table></figure></p>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/2019080402025217234.png\" alt=\"Weiyigeek\" title=\"\" class=\"\">\n                <p>Weiyigeek</p>\n            </figure>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/2019080402024822024.png\" alt=\"Weiyigeek\" title=\"\" class=\"\">\n                <p>Weiyigeek</p>\n            </figure>\n<p><br><br><em>问题7：PentestBox 面封装的atom 编辑器是无法输入汉语的，而且插件也会出现一些问题，比如minimap等得重新配置？</em><br>因为是国外开源项目的原因，有些配置不符合我们国内的本土风情，举个例子：<br>解决方法：将自己原来的atom安装的文里件夹替换PentestBox里面的atom即可</p>\n<blockquote>\n<p>C:\\Users\\CTF\\AppData\\Local\\atom\\app-1.12.6 (‘CTF’是我自己电脑的用户名)</p>\n</blockquote>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/2019080402024713775.jpg\" alt=\"Weiyigeek\" title=\"\" class=\"\">\n                <p>Weiyigeek</p>\n            </figure>\n<p><em>问题8： PentestBox封装Burpsuite的是Free版本的，功能上自然比不上 国内的专业破解版的Burpsuite</em><br>解决方法:把专业版破解版的burpsuite替换进去，并重命名即可。<br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/201908040202505023.png\" alt=\"Weiyigeek\" title=\"\" class=\"\">\n                <p>Weiyigeek</p>\n            </figure></p>\n","comments":true,"excerpt":"[TOC]","categories":[{"name":"安全测试工具","path":"api/categories/安全测试工具.json"}],"tags":[{"name":"PentestBox","path":"api/tags/PentestBox.json"}]}