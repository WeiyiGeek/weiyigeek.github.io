<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="content-language" content="zh-CN"/>
    <meta name="author" content="WeiyiGeek" />
    <meta name="msvalidate.01" content="5C552FB1D885E0E11D2957EC958C8018" />
    <meta name="shenma-site-verification" content="4c655e91c76be0a93c1b6954c666c9d6_1649049085"/>
    <meta name="bytedance-verification-code" content="lKs4FqwCHSJ3A/c5tT7X" />
    <meta name="sogou_site_verification" content="OC65iET6Bk" />
    
    <title>ğŸŒ 8.Nginxå®è·µä¹‹è¯·æ±‚å›¾ç‰‡è½¬æ¢ä¸ºGoogleæ¨å‡ºçš„webpæ ¼å¼è½¬æ¢å·¥å…·å®è·µ|WeiyiGeek Blog|å”¯ä¸€æå®¢Geek-ITç½‘ç»œå®‰å…¨è¿ç»´å¼€å‘æŠ€æœ¯çŸ¥è¯†åˆ†äº«-åšå®¢ç«™ç‚¹</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    
    <meta name="keywords" content="Nginx,webp">
    <meta name="Description" content="WeiyiGeek-å”¯ä¸€æå®¢åšå®¢ç«™ç‚¹,å…³æ³¨äºç½‘ç»œå®‰å…¨è¿ç»´,Webå®‰å…¨å¼€å‘,IOTç‰©è”ç½‘å®‰å…¨å¼€å‘,åº”ç”¨å¼€å‘,åˆ†äº«æŠ€æœ¯å­¦ä¹ çŸ¥è¯†ä¸å…¥å‘è§£å†³,æå‡ç½‘ç»œå®‰å…¨æŠ€æœ¯ä¸è‡ªèº«æŠ€æœ¯èƒ½åŠ›,ç«‹å¿—ç»´æŠ¤å¤§ä¼—ç½‘ç»œå®‰å…¨ä¸ºå·±ä»»,åšä¸€ä¸ªå¯¹å›½å®¶æœ‰ç”¨çš„äºº,ä¸ºå®ç°ä¸­åæ°‘æ—ä¼Ÿå¤§å¤å…´çš„ä¸­å›½æ¢¦ä¸æ‡ˆå¥‹æ–—">
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="/css/jquery/3.5.2-jquery.fancybox.min.css?v=1.6.6" />
    <link rel="stylesheet" href="/css/style.css?v=1.6.6">
    <!--  -->
     <script type="text/javascript" src="/js/custom/articlecost.js?v=1.6.6"></script> 
    <link rel="stylesheet" href="/css/third-party/gitalk.css?v=1.6.6"> 
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9134434519967436" crossorigin="anonymous"></script>    
    <script type="text/javascript">
        // Data Center
        var DC = {
          reward:	true,
          lv: JSON.parse('{"enable":false,"app_id":null,"app_key":null,"icon":true}'),
          v: JSON.parse('{"enable":false,"appid":null,"appkey":null,"notify":true,"verify":true,"placeholder":"give me some sugers plz...","avatar":"wavatar"}')
        };
    </script>
    <script type="text/javascript">window.lazyScripts=[];</script>
<meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="WeiyiGeek Blog" type="application/atom+xml">
</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="">
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap">
      
      <img src="/img/brand.jpg" class="brand-bg" alt="WeiyiGeek-backgroud">
      
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg" alt="WeiyiGeek-å¤´åƒ">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">WeiyiGeek</h5>
          <a href="mailto:master@weiyigeek.top" title="master@weiyigeek.top" class="mail">
            <span>m</span><span>a</span><span>s</span><span>t</span><span>e</span><span>r</span><span>@</span><span>w</span><span>e</span><span>i</span><span>y</span><span>i</span><span>g</span><span>e</span><span>e</span><span>k</span><span>.</span><span>t</span><span>o</span><span>p</span>
          </a>
        </hgroup>
        
        <ul class="menu-link">
          
              <li>
                <a href="https://weiyigeek.top/img/wechat-search.png" target="_blank">
                  <i class="icon icon-lg icon-wechat"></i>
                </a>
              </li>
            
              <li>
                <a href="https://github.com/weiyigeek" target="_blank">
                  <i class="icon icon-lg icon-github"></i>
                </a>
              </li>
            
              <li>
                <a href="https://t.me/WeiyiGeek" target="_blank">
                  <i class="icon icon-lg icon-telegram"></i>
                </a>
              </li>
            
              <li>
                <a href="https://twitter.com/WeiyiGeek" target="_blank">
                  <i class="icon icon-lg icon-twitter"></i>
                </a>
              </li>
            
              <li>
                <a href="https://weibo.com/615643678" target="_blank">
                  <i class="icon icon-lg icon-weibo"></i>
                </a>
              </li>
            
        </ul>
        
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                é¦–é¡µ
              </a>
            </li>
        
            <li class="">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                æ–‡ç« åˆ†ç±»
              </a>
            </li>
        
            <li class="">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                æ–‡ç« æ ‡ç­¾
              </a>
            </li>
        
            <li class="">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                æ–‡ç« å½’æ¡£
              </a>
            </li>
        
            <li class="">
              <a href="/2018/1-1-1.html"  >
                <i class="icon icon-lg icon-mortar-board"></i>
                å­¦ä¹ ä¹‹è·¯
              </a>
            </li>
        
            <li class="">
              <a href="/books"  >
                <i class="icon icon-lg icon-book"></i>
                å­¦ä¹ ä¹¦ç±
              </a>
            </li>
        
            <li class="">
              <a href="/about"  >
                <i class="icon icon-lg icon-user"></i>
                å…³äºä½œè€…
              </a>
            </li>
        
            <li class="">
              <a href="/sites"  >
                <i class="icon icon-lg icon-globe"></i>
                ç«™ç‚¹å¯¼èˆª
              </a>
            </li>
        
            <li class="">
              <a href="/img/share-wechat.jpg" target="_blank" >
                <i class="icon icon-lg icon-wechat"></i>
                å…¬ä¼—è´¦å·
              </a>
            </li>
        
            <li class="">
              <a href="https://space.bilibili.com/385802642" target="_blank" >
                <i class="icon icon-lg icon-youtube-play"></i>
                å“”å“©å“”å“©
              </a>
            </li>
        
            <li class="">
              <a href="/img/video-account.jpg" target="_blank" >
                <i class="icon icon-lg icon-video-camera"></i>
                è§†é¢‘å·
              </a>
            </li>
        
            <li class="">
              <a href="/links"  >
                <i class="icon icon-lg icon-link"></i>
                å‹æƒ…é“¾æ¥
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row clearfix">
        <a href="javascript:;" class="header-icon pull-left waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">
            <span>8.Nginxå®è·µä¹‹è¯·æ±‚å›¾ç‰‡è½¬æ¢ä¸ºGoogleæ¨å‡ºçš„webpæ ¼å¼è½¬æ¢å·¥å…·å®è·µ</span>
            
        </div>

        
        <a href="javascript:;" id="site_search_btn" class="header-icon pull-right waves-effect waves-circle waves-light">
            <i class="icon icon-lg icon-search"></i>
        </a>
        

        
            <a href="/atom.xml" class="header-icon pull-right waves-effect waves-circle waves-light">
                <i class="icon icon-lg icon-rss"></i>
            </a>
        
    </div>
</header>
<header class="content-header post-header">
    <img src="/img/banner.jpg" class="header-bg" alt="æ–‡ç« å¤´éƒ¨èƒŒæ™¯">
    <div class="container fade-scale">
        <h1 class="title">8.Nginxå®è·µä¹‹è¯·æ±‚å›¾ç‰‡è½¬æ¢ä¸ºGoogleæ¨å‡ºçš„webpæ ¼å¼è½¬æ¢å·¥å…·å®è·µ</h1>
        <h5 class="subtitle">
            
                <time datetime="2022-07-03T05:34:30.000Z" itemprop="datePublished" class="page-time">
  2022-07-03
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/%E8%BF%90%E7%BB%B4%E5%AE%9E%E8%B7%B5/">è¿ç»´å®è·µ</a></li></ul>


            
        </h5>
        
    </div>
    

</header>

<div id="site_search">
    <div class="search-title clearfix">
        <span class="pull-left">
          <i class="icon icon-lg icon-search"></i>
        </span>
        <input type="text" id="local-search-input" name="q" results="0" placeholder="search my blog..." class="form-control pull-left"/>
        <a href="javascript:;" class="close pull-right waves-effect waves-circle waves-light">
          <i class="icon icon-lg icon-close"></i>
        </a>
    </div>
    <div id="local-search-result"></div>
</div>


<div class="container body-wrap" style="display: none;">
  <article id="post-ç³»ç»Ÿè¿ç»´/Application/Web/WebApp/Nginx/8.Nginxå®è·µä¹‹è¯·æ±‚å›¾ç‰‡è½¬æ¢ä¸ºGoogleæ¨å‡ºçš„webpæ ¼å¼è½¬æ¢å·¥å…·å®è·µ"
  class="post-article article-type-post" itemprop="blogPost">
    <div class="post-card">
        <h1 class="post-card-title">8.Nginxå®è·µä¹‹è¯·æ±‚å›¾ç‰‡è½¬æ¢ä¸ºGoogleæ¨å‡ºçš„webpæ ¼å¼è½¬æ¢å·¥å…·å®è·µ</h1>
        <div class="post-meta">
            <time class="post-time" title="2022-07-03 13:34:30" datetime="2022-07-03T05:34:30.000Z"  itemprop="datePublished">2022-07-03</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/%E8%BF%90%E7%BB%B4%E5%AE%9E%E8%B7%B5/">è¿ç»´å®è·µ</a></li></ul>



            

            


            
        </div>
        <span class="post-href" style="display: none;">|</span> 
        <div class="post-content" id="post-content" itemprop="postContent">
            
            <p><strong>æœ¬ç« ç›®å½•</strong></p>
<p>[TOC]</p>
<h2 id="0x00-å‰è¨€ç®€è¿°"><a href="#0x00-å‰è¨€ç®€è¿°" class="headerlink" title="0x00 å‰è¨€ç®€è¿°"></a>0x00 å‰è¨€ç®€è¿°</h2><p>æè¿°: æœ€è¿‘å…¬å¸ä¸šåŠ¡ä¸­æœ‰è¿™ä¹ˆä¸€ä¸ªéœ€æ±‚å°±æ˜¯åœ¨ä¿è¯å›¾åƒçš„æ¸…æ™°åº¦çš„æƒ…å†µä¸‹, å‡å°‘å…¶ä½“ç§¯å¤§å°ä½¿å¾—å‡è½»å¤–éƒ¨è¯·æ±‚æµé‡å¸¦å®½å¯¹ç½‘å…³çš„è¯·è®¿é—®å‹åŠ›ï¼ŒåŒæ—¶æé«˜ç”¨æˆ·è®¿é—®ä½“éªŒã€‚æ‰€ä»¥åœ¨è¿›è¡Œå‰æœŸéœ€æ±‚ã€è¿ç»´æˆæœ¬ç­‰ç»¼åˆåˆ†æåï¼Œè¿˜æ˜¯å»ºè®®å°†å›¾ç‰‡æ ¼å¼è½¬ä¸ºGoogleæ¨å‡ºçš„ä¸€ç§ç°ä»£å›¾åƒæ ¼å¼ Webpï¼Œè€ƒè™‘åˆ° WebPå›¾ç‰‡å·²ç»æ˜¯ä¸€ç§è¶‹åŠ¿äº†ï¼Œç°åœ¨å·²ç»æœ‰å¾ˆçŸ¥åçš„ç½‘ç«™æ”¯æŒäº†è¿™ç§æ ¼å¼çš„å›¾ç‰‡ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ Google å‡ºå“çš„PageSpeedæ¨¡å—æœ‰ä¸€ä¸ªåŠŸèƒ½ï¼Œä¼šè‡ªåŠ¨å°†å›¾åƒè½¬æ¢æˆWebPæ ¼å¼æˆ–è€…æ˜¯æµè§ˆå™¨æ‰€æ”¯æŒçš„å…¶å®ƒæ ¼å¼(æ¯”è¾ƒåƒé…ç½®)ã€‚</p>
<p>æ‰€ä»¥æœ¬ç« å°†ä¸»è¦é’ˆå¯¹webpæ ¼å¼çš„è½¬æ¢çš„ç›¸å…³å‘½ä»¤è¿›è¡Œå®è·µä½¿ç”¨ï¼Œå¦‚æœä¸æƒ³ä½¿ç”¨ Nginx+PageSpeed æ¨¡å—ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä½¿ç”¨ Nginx+Lua è„šæœ¬é’ˆå¯¹è¯·æ±‚éwebpæ ¼å¼çš„å›¾ç‰‡è¿›è¡Œè‡ªåŠ¨è½¬æ¢åï¼Œå¹¶æŒ‰ç…§æŒ‡å®šçš„åˆ†è¾¨ç‡è¿›è¡Œæ˜¾ç¤ºã€‚</p>
<a id="more"></a>
<p><br/></p>
<h3 id="WebP-ä»‹ç»"><a href="#WebP-ä»‹ç»" class="headerlink" title="WebP ä»‹ç»"></a>WebP ä»‹ç»</h3><p><strong>An image format for the Web</strong><br>æè¿°: WebP ç”±Googleæ¨å‡ºçš„ä¸€ç§ç°ä»£å›¾åƒæ ¼å¼ï¼Œå¯ä¸ºWebä¸Šçš„å›¾åƒæä¾›å“è¶Šçš„æ— æŸå’Œæœ‰æŸå‹ç¼©ã€‚ä¸PNGç›¸æ¯”WebPæ— æŸå›¾åƒçš„å°ºå¯¸å°26%ï¼ŒWebPæœ‰æŸå›¾åƒæ¯”åŒç­‰SSIMè´¨é‡æŒ‡æ•°ä¸‹çš„åŒç±»JPEGå›¾åƒå°25-34%, è€Œæ— æŸ WebP æ”¯æŒé€æ˜åº¦ï¼ˆä¹Ÿç§°ä¸º alpha é€šé“ï¼‰ï¼Œè€Œé¢å¤–å­—èŠ‚æ•°ä»…ä¸º 22%ã€‚å¯¹äºå¯æ¥å—æœ‰æŸ RGB å‹ç¼©çš„æƒ…å†µï¼Œæœ‰æŸ WebP è¿˜æ”¯æŒé€æ˜åº¦ï¼Œé€šå¸¸æä¾›æ¯” PNG å°ä¸‰å€çš„æ–‡ä»¶å¤§å°ã€‚</p>
<p>æ¸©é¦¨æç¤º: ç›®å‰æ”¯æŒ <code>PNG / JPEG / GIF /PNM (PGM, PPM, PAM),/ TIFF</code>ç­‰å›¾ç‰‡æ ¼å¼è½¬æ¢ä¸ºwebpæ ¼å¼ã€‚</p>
<p>å®˜ç½‘åœ°å€: <a href="https://developers.google.com/speed/webp" target="_blank" rel="noopener">https://developers.google.com/speed/webp</a></p>
<p><br/> </p>
<p><strong>Webp æœ‰ä½•ä¼˜ç‚¹?</strong></p>
<blockquote>
<p>ç­”: ä½¿ç”¨WebPï¼Œç½‘ç«™ç®¡ç†å‘˜å’ŒWebå¼€å‘äººå‘˜å¯ä»¥åˆ›å»ºæ›´å°ï¼Œæ›´ä¸°å¯Œçš„å›¾åƒï¼Œä»è€Œä½¿Webè§£æè®¿é—®æ›´å¿«ã€‚<br>WebP å¯åœ¨ <code>Google Chromeï¼ŒSafariï¼ŒFirefoxï¼ŒEdgeï¼ŒOpera</code> ç­‰ä¸»æµæµè§ˆå™¨ä»¥åŠè®¸å¤šå…¶ä»–å·¥å…·å’Œè½¯ä»¶åº“(C/C++/Go/Python)ä¸­å¾—åˆ°åŸç”Ÿæ”¯æŒã€‚</p>
</blockquote>
<p><br/></p>
<p><strong>WebP æ˜¯å¦‚ä½•å·¥ä½œçš„?</strong></p>
<blockquote>
<p>ç­”ï¼š æœ‰æŸWebPå‹ç¼©ä½¿ç”¨é¢„æµ‹ç¼–ç å¯¹å›¾åƒè¿›è¡Œç¼–ç ï¼Œä¸VP8è§†é¢‘ç¼–è§£ç å™¨å‹ç¼©è§†é¢‘ä¸­å…³é”®å¸§çš„æ–¹æ³•ç›¸åŒ, é¢„æµ‹ç¼–ç ä½¿ç”¨ç›¸é‚»åƒç´ å—ä¸­çš„å€¼æ¥é¢„æµ‹å—ä¸­çš„æ•°å€¼ï¼Œç„¶åä»…å¯¹å·®å€¼è¿›è¡Œç¼–ç ã€‚<br>è€Œæ— æŸWebPå‹ç¼©ä½¿ç”¨å·²ç»çœ‹åˆ°çš„å›¾åƒç‰‡æ®µï¼Œä»¥ä¾¿å‡†ç¡®åœ°é‡å»ºæ–°åƒç´ ï¼Œå¦‚æœæ²¡æœ‰å‘ç°æœ‰è¶£çš„åŒ¹é…ï¼Œå®ƒä¹Ÿå¯ä»¥ä½¿ç”¨æœ¬åœ°è°ƒè‰²æ¿ã€‚</p>
</blockquote>
<p><strong>TIPS:</strong> WebPæ–‡ä»¶ç”±VP8æˆ–VP8Lå›¾åƒæ•°æ®ä»¥åŠåŸºäºRIFFçš„å®¹å™¨ç»„æˆ.</p>
<hr>
<h2 id="0X01-éƒ¨ç½²å®‰è£…"><a href="#0X01-éƒ¨ç½²å®‰è£…" class="headerlink" title="0X01 éƒ¨ç½²å®‰è£…"></a>0X01 éƒ¨ç½²å®‰è£…</h2><h3 id="å®è·µç¯å¢ƒè¯´æ˜"><a href="#å®è·µç¯å¢ƒè¯´æ˜" class="headerlink" title="å®è·µç¯å¢ƒè¯´æ˜"></a>å®è·µç¯å¢ƒè¯´æ˜</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç³»ç»Ÿ</span></span><br><span class="line">~$ cat /etc/issue.net</span><br><span class="line">Ubuntu 20.04.3 LTS</span><br><span class="line">~$ uname -a</span><br><span class="line">Linux weiyigeek.top 5.4.0-92-generic <span class="comment">#103-Ubuntu SMP Fri Nov 26 16:13:00 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è½¯ä»¶</span></span><br><span class="line">libwebp-1.2.3.tar.gz</span><br></pre></td></tr></table></figure>
<p>æ¸©é¦¨æç¤º: æ­¤å¤„ä½¿ç”¨çš„æ˜¯ Ubuntu 20.04 æ“ä½œç³»ç»Ÿ, è¯¥ç³»ç»Ÿå·²åšå®‰å…¨åŠ å›ºå’Œå†…æ ¸ä¼˜åŒ–ç¬¦åˆç­‰ä¿2.0è¦æ±‚ã€<a href="https://github.com/WeiyiGeek/SecOpsDev/blob/master/OS-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/Linux/Ubuntu/Ubuntu-InitializeSecurity.sh" target="_blank" rel="noopener">SecOpsDev/Ubuntu-InitializeSecurity.sh at master Â· WeiyiGeek/SecOpsDev</a> ã€‘, å¦‚ä½ çš„Linuxæœªè¿›è¡Œç›¸åº”é…ç½®ç¯å¢ƒå¯èƒ½ä¸è¯»è€…æœ‰äº›è®¸å·®å¼‚, å¦‚éœ€è¦è¿›è¡Œ(windows serverã€Ubuntuã€CentOS)å®‰å…¨åŠ å›ºè¯·å‚ç…§å¦‚ä¸‹åŠ å›ºè„šæœ¬è¿›è¡ŒåŠ å›º, è¯·å¤§å®¶ç–¯ç‹‚çš„ star ã€‚<br>åŠ å›ºè„šæœ¬åœ°å€:ã€ <a href="https://github.com/WeiyiGeek/SecOpsDev/blob/master/OS-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/Linux/Ubuntu/Ubuntu-InitializeSecurity.sh" target="_blank" rel="noopener">https://github.com/WeiyiGeek/SecOpsDev/blob/master/OS-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/Linux/Ubuntu/Ubuntu-InitializeSecurity.sh</a> ã€‘</p>
<p style='color:red'> ä¸ºäº†èŠ‚çœå¤§å®¶çš„å®è·µæ—¶é—´ï¼Œæˆ‘å·²ç»æŠŠéœ€è¦ç”¨åˆ°çš„æºç åŒ…ä¸Šä¼ åˆ°ç©ºé—´ä¸­ï¼Œæœ‰éœ€è¦çš„æœ‹å‹å¯ä»¥çœ‹ä¸€ä¸‹ï¼Œä¸‹è½½åœ°å€: <a href="http://share.weiyigeek.top/d/36158960-50338508-7c5982?p=2088ï¼ˆè®¿é—®å¯†ç ï¼š2088ï¼‰" target="_blank" rel="noopener">http://share.weiyigeek.top/d/36158960-50338508-7c5982?p=2088ï¼ˆè®¿é—®å¯†ç ï¼š2088ï¼‰</a><br><br/>æ¸©é¦¨æç¤º: å¦‚æç¤ºè¯ä¹¦ä¸å¯¹ï¼Œè¯·ç‚¹å‡»é«˜çº§ç»§ç»­è®¿é—®å³å¯.</p>

<figure class="image-box">
                <a rel=8.Nginxå®è·µä¹‹è¯·æ±‚å›¾ç‰‡è½¬æ¢ä¸ºGoogleæ¨å‡ºçš„webpæ ¼å¼è½¬æ¢å·¥å…·å®è·µ href="https://img.weiyigeek.top/2022/5/20220806093220.png" target="_blank" title="WeiyiGeek.NginxåŠå…¶æ¨¡å—ä¸‹è½½" data-fancybox="images"><img src="https://img.weiyigeek.top/2022/5/20220806093220.png" alt="WeiyiGeek.NginxåŠå…¶æ¨¡å—ä¸‹è½½" title="" class=""></a>
                <p>WeiyiGeek.NginxåŠå…¶æ¨¡å—ä¸‹è½½</p>
            </figure>
<p><br/></p>
<h3 id="WebP-å·¥å…·åº“å®‰è£…"><a href="#WebP-å·¥å…·åº“å®‰è£…" class="headerlink" title="WebP å·¥å…·åº“å®‰è£…"></a>WebP å·¥å…·åº“å®‰è£…</h3><p>Webp åŒ…æ‹¬è½»é‡çº§ç¼–ç å’Œè§£ç åº“libwebp[^libwebp]å’Œå‘½ä»¤è¡Œå·¥å…·[cwebp][^cwebp]å’Œ[dwebp][^dwebp]ï¼Œç”¨äºå°†å¤šç§äº’è”ç½‘å›¾åƒä¸WebPæ ¼å¼ç›¸äº’è½¬æ¢ï¼Œä»¥åŠç”¨äºæŸ¥çœ‹ï¼Œå¤ç”¨å’ŒåŠ¨ç”»åŒ–WebPå›¾åƒçš„å·¥å…·ï¼Œå®Œæ•´çš„æºä»£ç å¯åœ¨<a href="https://developers.google.com/speed/webp/download" target="_blank" rel="noopener">ä¸‹è½½é¡µé¢</a>ä¸Šè·å¾—ã€‚</p>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä¸‹è½½é€‚ç”¨äºLinuxã€Windowsæˆ–macOSçš„é¢„ç¼–è¯‘cwebpè½¬æ¢å·¥å…·ï¼ˆ<a href="https://developers.google.com/speed/webp/docs/precompiledï¼‰ï¼Œå°†æ‚¨å–œçˆ±çš„æ”¶è—ä»PNGå’ŒJPEGè½¬æ¢ä¸ºWebPã€‚" target="_blank" rel="noopener">https://developers.google.com/speed/webp/docs/precompiledï¼‰ï¼Œå°†æ‚¨å–œçˆ±çš„æ”¶è—ä»PNGå’ŒJPEGè½¬æ¢ä¸ºWebPã€‚</a></p>
<p><br/></p>
<h4 id="äºŒè¿›åˆ¶åŒ…æ–¹å¼å®‰è£…"><a href="#äºŒè¿›åˆ¶åŒ…æ–¹å¼å®‰è£…" class="headerlink" title="äºŒè¿›åˆ¶åŒ…æ–¹å¼å®‰è£…"></a>äºŒè¿›åˆ¶åŒ…æ–¹å¼å®‰è£…</h4><p>æè¿°: ç”¨äºLinuxã€Windowså’ŒmacOSçš„é¢„ç¼–è¯‘WebPå®ç”¨ç¨‹åºå’Œåº“ã€‚å®ƒä»¬åŒ…æ‹¬ï¼š</p>
<ul>
<li>libwebp åº“ : å¯ç”¨äºå°†WebPç¼–ç æˆ–è§£ç æ·»åŠ åˆ°ç¨‹åºä¸­ (windows/Linux)ã€‚</li>
<li><a href="https://developers.google.com/speed/webp/docs/cwebp" target="_blank" rel="noopener">cwebp</a> : WebPç¼–ç å™¨å·¥å…·</li>
<li><a href="https://developers.google.com/speed/webp/docs/dwebp" target="_blank" rel="noopener">dwebp</a> : WebPè§£ç å™¨å·¥å…·</li>
<li><a href="https://developers.google.com/speed/webp/docs/vwebp" target="_blank" rel="noopener">vwebp</a> : WebPæ–‡ä»¶æŸ¥çœ‹å™¨</li>
<li><a href="https://developers.google.com/speed/webp/docs/webpmux" target="_blank" rel="noopener">webpmux</a> : WebPå¤ç”¨å·¥å…·</li>
<li><a href="https://developers.google.com/speed/webp/docs/gif2webp" target="_blank" rel="noopener">gif2webp</a>: ç”¨äºå°†GIFå›¾åƒè½¬æ¢ä¸ºWebPçš„å·¥å…·</li>
</ul>
<p><br></p>
<p><strong>ç³»ç»Ÿè½¯ä»¶æºæ–¹å¼</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Debianã€Ubuntu</span></span><br><span class="line">sudo apt-get install webp</span><br><span class="line"></span><br><span class="line"><span class="comment"># CentOS</span></span><br><span class="line">yum install libwebp-tools webp</span><br></pre></td></tr></table></figure></p>
<p><br/></p>
<h4 id="æºä»£ç ç¼–è¯‘æ–¹å¼å®‰è£…"><a href="#æºä»£ç ç¼–è¯‘æ–¹å¼å®‰è£…" class="headerlink" title="æºä»£ç ç¼–è¯‘æ–¹å¼å®‰è£…"></a>æºä»£ç ç¼–è¯‘æ–¹å¼å®‰è£…</h4><p>æè¿°: libwebp æ˜¯è°·æ­Œå®˜æ–¹æä¾›çš„webpæ ¼å¼å›¾ç‰‡parserä»¥åŠè§£ç çš„åº“ï¼Œä»¥ä¸‹è®°å½•åœ¨Ubuntu 20.04ç¼–è¯‘<code>libwebp</code>åŠå…¶å®‰è£…webpç›¸å…³å·¥å…·çš„è¿‡ç¨‹ã€‚</p>
<p>é¡¹ç›®åœ°å€: <a href="https://github.com/webmproject/libwebp" target="_blank" rel="noopener">https://github.com/webmproject/libwebp</a><br>ä¸‹è½½åœ°å€: <a href="https://storage.googleapis.com/downloads.webmproject.org/releases/webp/index.html" target="_blank" rel="noopener">https://storage.googleapis.com/downloads.webmproject.org/releases/webp/index.html</a></p>
<p>Step 1.è¦ä»<code>source code</code>è¿›è¡Œæ„å»ºï¼Œæˆ‘ä»¬é¦–å…ˆå¿…é¡»ä¸‹è½½æºç çš„å‹ç¼©åŒ…ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/src</span><br><span class="line">wget -c https://storage.googleapis.com/downloads.webmproject.org/releases/webp/libwebp-1.2.3.tar.gz </span><br><span class="line">tar -zxf libwebp-1.2.3.tar.gz  &amp;&amp; <span class="built_in">cd</span> libwebp-1.2.3/</span><br></pre></td></tr></table></figure>
<p><br/></p>
<p>Step 2.åœ¨Ubuntuç³»ç»Ÿä¸­å®‰è£…ç¼–è¯‘libwebpå‰ä»¥åŠwebpç›¸å…³å·¥å…·ç¼–è¯‘æ„å»ºã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Prerequisites: a compiler (e.g., gcc), make, autoconf, automake, libtool.</span></span><br><span class="line">apt install -y gcc make autoconf automake libtool</span><br><span class="line"><span class="comment"># support webpã€jpegã€tiffã€gif</span></span><br><span class="line">apt install -y libwebp-dev libjpeg-dev libpng-dev libtiff-dev libgif-dev </span><br><span class="line"><span class="comment"># support vwebp</span></span><br><span class="line">apt install -y freeglut3-dev mesa-common-dev </span><br><span class="line"><span class="comment"># é¢„ç¼–è¯‘å‚æ•°</span></span><br><span class="line">./configure --<span class="built_in">enable</span>-libwebpdecoder --<span class="built_in">enable</span>-libwebpextras  --<span class="built_in">enable</span>-swap-16bit-csp</span><br><span class="line"><span class="comment"># è‡ªåŠ¨ç¼–è¯‘æ„å»º</span></span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>
<figure class="image-box">
                <a rel=8.Nginxå®è·µä¹‹è¯·æ±‚å›¾ç‰‡è½¬æ¢ä¸ºGoogleæ¨å‡ºçš„webpæ ¼å¼è½¬æ¢å·¥å…·å®è·µ href="https://img.weiyigeek.top/2022/5/20220731112616.png" target="_blank" title="WeiyiGeek.build libwebp" data-fancybox="images"><img src="https://img.weiyigeek.top/2022/5/20220731112616.png" alt="WeiyiGeek.build libwebp" title="" class=""></a>
                <p>WeiyiGeek.build libwebp</p>
            </figure>
<p><strong>æ¸©é¦¨æç¤º:</strong> å½“ä½ ä»gitæºä»£ç æ„å»ºæ—¶éœ€è¦è¿è¡Œautogen.shç”Ÿæˆé…ç½®è„šæœ¬ (When building from git sources, you will need to run autogen.sh to generate the<br>configure script.)</p>
<p><strong>æ¸©é¦¨æç¤º:</strong> å¦‚æœåœ¨æ‰§è¡Œæ—¶å‡ºç°å¦‚ä¸‹é”™è¯¯ <code>cwebp: error while loading shared libraries: libwebpdemux.so.2: cannot open shared object file: No such file or directory</code>ï¼Œæˆ‘ä»¬å¯ä»¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤è¿›è¡Œè§£å†³è¯¥é—®é¢˜ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ–¹å¼1</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"export LD_LIBRARY_PATH=<span class="variable">$LD_LIBRARY_PATH</span>:/usr/local/lib"</span> &gt;&gt; ~/.bashrc</span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=<span class="variable">$LD_LIBRARY_PATH</span>:/usr/<span class="built_in">local</span>/lib</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$LD_LIBRARY_PATH</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–¹å¼2</span></span><br><span class="line">tee -a /etc/ld.so.conf.d/libc.conf &lt;&lt;<span class="string">'EOF'</span></span><br><span class="line"><span class="comment"># libc default configuration</span></span><br><span class="line">/usr/<span class="built_in">local</span>/lib</span><br><span class="line">EOF</span><br><span class="line">sudo ldconfig</span><br></pre></td></tr></table></figure>
<p><br/></p>
<p>Step 3.åœ¨å®Œæˆåæ‚¨åº”è¯¥åœ¨å¦‚ä¸‹ç›®å½•ä¸­<code>/usr/local/bin/</code>ï¼Œä½¿ç”¨lså‘½ä»¤æŸ¥çœ‹ä¸‹è¿°å‡ ä¸ªå‘½ä»¤.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ls /usr/<span class="built_in">local</span>/bin/*webp*</span><br><span class="line">/usr/<span class="built_in">local</span>/bin/cwebp</span><br><span class="line">/usr/<span class="built_in">local</span>/bin/dwebp</span><br><span class="line">/usr/<span class="built_in">local</span>/bin/gif2webp</span><br><span class="line">/usr/<span class="built_in">local</span>/bin/vwebp</span><br><span class="line">/usr/<span class="built_in">local</span>/bin/webpmux</span><br><span class="line">/usr/<span class="built_in">local</span>/bin/img2webp  </span><br><span class="line">/usr/<span class="built_in">local</span>/bin/webpinfo</span><br></pre></td></tr></table></figure></p>
<p><strong>å‘½ä»¤ä»‹ç»</strong>:</p>
<ul>
<li>cwebp: ç”¨äºå°†jpegã€pngæˆ–TIFFç¼–ç æ ¼å¼å›¾ç‰‡è½¬ä¸ºwebpæ ¼å¼å›¾ç‰‡ã€‚(å¯ä»¥ç†è§£ä¸ºç¼–ç )</li>
<li>dwebp: ç”¨äºå°†webpæ ¼å¼å›¾ç‰‡è½¬æ¢ä¸ºpngæ ¼å¼å›¾ç‰‡</li>
<li>vwebp: ç”¨äºæ’­æ”¾webpåŠ¨å›¾å’Œé™å›¾çš„å·¥å…·</li>
<li>webpmux: ç”¨äº WebPå¤ç”¨å·¥å…·</li>
<li>gif2webpï¼šç”¨äºå°†GIFå›¾åƒè½¬æ¢ä¸ºWebPçš„å·¥å…·</li>
<li>img2webpï¼šç”¨äºä»ä¸€ç³»åˆ—è¾“å…¥å›¾åƒåˆ›å»ºåŠ¨ç”»WebPæ–‡ä»¶ã€‚</li>
<li>webpinfo: æ‰“å°WebPæ–‡ä»¶çš„åŒºå—çº§ç»“æ„ä»¥åŠåŸºæœ¬çš„å®Œæ•´æ€§æ£€æŸ¥ã€‚</li>
</ul>
<p><br></p>
<p>Step 4.éªŒè¯å®‰è£…çš„ç›¸å…³å·¥å…·å¹¶è¿›è¡ŒæŸ¥çœ‹å…¶ç‰ˆæœ¬å·ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">~$ cwebp -version</span><br><span class="line">1.2.3</span><br><span class="line">~$ dwebp -version</span><br><span class="line">1.2.3</span><br></pre></td></tr></table></figure>
<p>å¥½çš„ï¼ŒäºŒè¿›åˆ¶éƒ¨ç½²åœ¨æ­¤å¤„å®è·µéƒ¨ç½²åˆ°æ­¤å°±ç»“æŸäº†ã€‚</p>
<p><br/></p>
<p>è¡¥å……è¯´æ˜: å…¶å®ƒå‘è¡Œç‰ˆå¯ä»¥ä»æºç è¿›è¡Œç¼–è¯‘æ„å»ºã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># (1) tiff æ‰©å±•å›¾åƒæ ¼å¼çš„æ”¯æŒ </span></span><br><span class="line">apt install -y libtiff-dev</span><br><span class="line">http://download.osgeo.org/libtiff/</span><br><span class="line">wget -c http://download.osgeo.org/libtiff/tiff-4.4.0.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="comment"># (2) gif å›¾åƒæ ¼å¼çš„ä¸€ä¸ªæ ¸å¿ƒåº“,ç”¨äºå¤„ç†GIFçš„åº“å’Œå®ç”¨ç¨‹åº,giflibæ˜¯ä¸€ä¸ªç”¨äºè¯»å–å’Œå†™å…¥gifå›¾åƒçš„åº“ã€‚</span></span><br><span class="line">apt install -y libgif-dev</span><br><span class="line">https://sourceforge.net/projects/giflib/files/latest/download</span><br><span class="line">wget -c https://onboardcloud.dl.sourceforge.net/project/giflib/giflib-5.2.1.tar.gz</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="0x02-å·¥å…·å‘½ä»¤æµ…æ"><a href="#0x02-å·¥å…·å‘½ä»¤æµ…æ" class="headerlink" title="0x02 å·¥å…·å‘½ä»¤æµ…æ"></a>0x02 å·¥å…·å‘½ä»¤æµ…æ</h2><h3 id="cwebp-å‘½ä»¤-è½¬æ¢-webp-å›¾ç‰‡æ ¼å¼"><a href="#cwebp-å‘½ä»¤-è½¬æ¢-webp-å›¾ç‰‡æ ¼å¼" class="headerlink" title="cwebp å‘½ä»¤ - è½¬æ¢ webp å›¾ç‰‡æ ¼å¼"></a>cwebp å‘½ä»¤ - è½¬æ¢ webp å›¾ç‰‡æ ¼å¼</h3><p><strong>è¯­æ³•å‚æ•°:</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Usage:</span></span><br><span class="line"> cwebp [-preset &lt;...&gt;] [options] in_file [-o out_file]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Options:</span></span><br><span class="line">  -q &lt;<span class="built_in">float</span>&gt; ............. quality factor (0:small..100:big), default=75 <span class="comment"># å›¾å½¢è´¨é‡</span></span><br><span class="line">  -alpha_q &lt;int&gt; ......... transparency-compression quality (0..100),</span><br><span class="line">                           default=100</span><br><span class="line">  -preset &lt;string&gt; ....... preset setting, one of:</span><br><span class="line">                            default, photo, picture,</span><br><span class="line">                            drawing, icon, text</span><br><span class="line">     -preset must come first, as it overwrites other parameters</span><br><span class="line">  -z &lt;int&gt; ............... activates lossless preset with given</span><br><span class="line">                           level <span class="keyword">in</span> [0:fast, ..., 9:slowest]</span><br><span class="line"></span><br><span class="line">  -m &lt;int&gt; ............... compression method (0=fast, 6=slowest), default=4</span><br><span class="line">  -segments &lt;int&gt; ........ number of segments to use (1..4), default=4</span><br><span class="line">  -size &lt;int&gt; ............ target size (<span class="keyword">in</span> bytes)                             <span class="comment"># ç›®æ ‡å°ºå¯¸</span></span><br><span class="line">  -psnr &lt;<span class="built_in">float</span>&gt; .......... target PSNR (<span class="keyword">in</span> dB. typically: 42)                 <span class="comment"># ç›®æ ‡PSN</span></span><br><span class="line">  -s &lt;int&gt; &lt;int&gt; ......... input size (width x height) <span class="keyword">for</span> YUV</span><br><span class="line">  -sns &lt;int&gt; ............. spatial noise shaping (0:off, 100:max), default=50 <span class="comment"># ç©ºé—´å™ªå£°æ•´å½¢</span></span><br><span class="line">  -f &lt;int&gt; ............... filter strength (0=off..100), default=60           <span class="comment"># è¿‡æ»¤å™¨å¼ºåº¦</span></span><br><span class="line">  -sharpness &lt;int&gt; ....... filter sharpness (0:most .. 7:least sharp), default=0</span><br><span class="line">  -strong ................ use strong filter instead of simple (default)</span><br><span class="line">  -nostrong .............. use simple filter instead of strong</span><br><span class="line">  -sharp_yuv ............. use sharper (and slower) RGB-&gt;YUV conversion</span><br><span class="line">  -partition_limit &lt;int&gt; . <span class="built_in">limit</span> quality to fit the 512k <span class="built_in">limit</span> on the first partition (0=no degradation ... 100=full)</span><br><span class="line">  -pass &lt;int&gt; ............ analysis pass number (1..10)</span><br><span class="line">  -qrange &lt;min&gt; &lt;max&gt; .... specifies the permissible quality range(default: 0 100)</span><br><span class="line">  -crop &lt;x&gt; &lt;y&gt; &lt;w&gt; &lt;h&gt; .. crop picture with the given rectangle</span><br><span class="line">  -resize &lt;w&gt; &lt;h&gt; ........ resize picture (*after* any cropping)             <span class="comment"># è°ƒæ•´å›¾ç‰‡å¤§å°ï¼ˆ*ä»»æ„è£å‰ªåï¼‰</span></span><br><span class="line">  -mt .................... use multi-threading <span class="keyword">if</span> available</span><br><span class="line">  -low_memory ............ reduce memory usage (slower encoding)</span><br><span class="line">  -map &lt;int&gt; ............. <span class="built_in">print</span> map of extra info</span><br><span class="line">  -print_psnr ............ prints averaged PSNR distortion</span><br><span class="line">  -print_ssim ............ prints averaged SSIM distortion</span><br><span class="line">  -print_lsim ............ prints <span class="built_in">local</span>-similarity distortion</span><br><span class="line">  -d &lt;file.pgm&gt; .......... dump the compressed output (PGM file)</span><br><span class="line">  -alpha_method &lt;int&gt; .... transparency-compression method (0..1), default=1</span><br><span class="line">  -alpha_filter &lt;string&gt; . predictive filtering <span class="keyword">for</span> alpha plane,one of: none, fast (default) or best</span><br><span class="line">  -exact ................. preserve RGB values <span class="keyword">in</span> transparent area, default=off</span><br><span class="line">  -blend_alpha &lt;hex&gt; ..... blend colors against background color</span><br><span class="line">                           expressed as RGB values written <span class="keyword">in</span></span><br><span class="line">                           hexadecimal, e.g. 0xc0e0d0 <span class="keyword">for</span> red=0xc0</span><br><span class="line">                           green=0xe0 and blue=0xd0</span><br><span class="line">  -noalpha ............... discard any transparency information</span><br><span class="line">  -lossless .............. encode image losslessly, default=off <span class="comment"># æ— æŸç¼–ç å›¾åƒï¼Œé»˜è®¤ä¸ºå…³é—­</span></span><br><span class="line">  -near_lossless &lt;int&gt; ... use near-lossless image preprocessing (0..100=off), default=100</span><br><span class="line">  -hint &lt;string&gt; ......... specify image characteristics hint,one of: photo, picture or graph <span class="comment"># æŒ‡å®šå›¾åƒç‰¹å¾æç¤ºï¼Œå›¾ç‰‡ã€å›¾ç‰‡æˆ–å›¾å½¢ä¹‹ä¸€</span></span><br><span class="line">  -metadata &lt;string&gt; ..... comma separated list of metadata tocopy from the input to the output <span class="keyword">if</span> present. Valid values: all, none (default), exif, icc, xmp</span><br><span class="line"></span><br><span class="line">  -short ................. condense printed message</span><br><span class="line">  -quiet ................. don\<span class="string">'t print anything</span></span><br><span class="line"><span class="string">  -version ............... print version number and exit</span></span><br><span class="line"><span class="string">  -noasm ................. disable all assembly optimizations</span></span><br><span class="line"><span class="string">  -v ..................... verbose, e.g. print encoding/decoding times</span></span><br><span class="line"><span class="string">  -progress .............. report encoding progress</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Experimental Options:</span></span><br><span class="line"><span class="string">  -jpeg_like ............. roughly match expected JPEG size</span></span><br><span class="line"><span class="string">  -af .................... auto-adjust filter strength</span></span><br><span class="line"><span class="string">  -pre &lt;int&gt; ............. pre-processing filter</span></span><br></pre></td></tr></table></figure></p>
<p><br/></p>
<p><strong>å®è·µæ¡ˆä¾‹:</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.å›¾å½¢è´¨é‡ä¸º75ï¼Œå°† picture.png è½¬æ¢ä¸º picture.webp</span></span><br><span class="line">$ cwebp -o picture.webp -- picture.png</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.å›¾å½¢è´¨é‡ä¸º80ï¼Œå°† pictimageure.png è½¬æ¢ä¸º image.webp</span></span><br><span class="line">$ cwebp -q 80 image.png -o image.webp</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.ç©ºé—´å™ªå£°æ•´å½¢ä¸º70ï¼Œè¿‡æ»¤å™¨å¼ºåº¦ä¸º50ï¼Œå°ºå¯¸å¤§å°ä¸º 60000 bytes</span></span><br><span class="line">$ cwebp -sns 70 -f 50 -size 60000 image.png -o image.webp</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.æ— æŸå‹ç¼© wechat-search.png ä¸º wechat-search.png</span></span><br><span class="line">$ cwebp -lossless wechat-search.png -o image_lossless.webp</span><br><span class="line">  <span class="comment"># Saving file 'image_lossless.webp'</span></span><br><span class="line">  <span class="comment"># File:      wechat-search.png</span></span><br><span class="line">  <span class="comment"># Dimension: 438 x 200</span></span><br><span class="line">  <span class="comment"># Output:    16582 bytes (1.51 bpp)</span></span><br><span class="line">  <span class="comment"># Lossless-ARGB compressed size: 16582 bytes</span></span><br><span class="line">  <span class="comment">#   * Header size: 787 bytes, image data size: 15770</span></span><br><span class="line">  <span class="comment">#   * Lossless features used: SUBTRACT-GREEN</span></span><br><span class="line">  <span class="comment">#   * Precision Bits: histogram=3 transform=3 cache=10</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.è°ƒæ•´å›¾ç‰‡å¤§å°ï¼ˆ*ä»»æ„è£å‰ªåï¼‰</span></span><br><span class="line">$ cwebp -resize 216 100  wechat-search.png -o image_resize.webp</span><br><span class="line">  <span class="comment"># Saving file 'image_resize.webp'</span></span><br><span class="line">  <span class="comment"># File:      wechat-search.png</span></span><br><span class="line">  <span class="comment"># Dimension: 216 x 100</span></span><br><span class="line">  <span class="comment"># Output:    4246 bytes Y-U-V-All-PSNR 39.27 42.31 39.42   39.68 dB</span></span><br><span class="line">  <span class="comment">#             (1.57 bpp)</span></span><br><span class="line">  <span class="comment"># block count:  intra4:         58  (59.18%)</span></span><br><span class="line">  <span class="comment">#               intra16:        40  (40.82%)</span></span><br><span class="line">  <span class="comment">#               skipped:         9  (9.18%)</span></span><br><span class="line">  <span class="comment"># bytes used:  header:            202  (4.8%)</span></span><br><span class="line">  <span class="comment">#               mode-partition:    331  (7.8%)</span></span><br><span class="line">  <span class="comment">#   Residuals bytes  |segment 1|segment 2|segment 3|segment 4|  total</span></span><br><span class="line">  <span class="comment">#     macroblocks:  |      13%|      16%|      45%|      26%|      98</span></span><br><span class="line">  <span class="comment">#       quantizer:  |      36 |      30 |      25 |      17 |</span></span><br><span class="line">  <span class="comment">#     filter level:  |      11 |       6 |       5 |       2 |</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 6.éå†æŸä¸€ç›®å½•ä¸­çš„å›¾ç‰‡æ ¼å¼è¿›è¡Œæ‰¹é‡è½¬æ¢ä¸º.webpæ ¼å¼å›¾ç‰‡åˆ°æŸä¸€ç›®å½•ã€‚</span></span><br><span class="line"><span class="comment"># å•ä¸ªæ–‡ä»¶ç±»å‹è½¬æ¢</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(find /tmp -name *.png; <span class="keyword">do</span> png_suffix=<span class="variable">$&#123;i/.png/.webp&#125;</span>; /usr/<span class="built_in">local</span>/bin/cwebp -q 80 <span class="variable">$i</span> -o <span class="variable">$&#123;png_suffix/image/convert&#125;</span>; <span class="keyword">done</span></span><br><span class="line"><span class="comment"># å¤šä¸ªæ–‡ä»¶ç±»å‹è½¬æ¢</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(find /tmp -name *.png -o -name *.jpg -o -name *.jpeg -o -name *.tiff); <span class="keyword">do</span> </span><br><span class="line">img_pathname=<span class="variable">$&#123;i%%.*&#125;</span>; /usr/<span class="built_in">local</span>/bin/cwebp -short -q 80  <span class="variable">$i</span> -o <span class="variable">$&#123;img_pathname/image/convert&#125;</span>.webp ; </span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">$ tree .</span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ convert</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ 1.webp</span><br><span class="line">â”‚Â Â  â””â”€â”€ 2.webp</span><br><span class="line">â””â”€â”€ image</span><br><span class="line">    â”œâ”€â”€ 1.jpg</span><br><span class="line">    â””â”€â”€ 2.png</span><br></pre></td></tr></table></figure>
<p><br/></p>
<h3 id="dwebp-å‘½ä»¤-å°†webpæ ¼å¼è½¬æ¢ä¸ºpngæ ¼å¼-è§£ç "><a href="#dwebp-å‘½ä»¤-å°†webpæ ¼å¼è½¬æ¢ä¸ºpngæ ¼å¼-è§£ç " class="headerlink" title="dwebp å‘½ä»¤ - å°†webpæ ¼å¼è½¬æ¢ä¸ºpngæ ¼å¼(è§£ç )"></a>dwebp å‘½ä»¤ - å°†webpæ ¼å¼è½¬æ¢ä¸ºpngæ ¼å¼(è§£ç )</h3><p><strong>è¯­æ³•å‚æ•°:</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Usage: dwebp in_file [options] [-o out_file]</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ä»¥ä¸‹é€‰é¡¹è½¬æ¢ä¸ºå…¶ä»–å›¾åƒæ ¼å¼ï¼š</span></span><br><span class="line">  -pam ......... save the raw RGBA samples as a color PAM</span><br><span class="line">  -ppm ......... save the raw RGB samples as a color PPM</span><br><span class="line">  -bmp ......... save as uncompressed BMP format</span><br><span class="line">  -tiff ........ save as uncompressed TIFF format</span><br><span class="line">  -pgm ......... save the raw YUV samples as a grayscale PGM file with IMC4 layout</span><br><span class="line">  -yuv ......... save the raw YUV samples <span class="keyword">in</span> flat layout</span><br><span class="line"> Other options are:</span><br><span class="line">  -version ..... <span class="built_in">print</span> version number and <span class="built_in">exit</span></span><br><span class="line">  -nofancy ..... don<span class="string">'t use the fancy YUV420 upscaler</span></span><br><span class="line"><span class="string">  -nofilter .... disable in-loop filtering</span></span><br><span class="line"><span class="string">  -nodither .... disable dithering</span></span><br><span class="line"><span class="string">  -dither &lt;d&gt; .. dithering strength (in 0..100)       # æŠ–åŠ¨å¼ºåº¦ï¼ˆ0..100ï¼‰</span></span><br><span class="line"><span class="string">  -alpha_dither  use alpha-plane dithering if needed  # å¦‚æœéœ€è¦ï¼Œä½¿ç”¨alphaå¹³é¢æŠ–åŠ¨</span></span><br><span class="line"><span class="string">  -mt .......... use multi-threading                  # ä½¿ç”¨å¤šçº¿ç¨‹</span></span><br><span class="line"><span class="string">  -crop &lt;x&gt; &lt;y&gt; &lt;w&gt; &lt;h&gt; ... crop output with the given rectangle  # ä½¿ç”¨ç»™å®šçŸ©å½¢è£å‰ªè¾“å‡º</span></span><br><span class="line"><span class="string">  -resize &lt;w&gt; &lt;h&gt; ......... resize output (*after* any cropping)  # å°ºå¯¸å¤§å°</span></span><br><span class="line"><span class="string">  -flip ........ flip the output vertically                       # å‚ç›´ç¿»è½¬è¾“å‡º</span></span><br><span class="line"><span class="string">  -alpha ....... only save the alpha plane                        # ä»…ä¿å­˜alphaå¹³é¢</span></span><br><span class="line"><span class="string">  -incremental . use incremental decoding (useful for tests)</span></span><br><span class="line"><span class="string">  -v ........... verbose (e.g. print encoding/decoding times)</span></span><br><span class="line"><span class="string">  -quiet ....... quiet mode, don'</span>t <span class="built_in">print</span> anything</span><br><span class="line">  -noasm ....... <span class="built_in">disable</span> all assembly optimizations</span><br></pre></td></tr></table></figure></p>
<p><strong>ç®€å•ç¤ºä¾‹:</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.Using dwebp to Convert Images from the WebP Format</span></span><br><span class="line">dwebp image.webp -o image.png</span><br><span class="line"></span><br><span class="line">  <span class="comment"># Decoded image.webp. Dimensions: 493 x 424 . Format: lossy. Now saving...</span></span><br><span class="line">  <span class="comment"># Saved file image.png</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.webpå›¾å‚ç›´ç¿»è½¬è¾“å‡º</span></span><br><span class="line">dwebp image.webp -flip -o image.png</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.è§£ç ä¸ºppmæ ¼å¼</span></span><br><span class="line">dwebp picture.webp -ppm -o output.ppm</span><br><span class="line">dwebp -o output.ppm -- ---picture.webp</span><br></pre></td></tr></table></figure>
<p><br/></p>
<h3 id="gif2webp-å‘½ä»¤-å°†gifæ ¼å¼å›¾ç‰‡è½¬æ¢ä¸ºwebpæ ¼å¼"><a href="#gif2webp-å‘½ä»¤-å°†gifæ ¼å¼å›¾ç‰‡è½¬æ¢ä¸ºwebpæ ¼å¼" class="headerlink" title="gif2webp å‘½ä»¤ - å°†gifæ ¼å¼å›¾ç‰‡è½¬æ¢ä¸ºwebpæ ¼å¼"></a>gif2webp å‘½ä»¤ - å°†gifæ ¼å¼å›¾ç‰‡è½¬æ¢ä¸ºwebpæ ¼å¼</h3><p><strong>è¯­æ³•å‚æ•°:</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Usage:</span></span><br><span class="line">  gif2webp [options] gif_file -o webp_file</span><br><span class="line"><span class="comment"># Options:</span></span><br><span class="line">  -h / -<span class="built_in">help</span> ............. this <span class="built_in">help</span></span><br><span class="line">  -lossy ................. encode image using lossy compression</span><br><span class="line">  -mixed ................. æ··åˆå‹ç¼©æ¨¡å¼ï¼šé€šè¿‡å¯å‘å¼é€‰æ‹©æ¯å¸§çš„æœ‰æŸæˆ–æ— æŸå‹ç¼©æ¥ä¼˜åŒ–å›¾åƒçš„å‹ç¼©ã€‚æ­¤å…¨å±€é€‰é¡¹ç¦ç”¨æœ¬åœ°é€‰é¡¹å’Œ -lossyã€losslessã€‚</span><br><span class="line">  -q &lt;<span class="built_in">float</span>&gt; ............. quality factor (0:small..100:big)</span><br><span class="line">  -m &lt;int&gt; ............... compression method (0=fast, 6=slowest)</span><br><span class="line">  -min_size .............. å¯¹å›¾åƒè¿›è¡Œç¼–ç ä»¥å®ç°æœ€å°å°ºå¯¸ã€‚è¿™å°†ç¦ç”¨å…³é”®å¸§æ’å…¥å¹¶é€‰å–å‚æ•°ï¼Œä»è€Œè·å¾—æ¯ä¸ªå¸§çš„æœ€å°è¾“å‡ºã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä½¿ç”¨æ— æŸå‹ç¼©ï¼Œä½†å¯ä»¥ä¸-qã€-mã€-lossyã€-mixedé€‰é¡¹ç»„åˆä½¿ç”¨ã€‚</span><br><span class="line">  -kmin &lt;int&gt; ............ </span><br><span class="line">  -kmax &lt;int&gt; ............ æŒ‡å®šè¾“å‡ºåŠ¨ç”»ä¸­è¿ç»­å…³é”®å¸§ï¼ˆå¯ç‹¬ç«‹è§£ç å¸§ï¼‰ä¹‹é—´çš„æœ€å°å’Œæœ€å¤§è·ç¦»ã€‚è¯¥å·¥å…·å°†æ ¹æ®éœ€è¦å°†ä¸€äº›å…³é”®å¸§æ’å…¥åˆ°è¾“å‡ºåŠ¨ç”»ä¸­ï¼Œä»¥ä¾¿æ»¡è¶³æ­¤æ¡ä»¶ã€‚</span><br><span class="line">  -f &lt;int&gt; ............... filter strength (0=off..100)</span><br><span class="line">  -metadata &lt;string&gt; ..... comma separated list of metadata to copy from the input to the output <span class="keyword">if</span> present Valid values: all, none, icc, xmp (default)</span><br><span class="line">  -loop_compatibility .... æŒ‡å®šåŠ¨ç”»åº”å¾ªç¯çš„æ¬¡æ•°ï¼Œä½¿ç”¨0æ„å‘³ç€â€œæ— é™æœŸå¾ªç¯â€</span><br><span class="line">  -mt .................... use multi-threading <span class="keyword">if</span> available</span><br><span class="line">  -version ............... <span class="built_in">print</span> version number and <span class="built_in">exit</span></span><br><span class="line">  -v ..................... verbose</span><br><span class="line">  -quiet ................. don<span class="string">'t print anything</span></span><br></pre></td></tr></table></figure></p>
<p><br/></p>
<p><strong>ç®€å•å®ä¾‹:</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># gif2webp - converts a GIF image to a WebP image</span></span><br><span class="line">gif2webp picture.gif -o picture.webp</span><br><span class="line">gif2webp -q 70 picture.gif -o picture.webp</span><br><span class="line">gif2webp -lossy -m 3 picture.gif -o picture_lossy.webp</span><br><span class="line">gif2webp -lossy -f 50 picture.gif -o picture.webp</span><br><span class="line">gif2webp -min_size -q 30 -o picture.webp -- ---picture.gif</span><br><span class="line">cat picture.gif | gif2webp -o - -- - &gt; output.webp</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h3 id="img2webp-å‘½ä»¤-ä»ä¸€ç³»åˆ—è¾“å…¥å›¾åƒåˆ›å»ºåŠ¨ç”»WebPæ–‡ä»¶ã€‚"><a href="#img2webp-å‘½ä»¤-ä»ä¸€ç³»åˆ—è¾“å…¥å›¾åƒåˆ›å»ºåŠ¨ç”»WebPæ–‡ä»¶ã€‚" class="headerlink" title="img2webp å‘½ä»¤ - ä»ä¸€ç³»åˆ—è¾“å…¥å›¾åƒåˆ›å»ºåŠ¨ç”»WebPæ–‡ä»¶ã€‚"></a>img2webp å‘½ä»¤ - ä»ä¸€ç³»åˆ—è¾“å…¥å›¾åƒåˆ›å»ºåŠ¨ç”»WebPæ–‡ä»¶ã€‚</h3><p><strong>è¯­æ³•å‚æ•°</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Usage:</span></span><br><span class="line">  img2webp [file_options] [[frame_options] frame_file]...</span><br><span class="line"></span><br><span class="line"><span class="comment"># å‹ç¼©é€‰é¡¹</span></span><br><span class="line">-o string ï¼šæŒ‡å®šè¾“å‡º WebP æ–‡ä»¶çš„åç§°ã€‚</span><br><span class="line">-min_size ï¼š å¯¹å›¾åƒè¿›è¡Œç¼–ç ä»¥å®ç°æœ€å°å°ºå¯¸</span><br><span class="line">-kmin int</span><br><span class="line">-kmax int ï¼šæŒ‡å®šè¾“å‡ºåŠ¨ç”»ä¸­è¿ç»­å…³é”®å¸§ï¼ˆå¯ç‹¬ç«‹è§£ç å¸§ï¼‰ä¹‹é—´çš„æœ€å°å’Œæœ€å¤§è·ç¦»ã€‚</span><br><span class="line">-mixedï¼šæ··åˆå‹ç¼©æ¨¡å¼ï¼šé€šè¿‡å¯å‘å¼é€‰æ‹©æ¯å¸§çš„æœ‰æŸæˆ–æ— æŸå‹ç¼©æ¥ä¼˜åŒ–å›¾åƒçš„å‹ç¼©ã€‚</span><br><span class="line">-loop int ï¼šæŒ‡å®šåŠ¨ç”»åº”å¾ªç¯çš„æ¬¡æ•°ï¼Œä½¿ç”¨0æ„å‘³ç€â€œæ— é™æœŸå¾ªç¯â€ã€‚</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¸§é€‰é¡¹</span></span><br><span class="line">-d int ä»¥æ¯«ç§’ä¸ºå•ä½æŒ‡å®šå›¾åƒæŒç»­æ—¶é—´ã€‚</span><br><span class="line">-lossless, -lossy ä½¿ç”¨æ— æŸæˆ–æœ‰æŸå‹ç¼©æ¨¡å¼å‹ç¼©ä¸‹ä¸€ä¸ªå›¾åƒã€‚é»˜è®¤æ¨¡å¼ä¸ºæ— æŸã€‚</span><br><span class="line">-q <span class="built_in">float</span> æŒ‡å®šä»‹äº 0 å’Œ 100 ä¹‹é—´çš„å‹ç¼©å› å­ã€‚é»˜è®¤å€¼ä¸º 75ã€‚</span><br><span class="line">-m int æŒ‡å®šè¦ä½¿ç”¨çš„å‹ç¼©æ–¹æ³•ã€‚æ­¤å‚æ•°æ§åˆ¶ç¼–ç é€Ÿåº¦ä¸å‹ç¼©æ–‡ä»¶å¤§å°å’Œè´¨é‡ä¹‹é—´çš„æƒè¡¡ã€‚å¯èƒ½çš„å€¼èŒƒå›´ä¸º 0 åˆ° 6ã€‚é»˜è®¤å€¼ä¸º 4ã€‚</span><br></pre></td></tr></table></figure></p>
<p>TIPS: å…¶æ”¯æŒçš„è¾“å…¥æ ¼å¼ä¸º <code>WebP, JPEG, PNG, PNM (PGM, PPM, PAM), TIFF</code>.</p>
<p><br/></p>
<p><strong>ç®€å•å®ä¾‹:</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.å°† in0.png ã€in1.jpgã€in2.tiffç»„åˆä¸º webp æ ¼å¼çš„åŠ¨æ€å›¾ç‰‡ã€‚</span></span><br><span class="line">img2webp -loop 2 in0.png -lossy in1.jpg -d 80 in2.tiff -o out.webp</span><br></pre></td></tr></table></figure></p>
<p><br/></p>
<h3 id="webpmux-å‘½ä»¤-ä»éåŠ¨ç”»WebPå›¾åƒä¸­åˆ›å»ºåŠ¨ç”»WebPæ–‡ä»¶"><a href="#webpmux-å‘½ä»¤-ä»éåŠ¨ç”»WebPå›¾åƒä¸­åˆ›å»ºåŠ¨ç”»WebPæ–‡ä»¶" class="headerlink" title="webpmux å‘½ä»¤ - ä»éåŠ¨ç”»WebPå›¾åƒä¸­åˆ›å»ºåŠ¨ç”»WebPæ–‡ä»¶"></a>webpmux å‘½ä»¤ - ä»éåŠ¨ç”»WebPå›¾åƒä¸­åˆ›å»ºåŠ¨ç”»WebPæ–‡ä»¶</h3><p>æè¿°: ä»éåŠ¨ç”»WebPå›¾åƒä¸­åˆ›å»ºåŠ¨ç”»WebPæ–‡ä»¶ï¼Œä»åŠ¨ç”»WebPå›¾ç‰‡ä¸­æå–å¸§ï¼Œä»¥åŠç®¡ç†XMP/EXIFå…ƒæ•°æ®å’ŒICCé…ç½®æ–‡ä»¶ã€‚</p>
<p><strong>è¯­æ³•å‚æ•°:</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Usage:</span></span><br><span class="line">webpmux -get GET_OPTIONS INPUT -o OUTPUT</span><br><span class="line">webpmux -<span class="built_in">set</span> SET_OPTIONS INPUT -o OUTPUT</span><br><span class="line">webpmux -strip STRIP_OPTIONS INPUT -o OUTPUT</span><br><span class="line">webpmux -frame FRAME_OPTIONS [ -frame ... ] [ -loop LOOP_COUNT ] [ -bgcolor BACKGROUND_COLOR ] -o OUTPUT</span><br><span class="line">webpmux -duration DURATION OPTIONS [ -duration ... ] INPUT -o OUTPUT</span><br><span class="line">webpmux -info INPUT</span><br><span class="line"></span><br><span class="line"><span class="comment"># GET_OPTIONS (-get):</span></span><br><span class="line">  icc    Get ICC profile.</span><br><span class="line">  exif   Get EXIF metadata.</span><br><span class="line">  xmp    Get XMP metadata.</span><br><span class="line">  frame n  Get nth frame from an animated image. (n = 0 has a special meaning: last frame).</span><br><span class="line"></span><br><span class="line"><span class="comment"># SET_OPTIONS (-set):</span></span><br><span class="line">  loop loop_count : Set loop count on an animated file.</span><br><span class="line">    <span class="comment"># Where: 'loop_count' must be in range [0, 65535].</span></span><br><span class="line">  bgcolor A,R,G,B : Set the background color of the canvas on an animated file.</span><br><span class="line">    <span class="comment"># where:  'A',  'R', 'G' and 'B' are integers in the range 0 to 255 specifying the Alpha, Red, Green and Blue component values respectively.</span></span><br><span class="line">  icc file.icc : Set ICC profile.</span><br><span class="line">    <span class="comment"># Where: 'file.icc' contains the ICC profile to be set.</span></span><br><span class="line">  exif file.exif : Set EXIF metadata.</span><br><span class="line">    <span class="comment"># Where: 'file.exif' contains the EXIF metadata to be set.</span></span><br><span class="line">  xmp file.xmp : Set XMP metadata.</span><br><span class="line">    <span class="comment"># Where: 'file.xmp' contains the XMP metadata to be set.</span></span><br></pre></td></tr></table></figure></p>
<p><strong>ç¤ºä¾‹æ¼”ç¤º:</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">webpmux -get exif test.webp -o test.webp.txt</span><br><span class="line">webpmux -get frame 0 test.webp -o test.webp.txt</span><br></pre></td></tr></table></figure></p>
<p><br/></p>
<h3 id="webpinfo-å‘½ä»¤-æ‰“å°å‡ºWebPæ–‡ä»¶çš„å—çº§ç»“æ„ä»¥åŠåŸºæœ¬çš„å®Œæ•´æ€§æ£€æŸ¥ã€‚"><a href="#webpinfo-å‘½ä»¤-æ‰“å°å‡ºWebPæ–‡ä»¶çš„å—çº§ç»“æ„ä»¥åŠåŸºæœ¬çš„å®Œæ•´æ€§æ£€æŸ¥ã€‚" class="headerlink" title="webpinfo å‘½ä»¤ - æ‰“å°å‡ºWebPæ–‡ä»¶çš„å—çº§ç»“æ„ä»¥åŠåŸºæœ¬çš„å®Œæ•´æ€§æ£€æŸ¥ã€‚"></a>webpinfo å‘½ä»¤ - æ‰“å°å‡ºWebPæ–‡ä»¶çš„å—çº§ç»“æ„ä»¥åŠåŸºæœ¬çš„å®Œæ•´æ€§æ£€æŸ¥ã€‚</h3><p><strong>è¯­æ³•å‚æ•°:</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Usage: webpinfo [options] in_files</span><br><span class="line">Options:</span><br><span class="line">  -version ........... Print version number and <span class="built_in">exit</span>.</span><br><span class="line">  -quiet ............. Do not show chunk parsing information.</span><br><span class="line">  -diag .............. Show parsing error diagnosis.(æ˜¾ç¤ºåˆ†æé”™è¯¯è¯Šæ–­)</span><br><span class="line">  -summary ........... Show chunk stats summary.(æ˜¾ç¤ºå—ç»Ÿè®¡ä¿¡æ¯æ‘˜è¦)</span><br><span class="line">  -bitstream_info .... Parse bitstream header.(è§£æä½æµå¤´)</span><br></pre></td></tr></table></figure></p>
<p><strong>ä½¿ç”¨æ¡ˆä¾‹:</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.æ˜¾ç¤ºæŒ‡å®šwebpæ‘˜è¦ä¿¡æ¯</span></span><br><span class="line">$ webpinfo -diag -summary wechat-search.webp</span><br><span class="line">  File: wechat-search.webp</span><br><span class="line">  RIFF HEADER:</span><br><span class="line">    File size:  11298</span><br><span class="line">  Chunk VP8  at offset     12, length  11286</span><br><span class="line">    Width: 438</span><br><span class="line">    Height: 200</span><br><span class="line">    Alpha: 0</span><br><span class="line">    Animation: 0</span><br><span class="line">    Format: Lossy (1)</span><br><span class="line">  Summary:</span><br><span class="line">  Number of frames: 1</span><br><span class="line">  Chunk <span class="built_in">type</span>  :  VP8 VP8L VP8X ALPH ANIM ANMF(VP8 /VP8L/ALPH) ICCP EXIF  XMP</span><br><span class="line">  Chunk counts:    1    0    0    0    0    0    0    0    0     0    0    0</span><br><span class="line">  No error detected.</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.è§£ææŒ‡å®šwebpæ–‡ä»¶çš„æ¯”ç‰¹æµå¤´</span></span><br><span class="line">$ webpinfo -bitstream_info input_file_1.webp input_file_2.webp</span><br><span class="line">File: input_file_1.webp</span><br><span class="line">RIFF HEADER:</span><br><span class="line">  File size:  11076</span><br><span class="line">Chunk VP8  at offset     12, length  11064</span><br><span class="line">  Width: 493</span><br><span class="line">  Height: 424</span><br><span class="line">  Alpha: 0</span><br><span class="line">  Animation: 0</span><br><span class="line">  Format: Lossy (1)</span><br><span class="line">  Parsing lossy bitstream...</span><br><span class="line">  Key frame:        Yes</span><br><span class="line">  Profile:          0</span><br><span class="line">  Display:          Yes</span><br><span class="line">  Part. 0 length:   1619</span><br><span class="line">  Width:            493</span><br><span class="line">  X scale:          0</span><br><span class="line">  Height:           424</span><br><span class="line">  Y scale:          0</span><br><span class="line">  Color space:      0</span><br><span class="line">  Clamp <span class="built_in">type</span>:       0</span><br><span class="line">  Use segment:      1</span><br><span class="line">  Update map:       1</span><br><span class="line">  Update data:      1</span><br><span class="line">  Absolute delta:   1</span><br><span class="line">  Quantizer:        27 27 23 17</span><br><span class="line">  Filter strength:  8 6 5 2</span><br><span class="line">  Prob segment:     35 55 40</span><br><span class="line">  Simple filter:    0</span><br><span class="line">  Level:            8</span><br><span class="line">  Sharpness:        0</span><br><span class="line">  Use lf delta:     0</span><br><span class="line">  Total partitions: 1</span><br><span class="line">  Base Q:           27</span><br><span class="line">  DQ Y1 DC:         0</span><br><span class="line">  DQ Y2 DC:         0</span><br><span class="line">  DQ Y2 AC:         0</span><br><span class="line">  DQ UV DC:         -2</span><br><span class="line">  DQ UV AC:         -3</span><br><span class="line">File: input_file_2.webp</span><br><span class="line">.....</span><br></pre></td></tr></table></figure>
<p><br/></p>
<h3 id="vwebp-å‘½ä»¤-è§£å‹ç¼©WebPæ–‡ä»¶å¹¶å°†å…¶æ˜¾ç¤ºåœ¨çª—å£ä¸­"><a href="#vwebp-å‘½ä»¤-è§£å‹ç¼©WebPæ–‡ä»¶å¹¶å°†å…¶æ˜¾ç¤ºåœ¨çª—å£ä¸­" class="headerlink" title="vwebp å‘½ä»¤ - è§£å‹ç¼©WebPæ–‡ä»¶å¹¶å°†å…¶æ˜¾ç¤ºåœ¨çª—å£ä¸­"></a>vwebp å‘½ä»¤ - è§£å‹ç¼©WebPæ–‡ä»¶å¹¶å°†å…¶æ˜¾ç¤ºåœ¨çª—å£ä¸­</h3><p><strong>è¯­æ³•å‚æ•°:</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">vwebp [options] input_file.webp</span><br><span class="line"><span class="comment"># Options are:</span></span><br><span class="line">  -version ..... <span class="built_in">print</span> version number and <span class="built_in">exit</span></span><br><span class="line">  -noicc ....... don<span class="string">'t use the icc profile if present</span></span><br><span class="line"><span class="string">  -nofancy ..... don'</span>t use the fancy YUV420 upscaler</span><br><span class="line">  -nofilter .... <span class="built_in">disable</span> <span class="keyword">in</span>-loop filtering</span><br><span class="line">  -dither &lt;int&gt;  dithering strength (0..100), default=50</span><br><span class="line">  -noalphadither <span class="built_in">disable</span> alpha plane dithering</span><br><span class="line">  -usebgcolor .. display background color</span><br><span class="line">  -mt .......... use multi-threading</span><br><span class="line">  -info ........ <span class="built_in">print</span> info</span><br><span class="line">  -h ........... this <span class="built_in">help</span> message</span><br><span class="line"></span><br><span class="line"><span class="comment"># Keyboard shortcuts:</span></span><br><span class="line">  <span class="string">'c'</span> ................ toggle use of color profile</span><br><span class="line">  <span class="string">'b'</span> ................ toggle background color display</span><br><span class="line">  <span class="string">'i'</span> ................ overlay file information</span><br><span class="line">  <span class="string">'d'</span> ................ <span class="built_in">disable</span> blending &amp; disposal (debug)</span><br><span class="line">  <span class="string">'q'</span> / <span class="string">'Q'</span> / ESC .... quit</span><br></pre></td></tr></table></figure></p>
<p><strong>ä½¿ç”¨ç¤ºä¾‹:</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vwebp picture.webp</span><br><span class="line">vwebp picture.webp -mt -dither 0</span><br><span class="line">vwebp -- ---picture.webp</span><br></pre></td></tr></table></figure></p>
<hr>
<h2 id="0x03-ä¼ä¸šå®è·µ"><a href="#0x03-ä¼ä¸šå®è·µ" class="headerlink" title="0x03 ä¼ä¸šå®è·µ"></a>0x03 ä¼ä¸šå®è·µ</h2><h3 id="1-è¯·æ±‚è®¿é—®NginxæœåŠ¡å™¨ä¸­æ‰¿è½½çš„ä¸åŒåˆ†è¾¨ç‡WebPæ ¼å¼å›¾ç‰‡ã€‚"><a href="#1-è¯·æ±‚è®¿é—®NginxæœåŠ¡å™¨ä¸­æ‰¿è½½çš„ä¸åŒåˆ†è¾¨ç‡WebPæ ¼å¼å›¾ç‰‡ã€‚" class="headerlink" title="1.è¯·æ±‚è®¿é—®NginxæœåŠ¡å™¨ä¸­æ‰¿è½½çš„ä¸åŒåˆ†è¾¨ç‡WebPæ ¼å¼å›¾ç‰‡ã€‚"></a>1.è¯·æ±‚è®¿é—®NginxæœåŠ¡å™¨ä¸­æ‰¿è½½çš„ä¸åŒåˆ†è¾¨ç‡WebPæ ¼å¼å›¾ç‰‡ã€‚</h3><p>æè¿°: åœ¨è¯·æ±‚ä¸­æŒ‡å®šå›¾ç‰‡åˆ†è¾¨ç‡å¤§å°ï¼Œå¦‚ä½•è®©Nginxè¯†åˆ«æŒ‡å®šçš„åˆ†è¾¨ç‡å€¼å¹¶è¿”å›æŒ‡å®šåˆ†è¾¨ç‡å¤§å°çš„webpå›¾å½¢èµ„æºã€‚</p>
<blockquote>
<p>ç­”æ¡ˆå½“ç„¶å¯ä»¥ä»ä¸‹è¿°æ–‡ç« å®è·µä¸­æ‰¾åˆ°ç­”æ¡ˆï¼Œæ­¤å‰æˆ‘ä»¬éœ€è¦ç¡®å®šæºä»£ç ç¼–è¯‘nginxå‚æ•°ä¸­æ˜¯å¦å¯ç”¨äº†<code>--with-http_image_filter_module</code>è¯¥æ¨¡å—ï¼Œå¦‚æœæ²¡æœ‰å¯åŠ¨åˆ™éœ€è¦é‡æ–°æ„å»ºNginxï¼Œå…·ä½“æ“ä½œå¦‚ä¸‹æ‰€ç¤ºã€‚<br><code>nginx -V</code> éªŒè¯è¯¥å…¶<code>configure arguments:</code>ä¸­æ˜¯å¦å­˜åœ¨<code>http_image_filter</code>æ¨¡å—ã€‚</p>
</blockquote>
<p>æ¸©é¦¨æç¤º: è¿›è¡Œ Nginx çš„æºä»£ç ç¼–è¯‘å®‰è£…æ­¥éª¤æµç¨‹å¯ä»¥å‚è€ƒæˆ‘å‰é¢æ­¤ç¯‡æ–‡ç« ã€ <a href="https://blog.weiyigeek.top/2022/7-2-676.html">https://blog.weiyigeek.top/2022/7-2-676.html</a> ã€‘ æˆ–è€…ã€ <a href="https://mp.weixin.qq.com/s/u-zb-BxG6VyaLY4EQLKlOQ" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/u-zb-BxG6VyaLY4EQLKlOQ</a> ã€‘ç›´è¾¾ã€‚</p>
<p>æ­¤å¤„æ¼”ç¤ºåœ¨å·²å®‰è£…Nginxç¯å¢ƒä¸‹ä½¿ç”¨<code>--with-http_image_filter_module</code>å‚æ•°ç”Ÿæˆæ¨¡å—åŠ¨æ€é“¾æ¥åº“ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ç›´æ¥ç¼–è¯‘è¿›nginxï¼Œä¸è¿‡ç¬”è€…è¿˜æ˜¯æ¨èå‰è€…ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">./configure --<span class="built_in">help</span> | grep <span class="string">"image_filter_module"</span></span><br><span class="line">--with-http_image_filter_module         <span class="comment"># enable ngx_http_image_filter_module</span></span><br><span class="line">--with-http_image_filter_module=dynamic <span class="comment"># enable dynamic ngx_http_image_filter_module</span></span><br></pre></td></tr></table></figure>
<p><br/></p>
<p><strong>å®è·µæµç¨‹:</strong></p>
<ul>
<li>Step 1.å®è·µé¡¹ç›®webå‡†å¤‡ï¼Œæ­¤å¤„é‡‡ç”¨æˆ‘çš„ä¸»é¡µä½œä¸ºå±•ç¤ºï¼Œé¦–å…ˆä»giteeä¸­æ‹‰å–weiyigeekä¸»é¡µé¡¹ç›®åˆ°æœ¬åœ°<code>/app/html/</code>ç›®å½•ä¸­.</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir /app/html/ &amp;&amp; <span class="built_in">cd</span> /app/html/</span><br><span class="line">git <span class="built_in">clone</span> --depth=1 https://gitee.com/WeiyiGeek/weiyigeek.git</span><br></pre></td></tr></table></figure>
<p><br/></p>
<ul>
<li>Step 2.è·å–å½“å‰Nginxé…ç½®ç¼–è¯‘å‚æ•°ï¼Œå¹¶æ·»åŠ <code>http_image_filter</code>æ¨¡å—ä¸ºåŠ¨æ€é“¾æ¥ã€‚</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è·å–å½“å‰ç¼–è¯‘å‚æ•°</span></span><br><span class="line">nginx -V </span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯ç”¨ http_image_filter æ¨¡å—å¹¶é‡æ–°é…ç½®å‚æ•°ï¼Œè¿›è¡Œç¼–è¯‘æ„å»º</span></span><br><span class="line"><span class="comment"># ./configure [ä¸Šè¿°è·å–çš„ç¼–è¯‘å‚æ•°] --with-http_image_filter_module=dynamic</span></span><br><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/src/nginx-1.22.0</span><br><span class="line">./configure --prefix=/usr/<span class="built_in">local</span>/nginx --user=nginx --group=nginx --with-pcre=../pcre-8.45 --with-zlib=../zlib-1.2.12 --with-openssl=../openssl-1.1.1q --sbin-path=/usr/sbin/nginx --conf-path=/usr/<span class="built_in">local</span>/nginx/nginx.conf --pid-path=/usr/<span class="built_in">local</span>/nginx/nginx.pid --error-log-path=/var/<span class="built_in">log</span>/nginx/error.log --http-log-path=/var/<span class="built_in">log</span>/nginx/access.log --lock-path=/var/run/nginx.lock --modules-path=/usr/<span class="built_in">local</span>/nginx/modules --http-client-body-temp-path=/var/cache/nginx/client_temp --http-proxy-temp-path=/var/cache/nginx/proxy_temp --http-fastcgi-temp-path=/var/cache/nginx/fastcgi_temp --http-uwsgi-temp-path=/var/cache/nginx/uwsgi_temp --http-scgi-temp-path=/var/cache/nginx/scgi_temp --with-threads --with-http_sub_module --with-http_v2_module --with-http_auth_request_module --with-http_realip_module --with-http_secure_link_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_ssl_module --with-http_slice_module --with-http_stub_status_module --with-http_dav_module --with-http_flv_module --with-http_mp4_module --with-stream --with-stream_realip_module --with-stream_ssl_module --with-stream_ssl_preread_module --with-stream_geoip_module --with-mail --with-mail_ssl_module --with-http_addition_module --with-http_random_index_module --with-compat --with-file-aio --with-cc-opt=<span class="string">'-Os -fomit-frame-pointer -g'</span> --with-ld-opt=-Wl,-rpath,/usr/<span class="built_in">local</span>/luajit/lib,--as-needed,-O1,--sort-common --add-module=/usr/<span class="built_in">local</span>/src/ngx_devel_kit-0.3.1 --add-module=/usr/<span class="built_in">local</span>/src/lua-nginx-module-0.10.21 --add-dynamic-module=/usr/<span class="built_in">local</span>/src/<span class="built_in">echo</span>-nginx-module-0.62 --add-dynamic-module=/usr/<span class="built_in">local</span>/src/ngx_http_geoip2_module-3.4 --with-http_image_filter_module=dynamic</span><br><span class="line">make</span><br></pre></td></tr></table></figure>
<p><br/></p>
<p>æ¸©é¦¨æç¤º: å½“ç¼–è¯‘ Nginx æ—¶æŠ¥<code>checking for LuaJIT 2.x ... not found, ./configure: error: unsupported LuaJIT version; ngx_http_lua_module requires LuaJIT 2.x.</code> é”™è¯¯æ—¶çš„è§£å†³åŠæ³•ã€‚</p>
<p>é—®é¢˜æè¿°: tell nginxâ€™s build system where to find LuaJIT 2.1<br>è§£å†³åŠæ³•:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸´æ—¶ç”Ÿæ•ˆ</span></span><br><span class="line"><span class="built_in">export</span> LUAJIT_LIB=/usr/<span class="built_in">local</span>/luajit/lib</span><br><span class="line"><span class="built_in">export</span> LUAJIT_INC=/usr/<span class="built_in">local</span>/luajit/include/luajit-2.1</span><br></pre></td></tr></table></figure></p>
<p><br/></p>
<p>æ¸©é¦¨æç¤º: å¦‚å‡ºç°GDåº“æ²¡æœ‰éƒ¨ç½²å³<code>./configure: error: the HTTP image filter module requires the GD library. You can either do not enable the module or install the libraries.</code>æç¤ºå¯ä»¥æŒ‰ç…§å¦‚ä¸‹æ–¹å¼è¿›è¡Œè§£å†³ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install -y libgd-dev</span><br></pre></td></tr></table></figure></p>
<p><br/></p>
<ul>
<li>Step 3.å½“æ‰§è¡Œmakeå‘½ä»¤åä½ ä¼šå‘ç°åœ¨objsç›®å½•ä¸­ç”Ÿæˆäº†<code>ngx_http_image_filter_module.so</code>ï¼Œæ­¤å¤„æˆ‘ä»¬éœ€è¦å°†ç”ŸæˆnginxäºŒè¿›åˆ¶æ–‡ä»¶å¤åˆ¶åˆ°/usr/sbinç›®å½•,å¹¶å°†åŠ¨æ€é“¾æ¥åº“æ”¾å…¥çš„modulesç›®å½•ä¸­ã€‚</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@weiyigeek:/usr/<span class="built_in">local</span>/src/nginx-1.22.0<span class="comment"># ls objs/</span></span><br><span class="line">root@weiyigeek:/usr/<span class="built_in">local</span>/src/nginx-1.22.0<span class="comment"># cp objs/nginx /usr/sbin/nginx</span></span><br><span class="line">root@weiyigeek:/usr/<span class="built_in">local</span>/src/nginx-1.22.0<span class="comment"># cp objs/ngx_http_image_filter_module.so /usr/local/nginx/modules/</span></span><br></pre></td></tr></table></figure>
<p><br/></p>
<ul>
<li>Step 4.åŠ è½½<code>ngx_http_image_filter_module</code>æ¨¡å—åˆ°nginxï¼Œå¹¶åœ¨demo.confé…ç½®ä¸€ä¸ªç®€å•ç¤ºä¾‹ã€‚<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">$ vim /usr/<span class="built_in">local</span>/nginx/nginx.conf</span><br><span class="line">...</span><br><span class="line"><span class="comment"># åŠ è½½åŠ¨æ€æ¨¡å—</span></span><br><span class="line">load_module modules/ngx_http_image_filter_module.so;</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">$ tee /usr/<span class="built_in">local</span>/nginx/conf.d/demo.conf &lt;&lt;<span class="string">'EOF'</span></span><br><span class="line">server &#123;</span><br><span class="line">  listen       80;</span><br><span class="line">  server_name  demo.weiyigeek.top;</span><br><span class="line">  charset utf-8;</span><br><span class="line">  access_log /var/<span class="built_in">log</span>/nginx/demo-access.log main buffer=128k flush=1m;</span><br><span class="line"></span><br><span class="line">  location / &#123;</span><br><span class="line">    root /app/html/weiyigeek;</span><br><span class="line">    index  index.html index.htm;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">location ~* /img/(.+)_(\d+)x(\d+)\.(jpg|jpeg|gif|png|webp)$ &#123;</span><br><span class="line">    <span class="comment"># å¦‚æœå›¾å½¢ä¸å­˜åœ¨åˆ™æ˜¾ç¤ºæ ¹ç›®å½•ä¸‹çš„404.pngå›¾åƒã€‚ </span></span><br><span class="line">    try_files /<span class="variable">$1</span>.<span class="variable">$4</span>  /404.png;</span><br><span class="line">    <span class="built_in">set</span> <span class="variable">$width</span> <span class="variable">$2</span>;</span><br><span class="line">    <span class="built_in">set</span> <span class="variable">$height</span> <span class="variable">$3</span>;</span><br><span class="line">    image_filter resize <span class="variable">$width</span> <span class="variable">$height</span>;</span><br><span class="line">    image_filter_buffer 5M;</span><br><span class="line">    image_filter_interlace on;</span><br><span class="line">    image_filter_jpeg_quality 80;</span><br><span class="line">    expires 1d;</span><br><span class="line">    add_header <span class="string">'Access-Control-Allow-Origin'</span> <span class="string">'*'</span>;</span><br><span class="line">    add_header <span class="string">'Access-Control-Allow-Credentials'</span> <span class="string">'true'</span>;</span><br><span class="line">    add_header <span class="string">'Image-Filter'</span> <span class="string">"Name <span class="variable">$1</span>.<span class="variable">$4</span>,<span class="variable">$width</span> x <span class="variable">$height</span>"</span>;</span><br><span class="line">    <span class="built_in">alias</span> /app/html/weiyigeek/img;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">[^libwebp]: WebpAPIå¸®åŠ©æ–‡æ¡£ https://developers.google.com/speed/webp/docs/api </span><br><span class="line">[^cwebp]: cwebpå¸®åŠ©æ–‡æ¡£ https://developers.google.com/speed/webp/docs/cwebp</span><br><span class="line">[^dwebp]: dwebpå¸®åŠ©æ–‡æ¡£ https://developers.google.com/speed/webp/docs/dwebp</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>æ¸©é¦¨æç¤º: <code>root æŒ‡ä»¤</code>ä¸<code>alias æŒ‡ä»¤</code>çš„åŒºåˆ«ï¼Œroot å¯ä»¥è®©è®¿é—® /images/ è·¯å¾„æ—¶ï¼Œè®¿é—®åˆ° /User/WeiyiGeek/Desktop/imagesï¼Œè‹¥æ˜¯å°† root æ›¿æ¢ä¸º aliasï¼Œåˆ™è®¿é—®çš„æ˜¯ /User/WeiyiGeek/Desktop/ï¼›å…¶ä¸­ /User/WeiyiGeek/Desktop/ æ˜¯æœ¬æœºä¸­çš„ç»å¯¹è·¯å¾„ã€‚</p>
<p>æ¸©é¦¨æç¤º: ä¸Šè¿°<code>image_filter</code>é…ç½®ç®€å•è§£æä½äºlocationä¸Šä¸‹æ–‡ä¸­ï¼Œè¯¥æ¨¡å— ï¼ˆ0.7.54+ï¼‰ æ˜¯ä¸€ä¸ªè¿‡æ»¤å™¨ï¼Œç”¨äºè½¬æ¢ JPEGã€GIFã€PNG å’Œ WebP æ ¼å¼çš„å›¾åƒï¼Œå…¶æ¨¡å—  <a href="https://nginx.org/en/docs/http/ngx_http_image_filter_module.html" target="_blank" rel="noopener">Module ngx_http_image_filter_module æ–‡æ¡£å‚è€ƒ(nginx.org)</a>.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯ç”¨å›¾å½¢è¿‡æ»¤å™¨</span></span><br><span class="line">image_filter off;</span><br><span class="line"><span class="comment"># ç¡®ä¿å“åº”æ˜¯ JPEGã€GIFã€PNG æˆ– WebP æ ¼å¼çš„å›¾åƒã€‚å¦åˆ™å°†è¿”å› 415ï¼ˆä¸æ”¯æŒçš„åª’ä½“ç±»å‹ï¼‰é”™è¯¯ã€‚</span></span><br><span class="line">image_filter <span class="built_in">test</span>;</span><br><span class="line"><span class="comment"># ä»¥ JSON æ ¼å¼è¾“å‡ºæœ‰å…³å›¾åƒçš„ä¿¡æ¯ï¼Œå¦‚æœé”™è¯¯åˆ™è¾“å‡ºä¸º &#123;&#125;</span></span><br><span class="line">image_filter size;</span><br><span class="line"><span class="comment"># å°†å›¾åƒé€†æ—¶é’ˆæ—‹è½¬æŒ‡å®šçš„åº¦æ•°; å¯ä¸ºå˜é‡</span></span><br><span class="line">image_filter rotate 90 | 180 | 270;</span><br><span class="line"><span class="comment"># æŒ‰æ¯”ä¾‹å°†å›¾åƒå‡å°åˆ°æŒ‡å®šå¤§å°</span></span><br><span class="line">image_filter resize width height;</span><br><span class="line"><span class="comment"># æŒ‰æ¯”ä¾‹å°†å›¾åƒç¼©å°åˆ°è¾ƒå¤§çš„ä¾§å°ºå¯¸ï¼Œå¹¶åœ¨å¦ä¸€ä¾§è£å‰ªæ— å…³çš„è¾¹ç¼˜ã€‚</span></span><br><span class="line">image_filter crop width height;</span><br><span class="line"><span class="comment"># è®¾ç½®å›¾ç‰‡ç¼“å†²åŒºçš„æœ€å¤§å¤§å°ï¼Œå¤§å°è¶…è¿‡è®¾å®šå€¼ï¼ŒæœåŠ¡å™¨å°†è¿”å›é”™è¯¯415ã€‚</span></span><br><span class="line">image_filter_buffer size;</span><br><span class="line"><span class="comment"># å¦‚æœå¯ç”¨æœ€ç»ˆå›¾åƒå°†éš”è¡Œæ‰«æå¯¹äºJPEGï¼Œæœ€ç»ˆå›¾åƒå°†é‡‡ç”¨â€œæ¸è¿›å¼JPEGâ€æ ¼å¼ã€‚</span></span><br><span class="line">image_filter_interlace on | off;</span><br><span class="line"><span class="comment"># jpeg ã€webp æ ¼å¼å›¾å½¢è´¨é‡è®¾ç½®ï¼ˆ1~100ï¼‰ï¼Œè¾ƒå°çš„å€¼é€šå¸¸æ„å‘³ç€è¾ƒä½çš„å›¾åƒè´¨é‡å’Œè¾ƒå°‘çš„æ•°æ®ä¼ è¾“ã€‚æœ€å¤§å»ºè®®å€¼ä¸º95ã€‚å‚æ•°å€¼å¯ä»¥åŒ…å«å˜é‡</span></span><br><span class="line">image_filter_jpeg_quality quality;</span><br><span class="line">image_filter_webp_quality quality;</span><br><span class="line"><span class="comment"># æé«˜æœ€ç»ˆå›¾åƒçš„æ¸…æ™°åº¦ï¼Œé”åº¦ç™¾åˆ†æ¯”å¯ä»¥è¶…è¿‡100ã€‚é›¶å€¼ç¦ç”¨é”åŒ–</span></span><br><span class="line">image_filter_sharpen percent;</span><br><span class="line"><span class="comment"># å®šä¹‰åœ¨è½¬æ¢ GIF å›¾åƒæˆ–å…·æœ‰è°ƒè‰²æ¿æŒ‡å®šé¢œè‰²çš„ PNG å›¾åƒæ—¶æ˜¯å¦åº”ä¿ç•™é€æ˜åº¦ã€‚é€æ˜åº¦çš„æŸå¤±ä¼šå¯¼è‡´å›¾åƒè´¨é‡æ›´å¥½ã€‚PNG ä¸­çš„ Alpha é€šé“é€æ˜åº¦å§‹ç»ˆä¿ç•™ã€‚</span></span><br><span class="line">image_filter_transparency on|off;</span><br></pre></td></tr></table></figure>
<p>æ¸©é¦¨æç¤ºï¼š æ­¤æ¨¡å—éœ€è¦ä¾èµ–ä¸<a href="http://libgd.org" target="_blank" rel="noopener">libgd</a> åº“ï¼Œå»ºè®®ä½¿ç”¨æœ€æ–°çš„å¯ç”¨ç‰ˆæœ¬çš„åº“ã€‚</p>
<p><br/></p>
<ul>
<li>Step 5.é…ç½®æ£€æŸ¥ä¸é‡è½½NginxæœåŠ¡è¿›ç¨‹ <code>nginx -t &amp;&amp; nginx -s reload</code>, ç„¶åé€šè¿‡æµè§ˆå™¨åˆ†åˆ«è®¿é—®éªŒè¯ <code>http://demo.weiyigeek.top/img/i-banner.png</code> ä¸ <code>http://demo.weiyigeek.top/img/i-banner_1080x520.png</code> ï¼ŒæŸ¥çœ‹å…¶å›¾ç‰‡å°ºå¯¸æ˜¯å¦æœ‰å˜åŒ–ï¼Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ls /app/html/weiyigeek/img/</span><br><span class="line">alipay.jpg  bg.jpg  bg.png  i-banner.png  wechat-gzh.jpg  wechat-scan.png  wechat-search.png  wechat-search-white.png  weiyigeek.jpg  weiyigeek.png</span><br></pre></td></tr></table></figure>
<figure class="image-box">
                <a rel=8.Nginxå®è·µä¹‹è¯·æ±‚å›¾ç‰‡è½¬æ¢ä¸ºGoogleæ¨å‡ºçš„webpæ ¼å¼è½¬æ¢å·¥å…·å®è·µ href="https://img.weiyigeek.top/2022/5/20220808230050.png" target="_blank" title="WeiyiGeek.image_filter resize png" data-fancybox="images"><img src="https://img.weiyigeek.top/2022/5/20220808230050.png" alt="WeiyiGeek.image_filter resize png" title="" class=""></a>
                <p>WeiyiGeek.image_filter resize png</p>
            </figure>
<p><br/></p>
<ul>
<li>Step 6.åœ¨æ­¥éª¤äº”çš„å®è·µä¸­ä½ ä¼šå‘ç°è™½ç„¶åœ¨è¿›è¡Œå›¾ç‰‡è¿‡æ»¤å™¨æ—¶è®¾ç½®äº†å›¾åƒè´¨é‡ï¼Œä»åŸå›¾çš„1.3MBåˆ°ç°åœ¨çš„639KBï¼Œä½†æ˜¯æ˜¯å¦è¿˜æ˜¯æ„Ÿè§‰æ­¤å›¾ç‰‡ä½“ç§¯ç¨å¤§ï¼Œæ­¤æ—¶æˆ‘ä»¬ä¾¿å¯è¯·å‡ºæœ¬ç« ä¸»äººå…¬webpè½¬æ¢å·¥å…·cwebpï¼Œå°†pngå›¾ç‰‡å›¾ç‰‡è½¬æ¢ä¸ºwebpæ ¼å¼å›¾ç‰‡ã€‚</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$ cwebp -q 80 i-banner.png -o i-banner.webp</span><br><span class="line">Saving file <span class="string">'i-banner.webp'</span></span><br><span class="line">File:      i-banner.png</span><br><span class="line">Dimension: 1772 x 903</span><br><span class="line">Output:    61096 bytes Y-U-V-All-PSNR 45.57 49.64 49.89   46.57 dB</span><br><span class="line">           (0.31 bpp)</span><br><span class="line">block count:  intra4:       2308  (36.48%)</span><br><span class="line">              intra16:      4019  (63.52%)</span><br><span class="line">              skipped:      1469  (23.22%)</span><br><span class="line">bytes used:  header:            499  (0.8%)</span><br><span class="line">             mode-partition:  10154  (16.6%)</span><br><span class="line"> Residuals bytes  |segment 1|segment 2|segment 3|segment 4|  total</span><br><span class="line">    macroblocks:  |       1%|       4%|      10%|      85%|    6327</span><br><span class="line">      quantizer:  |      27 |      27 |      23 |      18 |</span><br><span class="line">   filter level:  |       8 |       5 |      25 |      21 |</span><br><span class="line"></span><br><span class="line">$ ls  -lah i-banner.*</span><br><span class="line">-rw-r--r-- 1 root root 1.3M Aug  8 15:00 i-banner.png</span><br><span class="line">-rw-r--r-- 1 root root  60K Aug  8 23:07 i-banner.webp</span><br></pre></td></tr></table></figure>
<p>åœ¨è®¾ç½®è´¨é‡ä¸º80åï¼Œè½¬æ¢åä½ ä¼šå‘ç°ä½“ç§¯ä»1.3Mä¸€ä¸‹å°±é™åˆ°äº†60kbï¼Œå¯ä»¥çœ‹åˆ°å…¶ä½“ç§¯æå¤§ä¼˜åŒ–äº†åœ¨äº’è”ç½‘ä¸Šä¼ æ’­é€Ÿåº¦ã€‚</p>
<p><br/></p>
<ul>
<li>Step 7.åŒæ ·å›¾ç‰‡è¿‡æ»¤å™¨ä¹Ÿå¯ä»¥å¤„ç†webpæ ¼å¼çš„å›¾å½¢æ–‡ä»¶ï¼Œè¿™ä¸€ç‚¹æ¨¡å—å®˜ç½‘å·²ç»è¯´æ˜ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨ä¸Šè¿°è½¬æ¢åçš„i-banner.webpå›¾å½¢è¿›è¡ŒéªŒè¯ï¼ŒåŒæ ·åˆ†åˆ«è®¿é—® <code>http://demo.weiyigeek.top/img/i-banner.webp</code> ä¸ <code>http://demo.weiyigeek.top/img/i-banner_1080x520.webp</code>, æŸ¥çœ‹å…¶å›¾ç‰‡å°ºå¯¸æ˜¯å¦æœ‰å˜åŒ–ï¼Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</li>
</ul>
<figure class="image-box">
                <a rel=8.Nginxå®è·µä¹‹è¯·æ±‚å›¾ç‰‡è½¬æ¢ä¸ºGoogleæ¨å‡ºçš„webpæ ¼å¼è½¬æ¢å·¥å…·å®è·µ href="https://img.weiyigeek.top/2022/5/20220808231417.png" target="_blank" title="WeiyiGeek.image_filter resize web" data-fancybox="images"><img src="https://img.weiyigeek.top/2022/5/20220808231417.png" alt="WeiyiGeek.image_filter resize web" title="" class=""></a>
                <p>WeiyiGeek.image_filter resize web</p>
            </figure>
<p>ä»ä¸Šå›¾ä¸­å¯ä»¥çœ‹å‡ºåŸå§‹çš„webpçš„å›¾å½¢å¤§å°çš„å°ºå¯¸ä¸º 1772x903 å¤§å°ä¸º 61kbï¼Œè€Œç»è¿‡å›¾ç‰‡è¿‡æ»¤å™¨åæŒ‰ç…§å…¶çºµæ¨ªæ¯”è®¾ç½®ä¸ºäº† 1021x520 å…¶å¤§å°ä¹Ÿé™ä¸º 24.9 kbã€‚</p>
<p><br/></p>

        </div>
        
        <!-- å¾®ä¿¡å…¬ä¼—å·å…³æ³¨/æ–‡ç« ç‰ˆæƒå¤åˆ¶ -->
        
        <div id="btw-mask" style="position: fixed; top: 0px; right: 0px; bottom: 0px; left: 0px; opacity: 0.7; z-index: 999; background: rgb(0, 0, 0); display:none"></div>
<div id="btw-modal" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 360px; text-align: center; font-size: 13px; background: rgb(255, 255, 255); border-radius: 10px; z-index: 9999; font-family: PingFangSC-Regular, sans-serif;display:none">
<span id="btw-modal-close-btn" style="position: absolute; top: 5px; right: 15px; line-height: 1.8; font-size: 15px; cursor: pointer; opacity: 0.2; z-index: 9999; color: rgb(0, 0, 0); background: none; border: none; outline: none;">X</span>
<p id="btw-modal-header" style="margin-top: 40px; line-height: 1.8; font-size: 13px; ">
<b style="color:#6190e8;">ä½ å¥½çœ‹å‹,æ¬¢è¿å…³æ³¨åšä¸»å¾®ä¿¡å…¬ä¼—å·å“Ÿ! â¤ <br> è¿™å°†æ˜¯æˆ‘æŒç»­æ›´æ–°æ–‡ç« çš„åŠ¨åŠ›æºæ³‰ï¼Œè°¢è°¢æ”¯æŒï¼(à¹‘â€²á´—â€µà¹‘) </b> <br> å¦‚ä¸æƒ³å…³æ³¨è¯·ç‚¹å‡»å³ä¸Šè§’çš„ã€Xã€‘å³å¯å…³é—­ç»§ç»­æµè§ˆæ–‡ç« .<br>  <b style="color:red;"> æ¸©é¦¨æç¤º: æœªè§£é”çš„ç”¨æˆ·ä¸èƒ½ç²˜è´´å¤åˆ¶æ–‡ç« å†…å®¹å“Ÿ!</b> <br>
<br>Method 1.Please visit <strong><a href="https://twitter.com/WeiyiGeek" target="_blank" rel="noopener" style="color: rgb(240, 65, 52);text-decoration:underline;">ã€My Twitterã€‘</a></strong>. There is an article verification code in the homepage.
<br>æ–¹å¼2.è¯·è®¿é—®æœ¬åšä¸»çš„Bç«™<strong><a href="https://space.bilibili.com/385802642" target="_blank" rel="noopener" style="color: rgb(240, 65, 52);text-decoration:underline;">ã€WeiyiGeekã€‘</a></strong>é¦–é¡µå…³æ³¨UPä¸»,<br>å°†è‡ªåŠ¨éšæœºè·å–è§£é”éªŒè¯ç ã€‚
<br>æ–¹å¼3.æ‰«ä¸€æ‰«ä¸‹æ–¹äºŒç»´ç ï¼Œå…³æ³¨æœ¬ç«™<strong>å®˜æ–¹å…¬ä¼—å·</strong><br>
å›å¤ï¼š<strong style="color: rgb(240, 65, 52);">éªŒè¯ç </strong>
å°†è·å–<strong style="color: rgb(240, 65, 52);">è§£é”(æœ‰æ•ˆæœŸ7å¤©)</strong>æœ¬ç«™æ‰€æœ‰æŠ€æœ¯æ–‡ç« å“Ÿ!</p>
<img src="/img/wechat-search.png" style="width: 300px; margin-top: 10px;">
<div id="btw-modal-input-code" style="margin-top: 20px; background: rgb(255, 255, 255);">
  <input id="btw-modal-input" type="number" minlength="4" maxlength="4" placeholder="è¯·è¾“å…¥éªŒè¯ç |Verification Code"
    style="width: 165px; height: 32px; line-height: 32px; padding: 0px 10px; margin: 0px 10px; font-size: 13px; text-rendering: auto; text-transform: none; cursor: text; outline: none; box-sizing: border-box; border: 1px solid rgb(221, 221, 221); -webkit-appearance: textfield; background-color: white; -webkit-rtl-ordering: logical;"/>
  <button id="btw-submit-btn" onclick="yzm_vertify()"
    style="padding: 0px 20px; height: 32px; font-size: 14px; outline: none; border: none; color: rgb(255, 255, 255); background: rgb(222, 104, 109); cursor: pointer;">æ
    äº¤</button> </div>
<p id="btw-footer" style="margin: 40px 0px 20px; color: rgb(153, 153, 153);">@WeiyiGeek - ä¸ºäº†èƒ½åˆ°è¿œæ–¹ï¼Œè„šä¸‹çš„æ¯ä¸€æ­¥éƒ½ä¸èƒ½å°‘</p>
</div>
           

        <!-- Google å¹¿å‘Š -->
        
<ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-9134434519967436" data-ad-slot="7905848205"></ins>
  

        
<hr/>
<div style="text-align: center;font-weight: bold;">
  <p> æ¬¢è¿å„ä½å¿—åŒé“åˆçš„æœ‹å‹ä¸€èµ·å­¦ä¹ äº¤æµï¼Œå¦‚æ–‡ç« æœ‰è¯¯è¯·åœ¨ä¸‹æ–¹ç•™ä¸‹æ‚¨å®è´µçš„ç»éªŒçŸ¥è¯†ï¼Œä¸ªäººé‚®ç®±åœ°å€<b style="color:#ff654e"><code>ã€master#weiyigeek.topã€‘</code></b>æˆ–è€…ä¸ªäººå…¬ä¼—å·<b style="color:#ff654e"><code>ã€WeiyiGeekã€‘</code></b>è”ç³»æˆ‘ã€‚ </p>
  <p> æ›´å¤šæ–‡ç« æ¥æºäº<b style="color:#03a9f4">ã€WeiyiGeek Blog - ä¸ºäº†èƒ½åˆ°è¿œæ–¹ï¼Œè„šä¸‹çš„æ¯ä¸€æ­¥éƒ½ä¸èƒ½å°‘ã€‘</b>, ä¸ªäººé¦–é¡µåœ°å€( <a style="color: #03a9f4;" href="https://weiyigeek.top" target="_blank"> https://weiyigeek.top </a> )</p>
<!-- 

  <ul style="font-weight: bolder;">
    <li>
      <p><span style="color: #03a9f4">echo&nbsp;&nbsp;"ã€ç‚¹ä¸ªèµã€‘ï¼ŒåŠ¨åŠ¨ä½ é‚£ç²—å£®çš„æ‹‡æŒ‡æˆ–è€…èŠŠèŠŠç‰æ‰‹ï¼Œäº²ï¼"</span></p>
    </li>
    <li>
      <p><span style="color: #ff9201">printf("%s",&nbsp;"ã€æŠ•ä¸ªå¸ã€‘ï¼Œä¸‡æ°´åƒå±±æ€»æ˜¯æƒ…ï¼ŒæŠ•ä¸ªç¡¬å¸è¡Œä¸è¡Œï¼Œäº²ï¼")</span></p>
    </li>
    <li>
      <p><span style="color: #02a2ff">fmt.Printf("ã€æ”¶ä¸ªè—ã€‘ï¼Œé˜…åå³ç„šä¸åƒç°ï¼Œäº²ï¼")&nbsp;&nbsp;</span></p>
    </li>
    <li>
      <p><span style="color:red">console.info("ã€è½¬ä¸ªå‘ã€‘ï¼Œè®©æ›´å¤šçš„å¿—åŒé“åˆçš„æœ‹å‹ä¸€èµ·å­¦ä¹ äº¤æµï¼Œäº²ï¼")</span></p>
    </li>
    <li>
      <p><span style="color: #ff654e">System.out.println("ã€å…³ä¸ªæ³¨ã€‘ï¼Œåç»­æµè§ˆæŸ¥çœ‹ä¸è¿·è·¯å“Ÿï¼Œäº²ï¼")</span></p>
    </li>
  </ul> -->
  <div>
    <img src="/img/share-wechat.jpg" class="img-responsive" alt="æ‰«æFollow(å…³æ³¨)WeiyiGeekå…¬ä¼—å·ä¸Visit(æµè§ˆ)æå®¢å…¨æ ˆä¿®ç‚¼å°ç¨‹åº" >
    <p>ä¸“æ ä¹¦å†™ä¸æ˜“ï¼Œå¦‚æœæ‚¨è§‰å¾—è¿™ä¸ªä¸“æ è¿˜ä¸é”™çš„ï¼Œè¯·ç»™è¿™ç¯‡ä¸“æ  <b style="color: red;">ã€ç‚¹ä¸ªèµã€æŠ•ä¸ªå¸ã€æ”¶ä¸ªè—ã€å…³ä¸ªæ³¨ã€è½¬ä¸ªå‘ã€èµä¸ªåŠ©ã€‘</b>ï¼Œè¿™å°†å¯¹æˆ‘çš„è‚¯å®šï¼Œæˆ‘å°†æŒç»­æ•´ç†å‘å¸ƒæ›´å¤šä¼˜è´¨åŸåˆ›æ–‡ç« ï¼ã€‚</p>
    <img src="/img/weiyigeek.jpg" class="img-responsive" alt="WeiyiGeek-banner">
  </div>
</div>
  <hr>
  

  <blockquote class="post-copyright">
    <div class="content">
      
        
<span class="post-time">
    æœ€åæ›´æ–°æ—¶é—´ï¼š<time datetime="2023-01-31T02:29:10.469Z" itemprop="dateUpdated">2023-01-31 10:29:10</time>
</span><br>


        <span>æ–‡ç« åŸå§‹è·¯å¾„ï¼š<a href="https://github.com/WeiyiGeek/blog/edit/master/source/_posts/ç³»ç»Ÿè¿ç»´/Application/Web/WebApp/Nginx/8.Nginxå®è·µä¹‹è¯·æ±‚å›¾ç‰‡è½¬æ¢ä¸ºGoogleæ¨å‡ºçš„webpæ ¼å¼è½¬æ¢å·¥å…·å®è·µ.md" target="_blank" rel="noopener noreferrer">_posts/ç³»ç»Ÿè¿ç»´/Application/Web/WebApp/Nginx/8.Nginxå®è·µä¹‹è¯·æ±‚å›¾ç‰‡è½¬æ¢ä¸ºGoogleæ¨å‡ºçš„webpæ ¼å¼è½¬æ¢å·¥å…·å®è·µ.md</a></span><br>
         <span class="copy-copyright">è½¬è½½æ³¨æ˜å‡ºå¤„ï¼ŒåŸæ–‡åœ°å€ï¼š<a href="/2022/7-3-677.html" target="_blank" rel="external">https://blog.weiyigeek.top/2022/7-3-677.html</a></span><br>æœ¬ç«™æ–‡ç« å†…å®¹éµå¾ª <a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">çŸ¥è¯†å…±äº« ç½²å - éå•†ä¸šæ€§ - ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…åè®®</a> 
    </div>
    <footer>
      <a href="https://blog.weiyigeek.top">
        <img src="/img/avatar.jpg" alt="WeiyiGeek">
        WeiyiGeek
      </a>
    </footer>
  </blockquote>


        
            <div class="page-reward">
  <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-rectangle waves-light">â˜•ï¸ è¯·ä½œè€…å–æ¯å’–å•¡!</a>
</div>
            
        
        <div class="post-footer">
            
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Nginx/" rel="tag">Nginx</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/webp/" rel="tag">webp</a></li></ul>

            <div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://blog.weiyigeek.top/2022/7-3-677.html&title=ã€Š8.Nginxå®è·µä¹‹è¯·æ±‚å›¾ç‰‡è½¬æ¢ä¸ºGoogleæ¨å‡ºçš„webpæ ¼å¼è½¬æ¢å·¥å…·å®è·µã€‹ â€” WeiyiGeek Blog&pic=https://blog.weiyigeek.top/img/avatar.jpg" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.weiyigeek.top/2022/7-3-677.html&title=ã€Š8.Nginxå®è·µä¹‹è¯·æ±‚å›¾ç‰‡è½¬æ¢ä¸ºGoogleæ¨å‡ºçš„webpæ ¼å¼è½¬æ¢å·¥å…·å®è·µã€‹ â€” WeiyiGeek Blog&source=æœ¬ç« ç›®å½•
[TOC]
0x00 å‰è¨€ç®€è¿°æè¿°: æœ€è¿‘å…¬å¸ä¸šåŠ¡ä¸­æœ‰è¿™ä¹ˆä¸€ä¸ªéœ€æ±‚å°±æ˜¯åœ¨ä¿è¯å›¾åƒçš„æ¸…æ™°åº¦çš„æƒ…å†µä¸‹, å‡å°‘å…¶ä½“ç§¯å¤§å°ä½¿å¾—å‡è½»å¤–éƒ¨è¯·æ±‚æµé‡å¸¦å®½å¯¹ç½‘å…³..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.weiyigeek.top/2022/7-3-677.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€Š8.Nginxå®è·µä¹‹è¯·æ±‚å›¾ç‰‡è½¬æ¢ä¸ºGoogleæ¨å‡ºçš„webpæ ¼å¼è½¬æ¢å·¥å…·å®è·µã€‹ â€” WeiyiGeek Blog&url=https://blog.weiyigeek.top/2022/7-3-677.html&via=https://blog.weiyigeek.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://blog.weiyigeek.top/2022/7-3-677.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>

        </div>
        
          <!-- è¯„è®ºç»„ä»¶ -->


<div id="gitalk-container"></div>
<script type="text/javascript" src="/js/plugins/gitalk.min.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/custom/gitalk.init.js?v=1.6.6"></script>
        
    </div>
    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="prev">
      <a href="/2022/7-3-678.html" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">9.Nginxå®è·µä¹‹ä½¿ç”¨MaxMindçš„GeoIP2å®ç°å¤„ç†ä¸åŒå›½å®¶æˆ–åŸå¸‚çš„è®¿é—®æœ€ä½³å®è·µæŒ‡å—</h4>
      </a>
    </div>
  

  
    <div class="next">
      <a href="/2022/7-2-676.html" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">7.Nginxå®è·µä¹‹ä½¿ç”¨Lua-nginxæ¨¡å—è„šæœ¬è¿æ¥Redisæ•°æ®åº“è¯»å–é™æ€èµ„æºå¹¶éšå¼å±•ç°</h4>
      </a>
    </div>
  
</nav>


    
    
        <aside class="post-widget">
            <nav class="post-toc-wrap" id="post-toc">
                <strong>ç›®å½•</strong>
                <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#0x00-å‰è¨€ç®€è¿°"><span class="post-toc-number">1.</span> <span class="post-toc-text">0x00 å‰è¨€ç®€è¿°</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#WebP-ä»‹ç»"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">WebP ä»‹ç»</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#0X01-éƒ¨ç½²å®‰è£…"><span class="post-toc-number">2.</span> <span class="post-toc-text">0X01 éƒ¨ç½²å®‰è£…</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#å®è·µç¯å¢ƒè¯´æ˜"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">å®è·µç¯å¢ƒè¯´æ˜</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#WebP-å·¥å…·åº“å®‰è£…"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">WebP å·¥å…·åº“å®‰è£…</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#äºŒè¿›åˆ¶åŒ…æ–¹å¼å®‰è£…"><span class="post-toc-number">2.2.1.</span> <span class="post-toc-text">äºŒè¿›åˆ¶åŒ…æ–¹å¼å®‰è£…</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#æºä»£ç ç¼–è¯‘æ–¹å¼å®‰è£…"><span class="post-toc-number">2.2.2.</span> <span class="post-toc-text">æºä»£ç ç¼–è¯‘æ–¹å¼å®‰è£…</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#0x02-å·¥å…·å‘½ä»¤æµ…æ"><span class="post-toc-number">3.</span> <span class="post-toc-text">0x02 å·¥å…·å‘½ä»¤æµ…æ</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#cwebp-å‘½ä»¤-è½¬æ¢-webp-å›¾ç‰‡æ ¼å¼"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">cwebp å‘½ä»¤ - è½¬æ¢ webp å›¾ç‰‡æ ¼å¼</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#dwebp-å‘½ä»¤-å°†webpæ ¼å¼è½¬æ¢ä¸ºpngæ ¼å¼-è§£ç "><span class="post-toc-number">3.2.</span> <span class="post-toc-text">dwebp å‘½ä»¤ - å°†webpæ ¼å¼è½¬æ¢ä¸ºpngæ ¼å¼(è§£ç )</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#gif2webp-å‘½ä»¤-å°†gifæ ¼å¼å›¾ç‰‡è½¬æ¢ä¸ºwebpæ ¼å¼"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">gif2webp å‘½ä»¤ - å°†gifæ ¼å¼å›¾ç‰‡è½¬æ¢ä¸ºwebpæ ¼å¼</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#img2webp-å‘½ä»¤-ä»ä¸€ç³»åˆ—è¾“å…¥å›¾åƒåˆ›å»ºåŠ¨ç”»WebPæ–‡ä»¶ã€‚"><span class="post-toc-number">3.4.</span> <span class="post-toc-text">img2webp å‘½ä»¤ - ä»ä¸€ç³»åˆ—è¾“å…¥å›¾åƒåˆ›å»ºåŠ¨ç”»WebPæ–‡ä»¶ã€‚</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#webpmux-å‘½ä»¤-ä»éåŠ¨ç”»WebPå›¾åƒä¸­åˆ›å»ºåŠ¨ç”»WebPæ–‡ä»¶"><span class="post-toc-number">3.5.</span> <span class="post-toc-text">webpmux å‘½ä»¤ - ä»éåŠ¨ç”»WebPå›¾åƒä¸­åˆ›å»ºåŠ¨ç”»WebPæ–‡ä»¶</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#webpinfo-å‘½ä»¤-æ‰“å°å‡ºWebPæ–‡ä»¶çš„å—çº§ç»“æ„ä»¥åŠåŸºæœ¬çš„å®Œæ•´æ€§æ£€æŸ¥ã€‚"><span class="post-toc-number">3.6.</span> <span class="post-toc-text">webpinfo å‘½ä»¤ - æ‰“å°å‡ºWebPæ–‡ä»¶çš„å—çº§ç»“æ„ä»¥åŠåŸºæœ¬çš„å®Œæ•´æ€§æ£€æŸ¥ã€‚</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#vwebp-å‘½ä»¤-è§£å‹ç¼©WebPæ–‡ä»¶å¹¶å°†å…¶æ˜¾ç¤ºåœ¨çª—å£ä¸­"><span class="post-toc-number">3.7.</span> <span class="post-toc-text">vwebp å‘½ä»¤ - è§£å‹ç¼©WebPæ–‡ä»¶å¹¶å°†å…¶æ˜¾ç¤ºåœ¨çª—å£ä¸­</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#0x03-ä¼ä¸šå®è·µ"><span class="post-toc-number">4.</span> <span class="post-toc-text">0x03 ä¼ä¸šå®è·µ</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-è¯·æ±‚è®¿é—®NginxæœåŠ¡å™¨ä¸­æ‰¿è½½çš„ä¸åŒåˆ†è¾¨ç‡WebPæ ¼å¼å›¾ç‰‡ã€‚"><span class="post-toc-number">4.1.</span> <span class="post-toc-text">1.è¯·æ±‚è®¿é—®NginxæœåŠ¡å™¨ä¸­æ‰¿è½½çš„ä¸åŒåˆ†è¾¨ç‡WebPæ ¼å¼å›¾ç‰‡ã€‚</span></a></li></ol></li></ol>
            </nav>
            <div class="toc-bar"><div>
        </aside>
    
    <!-- 
  <div id="post-wechat" class="post-wechat" style="position:fixed;top: 360px;bottom: 500px;right: 3%;width: 190px;text-align: center; z-index: 9999">
    <p><b>å…³æ³¨ã€å…¨æ ˆå·¥ç¨‹å¸ˆä¿®ç‚¼æŒ‡å—ã€‘</b></p>
    <img src="/img/wechat-gzh.jpg" class="img-responsive" alt="weiyigeek">
    <p><b>æ¬¢è¿æ·»åŠ ã€ä½œè€…ã€‘å¾®ä¿¡</b></p>
    <img src="/img/wehat.jpg" class="img-responsive" alt="weiyigeek">
  </div>
 -->

    <!-- æ”¯ä»˜å®å¾®ä¿¡æ–‡ç« èµèµ -->
    
      <div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        å¦‚æœæ­¤ç¯‡æ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œå°±è¯·ä½œè€…å–æ¯ Coffee â˜•ï¸â˜•ï¸!
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardwechat" src="/img/reward-wechat.jpg" height="250" height="250" alt="å¾®ä¿¡æ‰“èµäºŒç»´ç ">
            <img id="rewardalipay" src="/img/reward-alipay.png" height="250" height="250" alt="æ”¯ä»˜å®æ‰“èµäºŒç»´ç ">
        </div>
        
        <label class="reward-toggle">
            <!-- <input id="rewardToggle" type="checkbox" class="reward-toggle-check" data-wechat="/img/reward-wechat.jpg" data-alipay="/img/reward-alipay.png"> -->
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">å¾®ä¿¡</span>
                <span class="reward-toggle-item alipay">æ”¯ä»˜å®</span>
            </div>
        </label>
        
    </div>
</div>

      
</article>
</div>

    </main>
    <footer class="footer ">
    
    <div class="top">
        
            <p>
    <span>Linksï¼š</span>
    
    <span class="blogroll-item">
        <a href="https://weiyigeek.top" target="_blank">https://weiyigeek.top</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.weiyigeek.top" target="_blank">https://blog.weiyigeek.top</a>
    </span>
    
    <span class="blogroll-item">
        <a href="/img/share-wechat.jpg" target="_blank">å…¬ä¼—è´¦å·</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://space.bilibili.com/385802642/article" target="_blank">å“”å“©å“”å“©ä¸“æ </a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://github.com/weiyigeek" target="_blank">åšä¸»Github</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://gitee.com/WeiyiGeek" target="_blank">åšä¸»Gitee</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.zhihu.com/people/weiyiSec" target="_blank">çŸ¥ä¹</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.cnblogs.com/WeiyiGeek" target="_blank">åšå®¢å›­</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://my.oschina.net/weiyigeek" target="_blank">OSCHINA</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.toutiao.com/c/user/token/MS4wLjABAAAAqcPSoMqfctaEqJpGSF775eeCjWkrop4AOyLITdMx-L78F5iXzfQcSRM5sY4dq3wR" target="_blank">ä»Šæ—¥å¤´æ¡</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.csdn.net/u013072756?type=lately" target="_blank">CSDN</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.jianshu.com/u/5199a1104739" target="_blank">ç®€ä¹¦</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://cloud.tencent.com/developer/user/1389665/articles" target="_blank">è…¾è®¯äº‘ç¤¾åŒº</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://cuttlefish.baidu.com/shop/75c5dbd8d15abe23482f4d40" target="_blank">ç™¾åº¦æ–‡åº“</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://author.baidu.com/home?from=blog&app_id=1726736601523415" target="_blank">ITæå®¢çŸ¥è¯†åˆ†äº«</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.51cto.com/weiyigeek" target="_blank">51CTOåšå®¢</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://juejin.cn/user/122767337595934" target="_blank">æ˜é‡‘</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://weibo.com/a/hot/7622022703618049_1.html" target="_blank">å¾®åšæ–‡ç« </a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.xiaohongshu.com/user/profile/627c98bb000000001000e7ba" target="_blank">å°çº¢ä¹¦</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://segmentfault.com/u/weiyigeek" target="_blank">Segmentfault</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.modb.pro/u/506690" target="_blank">å¢¨å¤©è½®</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.douyin.com/user/MS4wLjABAAAAMSBdMja6XLsdmzafb0RNbFeBemIOk38K1PaOClZeI1Q" target="_blank">æŠ–éŸ³ä¸»é¡µ</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.kuaishou.com/profile/3xfbrsrhd2i69x9" target="_blank">å¿«æ‰‹ä¸»é¡µ</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.ixigua.com/home/3984243135350727" target="_blank">è¥¿ç“œè§†é¢‘</a>
    </span>
    
</p>

        
    </div>
    
    <div class="bottom">
      <p>
        <span>WeiyiGeek &copy; 2018 - 2023 <a href="https://weiyigeek.top" target="_blank" rel="noopener">weiyigeek.top</a> All rights reserved.å”¯ä¸€æå®¢ITçŸ¥è¯†åˆ†äº« ç‰ˆæƒæ‰€æœ‰ </span>
        
        <span>
          Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/weiyigeek" target="_blank">mellow</a>
        </span>
        
        <br/><a id="SiteRunTime"></a>
        <br/>è®¿é—®ç»Ÿè®¡
        <span><a href="/sitemap.xml" target="_blank" rel="Sitemaps-ç«™ç‚¹åœ°å›¾">Sitemaps</a> </span>
        <span><a href="/baidusitemap.xml" target="_blank" rel="baidusitemaps-ç™¾åº¦ç«™ç‚¹åœ°å›¾">ç«™ç‚¹åœ°å›¾</a> </span>
        <!-- 
  -->
        <br/>ICPå¤‡æ¡ˆå·<span><a href="https://beian.miit.gov.cn" target="_blank">æ¸ICPå¤‡2022003447å·</a></span>
        <br/>
        <div>
        <div id="blog-wormhole-id" >
          <a href="https://www.foreverblog.cn/go.html" target="_blank"> 
            <img src="https://img.foreverblog.cn/wormhole_2_tp.gif" alt="åå¹´ä¹‹çº¦è™«æ´" style="height:32px;max-height:50px;display:block;margin:0 auto;" title="ç©¿æ¢­è™«æ´-éšæœºè®¿é—®åå¹´ä¹‹çº¦å‹é“¾åšå®¢">
          </a>
        </div>
        <div id="cc-myssl-id" >
          <a href="https://myssl.com/blog.weiyigeek.top?from=mysslid" target="_blank">
            <img src="https://static.myssl.com/res/images/myssl-id1.png" alt="MySSLå®‰å…¨è®¤è¯" style="max-height:50px;display:block;margin:0 auto">
          </a>
        </div>
      </p>
    </div>
</footer>



    <div class="mask" id="mask"></div>

<div id="go" class="waves-effect waves-light">
  <a href="javascript:;" id="goqrcode"> <span class="icon icon-lg icon-qrcode"></span> </a>
  <a href="javascript:;" id="gotop"> <span class="icon icon-lg icon-chevron-up"></span></a>
</div>





<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://blog.weiyigeek.top/2022/7-3-677.html&title=ã€Š8.Nginxå®è·µä¹‹è¯·æ±‚å›¾ç‰‡è½¬æ¢ä¸ºGoogleæ¨å‡ºçš„webpæ ¼å¼è½¬æ¢å·¥å…·å®è·µã€‹ â€” WeiyiGeek Blog&pic=https://blog.weiyigeek.top/img/avatar.jpg" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.weiyigeek.top/2022/7-3-677.html&title=ã€Š8.Nginxå®è·µä¹‹è¯·æ±‚å›¾ç‰‡è½¬æ¢ä¸ºGoogleæ¨å‡ºçš„webpæ ¼å¼è½¬æ¢å·¥å…·å®è·µã€‹ â€” WeiyiGeek Blog&source=æœ¬ç« ç›®å½•
[TOC]
0x00 å‰è¨€ç®€è¿°æè¿°: æœ€è¿‘å…¬å¸ä¸šåŠ¡ä¸­æœ‰è¿™ä¹ˆä¸€ä¸ªéœ€æ±‚å°±æ˜¯åœ¨ä¿è¯å›¾åƒçš„æ¸…æ™°åº¦çš„æƒ…å†µä¸‹, å‡å°‘å…¶ä½“ç§¯å¤§å°ä½¿å¾—å‡è½»å¤–éƒ¨è¯·æ±‚æµé‡å¸¦å®½å¯¹ç½‘å…³..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.weiyigeek.top/2022/7-3-677.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€Š8.Nginxå®è·µä¹‹è¯·æ±‚å›¾ç‰‡è½¬æ¢ä¸ºGoogleæ¨å‡ºçš„webpæ ¼å¼è½¬æ¢å·¥å…·å®è·µã€‹ â€” WeiyiGeek Blog&url=https://blog.weiyigeek.top/2022/7-3-677.html&via=https://blog.weiyigeek.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://blog.weiyigeek.top/2022/7-3-677.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>æ‰«ä¸€æ‰«ï¼Œåˆ†äº«åˆ°å¾®ä¿¡</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACKUlEQVR42u3aUW7jMAwE0N7/0tkTpJ4R3QVMP38FRaLoqcCEEvXzEz+f4Pn2/t/HbD81ejAwMB7LSCb37S/JyMkIv79OFg4DA+MNjGQSk8nln00WCwMDA6NlJOPkZR8GBgbGnJFPNNmmtpGNgYHxZkayiZ1E5CTEb96LY2BgPJCRn7r//9d/0t/AwMB4FONTPmdH/23Ls54VBgbGakbbjJy3NtulScbBwMDYzUi2rEmAJu9Mis7Dv2BgYKxmTA7i54f+kyi/+N3AwMBYxJhsQfMrX/eGb3QWiIGBsZRxViyeBW67fBcVIAYGxmpGvmXNg7U454vfEx3nYWBgrGa0A7X3H5KpnH3vxX8GAwNjNaMNyhxwlpBJQYmBgbGVkWxZ2+m2BWUbpl87GxgYGKsZ7eQmyPZ4LlpWDAyM1YyzsDtrUtZ3QMqGKwYGxlZGe4Uiv9swLy7rYMXAwFjKaFM5idRJm/OGFgUGBsZrGEmYtkGcRHO+fEVnAwMDYwXjrouneeE4KRAvLrBiYGCsZrQb1LNW5eRSxcU4GBgYr2HkB21t+CZF4dm2FgMDYzfjUz5tpLZNgiRkL2pbDAyMdYxJszMZLr8clsf6zT1bDAyMhzDakG0jso3g/JJZ3cHAwMB4OKM4gh8c+s9/Ab5+IwYGBkbZPGjLxHYJbghcDAyMlzEmk55f4MDAwHgPI9nEJpvPSfHX4jEwMN7DyLeOZ63HdhJnYY2BgbGU8Q+RggPxEm7AIQAAAABJRU5ErkJggg==" alt="å¾®ä¿¡åˆ†äº«äºŒç»´ç ">
</div>


    
    <!-- main-js -->
<script type="text/javascript" src="/js/jquery/2.1.0-jquery.min.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/plugins/fastclick.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/plugins/ios-orientationchange-fix.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/jquery/3.5.2-jquery.fancybox.min.js?v=1.6.6"></script>
<!--  //cdn.bootcss.com/node-waves/0.7.4/waves.min.js -->
<script type="text/javascript" src="/js/node-waves/0.7.4-waves.min.js?v=1.6.6"></script> 

<script type="text/javascript" src="/js/method.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/blog.js?v=1.6.6"></script>

<!-- third-party -->
<script type="text/javascript" src="/js/plugins/local_search.js?v=1.6.6"></script>
<script type="text/javascript">
	var search_path = "search.xml";
	if (search_path.length === 0) { search_path = "search.xml";}
	var path = "/" + search_path;
	searchFunc(path, "local-search-input", "local-search-result");
</script> 

<script> (adsbygoogle = window.adsbygoogle || []).push({});</script>    


<!-- <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> --> 


  


<script>
  var _hmt = _hmt || [];
  (function() {
    // ç™¾åº¦ç»Ÿè®¡
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?53923c4b5560739bc0ed61e183be6acf";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();
</script>
 


<!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
            processEscapes: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.staticfile.org/mathjax/2.7.9/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
 
<script>
    (function() {
        var OriginTitile = document.title, titleTime;
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                document.title = 'WeiyiGeek Blog-å”¯ä¸€æå®¢-å…³æ³¨äºç½‘ç»œå®‰å…¨_ç‰©è”ç½‘å®‰å…¨å¼€å‘_ç½‘ç»œå®‰å…¨è¿ç»´-å­¦ä¹ å¿ƒå¾—åˆ†äº«';
                clearTimeout(titleTime);
            } else {
                document.title = '(ã¤ã‚§âŠ‚)å’¦!åˆå¥½äº†!';
                titleTime = setTimeout(function() {
                    document.title = OriginTitile;
                },2000);
            }
        });
    })();
</script>
 

     <script type="text/javascript" src="/js/custom/copytips.js?v=1.6.6"></script> 
<script type="text/javascript">
// ç«™ç‚¹è¿è¡Œæ—¶é—´
var BootDate = new Date("2018/01/01 00:00:00");
function ShowRunTime(id) {
  var NowDate = new Date();
  var RunDateM = parseInt(NowDate - BootDate);
  var RunDays = Math.floor(RunDateM/(24*3600*1000));
  var RunHours = Math.floor(RunDateM%(24*3600*1000)/(3600*1000));
  var RunMinutes = Math.floor(RunDateM%(24*3600*1000)%(3600*1000)/(60*1000));
  var RunSeconds = Math.round(RunDateM%(24*3600*1000)%(3600*1000)%(60*1000)/1000);
  var RunTime = RunDays + " å¤© " + RunHours + " æ—¶ " + RunMinutes + " åˆ† " + RunSeconds + " ç§’";
  document.getElementById(id).innerHTML = "ç½‘ç«™å·²åœ¨é£é›¨ä¸­å‹‰å‹‰å¼ºå¼ºè¿è¡Œäº†ã€ " + RunTime + " ã€‘";
}
setInterval("ShowRunTime('SiteRunTime')", 1000);
</script>
    
  <div id="post-wechat" class="post-wechat" style="position:fixed;top: 360px;bottom: 500px;right: 3%;width: 190px;text-align: center; z-index: 9999">
    <p><b>å…³æ³¨ã€å…¨æ ˆå·¥ç¨‹å¸ˆä¿®ç‚¼æŒ‡å—ã€‘</b></p>
    <img src="/img/wechat-gzh.jpg" class="img-responsive" alt="weiyigeek">
    <p><b>æ¬¢è¿æ·»åŠ ã€ä½œè€…ã€‘å¾®ä¿¡</b></p>
    <img src="/img/wehat.jpg" class="img-responsive" alt="weiyigeek">
  </div>

</body>
</html>