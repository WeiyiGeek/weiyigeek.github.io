{"title":"Tomcat在Java开发中的使用笔记","slug":"编程世界/JavaWeb/0.XML/Java操作xml文件数据笔记","date":"2020-02-11T05:34:30.000Z","updated":"2022-03-29T05:39:06.307Z","url":"2020/2-11-300.html","path":"api/articles/2020/2-11-300.html.json","covers":["https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200214155149.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200214173650.png"],"content":"<p>[TOC]</p>\n<a id=\"more\"></a>\n<h4 id=\"0x00-快速入门\"><a href=\"#0x00-快速入门\" class=\"headerlink\" title=\"0x00 快速入门\"></a>0x00 快速入门</h4><p>在前面的学习中我们知道了XML的基础用法，和它的解析器方式包括DOM和SAX方式，在Java中处理操作XML文件常用的解决方案是Jaxp、Jdom，dom4j等等，其中后者最为常用且本文学习也是采用Dom4j包进行对xml文件的处理;</p>\n<p><strong>XML约束文档编写</strong><br>1) DTD 实例<br>index.xml<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE root SYSTEM \"index.dtd\" &gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">root</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">stu</span> <span class=\"attr\">id</span>=<span class=\"string\">\"a_1001\"</span> <span class=\"attr\">gender</span>=<span class=\"string\">\"男\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>WeiyiGeek<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">age</span>&gt;</span>20<span class=\"tag\">&lt;/<span class=\"name\">age</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">address</span>&gt;</span>中国北京东直门220号<span class=\"tag\">&lt;/<span class=\"name\">address</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">stu</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">stu</span> <span class=\"attr\">id</span>=<span class=\"string\">\"a_1002\"</span> <span class=\"attr\">gender</span>=<span class=\"string\">\"女\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>张欣欣<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">age</span>&gt;</span>18<span class=\"tag\">&lt;/<span class=\"name\">age</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">address</span>&gt;</span>中国河北开封区小龙街道220号<span class=\"tag\">&lt;/<span class=\"name\">address</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">stu</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">root</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p>index.dtd<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">!ELEMENT</span> <span class=\"attr\">root</span> (<span class=\"attr\">stu</span>)*&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">!ELEMENT</span> <span class=\"attr\">stu</span> (<span class=\"attr\">name</span>,<span class=\"attr\">age</span>,<span class=\"attr\">address</span>)&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">!ELEMENT</span> <span class=\"attr\">name</span> (#<span class=\"attr\">PCDATA</span>)&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">!ELEMENT</span> <span class=\"attr\">age</span> (#<span class=\"attr\">PCDATA</span>)&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">!ELEMENT</span> <span class=\"attr\">address</span> (#<span class=\"attr\">PCDATA</span>)&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">!ATTLIST</span> <span class=\"attr\">stu</span> <span class=\"attr\">id</span> <span class=\"attr\">ID</span> #<span class=\"attr\">REQUIRED</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">!ATTLIST</span> <span class=\"attr\">stu</span> <span class=\"attr\">gender</span> (男|女) #<span class=\"attr\">REQUIRED</span>&gt;</span></span><br><span class=\"line\">``</span><br><span class=\"line\"></span><br><span class=\"line\">![WeiyiGeek.index](https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200215121134.png)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">br</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">2）XML Schema 实例</span><br><span class=\"line\">XMLSchema.xml</span><br><span class=\"line\">```xml</span><br><span class=\"line\"><span class=\"meta\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">root</span></span></span><br><span class=\"line\"><span class=\"tag\">\t<span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span></span></span><br><span class=\"line\"><span class=\"tag\">\t<span class=\"attr\">xmlns</span>=<span class=\"string\">\"http://www.weiyigeek.cn/XMLSchema\"</span></span></span><br><span class=\"line\"><span class=\"tag\">\t<span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">\"http://www.weiyigeek.cn/XMLSchema XMLSchema.xsd\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">stu</span> <span class=\"attr\">id</span>=<span class=\"string\">\"1001\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>WeiyiGeek<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">age</span>&gt;</span>20<span class=\"tag\">&lt;/<span class=\"name\">age</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">address</span>&gt;</span>中国北京东直门220号<span class=\"tag\">&lt;/<span class=\"name\">address</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">stu</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">stu</span> <span class=\"attr\">id</span>=<span class=\"string\">\"1002\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>张欣欣<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">age</span>&gt;</span>18<span class=\"tag\">&lt;/<span class=\"name\">age</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">address</span>&gt;</span>中国河北开封区小龙街道220号<span class=\"tag\">&lt;/<span class=\"name\">address</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">stu</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">root</span>&gt;</span></span><br></pre></td></tr></table></figure><br>XMLSchema.xsd<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">schema</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema\"</span> <span class=\"attr\">targetNamespace</span>=<span class=\"string\">\"http://www.weiyigeek.cn/XMLSchema\"</span> <span class=\"attr\">xmlns:tns</span>=<span class=\"string\">\"http://www.weiyigeek.cn/XMLSchema\"</span> <span class=\"attr\">elementFormDefault</span>=<span class=\"string\">\"qualified\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">element</span> <span class=\"attr\">name</span>=<span class=\"string\">\"root\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 复杂类型 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">complexType</span>&gt;</span></span><br><span class=\"line\">               <span class=\"comment\">&lt;!-- 有顺序的 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequence</span> <span class=\"attr\">maxOccurs</span>=<span class=\"string\">\"unbounded\"</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">element</span> <span class=\"attr\">name</span>=<span class=\"string\">\"stu\"</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">complexType</span>&gt;</span></span><br><span class=\"line\">              <span class=\"tag\">&lt;<span class=\"name\">sequence</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">element</span> <span class=\"attr\">name</span>=<span class=\"string\">\"name\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"string\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">element</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">element</span> <span class=\"attr\">name</span>=<span class=\"string\">\"age\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"int\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">element</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">element</span> <span class=\"attr\">name</span>=<span class=\"string\">\"address\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"string\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">element</span>&gt;</span></span><br><span class=\"line\">              <span class=\"tag\">&lt;/<span class=\"name\">sequence</span>&gt;</span></span><br><span class=\"line\">              <span class=\"comment\">&lt;!-- 属性 --&gt;</span></span><br><span class=\"line\">              <span class=\"tag\">&lt;<span class=\"name\">attribute</span> <span class=\"attr\">name</span>=<span class=\"string\">\"id\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"int\"</span> <span class=\"attr\">use</span>=<span class=\"string\">\"required\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">attribute</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">complexType</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;/<span class=\"name\">element</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">sequence</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">complexType</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">element</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">schema</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p>实验的项目结构:<br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200214155149.png\" alt=\"WeiyiGeek.Dom4j\" title=\"\" class=\"\">\n                <p>WeiyiGeek.Dom4j</p>\n            </figure></p>\n<hr>\n\n<h4 id=\"0x01-基本用法\"><a href=\"#0x01-基本用法\" class=\"headerlink\" title=\"0x01 基本用法\"></a>0x01 基本用法</h4><p>Dom4j的使用流程：</p>\n<ul>\n<li>1.创建SAXReader对象</li>\n<li>2.指定读取解析的xml</li>\n<li>3.获取根元素document.getRootElement();</li>\n<li>4.根据元素获取子元素或者下面的子孙元素:<ul>\n<li>rootElement.element(“子元素标签”):获取该元素下第一个子元素标签对象</li>\n<li>rootElement.elements:获取所有子元素标签对象;</li>\n</ul>\n</li>\n</ul>\n<p>基础示例:<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.weiyigeek.xml;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.File;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.dom4j.Document;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.dom4j.DocumentException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.dom4j.Element;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.dom4j.io.SAXReader;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/***</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Administrator</span></span><br><span class=\"line\"><span class=\"comment\"> *   功能:验证Dom4j解析XML包</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Dom4j_demo1</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// TODO Auto-generated method stub</span></span><br><span class=\"line\">    <span class=\"comment\">//1.建立reader读取对象</span></span><br><span class=\"line\">    SAXReader reader = <span class=\"keyword\">new</span> SAXReader();</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">//2.读取指定的xml源文件</span></span><br><span class=\"line\">      Document document = reader.read(<span class=\"keyword\">new</span> File(<span class=\"string\">\"src/xml/index.xml\"</span>));</span><br><span class=\"line\">      System.out.println(<span class=\"string\">\"读取XML源文件地址: \"</span> + document.getName());</span><br><span class=\"line\">    </span><br><span class=\"line\">      <span class=\"comment\">//3.获取xml中根元素</span></span><br><span class=\"line\">      Element rootElement = document.getRootElement();</span><br><span class=\"line\">      System.out.println(<span class=\"string\">\"根元素名称: \"</span> + rootElement.getName());</span><br><span class=\"line\">      </span><br><span class=\"line\">      <span class=\"comment\">//4.得到子元素和子子（子孙）元素</span></span><br><span class=\"line\">      System.out.println(<span class=\"string\">\"子元素名称\"</span> + rootElement.element(<span class=\"string\">\"stu\"</span>).getName());</span><br><span class=\"line\">      System.out.println(<span class=\"string\">\"子子元素名称: \"</span> + rootElement.element(<span class=\"string\">\"stu\"</span>).element(<span class=\"string\">\"name\"</span>).getName());</span><br><span class=\"line\">      </span><br><span class=\"line\">      <span class=\"comment\">//5.获取所有元素及其属性</span></span><br><span class=\"line\">      List&lt;Element&gt; element = rootElement.elements();</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (Element ele : element) &#123;</span><br><span class=\"line\">        String name = ele.element(<span class=\"string\">\"name\"</span>).getStringValue();</span><br><span class=\"line\">        String age = ele.element(<span class=\"string\">\"age\"</span>).getText();</span><br><span class=\"line\">        String addr = ele.elementText(<span class=\"string\">\"address\"</span>);</span><br><span class=\"line\">        System.out.println(ele.attributeValue(<span class=\"string\">\"id\"</span>)+ <span class=\"string\">\"：\"</span> + name + <span class=\"string\">\"-\"</span> + age + <span class=\"string\">\"-\"</span> + addr);</span><br><span class=\"line\">      &#125;\t</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (DocumentException e) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// TODO Auto-generated catch block</span></span><br><span class=\"line\">      e.printStackTrace();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>执行结果:<br><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">读取XML源文件地址: file:<span class=\"comment\">///F:/Study-Promgram/JAVAWeb/xml/src/xml/index.xml</span></span><br><span class=\"line\">根元素名称: root</span><br><span class=\"line\">子元素名称stu</span><br><span class=\"line\">子子元素名称: name</span><br><span class=\"line\"><span class=\"number\">1001</span>：WeiyiGeek<span class=\"number\">-20</span>-中国北京东直门<span class=\"number\">220</span>号</span><br><span class=\"line\"><span class=\"number\">1002</span>：张欣欣<span class=\"number\">-18</span>-中国河北开封区小龙街道<span class=\"number\">220</span>号</span><br></pre></td></tr></table></figure></p>\n<hr>\n\n<h4 id=\"0x02-Xpath基础使用\"><a href=\"#0x02-Xpath基础使用\" class=\"headerlink\" title=\"0x02 Xpath基础使用\"></a>0x02 Xpath基础使用</h4><p>描述:在dom4j里面支持xpath的写法，xpath其实是xml的路径语言，支持我们再解析xml的时候，能够快速的定位到具体的某一个元素中；</p>\n<p>实验结构:<br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200214173650.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure></p>\n<p>使用流程:</p>\n<ul>\n<li>1.添加jaxen-1.1-beta-6.jar依赖流程;</li>\n<li>2.在查找指定节点时候根据XPath语法规则来查询;</li>\n<li>3.利用Xpath获取节点采用rootElement.selectSingleNode(“//name”)和rootElement.selectNodes(“//name”)</li>\n</ul>\n<p>基础示例:<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.weiyigeek.xml;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.File;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.dom4j.Document;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.dom4j.Element;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.dom4j.io.SAXReader;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/***</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Administrator</span></span><br><span class=\"line\"><span class=\"comment\"> *   功能：验证XPATH的使用</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Dem4j_demo2</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// TODO Auto-generated method stub</span></span><br><span class=\"line\">      <span class=\"comment\">//1.创建SAX读取对象</span></span><br><span class=\"line\">      SAXReader reader = <span class=\"keyword\">new</span> SAXReader();</span><br><span class=\"line\">      </span><br><span class=\"line\">      <span class=\"comment\">//2.读取xml源文件</span></span><br><span class=\"line\">      Document document = reader.read(<span class=\"keyword\">new</span> File(<span class=\"string\">\"src/xml/index.xml\"</span>));</span><br><span class=\"line\">      </span><br><span class=\"line\">        <span class=\"comment\">//3.根元素</span></span><br><span class=\"line\">      Element rootElement = document.getRootElement();</span><br><span class=\"line\">      </span><br><span class=\"line\">        <span class=\"comment\">//4.使用xpath选取单个节点对象</span></span><br><span class=\"line\">      Element xpathElement = (Element) rootElement.selectSingleNode(<span class=\"string\">\"//name\"</span>);</span><br><span class=\"line\">      System.out.println(<span class=\"string\">\"获取一个子孙元素的值: \"</span> + xpathElement.getText());</span><br><span class=\"line\">      </span><br><span class=\"line\">      <span class=\"comment\">//5.使用xpath获取多个相同节点属性的值</span></span><br><span class=\"line\">      List&lt;Element&gt; list = rootElement.selectNodes(<span class=\"string\">\"//name\"</span>);</span><br><span class=\"line\">      <span class=\"keyword\">for</span>(Element xpath : list)&#123;</span><br><span class=\"line\">        System.out.println(xpath.getName() + <span class=\"string\">\":\"</span> + xpath.getStringValue());</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      </span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// <span class=\"doctag\">TODO:</span> handle exception</span></span><br><span class=\"line\">      e.printStackTrace();</span><br><span class=\"line\">    &#125;\t\t</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><br>执行结果:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">获取一个子孙元素的值: WeiyiGeek</span><br><span class=\"line\">name:WeiyiGeek</span><br><span class=\"line\">name:张欣欣</span><br></pre></td></tr></table></figure></p>\n","comments":true,"excerpt":"[TOC]","categories":[{"name":"Java","path":"api/categories/Java.json"}],"tags":[{"name":"Tomcat","path":"api/tags/Tomcat.json"}]}