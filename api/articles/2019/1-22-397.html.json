{"title":"内网渗透之敏感文件信息快速收集","slug":"网安大类/PenetrationNote/信息收集/内网渗透之敏感文件信息快速收集","date":"2019-01-22T09:36:30.000Z","updated":"2020-10-10T02:37:49.695Z","url":"2019/1-22-397.html","path":"api/articles/2019/1-22-397.html.json","covers":null,"content":"<p>[TOC]</p>\n<a id=\"more\"></a>\n<h4 id=\"0x00-前言简述\"><a href=\"#0x00-前言简述\" class=\"headerlink\" title=\"0x00 前言简述\"></a>0x00 前言简述</h4><p>描述: 在您做安全测试时候如果成功拿下一台内网机器，此时为了实现危害扩大的效果您便需要做横向安全攻击测试，但是在做这一步的前提下是您前期已经收集了一些敏感信息以及在被成功入侵的机器上收集得到的信息;</p>\n<p>内网核心敏感数据，不仅包括数据库，电子邮件，也包含个人数据，业务数据，技术数据等等，大部分敏感数据基本都在内网中。</p>\n<p>现在问题来了如何快速定位内网之中的敏感数据/文件?<br>这边是出现本文的初衷帮助安全研究人员更好的对机器中的敏感文件进行了解，同时对其敏感文件进行安全访问控制从而提高内部网络的安全性;</p>\n<hr>\n<h4 id=\"0x01-奇技淫巧\"><a href=\"#0x01-奇技淫巧\" class=\"headerlink\" title=\"0x01 奇技淫巧\"></a>0x01 奇技淫巧</h4><p>描述:在针对于数据信息收集的情况下可以采用以下方式(但又不限于以下方式)</p>\n<ul>\n<li><p>Step 1.资料、数据、文件定位流程</p>\n<ul>\n<li>Tips : 实际情况中结合社会工程学效果更佳;<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">* 定位内部人事的组织结构。</span><br><span class=\"line\">* 在内部人事组织结构中寻找有价值的人员</span><br><span class=\"line\">* 定位有价值人员的机器</span><br><span class=\"line\">* 查找有价值人员存放文档的位置</span><br><span class=\"line\">* 列出存放文档的服务器目录</span><br><span class=\"line\">* 回传文件/数据</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n<li><p>Step 2.重点核心业务机器</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">* 高级管理人员 系统管理人员 财务/人事/业务人员的个人计算机</span><br><span class=\"line\">* 产品管理系统服务器</span><br><span class=\"line\">* 办公系统服务器</span><br><span class=\"line\">* 财务应用系统服务器</span><br><span class=\"line\">* 核心产品源码服务器（SVN/GIT服务器）</span><br><span class=\"line\">* 数据库服务器</span><br><span class=\"line\">* 文件服务器，共享服务器</span><br><span class=\"line\">* 电子邮件服务器</span><br><span class=\"line\">* 网站监控系统服务器/信息安全监控服务器</span><br><span class=\"line\">* 其他分公司，生产工厂服务器</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Step 3.敏感信息和敏感文件</p>\n<ul>\n<li>Tips: 此处是非常重要的在安全测试中的地位往往至关重要;<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">站点源码备份文件，数据库备份文件等等</span><br><span class=\"line\">游览器保存的密码和游览器的cookie</span><br><span class=\"line\">其他用户会话，3389和ipc$连接记录，回收站中的信息等等</span><br><span class=\"line\">Windows的无线密码</span><br><span class=\"line\">网络内部的各种账号密码，包含电子邮箱，VPN，FTP等等</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<p>Tips:在内网中我们一定要知道自己拿下的机器的人员的职位（职位高的人在内网中权限也高，计算机中的敏感信息也多，还有一种就是特殊职位的人员，例如上面说的，一般都有一些与职位相关的敏感信息。）还有就是拿下一台机器后要先维权，权限稳了再收集信息，信息收集一定要全面仔细，信息收集完了再搞内网但是需要注意<code>往目标主机中传工具用完就删</code>;</p>\n<figure class=\"highlight bat\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1</span>.指定目录下搜集各类敏感文件</span><br><span class=\"line\"><span class=\"built_in\">dir</span> /a /s /b d:\\\"*.txt\"</span><br><span class=\"line\"><span class=\"built_in\">dir</span> /a /s /b d:\\\"*.xml\"</span><br><span class=\"line\"><span class=\"built_in\">dir</span> /a /s /b d:\\\"*.mdb\"</span><br><span class=\"line\"><span class=\"built_in\">dir</span> /a /s /b d:\\\"*.sql\"</span><br><span class=\"line\"><span class=\"built_in\">dir</span> /a /s /b d:\\\"*.mdf\"</span><br><span class=\"line\"><span class=\"built_in\">dir</span> /a /s /b d:\\\"*.eml\"</span><br><span class=\"line\"><span class=\"built_in\">dir</span> /a /s /b d:\\\"*.pst\"</span><br><span class=\"line\"><span class=\"built_in\">dir</span> /a /s /b d:\\\"*conf*\"</span><br><span class=\"line\"><span class=\"built_in\">dir</span> /a /s /b d:\\\"*bak*\"</span><br><span class=\"line\"><span class=\"built_in\">dir</span> /a /s /b d:\\\"*pwd*\"</span><br><span class=\"line\"><span class=\"built_in\">dir</span> /a /s /b d:\\\"*pass*\"</span><br><span class=\"line\"><span class=\"built_in\">dir</span> /a /s /b d:\\\"*login*\"</span><br><span class=\"line\"><span class=\"built_in\">dir</span> /a /s /b d:\\\"*user*\"</span><br><span class=\"line\"><span class=\"number\">2</span>.指定目录下的文件中搜集各种账号密码</span><br><span class=\"line\"><span class=\"built_in\">findstr</span> /si pass *.inc *.config *.ini *.txt *.asp *.aspx *.php *.jsp *.xml *.cgi *.bak</span><br><span class=\"line\"><span class=\"built_in\">findstr</span> /si userpwd *.inc *.config *.ini *.txt *.asp *.aspx *.php *.jsp *.xml *.cgi *.bak</span><br><span class=\"line\"><span class=\"built_in\">findstr</span> /si pwd *.inc *.config *.ini *.txt *.asp *.aspx *.php *.jsp *.xml *.cgi *.bak</span><br><span class=\"line\"><span class=\"built_in\">findstr</span> /si login *.inc *.config *.ini *.txt *.asp *.aspx *.php *.jsp *.xml *.cgi *.bak</span><br><span class=\"line\"><span class=\"built_in\">findstr</span> /si user *.inc *.config *.ini *.txt *.asp *.aspx *.php *.jsp *.xml *.cgi *.bak</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">find</span> /etc/ -name passwd -exec grep \"root\" &#123;&#125; \\; &gt; /tmp/test.txt</span><br><span class=\"line\"><span class=\"built_in\">find</span> /etc/ -name passwd -exec grep -H \"root\" &#123;&#125; \\;</span><br><span class=\"line\">/etc/passwd:root:x:<span class=\"number\">0</span>:<span class=\"number\">0</span>:root:/root:/bin/bash</span><br><span class=\"line\">/etc/passwd:operator:x:<span class=\"number\">11</span>:<span class=\"number\">0</span>:operator:/root:/sbin/nologin</span><br></pre></td></tr></table></figure>","comments":true,"excerpt":"[TOC]","categories":[{"name":"InformationGathering","path":"api/categories/InformationGathering.json"}],"tags":[{"name":"敏感信息收集","path":"api/tags/敏感信息收集.json"}]}