{"title":"基于Quartz的定时任务及crond表达式入门学习","slug":"编程世界/JavaWeb/5.Advanced/基于Quartz的定时任务及crond表达式入门学习","date":"2020-05-01T00:34:30.000Z","updated":"2020-10-10T02:37:48.077Z","url":"2020/5-1-311.html","path":"api/articles/2020/5-1-311.html.json","covers":null,"content":"<p>[TOC]</p>\n<a id=\"more\"></a>\n<h4 id=\"0x00-前言\"><a href=\"#0x00-前言\" class=\"headerlink\" title=\"0x00 前言\"></a>0x00 前言</h4><h4 id=\"0x01-基础语法\"><a href=\"#0x01-基础语法\" class=\"headerlink\" title=\"0x01 基础语法\"></a>0x01 基础语法</h4><p>Java中Quartz Cron表达式(<code>Cron Expressions—Cron 表达式</code>)被用来配置CronTrigger实例,需要注意一点它不同于Linux中Cron表达式，我们从下面的格式可以看出区别;</p>\n<p>Cron表达式是一个由7个子表达式组成的字符串, 每个子表达式都描述了一个单独的日程细节并且采用空格分隔;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#Linux crond</span></span><br><span class=\"line\">分钟 小时 天 月 周 Command</span><br><span class=\"line\">*    *    *  *  * 命令执行</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#Quartz Cron</span></span><br><span class=\"line\">* * * * * * ? </span><br><span class=\"line\">秒（0~59）</span><br><span class=\"line\">分钟（0~59）</span><br><span class=\"line\">小时（0~23）</span><br><span class=\"line\">天（月）（0~31，但是你需要考虑你月的天数）</span><br><span class=\"line\">月（0~11）</span><br><span class=\"line\">天（星期）（1~7 1=SUN 或 SUN，MON，TUE，WED，THU，FRI，SAT）</span><br><span class=\"line\">年份（1970－2099）</span><br></pre></td></tr></table></figure></p>\n<p>PS:从上面的比对中可以看出Quartz的Cron表达式比Linux中的Cron表达式更为强大和精细;</p>\n<p><strong>特殊字符含义:</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">, : 其表示一个列表如(9,10,11,12)</span><br><span class=\"line\">- : 其表示一个连续的区间如(9-12) , 例如：子表达式（天（星期））可以为 “MON-FRI”，“MON，WED，FRI”，“MON-WED,SAT” ;</span><br><span class=\"line\">* : 其表示一个通配符即 “*”字符代表所有可能的值 </span><br><span class=\"line\">/ : 其表示一个指定数值的增量,如一个间隔时间(8-18/4)(/表示每隔4小时),在子表达式（分钟）里的“0/15”表示从第0分钟开始，每15分钟 ;</span><br><span class=\"line\">? : 其字符仅被用于天（月）和天（星期）两个子表达式，表示不指定值, 当2个子表达式其中之一被指定了值以后，为了避免冲突，需要将另一个子表达式的值设为“？” </span><br><span class=\"line\">L : 字符仅被用于天（月-最后一天）和天（星期-最后一周）两个子表达式，它是单词“last”的缩写, 但是它在两个子表达式里的含义是不同的。  例如：“6L”表示这个月的倒数第6天，FRIL表示这个月的最一个星期五;</span><br></pre></td></tr></table></figure></p>\n<p><strong>基础示例:</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#示例1.每天上午10点，下午14点，16点触发执行</span></span><br><span class=\"line\">0 0 10,14,16 * * ?</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#示例2.朝九晚五工作时间内每半小时</span></span><br><span class=\"line\">0 0/30 9-17 * * ?</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#示例3.由于\"月份中的日期 天(月)\"和\"星期中的日期-天(星期)\"这两个元素互斥的,必须要对其中一个设置?. </span></span><br><span class=\"line\">0 0 12 ? * WED  <span class=\"comment\">#表示每个星期三中午12点</span></span><br></pre></td></tr></table></figure></p>\n<p><em>注意事项:</em></p>\n<ul>\n<li>1.在使用“L”参数时，不要指定列表或范围，因为这会导致问题</li>\n<li>2.</li>\n</ul>\n<h4 id=\"0x0n-附录\"><a href=\"#0x0n-附录\" class=\"headerlink\" title=\"0x0n 附录\"></a>0x0n 附录</h4>","comments":true,"excerpt":"[TOC]","categories":[{"name":"Java","path":"api/categories/Java.json"}],"tags":[{"name":"Quartz","path":"api/tags/Quartz.json"},{"name":"Crond","path":"api/tags/Crond.json"}]}