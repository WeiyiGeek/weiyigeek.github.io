<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="content-language" content="zh-CN"/>
    <meta name="author" content="WeiyiGeek" />
    <meta name="msvalidate.01" content="5C552FB1D885E0E11D2957EC958C8018" />
    <meta name="shenma-site-verification" content="4c655e91c76be0a93c1b6954c666c9d6_1649049085"/>
    <meta name="bytedance-verification-code" content="lKs4FqwCHSJ3A/c5tT7X" />
    <meta name="sogou_site_verification" content="OC65iET6Bk" />
    
    <title>ğŸŒ udevé«˜æ•ˆã€åŠ¨æ€åœ°ç®¡ç† Linux è®¾å¤‡æ–‡ä»¶|WeiyiGeek Blog|å”¯ä¸€æå®¢Geek-ITç½‘ç»œå®‰å…¨è¿ç»´å¼€å‘æŠ€æœ¯çŸ¥è¯†åˆ†äº«-åšå®¢ç«™ç‚¹</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    
    <meta name="keywords" content="ç£ç›˜ç®¡ç†">
    <meta name="Description" content="WeiyiGeek-å”¯ä¸€æå®¢åšå®¢ç«™ç‚¹,å…³æ³¨äºç½‘ç»œå®‰å…¨è¿ç»´,Webå®‰å…¨å¼€å‘,IOTç‰©è”ç½‘å®‰å…¨å¼€å‘,åº”ç”¨å¼€å‘,åˆ†äº«æŠ€æœ¯å­¦ä¹ çŸ¥è¯†ä¸å…¥å‘è§£å†³,æå‡ç½‘ç»œå®‰å…¨æŠ€æœ¯ä¸è‡ªèº«æŠ€æœ¯èƒ½åŠ›,ç«‹å¿—ç»´æŠ¤å¤§ä¼—ç½‘ç»œå®‰å…¨ä¸ºå·±ä»»,åšä¸€ä¸ªå¯¹å›½å®¶æœ‰ç”¨çš„äºº,ä¸ºå®ç°ä¸­åæ°‘æ—ä¼Ÿå¤§å¤å…´çš„ä¸­å›½æ¢¦ä¸æ‡ˆå¥‹æ–—">
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="/css/jquery/3.5.2-jquery.fancybox.min.css?v=1.6.6" />
    <link rel="stylesheet" href="/css/style.css?v=1.6.6">
    <!--  -->
     <script type="text/javascript" src="/js/custom/articlecost.js?v=1.6.6"></script> 
    <link rel="stylesheet" href="/css/third-party/gitalk.css?v=1.6.6"> 
    <script type="text/javascript">
        // Data Center
        var DC = {
            reward:	true,
            lv: JSON.parse('{"enable":false,"app_id":null,"app_key":null,"icon":true}'),
            v: JSON.parse('{"enable":false,"appid":null,"appkey":null,"notify":true,"verify":true,"placeholder":"give me some sugers plz...","avatar":"wavatar"}')
        };
    </script>
    <script type="text/javascript">window.lazyScripts=[];</script>
<meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="WeiyiGeek Blog" type="application/atom+xml">
</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="">
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap">
      
      <img src="/img/brand.jpg" class="brand-bg" alt="WeiyiGeek-backgroud">
      
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg" alt="WeiyiGeek-å¤´åƒ">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">WeiyiGeek</h5>
          <a href="mailto:master@weiyigeek.top" title="master@weiyigeek.top" class="mail">
            <span>m</span><span>a</span><span>s</span><span>t</span><span>e</span><span>r</span><span>@</span><span>w</span><span>e</span><span>i</span><span>y</span><span>i</span><span>g</span><span>e</span><span>e</span><span>k</span><span>.</span><span>t</span><span>o</span><span>p</span>
          </a>
        </hgroup>
        
        <ul class="menu-link">
          
              <li>
                <a href="https://weiyigeek.top/img/wechat-search.png" target="_blank">
                  <i class="icon icon-lg icon-wechat"></i>
                </a>
              </li>
            
              <li>
                <a href="https://github.com/weiyigeek" target="_blank">
                  <i class="icon icon-lg icon-github"></i>
                </a>
              </li>
            
              <li>
                <a href="https://t.me/WeiyiGeek" target="_blank">
                  <i class="icon icon-lg icon-telegram"></i>
                </a>
              </li>
            
              <li>
                <a href="https://twitter.com/WeiyiGeek" target="_blank">
                  <i class="icon icon-lg icon-twitter"></i>
                </a>
              </li>
            
              <li>
                <a href="https://weibo.com/615643678" target="_blank">
                  <i class="icon icon-lg icon-weibo"></i>
                </a>
              </li>
            
        </ul>
        
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                é¦–é¡µ
              </a>
            </li>
        
            <li class="">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                æ–‡ç« åˆ†ç±»
              </a>
            </li>
        
            <li class="">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                æ–‡ç« æ ‡ç­¾
              </a>
            </li>
        
            <li class="">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                æ–‡ç« å½’æ¡£
              </a>
            </li>
        
            <li class="">
              <a href="/books"  >
                <i class="icon icon-lg icon-book"></i>
                å­¦ä¹ ä¹¦ç±
              </a>
            </li>
        
            <li class="">
              <a href="/about"  >
                <i class="icon icon-lg icon-user"></i>
                å…³äºä½œè€…
              </a>
            </li>
        
            <li class="">
              <a href="/links"  >
                <i class="icon icon-lg icon-link"></i>
                ç«™ç‚¹å¯¼èˆª
              </a>
            </li>
        
            <li class="">
              <a href="https://weiyigeek.top/img/wechat-search.png" target="_blank" >
                <i class="icon icon-lg icon-wechat"></i>
                å…¬ä¼—è´¦å·
              </a>
            </li>
        
            <li class="">
              <a href="https://space.bilibili.com/385802642" target="_blank" >
                <i class="icon icon-lg icon-youtube-play"></i>
                å“”å“©å“”å“©
              </a>
            </li>
        
            <li class="">
              <a href="https://github.com/weiyigeek" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="">
              <a href="https://twitter.com/WeiyiGeek" target="_blank" >
                <i class="icon icon-lg icon-twitter"></i>
                Twitter
              </a>
            </li>
        
            <li class="">
              <a href="https://weibo.com/615643678" target="_blank" >
                <i class="icon icon-lg icon-weibo"></i>
                Weibo
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row clearfix">
        <a href="javascript:;" class="header-icon pull-left waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">
            <span>udevé«˜æ•ˆã€åŠ¨æ€åœ°ç®¡ç† Linux è®¾å¤‡æ–‡ä»¶</span>
            
        </div>

        
        <a href="javascript:;" id="site_search_btn" class="header-icon pull-right waves-effect waves-circle waves-light">
            <i class="icon icon-lg icon-search"></i>
        </a>
        

        
            <a href="/atom.xml" class="header-icon pull-right waves-effect waves-circle waves-light">
                <i class="icon icon-lg icon-rss"></i>
            </a>
        
    </div>
</header>
<header class="content-header post-header">
    <img src="/img/banner.jpg" class="header-bg" alt="æ–‡ç« å¤´éƒ¨èƒŒæ™¯">
    <div class="container fade-scale">
        <h1 class="title">udevé«˜æ•ˆã€åŠ¨æ€åœ°ç®¡ç† Linux è®¾å¤‡æ–‡ä»¶</h1>
        <h5 class="subtitle">
            
                <time datetime="2019-06-18T11:35:30.000Z" itemprop="datePublished" class="page-time">
  2019-06-18
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Linux%E5%91%BD%E4%BB%A4/">Linuxå‘½ä»¤</a></li></ul>


            
        </h5>
        
    </div>
    

</header>

<div id="site_search">
    <div class="search-title clearfix">
        <span class="pull-left">
          <i class="icon icon-lg icon-search"></i>
        </span>
        <input type="text" id="local-search-input" name="q" results="0" placeholder="search my blog..." class="form-control pull-left"/>
        <a href="javascript:;" class="close pull-right waves-effect waves-circle waves-light">
          <i class="icon icon-lg icon-close"></i>
        </a>
    </div>
    <div id="local-search-result"></div>
</div>


<div class="container body-wrap">
    <article id="post-ç³»ç»Ÿè¿ç»´/Linux/å¸¸ç”¨å‘½ä»¤/ç³»ç»Ÿç¡¬ä»¶èµ„æºç±»å‘½ä»¤/udevé«˜æ•ˆåŠ¨æ€è®¾å¤‡ç®¡ç†å™¨ä»‹ç»ä¸ä½¿ç”¨"
  class="post-article article-type-post" itemprop="blogPost">
    <div class="post-card">
        <h1 class="post-card-title">udevé«˜æ•ˆã€åŠ¨æ€åœ°ç®¡ç† Linux è®¾å¤‡æ–‡ä»¶</h1>
        <div class="post-meta">
            <time class="post-time" title="2019-06-18 19:35:30" datetime="2019-06-18T11:35:30.000Z"  itemprop="datePublished">2019-06-18</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Linux%E5%91%BD%E4%BB%A4/">Linuxå‘½ä»¤</a></li></ul>



            

            


            
        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            
            <p>[TOC]</p>
<a id="more"></a>
<h4 id="0x00-å‰è¨€ç®€ä»‹"><a href="#0x00-å‰è¨€ç®€ä»‹" class="headerlink" title="0x00 å‰è¨€ç®€ä»‹"></a>0x00 å‰è¨€ç®€ä»‹</h4><p>æè¿°: Linux ç”¨æˆ·å¸¸å¸¸ä¼šå¾ˆéš¾é‰´åˆ«åŒä¸€ç±»å‹çš„è®¾å¤‡åï¼Œæ¯”å¦‚ eth0, eth1, sda, sdb ç­‰ç­‰ã€‚é€šè¿‡è§‚å¯Ÿè¿™äº›è®¾å¤‡çš„å†…æ ¸è®¾å¤‡åç§°ï¼Œç”¨æˆ·é€šå¸¸èƒ½çŸ¥é“è¿™äº›æ˜¯ä»€ä¹ˆç±»å‹çš„è®¾å¤‡ï¼Œä½†æ˜¯ä¸çŸ¥é“å“ªä¸€ä¸ªè®¾å¤‡æ˜¯ä»–ä»¬æƒ³è¦çš„</p>
<p>ä¾‹å¦‚:åœ¨ä¸€ä¸ªå……æ–¥ç€æœ¬åœ°ç£ç›˜å’Œå…‰çº¤ç£ç›˜çš„è®¾å¤‡åæ¸…å• (/dev/sd*) ä¸­ï¼Œç”¨æˆ·æ— æ³•ä»¥åç§°æ‰¾åˆ°ä¸€ä¸ªåºåˆ—å·ä¸ºâ€œ35000c50000a7ef67â€çš„ç£ç›˜ã€‚</p>
<p>åœ¨è¿™ç§æƒ…å†µä¸‹é€šè¿‡<code>udev</code>å°±èƒ½åŠ¨æ€åœ°åœ¨ /dev ç›®å½•é‡Œäº§ç”Ÿè‡ªå·±æƒ³è¦çš„ã€æ ‡è¯†æ€§å¼ºçš„è®¾å¤‡æ–‡ä»¶æˆ–è€…è®¾å¤‡é“¾æ¥ï¼Œä»¥æ­¤å¸®åŠ©ç”¨æˆ·æ–¹ä¾¿å¿«æ·åœ°æ‰¾åˆ°æ‰€éœ€çš„è®¾å¤‡æ–‡ä»¶ã€‚</p>
<p><br/></p>
<p><strong>Q: ä»€ä¹ˆæ˜¯ udev?</strong></p>
<blockquote>
<p>ç­”: udev æ˜¯ <code>Linux kernel 2.6</code> ç³»åˆ—çš„ä¸€ä¸ªè®¾å¤‡ç®¡ç†å™¨åŠŸèƒ½,ç”±Greg Kroah-Hartmanå’ŒKay Sieverså…±åŒå¼€å‘å¹¶å¾—åˆ°Dan Stekloffç­‰äººçš„å¸®åŠ©, å®ƒåœ¨2012å¹´4æœˆ udev è¢«åˆå¹¶è‡³ systemd;<br>udev ä»¥å®ˆæŠ¤è¿›ç¨‹çš„å½¢å¼è¿è¡Œï¼Œé€šè¿‡ä¾¦å¬å†…æ ¸å‘å‡ºæ¥çš„ uevent æ¥ç®¡ç† /devç›®å½•ä¸‹çš„è®¾å¤‡æ–‡ä»¶, å®ƒæ›¿ä»£äº†åŸæ¥çš„ devfs åŠ hotplug çš„åŠŸèƒ½;</p>
</blockquote>
<p><br/></p>
<p><strong>Q: ä¸ºä½•è¦é€‰æ‹©ä½¿ç”¨udev?</strong></p>
<blockquote>
<p>ç­”: åœ¨ä¼ ç»Ÿçš„Linuxç³»ç»Ÿä¸­ <code>/devç›®å½•ä¸‹</code> çš„è®¾å¤‡èŠ‚ç‚¹ä¸ºä¸€ç³»åˆ—é™æ€å­˜åœ¨çš„æ–‡ä»¶, è€Œudevåˆ™<code>åŠ¨æ€æä¾›äº†åœ¨ç³»ç»Ÿä¸­å®é™…å­˜åœ¨çš„è®¾å¤‡èŠ‚ç‚¹</code>, è™½ç„¶åœ¨Linuxä¸­æ˜¯é‡‡ç”¨çš„devfsæä¾›ç±»ä¼¼åŠŸèƒ½ä½†æ˜¯udevæœ‰æ›´å¥½ä½¿ç”¨çš„ç†ç”±:</p>
<ul>
<li>udev æ”¯æŒè®¾å¤‡çš„å›ºå®šå‘½åè€Œ<code>å¹¶ä¸ä¾èµ–äºè®¾å¤‡æ’å…¥ç³»ç»Ÿçš„é¡ºåº</code>, å³é»˜è®¤çš„udevè®¾ç½®æä¾›äº†å­˜å‚¨è®¾å¤‡çš„å›ºå®šå‘½åå¯ä»¥ä½¿ç”¨<code>å…¶vidï¼ˆvendorï¼‰ã€pidï¼ˆdeviceï¼‰ã€è®¾å¤‡åç§°ï¼ˆmodelï¼‰</code>ç­‰å±æ€§æˆ–å…¶çˆ¶è®¾å¤‡çš„å¯¹åº”å±æ€§æ¥ç¡®è®¤æŸä¸€è®¾å¤‡ã€‚</li>
<li>udev å®Œå…¨åœ¨ç”¨æˆ·ç©ºé—´(user space) æ‰§è¡Œè€Œ<code>ä¸æ˜¯åƒdevfsåœ¨å†…æ ¸ç©ºé—´ (kernel space) ä¸€æ ·æ‰§è¡Œ</code>, ç»“æœå°±æ˜¯udevå°†å‘½åç­–ç•¥ä»å†…æ ¸ä¸­ç§»èµ°å¹¶å¯ä»¥åœ¨èŠ‚ç‚¹åˆ›å»ºå‰ç”¨ä»»æ„ç¨‹åºåœ¨è®¾å¤‡å±æ€§ä¸­ä¸ºè®¾å¤‡å‘½åã€‚</li>
</ul>
</blockquote>
<p><br/></p>
<p><strong>è¿è¡ŒåŸç†:</strong></p>
<ul>
<li>1.å®ƒä»¥å®ˆæŠ¤è¿›ç¨‹çš„æ–¹å¼è¿è¡ŒäºLinuxç³»ç»Ÿï¼Œå¹¶ç›‘å¬åœ¨æ–°è®¾å¤‡åˆå§‹åŒ–æˆ–è®¾å¤‡ä»ç³»ç»Ÿä¸­ç§»é™¤æ—¶ï¼Œå†…æ ¸ï¼ˆé€šè¿‡<code>netlink socket</code>ï¼‰æ‰€å‘å‡ºçš„ uevent(<code>æ—©æœŸçš„ç‰ˆæœ¬ä½¿ç”¨hotplugï¼Œå¹¶åœ¨/etc/hotplug.d/defaultæ·»åŠ ä¸€ä¸ªé“¾æ¥åˆ°è‡ªèº«æ¥è¾¾åˆ°ç›®çš„</code>)ï¼Œå¹¶é€šè¿‡ä¸€å¥—è§„åˆ™ç”¨äºåŒ¹é…å¯å‘ç°çš„è®¾å¤‡äº‹ä»¶å’Œå±æ€§çš„å¯¼å‡ºå€¼, è¯¥è§„åˆ™å¹¶å¯ä»¥æ ¹æ®<code>åŒ¹é…åƒå†…æ ¸å­ç³»ç»Ÿã€å†…æ ¸è®¾å¤‡åç§°ã€è®¾å¤‡çš„ç‰©ç†ç­‰å±æ€§æˆ–è®¾å¤‡åºåˆ—å·çš„å±æ€§</code>, æ¥å¯¹è®¾å¤‡è®¾å®šä¸€ä¸ªæŒä¹…çš„åç§°ï¼Œè€Œä¸ç®¡è¯¥è®¾å¤‡ä»€ä¹ˆæ—¶å€™è¢«å‘ç°æ·»åŠ ;</li>
<li>2.æˆ‘ä»¬çŸ¥é“åœ¨Linuxä¸­ä¸‡ç‰©çš†æ–‡ä»¶è€Œ/devç›®å½•åŒ…å«äº†æ‰€æœ‰å¯èƒ½å‡ºç°çš„è®¾å¤‡çš„è®¾å¤‡æ–‡ä»¶, ä½¿ç”¨udevé€šè¿‡å®šä¹‰ä¸€ä¸ª udev è§„åˆ™ (rule) æ¥äº§ç”ŸåŒ¹é…è®¾å¤‡å±æ€§çš„è®¾å¤‡æ–‡ä»¶ï¼Œè¿™äº›è®¾å¤‡å±æ€§å¯ä»¥æ˜¯å†…æ ¸è®¾å¤‡åç§°ã€æ€»çº¿è·¯å¾„ã€å‚å•†åç§°ã€å‹å·ã€åºåˆ—å·æˆ–è€…ç£ç›˜å¤§å°ç­‰ç­‰ã€‚</li>
</ul>
<p><br/></p>
<p><strong>udevåŠŸèƒ½ç‰¹ç‚¹</strong></p>
<ul>
<li>1.åŠ¨æ€ç®¡ç†: å½“è®¾å¤‡æ·»åŠ  / åˆ é™¤æ—¶ï¼Œudev çš„å®ˆæŠ¤è¿›ç¨‹ä¾¦å¬æ¥è‡ªå†…æ ¸çš„ ueventï¼Œä»¥æ­¤æ·»åŠ æˆ–è€…åˆ é™¤ /devä¸‹çš„è®¾å¤‡æ–‡ä»¶ï¼Œæ‰€ä»¥ udev åªä¸ºå·²ç»è¿æ¥çš„è®¾å¤‡äº§ç”Ÿè®¾å¤‡æ–‡ä»¶è€Œä¸ä¼šåœ¨ /devä¸‹äº§ç”Ÿå¤§é‡è™šæ— çš„è®¾å¤‡æ–‡ä»¶ã€‚</li>
<li>2.è‡ªå®šä¹‰å‘½åè§„åˆ™ï¼šé€šè¿‡ Linux é»˜è®¤çš„è§„åˆ™æ–‡ä»¶ï¼Œudev åœ¨ /dev/ é‡Œä¸ºæ‰€æœ‰çš„è®¾å¤‡å®šä¹‰äº†å†…æ ¸è®¾å¤‡åç§°ï¼Œæ¯”å¦‚ /dev/sdaã€/dev/hdaã€/dev/fdç­‰ç­‰ã€‚ç”±äº udev æ˜¯åœ¨ç”¨æˆ·ç©ºé—´ (user space) è¿è¡Œï¼ŒLinux ç”¨æˆ·å¯ä»¥é€šè¿‡è‡ªå®šä¹‰çš„è§„åˆ™æ–‡ä»¶ï¼Œçµæ´»åœ°äº§ç”Ÿæ ‡è¯†æ€§å¼ºçš„è®¾å¤‡æ–‡ä»¶åï¼Œæ¯”å¦‚ /dev/boot_diskã€/dev/root_diskã€/dev/color_printerç­‰ç­‰</li>
<li>3.è®¾å®šè®¾å¤‡çš„æƒé™å’Œæ‰€æœ‰è€… / ç»„ï¼šudev å¯ä»¥æŒ‰ä¸€å®šçš„æ¡ä»¶æ¥è®¾ç½®è®¾å¤‡æ–‡ä»¶çš„æƒé™å’Œè®¾å¤‡æ–‡ä»¶æ‰€æœ‰è€… / ç»„ã€‚(æ³¨æ„<code>ä¸åŒç‰ˆæœ¬å®ç°æˆ–è®¸ä¸åŒ</code>)</li>
</ul>
<p><br/></p>
<p><strong>Q: æ€»ç»“ä¸€å¥è¯ç®€è¿°udevçš„ä½œç”¨?</strong><br>ç­”: ç³»ç»Ÿè¯†åˆ«è®¾å¤‡éƒ½ä¼šåœ¨/devç›®å½•ä¸‹åˆ›å»ºè®¾å¤‡æ–‡ä»¶ä¸ä¸»ã€æ¬¡è®¾å¤‡è¡¨å·ç­‰æ¯æ¬¡å¸è½½æŒ‚è½½åå…¶è®¾å¤‡åç§°å°†ä¼šåŠ¨æ€çš„å˜åŒ–, å¯¹äºæˆ‘ä»¬æ¥è¯´å½“ç„¶ä¸å¸Œæœ›å‡ºç°è¿™æ ·çš„æƒ…å†µ, å®ƒå¯ä»¥ä¸ºè®¾å¤‡æä¾›æŒä¹…ã€è‡ªå®šä¹‰çš„è®¾å¤‡åç§°è¿›è¡ŒæŒ‚è½½åˆ°ç³»ç»Ÿä¸Šä¾¿äºä½¿ç”¨è€…åŒºåˆ†ä½¿ç”¨ã€‚</p>
<p><br/></p>
<p><strong>udev å·¥ä½œæµç¨‹å›¾ï¼š</strong><br><figure class="image-box">
                <a rel=udevé«˜æ•ˆã€åŠ¨æ€åœ°ç®¡ç† Linux è®¾å¤‡æ–‡ä»¶ href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200915205158.png" target="_blank" title="WeiyiGeek.æµç¨‹å›¾æ˜¾ç¤º udev æ·»åŠ  / åˆ é™¤è®¾å¤‡æ–‡ä»¶çš„è¿‡ç¨‹" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200915205158.png" alt="WeiyiGeek.æµç¨‹å›¾æ˜¾ç¤º udev æ·»åŠ  / åˆ é™¤è®¾å¤‡æ–‡ä»¶çš„è¿‡ç¨‹" title="" class=""></a>
                <p>WeiyiGeek.æµç¨‹å›¾æ˜¾ç¤º udev æ·»åŠ  / åˆ é™¤è®¾å¤‡æ–‡ä»¶çš„è¿‡ç¨‹</p>
            </figure></p>
<p><br/></p>
<p><strong>ç³»ç»Ÿæ¶æ„:</strong></p>
<ul>
<li>libudevå‡½æ•°åº“ï¼Œå¯ä»¥ç”¨æ¥è·å–è®¾å¤‡çš„ä¿¡æ¯ã€‚</li>
<li>udevdå®ˆæŠ¤è¿›ç¨‹ï¼Œå¤„äºç”¨æˆ·ç©ºé—´ï¼Œç”¨äºç®¡ç†è™šæ‹Ÿ/dev</li>
<li>udevadmç®¡ç†å‘½ä»¤ï¼Œç”¨æ¥è¯Šæ–­å‡ºé”™æƒ…å†µã€‚</li>
</ul>
<p><br/></p>
<p><strong>ç›¸å…³æœ¯è¯­ï¼š</strong></p>
<ul>
<li>1.è®¾å¤‡æ–‡ä»¶ï¼šç”±äºæœ¬æ–‡ä»¥è¾ƒé€šä¿—çš„æ–¹å¼è®²è§£ udevï¼Œæ‰€ä»¥è®¾å¤‡æ–‡ä»¶æ˜¯æ³›æŒ‡åœ¨ /dev/ä¸‹ï¼Œ<code>å¯è¢«åº”ç”¨ç¨‹åºç”¨æ¥å’Œè®¾å¤‡é©±åŠ¨äº¤äº’çš„æ–‡ä»¶</code>ã€‚è€Œä¸ä¼šç‰¹åˆ«åœ°åŒºåˆ†è®¾å¤‡æ–‡ä»¶ã€è®¾å¤‡èŠ‚ç‚¹æˆ–è€…è®¾å¤‡ç‰¹æ®Šæ–‡ä»¶;</li>
<li>2.devfsï¼šdevfsæ˜¯ Linux æ—©æœŸçš„è®¾å¤‡ç®¡ç†å·¥å…·ï¼Œå·²ç»è¢« udev å–ä»£ã€‚</li>
<li>3.sysfsï¼šsysfsæ˜¯ Linux 2.6 å†…æ ¸é‡Œçš„ä¸€ä¸ªè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ (/sys)ã€‚å®ƒ<code>æŠŠè®¾å¤‡å’Œé©±åŠ¨çš„ä¿¡æ¯ä»å†…æ ¸çš„è®¾å¤‡æ¨¡å—å¯¼å‡ºåˆ°ç”¨æˆ·ç©ºé—´ (userspace)</code>ã€‚ä»è¯¥æ–‡ä»¶ç³»ç»Ÿä¸­Linux ç”¨æˆ·å¯ä»¥è·å–å¾ˆå¤šè®¾å¤‡çš„å±æ€§å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç¼–å†™udevè§„åˆ™ã€‚</li>
<li>4.devpathï¼šæœ¬æ–‡çš„ devpathæ˜¯æŒ‡ä¸€ä¸ªè®¾å¤‡åœ¨ sysfsæ–‡ä»¶ç³»ç»Ÿ (/sys)ä¸‹çš„ç›¸å¯¹è·¯å¾„ï¼Œè¯¥è·¯å¾„åŒ…å«äº†è¯¥è®¾å¤‡çš„å±æ€§æ–‡ä»¶ã€‚udev é‡Œçš„å¤šæ•°å‘½ä»¤éƒ½æ˜¯é’ˆå¯¹ devpathæ“ä½œçš„ã€‚<code>ä¾‹å¦‚ï¼šsdaçš„ devpathæ˜¯ /block/sdaï¼Œsda2 çš„ devpathæ˜¯ /block/sda/sda2</code></li>
<li>5.å†…æ ¸è®¾å¤‡åç§°ï¼šè®¾å¤‡åœ¨ sysfsé‡Œçš„åç§°ï¼Œæ˜¯ udev é»˜è®¤ä½¿ç”¨çš„è®¾å¤‡æ–‡ä»¶åã€‚ ä¾‹å¦‚:<code>udevadm info -a -n /dev/sda | grep &quot;KERNEL&quot;</code> è¿”å›çš„å³ä¸ºå†…æ ¸è®¾å¤‡åç§° KERNEL==â€sdaâ€</li>
</ul>
<p><em>æ³¨æ„äº‹é¡¹:</em></p>
<ul>
<li>1) ä½¿ç”¨æ–°ç‰ˆæœ¬udevçš„ç³»ç»Ÿä¸èƒ½åœ¨ 2.6.13 ä»¥ä¸‹ç‰ˆæœ¬å¯åŠ¨ï¼Œé™¤éä½¿ç”¨noudevå‚æ•°æ¥ç¦ç”¨udevå¹¶ä½¿ç”¨ä¼ ç»Ÿçš„/devæ¥è¿›è¡Œè®¾å¤‡è¯»å–ã€‚ </li>
</ul>
<hr>
<h4 id="0x01-å®‰è£…udev"><a href="#0x01-å®‰è£…udev" class="headerlink" title="0x01 å®‰è£…udev"></a>0x01 å®‰è£…udev</h4><p>æè¿°:ä» Fedora3 å’Œ Red Hat Enterprise4 å¼€å§‹ï¼Œudev å°±æ˜¯é»˜è®¤çš„è®¾å¤‡ç®¡ç†å·¥å…·å¹¶ä¸”ç°åœ¨udevå·²ç»è¢«é›†æˆåˆ°systemdä¸­,æ‰€ä»¥å¸¸ç”¨çš„Linuxå‘è¡Œç‰ˆæœ¬æ— éœ€å¦å¤–ä¸‹è½½å®‰è£…;</p>
<p>æ£€æŸ¥1.æŸ¥çœ‹ç³»ç»Ÿä¸­ç‰ˆæœ¬ä»¥åŠudevè¿è¡Œæƒ…å†µ<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.CentOS</span></span><br><span class="line"><span class="variable">$yum</span> list | grep <span class="string">"libgudev1"</span></span><br><span class="line">libgudev1.i686                            219-73.el7_8.9               updates</span><br><span class="line">libgudev1.x86_64                          219-73.el7_8.9               updates</span><br><span class="line">libgudev1-devel.i686                      219-73.el7_8.9               updates</span><br><span class="line">libgudev1-devel.x86_64                    219-73.el7_8.9               updates</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.Ubuntu</span></span><br><span class="line"><span class="variable">$apt</span> list | egrep <span class="string">"^udev"</span></span><br><span class="line">udev/focal-updates,now 245.4-4ubuntu3.2 amd64 [installed,automatic]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.è¿è¡ŒçŠ¶æ€æŸ¥çœ‹</span></span><br><span class="line">$ ps -ef | grep <span class="string">"udev"</span></span><br><span class="line">UID        PID  PPID  C STIME TTY          TIME CMD</span><br><span class="line">root     15981     1  0 9æœˆ11 ?       00:00:00 /usr/lib/systemd/systemd-udevd  <span class="comment"># å·²ç»é›†æˆåˆ°systemdä¸­äº†</span></span><br><span class="line"></span><br><span class="line">$ systemctl status udev.service</span><br><span class="line">â— systemd-udevd.service - udev Kernel Device Manager</span><br><span class="line">     Loaded: loaded (/lib/systemd/system/systemd-udevd.service; static; vendor preset: enabled)</span><br><span class="line">     Active: active (running) since Tue 2020-09-15 09:27:07 CST; 13h ago</span><br><span class="line">TriggeredBy: â— systemd-udevd-kernel.socket</span><br><span class="line">             â— systemd-udevd-control.socket</span><br><span class="line">       Docs: man:systemd-udevd.service(8)</span><br><span class="line">             man:udev(7)</span><br><span class="line">   Main PID: 823 (systemd-udevd)</span><br><span class="line">     Status: <span class="string">"Processing with 96 children at max"</span></span><br><span class="line">      Tasks: 1</span><br><span class="line">     Memory: 171.5M</span><br><span class="line">     CGroup: /system.slice/systemd-udevd.service</span><br><span class="line">             â””â”€823 /lib/systemd/systemd-udevd</span><br></pre></td></tr></table></figure></p>
<hr>
<h4 id="0x02-é…ç½®æ–‡ä»¶æ ‘å½¢"><a href="#0x02-é…ç½®æ–‡ä»¶æ ‘å½¢" class="headerlink" title="0x02 é…ç½®æ–‡ä»¶æ ‘å½¢"></a>0x02 é…ç½®æ–‡ä»¶æ ‘å½¢</h4><p>udev é…ç½®ç›®å½•ä¸€è§ˆ:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ­¤å¤„ä»¥Ubuntu 20.04 TLS ä¸ºä¾‹</span></span><br><span class="line">$ tree -l /etc/udev/</span><br><span class="line">/etc/udev/</span><br><span class="line">â”œâ”€â”€ hwdb.d</span><br><span class="line">â”œâ”€â”€ rules.d</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ 70-snap.snapd.rules</span><br><span class="line">â”‚Â Â  â””â”€â”€ ubuntu--vg-ubuntu--lv.rules</span><br><span class="line">â””â”€â”€ udev.conf</span><br><span class="line"></span><br><span class="line">2 directories, 3 files</span><br></pre></td></tr></table></figure></p>
<p>è¯´æ˜1.udev çš„é…ç½®æ–‡ä»¶<code>/etc/udev/udev.conf</code><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ cat /etc/udev/udev.conf  <span class="comment"># Ubuntu</span></span><br><span class="line"><span class="comment"># see udev.conf(5) for details</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># udevd is also started in the initrd.  When this file is modified you might</span></span><br><span class="line"><span class="comment"># also want to rebuild the initrd, so that it will include the modified configuration.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#udev_log=info</span></span><br><span class="line"><span class="comment">#children_max=</span></span><br><span class="line"><span class="comment">#exec_delay=</span></span><br><span class="line"><span class="comment">#event_timeout=180</span></span><br><span class="line"><span class="comment">#resolve_names=early</span></span><br></pre></td></tr></table></figure></p>
<ul>
<li>udev_rootï¼šudev äº§ç”Ÿçš„è®¾å¤‡æ‰€å­˜æ”¾çš„ç›®å½•ï¼Œé»˜è®¤å€¼æ˜¯ /dev/ã€‚å»ºè®®ä¸è¦ä¿®æ”¹è¯¥å‚æ•°ï¼Œå› ä¸ºå¾ˆå¤šåº”ç”¨ç¨‹åºé»˜è®¤ä¼šä»è¯¥ç›®å½•è°ƒç”¨è®¾å¤‡æ–‡ä»¶ã€‚(<code>ä¸å»ºè®®ä¿®æ”¹</code>)</li>
<li>udev_dbï¼šudev ä¿¡æ¯å­˜æ”¾çš„æ•°æ®åº“æˆ–è€…æ‰€åœ¨ç›®å½•ï¼Œé»˜è®¤å€¼æ˜¯ /dev/.udev.tdbã€‚</li>
<li>udev_rulesï¼šudev è§„åˆ™æ–‡ä»¶çš„åå­—æˆ–è€…æ‰€åœ¨ç›®å½•ï¼Œé»˜è®¤å€¼æ˜¯ /etc/udev/rules.d/ã€‚(<code>ä¸å»ºè®®ä¿®æ”¹</code>)</li>
<li>udev_permissionsï¼šudev æƒé™æ–‡ä»¶çš„åå­—æˆ–è€…æ‰€åœ¨ç›®å½•ï¼Œé»˜è®¤å€¼æ˜¯ /etc/udev/permissions.d/ã€‚</li>
<li>default_mode/ default_owner/ default_groupï¼šå¦‚æœè®¾å¤‡æ–‡ä»¶çš„æƒé™æ²¡æœ‰åœ¨æƒé™æ–‡ä»¶é‡ŒæŒ‡å®šï¼Œå°±ä½¿ç”¨è¯¥å‚æ•°ä½œä¸ºé»˜è®¤æƒé™ï¼Œé»˜è®¤å€¼åˆ†åˆ«æ˜¯ï¼š0600/root/rootã€‚</li>
<li>udev_logï¼šsyslogè®°å½•æ—¥å¿—çš„çº§åˆ«ï¼Œé»˜è®¤å€¼æ˜¯ errã€‚å¦‚æœæ”¹ä¸º info æˆ–è€… debug çš„è¯ï¼Œä¼šæœ‰å†—é•¿çš„ udev æ—¥å¿—è¢«è®°å½•ä¸‹æ¥ã€‚</li>
</ul>
<h5 id="1-æŒ‡ä»¤æ“ä½œç¬¦"><a href="#1-æŒ‡ä»¤æ“ä½œç¬¦" class="headerlink" title="(1) æŒ‡ä»¤æ“ä½œç¬¦"></a>(1) æŒ‡ä»¤æ“ä½œç¬¦</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># (1) udevæŒ‡ä»¤æ“ä½œç¬¦:</span></span><br><span class="line">==    <span class="comment"># è¡¨ç¤ºåŒ¹é… æ¯”è¾ƒé”®ã€å€¼ï¼Œè‹¥ç­‰äºï¼Œåˆ™è¯¥æ¡ä»¶æ»¡è¶³ï¼›</span></span><br><span class="line">!=    <span class="comment"># è¡¨ç¤ºä¸åŒ¹é…  æ¯”è¾ƒé”®ã€å€¼ï¼Œè‹¥ä¸ç­‰äºï¼Œåˆ™è¯¥æ¡ä»¶æ»¡è¶³ï¼›</span></span><br><span class="line">=     <span class="comment"># æŒ‡å®šè¦èµ‹äºˆçš„å€¼ å¯¹ä¸€ä¸ªé”®èµ‹å€¼ï¼›</span></span><br><span class="line">+=    <span class="comment"># æ·»åŠ æ–°å€¼ ä¸ºä¸€ä¸ªè¡¨ç¤ºå¤šä¸ªæ¡ç›®çš„é”®èµ‹å€¼ã€‚</span></span><br><span class="line">:=    <span class="comment"># æŒ‡å®šçš„å€¼ä¸”ä¸å…è®¸è¢«æ›¿æ¢ å¯¹ä¸€ä¸ªé”®èµ‹å€¼ï¼Œå¹¶æ‹’ç»ä¹‹åæ‰€æœ‰å¯¹è¯¥é”®çš„æ”¹åŠ¨</span></span><br></pre></td></tr></table></figure>
<h5 id="2-å­—ç¬¦ä¸²æ›¿æ¢ä¼ å€¼"><a href="#2-å­—ç¬¦ä¸²æ›¿æ¢ä¼ å€¼" class="headerlink" title="(2) å­—ç¬¦ä¸²æ›¿æ¢ä¼ å€¼"></a>(2) å­—ç¬¦ä¸²æ›¿æ¢ä¼ å€¼</h5><p>æè¿°:å½“ç¼–å†™å¯èƒ½å¤„ç†å¤šä¸ªç±»ä¼¼è®¾å¤‡çš„è§„åˆ™æ—¶ï¼Œudevçš„ç±»ä¼¼printfçš„å­—ç¬¦ä¸²æ›¿æ¢æ“ä½œç¬¦éå¸¸æœ‰ç”¨ã€‚Linux ç”¨æˆ·å¯ä»¥éšæ„åœ°å®šåˆ¶ udev è§„åˆ™æ–‡ä»¶çš„å€¼;</p>
<p>ä¾‹å¦‚ï¼šmy_root_disk, my_printer åŒæ—¶ä¹Ÿå¯ä»¥å¼•ç”¨ä¸‹é¢çš„æ›¿æ¢æ“ä½œç¬¦ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$kernel</span>, %kï¼šè®¾å¤‡çš„å†…æ ¸è®¾å¤‡åç§°, ä¾‹å¦‚â€œsda3â€è¡¨ç¤ºå°†(é»˜è®¤æƒ…å†µä¸‹)å‡ºç°åœ¨/dev/sda3ä¸Šçš„è®¾å¤‡</span><br><span class="line"><span class="variable">$number</span>, %n: è®¡ç®—è®¾å¤‡çš„å†…æ ¸å·(å­˜å‚¨è®¾å¤‡çš„åˆ†åŒºå·): e.g. <span class="string">"3"</span> <span class="keyword">for</span> /dev/sda3</span><br><span class="line"><span class="variable">$devpath</span>, %p: è®¾å¤‡çš„ devpathè·¯å¾„ã€‚</span><br><span class="line"><span class="variable">$id</span>, %bï¼šè®¾å¤‡åœ¨ devpathé‡Œçš„ ID å·ã€‚</span><br><span class="line"><span class="variable">$sysfs</span>&#123;file&#125;, %s&#123;file&#125;ï¼šè®¾å¤‡çš„ sysfs é‡Œ file çš„å†…å®¹å°±æ˜¯è®¾å¤‡å±æ€§å€¼, ä¾‹å¦‚ï¼š<span class="variable">$sysfs</span>&#123;size&#125; è¡¨ç¤ºè¯¥è®¾å¤‡ ( ç£ç›˜ ) çš„å¤§å°ã€‚</span><br><span class="line"><span class="variable">$env</span>&#123;key&#125;, %E&#123;key&#125;ï¼šä¸€ä¸ªç¯å¢ƒå˜é‡çš„å€¼ã€‚</span><br><span class="line"><span class="variable">$major</span>, %Mï¼šè®¾å¤‡çš„ major å·ã€‚</span><br><span class="line"><span class="variable">$minor</span> %mï¼šè®¾å¤‡çš„ minor å·ã€‚</span><br><span class="line"><span class="variable">$result</span>, %cï¼šPROGRAM è¿”å›çš„ç»“æœã€‚</span><br><span class="line"><span class="variable">$parent</span>, %Pï¼šçˆ¶è®¾å¤‡çš„è®¾å¤‡æ–‡ä»¶åã€‚</span><br><span class="line"><span class="variable">$root</span>, %rï¼šudev_rootçš„å€¼ï¼Œé»˜è®¤æ˜¯ /dev/ã€‚</span><br><span class="line"><span class="variable">$tempnode</span>, %Nï¼šä¸´æ—¶è®¾å¤‡åã€‚</span><br><span class="line">%%ï¼šç¬¦å· % æœ¬èº«ã€‚</span><br><span class="line">$$ï¼šç¬¦å· $ æœ¬èº«ã€‚</span><br></pre></td></tr></table></figure></p>
<p>ç®€å•å®ä¾‹:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.ä¸‹é¢ç¤ºä¾‹ä¸­çš„$kernelå’Œ$numberæ˜¯æ›¿æ¢æ“ä½œç¬¦çš„è§„åˆ™ä¾‹å­</span></span><br><span class="line"><span class="comment"># ç¬¬ä¸€ä¸ªè§„åˆ™ç¡®ä¿miceè®¾å¤‡èŠ‚ç‚¹åªå‡ºç°åœ¨/dev/inputç›®å½•ä¸­(é»˜è®¤æƒ…å†µä¸‹æ˜¯åœ¨/dev/mice)</span></span><br><span class="line"><span class="comment"># ç¬¬äºŒä¸ªè§„åˆ™ç¡®ä¿åä¸ºloop0çš„è®¾å¤‡èŠ‚ç‚¹åœ¨/dev/loop/0å¤„åˆ›å»ºï¼Œå¹¶ä¸”åƒå¾€å¸¸ä¸€æ ·åœ¨/dev/loop0å¤„åˆ›å»ºä¸€ä¸ªç¬¦å·é“¾æ¥ã€‚</span></span><br><span class="line">KERNEL==<span class="string">"mice"</span>, NAME=<span class="string">"input/%k"</span></span><br><span class="line">KERNEL==<span class="string">"loop0"</span>, NAME=<span class="string">"loop/%n"</span>, SYMLINK+=<span class="string">"%k"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.è¯¥è§„åˆ™çš„æ‰§è¡Œï¼šå¦‚æœæœ‰ä¸€ä¸ªå†…æ ¸è®¾å¤‡åç§°ä»¥ sd å¼€å¤´ï¼Œä¸” SCSI ID ä¸º 35000c50000a7ef67ï¼Œåˆ™ä¸ºè®¾å¤‡æ–‡ä»¶äº§ç”Ÿä¸€ä¸ªç¬¦å·é“¾æ¥â€œsda_35000c50000a7ef67â€.</span></span><br><span class="line">KERNEL==<span class="string">"sd*"</span>, PROGRAM=<span class="string">"/lib/udev/scsi_id -g -s %p"</span>, \</span><br><span class="line">RESULT==<span class="string">"35000c50000a7ef67"</span>, SYMLINK=<span class="string">"%k_%c"</span></span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h5 id="3-å­—ç¬¦ä¸²åŒ¹é…"><a href="#3-å­—ç¬¦ä¸²åŒ¹é…" class="headerlink" title="(3) å­—ç¬¦ä¸²åŒ¹é…"></a>(3) å­—ç¬¦ä¸²åŒ¹é…</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨shellé£æ ¼çš„æ¨¡å¼åŒ¹é…(å®é™…éƒ½æ˜¯æ­£åˆ™è¿™é‡Œä¸è¿‡å¤šæ¥å—äº†)</span></span><br><span class="line">* - match any character, zero or more <span class="built_in">times</span></span><br><span class="line">? - match any character exactly once</span><br><span class="line">[] - match any single character specified <span class="keyword">in</span> the brackets, ranges are also permitted</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.åŸºç¡€ç¤ºä¾‹</span></span><br><span class="line"><span class="comment"># ç¬¬ä¸€ä¸ªè§„åˆ™åŒ¹é…æ‰€æœ‰è½¯ç›˜é©±åŠ¨å™¨ï¼Œå¹¶ç¡®ä¿è®¾å¤‡èŠ‚ç‚¹è¢«æ”¾ç½®åœ¨/dev/floppyç›®å½•ä¸­ï¼Œå¹¶ä»é»˜è®¤åç§°åˆ›å»ºç¬¦å·é“¾æ¥ã€‚</span></span><br><span class="line"><span class="comment"># ç¬¬äºŒæ¡è§„åˆ™ç¡®ä¿hiddevè®¾å¤‡åªå­˜åœ¨äº/dev/usbç›®å½•ä¸­ã€‚</span></span><br><span class="line">KERNEL==<span class="string">"fd[0-9]*"</span>, NAME=<span class="string">"floppy/%n"</span>, SYMLINK+=<span class="string">"%k"</span></span><br><span class="line">KERNEL==<span class="string">"hiddev*"</span>, NAME=<span class="string">"usb/%k"</span></span><br></pre></td></tr></table></figure>
<h5 id="4-è®¾å¤‡æ–‡ä»¶çš„æƒé™"><a href="#4-è®¾å¤‡æ–‡ä»¶çš„æƒé™" class="headerlink" title="(4) è®¾å¤‡æ–‡ä»¶çš„æƒé™"></a>(4) è®¾å¤‡æ–‡ä»¶çš„æƒé™</h5><p>æ³¨æ„åœ¨ RHEL5.3 çš„ udev å·²ç»æ²¡æœ‰æƒé™æ–‡ä»¶ï¼Œæ‰€æœ‰çš„æƒé™éƒ½æ˜¯é€šè¿‡è§„åˆ™æ–‡ä»¶ <code>(*.rules)</code>æ¥è®¾ç½®</p>
<h5 id="5-udevåŸºæœ¬è§„åˆ™"><a href="#5-udevåŸºæœ¬è§„åˆ™" class="headerlink" title="(5) udevåŸºæœ¬è§„åˆ™"></a>(5) udevåŸºæœ¬è§„åˆ™</h5><p>æè¿°:ç”¨äºç²¾ç¡®è£…ç½®åŒ¹é…è®¾å¤‡çš„è§„åˆ™å¸¸ç”¨å¦‚ä¸‹:</p>
<ul>
<li>KERNEL - åŒ¹é…è®¾å¤‡çš„å†…æ ¸åå­—</li>
<li>SUBSYSTEM - åŒ¹é…è®¾å¤‡çš„å­ç³»ç»Ÿå³<code>/dev/block/</code>å’Œ<code>/dev/net</code>;</li>
<li>DRIVER - åŒ¹é…è®¾å¤‡é©±åŠ¨å</li>
<li>NAME - åœ¨ /devä¸‹äº§ç”Ÿçš„è®¾å¤‡æ–‡ä»¶å</li>
<li>SYMLINK - ä¸º /dev/ä¸‹çš„è®¾å¤‡æ–‡ä»¶äº§ç”Ÿç¬¦å·é“¾æ¥,ç”±äº udev åªèƒ½ä¸ºæŸä¸ªè®¾å¤‡äº§ç”Ÿä¸€ä¸ªè®¾å¤‡æ–‡ä»¶ï¼Œæ‰€ä»¥ä¸ºäº†ä¸è¦†ç›–ç³»ç»Ÿé»˜è®¤çš„ udev è§„åˆ™æ‰€äº§ç”Ÿçš„æ–‡ä»¶ï¼Œæ¨èä½¿ç”¨ç¬¦å·é“¾æ¥ã€‚</li>
<li>ACTION - äº‹ä»¶ (uevent) çš„è¡Œä¸ºä¾‹å¦‚add( æ·»åŠ è®¾å¤‡ )ã€remove( åˆ é™¤è®¾å¤‡)</li>
<li>SYSFS{filename} - è®¾å¤‡çš„ devpath è·¯å¾„ä¸‹ï¼Œè®¾å¤‡çš„å±æ€§æ–‡ä»¶â€œfilenameâ€é‡Œçš„å†…å®¹; å¦‚ <code>SYSFS{model}==â€œST936701SSâ€</code> è¡¨ç¤ºå¦‚æœè®¾å¤‡çš„å‹å·ä¸º ST936701SSï¼Œåˆ™è¯¥è®¾å¤‡åŒ¹é…è¯¥åŒ¹é…é”®ã€‚</li>
<li><p>ATTRS - åŒ¹é…è®¾å¤‡çš„sysfså±æ€§ï¼Œæˆ–ä»»ä½•çˆ¶è®¾å¤‡çš„sysfså±æ€§</p>
</li>
<li><p>DEVPATH - è®¾å¤‡çš„ devpath è·¯å¾„ã€‚</p>
</li>
<li>ENV{key} - ç¯å¢ƒå˜é‡ã€‚<br>ENV{key}ï¼šå¯¼å…¥ä¸€ä¸ªç¯å¢ƒå˜é‡ã€‚</li>
<li>BUS - è®¾å¤‡åœ¨ devpath é‡Œçš„æ€»çº¿åç§°ï¼Œä¾‹å¦‚usb</li>
<li>DRIVER - è®¾å¤‡åœ¨ devpath é‡Œçš„è®¾å¤‡é©±åŠ¨åç§°ï¼Œä¾‹å¦‚ ide-cdrom</li>
<li>ID - è®¾å¤‡åœ¨ devpath é‡Œçš„è¯†åˆ«å·</li>
<li>PROGRAM - è°ƒç”¨å¤–éƒ¨å‘½ä»¤ã€‚</li>
<li>RESULT -  å¤–éƒ¨å‘½ä»¤ PROGRAM çš„è¿”å›ç»“æœã€‚</li>
<li>OWNER, GROUP, MODE - ä¸ºè®¾å¤‡è®¾å®šæƒé™ã€‚</li>
</ul>
<p>ç®€å•å®ä¾‹:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¤ºä¾‹1.åŒ¹é…é”®ä¸æ“ä½œç¬¦</span></span><br><span class="line">NAME = <span class="string">"udisk"</span>,      <span class="comment"># å®šä¹‰è®¾å¤‡åç§°</span></span><br><span class="line">SYMLINK += <span class="string">"data1"</span>,  <span class="comment"># å®šä¹‰è®¾å¤‡çš„åˆ«å</span></span><br><span class="line">OWNER = <span class="string">"student"</span>,   <span class="comment"># å®šä¹‰è®¾å¤‡çš„æ‰€æœ‰è€…</span></span><br><span class="line">MODE = <span class="string">"0600"</span>,       <span class="comment"># å®šä¹‰è®¾å¤‡çš„æƒé™</span></span><br><span class="line">ACTION == <span class="string">"add"</span>,     <span class="comment"># åˆ¤æ–­è®¾å¤‡çš„æ“ä½œåŠ¨ä½œã€æ·»åŠ æˆ–åˆ é™¤è®¾å¤‡ç­‰</span></span><br><span class="line">KERNEL == <span class="string">"sd[a-z]1"</span>, <span class="comment"># åˆ¤æ–­è®¾å¤‡çš„å†…æ ¸åç§°</span></span><br><span class="line">RUN += ç¨‹åº          <span class="comment"># ä¸ºè®¾å¤‡æ·»åŠ ç¨‹åº</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹2.å¦‚æœè®¾å¤‡çš„å‹å·ä¸º ST936701SSå¹¶ä¸”sysfsçš„sizeå±æ€§åŒ¹é…234441648å€¼,åˆ™è¯¥è®¾å¤‡åŒ¹é…è¯¥åŒ¹é…é”®</span></span><br><span class="line">SUBSYSTEM==<span class="string">"block"</span>,SYSFS&#123;model&#125;==<span class="string">"ST936701SS"</span>,ATTR&#123;size&#125;==<span class="string">"234441648"</span>, SYMLINK+=<span class="string">"my_disk"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹3.è°ƒç”¨å¤–éƒ¨å‘½ä»¤ /lib/udev/scsi_idæŸ¥è¯¢è®¾å¤‡çš„ SCSI IDï¼Œå¦‚æœè¿”å›ç»“æœä¸º 35000c50000a7ef67ï¼Œåˆ™è¯¥è®¾å¤‡åŒ¹é…è¯¥åŒ¹é…é”®ã€‚</span></span><br><span class="line">SUBSYSTEM==<span class="string">"block"</span>,PROGRAM==<span class="string">"/lib/udev/scsi_id -g -s <span class="variable">$devpath</span>"</span>, RESULT==<span class="string">"35000c50000a7ef67"</span></span><br></pre></td></tr></table></figure></p>
<p><strong>æ³¨æ„äº‹é¡¹:</strong></p>
<ul>
<li>å¦‚æœæ²¡æœ‰ä»»ä½•è§„åˆ™å¯¹è®¾å¤‡çš„ NAME èµ‹å€¼ï¼Œudev å°†ä½¿ç”¨å†…æ ¸è®¾å¤‡åç§°æ¥äº§ç”Ÿè®¾å¤‡æ–‡ä»¶</li>
<li>åœ¨ä¸€æ¡è§„åˆ™ä¸­å¯ä»¥è®¾å®šæœ€å¤šäº”æ¡ SYSFS çš„åŒ¹é…é”®ä»¥åŠç¯å¢ƒå˜é‡çš„åŒ¹é…é”®ã€‚</li>
</ul>
<hr>
<h5 id="5-sysfsç³»ç»Ÿè®¾å¤‡å±æ€§"><a href="#5-sysfsç³»ç»Ÿè®¾å¤‡å±æ€§" class="headerlink" title="(5) sysfsç³»ç»Ÿè®¾å¤‡å±æ€§"></a>(5) sysfsç³»ç»Ÿè®¾å¤‡å±æ€§</h5><p>æè¿°: å½“æˆ‘ä»¬ä¸ºæŒ‡å®šçš„è®¾å¤‡è®¾å®šè§„åˆ™æ—¶ï¼Œé¦–å…ˆéœ€è¦çŸ¥é“è¯¥è®¾å¤‡çš„å±æ€§ï¼Œæ¯”å¦‚è®¾å¤‡çš„åºåˆ—å·ã€ç£ç›˜å¤§å°ã€å‚å•† IDã€è®¾å¤‡è·¯å¾„ç­‰ç­‰ã€‚é€šå¸¸æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹çš„æ–¹æ³•è·å¾—ï¼š</p>
<ul>
<li>1.æ ¹æ® sysfs æŸ¥æ‰¾è®¾å¤‡çš„ä¿¡æ¯ ( å±æ€§ ) æ¥åˆ¶å®š udev è§„åˆ™</li>
<li>2.é‡‡ç”¨udevadmå‘½ä»¤çš„infoå­å‘½ä»¤å¯ä»¥æŸ¥è¯¢ udev æ•°æ®åº“é‡Œçš„è®¾å¤‡ä¿¡æ¯ã€‚</li>
</ul>
<p>sysfsè®¾å¤‡çš„ä¿¡æ¯(å±æ€§):<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># (1) ç›®å½•è¡¨ç¤ºå…·æœ‰ç›¸åº”è®¾å¤‡èŠ‚ç‚¹çš„å®é™…è®¾å¤‡</span></span><br><span class="line"><span class="variable">$sudo</span> find /sys -name dev | grep <span class="string">"pci"</span></span><br><span class="line">/sys/devices/pci0000:00/0000:00:1f.2/ata10/host11/target11:0:0/11:0:0:0/scsi_generic/sg1/dev</span><br><span class="line">/sys/devices/pci0000:00/0000:00:1f.2/ata10/host11/target11:0:0/11:0:0:0/block/sr0/dev</span><br><span class="line">/sys/devices/pci0000:00/0000:00:1f.2/ata10/host11/target11:0:0/11:0:0:0/bsg/11:0:0:0/dev</span><br><span class="line">/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/host0/target0:2:0/0:2:0:0/scsi_generic/sg0/dev</span><br><span class="line">/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/host0/target0:2:0/0:2:0:0/block/sda/sda4/dev</span><br><span class="line">/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/host0/target0:2:0/0:2:0:0/block/sda/sda2/dev</span><br><span class="line">/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/host0/target0:2:0/0:2:0:0/block/sda/dev</span><br><span class="line">/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/host0/target0:2:0/0:2:0:0/block/sda/sda3/dev</span><br><span class="line">/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/host0/target0:2:0/0:2:0:0/block/sda/sda1/dev</span><br><span class="line">/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/host0/target0:2:0/0:2:0:0/bsg/0:2:0:0/dev</span><br><span class="line">/sys/devices/pci0000:00/0000:00:1c.3/0000:03:00.0/ptp/ptp2/dev</span><br><span class="line">/sys/devices/pci0000:00/0000:00:1c.3/0000:03:00.1/ptp/ptp3/dev</span><br><span class="line">/sys/devices/pci0000:00/0000:00:1c.1/0000:07:00.0/0000:08:00.0/0000:09:00.0/0000:0a:00.0/graphics/fb0/dev</span><br><span class="line">/sys/devices/pci0000:00/0000:00:1c.1/0000:07:00.0/0000:08:00.0/0000:09:00.0/0000:0a:00.0/i2c-0/i2c-dev/i2c-0/dev</span><br><span class="line">/sys/devices/pci0000:00/0000:00:1c.1/0000:07:00.0/0000:08:00.0/0000:09:00.0/0000:0a:00.0/drm/card0/dev</span><br><span class="line">/sys/devices/pci0000:00/0000:00:1a.0/usb1/dev</span><br><span class="line">/sys/devices/pci0000:00/0000:00:1a.0/usb1/1-1/dev</span><br><span class="line">/sys/devices/pci0000:00/0000:00:1a.0/usb1/1-1/1-1.6/dev</span><br><span class="line">/sys/devices/pci0000:00/0000:00:1d.0/usb2/2-1/dev</span><br><span class="line">/sys/devices/pci0000:00/0000:00:1d.0/usb2/dev</span><br><span class="line">/sys/devices/pci0000:00/0000:00:02.0/0000:04:00.0/host4/port-4:1/end_device-4:1/bsg/end_device-4:1/dev</span><br><span class="line">/sys/devices/pci0000:00/0000:00:02.0/0000:04:00.0/host4/port-4:0/end_device-4:0/bsg/end_device-4:0/dev</span><br><span class="line">/sys/devices/pci0000:00/0000:00:02.0/0000:04:00.0/host4/bsg/sas_host4/dev</span><br><span class="line">/sys/devices/pci0000:00/0000:00:1c.2/0000:02:00.0/ptp/ptp0/dev</span><br><span class="line">/sys/devices/pci0000:00/0000:00:1c.2/0000:02:00.1/ptp/ptp1/dev</span><br><span class="line"></span><br><span class="line"><span class="comment"># (2) ä¾‹å¦‚åœ¨æˆ‘çš„ç³»ç»Ÿä¸Š `/sys/block/sda` ç›®å½•æ˜¯æˆ‘çš„ç¡¬ç›˜çš„è®¾å¤‡è·¯å¾„, å®ƒé€šè¿‡ /sys/block/sda/device ç¬¦å·é“¾æ¥é“¾æ¥åˆ°å®ƒçš„ä¸Šçº§SCSIç£ç›˜è®¾å¤‡;</span></span><br><span class="line">$ cat /sys/block/sda/size</span><br><span class="line">2341994496   <span class="comment"># åœ¨è§„åˆ™ä¸­å¯ä»¥ä½¿ç”¨ATTR&#123;size&#125;=="234441648"æ¥æ ‡è¯†è¯¥ç£ç›˜</span></span><br><span class="line">$ cat /sys/block/sda/dev</span><br><span class="line">8:0</span><br></pre></td></tr></table></figure></p>
<p>è¡¥å……udevè§„åˆ™æ‰€éœ€å±æ€§ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># (0) é€šè¿‡ scsi_id æŸ¥è¯¢ç£ç›˜çš„ SCSI_ID çš„ä¾‹å­</span></span><br><span class="line">/usr/lib/udev/scsi_id -g -u è®¾å¤‡å</span><br><span class="line">scsi_id -g -s /block/sda </span><br><span class="line">35000c50000a7ef67</span><br><span class="line"></span><br><span class="line"><span class="comment"># (1) ä¾‹å¦‚ï¼šç”¨ udevinfo æŸ¥è¯¢è®¾å¤‡ sda çš„ model å’Œ size ä¿¡æ¯ï¼š</span></span><br><span class="line">udevinfo -a -p /sys/block/sda</span><br><span class="line">udevinfo -a -p /block/sda | egrep <span class="string">"model|size"</span></span><br><span class="line">SYSFS&#123;size&#125;==<span class="string">"71096640"</span></span><br><span class="line">SYSFS&#123;model&#125;==<span class="string">"ST936701SS"</span></span><br><span class="line"><span class="comment"># æˆ–è€…</span></span><br><span class="line">udevadm info -q path -n /dev/sda</span><br><span class="line">/devices/pci0000:00/0000:00:15.0/0000:03:00.0/host1/target1:0:0/1:0:0:0/block/sda</span><br><span class="line">udevadm info -a -q $(udevadm info -q path -n /dev/sda) | </span><br><span class="line">udevadm info -a -n /dev/sda | egrep <span class="string">"model|size"</span></span><br><span class="line">  <span class="comment"># ATTR&#123;size&#125;=="104857600"</span></span><br><span class="line">  <span class="comment"># ATTRS&#123;model&#125;=="Virtual disk    "</span></span><br></pre></td></tr></table></figure></p>
<hr>
<h4 id="0x03-UDEVè§„åˆ™å®ä¾‹"><a href="#0x03-UDEVè§„åˆ™å®ä¾‹" class="headerlink" title="0x03 UDEVè§„åˆ™å®ä¾‹"></a>0x03 UDEVè§„åˆ™å®ä¾‹</h4><p>æè¿°:udev é…ç½®æ–‡ä»¶æ˜¯ /etc/udev/udev.conf è¯¥æ–‡ä»¶å†…å®¹ä¸­æœ‰æŒ‡å®šudevè§„åˆ™å­˜å‚¨ç›®å½•å½¢å¦‚ <code>udev_rules=&quot;/etc/udev/rules.d&quot;</code> è¯¥æŒ‡å®šçš„ç›®å½•ä¸­å­˜å‚¨ä¸€ç³»åˆ—ä»¥.rulesç»“æŸçš„è§„åˆ™æ–‡ä»¶, æ¯ä¸ªæ–‡ä»¶å¤„ç†ä¸€ç³»åˆ—è§„åˆ™æ¥å¸®åŠ©udevåˆ†é…åå­—ç»™è®¾å¤‡æ–‡ä»¶å¹¶ä¿è¯å†…æ ¸å¯ä»¥è¯†åˆ«æ­¤è®¾å¤‡åç§°ã€‚ </p>
<ul>
<li><p>(1) è§„åˆ™æ–‡ä»¶ç”±ç³»åˆ—é”®-å€¼å¯¹ç»„æˆ, é”®å€¼å¯¹åˆ†ä¸¤ç±»ï¼š<code>åŒ¹é…é”®(ä½¿ç”¨æ“ä½œç¬¦&quot;==&quot;,&quot;!=&quot;ç­‰</code>) å’Œ <code>èµ‹å€¼é”®(ä½¿ç”¨&quot;=&quot;,&quot;+=&quot;,&quot;:=&quot;ç­‰)</code>, åŒ¹é…é”®åˆ¤æ–­è§„åˆ™æ˜¯å¦åº”è¢«åº”ç”¨ï¼Œèµ‹å€¼é”®å¯ä»¥è¢«åˆ†é…ä¸€åˆ°å¤šä¸ªå€¼ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è§„åˆ™è¯­æ³•: æ¯ä¸ªè§„åˆ™ç”±ä¸€ç³»åˆ—é”® - å€¼å¯¹ï¼Œè¿™æ˜¯ç”±é€—å·åˆ†éš”çš„æ„é€ </span></span><br><span class="line"><span class="comment"># å®ä¾‹1.KERNEL æ˜¯åŒ¹é…é”®ï¼ŒNAME å’Œ MODE æ˜¯èµ‹å€¼é”®</span></span><br><span class="line">KERNEL==<span class="string">"hdb"</span>, NAME=<span class="string">"my_spare_disk"</span>   </span><br><span class="line"><span class="comment"># å¦‚æœæœ‰ä¸€ä¸ªè®¾å¤‡çš„å†…æ ¸è®¾å¤‡åç§°ä¸º sdaåˆ™è¯¥æ¡ä»¶ç”Ÿæ•ˆï¼Œæ‰§è¡Œåé¢çš„èµ‹å€¼ï¼šåœ¨ /devä¸‹äº§ç”Ÿä¸€ä¸ªåä¸º my_root_diskçš„è®¾å¤‡æ–‡ä»¶ï¼Œå¹¶æŠŠè®¾å¤‡æ–‡ä»¶çš„æƒé™è®¾ä¸º 0660ã€‚</span></span><br><span class="line">KERNEL==<span class="string">"sda"</span>, NAME=<span class="string">"my_root_disk"</span>, MODE=<span class="string">"0660"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>(2) è§„åˆ™æ–‡ä»¶å¿…é¡»ä»¥â€.rulesâ€ä¸ºåç¼€å, åœ¨ RHEL æœ‰é»˜è®¤çš„è§„åˆ™æ–‡ä»¶ï¼Œè¿™äº›é»˜è®¤è§„åˆ™æ–‡ä»¶ä¸ä»…ä¸ºè®¾å¤‡äº§ç”Ÿå†…æ ¸è®¾å¤‡åç§°ï¼Œè¿˜ä¼šäº§ç”Ÿæ ‡è¯†æ€§å¼ºçš„ç¬¦å·é“¾æ¥ã€‚</p>
<ul>
<li>ä¾‹å¦‚ï¼š<code>/dev/disk/by-uuid/ 16afe28a-9da0-482d-93e8-1a9474e7245c</code></li>
<li>å…¶ç¼ºç‚¹æ˜¯é“¾æ¥åç§°è¾ƒé•¿ä¸æ˜“è°ƒç”¨, æ‰€ä»¥é€šå¸¸éœ€è¦è‡ªå®šä¹‰è§„åˆ™æ–‡ä»¶ä»¥æ­¤äº§ç”Ÿæ˜“ç”¨ä¸”æ ‡è¯†æ€§å¼ºçš„è®¾å¤‡æ–‡ä»¶æˆ–ç¬¦å·é“¾æ¥ã€‚</li>
</ul>
</li>
</ul>
<p>æŸ¥çœ‹å·²ä¸ºæ‚¨çš„å­˜å‚¨ç¡¬ä»¶åˆ›å»ºçš„æŒä¹…æ€§åç§°:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ls</span> -lR /dev/disk</span><br><span class="line">/dev/disk:</span><br><span class="line">total 0</span><br><span class="line">drwxr-xr-x 2 root root  60 Sep 14 08:48 by-dname</span><br><span class="line">drwxr-xr-x 2 root root 140 Sep 14 08:48 by-id</span><br><span class="line">drwxr-xr-x 2 root root 120 Sep 14 08:48 by-partuuid</span><br><span class="line">drwxr-xr-x 2 root root 180 Sep 14 08:48 by-path</span><br><span class="line"></span><br><span class="line"><span class="variable">$tree</span> -l /dev/disk</span><br><span class="line">/dev/disk</span><br><span class="line">â”œâ”€â”€ by-id</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ ata-VMware_Virtual_SATA_CDRW_Drive_00000000000000000001 -&gt; ../../sr0</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ dm-name-centos-root -&gt; ../../dm-0</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ dm-name-centos-swap -&gt; ../../dm-1</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ dm-uuid-LVM-aU2d8DppVRkxbqQEFXw2K1tUjzEIAQ83cLOioKmuP4CzguVYh6jGG8qKYeQH9BLJ -&gt; ../../dm-1</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ dm-uuid-LVM-aU2d8DppVRkxbqQEFXw2K1tUjzEIAQ83pkIKVVfwHPfFSrDXwmzJgh1BD4v7yjbJ -&gt; ../../dm-0</span><br><span class="line">â”‚Â Â  â””â”€â”€ lvm-pv-uuid-dBw5Er-e0CA-NnE5-9EZW-PQ08-iW0e-smzxdQ -&gt; ../../sda2</span><br><span class="line">â”œâ”€â”€ by-path</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ pci-0000:02:01.0-ata-1.0 -&gt; ../../sr0</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ pci-0000:03:00.0-scsi-0:0:0:0 -&gt; ../../sda</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ pci-0000:03:00.0-scsi-0:0:0:0-part1 -&gt; ../../sda1</span><br><span class="line">â”‚Â Â  â””â”€â”€ pci-0000:03:00.0-scsi-0:0:0:0-part2 -&gt; ../../sda2</span><br><span class="line">â””â”€â”€ by-uuid</span><br><span class="line">    â”œâ”€â”€ b4d40c4d-2103-4825-8c1e-0d3ce53fa1a1 -&gt; ../../dm-1</span><br><span class="line">    â”œâ”€â”€ dc1ba57c-3df8-43b5-a9c6-d7410a40f598 -&gt; ../../sda1</span><br><span class="line">    â””â”€â”€ e1e3ac22-fd97-4841-baa0-0c3e3a333f0f -&gt; ../../dm-0</span><br></pre></td></tr></table></figure></p>
<p><br/></p>
<h5 id="etc-udev-udev-conf"><a href="#etc-udev-udev-conf" class="headerlink" title="/etc/udev/udev.conf"></a>/etc/udev/udev.conf</h5><p>æè¿°:è¯¥æ–‡ä»¶ä¸ºudevä¸»é…ç½®æ–‡ä»¶ä¸€èˆ¬ä¸ç”¨è¿›è¡Œæ›´æ”¹,å¦‚éœ€æ›´æ”¹è¯·å‚è€ƒudev(5)<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸»é…ç½®æ–‡ä»¶ï¼š/etc/udev/udev.conf</span></span><br><span class="line">  - udev_rootï¼šåˆ›å»ºè®¾å¤‡æ–‡ä»¶ä½ç½®ï¼Œé»˜è®¤ä¸º/dev</span><br><span class="line">  - udev_rulesï¼šudevè§„åˆ™æ–‡ä»¶ä½ç½®ï¼Œé»˜è®¤ä¸º/etc/udev/rules.d</span><br><span class="line">  - udev_log : syslogä¼˜å…ˆçº§ï¼Œç¼ºçœä¸ºerr</span><br><span class="line"><span class="comment"># æ–‡ä»¶ä½ç½®åŠæ ¼å¼</span></span><br><span class="line">  - /etc/udev/rules.d/&lt;rule_name&gt;.rules</span><br><span class="line"><span class="comment"># è§„åˆ™æ ¼å¼</span></span><br><span class="line">&lt;match-key&gt;&lt;op&gt;&lt;value&gt;[,...]&lt;assignment-key&gt;&lt;op&gt;value[,...]</span><br></pre></td></tr></table></figure></p>
<p><br/></p>
<h5 id="etc-udev-rules-d-lt-rule-name-gt-rules"><a href="#etc-udev-rules-d-lt-rule-name-gt-rules" class="headerlink" title="/etc/udev/rules.d/&lt;rule_name&gt;.rules"></a>/etc/udev/rules.d/&lt;rule_name&gt;.rules</h5><p>æè¿°: è¿™é‡Œæ˜¯å­˜æ”¾äº†ç›¸å…³è§„åˆ™æ¥æŒ‡å®šåŒ¹é…ç¡¬ä»¶è®¾å¤‡æŒ‰ç…§ä½•ç§æ–¹å¼è¿›è¡Œç»‘å®šåç§°;</p>
<p>åŸºç¡€å®ä¾‹:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¤ºä¾‹1.åŒ¹é…è¿™æ˜¯ç”±å†…æ ¸å»ºå±‹å±€å¹¶åœ¨åä¸ºè®¾å¤‡çš„é©±åŠ¨ç¨‹åºæ˜¯IDEç£ç›˜ã€‚å‘½åä¸é»˜è®¤åç§°çš„è®¾å¤‡èŠ‚ç‚¹å¹¶åˆ›å»ºä¸€ä¸ªç¬¦å·é“¾æ¥åˆ°å®ƒå‘½åsparediskè®¾å¤‡èŠ‚ç‚¹åç§°ä¸ºmy_spare_disk;</span></span><br><span class="line">KERNEL==<span class="string">"hdb"</span>, DRIVER==<span class="string">"ide-disk"</span>, NAME=<span class="string">"my_spare_disk"</span>, SYMLINK+=<span class="string">"sparedisk"</span>  </span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹2.å®ƒåˆ›å»ºäºçš„/dev/CDROM å’Œ/dev/CDROM0ä¸¤ä¸ªç‚¹çš„/dev/hdcç¬¦å·é“¾æ¥ã€‚åŒæ ·æ²¡æœ‰åç§°åˆ†é…æŒ‡å®šå› æ­¤å°†ä½¿ç”¨é»˜è®¤çš„å†…æ ¸åç§°HDC</span></span><br><span class="line">KERNEL==<span class="string">"hdc"</span>, SYMLINK+=<span class="string">"cdrom cdrom0"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹3.åŒ¹é…çš„sysfsä¸­sizeå±æ€§234441648çš„è®¾å¤‡åˆ›å»º/dev/my_diskç¬¦å·è¿æ¥</span></span><br><span class="line">SUBSYSTEM==<span class="string">"block"</span>, ATTR&#123;size&#125;==<span class="string">"234441648"</span>, SYMLINK+=<span class="string">"my_disk"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å®ä¾‹4.å­ç³»ç»Ÿæ˜¯ä¸€ä¸ªblockè®¾å¤‡åŒ¹é…è®¾å¤‡ç±»å‹å¤§å°ä»¥åŠscsi idåŒ¹é…RESULTè§„åˆ™æ—¶å€™å°†ä¸ºè¯¥è®¾å¤‡åˆ›å»º/dev/ipsanç¬¦å·è¿æ¥</span></span><br><span class="line"><span class="variable">$vim</span> /etc/udev/rules.d/100-ipsan.rules	</span><br><span class="line">SUBSYSTEM==<span class="string">"block"</span>,					                       // è®¾å¤‡ç±»å‹</span><br><span class="line">ATTR&#123;size&#125;==<span class="string">"41943040"</span>,				                     // è®¾å¤‡å¤§å°</span><br><span class="line">ATTRS&#123;vendor&#125;==<span class="string">"LIO-ORG "</span>,		                     // å‚å®¶</span><br><span class="line">PROGRAM==<span class="string">"/usr/lib/udev/scsi_id  -g -u <span class="variable">$devnode</span>"</span>,  // è¦æ‰§è¡Œçš„ç¨‹åº</span><br><span class="line">RESULT==<span class="string">"36001405423854f332574ae7ae493f2b0"</span>,	     // æ‰§è¡Œç¨‹åºåçš„ç»“æœ</span><br><span class="line">SYMLINK+=<span class="string">"ipsan"</span>					                         // åˆ«å</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹5.äº§ç”Ÿç½‘å¡è®¾å¤‡æ–‡ä»¶çš„è§„åˆ™</span></span><br><span class="line"><span class="comment"># è¯¥è§„åˆ™è¡¨ç¤ºï¼šå¦‚æœå­˜åœ¨è®¾å¤‡çš„å­ç³»ç»Ÿä¸º netï¼Œå¹¶ä¸”åœ°å€ (MAC address) ä¸ºâ€œAA:BB:CC:DD:EE:FFâ€ï¼Œä¸ºè¯¥è®¾å¤‡äº§ç”Ÿä¸€ä¸ªåä¸º public_NIC çš„è®¾å¤‡æ–‡ä»¶ã€‚</span></span><br><span class="line">SUBSYSTEM==<span class="string">"net"</span>, SYSFS&#123;address&#125;==<span class="string">"AA:BB:CC:DD:EE:FF"</span>, NAME=<span class="string">"public_NIC"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å®ä¾‹6.ä¸ºæŒ‡å®šå¤§å°çš„ç£ç›˜äº§ç”Ÿç¬¦å·é“¾æ¥çš„è§„åˆ™</span></span><br><span class="line"><span class="comment"># å¦‚æœå­˜åœ¨è®¾å¤‡çš„å­ç³»ç»Ÿä¸º blockï¼Œå¹¶ä¸”å¤§å°ä¸º 71096640(block)ï¼Œåˆ™ä¸ºè¯¥è®¾å¤‡çš„è®¾å¤‡æ–‡ä»¶åäº§ç”Ÿä¸€ä¸ªåä¸º my_disk çš„ç¬¦å·é“¾æ¥ã€‚</span></span><br><span class="line">SUBSYSTEM==<span class="string">"block"</span>, SYSFS&#123;size&#125;==<span class="string">"71096640"</span>, SYMLINK =<span class="string">"my_disk"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å®ä¾‹7.é€šè¿‡å¤–éƒ¨å‘½ä»¤ä¸ºæŒ‡å®šåºåˆ—å·çš„ç£ç›˜äº§ç”Ÿè®¾å¤‡æ–‡ä»¶çš„è§„åˆ™</span></span><br><span class="line"><span class="comment"># å¦‚æœå­˜åœ¨è®¾å¤‡çš„å†…æ ¸è®¾å¤‡åç§°æ˜¯ä»¥ sd å¼€å¤´ ( ç£ç›˜è®¾å¤‡ )ï¼Œä»¥æ•°å­—ç»“å°¾ ( ç£ç›˜åˆ†åŒº )ï¼Œå¹¶ä¸”é€šè¿‡å¤–éƒ¨å‘½ä»¤æŸ¥è¯¢è¯¥è®¾å¤‡çš„ SCSI_ID å·ä¸ºâ€œ35000c50000a7ef67â€ï¼Œåˆ™äº§ç”Ÿä¸€ä¸ªä»¥ root_disk å¼€å¤´ï¼Œå†…æ ¸å·ç ç»“å°¾çš„è®¾å¤‡æ–‡ä»¶ï¼Œå¹¶æ›¿æ¢åŸæ¥çš„è®¾å¤‡æ–‡ä»¶ï¼ˆå¦‚æœå­˜åœ¨çš„è¯ï¼‰ã€‚ä¾‹å¦‚ï¼šäº§ç”Ÿè®¾å¤‡å /dev/root_disk2ï¼Œæ›¿æ¢åŸæ¥çš„è®¾å¤‡å /dev/sda2ã€‚</span></span><br><span class="line">KERNEL==<span class="string">"sd*[0-9]"</span>, PROGRAM==<span class="string">"/lib/udev/scsi_id -g -s %p"</span>, \</span><br><span class="line">RESULT==<span class="string">"35000c50000a7ef67"</span>, NAME +=<span class="string">"root_disk%n"</span></span><br></pre></td></tr></table></figure></p>
<p><br/></p>
<h5 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h5><p><strong>USB Printer</strong><br>æè¿°:æˆ‘æ‰“å¼€æˆ‘çš„æ‰“å°æœºå®ƒè¢«åˆ†é…äº†è®¾å¤‡èŠ‚ç‚¹/dev/lp0,ä¸‹é¢æˆ‘æƒ³å¯¹å…¶è¿›è¡Œè‡ªå®šä¹‰è®¾å¤‡ç¬¦å·åç§°;<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è®¾å¤‡ä¿¡æ¯è·å–</span></span><br><span class="line"><span class="variable">$udevadm</span> info -a -p $(udevinfo -q path -n /dev/lp0)</span><br><span class="line">looking at device <span class="string">'/class/usb/lp0'</span>:</span><br><span class="line">  KERNEL==<span class="string">"lp0"</span></span><br><span class="line">  SUBSYSTEM==<span class="string">"usb"</span></span><br><span class="line">  DRIVER==<span class="string">""</span></span><br><span class="line">  ATTR&#123;dev&#125;==<span class="string">"180:0"</span></span><br><span class="line">looking at parent device <span class="string">'/devices/pci0000:00/0000:00:1d.0/usb1/1-1'</span>:</span><br><span class="line">  SUBSYSTEMS==<span class="string">"usb"</span></span><br><span class="line">  ATTRS&#123;manufacturer&#125;==<span class="string">"EPSON"</span></span><br><span class="line">  ATTRS&#123;product&#125;==<span class="string">"USB Printer"</span></span><br><span class="line">  ATTRS&#123;serial&#125;==<span class="string">"L72010011070626380"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># udev è§„åˆ™</span></span><br><span class="line">SUBSYSTEM==<span class="string">"usb"</span>, ATTRS&#123;serial&#125;==<span class="string">"L72010011070626380"</span>, SYMLINK+=<span class="string">"epson_680"</span></span><br></pre></td></tr></table></figure></p>
<p><br></p>
<p><strong>USB Camera</strong><br>æè¿°:å’Œå¤§å¤šæ•°ç›¸æœºä¸€æ ·ï¼Œæˆ‘çš„ç›¸æœºå°†è‡ªå·±æ ‡è¯†ä¸ºé€šè¿‡USBæ€»çº¿è¿æ¥çš„å¤–éƒ¨ç¡¬ç›˜ä½¿ç”¨SCSIä¼ è¾“ã€‚ä¸ºäº†è®¿é—®æˆ‘çš„ç…§ç‰‡æˆ‘æŒ‚è½½é©±åŠ¨å™¨å’Œå¤åˆ¶å›¾åƒæ–‡ä»¶åˆ°æˆ‘çš„ç¡¬ç›˜ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># USB Camera è®¾å¤‡ä¿¡æ¯</span></span><br><span class="line">udevinfo -a -p $(udevinfo -q path -n /dev/sdb1)</span><br><span class="line">looking at device <span class="string">'/block/sdb/sdb1'</span>:</span><br><span class="line">  KERNEL==<span class="string">"sdb1"</span></span><br><span class="line">  SUBSYSTEM==<span class="string">"block"</span></span><br><span class="line"></span><br><span class="line">looking at parent device <span class="string">'/devices/pci0000:00/0000:00:02.1/usb1/1-1/1-1:1.0/host6/target6:0:0/6:0:0:0'</span>:</span><br><span class="line">  KERNELS==<span class="string">"6:0:0:0"</span></span><br><span class="line">  SUBSYSTEMS==<span class="string">"scsi"</span></span><br><span class="line">  DRIVERS==<span class="string">"sd"</span></span><br><span class="line">  ATTRS&#123;rev&#125;==<span class="string">"1.00"</span></span><br><span class="line">  ATTRS&#123;model&#125;==<span class="string">"X250,D560Z,C350Z"</span></span><br><span class="line">  ATTRS&#123;vendor&#125;==<span class="string">"OLYMPUS "</span></span><br><span class="line">  ATTRS&#123;scsi_level&#125;==<span class="string">"3"</span></span><br><span class="line">  ATTRS&#123;<span class="built_in">type</span>&#125;==<span class="string">"0"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è§„åˆ™</span></span><br><span class="line"><span class="comment"># å®ƒå‡ºå¥‡åœ°ç®€å•:åç§°æœ¬èº«ä¸åŒï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åœ¨nameå­—æ®µä¸Šä½¿ç”¨ç®€å•çš„æ¨¡å¼åŒ¹é…ã€‚</span></span><br><span class="line">KERNEL==<span class="string">"sd?1"</span>, SUBSYSTEMS==<span class="string">"scsi"</span>, ATTRS&#123;model&#125;==<span class="string">"X250,D560Z,C350Z"</span>, SYMLINK+=<span class="string">"camera"</span>  <span class="comment">#å³/dev/camera</span></span><br></pre></td></tr></table></figure></p>
<p><br/></p>
<p><strong>USB Hard Disk</strong><br>æè¿°:USBç¡¬ç›˜å¯ä¸æˆ‘ä¸Šé¢æè¿°çš„USBç›¸æœºç›¸æ¯”è¾ƒï¼Œç„¶è€Œå…¸å‹çš„ä½¿ç”¨æ¨¡å¼æ˜¯ä¸åŒçš„ã€‚<br>åœ¨ç›¸æœºçš„ä¾‹å­ä¸­æˆ‘è§£é‡Šäº†æˆ‘å¯¹sdbèŠ‚ç‚¹ä¸æ„Ÿå…´è¶£â€”â€”å®ƒçœŸæ­£çš„ç”¨é€”åªæ˜¯ç”¨äºåˆ†åŒº(ä¾‹å¦‚fdisk)ï¼Œä½†æˆ‘ä¸ºä»€ä¹ˆè¦å¯¹ç›¸æœºè¿›è¡Œåˆ†åŒº!?å½“ç„¶å¦‚æœä½ æœ‰ä¸€ä¸ª100GBçš„USBç¡¬ç›˜ï¼Œè¿™æ˜¯å®Œå…¨å¯ä»¥ç†è§£çš„ï¼Œä½ å¯èƒ½æƒ³è¦åˆ†åŒºï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨udevçš„å­—ç¬¦ä¸²æ›¿æ¢:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># This rule creates symlinks such as:</span></span><br><span class="line"><span class="comment"># /dev/usbhd - The fdiskable node</span></span><br><span class="line"><span class="comment"># /dev/usbhd1 - The first partition (mountable)</span></span><br><span class="line"><span class="comment"># /dev/usbhd2 - The second partition (mountable)</span></span><br><span class="line">KERNEL==<span class="string">"sd*"</span>, SUBSYSTEMS==<span class="string">"scsi"</span>, ATTRS&#123;model&#125;==<span class="string">"USB 2.0 Storage Device"</span>, SYMLINK+=<span class="string">"usbhd%n"</span></span><br></pre></td></tr></table></figure></p>
<p><br></p>
<p><strong>USB Card Reader</strong><br>æè¿°:USBè¯»å¡å™¨(CompactFlashã€SmartMediaç­‰)æ˜¯å¦ä¸€ç§æœ‰ä¸åŒä½¿ç”¨è¦æ±‚çš„USBå­˜å‚¨è®¾å¤‡,æ¯”å¦‚ä¸‹é¢å°†æœ‰èŠ‚ç‚¹å‘½å:cfrdr, cfrdr1, cfrdr2, cfrdr3ï¼Œâ€¦, cfrdr15ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ©ç”¨all_partitionsé€‰é¡¹ï¼Œå®ƒå°†ä¸ºè§„åˆ™åŒ¹é…çš„æ¯ä¸ªå—è®¾å¤‡åˆ›å»º16ä¸ªåˆ†åŒºèŠ‚ç‚¹:</span></span><br><span class="line">KERNEL=<span class="string">"sd*"</span>, SUBSYSTEMS==<span class="string">"scsi"</span>, ATTRS&#123;model&#125;==<span class="string">"USB 2.0 CompactFlash Reader"</span>, SYMLINK+=<span class="string">"cfrdr%n"</span>, OPTIONS+=<span class="string">"all_partitions"</span></span><br></pre></td></tr></table></figure></p>
<p><br></p>
<p><strong>CD/DVD drives</strong><br>æè¿°:æˆ‘æœ‰ä¸¤ä¸ªå…‰é©±åœ¨è¿™å°ç”µè„‘:ä¸€ä¸ªDVDé˜…è¯»å™¨(hdc)å’Œä¸€ä¸ªDVDé‡å†™(hdd)ã€‚æˆ‘ä¸å¸Œæœ›è¿™äº›è®¾å¤‡èŠ‚ç‚¹å‘ç”Ÿå˜åŒ–ï¼Œé™¤éæˆ‘ç‰©ç†ä¸Šé‡æ–°è¿æ¥æˆ‘çš„ç³»ç»Ÿã€‚ä½†æ˜¯ä¸ºäº†æ–¹ä¾¿è®¸å¤šç”¨æˆ·å–œæ¬¢ä½¿ç”¨/dev/dvdè¿™æ ·çš„è®¾å¤‡èŠ‚ç‚¹ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SUBSYSTEM==<span class="string">"block"</span>, KERNEL==<span class="string">"hdc"</span>, SYMLINK+=<span class="string">"dvd"</span>, GROUP=<span class="string">"cdrom"</span></span><br><span class="line">SUBSYSTEM==<span class="string">"block"</span>, KERNEL==<span class="string">"hdd"</span>, SYMLINK+=<span class="string">"dvdrw"</span>, GROUP=<span class="string">"cdrom"</span></span><br></pre></td></tr></table></figure></p>
<p><br></p>
<p><strong>Network interfaces</strong><br>æè¿°:å³ä½¿ç½‘ç»œæ¥å£æ˜¯é€šè¿‡åç§°å¼•ç”¨çš„ï¼Œå®ƒä»¬é€šå¸¸ä¹Ÿæ²¡æœ‰ä¸ä¹‹å…³è”çš„è®¾å¤‡èŠ‚ç‚¹ã€‚å°½ç®¡å¦‚æ­¤è§„åˆ™ç¼–å†™è¿‡ç¨‹å‡ ä¹æ˜¯ç›¸åŒçš„ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># udevadm info -a -p /sys/class/net/eth0</span></span><br><span class="line">  looking at class device <span class="string">'/sys/class/net/eth0'</span>:</span><br><span class="line">    KERNEL==<span class="string">"eth0"</span></span><br><span class="line">    ATTR&#123;address&#125;==<span class="string">"00:52:8b:d5:04:48"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Here is my rule:</span></span><br><span class="line">KERNEL==<span class="string">"eth*"</span>, ATTR&#123;address&#125;==<span class="string">"00:52:8b:d5:04:48"</span>, NAME=<span class="string">"lan"</span></span><br></pre></td></tr></table></figure></p>
<p><em>æ³¨æ„äº‹é¡¹:</em></p>
<ul>
<li>è¦ä½¿æ­¤è§„åˆ™ç”Ÿæ•ˆéœ€è¦é‡æ–°åŠ è½½ç½‘ç»œé©±åŠ¨ç¨‹åºã€‚æ‚¨å¯ä»¥å¸è½½å¹¶é‡æ–°åŠ è½½æ¨¡å—ï¼Œæˆ–è€…ç®€å•åœ°é‡æ–°å¯åŠ¨ç³»ç»Ÿã€‚æ‚¨è¿˜éœ€è¦é‡æ–°é…ç½®æ‚¨çš„ç³»ç»Ÿï¼Œä½¿å…¶ä½¿ç”¨â€œlanâ€è€Œä¸æ˜¯â€œeth0â€ã€‚</li>
<li>åœ¨æˆ‘å®Œå…¨åˆ é™¤æ‰€æœ‰å¯¹eth0çš„å¼•ç”¨ä¹‹å‰ï¼Œæˆ‘åœ¨è¿›è¡Œè¿™ä¸ªæ“ä½œæ—¶é‡åˆ°äº†ä¸€äº›éº»çƒ¦(æ¥å£æ²¡æœ‰è¢«é‡å‘½å)ã€‚åœ¨æ­¤ä¹‹åæ‚¨åº”è¯¥èƒ½å¤Ÿåœ¨ä»»ä½•å¯¹ifconfigæˆ–ç±»ä¼¼å®ç”¨ç¨‹åºçš„è°ƒç”¨ä¸­ä½¿ç”¨â€œlanâ€è€Œä¸æ˜¯â€œeth0â€;<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$cat</span> /etc/sysconfig/network-scripts/ifcfg-ens192</span><br><span class="line">TYPE=<span class="string">"Ethernet"</span></span><br><span class="line">PROXY_METHOD=<span class="string">"none"</span></span><br><span class="line">BROWSER_ONLY=<span class="string">"no"</span></span><br><span class="line">BOOTPROTO=<span class="string">"static"</span></span><br><span class="line">DEFROUTE=<span class="string">"yes"</span></span><br><span class="line">IPV4_FAILURE_FATAL=<span class="string">"no"</span></span><br><span class="line">IPV6INIT=<span class="string">"yes"</span></span><br><span class="line">IPV6_AUTOCONF=<span class="string">"yes"</span></span><br><span class="line">IPV6_DEFROUTE=<span class="string">"yes"</span></span><br><span class="line">IPV6_FAILURE_FATAL=<span class="string">"no"</span></span><br><span class="line">IPV6_ADDR_GEN_MODE=<span class="string">"stable-privacy"</span></span><br><span class="line">NAME=<span class="string">"ens192"</span></span><br><span class="line">UUID=<span class="string">"78d46457-5eb7-4421-9637-ba4161637646"</span></span><br><span class="line">DEVICE=<span class="string">"ens192"</span></span><br><span class="line">ONBOOT=<span class="string">"yes"</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><br/></p>
<h5 id="Production-Examples"><a href="#Production-Examples" class="headerlink" title="Production Examples"></a>Production Examples</h5><p>ç”Ÿäº§å®ä¾‹1: ORACLEä¸­ASMè®¾å¤‡åŠ¨æ€ç»‘å®š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è§„åˆ™ä¸­å†™æ˜äº†ç»‘å®šæºè·¯å¾„dm-*ç»‘å®šç£ç›˜çš„scsi idï¼Œç»‘å®šç›®æ ‡è·¯å¾„/dev/asm/hdisk00xï¼Œç›®æ ‡è·¯å¾„å±ç»„grid:asmadminï¼Œç›®æ ‡è·¯å¾„æƒé™066</span></span><br><span class="line"><span class="variable">$cat</span> /etc/udev/rules.d/99-oracle-asmdevices.rules </span><br><span class="line">KERNEL==<span class="string">"dm-*"</span>,ENV&#123;DM_UUID&#125;==<span class="string">"mpath-36005076xxx000000000010cb"</span>,SYMLINK+=<span class="string">"asm/hdisk001"</span>,OWNER=<span class="string">"grid"</span>,GROUP=<span class="string">"asmadmin"</span>,MODE=<span class="string">"0660"</span></span><br><span class="line">KERNEL==<span class="string">"dm-*"</span>,ENV&#123;DM_UUID&#125;==<span class="string">"mpath-36005076xxx000000000010cc"</span>,SYMLINK+=<span class="string">"asm/hdisk002"</span>,OWNER=<span class="string">"grid"</span>,GROUP=<span class="string">"asmadmin"</span>,MODE=<span class="string">"0660"</span></span><br><span class="line">KERNEL==<span class="string">"dm-*"</span>,ENV&#123;DM_UUID&#125;==<span class="string">"mpath-36005076xxx000000000010cd"</span>,SYMLINK+=<span class="string">"asm/hdisk003"</span>,OWNER=<span class="string">"grid"</span>,GROUP=<span class="string">"asmadmin"</span>,MODE=<span class="string">"0660"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰§è¡Œç»“æœ:</span></span><br><span class="line">[root@ybnode01 ~]<span class="comment"># ls -lrt /dev/asm/hdisk0*</span></span><br><span class="line">lrwxrwxrwx 1 root root 7 Jun 15 15:31 /dev/asm/hdisk017 -&gt; ../dm-2</span><br><span class="line">lrwxrwxrwx 1 root root 8 Jun 15 15:31 /dev/asm/hdisk002 -&gt; ../dm-13</span><br><span class="line">[root@ybnode01 ~]<span class="comment"># ls -lrt /dev/dm*</span></span><br><span class="line">brw-rw---- 1 grid asmadmin 253,  2 Jun 15 15:34 /dev/dm-2</span><br><span class="line">brw-rw---- 1 grid asmadmin 253, 13 Jun 15 15:34 /dev/dm-13</span><br></pre></td></tr></table></figure></p>
<ul>
<li>æ³¨æ„ç‚¹:udevç»‘å®šæºè·¯å¾„æƒé™ä¸å˜ç»‘å®šç›®æ ‡è·¯å¾„/dev/asm/hdisk*çš„æƒé™æ˜¯root:root 777 linkåˆ°dmä¸‹ã€‚<ul>
<li>åœ¨rhel7ä¸­ç”¨udevç»‘å®šç£ç›˜åï¼Œå°±ç®—udevè§„åˆ™ä¸­å†™æ˜äº†æƒé™ï¼Œä½†ç›®æ ‡è·¯å¾„æƒé™ä»ç„¶æ˜¯<code>root:root 777</code>ã€‚</li>
<li>åœ¨rhel6ä¸­å…¶æƒé™å¦‚udevè§„åˆ™ä¸­çš„ä¸€è‡´<code>grid:asmadmin 0660</code></li>
</ul>
</li>
</ul>
<p><br/></p>
<p>ç”Ÿäº§å®ä¾‹2: åœ¨multipathä¸­ç»‘å®šäº†scsi id è€Œåˆåœ¨udevä¸­å†æ¬¡ç»‘å®šæ˜¾å¾—æœ‰äº›å¤šä½™ï¼ˆä½†æœ€å¥½æ˜¯è¿™ä¹ˆåšï¼‰ï¼Œåœ¨ scsi id å·²ç»‘å®šçš„å‰æä¸‹udevå¯ä»¥æœ‰å¦‚ä¸‹ç»‘å®šæ–¹å¼ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç»‘å®šæ–¹å¼æ²¡æœ‰åœ¨udevè§„åˆ™ä¸­ç»‘å®šç£ç›˜è·¯å¾„ä¸ç£ç›˜scsi id æ²¡æœ‰ç”Ÿæˆé¢å¤–çš„è·¯å¾„ï¼Œä»…ä¿®æ”¹äº†/dev/dm*çš„æƒé™ã€‚</span></span><br><span class="line"><span class="comment"># è¿™é‡Œçš„udevè§„åˆ™åªæ˜¯ç”¨æ¥ç»‘å®šç£ç›˜æƒé™ï¼Œæ•°æ®åº“å¯ç›´æ¥ä½¿ç”¨dm*</span></span><br><span class="line"><span class="variable">$cat</span> /etc/udev/rules.d/12-dm-permissions.rules </span><br><span class="line">ENV&#123;DM_NAME&#125;==<span class="string">"dm*"</span>,OWNER:=<span class="string">"grid"</span>, GROUP:=<span class="string">"asmadmin"</span>, MODE:=<span class="string">"660"</span></span><br></pre></td></tr></table></figure></p>
<p>å¦å¤–åšæ³•æ˜¯åœ¨ multipath.conf ä¸­ä¸å†™æ˜wwidå’Œaliasçš„å¯¹åº”å…³ç³»ï¼Œåªåœ¨udevä¸­ç»‘å®šæºè·¯å¾„dmã€ç›®æ ‡è·¯å¾„ã€scsi idæƒé™ã€‚<br><code>è™½ç„¶è¿™ç§æ–¹æ³•æœ‰æ•ˆä½†æ˜¯å¾ˆéš¾ç†è§£</code>,å…¶ç¼ºé™·æ˜¯å¦‚æœmultipathä¸ç”Ÿæˆdmé‚£ä¹Ÿè½®ä¸åˆ°udevå»ç»‘å®šï¼Œæ‰€ä»¥udevä¸€å®šåœ¨multipathä¹‹åï¼Œmultipathæ²¡æœ‰ç»‘å®šscsi idé‚£ä¹ˆæ˜¯ä¸æ˜¯å¯èƒ½ä¼šmultipathåœ¨å¯åŠ¨çš„æ—¶å€™æŠŠscsi idè¯†åˆ«é”™äº†ï¼Œè¿™ä¸ªæ—¶å€™udevåœ¨å»ç»‘å®šscsi idå’Œdmæ‰€ä»¥æˆ‘ä¸ªäººå¹¶ä¸æ¨èè¿™ç§ç»‘å®šæ–¹å¼ã€‚</p>
<p>ä¸åŒçš„è¿ç»´äººå‘˜æœ‰ä¸åŒçš„åšæ³•ä½†æ— è®ºå“ªç§ç»‘å®šæ–¹å¼ï¼Œæœ€ç»ˆçš„ç›®çš„å°±æŠŠç£ç›˜è·¯å¾„å’Œscsi idç»‘å®šï¼Œä¸”ç»‘å®šasmè¦ä½¿ç”¨çš„asm_diskçš„pathçš„æƒé™ï¼Œç†è§£multipathå’Œudevæ‰å¯ä»¥å¤„ç†å¼‚å¸¸çŠ¶å†µã€‚</p>
<p><em>æ³¨æ„äº‹é¡¹:</em></p>
<ul>
<li>å½“è®¾å¤‡åæ”¹å˜æ—¶åœ¨ <code>/etc/fstab</code> é‡Œä¿æŒç³»ç»Ÿåˆ†åŒºåç§°çš„ä¸€è‡´æ€§ï¼Œè€Œä¸ä¼šå—é©±åŠ¨åŠ è½½é¡ºåºæˆ–è€…ç£ç›˜æ ‡ç­¾è¢«ç ´åçš„å½±å“ï¼Œå¯¼è‡´æ“ä½œç³»ç»Ÿå¯åŠ¨æ—¶æ‰¾ä¸åˆ°ç³»ç»Ÿåˆ†åŒºã€‚</li>
<li>è§¦å‘udevç¼–å†™çš„è§„åˆ™é…ç½®ç”Ÿæ•ˆ:<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">start_udev                                      <span class="comment"># RHEL6</span></span><br><span class="line">systemctl restart systemd-udev-trigger.service  <span class="comment"># RHEL7</span></span><br></pre></td></tr></table></figure></li>
<li>æ³¨ï¼šæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ ext2/3/4 xfs ï¼ŒåŒæ—¶åªèƒ½å•å°è®¾å¤‡ä½¿ç”¨gfs é›†ç¾¤æ–‡ä»¶ç³»ç»Ÿï¼ˆè°·æ­Œçš„ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼‰</li>
</ul>
<hr>
<h4 id="0x04-UDEV-ç›¸å…³å‘½ä»¤"><a href="#0x04-UDEV-ç›¸å…³å‘½ä»¤" class="headerlink" title="0x04 UDEV ç›¸å…³å‘½ä»¤"></a>0x04 UDEV ç›¸å…³å‘½ä»¤</h4><h5 id="udevadm-å‘½ä»¤-udevç®¡ç†å·¥å…·"><a href="#udevadm-å‘½ä»¤-udevç®¡ç†å·¥å…·" class="headerlink" title="udevadm å‘½ä»¤ - udevç®¡ç†å·¥å…·"></a>udevadm å‘½ä»¤ - udevç®¡ç†å·¥å…·</h5><p>æè¿°:udevadméœ€è¦å‘½ä»¤å’Œå‘½ä»¤ç‰¹å®šçš„é€‰é¡¹, å®ƒæ§åˆ¶system-udevdçš„è¿è¡Œæ—¶è¡Œä¸ºã€è¯·æ±‚å†…æ ¸äº‹ä»¶ã€ç®¡ç†äº‹ä»¶é˜Ÿåˆ—ï¼Œå¹¶æä¾›ç®€å•çš„è°ƒè¯•æœºåˆ¶ã€‚</p>
<p>è¯­æ³•é€‰é¡¹:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Synx</span></span><br><span class="line">udevadm [--debug] [--version] [--<span class="built_in">help</span>]</span><br><span class="line"></span><br><span class="line">udevadm info [options] [devpath]</span><br><span class="line"></span><br><span class="line">udevadm trigger [options] [devpath]</span><br><span class="line"></span><br><span class="line">udevadm settle [options]</span><br><span class="line"></span><br><span class="line">udevadm control option</span><br><span class="line"></span><br><span class="line">udevadm monitor [options]</span><br><span class="line"></span><br><span class="line">udevadm <span class="built_in">test</span> [options] devpath</span><br><span class="line"></span><br><span class="line">udevadm <span class="built_in">test</span>-builtin [options] <span class="built_in">command</span> devpath</span><br><span class="line"></span><br><span class="line"><span class="comment"># Option</span></span><br><span class="line">-d, --debug <span class="comment">#æ‰“å°è°ƒè¯•æ¶ˆæ¯åˆ°æ ‡å‡†é”™è¯¯</span></span><br><span class="line">-h, --<span class="built_in">help</span> <span class="comment">#æ‰“å°ä¸€ä¸ªç®€çŸ­çš„å¸®åŠ©æ–‡æœ¬å¹¶é€€å‡ºã€‚</span></span><br></pre></td></tr></table></figure></p>
<p><br/></p>
<p>å­å‘½ä»¤:</p>
<ul>
<li>info ï¼šæŸ¥è¯¢udevæ•°æ®åº“ä»¥è·å–è®¾å¤‡ä¿¡æ¯(æŸ¥è¯¢çš„å¯ä»¥æ˜¯è®¾å¤‡åç§°ä»¥/dev)æˆ–è€…ä¸€ä¸ªsysè·¯å¾„ã€‚<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Option</span></span><br><span class="line">-q, --query=TYPE  <span class="comment">#åœ¨æ•°æ®åº“ä¸­æŸ¥è¯¢æŒ‡å®šç±»å‹çš„è®¾å¤‡æ•°æ®Valid TYPEs are: name, symlink, path, property, all.</span></span><br><span class="line"></span><br><span class="line">-p, --path=DEVPATH <span class="comment">#è¦æŸ¥è¯¢çš„è®¾å¤‡çš„/sysè·¯å¾„</span></span><br><span class="line">   <span class="comment"># e.g.  [/sys]/class/block/sda. This option is an alternative to the positional argument with a /sys/ prefix.</span></span><br><span class="line">  udevadm info --path=/class/block/sda is equivalent to udevadm info /sys/class/block/sda.</span><br><span class="line"></span><br><span class="line">-n, --name=FILE <span class="comment"># æŸ¥è¯¢çš„è®¾å¤‡èŠ‚ç‚¹æˆ–ç¬¦å·é“¾æ¥çš„åç§°(/dev)</span></span><br><span class="line">  <span class="comment">#e.g.  [/dev]/sda. This option is an alternative to the positional argument with a /dev/ prefix.</span></span><br><span class="line">  udevadm info --name=sda is equivalent to udevadm info /dev/sda.</span><br><span class="line"></span><br><span class="line">-r, --root</span><br><span class="line">  Print absolute paths <span class="keyword">in</span> name or symlink query.</span><br><span class="line"></span><br><span class="line">-a, --attribute-walk</span><br><span class="line">  Print all sysfs properties of the specified device that can be used <span class="keyword">in</span> udev rules to match the specified device. It prints all devices along the</span><br><span class="line">  chain, up to the root of sysfs that can be used <span class="keyword">in</span> udev rules.</span><br><span class="line"></span><br><span class="line">-x, --<span class="built_in">export</span></span><br><span class="line">  Print output as key/value pairs. Values are enclosed <span class="keyword">in</span> single quotes. This takes effects only when --query=property or --device-id-of-file=FILE is specified.</span><br><span class="line"></span><br><span class="line">-P, --<span class="built_in">export</span>-prefix=NAME</span><br><span class="line">  Add a prefix to the key name of exported values. This implies --<span class="built_in">export</span>.</span><br><span class="line"></span><br><span class="line">-d, --device-id-of-file=FILE</span><br><span class="line">  Print major/minor numbers of the underlying device, <span class="built_in">where</span> the file lives on. If this is specified, all positional arguments are ignored.</span><br><span class="line"></span><br><span class="line">-e, --<span class="built_in">export</span>-db</span><br><span class="line">  Export the content of the udev database.</span><br><span class="line"></span><br><span class="line"> -e, --<span class="built_in">export</span>-db</span><br><span class="line">  Export the content of the udev database.</span><br><span class="line"></span><br><span class="line">-c, --cleanup-db</span><br><span class="line">  Cleanup the udev database.</span><br><span class="line"></span><br><span class="line">-w[SECONDS], --<span class="built_in">wait</span>-for-initialization[=SECONDS]</span><br><span class="line">  Wait <span class="keyword">for</span> device to be initialized. If argument SECONDS is not specified, the default is to <span class="built_in">wait</span> forever.</span><br></pre></td></tr></table></figure></li>
<li>triggerï¼š ä¸»è¦æ˜¯ç”¨äºåœ¨ç³»ç»Ÿå†·æ’æ‹”æ—¶é‡æ”¾äº‹ä»¶ã€‚<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">-v, --verbose</span><br><span class="line">  Print the list of devices <span class="built_in">which</span> will be triggered.</span><br><span class="line"></span><br><span class="line">-n, --dry-run</span><br><span class="line">  Do not actually trigger the event.</span><br><span class="line"></span><br><span class="line">-t, --<span class="built_in">type</span>=TYPE</span><br><span class="line">  Trigger a specific <span class="built_in">type</span> of devices. Valid types are: devices, subsystems. The default value is devices.</span><br><span class="line"></span><br><span class="line">-c, --action=ACTION</span><br><span class="line">  Type of event to be triggered. Possible actions are <span class="string">"add"</span>, <span class="string">"remove"</span>, <span class="string">"change"</span>, <span class="string">"move"</span>, <span class="string">"online"</span>, <span class="string">"offline"</span>, <span class="string">"bind"</span>, and <span class="string">"unbind"</span>. Also, the special</span><br><span class="line">  value <span class="string">"help"</span> can be used to list the possible actions. The default value is <span class="string">"change"</span>.</span><br><span class="line"></span><br><span class="line">-s, --subsystem-match=SUBSYSTEM</span><br><span class="line">  Trigger events <span class="keyword">for</span> devices <span class="built_in">which</span> belong to a matching subsystem. This option supports shell style pattern matching. When this option is specified</span><br><span class="line">  more than once, <span class="keyword">then</span> each matching result is ORed, that is, all the devices <span class="keyword">in</span> each subsystem are triggered.</span><br><span class="line"></span><br><span class="line">-S, --subsystem-nomatch=SUBSYSTEM</span><br><span class="line">  Do not trigger events <span class="keyword">for</span> devices <span class="built_in">which</span> belong to a matching subsystem. This option supports shell style pattern matching. When this option is</span><br><span class="line">  specified more than once, <span class="keyword">then</span> each matching result is ANDed, that is, devices <span class="built_in">which</span> <span class="keyword">do</span> not match all specified subsystems are triggered.</span><br><span class="line"></span><br><span class="line">-a, --attr-match=ATTRIBUTE=VALUE</span><br><span class="line">  Trigger events <span class="keyword">for</span> devices with a matching sysfs attribute. If a value is specified along with the attribute name, the content of the attribute is</span><br><span class="line">  matched against the given value using shell style pattern matching. If no value is specified, the existence of the sysfs attribute is checked. When</span><br><span class="line">  this option is specified multiple <span class="built_in">times</span>, <span class="keyword">then</span> each matching result is ANDed, that is, only devices <span class="built_in">which</span> have all specified attributes are</span><br><span class="line">  triggered.</span><br><span class="line"></span><br><span class="line">-A, --attr-nomatch=ATTRIBUTE=VALUE</span><br><span class="line">  Do not trigger events <span class="keyword">for</span> devices with a matching sysfs attribute. If a value is specified along with the attribute name, the content of the</span><br><span class="line">  attribute is matched against the given value using shell style pattern matching. If no value is specified, the existence of the sysfs attribute is</span><br><span class="line">  checked. When this option is specified multiple <span class="built_in">times</span>, <span class="keyword">then</span> each matching result is ANDed, that is, only devices <span class="built_in">which</span> have none of the specified</span><br><span class="line">  attributes are triggered.</span><br><span class="line"> -g, --tag-match=PROPERTY</span><br><span class="line">  Trigger events <span class="keyword">for</span> devices with a matching tag. When this option is specified multiple <span class="built_in">times</span>, <span class="keyword">then</span> each matching result is ANDed, that is, devices</span><br><span class="line">  <span class="built_in">which</span> have all specified tags are triggered.</span><br><span class="line"></span><br><span class="line">-y, --sysname-match=NAME</span><br><span class="line">  Trigger events <span class="keyword">for</span> devices <span class="keyword">for</span> <span class="built_in">which</span> the last component (i.e. the filename) of the /sys path matches the specified PATH. This option supports shell</span><br><span class="line">  style pattern matching. When this option is specified more than once, <span class="keyword">then</span> each matching result is ORed, that is, all devices <span class="built_in">which</span> have any of the</span><br><span class="line">  specified NAME are triggered.</span><br><span class="line"></span><br><span class="line">--name-match=NAME</span><br><span class="line">  Trigger events <span class="keyword">for</span> devices with a matching device path. When this option is specified more than once, <span class="keyword">then</span> each matching result is ORed, that is,</span><br><span class="line">  all specified devices are triggered.</span><br><span class="line"></span><br><span class="line">-b, --parent-match=SYSPATH</span><br><span class="line">  Trigger events <span class="keyword">for</span> all children of a given device. When this option is specified more than once, <span class="keyword">then</span> each matching result is ORed, that is, all</span><br><span class="line">  children of each specified device are triggered.</span><br><span class="line"></span><br><span class="line">-w, --settle</span><br><span class="line">  Apart from triggering events, also waits <span class="keyword">for</span> those events to finish. Note that this is different from calling udevadm settle.  udevadm settle waits</span><br><span class="line">  <span class="keyword">for</span> all events to finish. This option only waits <span class="keyword">for</span> events triggered by the same <span class="built_in">command</span> to finish.</span><br><span class="line"></span><br><span class="line">--<span class="built_in">wait</span>-daemon[=SECONDS]</span><br><span class="line">  Before triggering uevents, <span class="built_in">wait</span> <span class="keyword">for</span> systemd-udevd daemon to be initialized. Optionally takes timeout value. Default timeout is 5 seconds. This is</span><br><span class="line">  equivalent to invoke invoking udevadm control --ping before udevadm trigger.</span><br></pre></td></tr></table></figure></li>
<li>settle : ç›‘è§†udeväº‹ä»¶é˜Ÿåˆ—ï¼Œå¦‚æœæ‰€æœ‰å½“å‰äº‹ä»¶éƒ½è¢«å¤„ç†ï¼Œåˆ™é€€å‡ºã€‚<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-t, --timeout=SECONDS</span><br><span class="line">  Maximum number of seconds to <span class="built_in">wait</span> <span class="keyword">for</span> the event queue to become empty. The default value is 120 seconds. A value of 0 will check <span class="keyword">if</span> the queue is</span><br><span class="line">  empty and always <span class="built_in">return</span> immediately.</span><br><span class="line"></span><br><span class="line">-E, --<span class="built_in">exit</span>-if-exists=FILE</span><br><span class="line">  Stop waiting <span class="keyword">if</span> file exists.</span><br></pre></td></tr></table></figure></li>
<li>controlï¼š ä¿®æ”¹æ­£åœ¨è¿è¡Œçš„udevå®ˆæŠ¤è¿›ç¨‹çš„å†…éƒ¨çŠ¶æ€ã€‚<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">-e, --<span class="built_in">exit</span></span><br><span class="line">    Signal and <span class="built_in">wait</span> <span class="keyword">for</span> systemd-udevd to <span class="built_in">exit</span>. No option except <span class="keyword">for</span> --timeout can be specified after this option. Note that systemd-udevd.service</span><br><span class="line">    contains Restart=always and so as a result, this option restarts systemd-udevd. If you want to stop systemd-udevd.service, please use the following:</span><br><span class="line">    systemctl stop systemd-udevd-control.socket systemd-udevd-kernel.socket systemd-udevd.service</span><br><span class="line"></span><br><span class="line">-l, --<span class="built_in">log</span>-priority=value</span><br><span class="line">    Set the internal <span class="built_in">log</span> level of systemd-udevd. Valid values are the numerical syslog priorities or their textual representations: emerg, alert, crit,</span><br><span class="line">    err, warning, notice, info, and debug.</span><br><span class="line"></span><br><span class="line">-s, --stop-exec-queue</span><br><span class="line">    Signal systemd-udevd to stop executing new events. Incoming events will be queued.</span><br><span class="line"></span><br><span class="line">-S, --start-exec-queue</span><br><span class="line">    Signal systemd-udevd to <span class="built_in">enable</span> the execution of events.</span><br><span class="line"></span><br><span class="line">-R, --reload</span><br><span class="line">    Signal systemd-udevd to reload the rules files and other databases like the kernel module index. Reloading rules and databases does not apply any</span><br><span class="line">    changes to already existing devices; the new configuration will only be applied to new events.</span><br><span class="line"></span><br><span class="line">-p, --property=KEY=value</span><br><span class="line">    Set a global property <span class="keyword">for</span> all events.</span><br><span class="line"></span><br><span class="line">-m, --children-max=value</span><br><span class="line">    Set the maximum number of events, systemd-udevd will handle at the same time.</span><br><span class="line"></span><br><span class="line">--ping</span><br><span class="line">    Send a ping message to systemd-udevd and <span class="built_in">wait</span> <span class="keyword">for</span> the reply. This may be useful to check that systemd-udevd daemon is running.</span><br><span class="line"></span><br><span class="line">-t, --timeout=seconds</span><br><span class="line">    The maximum number of seconds to <span class="built_in">wait</span> <span class="keyword">for</span> a reply from systemd-udevd.</span><br></pre></td></tr></table></figure></li>
<li>monitor ï¼š ä¾¦å¬å†…æ ¸ueventså’Œudevè§„åˆ™å‘é€çš„äº‹ä»¶ï¼Œå¹¶å°†äº‹ä»¶çš„devpathæ‰“å°åˆ°æ§åˆ¶å°ã€‚å®ƒå¯ä»¥ç”¨æ¥åˆ†æäº‹ä»¶è®¡æ—¶ï¼Œé€šè¿‡æ¯”è¾ƒå†…æ ¸ueventå’Œudeväº‹ä»¶çš„æ—¶é—´æˆ³ã€‚<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">-k, --kernel</span><br><span class="line">  Print the kernel uevents.</span><br><span class="line"></span><br><span class="line">-u, --udev</span><br><span class="line">  Print the udev event after the rule processing.</span><br><span class="line"></span><br><span class="line">-p, --property</span><br><span class="line">  Also <span class="built_in">print</span> the properties of the event.</span><br><span class="line"></span><br><span class="line">-s, --subsystem-match=string[/string]</span><br><span class="line">  Filter kernel uevents and udev events by subsystem[/devtype]. Only events with a matching subsystem value will pass. When this option is specified</span><br><span class="line">  more than once, <span class="keyword">then</span> each matching result is ORed, that is, all devices <span class="keyword">in</span> the specified subsystems are monitored.</span><br><span class="line"></span><br><span class="line">-t, --tag-match=string</span><br><span class="line">  Filter udev events by tag. Only udev events with a given tag attached will pass. When this option is specified more than once, <span class="keyword">then</span> each matching</span><br><span class="line">  result is ORed, that is, devices <span class="built_in">which</span> have one of the specified tags are monitored.</span><br></pre></td></tr></table></figure></li>
<li>test ï¼šé’ˆå¯¹ä¸€ä¸ªè®¾å¤‡ï¼Œåœ¨ä¸éœ€è¦ uevent è§¦å‘çš„æƒ…å†µä¸‹æ¨¡æ‹Ÿä¸€æ¬¡ udevçš„è¿è¡Œï¼Œå¹¶è¾“å‡ºæŸ¥è¯¢è§„åˆ™æ–‡ä»¶çš„è¿‡ç¨‹ã€æ‰€æ‰§è¡Œçš„è¡Œä¸ºã€è§„åˆ™æ–‡ä»¶çš„æ‰§è¡Œç»“æœã€‚<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-a, --action=ACTION</span><br><span class="line">  Type of event to be simulated. Possible actions are <span class="string">"add"</span>, <span class="string">"remove"</span>, <span class="string">"change"</span>, <span class="string">"move"</span>, <span class="string">"online"</span>, <span class="string">"offline"</span>, <span class="string">"bind"</span>, and <span class="string">"unbind"</span>. Also, the special value <span class="string">"help"</span> can be used to list the possible actions. The default</span><br><span class="line">  value is <span class="string">"add"</span>.</span><br><span class="line"></span><br><span class="line">-N, --resolve-names=early|late|never</span><br><span class="line">  Specify when udevadm should resolve names of users and groups. When <span class="built_in">set</span> to early (the default), names will be resolved when the rules are parsed. When <span class="built_in">set</span> to late, names will be resolved <span class="keyword">for</span> every event. When <span class="built_in">set</span> to</span><br><span class="line">  never, names will never be resolved and all devices will be owned by root.</span><br></pre></td></tr></table></figure></li>
<li>test-builtin :  ä¸ºè®¾å¤‡DEVPATHè¿è¡Œå†…ç½®çš„å‘½ä»¤å‘½ä»¤ï¼Œå¹¶æ‰“å°è°ƒè¯•è¾“å‡ºã€‚</li>
</ul>
<p><br></p>
<p>ç®€å•å®ä¾‹:<br><strong>monitor å­å‘½ä»¤</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®ä¾‹1.UDEVäº‹ä»¶ç›‘æ§å®æ—¶ç›‘æ§å†…æ ¸æ‰€å¤„ç†çš„äº‹ä»¶ï¼Œæ¯”å¦‚æ·»åŠ /ç§»é™¤ä¸€å—è®¾å¤‡ä¼šæç¤ºç›¸å¯¹åº”çš„ä¿¡æ¯</span></span><br><span class="line">udevadm monitor -u         <span class="comment"># åœ¨è§„åˆ™å¤„ç†ä¹‹åæ‰“å°udeväº‹ä»¶ã€‚</span></span><br><span class="line">udevadm monitor --property <span class="comment"># è¿˜è¦æ‰“å°äº‹ä»¶çš„å±æ€§ã€‚</span></span><br><span class="line">udevadm monitor -k         <span class="comment"># å†…æ ¸ uevent äº‹ä»¶ä¿¡æ¯æŸ¥çœ‹</span></span><br></pre></td></tr></table></figure></p>
<p><br/></p>
<p><strong>info å­å‘½ä»¤</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®ä¾‹2.æŸ¥çœ‹ç£ç›˜è®¾å¤‡åœ¨å†…æ ¸ä¸­çš„å±æ€§(æ›¿ä»£udevinfoå‘½ä»¤)</span></span><br><span class="line"><span class="variable">$udevadm</span> info -a -p /sys/block/sda</span><br><span class="line"><span class="comment"># looking at device '/devices/pci0000:00/0000:00:15.0/0000:03:00.0/host1/target1:0:0/1:0:0:0/block/sda':</span></span><br><span class="line"><span class="comment"># looking at parent device '/devices/pci0000:00/0000:00:15.0/0000:03:00.0/host1/target1:0:0/1:0:0:0':</span></span><br><span class="line"><span class="comment">#   KERNELS=="1:0:0:0"</span></span><br><span class="line"><span class="comment">#   SUBSYSTEMS=="scsi"</span></span><br><span class="line"><span class="comment">#   DRIVERS=="sd"</span></span><br><span class="line"><span class="comment"># looking at parent device '/devices/pci0000:00/0000:00:15.0/0000:03:00.0/host1/target1:0:0':</span></span><br><span class="line"><span class="comment">#   KERNELS=="target1:0:0"</span></span><br><span class="line"><span class="comment">#   SUBSYSTEMS=="scsi"</span></span><br><span class="line"><span class="comment">#   DRIVERS==""</span></span><br><span class="line"><span class="comment"># looking at parent device '/devices/pci0000:00/0000:00:15.0/0000:03:00.0/host1':</span></span><br><span class="line"><span class="comment">#   KERNELS=="host1"</span></span><br><span class="line"><span class="comment">#   SUBSYSTEMS=="scsi"</span></span><br><span class="line"><span class="comment">#   DRIVERS==""</span></span><br><span class="line"><span class="comment"># looking at parent device '/devices/pci0000:00/0000:00:15.0/0000:03:00.0':</span></span><br><span class="line"><span class="comment">#   KERNELS=="0000:03:00.0"</span></span><br><span class="line"><span class="comment">#   SUBSYSTEMS=="pci"</span></span><br><span class="line"><span class="comment">#   DRIVERS=="vmw_pvscsi"</span></span><br><span class="line"><span class="comment"># looking at parent device '/devices/pci0000:00/0000:00:15.0':</span></span><br><span class="line"><span class="comment">#   KERNELS=="0000:00:15.0"</span></span><br><span class="line"><span class="comment">#   SUBSYSTEMS=="pci"</span></span><br><span class="line"><span class="comment">#   DRIVERS=="pcieport"</span></span><br><span class="line"><span class="comment"># looking at parent device '/devices/pci0000:00':</span></span><br><span class="line"><span class="comment">#   KERNELS=="pci0000:00"</span></span><br><span class="line"><span class="comment">#   SUBSYSTEMS==""</span></span><br><span class="line"><span class="comment">#   DRIVERS==""</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># å®ä¾‹3.ä¸ºå·²ç»å­˜åœ¨çš„è®¾å¤‡èŠ‚ç‚¹ç¼–å†™è§„åˆ™å¯ä»¥ç›´æ¥ä½¿ç”¨ä»¥ä¸‹å±æ€§</span></span><br><span class="line"><span class="variable">$udevadm</span> info -n /dev/sda</span><br><span class="line"><span class="comment"># P: /devices/pci0000:00/0000:00:10.0/host32/target32:0:0/32:0:0:0/block/sda</span></span><br><span class="line"><span class="comment"># N: sda</span></span><br><span class="line"><span class="comment"># L: 0</span></span><br><span class="line"><span class="comment"># S: disk/by-path/pci-0000:00:10.0-scsi-0:0:0:0</span></span><br><span class="line"><span class="comment"># E: DEVPATH=/devices/pci0000:00/0000:00:10.0/host32/target32:0:0/32:0:0:0/block/sda</span></span><br><span class="line"><span class="comment"># E: DEVNAME=/dev/sda</span></span><br><span class="line"><span class="comment"># E: DEVTYPE=disk</span></span><br><span class="line"><span class="comment"># E: MAJOR=8</span></span><br><span class="line"><span class="comment"># E: MINOR=0</span></span><br><span class="line"><span class="comment"># E: SUBSYSTEM=block</span></span><br><span class="line"><span class="comment"># E: USEC_INITIALIZED=2120529</span></span><br><span class="line"><span class="comment"># E: SCSI_TPGS=0</span></span><br><span class="line"><span class="comment"># E: SCSI_TYPE=disk</span></span><br><span class="line"><span class="comment"># E: SCSI_VENDOR=VMware</span></span><br><span class="line"><span class="comment"># E: SCSI_VENDOR_ENC=VMware\x20\x20</span></span><br><span class="line"><span class="comment"># E: SCSI_MODEL=Virtual_disk</span></span><br><span class="line"><span class="comment"># E: SCSI_MODEL_ENC=Virtual\x20disk\x20\x20\x20\x20</span></span><br><span class="line"><span class="comment"># E: SCSI_REVISION=1.0</span></span><br><span class="line"><span class="comment"># E: ID_SCSI=1</span></span><br><span class="line"><span class="comment"># E: ID_VENDOR=VMware</span></span><br><span class="line"><span class="comment"># E: ID_VENDOR_ENC=VMware\x20\x20</span></span><br><span class="line"><span class="comment"># E: ID_MODEL=Virtual_disk</span></span><br><span class="line"><span class="comment"># E: ID_MODEL_ENC=Virtual\x20disk\x20\x20\x20\x20</span></span><br><span class="line"><span class="comment"># E: ID_REVISION=1.0</span></span><br><span class="line"><span class="comment"># E: ID_TYPE=disk</span></span><br><span class="line"><span class="comment"># E: MPATH_SBIN_PATH=/sbin</span></span><br><span class="line"><span class="comment"># E: ID_BUS=scsi</span></span><br><span class="line"><span class="comment"># E: ID_PATH=pci-0000:00:10.0-scsi-0:0:0:0</span></span><br><span class="line"><span class="comment"># E: ID_PATH_TAG=pci-0000_00_10_0-scsi-0_0_0_0</span></span><br><span class="line"><span class="comment"># E: ID_PART_TABLE_UUID=36f4f6a3-6312-408e-8497-a333afa589f7</span></span><br><span class="line"><span class="comment"># E: ID_PART_TABLE_TYPE=gpt</span></span><br><span class="line"><span class="comment"># E: DEVLINKS=/dev/disk/by-path/pci-0000:00:10.0-scsi-0:0:0:0</span></span><br><span class="line"><span class="comment"># E: TAGS=:systemd:</span></span><br><span class="line"><span class="variable">$udevadm</span> info -q path -n /dev/sda</span><br><span class="line">/devices/pci0000:00/0000:00:10.0/host32/target32:0:0/32:0:0:0/block/sda</span><br><span class="line"><span class="variable">$udevadm</span> info -a -p $(udevadm info -q path -n /dev/sda)  <span class="comment"># æ•ˆæœåŒ2</span></span><br></pre></td></tr></table></figure></p>
<p><br></p>
<p><strong>control å­å‘½ä»¤</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ¤æ–­å®ˆæŠ¤è¿›ç¨‹æ˜¯å¦åœ¨çº¿</span></span><br><span class="line">sudo udevadm control --ping</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<p><strong>test å­å‘½ä»¤</strong><br>æè¿°:é€šå¸¸ä½¿ç”¨æ¥è°ƒè¯•è§„åˆ™æ–‡ä»¶;<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.ç”±äº udevtestæ˜¯æ‰«ææ‰€æœ‰çš„è§„åˆ™æ–‡ä»¶ ( åŒ…æ‹¬ç³»ç»Ÿè‡ªå¸¦çš„è§„åˆ™æ–‡ä»¶ )ï¼Œæ‰€ä»¥ä¼šäº§ç”Ÿå†—é•¿çš„è¾“å‡ºã€‚ä¸ºäº†è®©è¯»è€…æ¸…æ¥šåœ°äº†è§£ udevtestï¼Œæœ¬ä¾‹åªåœ¨è§„åˆ™ç›®å½•é‡Œä¿ç•™ä¸€æ¡è§„åˆ™ï¼š</span></span><br><span class="line">$ vim /etc/udev/rules.d/99-test.rules</span><br><span class="line">KERNEL==<span class="string">"sd*"</span>, PROGRAM=<span class="string">"/lib/udev/scsi_id -g -s %p"</span>, RESULT==<span class="string">"35000c50000a7ef67"</span>, \</span><br><span class="line">NAME=<span class="string">"root_disk%n"</span>, SYMLINK=<span class="string">"symlink_root_disk%n"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä» test çš„æ‰§è¡Œè¿‡ç¨‹å¯ä»¥çœ‹å‡ºï¼Œtestå¯¹ sda æ‰§è¡Œäº†å¤–éƒ¨å‘½ä»¤ scsi_id, å¾—åˆ°çš„ stdout å’Œè§„åˆ™æ–‡ä»¶é‡Œçš„ RESULT åŒ¹é…ï¼Œæ‰€ä»¥è¯¥è§„åˆ™åŒ¹é…ã€‚ç„¶å ( æ¨¡æ‹Ÿ ) äº§ç”Ÿè®¾å¤‡æ–‡ä»¶ /dev/root_diskå’Œç¬¦å·é“¾æ¥ /dev/symlink_root_diskï¼Œå¹¶ä¸ºå…¶è®¾å®šæƒé™ã€‚</span></span><br><span class="line">$ udevadm <span class="built_in">test</span> /block/sda </span><br><span class="line"><span class="comment"># main: looking at device '/block/sda' from subsystem 'block'</span></span><br><span class="line"><span class="comment"># run_program: '/lib/udev/scsi_id -g -s /block/sda'</span></span><br><span class="line"><span class="comment"># run_program: '/lib/udev/scsi_id' (stdout) '35000c50000a7ef67'</span></span><br><span class="line"><span class="comment"># run_program: '/lib/udev/scsi_id' returned with status 0 </span></span><br><span class="line"><span class="comment"># udev_rules_get_name: reset symlink list </span></span><br><span class="line"><span class="comment"># udev_rules_get_name: add symlink 'symlink_root_disk'</span></span><br><span class="line"><span class="comment"># udev_rules_get_name: rule applied, 'sda' becomes 'root_disk'</span></span><br><span class="line"><span class="comment"># udev_device_event: device '/block/sda' already in database, \</span></span><br><span class="line"><span class="comment">#                  validate currently present symlinks </span></span><br><span class="line"><span class="comment"># udev_node_add: creating device node '/dev/root_disk', major = '8', \</span></span><br><span class="line"><span class="comment">#            minor = '0', mode = '0660', uid = '0', gid = '0'</span></span><br><span class="line"><span class="comment"># udev_node_add: creating symlink '/dev/symlink_root_disk' to 'root_disk'</span></span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h5 id="udevinfo-æ˜¾ç¤ºsysfsçš„è®¾å¤‡è·¯å¾„ç›¸å…³å±æ€§ä¿¡æ¯-deprecated"><a href="#udevinfo-æ˜¾ç¤ºsysfsçš„è®¾å¤‡è·¯å¾„ç›¸å…³å±æ€§ä¿¡æ¯-deprecated" class="headerlink" title="udevinfo - æ˜¾ç¤ºsysfsçš„è®¾å¤‡è·¯å¾„ç›¸å…³å±æ€§ä¿¡æ¯ (deprecated)"></a>udevinfo - æ˜¾ç¤ºsysfsçš„è®¾å¤‡è·¯å¾„ç›¸å…³å±æ€§ä¿¡æ¯ (deprecated)</h5><p>æè¿°:è¯¥å‘½ä»¤ç”¨æ¥æ„å»ºudevè§„åˆ™çš„æœ€ç›´æ¥æ–¹ä¾¿çš„å·¥å…·,ç°å·²ç»è¢«ç³»ç»Ÿæ•´åˆè¿›å…¥udevadmå½¢æˆäº†å­å‘½ä»¤,ä½†æ˜¯å¯¹äºä¸€äº›è€ç³»ç»Ÿä»ç„¶å­˜åœ¨ä»¥ä¸‹å‘½ä»¤;</p>
<p>åŸºç¡€ç¤ºä¾‹:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$udevinfo</span> -a -p /sys/block/sda</span><br><span class="line">looking at device <span class="string">'/block/sda'</span>:</span><br><span class="line">  KERNEL==<span class="string">"sda"</span></span><br><span class="line">  SUBSYSTEM==<span class="string">"block"</span></span><br><span class="line">  ATTR&#123;<span class="built_in">stat</span>&#125;==<span class="string">"  128535     2246  2788977   766188    73998   317300  3132216  5735004        0   516516  6503316"</span></span><br><span class="line">  ATTR&#123;size&#125;==<span class="string">"234441648"</span></span><br><span class="line">  ATTR&#123;removable&#125;==<span class="string">"0"</span></span><br><span class="line">  ATTR&#123;range&#125;==<span class="string">"16"</span></span><br><span class="line">  ATTR&#123;dev&#125;==<span class="string">"8:0"</span></span><br><span class="line"></span><br><span class="line">looking at parent device <span class="string">'/devices/pci0000:00/0000:00:07.0/host0/target0:0:0/0:0:0:0'</span>:</span><br><span class="line">  KERNELS==<span class="string">"0:0:0:0"</span></span><br><span class="line">  SUBSYSTEMS==<span class="string">"scsi"</span></span><br><span class="line">  DRIVERS==<span class="string">"sd"</span></span><br><span class="line">  ATTRS&#123;ioerr_cnt&#125;==<span class="string">"0x0"</span></span><br><span class="line">  ATTRS&#123;iodone_cnt&#125;==<span class="string">"0x31737"</span></span><br><span class="line">  ATTRS&#123;iorequest_cnt&#125;==<span class="string">"0x31737"</span></span><br><span class="line">  ATTRS&#123;iocounterbits&#125;==<span class="string">"32"</span></span><br><span class="line">  ATTRS&#123;timeout&#125;==<span class="string">"30"</span></span><br><span class="line">  ATTRS&#123;state&#125;==<span class="string">"running"</span></span><br><span class="line">  ATTRS&#123;rev&#125;==<span class="string">"3.42"</span></span><br><span class="line">  ATTRS&#123;model&#125;==<span class="string">"ST3120827AS     "</span></span><br><span class="line">  ATTRS&#123;vendor&#125;==<span class="string">"ATA     "</span></span><br><span class="line">  ATTRS&#123;scsi_level&#125;==<span class="string">"6"</span></span><br><span class="line">  ATTRS&#123;<span class="built_in">type</span>&#125;==<span class="string">"0"</span></span><br><span class="line">  ATTRS&#123;queue_type&#125;==<span class="string">"none"</span></span><br><span class="line">  ATTRS&#123;queue_depth&#125;==<span class="string">"1"</span></span><br><span class="line">  ATTRS&#123;device_blocked&#125;==<span class="string">"0"</span></span><br><span class="line"></span><br><span class="line">looking at parent device <span class="string">'/devices/pci0000:00/0000:00:07.0'</span>:</span><br><span class="line">  KERNELS==<span class="string">"0000:00:07.0"</span></span><br><span class="line">  SUBSYSTEMS==<span class="string">"pci"</span></span><br><span class="line">  DRIVERS==<span class="string">"sata_nv"</span></span><br><span class="line">  ATTRS&#123;vendor&#125;==<span class="string">"0x10de"</span></span><br><span class="line">  ATTRS&#123;device&#125;==<span class="string">"0x037f"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨udevinfoæ¥ä¸ºä½ æŸ¥æ‰¾è®¾å¤‡è·¯å¾„å¯¹äºå·²ç»å­˜åœ¨çš„è®¾å¤‡èŠ‚ç‚¹ç¼–å†™è§„åˆ™</span></span><br><span class="line">udevinfo -a -p $(udevinfo -q path -n /dev/sda)</span><br></pre></td></tr></table></figure></p>
<p>Tips:å¯ä¾æ®å…¶ç¼–å†™udevè§„åˆ™åŠå…¶æ³¨æ„ç‚¹<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.udevinfo åªç”Ÿæˆä¸€ä¸ªå±æ€§åˆ—è¡¨ï¼Œæ‚¨å¯ä»¥åœ¨udevè§„åˆ™ä¸­ä½œä¸ºåŒ¹é…é”®ä½¿ç”¨ã€‚</span></span><br><span class="line">SUBSYSTEM==<span class="string">"block"</span>, ATTR&#123;size&#125;==<span class="string">"234441648"</span>, NAME=<span class="string">"my_hard_disk"</span></span><br><span class="line">SUBSYSTEM==<span class="string">"block"</span>, SUBSYSTEMS==<span class="string">"scsi"</span>, ATTRS&#123;model&#125;==<span class="string">"ST3120827AS"</span>, NAME=<span class="string">"my_hard_disk"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.ä»¥ä¸‹è§„åˆ™æ— æ•ˆå› ä¸ºå®ƒè¯•å›¾åŒ¹é…æ¥è‡ªä¸¤ä¸ªçˆ¶è®¾å¤‡çš„å±æ€§(ä¸èƒ½è¿›è¡Œè®¾å¤‡å…³è”åŒ¹é…):</span></span><br><span class="line">SUBSYSTEM==<span class="string">"block"</span>, ATTRS&#123;model&#125;==<span class="string">"ST3120827AS"</span>, DRIVERS==<span class="string">"sata_nv"</span>, NAME=<span class="string">"my_hard_disk"</span></span><br></pre></td></tr></table></figure></p>
<hr>
<h4 id="æœ¬ç« å°ç»“"><a href="#æœ¬ç« å°ç»“" class="headerlink" title="æœ¬ç« å°ç»“"></a>æœ¬ç« å°ç»“</h4><p>æè¿°: udev æ˜¯é«˜æ•ˆçš„è®¾å¤‡ç®¡ç†å·¥å…·ï¼Œå…¶æœ€å¤§çš„ä¼˜åŠ¿æ˜¯åŠ¨æ€ç®¡ç†è®¾å¤‡å’Œè‡ªå®šä¹‰è®¾å¤‡çš„å‘½åè§„åˆ™ï¼Œå› æ­¤æ›¿ä»£ devfs æˆä¸º Linux é»˜è®¤çš„è®¾å¤‡ç®¡ç†å·¥å…·ã€‚</p>
<p>ä¸Šæ–‡ä¸»è¦æè¿°äº†Linux ç”¨æˆ·èƒ½å¤Ÿäº†è§£åˆ° udev çš„å·¥ä½œåŸç†å’Œæµç¨‹ï¼Œçµæ´»åœ°è¿ç”¨ udev è§„åˆ™æ–‡ä»¶ï¼Œä»è€Œæ–¹ä¾¿åœ°ç®¡ç† Linux è®¾å¤‡æ–‡ä»¶ã€‚</p>
<p>åœ¨udevè§„åˆ™ä¸­å¯ä»¥è§„å®šäº†ç³»ç»Ÿæ‰€æœ‰è®¾å¤‡ç»‘å®šçš„æ¡ä»¶å½“åŒ¹é…åˆ™æŒ‰ç…§å°±è§„åˆ™åˆ›å»ºç¬¦å·é“¾æ¥, åœ¨æ—¥å¸¸ä½¿ç”¨å¹¶ä¸è¦æ‚¨å…¨éƒ¨è¿›è¡Œç»‘å®šè€Œæ˜¯æŒ‰ç…§éœ€æ±‚ç»‘å®šå³å¯;</p>
<p><strong>å‚è€ƒè¿æ¥</strong></p>
<ul>
<li>å¦‚ä½•ç¼–å†™udevè§„åˆ™:<a href="http://www.reactivated.net/writing_udev_rules.html" target="_blank" rel="noopener">http://www.reactivated.net/writing_udev_rules.html</a></li>
<li>udevè§„åˆ™ï¼š<a href="https://www.ibm.com/developerworks/cn/linux/l-cn-udev/index.html" target="_blank" rel="noopener">https://www.ibm.com/developerworks/cn/linux/l-cn-udev/index.html</a></li>
</ul>

        </div>
        
  <hr>
  <p> æ¬¢è¿å„ä½å¿—åŒé“åˆçš„æœ‹å‹ä¸€èµ·å­¦ä¹ äº¤æµï¼Œå¦‚æ–‡ç« æœ‰è¯¯è¯·åœ¨ä¸‹æ–¹ç•™ä¸‹æ‚¨å®è´µçš„ç»éªŒçŸ¥è¯†ï¼Œä¸ªäººé‚®ç®±åœ°å€<b style="color:#ff654e"><code>ã€master#weiyigeek.topã€‘</code></b>æˆ–è€…ä¸ªäººå…¬ä¼—å·<b style="color:#ff654e"><code>ã€WeiyiGeekã€‘</code></b>è”ç³»æˆ‘ã€‚ </p>

  <p> æ›´å¤šæ–‡ç« æ¥æºäº<b style="color:#03a9f4">ã€WeiyiGeek Blog - ä¸ºäº†èƒ½åˆ°è¿œæ–¹ï¼Œè„šä¸‹çš„æ¯ä¸€æ­¥éƒ½ä¸èƒ½å°‘ã€‘</b>, ä¸ªäººé¦–é¡µåœ°å€( <a style="color: #03a9f4;" href="https://weiyigeek.top" target="_blank"> https://weiyigeek.top </a> )</p>

  <p>ä¸“æ ä¹¦å†™ä¸æ˜“ï¼Œå¦‚æœæ‚¨è§‰å¾—è¿™ä¸ªä¸“æ è¿˜ä¸é”™çš„ï¼Œè¯·ç»™è¿™ç¯‡ä¸“æ  <b style="color: red;">ã€ç‚¹ä¸ªèµã€æŠ•ä¸ªå¸ã€æ”¶ä¸ªè—ã€å…³ä¸ªæ³¨ï¼Œè½¬ä¸ªå‘ã€‘(äººé—´äº”å¤§æƒ…)</b>ï¼Œè¿™å°†å¯¹æˆ‘çš„è‚¯å®šï¼Œè°¢è°¢ï¼ã€‚</p>

  <div>
    <img src="https://www.weiyigeek.top/img/weiyigeek.jpg" class="img-responsive" alt="WeiyiGeek-banner">
  </div>

  <ul style="font-weight: bolder;">
    <li>
      <p><span style="color: #03a9f4">echo&nbsp;&nbsp;"ã€ç‚¹ä¸ªèµã€‘ï¼ŒåŠ¨åŠ¨ä½ é‚£ç²—å£®çš„æ‹‡æŒ‡æˆ–è€…èŠŠèŠŠç‰æ‰‹ï¼Œäº²ï¼"</span></p>
    </li>
    <li>
      <p><span style="color: #ff9201">printf("%s",&nbsp;"ã€æŠ•ä¸ªå¸ã€‘ï¼Œä¸‡æ°´åƒå±±æ€»æ˜¯æƒ…ï¼ŒæŠ•ä¸ªç¡¬å¸è¡Œä¸è¡Œï¼Œäº²ï¼")</span></p>
    </li>
    <li>
      <p><span style="color: #02a2ff">fmt.Printf("ã€æ”¶ä¸ªè—ã€‘ï¼Œé˜…åå³ç„šä¸åƒç°ï¼Œäº²ï¼")&nbsp;&nbsp;</span></p>
    </li>
    <li>
      <p><span style="color:red">console.info("ã€è½¬ä¸ªå‘ã€‘ï¼Œè®©æ›´å¤šçš„å¿—åŒé“åˆçš„æœ‹å‹ä¸€èµ·å­¦ä¹ äº¤æµï¼Œäº²ï¼")</span></p>
    </li>
    <li>
      <p><span style="color: #ff654e">System.out.println("ã€å…³ä¸ªæ³¨ã€‘ï¼Œåç»­æµè§ˆæŸ¥çœ‹ä¸è¿·è·¯å“Ÿï¼Œäº²ï¼")</span></p>
    </li>
  </ul>

  <div>
    <img src="/img/wechat-search.png" class="img-responsive" alt="æ‰«æFollow(å…³æ³¨)WeiyiGeekå…¬ä¼—å·"  width="380" height="170">
    <img src="/img/wechat-app.png" class="img-responsive" alt="æ‰«æVisit(æµè§ˆ)æå®¢å…¨æ ˆä¿®ç‚¼å°ç¨‹åº"  width="385" height="170">
  </div>
  <hr>
  

  <blockquote class="post-copyright">
    <div class="content">
      
        
<span class="post-time">
    æœ€åæ›´æ–°æ—¶é—´ï¼š<time datetime="2022-03-29T05:39:06.307Z" itemprop="dateUpdated">2022-03-29 13:39:06</time>
</span><br>


        <span>æ–‡ç« åŸå§‹è·¯å¾„ï¼š<a href="https://github.com/WeiyiGeek/blog/edit/master/source/_posts/ç³»ç»Ÿè¿ç»´/Linux/å¸¸ç”¨å‘½ä»¤/ç³»ç»Ÿç¡¬ä»¶èµ„æºç±»å‘½ä»¤/udevé«˜æ•ˆåŠ¨æ€è®¾å¤‡ç®¡ç†å™¨ä»‹ç»ä¸ä½¿ç”¨.md" target="_blank" rel="noopener noreferrer">_posts/ç³»ç»Ÿè¿ç»´/Linux/å¸¸ç”¨å‘½ä»¤/ç³»ç»Ÿç¡¬ä»¶èµ„æºç±»å‘½ä»¤/udevé«˜æ•ˆåŠ¨æ€è®¾å¤‡ç®¡ç†å™¨ä»‹ç»ä¸ä½¿ç”¨.md</a></span><br>
         <span class="copy-copyright">è½¬è½½æ³¨æ˜å‡ºå¤„ï¼ŒåŸæ–‡åœ°å€ï¼š<a href="/2019/6-18-161.html" target="_blank" rel="external">https://blog.weiyigeek.top/2019/6-18-161.html</a></span><br>æœ¬ç«™æ–‡ç« å†…å®¹éµå¾ª <a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">çŸ¥è¯†å…±äº« ç½²å - éå•†ä¸šæ€§ - ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…åè®®</a> 
    </div>
    <footer>
      <a href="https://blog.weiyigeek.top">
        <img src="/img/avatar.jpg" alt="WeiyiGeek">
        WeiyiGeek
      </a>
    </footer>
  </blockquote>


        
            <div class="page-reward">
  <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-rectangle waves-light">ğŸ‘ é’Ÿæ„ä½œè€…</a>
</div>
            
        
        <div class="post-footer">
            
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/" rel="tag">ç£ç›˜ç®¡ç†</a></li></ul>

            <div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://blog.weiyigeek.top/2019/6-18-161.html&title=ã€Šudevé«˜æ•ˆã€åŠ¨æ€åœ°ç®¡ç† Linux è®¾å¤‡æ–‡ä»¶ã€‹ â€” WeiyiGeek Blog&pic=https://blog.weiyigeek.top/img/avatar.jpg" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.weiyigeek.top/2019/6-18-161.html&title=ã€Šudevé«˜æ•ˆã€åŠ¨æ€åœ°ç®¡ç† Linux è®¾å¤‡æ–‡ä»¶ã€‹ â€” WeiyiGeek Blog&source=[TOC]" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.weiyigeek.top/2019/6-18-161.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€Šudevé«˜æ•ˆã€åŠ¨æ€åœ°ç®¡ç† Linux è®¾å¤‡æ–‡ä»¶ã€‹ â€” WeiyiGeek Blog&url=https://blog.weiyigeek.top/2019/6-18-161.html&via=https://blog.weiyigeek.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://blog.weiyigeek.top/2019/6-18-161.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>

        </div>
        
          <!-- è¯„è®ºç»„ä»¶ -->


<div id="gitalk-container"></div>
<script type="text/javascript" src="/js/plugins/gitalk.min.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/custom/gitalk.init.js?v=1.6.6"></script>
        
    </div>
    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="prev">
      <a href="/2019/6-18-93.html" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">Linuxä¸‹å®‰è£…Oracle11gR2</h4>
      </a>
    </div>
  

  
    <div class="next">
      <a href="/2019/6-17-160.html" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">ç£ç›˜å’Œç§»åŠ¨å­˜å‚¨å¸¸ç”¨å‘½ä»¤</h4>
      </a>
    </div>
  
</nav>


    
    
        <aside class="post-widget">
            <nav class="post-toc-wrap" id="post-toc">
                <strong>ç›®å½•</strong>
                <ol class="post-toc"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#0x00-å‰è¨€ç®€ä»‹"><span class="post-toc-number">1.</span> <span class="post-toc-text">0x00 å‰è¨€ç®€ä»‹</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#0x01-å®‰è£…udev"><span class="post-toc-number">2.</span> <span class="post-toc-text">0x01 å®‰è£…udev</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#0x02-é…ç½®æ–‡ä»¶æ ‘å½¢"><span class="post-toc-number">3.</span> <span class="post-toc-text">0x02 é…ç½®æ–‡ä»¶æ ‘å½¢</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#0x03-UDEVè§„åˆ™å®ä¾‹"><span class="post-toc-number">4.</span> <span class="post-toc-text">0x03 UDEVè§„åˆ™å®ä¾‹</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#0x04-UDEV-ç›¸å…³å‘½ä»¤"><span class="post-toc-number">5.</span> <span class="post-toc-text">0x04 UDEV ç›¸å…³å‘½ä»¤</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#æœ¬ç« å°ç»“"><span class="post-toc-number">6.</span> <span class="post-toc-text">æœ¬ç« å°ç»“</span></a></li></ol>
            </nav>
            <div class="toc-bar"><div>
        </aside>
    
</article>

  <div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        å¦‚æœæ­¤ç¯‡æ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¿˜è¯·æ”¯æŒä¸€ä¸‹åšä¸»å“Ÿ, è°¢è°¢å„ä½çœ‹å‹â™¥!
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardwechat" src="/img/reward-wechat.jpg" height="228" height="228" alt="æ‰“èµäºŒç»´ç ">
            <img id="rewardalipay" src="/img/reward-alipay.png" height="228" height="228" alt="æ‰“èµäºŒç»´ç ">
        </div>
        
        <label class="reward-toggle">
            <!-- <input id="rewardToggle" type="checkbox" class="reward-toggle-check" data-wechat="/img/reward-wechat.jpg" data-alipay="/img/reward-alipay.png"> -->
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">å¾®ä¿¡</span>
                <span class="reward-toggle-item alipay">æ”¯ä»˜å®</span>
            </div>
        </label>
        
    </div>
</div>

  
 <!-- å¾®ä¿¡å…¬ä¼—å·å…³æ³¨/æ–‡ç« ç‰ˆæƒå¤åˆ¶ -->

  <div id="btw-mask" style="position: fixed; top: 0px; right: 0px; bottom: 0px; left: 0px; opacity: 0.7; z-index: 999; background: rgb(0, 0, 0); display:none"></div>
<div id="btw-modal" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 360px; text-align: center; font-size: 13px; background: rgb(255, 255, 255); border-radius: 10px; z-index: 9999; font-family: PingFangSC-Regular, sans-serif;display:none">
<span id="btw-modal-close-btn" style="position: absolute; top: 5px; right: 15px; line-height: 1.8; font-size: 15px; cursor: pointer; opacity: 0.2; z-index: 9999; color: rgb(0, 0, 0); background: none; border: none; outline: none;">X</span>
<p id="btw-modal-header" style="margin-top: 40px; line-height: 1.8; font-size: 13px; ">
<b style="color:#6190e8;">ä½ å¥½æœ‹å‹,å¯ä»¥å…³ä¸ªæ³¨å—? â¤ <br> è¿™å°†æ˜¯æˆ‘æŒç»­æ›´æ–°æ–‡ç« çš„åŠ¨åŠ›æºæ³‰ï¼Œè°¢è°¢æ”¯æŒï¼(à¹‘â€²á´—â€µà¹‘) </b> <br> å¦‚ä¸æƒ³å…³æ³¨è¯·ç‚¹å‡»å³ä¸Šè§’çš„ã€Xã€‘<br>
<br>Method 1.Please visit <strong><a href="https://twitter.com/WeiyiGeek" target="_blank" rel="noopener" style="color: rgb(240, 65, 52);text-decoration:underline;">ã€My Twitterã€‘</a></strong>. There is an article verification code in the homepage.
<br>æ–¹å¼2.è¯·è®¿é—®æœ¬åšä¸»çš„Bç«™<strong><a href="https://space.bilibili.com/385802642" target="_blank" rel="noopener" style="color: rgb(240, 65, 52);text-decoration:underline;">ã€WeiyiGeekã€‘</a></strong>é¦–é¡µå…³æ³¨UPä¸»,<br>å°†è‡ªåŠ¨éšæœºè·å–è§£é”éªŒè¯ç ã€‚
<br>æ–¹å¼3.æ‰«ä¸€æ‰«ä¸‹æ–¹äºŒç»´ç ï¼Œå…³æ³¨æœ¬ç«™<strong>å®˜æ–¹å…¬ä¼—å·</strong><br>
å›å¤ï¼š<strong style="color: rgb(240, 65, 52);">éªŒè¯ç </strong>
å°†è·å–<strong style="color: rgb(240, 65, 52);">è§£é”(æœ‰æ•ˆæœŸ7å¤©)</strong>æœ¬ç«™æ‰€æœ‰æŠ€æœ¯æ–‡ç« å“Ÿ!</p>
<img src="/img/wechat-search.png" style="width: 300px; margin-top: 10px;">
<div id="btw-modal-input-code" style="margin-top: 20px; background: rgb(255, 255, 255);">
  <input id="btw-modal-input" type="number" minlength="4" maxlength="4" placeholder="è¯·è¾“å…¥éªŒè¯ç |Verification Code"
    style="width: 165px; height: 32px; line-height: 32px; padding: 0px 10px; margin: 0px 10px; font-size: 13px; text-rendering: auto; text-transform: none; cursor: text; outline: none; box-sizing: border-box; border: 1px solid rgb(221, 221, 221); -webkit-appearance: textfield; background-color: white; -webkit-rtl-ordering: logical;"/>
  <button id="btw-submit-btn" onclick="yzm_vertify()"
    style="padding: 0px 20px; height: 32px; font-size: 14px; outline: none; border: none; color: rgb(255, 255, 255); background: rgb(222, 104, 109); cursor: pointer;">æ
    äº¤</button> </div>
<p id="btw-footer" style="margin: 40px 0px 20px; color: rgb(153, 153, 153);">@WeiyiGeek - ä¸ºäº†èƒ½åˆ°è¿œæ–¹ï¼Œè„šä¸‹çš„æ¯ä¸€æ­¥éƒ½ä¸èƒ½å°‘</p>
</div>


</div>

    </main>
    <footer class="footer ">
    
    <div class="top">
        
            <p>
    <span>Linksï¼š</span>
    
    <span class="blogroll-item">
        <a href="https://weiyigeek.top" target="_blank">https://weiyigeek.top</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.weiyigeek.top" target="_blank">https://blog.weiyigeek.top</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://weiyigeek.top/img/wechat-search.png" target="_blank">å…¬ä¼—è´¦å·</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://space.bilibili.com/385802642/article" target="_blank">å“”å“©å“”å“©ä¸“æ </a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://github.com/weiyigeek" target="_blank">ä¸ªäººGithub</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://gitee.com/WeiyiGeek" target="_blank">ä¸ªäººGitee</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.zhihu.com/people/weiyiSec" target="_blank">ä¸ªäººçŸ¥ä¹</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.cnblogs.com/WeiyiGeek" target="_blank">åšå®¢å›­</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://my.oschina.net/weiyigeek" target="_blank">OSCHINA</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.toutiao.com/c/user/token/MS4wLjABAAAAqcPSoMqfctaEqJpGSF775eeCjWkrop4AOyLITdMx-L78F5iXzfQcSRM5sY4dq3wR" target="_blank">ä»Šæ—¥å¤´æ¡</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.csdn.net/u013072756?type=lately" target="_blank">CSDN</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.jianshu.com/u/5199a1104739" target="_blank">ç®€ä¹¦</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://cloud.tencent.com/developer/user/1389665/articles" target="_blank">è…¾è®¯äº‘+äº‘ç¤¾åŒº</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://cuttlefish.baidu.com/shop/75c5dbd8d15abe23482f4d40" target="_blank">ç™¾åº¦æ–‡åº“</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://author.baidu.com/home?from=blog&app_id=1726736601523415" target="_blank">ITæå®¢çŸ¥è¯†åˆ†äº«</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.51cto.com/weiyigeek" target="_blank">51CTOåšå®¢</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://juejin.cn/user/122767337595934" target="_blank">æ˜é‡‘</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://weibo.com/a/hot/7622022703618049_1.html" target="_blank">å¾®åšæ–‡ç« </a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.xiaohongshu.com/user/profile/627c98bb000000001000e7ba" target="_blank">å°çº¢ä¹¦</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://segmentfault.com/u/weiyigeek" target="_blank">Segmentfault</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.douyin.com/user/MS4wLjABAAAAMSBdMja6XLsdmzafb0RNbFeBemIOk38K1PaOClZeI1Q" target="_blank">æŠ–éŸ³ä¸»é¡µ</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.kuaishou.com/profile/3xfbrsrhd2i69x9" target="_blank">å¿«æ‰‹ä¸»é¡µ</a>
    </span>
    
</p>

        
    </div>
    
    <div class="bottom">
      <p>
        <span>WeiyiGeek &copy; 2018 - 2022 <a href="https://weiyigeek.top" target="_blank" rel="noopener">weiyigeek.top</a> All rights reserved.å”¯ä¸€æå®¢ITçŸ¥è¯†åˆ†äº« ç‰ˆæƒæ‰€æœ‰ </span>
        
        <span>
          Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/weiyigeek" target="_blank">mellow</a>
        </span>
        
        <br/>è®¿é—®ç»Ÿè®¡
        <span><a href="/sitemap.xml" target="_blank" rel="Sitemaps-ç«™ç‚¹åœ°å›¾">Sitemaps</a> </span>
        <span><a href="/baidusitemap.xml" target="_blank" rel="baidusitemaps-ç™¾åº¦ç«™ç‚¹åœ°å›¾">ç«™ç‚¹åœ°å›¾</a> </span>
        <!-- 
  -->
        <br/>ICPå¤‡æ¡ˆå·<span><a href="https://beian.miit.gov.cn" target="_blank">æ¸ICPå¤‡2022003447å·</a></span>
        <br/>
        <div id="cc-myssl-id">
          <a href="https://myssl.com/blog.weiyigeek.top?from=mysslid" target="_blank" rel="noopener"><img src="https://static.myssl.com/res/images/myssl-id1.png" alt="MySSLå®‰å…¨è®¤è¯" style="max-height:50px;display:block;margin:0 auto"></a>
        </div>
      </p>
    </div>
</footer>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>


<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://blog.weiyigeek.top/2019/6-18-161.html&title=ã€Šudevé«˜æ•ˆã€åŠ¨æ€åœ°ç®¡ç† Linux è®¾å¤‡æ–‡ä»¶ã€‹ â€” WeiyiGeek Blog&pic=https://blog.weiyigeek.top/img/avatar.jpg" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.weiyigeek.top/2019/6-18-161.html&title=ã€Šudevé«˜æ•ˆã€åŠ¨æ€åœ°ç®¡ç† Linux è®¾å¤‡æ–‡ä»¶ã€‹ â€” WeiyiGeek Blog&source=[TOC]" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.weiyigeek.top/2019/6-18-161.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€Šudevé«˜æ•ˆã€åŠ¨æ€åœ°ç®¡ç† Linux è®¾å¤‡æ–‡ä»¶ã€‹ â€” WeiyiGeek Blog&url=https://blog.weiyigeek.top/2019/6-18-161.html&via=https://blog.weiyigeek.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://blog.weiyigeek.top/2019/6-18-161.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>æ‰«ä¸€æ‰«ï¼Œåˆ†äº«åˆ°å¾®ä¿¡</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACK0lEQVR42u3ay26DQAwF0Pz/T6frqoJc21CFmcOqStDAycL16/WKr/fB9ffbo/uPzjx6yuuOCwMD47GM9+nVu+f8k3NS9bkYGBj7MPKjzx+Wh+nknDxYY2BgYFQD4iQEY2BgYNzBOD8nCcpfEXAxMDC+npGEzuT+vNGWtOduqcUxMDAeyMi77v//9y3zDQwMjEcxeqEzGT0mzbjJm/w6EwMDY2lGHuAmzf28oO29DwYGxtqMq8rUJAT3GnDRJxgYGEszJssT+TCglz42000MDIxFGdemcfMlsIsnsRgYGEsw8pt6xWc+1Oz9EBgYGDszqgXqVSOEfIBaHm1iYGA8ljFfemhOJK4N8RgYGIsyqulXMjxIwmt1kPDhHAwMjA0YeRKWvHqebibPam6LYGBgLMSohrbeAlmv0VYeA2BgYCzKmAfcfAhaDeKF8ScGBsbSjN4CRDXKVYP16H8FBgbGcoy8fdYbZE7WUgtpIgYGxtKMJDmrBtxJQjlZ48DAwNiBUR09VgNunjj2WnUYGBi7MSav1StH8/UODAyMnRm9xayrgmyvOfhKMlAMDIyHM97F69rljPxH+RB8MTAwlmb01sXyZYt8JNBLE5vTWgwMjAcyemVqkrRVB5yTkI2BgbEDo7qkNUkfCxV2fhoGBgbGRclfdZmjUB5jYGBgtBpqSaCsLnB8KGIxMDCWZiRFbLW4nYTXG9ttGBgYD2SMNjXiO6tFb9KAw8DA2IDxA+3+aphz4LgvAAAAAElFTkSuQmCC" alt="å¾®ä¿¡åˆ†äº«äºŒç»´ç ">
</div>


    
    <!-- main-js -->
<script type="text/javascript" src="/js/jquery/2.1.0-jquery.min.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/plugins/fastclick.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/plugins/ios-orientationchange-fix.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/jquery/3.5.2-jquery.fancybox.min.js?v=1.6.6"></script>
<!--  //cdn.bootcss.com/node-waves/0.7.4/waves.min.js -->
<script type="text/javascript" src="/js/node-waves/0.7.4-waves.min.js?v=1.6.6"></script> 

<script type="text/javascript" src="/js/method.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/blog.js?v=1.6.6"></script>

<!-- third-party -->
<script type="text/javascript" src="/js/plugins/local_search.js?v=1.6.6"></script>
<script type="text/javascript">
	var search_path = "search.xml";
	if (search_path.length === 0) { search_path = "search.xml";}
	var path = "/" + search_path;
	searchFunc(path, "local-search-input", "local-search-result");
</script> 

<!-- <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> --> 



  


<script>
  var _hmt = _hmt || [];
  (function() {
    // ç™¾åº¦ç»Ÿè®¡
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?53923c4b5560739bc0ed61e183be6acf";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();
</script>
 


<!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
            processEscapes: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.staticfile.org/mathjax/2.7.9/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
 
<script>
    (function() {
        var OriginTitile = document.title, titleTime;
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                document.title = 'WeiyiGeek Blog-å…³æ³¨äºç½‘ç»œå®‰å…¨_ç‰©è”ç½‘å®‰å…¨å¼€å‘_ç½‘ç»œå®‰å…¨è¿ç»´-å­¦ä¹ å¿ƒå¾—åˆ†äº«';
                clearTimeout(titleTime);
            } else {
                document.title = '(ã¤ã‚§âŠ‚)å’¦!åˆå¥½äº†!';
                titleTime = setTimeout(function() {
                    document.title = OriginTitile;
                },2000);
            }
        });
    })();
</script>
 
     <script type="text/javascript" src="/js/custom/copytips.js?v=1.6.6"></script> 
</body>
</html>
