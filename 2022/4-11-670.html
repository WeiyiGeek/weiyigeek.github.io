<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="content-language" content="zh-CN"/>
    <meta name="author" content="WeiyiGeek" />
    <meta name="msvalidate.01" content="5C552FB1D885E0E11D2957EC958C8018" />
    <meta name="shenma-site-verification" content="4c655e91c76be0a93c1b6954c666c9d6_1649049085"/>
    <meta name="bytedance-verification-code" content="lKs4FqwCHSJ3A/c5tT7X" />
    <meta name="sogou_site_verification" content="OC65iET6Bk" />
    
    <title>ğŸŒ 2.InfluxDB1.xæ•°æ®åº“å®è·µä½¿ç”¨|WeiyiGeek Blog|å”¯ä¸€æå®¢Geek-ITç½‘ç»œå®‰å…¨è¿ç»´å¼€å‘æŠ€æœ¯çŸ¥è¯†åˆ†äº«-åšå®¢ç«™ç‚¹</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    
    <meta name="keywords" content="InfluxDB">
    <meta name="Description" content="WeiyiGeek-å”¯ä¸€æå®¢åšå®¢ç«™ç‚¹,å…³æ³¨äºç½‘ç»œå®‰å…¨è¿ç»´,Webå®‰å…¨å¼€å‘,IOTç‰©è”ç½‘å®‰å…¨å¼€å‘,åº”ç”¨å¼€å‘,åˆ†äº«æŠ€æœ¯å­¦ä¹ çŸ¥è¯†ä¸å…¥å‘è§£å†³,æå‡ç½‘ç»œå®‰å…¨æŠ€æœ¯ä¸è‡ªèº«æŠ€æœ¯èƒ½åŠ›,ç«‹å¿—ç»´æŠ¤å¤§ä¼—ç½‘ç»œå®‰å…¨ä¸ºå·±ä»»,åšä¸€ä¸ªå¯¹å›½å®¶æœ‰ç”¨çš„äºº,ä¸ºå®ç°ä¸­åæ°‘æ—ä¼Ÿå¤§å¤å…´çš„ä¸­å›½æ¢¦ä¸æ‡ˆå¥‹æ–—">
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="/css/jquery/3.5.2-jquery.fancybox.min.css?v=1.6.6" />
    <link rel="stylesheet" href="/css/style.css?v=1.6.6">
    <!--  -->
     <script type="text/javascript" src="/js/custom/articlecost.js?v=1.6.6"></script> 
    <link rel="stylesheet" href="/css/third-party/gitalk.css?v=1.6.6"> 
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9134434519967436" crossorigin="anonymous"></script>    
    <script type="text/javascript">
        // Data Center
        var DC = {
          reward:	true,
          lv: JSON.parse('{"enable":false,"app_id":null,"app_key":null,"icon":true}'),
          v: JSON.parse('{"enable":false,"appid":null,"appkey":null,"notify":true,"verify":true,"placeholder":"give me some sugers plz...","avatar":"wavatar"}')
        };
    </script>
    <script type="text/javascript">window.lazyScripts=[];</script>
<meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="WeiyiGeek Blog" type="application/atom+xml">
</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="">
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap">
      
      <img src="/img/brand.jpg" class="brand-bg" alt="WeiyiGeek-backgroud">
      
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg" alt="WeiyiGeek-å¤´åƒ">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">WeiyiGeek</h5>
          <a href="mailto:master@weiyigeek.top" title="master@weiyigeek.top" class="mail">
            <span>m</span><span>a</span><span>s</span><span>t</span><span>e</span><span>r</span><span>@</span><span>w</span><span>e</span><span>i</span><span>y</span><span>i</span><span>g</span><span>e</span><span>e</span><span>k</span><span>.</span><span>t</span><span>o</span><span>p</span>
          </a>
        </hgroup>
        
        <ul class="menu-link">
          
              <li>
                <a href="https://weiyigeek.top/img/wechat-search.png" target="_blank">
                  <i class="icon icon-lg icon-wechat"></i>
                </a>
              </li>
            
              <li>
                <a href="https://github.com/weiyigeek" target="_blank">
                  <i class="icon icon-lg icon-github"></i>
                </a>
              </li>
            
              <li>
                <a href="https://t.me/WeiyiGeek" target="_blank">
                  <i class="icon icon-lg icon-telegram"></i>
                </a>
              </li>
            
              <li>
                <a href="https://twitter.com/WeiyiGeek" target="_blank">
                  <i class="icon icon-lg icon-twitter"></i>
                </a>
              </li>
            
              <li>
                <a href="https://weibo.com/615643678" target="_blank">
                  <i class="icon icon-lg icon-weibo"></i>
                </a>
              </li>
            
        </ul>
        
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                é¦–é¡µ
              </a>
            </li>
        
            <li class="">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                æ–‡ç« åˆ†ç±»
              </a>
            </li>
        
            <li class="">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                æ–‡ç« æ ‡ç­¾
              </a>
            </li>
        
            <li class="">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                æ–‡ç« å½’æ¡£
              </a>
            </li>
        
            <li class="">
              <a href="/2018/1-1-1.html"  >
                <i class="icon icon-lg icon-mortar-board"></i>
                å­¦ä¹ ä¹‹è·¯
              </a>
            </li>
        
            <li class="">
              <a href="/books"  >
                <i class="icon icon-lg icon-book"></i>
                å­¦ä¹ ä¹¦ç±
              </a>
            </li>
        
            <li class="">
              <a href="/about"  >
                <i class="icon icon-lg icon-user"></i>
                å…³äºä½œè€…
              </a>
            </li>
        
            <li class="">
              <a href="/sites"  >
                <i class="icon icon-lg icon-globe"></i>
                ç«™ç‚¹å¯¼èˆª
              </a>
            </li>
        
            <li class="">
              <a href="/img/share-wechat.jpg" target="_blank" >
                <i class="icon icon-lg icon-wechat"></i>
                å…¬ä¼—è´¦å·
              </a>
            </li>
        
            <li class="">
              <a href="https://space.bilibili.com/385802642" target="_blank" >
                <i class="icon icon-lg icon-youtube-play"></i>
                å“”å“©å“”å“©
              </a>
            </li>
        
            <li class="">
              <a href="/img/video-account.jpg" target="_blank" >
                <i class="icon icon-lg icon-video-camera"></i>
                è§†é¢‘å·
              </a>
            </li>
        
            <li class="">
              <a href="/links"  >
                <i class="icon icon-lg icon-link"></i>
                å‹æƒ…é“¾æ¥
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row clearfix">
        <a href="javascript:;" class="header-icon pull-left waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">
            <span>2.InfluxDB1.xæ•°æ®åº“å®è·µä½¿ç”¨</span>
            
        </div>

        
        <a href="javascript:;" id="site_search_btn" class="header-icon pull-right waves-effect waves-circle waves-light">
            <i class="icon icon-lg icon-search"></i>
        </a>
        

        
            <a href="/atom.xml" class="header-icon pull-right waves-effect waves-circle waves-light">
                <i class="icon icon-lg icon-rss"></i>
            </a>
        
    </div>
</header>
<header class="content-header post-header">
    <img src="/img/banner.jpg" class="header-bg" alt="æ–‡ç« å¤´éƒ¨èƒŒæ™¯">
    <div class="container fade-scale">
        <h1 class="title">2.InfluxDB1.xæ•°æ®åº“å®è·µä½¿ç”¨</h1>
        <h5 class="subtitle">
            
                <time datetime="2022-04-11T05:40:32.000Z" itemprop="datePublished" class="page-time">
  2022-04-11
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Database/">Database</a></li></ul>


            
        </h5>
        
    </div>
    

</header>

<div id="site_search">
    <div class="search-title clearfix">
        <span class="pull-left">
          <i class="icon icon-lg icon-search"></i>
        </span>
        <input type="text" id="local-search-input" name="q" results="0" placeholder="search my blog..." class="form-control pull-left"/>
        <a href="javascript:;" class="close pull-right waves-effect waves-circle waves-light">
          <i class="icon icon-lg icon-close"></i>
        </a>
    </div>
    <div id="local-search-result"></div>
</div>


<div class="container body-wrap" style="display: none;">
  <article id="post-æ•°æ®å­˜å‚¨/InfluxDB/2.InfluxDB1.xæ•°æ®åº“å®è·µä½¿ç”¨"
  class="post-article article-type-post" itemprop="blogPost">
    <div class="post-card">
        <h1 class="post-card-title">2.InfluxDB1.xæ•°æ®åº“å®è·µä½¿ç”¨</h1>
        <div class="post-meta">
            <time class="post-time" title="2022-04-11 13:40:32" datetime="2022-04-11T05:40:32.000Z"  itemprop="datePublished">2022-04-11</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Database/">Database</a></li></ul>



            

            


            
        </div>
        <span class="post-href" style="display: none;">|</span> 
        <div class="post-content" id="post-content" itemprop="postContent">
            
            <p>[TOC]</p>
<a id="more"></a>
<h2 id="0x00-influx-å‘½ä»¤-influxDB-å®¢æˆ·ç«¯"><a href="#0x00-influx-å‘½ä»¤-influxDB-å®¢æˆ·ç«¯" class="headerlink" title="0x00 influx å‘½ä»¤ - influxDB å®¢æˆ·ç«¯"></a>0x00 influx å‘½ä»¤ - influxDB å®¢æˆ·ç«¯</h2><h3 id="è¯­æ³•å‚æ•°"><a href="#è¯­æ³•å‚æ•°" class="headerlink" title="è¯­æ³•å‚æ•°"></a>è¯­æ³•å‚æ•°</h3><p><strong>è¯­æ³•ä¸å‚æ•°:</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># influx è¯­æ³•</span></span><br><span class="line">Usage of influx:</span><br><span class="line">  -version  <span class="comment"># Display the version and exit.</span></span><br><span class="line">  -path-prefix <span class="string">'url path'</span> <span class="comment"># Path that follows the host and port</span></span><br><span class="line">  -host <span class="string">'host name'</span>  <span class="comment"># Host to connect to.</span></span><br><span class="line">  -port <span class="string">'port #'</span>     <span class="comment"># Port to connect to.</span></span><br><span class="line">  -socket <span class="string">'unix domain socket'</span> <span class="comment"># Unix socket to connect to.</span></span><br><span class="line">  -database <span class="string">'database name'</span> <span class="comment"># Database to connect to the server.</span></span><br><span class="line">  -password <span class="string">'password'</span> <span class="comment"># Password to connect to the server.  Leaving blank will prompt for password (--password '').</span></span><br><span class="line">  -username <span class="string">'username'</span> <span class="comment"># Username to connect to the server.</span></span><br><span class="line">  -ssl                 <span class="comment"># Use https for requests.</span></span><br><span class="line">  -unsafeSsl           <span class="comment"># Set this when connecting to the cluster using https and not use SSL verification.</span></span><br><span class="line">  -execute <span class="string">'command'</span>   <span class="comment"># Execute command and quit.</span></span><br><span class="line">  -<span class="built_in">type</span> <span class="string">'influxql|flux'</span>              <span class="comment">#  Type specifies the query language for executing commands or when invoking the REPL.</span></span><br><span class="line">  -format <span class="string">'json|csv|column'</span>          <span class="comment">#  Format specifies the format of the server responses:  json, csv, or column.</span></span><br><span class="line">  -precision <span class="string">'rfc3339|h|m|s|ms|u|ns'</span> <span class="comment">#  Precision specifies the format of the timestamp:  rfc3339, h, m, s, ms, u or ns.</span></span><br><span class="line">  -consistency <span class="string">'any|one|quorum|all'</span>  <span class="comment">#  Set write consistency level: any, one, quorum, or all</span></span><br><span class="line">  -pretty <span class="comment"># urns on pretty print for the json format.</span></span><br><span class="line">  -import <span class="comment"># Import a previous database export from file</span></span><br><span class="line">  -pps    <span class="comment"># How many points per second the import will allow.  By default it is zero and will not throttle importing.</span></span><br><span class="line">  -path   <span class="comment">#  Path to file to import</span></span><br><span class="line">  -compressed <span class="comment"># Set to true if the import file is compressed</span></span><br><span class="line"></span><br><span class="line">Examples:</span><br><span class="line"><span class="comment"># äº¤äº’å¼ -&gt; Connect to a specific database on startup and set database context:</span></span><br><span class="line">$ influx -database <span class="string">'metrics'</span> -host <span class="string">'db.weiyigeek.top'</span> -port <span class="string">'8086'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å‘½ä»¤è¡Œ -&gt; Use influx in a non-interactive mode to query the database "metrics" and pretty print json:</span></span><br><span class="line">$ influx -database <span class="string">'metrics'</span> -execute <span class="string">'select * from cpu'</span> -format <span class="string">'json'</span> -pretty</span><br><span class="line"></span><br><span class="line"><span class="comment"># API -&gt; ä½¿ç”¨æ­¤åœ°å€æ£€æŸ¥InfluxDBå®ä¾‹çš„çŠ¶æ€ä»¥åŠInfluxDBçš„ç‰ˆæœ¬</span></span><br><span class="line">$ curl -G http://db.weiyigeek.top:8086/ping</span><br></pre></td></tr></table></figure></p>
<p><br/></p>
<h3 id="ç®€å•ç¤ºä¾‹"><a href="#ç®€å•ç¤ºä¾‹" class="headerlink" title="ç®€å•ç¤ºä¾‹"></a>ç®€å•ç¤ºä¾‹</h3><p><strong>å®è·µ1.å…¶å¯ä»¥åˆ©ç”¨ç±»ä¼¼äºå…³ç³»å‹æ•°æ®åº“SQLè¯­å¥è¯­æ³•ï¼Œä¾‹å¦‚ï¼š</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1) æ•°æ®åº“çš„æ“ä½œ</span></span><br><span class="line">SHOW DATABASES <span class="comment"># æŸ¥çœ‹æ•°æ®åº“</span></span><br><span class="line">CREATE DATABASE <span class="string">"weiyigeek"</span> <span class="comment"># åˆ›å»ºæ•°æ®åº“</span></span><br><span class="line">USE weiyigeek  <span class="comment"># é€‰æ‹©æ•°æ®åº“</span></span><br><span class="line">DROP DATABASES <span class="string">"weiyigeek"</span>  <span class="comment"># åˆ é™¤æ•°æ®åº“</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2) æ•°æ®åº“æƒé™è®¾ç½®</span></span><br><span class="line">GRANT all privileges on weiyigeek to admin <span class="comment"># ç»™adminç”¨æˆ·æˆæƒä¸€ä¸ªæ•°æ®åº“çš„æ‰€æœ‰æ“ä½œæƒé™</span></span><br><span class="line">GRANT write on weiyigeek to admin  <span class="comment"># ç»™æŸä¸ªç”¨æˆ·æˆæƒä¸€ä¸ªæ•°æ®åº“çš„å†™æ“ä½œ</span></span><br><span class="line">GRANT <span class="built_in">read</span> on weiyigeek to admin   <span class="comment"># ç»™æŸä¸ªç”¨æˆ·æˆæƒä¸€ä¸ªæ•°æ®åº“çš„è¯»æ“</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3) è¡¨çš„æ•°æ®æ“ä½œ</span></span><br><span class="line">SHOW MEASUREMENTS  <span class="comment"># æ˜¾ç¤ºé‡‡é›†çš„æ•°æ®è¡¨</span></span><br><span class="line">INSERT iot_sensor,host=host_name,region=cn value=66 1658823229  <span class="comment"># æ’å…¥æ•°æ®åˆ° iot_sensor measurementï¼Œæ ‡ç­¾host=host_nameï¼Œregion=cn, fieldæ˜¯value=66ï¼Œ 1658823229 æ˜¯æŒ‡å®šçš„æ—¶é—´æˆ³</span></span><br><span class="line">SELECT <span class="string">"host"</span>, <span class="string">"region"</span>, <span class="string">"value"</span> FROM <span class="string">"iot_sensor"</span>   <span class="comment"># ä» iot_sensor measurement ä¸­æŸ¥è¯¢æŒ‡å®šå­—æ®µï¼ˆlabelã€fieldï¼‰çš„æ•°æ® </span></span><br><span class="line">DROP MEASUREMENTS iot_sensor  <span class="comment"># åˆ é™¤æŒ‡å®šè¡¨</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 4) æ•°æ®æŸ¥è¯¢</span></span><br><span class="line">select * from <span class="built_in">test</span> iot_sensor host=<span class="string">'192.168.12.12'</span> and value=<span class="string">'4321'</span> and time &gt; <span class="string">'2022-01-11T02:52:55Z'</span>   <span class="comment"># å¤šæ¡ä»¶æŸ¥è¯¢</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é€šè¿‡limitå’Œoffseté…åˆå¯ä»¥å®ç°åˆ†é¡µï¼Œoffsetåé¢çš„å€¼ä¸ºå¼€å§‹çš„ä½ç½®</span></span><br><span class="line">select * from <span class="built_in">test</span> <span class="built_in">limit</span> 5 OFFSET 0 </span><br><span class="line">select * from <span class="built_in">test</span> <span class="built_in">limit</span> 5 OFFSET 5</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.å®ç°æŸ¥è¯¢ä»¥ç»™å®šå­—æ®µå¼€å§‹çš„æ•°æ®</span></span><br><span class="line">select fieldName from measurementName <span class="built_in">where</span> fieldName=~/^ç»™å®šå­—æ®µ/</span><br><span class="line"><span class="comment"># 2.å®ç°æŸ¥è¯¢ä»¥ç»™å®šå­—æ®µç»“æŸçš„æ•°æ®</span></span><br><span class="line">select fieldName from measurementName <span class="built_in">where</span> fieldName=~/ç»™å®šå­—æ®µ$/</span><br><span class="line"><span class="comment"># 3.å®ç°æŸ¥è¯¢åŒ…å«ç»™å®šå­—æ®µæ•°æ®</span></span><br><span class="line">select fieldName from measurementName <span class="built_in">where</span> fieldName=~/ç»™å®šå­—æ®µ/</span><br></pre></td></tr></table></figure></p>
<p>æ¸©é¦¨æç¤º: åœ¨influxdbä¸­å¯ä»¥æŠŠ <code>measurement</code> çœ‹ä¸ºå…³ç³»æ•°æ®åº“ä¸­çš„tableï¼Œtagå’Œfieldæ˜¯å…¶ä¸­çš„åˆ—ã€‚å…¶ä¸­Tagéƒ½åŠ äº†ç´¢å¼•ã€fieldä¸åŠ , å’Œå…³ç³»æ•°æ®åº“ä¸åŒçš„æ˜¯ï¼Œä¸ç”¨é¢„å…ˆå®šä¹‰schemaï¼Œæ²¡æœ‰valueçš„ç‚¹ä¸ä¼šè¢«ä¿å­˜ã€‚</p>
<p><br/></p>
<p><strong>å®è·µ2.åˆ©ç”¨Influx APIæ¥å£è¯·æ±‚</strong><br>æè¿°ï¼šæ¥å£ä¸­æœ€é‡è¦çš„ <code>/query</code> åœ°å€æ¥å— GET å’Œ POST HTTPè¯·æ±‚ã€‚ä½¿ç”¨æ­¤åœ°å€å¯ä»¥æŸ¥è¯¢æ•°æ®å¹¶ç®¡ç†æ•°æ®åº“ï¼Œä¿ç•™ç­–ç•¥å’Œç”¨æˆ·<br>ç±»å‹æ–¹æ³•ï¼š</p>
<ul>
<li>GETï¼šSELECTã€SHOW</li>
<li>POSTï¼šALTERã€CREATEã€DELETEã€DROPã€GRANTã€KILLã€REVOKE</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¯¥/debug/requestsè¿”å›å†™å…¥å’ŒæŸ¥è¯¢çš„æ•°é‡æ¯ç”¨æˆ·åå’ŒIPåœ°å€InfluxDBåœ¨æŒ‡å®šæ—¶é—´èŒƒå›´å†…</span></span><br><span class="line">$ curl http://db.weiyigeek.top:8086/debug/requests?seconds=60</span><br><span class="line"></span><br><span class="line"><span class="comment"># é€šè¿‡ /debug/vars åœ°å€å…¬å¼€æœ‰å…³å…¶è¿è¡Œæ—¶çš„ç»Ÿè®¡ä¿¡æ¯å’Œä¿¡æ¯</span></span><br><span class="line">$ curl http://db.weiyigeek.top:8086/debug/vars</span><br><span class="line"></span><br><span class="line"><span class="comment"># é€šè¿‡ /query åœ°å€æŸ¥çœ‹æ•°æ®åº“åŠå…¶æ•°æ®è¡¨(æ³¨æ„æŸ¥è¯¢äº‹ä¸€å®šè¦å¸¦dbå‚æ•°)</span></span><br><span class="line">$ curl <span class="string">'http://10.106.17.52:8086/query?db=jmeter'</span> --data-urlencode <span class="string">'q=SHOW DATABASES'</span></span><br><span class="line">  <span class="comment"># &#123;"results":[&#123;"statement_id":0,"series":[&#123;"name":"databases","columns":["name"],"values":[["_internal"],["jmeter"]]&#125;]&#125;]&#125;</span></span><br><span class="line"></span><br><span class="line">$ curl <span class="string">'http://10.106.17.52:8086/query?db=jmeter'</span> --data-urlencode <span class="string">'q=SHOW MEASUREMENTS'</span></span><br><span class="line">  <span class="comment"># &#123;"results":[&#123;"statement_id":0,"series":[&#123;"name":"measurements","columns":["name"],"values":[["events"],["jmeter"]]&#125;]&#125;]&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æµè§ˆå™¨è¯·æ±‚</span></span><br><span class="line"><span class="comment"># è¿”å›jsonæ ¼å¼æ•°æ®</span></span><br><span class="line">http://db.weiyigeek.top:8086/query?db=mydb&amp;pretty=<span class="literal">true</span>&amp;q=SELECT * FROM meas01</span><br><span class="line"><span class="comment"># ä»¥jsonæ ¼å¼è¿”å›å…·æœ‰æŒ‡å®šç²¾åº¦çš„çºªå…ƒæ—¶é—´æˆ³</span></span><br><span class="line">http://db.weiyigeek.top:8086/query?db=mydb&amp;epoch=s&amp;pretty=<span class="literal">true</span>&amp;q=SELECT * FROM meas01</span><br><span class="line"></span><br><span class="line"><span class="comment"># curl å‘½ä»¤è¯·æ±‚</span></span><br><span class="line"><span class="comment"># è¿”å›å…·æœ‰æŒ‡å®šç²¾åº¦çš„çºªå…ƒæ—¶é—´æˆ³ </span></span><br><span class="line">$ curl -G <span class="string">'http://db.weiyigeek.top:8086/query?db=mydb&amp;epoch=s'</span> --data-urlencode <span class="string">'q=SELECT * FROM "meas01"'</span></span><br><span class="line"><span class="comment"># æ·»åŠ ç”¨æˆ·ã€å¯†ç å‚æ•°</span></span><br><span class="line">$ curl -G <span class="string">'http://db.weiyigeek.top:8086/query?db=mydb&amp;u=admin&amp;p=123456'</span> --data-urlencode <span class="string">'q=SELECT * FROM "meas01"'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ’å…¥å•æ¡æ•°æ®</span></span><br><span class="line">$ curl -i -XPOST <span class="string">'http://db.weiyigeek.top:8086/write?db=mydb'</span> --data-binary <span class="string">'cpu_load_short,host=server01,region=us-west value=0.64 1434055562000000000'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ’å…¥å¤šæ¡æ•°æ®</span></span><br><span class="line">$ curl -i -XPOST <span class="string">'http://db.weiyigeek.top:8086/write?db=mydb'</span> --data-binary <span class="string">'cpu_load_short,host=server02 value=0.67</span></span><br><span class="line"><span class="string">cpu_load_short,host=server02,region=us-west value=0.55 1422568543702900257</span></span><br><span class="line"><span class="string">cpu_load_short,direction=in,host=server01,region=us-west value=2.0 1422568543702900257'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é€šè¿‡æ–‡ä»¶æ’å…¥å¤šæ¡æ•°æ®</span></span><br><span class="line">$ curl -i -XPOST <span class="string">"http://db.weiyigeek.top:8086/write?db=mydb"</span> --data-binary @data.txt</span><br></pre></td></tr></table></figure>
<p><br></p>
<p><strong>å®è·µ3.influx äº¤äº’å¼</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.æ§åˆ¶å°æŒ‡å®šè¾“å‡ºæ ¼å¼ï¼Œæ”¯æŒ column, csv, json ä¸‰ç§æ ¼å¼é»˜è®¤ä¸ºcolumnã€‚</span></span><br><span class="line">influx -format=csv</span><br><span class="line">influx -format=json</span><br><span class="line">influx -format=json -pretty</span><br></pre></td></tr></table></figure></p>
<hr>
<h2 id="0x01-influxDB1-x-å®è·µ"><a href="#0x01-influxDB1-x-å®è·µ" class="headerlink" title="0x01 influxDB1.x å®è·µ"></a>0x01 influxDB1.x å®è·µ</h2><h3 id="æ—¶é—´æ—¶åŒºè®¾ç½®æ˜¾ç¤º"><a href="#æ—¶é—´æ—¶åŒºè®¾ç½®æ˜¾ç¤º" class="headerlink" title="æ—¶é—´æ—¶åŒºè®¾ç½®æ˜¾ç¤º"></a>æ—¶é—´æ—¶åŒºè®¾ç½®æ˜¾ç¤º</h3><p>æè¿°: InfluxDB ä½œä¸ºæ—¶é—´åºåˆ—æ•°æ®åº“ï¼Œåœ¨å¤„ç†æ—¶é—´æ•°æ®æ—¶ï¼Œæœ‰ç‰¹æ®Šçš„æœºåˆ¶å’Œè§„èŒƒï¼Œåœ¨ä½¿ç”¨æ—¶éœ€è¦æ³¨æ„ï¼Œæœ¬å°èŠ‚ä¸»è¦ä»‹ç» InfluxDB ä¸­ä¸æ—¶é—´ç›¸å…³çš„å‡ ä¸ªæ¦‚å¿µ <code>precisionï¼Œdurationï¼Œepoch_time</code>ã€‚</p>
<p>åœ¨äº’è”ç½‘ä¸­å¸¸è§æ˜¯UTCæ—¶é—´(å³ä¸–ç•Œæ ‡å‡†æ—¶é—´), å®ƒä»¥ <code>1970-01-01T00:00:00</code> ä¸ºèµ·ç‚¹çš„æ¯«ç§’æ•°ï¼Œä¸è€ƒè™‘é—°ç§’ã€‚</p>
<p>åœ¨ InfluxDB ä¸­æ˜¾ç¤ºæ—¶é—´é€šå¸¸ä»¥æ—¶é—´æˆ³å½¢å¼è¿›è¡Œå­˜å‚¨ï¼Œå…¶ä¸åˆ†æ—¶åŒºï¼Œåœ¨ä»»æ„æ—¶é—´ç‚¹ï¼Œä¸åŒæ—¶åŒºçš„ UTC æ—¶é—´æˆ³æ˜¯ç›¸åŒçš„, ä½†æ—¶é—´æˆ³åœ¨è½¬æ¢ä¸ºæ—¥æœŸæ—¶ï¼Œä¼šæ ¹æ®æœ¬åœ°æ—¶åŒºï¼Œè½¬æ¢ä¸ºä¸åŒçš„æ—¥æœŸå€¼, ä¾‹å¦‚æ—¶é—´æˆ³çš„èµ·å§‹æ—¶åˆ»å¦‚ä¸‹æ‰€ç¤º, å¹¶ä¸”åœ¨1970å¹´ä¹‹å‰çš„æ—¥æœŸå¯¹åº”çš„æ—¶é—´æˆ³ä¸ºè´Ÿæ•°ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># UTC+0</span></span><br><span class="line">Thu Jan 01 1970 00:00:00 GMT+0000 (æ ‡å‡†æ—¶é—´)</span><br><span class="line"><span class="comment"># UTC+8</span></span><br><span class="line">Thu Jan 01 1970 08:00:00 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)</span><br></pre></td></tr></table></figure></p>
<p><br/></p>
<p><strong>precision - æ—¶é—´æˆ³è½¬æ¢æ˜¾ç¤º</strong><br>æè¿°: åœ¨å†™å…¥å’Œè¯»å– influxdb ä¸­çš„æ•°æ®æ—¶ï¼Œæ—¶é—´æˆ³é»˜è®¤å•ä½æ˜¯çº³ç§’ï¼Œå¯ä»¥é€šè¿‡ precision å‚æ•°æ¥æŒ‡å®šä¸ºå…¶ä»–æ ¼å¼ï¼Œæ¯”å¦‚ <code>rfc3339 (YYYY-MM-DDTHH:MM:SS.nnnnnnnnnZ), h (å°æ—¶), m (åˆ†é’Ÿ), s (ç§’), ms (æ¯«ç§’), u (å¾®å¦™), ns (çº³ç§’)</code></p>
<p>å®è·µ1.ä½¿ç”¨ curl æ¥è¯·æ±‚å†™å…¥æ—¶ï¼Œé€šè¿‡ precision æŒ‡å®šæ—¶é—´æˆ³å•ä½<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ—¶é—´æˆ³æ•°æ® 1463683075 ä¼šæŒ‰ç…§ç§’æ¥è§£æ, å¦‚æœä¸æŒ‡å®š precision é»˜è®¤ä¼šæŒ‰ç…§çº³ç§’æ¥è§£æå…¶å°†ä¼šè½¬æ¢ä¸º 1463683075000000000</span></span><br><span class="line">curl -i -XPOST <span class="string">"http://db.weiyigeek.top:8086/write?db=weiyigeek&amp;precision=s"</span> --data-binary <span class="string">'mymeas,mytag=1 myfield=90 1463683075'</span></span><br></pre></td></tr></table></figure></p>
<p><br/></p>
<p>å®è·µ2.ä½¿ç”¨ <code>influx å®¢æˆ·ç«¯</code> è¿›è¡Œäº¤äº’å¼æ—¶é—´ä¸æ—¶åŒºæ ¼å¼è°ƒæ•´ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å‘½ä»¤è¡Œæ¨¡å¼ä¸­æŒ‡å®š precision é»˜è®¤æ˜¯çº³ç§’</span></span><br><span class="line">$ influx -precision ns</span><br><span class="line"><span class="comment"># é»˜è®¤æ—¶é—´çš„æ˜¾ç¤ºæ˜¯unixæ—¶é—´æˆ³ï¼ˆçº³ç§’ï¼‰</span></span><br><span class="line">&gt; select * from events <span class="built_in">limit</span> 2;</span><br><span class="line">name: events</span><br><span class="line">time                application     tags text                 title</span><br><span class="line">----                -----------     ---- ----                 -----</span><br><span class="line">1658221734002000000 weiyigeek-index      jmeter-index started ApacheJMeter</span><br><span class="line">1658221735666000000 weiyigeek-index      jmeter-index ended   ApacheJMeter</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®rfc3339æ—¶é—´æ ¼å¼è¿›è¡Œæ—¶é—´æ˜¾ç¤ºï¼ˆæ­¤å¤„æ—¶åŒºä¸ºUTCæ—¶åŒºï¼‰</span></span><br><span class="line">&gt; precision rfc3339</span><br><span class="line">&gt; select * from events <span class="built_in">limit</span> 2;</span><br><span class="line">name: events</span><br><span class="line">time                     application     tags text                 title</span><br><span class="line">----                     -----------     ---- ----                 -----</span><br><span class="line">2022-07-19T09:08:54.002Z weiyigeek-index      jmeter-index started ApacheJMeter</span><br><span class="line">2022-07-19T09:08:55.666Z weiyigeek-index      jmeter-index ended   ApacheJMeter</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ tz('Asia/Shanghai') ä»¥ UTC+8 æ—¶åŒºæ˜¾ç¤º</span></span><br><span class="line">&gt; select * from events <span class="built_in">where</span> time &gt;= <span class="string">'2022-07-18T09:08:54.002Z'</span> tz(<span class="string">'Asia/Shanghai'</span>)</span><br><span class="line">name: events</span><br><span class="line">time                          application     tags      text                 title</span><br><span class="line">----                          -----------     ----      ----                 -----</span><br><span class="line">2022-07-19T17:08:54.002+08:00 weiyigeek-index           jmeter-index started ApacheJMeter</span><br><span class="line">2022-07-19T17:08:55.666+08:00 weiyigeek-index           jmeter-index ended   ApacheJMeter</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¡¥å……çŸ¥è¯†:æŒ‡å®šæ—¶åŒºæ˜¾ç¤ºä½¿ç”¨ API æ¥å£è¯·æ±‚</span></span><br><span class="line">curl <span class="string">'http://10.106.17.52:8086/query?db=jmeter'</span> --data-urlencode <span class="string">"q=select * from events where time &gt;= '2022-07-18T09:08:54.002Z' tz('Asia/Shanghai')"</span></span><br></pre></td></tr></table></figure>
<p><br/></p>
<p>å®è·µ3.ä½¿ç”¨ <code>influx å®¢æˆ·ç«¯</code> å‘½ä»¤å¼<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ influx -execute <span class="string">'SELECT * FROM "weiyigeek" LIMIT 3'</span> -database=<span class="string">"NOAA_water_database"</span> -precision=rfc3339</span><br><span class="line">name: weiyigeek</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<p><strong>epoch_time</strong></p>
<p>æè¿°: åœ¨ InfluxDB Select è¯­å¥ä¸­ï¼Œ epoch å€¼å°±æ˜¯æ—¶é—´æˆ³ï¼Œåªä¸è¿‡ epoch æœ‰æ›´ä¸°å¯Œçš„è¯­ä¹‰ï¼Œä½¿ç”¨èµ·æ¥æ›´æ–¹ä¾¿çµæ´», <code>epoch 0 ï¼ˆ1970-01-01T00:00:00Zï¼‰</code>å¸¸è¢«ç”¨æ¥è¡¨ç¤ºæ— æ„ä¹‰çš„æ—¶é—´æˆ³ï¼Œä¹Ÿå°±æ˜¯ nullã€‚</p>
<p>è€Œ epoch time å°±æ˜¯ UTC æ—¶é—´æˆ³ï¼Œé»˜è®¤å•ä½ä¸ºçº³ç§’ï¼Œå¯ä»¥é€šè¿‡ epoch_time å€¼åé¢è·Ÿ duration unit æ¥æŒ‡å®š precision, å¹¶ä¸” epoch_time æ”¯æŒåŸºæœ¬çš„ç®—æœ¯è¿ç®—ï¼Œæ¯”å¦‚ <code>+</code> æˆ– <code>-</code>ã€‚</p>
<p>æ¸©é¦¨æç¤º: influxQL è¦æ±‚è¿ç®—ç¬¦ä¸ epoch_time ä¹‹é—´è¦æœ‰ç©ºæ ¼ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.now() : æœ¬åœ°æœåŠ¡å™¨å¯¹åº”çš„çº³ç§’æ—¶é—´æˆ³, å¹¶å¯ä»¥ä½¿ç”¨å…¶æ¥æŒ‡å®šç›¸å¯¹æ—¶é—´ã€‚</span></span><br><span class="line">&gt; select * from events <span class="built_in">where</span> time &lt;= now();</span><br><span class="line">name: events</span><br><span class="line">time                application     tags      text                 title</span><br><span class="line">----                -----------     ----      ----                 -----</span><br><span class="line">1658221734002000000 weiyigeek-index           jmeter-index started ApacheJMeter</span><br><span class="line">1658221735666000000 weiyigeek-index           jmeter-index ended   ApacheJMeter</span><br><span class="line"></span><br><span class="line">&gt; SELECT <span class="string">"water_level"</span> FROM <span class="string">"h2o_feet"</span> WHERE time &gt; now() - 1h</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.æ¯”å¦‚ï¼Œå½“è¯·æ±‚çš„ç»“æœä¸­ä¸åŒ…å«æ—¶é—´æˆ³æ—¶ï¼Œtime å€¼å°±ä¼šç½®ä¸º 0:</span></span><br><span class="line">&gt; SELECT MEAN(<span class="string">"index"</span>) FROM <span class="string">"weiyigeek"</span> GROUP BY location,randtag</span><br><span class="line">name: weiyigeek</span><br><span class="line">tags: location=coyote_creek, randtag=1</span><br><span class="line">time                  mean</span><br><span class="line">----                  ----</span><br><span class="line">1970-01-01T00:00:00Z  50.69033760186263</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.ä½¿ç”¨ poch_time è¿›è¡Œç®€å•çš„è¿ç®—</span></span><br><span class="line">&gt; SELECT <span class="string">"water_level"</span> FROM <span class="string">"h2o_feet"</span> WHERE time &gt; 24043524m - 6m</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.é€šè¿‡æ·»åŠ  duration unit æ¥æŒ‡å®š precision ä¸ºç§’</span></span><br><span class="line">&gt; SELECT <span class="string">"water_level"</span> FROM <span class="string">"h2o_feet"</span> WHERE <span class="string">"location"</span> = <span class="string">'santa_monica'</span> AND time &gt;= 1439856000s AND time &lt;= 1439856720s</span><br></pre></td></tr></table></figure>
<p><br></p>
<p><strong>duration</strong><br>æè¿°: duration ç”¨äºæŒ‡å®šä¸€æ®µæ—¶é—´é•¿åº¦ <code>duration = integer + duration unit</code>, å…¶ä¸­ <code>duration units</code> å¯ç”¨å•ä½ <code>&quot;ns&quot; | &quot;u&quot; | &quot;Âµ&quot; | &quot;ms&quot; | &quot;s&quot; | &quot;m&quot; | &quot;h&quot; | &quot;d&quot; | &quot;w&quot;</code>.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.åœ¨ InfluxDB ä¸­ï¼Œé…ç½®æ•°æ®åº“çš„ Retention Policy ä¸­ä¼šç”¨åˆ° durationï¼Œæ¯”å¦‚ï¼š</span></span><br><span class="line"><span class="comment"># åˆ›å»ºä¿ç•™ç­–ç•¥ã€‚</span></span><br><span class="line">CREATE RETENTION POLICY <span class="string">"10m.events"</span> ON <span class="string">"weiyigeek"</span> DURATION 60m REPLICATION 2</span><br><span class="line"><span class="comment"># åˆ›å»ºä¿ç•™ç­–ç•¥å¹¶å°†å…¶è®¾ç½®ä¸ºé»˜è®¤å€¼ã€‚</span></span><br><span class="line">CREATE RETENTION POLICY <span class="string">"10m.events"</span> ON <span class="string">"weiyigeek"</span> DURATION 60m REPLICATION 2 DEFAULT</span><br><span class="line"><span class="comment"># åˆ›å»ºä¿ç•™ç­–ç•¥å¹¶æŒ‡å®šåˆ†ç‰‡ç»„æŒç»­æ—¶é—´ã€‚</span></span><br><span class="line">CREATE RETENTION POLICY <span class="string">"10m.events"</span> ON <span class="string">"weiyigeek"</span> DURATION 60m REPLICATION 2 SHARD DURATION 30m</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.åœ¨ select è¯­å¥ä¸­ä¹Ÿä¼šç”¨åˆ° duration</span></span><br><span class="line">SELECT mean(<span class="string">"value"</span>) FROM <span class="string">"cpu"</span> GROUP BY region, time(1d) fill(0) tz(<span class="string">'America/Chicago'</span>)</span><br><span class="line">SELECT MEAN(value) FROM cpu GROUP BY time(10m)</span><br><span class="line">SELECT <span class="string">"water_level"</span> FROM <span class="string">"h2o_feet"</span> WHERE <span class="string">"location"</span> = <span class="string">'santa_monica'</span> WHERE time &gt; 24043524m - 6m</span><br></pre></td></tr></table></figure>
<p><br/></p>
<h3 id="æ•°æ®å¯¼å‡ºå¯¼å…¥"><a href="#æ•°æ®å¯¼å‡ºå¯¼å…¥" class="headerlink" title="æ•°æ®å¯¼å‡ºå¯¼å…¥"></a>æ•°æ®å¯¼å‡ºå¯¼å…¥</h3><p><strong>å®è·µ1.å°†influxDBä¸­çš„æ•°æ®è¿›è¡Œ(å¯¼å‡ºã€å¯¼å…¥)æ“ä½œ</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯¼å‡ºè¡¨ä¸­æ•°æ®ä¸ºcsvæ ¼å¼</span></span><br><span class="line">influx -host db.weiyigeek.top -port 8086 -database iot_bridge -format csv -execute <span class="string">'select * from "iot_table"'</span> -precision=rfc3339 &gt;&gt; iot_table.csv  </span><br><span class="line"><span class="comment"># å¯¼å‡ºè¡¨æ•°æ®ä¸­å¤§äºæŸä¸€æ—¶é—´ç‚¹çš„æ•°æ®ä¸ºcsvæ ¼å¼</span></span><br><span class="line">influx -host db.weiyigeek.top -port 8086 -database iot_bridge -format csv -execute <span class="string">'select * from "iot_table" where time &gt;= "2021-04-28T00:00:00Z"'</span> -precision=rfc3339 &gt;&gt; iot_table_time.csv </span><br><span class="line"><span class="comment"># å¯¼å‡ºæŒ‡å®šèŒƒå›´å†…çš„æ•°æ®åˆ°è®¡ç®—æœºæŒ‡å®šç›®å½•ä¸­</span></span><br><span class="line">influx_inspect <span class="built_in">export</span> -datadir <span class="string">"C:/Users/weiyigeek/.influxdb/data"</span> -waldir <span class="string">"C:/Users/weiyigeek/.influxdb/wal"</span> -out <span class="string">"backup"</span> -database iot_bridge -start 2022-01-15T08:00:01Z -end 2022-01-15T08:00:01Z -retention autogen</span><br><span class="line"><span class="comment"># ä»¥ns(çº³ç§’)çš„æ—¶é—´æ ¼å¼å¯¼å…¥pathå‚æ•°æŒ‡å®šæ–‡ä»¶è·¯å¾„ä¸­æ•°æ®åˆ°influxDBä¸­</span></span><br><span class="line">influx -import -path=db2019 -precision=ns</span><br></pre></td></tr></table></figure>
<p><br/></p>
<h3 id="æ•°æ®ä¿å­˜ç­–ç•¥"><a href="#æ•°æ®ä¿å­˜ç­–ç•¥" class="headerlink" title="æ•°æ®ä¿å­˜ç­–ç•¥"></a>æ•°æ®ä¿å­˜ç­–ç•¥</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹å½“å‰ä¿å­˜ç­–ç•¥</span></span><br><span class="line">show retention policies on <span class="string">"db_name"</span></span><br><span class="line"><span class="comment"># åˆ›å»ºæ–°çš„ä¿å­˜ç­–ç•¥</span></span><br><span class="line"><span class="comment"># - rp_nameï¼šç­–ç•¥åï¼›</span></span><br><span class="line"><span class="comment"># - db_nameï¼šå…·ä½“çš„æ•°æ®åº“åï¼›</span></span><br><span class="line"><span class="comment"># - 3wï¼šä¿å­˜3å‘¨ï¼Œ3å‘¨ä¹‹å‰çš„æ•°æ®å°†è¢«åˆ é™¤ï¼Œinfluxdbå…·æœ‰å„ç§äº‹ä»¶å‚æ•°ï¼Œæ¯”å¦‚ï¼šhï¼ˆå°æ—¶ï¼‰ï¼Œdï¼ˆå¤©ï¼‰ï¼Œwï¼ˆæ˜ŸæœŸï¼‰ï¼›</span></span><br><span class="line"><span class="comment"># - replication 1ï¼šå‰¯æœ¬ä¸ªæ•°ï¼Œä¸€èˆ¬ä¸º1å°±å¯ä»¥äº†ï¼›</span></span><br><span class="line"><span class="comment"># - defaultï¼šè®¾ç½®ä¸ºé»˜è®¤ç­–ç•¥</span></span><br><span class="line">create retention policy <span class="string">"rp_name"</span> on <span class="string">"db_name"</span> duration 3w replication 1 default</span><br><span class="line"><span class="comment"># ä¿®æ”¹ä¿å­˜ç­–ç•¥</span></span><br><span class="line">alter retention policy <span class="string">"rp_name"</span> on <span class="string">"db_name"</span> duration 30d default</span><br><span class="line"><span class="comment"># åˆ é™¤ä¿å­˜ç­–ç•¥</span></span><br><span class="line">drop retention policy <span class="string">"rp_name"</span> on <span class="string">"db_name"</span></span><br></pre></td></tr></table></figure>
<hr>
<h2 id="0x02-Influxdb-1-x-é…ç½®æµ…æ"><a href="#0x02-Influxdb-1-x-é…ç½®æµ…æ" class="headerlink" title="0x02 Influxdb 1.x é…ç½®æµ…æ"></a>0x02 Influxdb 1.x é…ç½®æµ…æ</h2><p>é»˜è®¤çš„é…ç½®æ–‡ä»¶è·¯å¾„ä¸ºï¼š<code>/etc/influxdb/influxdb.conf</code><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># reporting-disabled = false	                             # è¯¥é€‰é¡¹ç”¨äºä¸ŠæŠ¥influxdbçš„ä½¿ç”¨ä¿¡æ¯ç»™InfluxDataå…¬å¸ï¼Œé»˜è®¤å€¼ä¸ºfalse</span></span><br><span class="line"><span class="built_in">bind</span>-address = <span class="string">"127.0.0.1:8088"</span>	                           <span class="comment"># å¤‡ä»½æ¢å¤æ—¶ä½¿ç”¨ï¼Œé»˜è®¤å€¼ä¸º8088</span></span><br><span class="line"><span class="comment">### [meta]</span></span><br><span class="line">[meta]</span><br><span class="line">  dir = <span class="string">"/data/influxdb/meta"</span>                              <span class="comment"># metaæ•°æ®å­˜æ”¾ç›®å½•</span></span><br><span class="line">  <span class="comment"># retention-autocreate = true                            # ç”¨äºæ§åˆ¶é»˜è®¤å­˜å‚¨ç­–ç•¥ï¼Œæ•°æ®åº“åˆ›å»ºæ—¶ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆautogençš„å­˜å‚¨ç­–ç•¥ï¼Œé»˜è®¤å€¼ï¼štrue</span></span><br><span class="line">  <span class="comment"># logging-enabled = true                                 # æ˜¯å¦å¼€å¯metaæ—¥å¿—ï¼Œé»˜è®¤å€¼ï¼štrue</span></span><br><span class="line"><span class="comment">### [data]</span></span><br><span class="line">[data]</span><br><span class="line">  dir = <span class="string">"/data/influxdb/data"</span>                              <span class="comment"># æœ€ç»ˆæ•°æ®ï¼ˆTSMæ–‡ä»¶ï¼‰å­˜å‚¨ç›®å½•</span></span><br><span class="line">  wal-dir = <span class="string">"/data/influxdb/wal"</span>                           <span class="comment"># é¢„å†™æ—¥å¿—å­˜å‚¨ç›®å½•</span></span><br><span class="line">  <span class="comment"># wal-fsync-delay = "0s"                                 # åœ¨åŒæ­¥å†™å…¥ä¹‹å‰ç­‰å¾…çš„æ€»æ—¶é—´ï¼Œé»˜è®¤0s</span></span><br><span class="line">  <span class="comment"># index-version = "inmem"                                # ç”¨äºæ–°ç¢ç‰‡çš„åˆ‡åˆ†ç´¢å¼•çš„ç±»å‹ã€‚</span></span><br><span class="line">  <span class="comment"># trace-logging-enabled = false                          # è·Ÿè¸ªæ—¥å¿—è®°å½•åœ¨tsmå¼•æ“å‘¨å›´æä¾›äº†æ›´è¯¦ç»†çš„è¾“å‡º</span></span><br><span class="line">  <span class="comment"># query-log-enabled = true                               # æ˜¯å¦å¼€å¯tsmå¼•æ“æŸ¥è¯¢æ—¥å¿—ï¼Œé»˜è®¤å€¼ï¼š true</span></span><br><span class="line">  <span class="comment"># Valid size suffixes are k, m, or g (case insensitive, 1024 = 1k).</span></span><br><span class="line">  <span class="comment"># cache-max-memory-size = "1g"                           # ç”¨äºé™å®šshardæœ€å¤§å€¼ï¼Œå¤§äºè¯¥å€¼æ—¶ä¼šæ‹’ç»å†™å…¥ï¼Œé»˜è®¤å€¼ï¼š1000MBï¼Œå•ä½ï¼šbyte</span></span><br><span class="line">  <span class="comment"># Valid size suffixes are k, m, or g (case insensitive, 1024 = 1k).</span></span><br><span class="line">  <span class="comment"># cache-snapshot-memory-size = "25m"                     # ç”¨äºè®¾ç½®å¿«ç…§å¤§å°ï¼Œå¤§äºè¯¥å€¼æ—¶æ•°æ®ä¼šåˆ·æ–°åˆ°tsmæ–‡ä»¶ï¼Œé»˜è®¤å€¼ï¼š25MBï¼Œå•ä½ï¼šbyte</span></span><br><span class="line">  <span class="comment"># cache-snapshot-write-cold-duration = "10m"             # tsmå¼•æ“ snapshotå†™ç›˜å»¶è¿Ÿï¼Œé»˜è®¤å€¼ï¼š10Minute</span></span><br><span class="line">  <span class="comment"># compact-full-write-cold-duration = "4h"                # tsmæ–‡ä»¶åœ¨å‹ç¼©å‰å¯ä»¥å­˜å‚¨çš„æœ€å¤§æ—¶é—´ï¼Œé»˜è®¤å€¼ï¼š4Hour</span></span><br><span class="line">  <span class="comment"># max-concurrent-compactions = 0                         # å‹ç¼©å¹¶å‘çš„æœ€å¤§æ•°é‡ï¼Œé»˜è®¤è®¾ç½®ä¸º0è¡¨ç¤ºruntime.GOMAXPROCS(0)*50% ï¼Œå¦åˆ™ä»¥è®¾ç½®çš„éé›¶å€¼ä¸ºå‡†</span></span><br><span class="line">  <span class="comment"># Valid size suffixes are k, m, or g (case insensitive, 1024 = 1k).</span></span><br><span class="line">  <span class="comment"># max-index-log-file-size = "1m"                         # é™åˆ¶ç´¢å¼•æ—¥å¿—æ–‡ä»¶å¤§å°</span></span><br><span class="line">  <span class="comment"># max-series-per-database = 1000000                      # é™åˆ¶æ•°æ®åº“çš„çº§æ•°ï¼Œè¯¥å€¼ä¸º0æ—¶å–æ¶ˆé™åˆ¶ï¼Œé»˜è®¤å€¼ï¼š1000000</span></span><br><span class="line">  <span class="comment"># max-values-per-tag = 100000                            # ä¸€ä¸ªtagæœ€å¤§çš„valueæ•°ï¼Œ0å–æ¶ˆé™åˆ¶ï¼Œé»˜è®¤å€¼ï¼š100000</span></span><br><span class="line">  <span class="comment"># tsm-use-madv-willneed = false                          # å¦‚æœä¸ºtrueï¼Œmmapçš„å»ºè®®å€¼MADV_WILLNEEDä¼šè¢«æä¾›ç»™å†…æ ¸</span></span><br><span class="line"><span class="comment">### [coordinator]</span></span><br><span class="line">[coordinator]</span><br><span class="line">  <span class="comment"># write-timeout = "10s"                                  # å†™æ“ä½œè¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤å€¼ï¼š 10s</span></span><br><span class="line">  <span class="comment"># max-concurrent-queries = 0                             # æœ€å¤§å¹¶å‘æŸ¥è¯¢æ•°ï¼Œ0æ— é™åˆ¶ï¼Œé»˜è®¤å€¼ï¼š 0</span></span><br><span class="line">  <span class="comment"># query-timeout = "0s"                                   # æŸ¥è¯¢æ“ä½œè¶…æ—¶æ—¶é—´ï¼Œ0æ— é™åˆ¶ï¼Œé»˜è®¤å€¼ï¼š0s</span></span><br><span class="line">  <span class="comment"># log-queries-after = "0s"                               # æ…¢æŸ¥è¯¢è¶…æ—¶æ—¶é—´ï¼Œ0æ— é™åˆ¶ï¼Œé»˜è®¤å€¼ï¼š0s</span></span><br><span class="line">  <span class="comment"># max-select-point = 0                                   # SELECTè¯­å¥å¯ä»¥å¤„ç†çš„æœ€å¤§ç‚¹æ•°ï¼ˆpointsï¼‰ï¼Œ0æ— é™åˆ¶ï¼Œé»˜è®¤å€¼ï¼š0</span></span><br><span class="line">  <span class="comment"># max-select-series = 0                                  # SELECTè¯­å¥å¯ä»¥å¤„ç†çš„æœ€å¤§çº§æ•°ï¼ˆseriesï¼‰ï¼Œ0æ— é™åˆ¶ï¼Œé»˜è®¤å€¼ï¼š0</span></span><br><span class="line">  <span class="comment"># max-select-buckets = 0                                 # SELECTè¯­å¥å¯ä»¥å¤„ç†çš„æœ€å¤§"GROUP BY time()"çš„æ—¶é—´å‘¨æœŸï¼Œ0æ— é™åˆ¶ï¼Œé»˜è®¤å€¼ï¼š0</span></span><br><span class="line"><span class="comment">### [retention]</span></span><br><span class="line">[retention]</span><br><span class="line">  <span class="comment"># enabled = true                                         # æ˜¯å¦å¯ç”¨è¯¥æ¨¡å—ï¼Œé»˜è®¤å€¼ ï¼š true</span></span><br><span class="line">  <span class="comment"># check-interval = "30m"                                 # æ£€æŸ¥æ—¶é—´é—´éš”ï¼Œé»˜è®¤å€¼ ï¼š"30m"</span></span><br><span class="line"><span class="comment">### [shard-precreation]</span></span><br><span class="line">[shard-precreation]</span><br><span class="line">  <span class="comment"># enabled = true                                         # æ˜¯å¦å¯ç”¨è¯¥æ¨¡å—ï¼Œé»˜è®¤å€¼ ï¼š true</span></span><br><span class="line">  <span class="comment"># check-interval = "10m"                                 # æ£€æŸ¥æ—¶é—´é—´éš”ï¼Œé»˜è®¤å€¼ ï¼š"10m"</span></span><br><span class="line">  <span class="comment"># advance-period = "30m"                                 # é¢„åˆ›å»ºåˆ†åŒºçš„æœ€å¤§æå‰æ—¶é—´ï¼Œé»˜è®¤å€¼ ï¼š"30m"</span></span><br><span class="line">[monitor]</span><br><span class="line">  <span class="comment"># store-enabled = true                                   # æ˜¯å¦å¯ç”¨è¯¥æ¨¡å—ï¼Œé»˜è®¤å€¼ ï¼štrue</span></span><br><span class="line">  <span class="comment"># store-database = "_internal"                           # é»˜è®¤æ•°æ®åº“ï¼š"_internal"</span></span><br><span class="line">  <span class="comment"># store-interval = "10s"                                 # ç»Ÿè®¡é—´éš”ï¼Œé»˜è®¤å€¼ï¼š"10s"</span></span><br><span class="line"><span class="comment">### [http]</span></span><br><span class="line">[http]</span><br><span class="line">  <span class="comment"># enabled = true                                         # æ˜¯å¦å¯ç”¨è¯¥æ¨¡å—ï¼Œé»˜è®¤å€¼ ï¼štrue</span></span><br><span class="line">  <span class="comment"># bind-address = ":8086"                                 # ç»‘å®šåœ°å€ï¼Œé»˜è®¤å€¼ ï¼š":8086"</span></span><br><span class="line">  <span class="comment"># auth-enabled = false                                   # æ˜¯å¦å¼€å¯è®¤è¯ï¼Œé»˜è®¤å€¼ï¼šfalse</span></span><br><span class="line">  <span class="comment"># realm = "InfluxDB"                                     # é…ç½®JWT realmï¼Œé»˜è®¤å€¼: "InfluxDB"</span></span><br><span class="line">  <span class="comment"># log-enabled = true                                     # æ˜¯å¦å¼€å¯æ—¥å¿—ï¼Œé»˜è®¤å€¼ï¼štrue</span></span><br><span class="line">  <span class="comment"># suppress-write-log = false                             # åœ¨å¯ç”¨æ—¥å¿—æ—¶æ˜¯å¦æŠ‘åˆ¶HTTPå†™è¯·æ±‚æ—¥å¿—</span></span><br><span class="line">  <span class="comment"># access-log-path = ""                                   # å½“å¯ç”¨HTTPè¯·æ±‚æ—¥å¿—æ—¶ï¼Œè¯¥é€‰é¡¹æŒ‡å®šäº†è·¯å¾„ã€‚å¦‚influxdä¸èƒ½è®¿é—®æŒ‡å®šçš„è·¯å¾„ï¼Œå®ƒå°†è®°å½•ä¸€ä¸ªé”™è¯¯å¹¶å°†è¯·æ±‚æ—¥å¿—å†™å…¥stderr</span></span><br><span class="line">  <span class="comment"># write-tracing = false                                  # æ˜¯å¦å¼€å¯å†™æ“ä½œæ—¥å¿—ï¼Œå¦‚æœç½®æˆtrueï¼Œæ¯ä¸€æ¬¡å†™æ“ä½œéƒ½ä¼šæ‰“æ—¥å¿—ï¼Œé»˜è®¤å€¼ï¼šfalse</span></span><br><span class="line">  <span class="comment"># pprof-enabled = true                                   # æ˜¯å¦å¼€å¯pprofï¼Œé»˜è®¤å€¼ï¼štrue</span></span><br><span class="line">  <span class="comment"># debug-pprof-enabled = false                            # æ˜¯å¦å¼€å¯pprofï¼Œé»˜è®¤å€¼ï¼štrue</span></span><br><span class="line">  <span class="comment"># https-enabled = false                                  # æ˜¯å¦å¼€å¯https ï¼Œé»˜è®¤å€¼ ï¼šfalse</span></span><br><span class="line">  <span class="comment"># https-certificate = "/etc/ssl/influxdb.pem"            # è®¾ç½®httpsè¯ä¹¦è·¯å¾„ï¼Œé»˜è®¤å€¼ï¼š"/etc/ssl/influxdb.pem"</span></span><br><span class="line">  <span class="comment"># https-private-key = ""                                 # è®¾ç½®httpsç§é’¥ï¼Œæ— é»˜è®¤å€¼</span></span><br><span class="line">  <span class="comment"># shared-secret = ""                                     # ç”¨äºJWTç­¾åçš„å…±äº«å¯†é’¥ï¼Œæ— é»˜è®¤å€¼</span></span><br><span class="line">  <span class="comment"># max-row-limit = 0                                      # é…ç½®æŸ¥è¯¢è¿”å›æœ€å¤§è¡Œæ•°ï¼Œ0æ— é™åˆ¶ï¼Œé»˜è®¤å€¼ï¼š0</span></span><br><span class="line">  <span class="comment"># max-connection-limit = 0                               # é…ç½®æœ€å¤§è¿æ¥æ•°ï¼Œ0æ— é™åˆ¶ï¼Œé»˜è®¤å€¼ï¼š0</span></span><br><span class="line">  <span class="comment"># unix-socket-enabled = false                            # æ˜¯å¦ä½¿ç”¨unix-socketï¼Œé»˜è®¤å€¼ï¼šfalse</span></span><br><span class="line">  <span class="comment"># bind-socket = "/var/run/influxdb.sock"                 # unix-socketè·¯å¾„ï¼Œé»˜è®¤å€¼ï¼š"/var/run/influxdb.sock"</span></span><br><span class="line">  <span class="comment"># max-body-size = 25000000                               # å®¢æˆ·ç«¯è¯·æ±‚ä¸»ä½“çš„æœ€å¤§å€¼ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½ã€‚0æ— é™åˆ¶ï¼Œé»˜è®¤å€¼0</span></span><br><span class="line">  <span class="comment"># max-concurrent-write-limit = 0                         # å¹¶å‘å¤„ç†çš„æœ€å¤§å†™å…¥æ¬¡æ•°,0æ— é™åˆ¶ï¼Œé»˜è®¤å€¼0</span></span><br><span class="line">  <span class="comment"># max-enqueued-write-limit = 0                           # æ’é˜Ÿç­‰å¾…å¤„ç†çš„æœ€å¤§æ•°é‡,0æ— é™åˆ¶ï¼Œé»˜è®¤å€¼0</span></span><br><span class="line">  <span class="comment"># enqueued-write-timeout = 0                             # åœ¨é˜Ÿåˆ—ä¸­ç­‰å¾…å¤„ç†çš„æœ€é•¿æ—¶é—´ï¼Œ0æˆ–è€…setting max-concurrent-write-limit=0æ— é™åˆ¶ï¼Œé»˜è®¤å€¼0</span></span><br><span class="line"><span class="comment">### [ifql]</span></span><br><span class="line">[ifql]</span><br><span class="line">  <span class="comment"># enabled = true                                         # æ˜¯å¦å¯ç”¨è¯¥æ¨¡å—ï¼Œé»˜è®¤å€¼ ï¼štrue</span></span><br><span class="line">  <span class="comment"># log-enabled = true                                     # æ˜¯å¦å¼€å¯æ—¥å¿—ï¼Œé»˜è®¤å€¼ï¼štrue</span></span><br><span class="line">  <span class="comment"># bind-address = ":8082"                                 # ifql RPCæœåŠ¡ä½¿ç”¨çš„ç»‘å®šåœ°å€é»˜è®¤æ˜¯8082</span></span><br><span class="line"><span class="comment">### [logging]</span></span><br><span class="line">[logging]</span><br><span class="line">  <span class="comment"># format = "auto"                                        # æ—¥å¿—æ ¼å¼ï¼Œé»˜è®¤æ˜¯è‡ªåŠ¨</span></span><br><span class="line">  <span class="comment"># level = "info"                                         # æ—¥å¿—çº§åˆ«é»˜è®¤info</span></span><br><span class="line">  <span class="comment"># suppress-logo = false                                  # å½“ç¨‹åºå¯åŠ¨æ—¶ï¼Œä¼šæŠ‘åˆ¶æ‰“å°å‡ºæ¥çš„logoè¾“å‡º</span></span><br><span class="line"><span class="comment">### [subscriber]</span></span><br><span class="line">[subscriber]</span><br><span class="line">  <span class="comment"># enabled = true	                                       # æ˜¯å¦å¯ç”¨è¯¥æ¨¡å—ï¼Œé»˜è®¤å€¼ ï¼štrue</span></span><br><span class="line">  <span class="comment"># http-timeout = "30s"	                                 # httpè¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤å€¼ï¼š"30s"</span></span><br><span class="line">  <span class="comment"># insecure-skip-verify = false	                         # æ˜¯å¦å…è®¸ä¸å®‰å…¨çš„è¯ä¹¦</span></span><br><span class="line">  <span class="comment"># ca-certs = ""	                                         # è®¾ç½®CAè¯ä¹¦</span></span><br><span class="line">  <span class="comment"># write-concurrency = 40	                               # è®¾ç½®å¹¶å‘æ•°ç›®ï¼Œé»˜è®¤å€¼ï¼š40</span></span><br><span class="line">  <span class="comment"># write-buffer-size = 1000 	                             # è®¾ç½®bufferå¤§å°ï¼Œé»˜è®¤å€¼ï¼š1000</span></span><br><span class="line"><span class="comment">### [[graphite]]</span></span><br><span class="line">[[graphite]]</span><br><span class="line">  <span class="comment"># enabled = false                                        # æ˜¯å¦å¯ç”¨è¯¥æ¨¡å—ï¼Œé»˜è®¤å€¼ ï¼šfalse</span></span><br><span class="line">  <span class="comment"># database = "graphite"                                  # æ•°æ®åº“åç§°ï¼Œé»˜è®¤å€¼ï¼š"graphite"</span></span><br><span class="line">  <span class="comment"># retention-policy = ""                                  # å­˜å‚¨ç­–ç•¥ï¼Œæ— é»˜è®¤å€¼</span></span><br><span class="line">  <span class="comment"># bind-address = ":2003"                                 # ç»‘å®šåœ°å€ï¼Œé»˜è®¤å€¼ï¼š":2003"</span></span><br><span class="line">  <span class="comment"># protocol = "tcp"                                       # åè®®ï¼Œé»˜è®¤å€¼ï¼š"tcp"</span></span><br><span class="line">  <span class="comment"># consistency-level = "one"                              # ä¸€è‡´æ€§çº§åˆ«ï¼Œé»˜è®¤å€¼ï¼š"one</span></span><br><span class="line">  <span class="comment"># batch-size = 5000                                      # æ‰¹é‡sizeï¼Œé»˜è®¤å€¼ï¼š5000</span></span><br><span class="line">  <span class="comment"># batch-pending = 10                                     # é…ç½®åœ¨å†…å­˜ä¸­ç­‰å¾…çš„batchæ•°ï¼Œé»˜è®¤å€¼ï¼š10</span></span><br><span class="line">  <span class="comment"># batch-timeout = "1s"                                   # è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤å€¼ï¼š"1s"</span></span><br><span class="line">  <span class="comment"># udp-read-buffer = 0                                    # udpè¯»å–bufferçš„å¤§å°ï¼Œ0è¡¨ç¤ºä½¿ç”¨æ“ä½œç³»ç»Ÿæä¾›çš„å€¼ï¼Œå¦‚æœè¶…è¿‡æ“ä½œç³»ç»Ÿçš„é»˜è®¤é…ç½®åˆ™ä¼šå‡ºé”™ã€‚ è¯¥é…ç½®çš„é»˜è®¤å€¼ï¼š0</span></span><br><span class="line">  <span class="comment"># separator = "."                                        # å¤šä¸ªmeasurementé—´çš„è¿æ¥ç¬¦ï¼Œé»˜è®¤å€¼ï¼š "."</span></span><br><span class="line">  <span class="comment"># tags = ["region=us-east", "zone=1c"]                   # å°†è¢«æ·»åŠ åˆ°æ‰€æœ‰æŒ‡æ ‡çš„é»˜è®¤æ ‡ç­¾ã€‚è¿™äº›å¯ä»¥åœ¨æ¨¡æ¿çº§åˆ«ä¸Šè¦†ç›–æˆ–è€…ä»æŒ‡æ ‡ä¸­æå–çš„æ ‡ç­¾</span></span><br><span class="line">  <span class="comment"># templates = [</span></span><br><span class="line">  <span class="comment">#   "*.app env.service.resource.measurement",</span></span><br><span class="line">  <span class="comment">#   # Default template</span></span><br><span class="line">  <span class="comment">#   "server.*",</span></span><br><span class="line">  <span class="comment"># ]</span></span><br><span class="line"><span class="comment">### [collectd]</span></span><br><span class="line">[[collectd]]</span><br><span class="line">  <span class="comment"># enabled = false                                        # æ˜¯å¦å¯ç”¨è¯¥æ¨¡å—ï¼Œé»˜è®¤å€¼ ï¼šfalse</span></span><br><span class="line">  <span class="comment"># bind-address = ":25826"                                # ç»‘å®šåœ°å€ï¼Œé»˜è®¤å€¼ï¼š ":25826"</span></span><br><span class="line">  <span class="comment"># database = "collectd"                                  # æ•°æ®åº“åç§°ï¼Œé»˜è®¤å€¼ï¼š"collectd"</span></span><br><span class="line">  <span class="comment"># retention-policy = ""                                  # å­˜å‚¨ç­–ç•¥ï¼Œæ— é»˜è®¤å€¼</span></span><br><span class="line">  <span class="comment"># typesdb = "/usr/local/share/collectd"                  # è·¯å¾„ï¼Œé»˜è®¤å€¼ï¼š"/usr/share/collectd/types.db"</span></span><br><span class="line">  <span class="comment"># security-level = "none"                                # å®‰å…¨çº§åˆ«</span></span><br><span class="line">  <span class="comment"># auth-file = "/etc/collectd/auth_file"</span></span><br><span class="line">  <span class="comment"># batch-size = 5000                                      # ä»ç¼“å­˜ä¸­æ‰¹é‡è·å–æ•°æ®çš„é‡ï¼Œé»˜è®¤å€¼ï¼š5000</span></span><br><span class="line">  <span class="comment"># batch-pending = 10                                     # å¯èƒ½åœ¨å†…å­˜ä¸­ç­‰å¾…çš„æ‰¹æ¬¡çš„æ•°é‡ï¼Œé»˜è®¤å€¼ï¼š10</span></span><br><span class="line">  <span class="comment"># batch-timeout = "10s"                                  # å³ä½¿æ²¡æœ‰è¾¾åˆ°ç¼“å†²åŒºçš„é™åˆ¶ï¼Œè‡³å°‘è¦åˆ·æ–°ä¸€ä¸‹ï¼Œé»˜è®¤å€¼ï¼š"10s"</span></span><br><span class="line">  <span class="comment"># read-buffer = 0                                        # udpè¯»å–bufferçš„å¤§å°ï¼Œ0è¡¨ç¤ºä½¿ç”¨æ“ä½œç³»ç»Ÿæä¾›çš„å€¼ï¼Œå¦‚æœè¶…è¿‡æ“ä½œç³»ç»Ÿçš„é»˜è®¤é…ç½®åˆ™ä¼šå‡ºé”™ã€‚é»˜è®¤å€¼ï¼š0</span></span><br><span class="line">  <span class="comment"># parse-multivalue-plugin = "split"                      # ä¸¤ç§å¤„ç†æ–¹å¼splitå’Œjoinï¼Œsplitä¼šåˆ†åˆ°ä¸åŒçš„è¡¨ä¸­ï¼Œjoinä¼šå°†è®°å½•ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„è®°å½•å¤„ç†ã€‚é»˜è®¤æ˜¯split</span></span><br><span class="line"><span class="comment">### [opentsdb]</span></span><br><span class="line">[[opentsdb]]</span><br><span class="line">  <span class="comment"># enabled = false                                        # æ˜¯å¦å¯ç”¨è¯¥æ¨¡å—ï¼Œé»˜è®¤å€¼ ï¼šfalse</span></span><br><span class="line">  <span class="comment"># bind-address = ":4242"                                 # ç»‘å®šåœ°å€ï¼Œé»˜è®¤å€¼ï¼š":4242"</span></span><br><span class="line">  <span class="comment"># database = "opentsdb"                                  # é»˜è®¤æ•°æ®åº“ï¼š"opentsdb"</span></span><br><span class="line">  <span class="comment"># retention-policy = ""                                  # å­˜å‚¨ç­–ç•¥ï¼Œæ— é»˜è®¤å€¼</span></span><br><span class="line">  <span class="comment"># consistency-level = "one"                              # ä¸€è‡´æ€§çº§åˆ«ï¼Œé»˜è®¤å€¼ï¼š"one"</span></span><br><span class="line">  <span class="comment"># tls-enabled = false                                    # æ˜¯å¦å¼€å¯tlsï¼Œé»˜è®¤å€¼ï¼šfalse</span></span><br><span class="line">  <span class="comment"># certificate= "/etc/ssl/influxdb.pem"                   # è¯ä¹¦è·¯å¾„ï¼Œé»˜è®¤å€¼ï¼š"/etc/ssl/influxdb.pem"</span></span><br><span class="line">  <span class="comment"># log-point-errors = true                                # å‡ºé”™æ—¶æ˜¯å¦è®°å½•æ—¥å¿—ï¼Œé»˜è®¤å€¼ï¼štrue</span></span><br><span class="line">  <span class="comment"># batch-size = 1000                                      # ä»ç¼“å­˜ä¸­æ‰¹é‡è·å–æ•°æ®çš„é‡ï¼Œé»˜è®¤å€¼ï¼š1000</span></span><br><span class="line">  <span class="comment"># batch-pending = 5                                      # å¯èƒ½åœ¨å†…å­˜ä¸­ç­‰å¾…çš„æ‰¹æ¬¡çš„æ•°é‡ï¼Œé»˜è®¤å€¼ï¼š5</span></span><br><span class="line">  <span class="comment"># batch-timeout = "1s"                                   # å³ä½¿æ²¡æœ‰è¾¾åˆ°ç¼“å†²åŒºçš„é™åˆ¶ï¼Œè‡³å°‘è¦åˆ·æ–°ä¸€ä¸‹ï¼Œé»˜è®¤å€¼ï¼š"1s"</span></span><br><span class="line"><span class="comment">### [[udp]]</span></span><br><span class="line">[[udp]]</span><br><span class="line">  <span class="comment"># enabled = false                                        # æ˜¯å¦å¯ç”¨è¯¥æ¨¡å—ï¼Œé»˜è®¤å€¼ ï¼šfalse</span></span><br><span class="line">  <span class="comment"># bind-address = ":8089"                                 # ç»‘å®šåœ°å€ï¼Œé»˜è®¤å€¼ï¼š":8089"</span></span><br><span class="line">  <span class="comment"># database = "udp"                                       # æ•°æ®åº“åç§°ï¼Œé»˜è®¤å€¼ï¼š"udp"</span></span><br><span class="line">  <span class="comment"># retention-policy = ""                                  # å­˜å‚¨ç­–ç•¥ï¼Œæ— é»˜è®¤å€¼</span></span><br><span class="line">  <span class="comment"># precision = ""                                         # æ¥æ”¶ç‚¹çš„æ—¶é—´ç‚¹çš„ç²¾åº¦("" or "n", "u", "ms", "s", "m", "h")</span></span><br><span class="line">  <span class="comment"># batch-size = 5000                                      # ä»ç¼“å­˜ä¸­æ‰¹é‡è·å–æ•°æ®çš„é‡ï¼Œé»˜è®¤å€¼ï¼š5000</span></span><br><span class="line">  <span class="comment"># batch-pending = 10                                     # å¯èƒ½åœ¨å†…å­˜ä¸­ç­‰å¾…çš„æ‰¹æ¬¡çš„æ•°é‡ï¼Œé»˜è®¤å€¼ï¼š10</span></span><br><span class="line">  <span class="comment"># batch-timeout = "1s"                                   # å³ä½¿æ²¡æœ‰è¾¾åˆ°ç¼“å†²åŒºçš„é™åˆ¶ï¼Œè‡³å°‘è¦åˆ·æ–°ä¸€ä¸‹ï¼Œé»˜è®¤å€¼ï¼š"1s"</span></span><br><span class="line">  <span class="comment"># read-buffer = 0                                        # udpè¯»å–bufferçš„å¤§å°ï¼Œ0è¡¨ç¤ºä½¿ç”¨æ“ä½œç³»ç»Ÿæä¾›çš„å€¼ï¼Œå¦‚æœè¶…è¿‡æ“ä½œç³»ç»Ÿçš„é»˜è®¤é…ç½®åˆ™ä¼šå‡ºé”™ã€‚ è¯¥é…ç½®çš„é»˜è®¤å€¼ï¼š0ã€€</span></span><br><span class="line"><span class="comment">### [continuous_queries]</span></span><br><span class="line">[continuous_queries]</span><br><span class="line">  <span class="comment"># enabled = true                                         # æ˜¯å¦å¯ç”¨è¯¥æ¨¡å—ï¼Œé»˜è®¤å€¼ ï¼štrue</span></span><br><span class="line">  <span class="comment"># log-enabled = true                                     # æ˜¯å¦å¼€å¯æ—¥å¿—ï¼Œé»˜è®¤å€¼ï¼štrue</span></span><br><span class="line">  <span class="comment"># query-stats-enabled = false                            # æ§åˆ¶æŸ¥è¯¢æ˜¯å¦è¢«è®°å½•åˆ°è‡ªæˆ‘ç›‘æ§æ•°æ®å­˜å‚¨ä¸­</span></span><br><span class="line">  <span class="comment"># run-interval = "1s"                                    # æ—¶é—´é—´éš”ï¼Œé»˜è®¤å€¼ï¼š"1s"</span></span><br><span class="line"><span class="comment">### [tls]</span></span><br><span class="line">[tls]</span><br><span class="line">  <span class="comment"># ciphers = [</span></span><br><span class="line">  <span class="comment">#   "TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305",</span></span><br><span class="line">  <span class="comment">#   "TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256",</span></span><br><span class="line">  <span class="comment"># ]</span></span><br><span class="line">  <span class="comment"># min-version = "tls1.2"</span></span><br><span class="line">  <span class="comment"># max-version = "tls1.2"</span></span><br></pre></td></tr></table></figure></p>
<p><br/></p>
<p><strong>æ‰‹åŠ¨åå°å¯åŠ¨ influxd æœåŠ¡å¹¶æŒ‡å®šå…¶é…ç½®æ–‡ä»¶</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup ./influxd -config /etc/conf/influxdb.conf &gt; /var/<span class="built_in">log</span>/influxdb.log 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure></p>
<hr>
<h2 id="0x03-Influxdb-1-x-å¸¸ç”¨Clientçš„APIåº“"><a href="#0x03-Influxdb-1-x-å¸¸ç”¨Clientçš„APIåº“" class="headerlink" title="0x03 Influxdb 1.x å¸¸ç”¨Clientçš„APIåº“"></a>0x03 Influxdb 1.x å¸¸ç”¨Clientçš„APIåº“</h2><h3 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h3><p><strong>influxdb æ¨¡å—ä½¿ç”¨ä»‹ç»</strong><br>æè¿°: ä½¿ç”¨ pip å®‰è£… influxdb æ¨¡å— <code>pip install influxdb</code>ã€‚</p>
<p>ä½¿ç”¨èŒƒä¾‹:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> influxdb <span class="keyword">import</span> InfluxDBClient</span><br><span class="line">json_body = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">"measurement"</span>: <span class="string">"meas01"</span>,</span><br><span class="line">    <span class="string">"tags"</span>: &#123;</span><br><span class="line">        <span class="string">"name"</span>: <span class="string">"s1-2"</span>,</span><br><span class="line">        <span class="string">"addr"</span>: <span class="string">"10-2"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"fields"</span>: &#123;</span><br><span class="line">        <span class="string">"id"</span>: <span class="number">2</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">"measurement"</span>: <span class="string">"meas02"</span>,</span><br><span class="line">    <span class="string">"tags"</span>: &#123;</span><br><span class="line">        <span class="string">"name"</span>: <span class="string">"s1-3"</span>,</span><br><span class="line">        <span class="string">"addr"</span>: <span class="string">"10-3"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"fields"</span>: &#123;</span><br><span class="line">        <span class="string">"id"</span>: <span class="number">3</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line">client = InfluxDBClient(<span class="string">'db.weiyigeek.top'</span>, <span class="number">8086</span>, <span class="string">'root'</span>, <span class="string">'weiyigeek'</span>, <span class="string">'mydb'</span>) <span class="comment"># åˆå§‹åŒ–ï¼ˆæŒ‡å®šè¦æ“ä½œçš„æ•°æ®åº“ï¼‰</span></span><br><span class="line">client.write_points(json_body) <span class="comment"># å†™å…¥æ•°æ®ï¼ŒåŒæ—¶åˆ›å»ºè¡¨</span></span><br></pre></td></tr></table></figure></p>
<hr>
<h2 id="0x04-å­¦ä¹ è¡¥å……"><a href="#0x04-å­¦ä¹ è¡¥å……" class="headerlink" title="0x04 å­¦ä¹ è¡¥å……"></a>0x04 å­¦ä¹ è¡¥å……</h2><h3 id="InfluxDB-å¯è§†åŒ–å·¥å…·-InfluxDBStudio"><a href="#InfluxDB-å¯è§†åŒ–å·¥å…·-InfluxDBStudio" class="headerlink" title="InfluxDB å¯è§†åŒ–å·¥å…·-InfluxDBStudio"></a>InfluxDB å¯è§†åŒ–å·¥å…·-InfluxDBStudio</h3><p>æè¿°: InfluxDB Studio æ˜¯ç”¨äºInfluxDBæ—¶é—´åºåˆ—æ•°æ®åº“çš„UIç®¡ç†å·¥å…·, å®ƒçš„çµæ„Ÿæ¥è‡ªå…¶ä»–ç±»ä¼¼çš„æ•°æ®åº“ç®¡ç†å·¥å…·ï¼Œå¦‚ <code>SQL Server management Studio</code> å’Œ <code>Robomongo</code> ä¸ºInfluxDataå…¬å¸æä¾›æ”¯æŒ, Netçš„å¯ç§»æ¤InfluxDBå®¢æˆ·ç«¯åº“ï¼ˆåŠ ä¸Šä¸€äº›Kapacitoræ”¯æŒï¼‰, Tips: å®˜ç½‘é¡¹ç›®æœ€åæ›´æ–°æ—¶é—´2017å¹´11æœˆã€‚</p>
<p>å®˜æ–¹ä½¿ç”¨æ–‡æ¡£: <a href="https://github.com/CymaticLabs/InfluxDBStudio/#managing-connections" target="_blank" rel="noopener">https://github.com/CymaticLabs/InfluxDBStudio/#managing-connections</a><br>ä¸‹è½½é“¾æ¥: <a href="https://github.com/CymaticLabs/InfluxDBStudio/releases/download/v0.2.0-beta.1/InfluxDBStudio-0.2.0.zip" target="_blank" rel="noopener">https://github.com/CymaticLabs/InfluxDBStudio/releases/download/v0.2.0-beta.1/InfluxDBStudio-0.2.0.zip</a></p>
<p>InfluxDBStudio è¿æ¥å­—ç¬¦ä¸²é…ç½®:<br><figure class="image-box">
                <a rel=2.InfluxDB1.xæ•°æ®åº“å®è·µä½¿ç”¨ href="https://img.weiyigeek.top/2022/5/20220726165604.png" target="_blank" title="WeiyiGeek.influxDB Connection" data-fancybox="images"><img src="https://img.weiyigeek.top/2022/5/20220726165604.png" alt="WeiyiGeek.influxDB Connection" title="" class=""></a>
                <p>WeiyiGeek.influxDB Connection</p>
            </figure></p>
<p>InfluxDBStudio è¿›è¡ŒæŒ‡å®šæ•°æ®åº“ measurement åç§°çš„æ•°æ®æŸ¥è¯¢:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="string">"events"</span> <span class="keyword">WHERE</span> <span class="built_in">time</span> &lt; <span class="keyword">now</span>() </span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">time</span>,application,hit,<span class="keyword">count</span>,<span class="keyword">avg</span>,<span class="keyword">transaction</span>,statut  <span class="keyword">FROM</span> <span class="string">"jmeter"</span> <span class="keyword">WHERE</span> <span class="built_in">time</span> &lt; <span class="keyword">now</span>() - <span class="number">5</span>m  <span class="keyword">order</span> <span class="keyword">by</span> <span class="built_in">time</span> <span class="keyword">desc</span> tz(<span class="string">'Asia/Shanghai'</span>)</span><br><span class="line"><span class="comment">-- time	application	hit	count	avg	transaction	statut</span></span><br><span class="line"><span class="comment">-- 2022/7/21 9:42	index	15000	15000	32.42	all	all</span></span><br><span class="line"><span class="comment">-- 2022/7/21 9:33	index	15000	15000	2.2	all	all</span></span><br></pre></td></tr></table></figure><br><figure class="image-box">
                <a rel=2.InfluxDB1.xæ•°æ®åº“å®è·µä½¿ç”¨ href="https://img.weiyigeek.top/2022/5/20220726165544.png" target="_blank" title="WeiyiGeek.influxDB Query Measurement" data-fancybox="images"><img src="https://img.weiyigeek.top/2022/5/20220726165544.png" alt="WeiyiGeek.influxDB Query Measurement" title="" class=""></a>
                <p>WeiyiGeek.influxDB Query Measurement</p>
            </figure></p>
<hr>
<h2 id="0x0n-å…¥å‘å‡ºå‘"><a href="#0x0n-å…¥å‘å‡ºå‘" class="headerlink" title="0x0n å…¥å‘å‡ºå‘"></a>0x0n å…¥å‘å‡ºå‘</h2>
        </div>
        
        <!-- å¾®ä¿¡å…¬ä¼—å·å…³æ³¨/æ–‡ç« ç‰ˆæƒå¤åˆ¶ -->
        
        <div id="btw-mask" style="position: fixed; top: 0px; right: 0px; bottom: 0px; left: 0px; opacity: 0.7; z-index: 999; background: rgb(0, 0, 0); display:none"></div>
<div id="btw-modal" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 360px; text-align: center; font-size: 13px; background: rgb(255, 255, 255); border-radius: 10px; z-index: 9999; font-family: PingFangSC-Regular, sans-serif;display:none">
<span id="btw-modal-close-btn" style="position: absolute; top: 5px; right: 15px; line-height: 1.8; font-size: 15px; cursor: pointer; opacity: 0.2; z-index: 9999; color: rgb(0, 0, 0); background: none; border: none; outline: none;">X</span>
<p id="btw-modal-header" style="margin-top: 40px; line-height: 1.8; font-size: 13px; ">
<b style="color:#6190e8;">ä½ å¥½çœ‹å‹,æ¬¢è¿å…³æ³¨åšä¸»å¾®ä¿¡å…¬ä¼—å·å“Ÿ! â¤ <br> è¿™å°†æ˜¯æˆ‘æŒç»­æ›´æ–°æ–‡ç« çš„åŠ¨åŠ›æºæ³‰ï¼Œè°¢è°¢æ”¯æŒï¼(à¹‘â€²á´—â€µà¹‘) </b> <br> å¦‚ä¸æƒ³å…³æ³¨è¯·ç‚¹å‡»å³ä¸Šè§’çš„ã€Xã€‘å³å¯å…³é—­ç»§ç»­æµè§ˆæ–‡ç« .<br>  <b style="color:red;"> æ¸©é¦¨æç¤º: æœªè§£é”çš„ç”¨æˆ·ä¸èƒ½ç²˜è´´å¤åˆ¶æ–‡ç« å†…å®¹å“Ÿ!</b> <br>
<br>Method 1.Please visit <strong><a href="https://twitter.com/WeiyiGeek" target="_blank" rel="noopener" style="color: rgb(240, 65, 52);text-decoration:underline;">ã€My Twitterã€‘</a></strong>. There is an article verification code in the homepage.
<br>æ–¹å¼2.è¯·è®¿é—®æœ¬åšä¸»çš„Bç«™<strong><a href="https://space.bilibili.com/385802642" target="_blank" rel="noopener" style="color: rgb(240, 65, 52);text-decoration:underline;">ã€WeiyiGeekã€‘</a></strong>é¦–é¡µå…³æ³¨UPä¸»,<br>å°†è‡ªåŠ¨éšæœºè·å–è§£é”éªŒè¯ç ã€‚
<br>æ–¹å¼3.æ‰«ä¸€æ‰«ä¸‹æ–¹äºŒç»´ç ï¼Œå…³æ³¨æœ¬ç«™<strong>å®˜æ–¹å…¬ä¼—å·</strong><br>
å›å¤ï¼š<strong style="color: rgb(240, 65, 52);">éªŒè¯ç </strong>
å°†è·å–<strong style="color: rgb(240, 65, 52);">è§£é”(æœ‰æ•ˆæœŸ7å¤©)</strong>æœ¬ç«™æ‰€æœ‰æŠ€æœ¯æ–‡ç« å“Ÿ!</p>
<img src="/img/wechat-search.png" style="width: 300px; margin-top: 10px;">
<div id="btw-modal-input-code" style="margin-top: 20px; background: rgb(255, 255, 255);">
  <input id="btw-modal-input" type="number" minlength="4" maxlength="4" placeholder="è¯·è¾“å…¥éªŒè¯ç |Verification Code"
    style="width: 165px; height: 32px; line-height: 32px; padding: 0px 10px; margin: 0px 10px; font-size: 13px; text-rendering: auto; text-transform: none; cursor: text; outline: none; box-sizing: border-box; border: 1px solid rgb(221, 221, 221); -webkit-appearance: textfield; background-color: white; -webkit-rtl-ordering: logical;"/>
  <button id="btw-submit-btn" onclick="yzm_vertify()"
    style="padding: 0px 20px; height: 32px; font-size: 14px; outline: none; border: none; color: rgb(255, 255, 255); background: rgb(222, 104, 109); cursor: pointer;">æ
    äº¤</button> </div>
<p id="btw-footer" style="margin: 40px 0px 20px; color: rgb(153, 153, 153);">@WeiyiGeek - ä¸ºäº†èƒ½åˆ°è¿œæ–¹ï¼Œè„šä¸‹çš„æ¯ä¸€æ­¥éƒ½ä¸èƒ½å°‘</p>
</div>
           

        <!-- Google å¹¿å‘Š -->
        
<ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-9134434519967436" data-ad-slot="7905848205"></ins>
  

        
<hr/>
<div style="text-align: center;font-weight: bold;">
  <p> æ¬¢è¿å„ä½å¿—åŒé“åˆçš„æœ‹å‹ä¸€èµ·å­¦ä¹ äº¤æµï¼Œå¦‚æ–‡ç« æœ‰è¯¯è¯·åœ¨ä¸‹æ–¹ç•™ä¸‹æ‚¨å®è´µçš„ç»éªŒçŸ¥è¯†ï¼Œä¸ªäººé‚®ç®±åœ°å€<b style="color:#ff654e"><code>ã€master#weiyigeek.topã€‘</code></b>æˆ–è€…ä¸ªäººå…¬ä¼—å·<b style="color:#ff654e"><code>ã€WeiyiGeekã€‘</code></b>è”ç³»æˆ‘ã€‚ </p>
  <p> æ›´å¤šæ–‡ç« æ¥æºäº<b style="color:#03a9f4">ã€WeiyiGeek Blog - ä¸ºäº†èƒ½åˆ°è¿œæ–¹ï¼Œè„šä¸‹çš„æ¯ä¸€æ­¥éƒ½ä¸èƒ½å°‘ã€‘</b>, ä¸ªäººé¦–é¡µåœ°å€( <a style="color: #03a9f4;" href="https://weiyigeek.top" target="_blank"> https://weiyigeek.top </a> )</p>
<!-- 

  <ul style="font-weight: bolder;">
    <li>
      <p><span style="color: #03a9f4">echo&nbsp;&nbsp;"ã€ç‚¹ä¸ªèµã€‘ï¼ŒåŠ¨åŠ¨ä½ é‚£ç²—å£®çš„æ‹‡æŒ‡æˆ–è€…èŠŠèŠŠç‰æ‰‹ï¼Œäº²ï¼"</span></p>
    </li>
    <li>
      <p><span style="color: #ff9201">printf("%s",&nbsp;"ã€æŠ•ä¸ªå¸ã€‘ï¼Œä¸‡æ°´åƒå±±æ€»æ˜¯æƒ…ï¼ŒæŠ•ä¸ªç¡¬å¸è¡Œä¸è¡Œï¼Œäº²ï¼")</span></p>
    </li>
    <li>
      <p><span style="color: #02a2ff">fmt.Printf("ã€æ”¶ä¸ªè—ã€‘ï¼Œé˜…åå³ç„šä¸åƒç°ï¼Œäº²ï¼")&nbsp;&nbsp;</span></p>
    </li>
    <li>
      <p><span style="color:red">console.info("ã€è½¬ä¸ªå‘ã€‘ï¼Œè®©æ›´å¤šçš„å¿—åŒé“åˆçš„æœ‹å‹ä¸€èµ·å­¦ä¹ äº¤æµï¼Œäº²ï¼")</span></p>
    </li>
    <li>
      <p><span style="color: #ff654e">System.out.println("ã€å…³ä¸ªæ³¨ã€‘ï¼Œåç»­æµè§ˆæŸ¥çœ‹ä¸è¿·è·¯å“Ÿï¼Œäº²ï¼")</span></p>
    </li>
  </ul> -->
  <div>
    <img src="/img/share-wechat.jpg" class="img-responsive" alt="æ‰«æFollow(å…³æ³¨)WeiyiGeekå…¬ä¼—å·ä¸Visit(æµè§ˆ)æå®¢å…¨æ ˆä¿®ç‚¼å°ç¨‹åº" >
    <p>ä¸“æ ä¹¦å†™ä¸æ˜“ï¼Œå¦‚æœæ‚¨è§‰å¾—è¿™ä¸ªä¸“æ è¿˜ä¸é”™çš„ï¼Œè¯·ç»™è¿™ç¯‡ä¸“æ  <b style="color: red;">ã€ç‚¹ä¸ªèµã€æŠ•ä¸ªå¸ã€æ”¶ä¸ªè—ã€å…³ä¸ªæ³¨ã€è½¬ä¸ªå‘ã€èµä¸ªåŠ©ã€‘</b>ï¼Œè¿™å°†å¯¹æˆ‘çš„è‚¯å®šï¼Œæˆ‘å°†æŒç»­æ•´ç†å‘å¸ƒæ›´å¤šä¼˜è´¨åŸåˆ›æ–‡ç« ï¼ã€‚</p>
    <img src="/img/weiyigeek.jpg" class="img-responsive" alt="WeiyiGeek-banner">
  </div>
</div>
  <hr>
  

  <blockquote class="post-copyright">
    <div class="content">
      
        
<span class="post-time">
    æœ€åæ›´æ–°æ—¶é—´ï¼š<time datetime="2023-01-31T02:29:07.993Z" itemprop="dateUpdated">2023-01-31 10:29:07</time>
</span><br>


        <span>æ–‡ç« åŸå§‹è·¯å¾„ï¼š<a href="https://github.com/WeiyiGeek/blog/edit/master/source/_posts/æ•°æ®å­˜å‚¨/InfluxDB/2.InfluxDB1.xæ•°æ®åº“å®è·µä½¿ç”¨.md" target="_blank" rel="noopener noreferrer">_posts/æ•°æ®å­˜å‚¨/InfluxDB/2.InfluxDB1.xæ•°æ®åº“å®è·µä½¿ç”¨.md</a></span><br>
         <span class="copy-copyright">è½¬è½½æ³¨æ˜å‡ºå¤„ï¼ŒåŸæ–‡åœ°å€ï¼š<a href="/2022/4-11-670.html" target="_blank" rel="external">https://blog.weiyigeek.top/2022/4-11-670.html</a></span><br>æœ¬ç«™æ–‡ç« å†…å®¹éµå¾ª <a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">çŸ¥è¯†å…±äº« ç½²å - éå•†ä¸šæ€§ - ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…åè®®</a> 
    </div>
    <footer>
      <a href="https://blog.weiyigeek.top">
        <img src="/img/avatar.jpg" alt="WeiyiGeek">
        WeiyiGeek
      </a>
    </footer>
  </blockquote>


        
            <div class="page-reward">
  <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-rectangle waves-light">â˜•ï¸ è¯·ä½œè€…å–æ¯å’–å•¡!</a>
</div>
            
        
        <div class="post-footer">
            
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/InfluxDB/" rel="tag">InfluxDB</a></li></ul>

            <div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://blog.weiyigeek.top/2022/4-11-670.html&title=ã€Š2.InfluxDB1.xæ•°æ®åº“å®è·µä½¿ç”¨ã€‹ â€” WeiyiGeek Blog&pic=https://blog.weiyigeek.top/img/avatar.jpg" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.weiyigeek.top/2022/4-11-670.html&title=ã€Š2.InfluxDB1.xæ•°æ®åº“å®è·µä½¿ç”¨ã€‹ â€” WeiyiGeek Blog&source=[TOC]" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.weiyigeek.top/2022/4-11-670.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€Š2.InfluxDB1.xæ•°æ®åº“å®è·µä½¿ç”¨ã€‹ â€” WeiyiGeek Blog&url=https://blog.weiyigeek.top/2022/4-11-670.html&via=https://blog.weiyigeek.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://blog.weiyigeek.top/2022/4-11-670.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>

        </div>
        
          <!-- è¯„è®ºç»„ä»¶ -->


<div id="gitalk-container"></div>
<script type="text/javascript" src="/js/plugins/gitalk.min.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/custom/gitalk.init.js?v=1.6.6"></script>
        
    </div>
    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="prev">
      <a href="/2022/4-12-671.html" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">2.InfluxDB2.xæ•°æ®åº“å®è·µä½¿ç”¨</h4>
      </a>
    </div>
  

  
    <div class="next">
      <a href="/2022/4-10-660.html" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">1.InfluxDBæ•°æ®åº“å¿«é€Ÿå…¥é—¨ä¸åŸºç¡€ä½¿ç”¨</h4>
      </a>
    </div>
  
</nav>


    
    
        <aside class="post-widget">
            <nav class="post-toc-wrap" id="post-toc">
                <strong>ç›®å½•</strong>
                <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#0x00-influx-å‘½ä»¤-influxDB-å®¢æˆ·ç«¯"><span class="post-toc-number">1.</span> <span class="post-toc-text">0x00 influx å‘½ä»¤ - influxDB å®¢æˆ·ç«¯</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#è¯­æ³•å‚æ•°"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">è¯­æ³•å‚æ•°</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#ç®€å•ç¤ºä¾‹"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">ç®€å•ç¤ºä¾‹</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#0x01-influxDB1-x-å®è·µ"><span class="post-toc-number">2.</span> <span class="post-toc-text">0x01 influxDB1.x å®è·µ</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#æ—¶é—´æ—¶åŒºè®¾ç½®æ˜¾ç¤º"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">æ—¶é—´æ—¶åŒºè®¾ç½®æ˜¾ç¤º</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#æ•°æ®å¯¼å‡ºå¯¼å…¥"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">æ•°æ®å¯¼å‡ºå¯¼å…¥</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#æ•°æ®ä¿å­˜ç­–ç•¥"><span class="post-toc-number">2.3.</span> <span class="post-toc-text">æ•°æ®ä¿å­˜ç­–ç•¥</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#0x02-Influxdb-1-x-é…ç½®æµ…æ"><span class="post-toc-number">3.</span> <span class="post-toc-text">0x02 Influxdb 1.x é…ç½®æµ…æ</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#0x03-Influxdb-1-x-å¸¸ç”¨Clientçš„APIåº“"><span class="post-toc-number">4.</span> <span class="post-toc-text">0x03 Influxdb 1.x å¸¸ç”¨Clientçš„APIåº“</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Python"><span class="post-toc-number">4.1.</span> <span class="post-toc-text">Python</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#0x04-å­¦ä¹ è¡¥å……"><span class="post-toc-number">5.</span> <span class="post-toc-text">0x04 å­¦ä¹ è¡¥å……</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#InfluxDB-å¯è§†åŒ–å·¥å…·-InfluxDBStudio"><span class="post-toc-number">5.1.</span> <span class="post-toc-text">InfluxDB å¯è§†åŒ–å·¥å…·-InfluxDBStudio</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#0x0n-å…¥å‘å‡ºå‘"><span class="post-toc-number">6.</span> <span class="post-toc-text">0x0n å…¥å‘å‡ºå‘</span></a></li></ol>
            </nav>
            <div class="toc-bar"><div>
        </aside>
    
    <!-- 
  <div id="post-wechat" class="post-wechat" style="position:fixed;top: 360px;bottom: 500px;right: 3%;width: 190px;text-align: center; z-index: 9999">
    <p><b>å…³æ³¨ã€å…¨æ ˆå·¥ç¨‹å¸ˆä¿®ç‚¼æŒ‡å—ã€‘</b></p>
    <img src="/img/wechat-gzh.jpg" class="img-responsive" alt="weiyigeek">
    <p><b>æ¬¢è¿æ·»åŠ ã€ä½œè€…ã€‘å¾®ä¿¡</b></p>
    <img src="/img/wehat.jpg" class="img-responsive" alt="weiyigeek">
  </div>
 -->

    <!-- æ”¯ä»˜å®å¾®ä¿¡æ–‡ç« èµèµ -->
    
      <div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        å¦‚æœæ­¤ç¯‡æ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œå°±è¯·ä½œè€…å–æ¯ Coffee â˜•ï¸â˜•ï¸!
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardwechat" src="/img/reward-wechat.jpg" height="250" height="250" alt="å¾®ä¿¡æ‰“èµäºŒç»´ç ">
            <img id="rewardalipay" src="/img/reward-alipay.png" height="250" height="250" alt="æ”¯ä»˜å®æ‰“èµäºŒç»´ç ">
        </div>
        
        <label class="reward-toggle">
            <!-- <input id="rewardToggle" type="checkbox" class="reward-toggle-check" data-wechat="/img/reward-wechat.jpg" data-alipay="/img/reward-alipay.png"> -->
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">å¾®ä¿¡</span>
                <span class="reward-toggle-item alipay">æ”¯ä»˜å®</span>
            </div>
        </label>
        
    </div>
</div>

      
</article>
</div>

    </main>
    <footer class="footer ">
    
    <div class="top">
        
            <p>
    <span>Linksï¼š</span>
    
    <span class="blogroll-item">
        <a href="https://weiyigeek.top" target="_blank">https://weiyigeek.top</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.weiyigeek.top" target="_blank">https://blog.weiyigeek.top</a>
    </span>
    
    <span class="blogroll-item">
        <a href="/img/share-wechat.jpg" target="_blank">å…¬ä¼—è´¦å·</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://space.bilibili.com/385802642/article" target="_blank">å“”å“©å“”å“©ä¸“æ </a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://github.com/weiyigeek" target="_blank">åšä¸»Github</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://gitee.com/WeiyiGeek" target="_blank">åšä¸»Gitee</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.zhihu.com/people/weiyiSec" target="_blank">çŸ¥ä¹</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.cnblogs.com/WeiyiGeek" target="_blank">åšå®¢å›­</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://my.oschina.net/weiyigeek" target="_blank">OSCHINA</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.toutiao.com/c/user/token/MS4wLjABAAAAqcPSoMqfctaEqJpGSF775eeCjWkrop4AOyLITdMx-L78F5iXzfQcSRM5sY4dq3wR" target="_blank">ä»Šæ—¥å¤´æ¡</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.csdn.net/u013072756?type=lately" target="_blank">CSDN</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.jianshu.com/u/5199a1104739" target="_blank">ç®€ä¹¦</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://cloud.tencent.com/developer/user/1389665/articles" target="_blank">è…¾è®¯äº‘ç¤¾åŒº</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://cuttlefish.baidu.com/shop/75c5dbd8d15abe23482f4d40" target="_blank">ç™¾åº¦æ–‡åº“</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://author.baidu.com/home?from=blog&app_id=1726736601523415" target="_blank">ITæå®¢çŸ¥è¯†åˆ†äº«</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.51cto.com/weiyigeek" target="_blank">51CTOåšå®¢</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://juejin.cn/user/122767337595934" target="_blank">æ˜é‡‘</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://weibo.com/a/hot/7622022703618049_1.html" target="_blank">å¾®åšæ–‡ç« </a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.xiaohongshu.com/user/profile/627c98bb000000001000e7ba" target="_blank">å°çº¢ä¹¦</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://segmentfault.com/u/weiyigeek" target="_blank">Segmentfault</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.modb.pro/u/506690" target="_blank">å¢¨å¤©è½®</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.douyin.com/user/MS4wLjABAAAAMSBdMja6XLsdmzafb0RNbFeBemIOk38K1PaOClZeI1Q" target="_blank">æŠ–éŸ³ä¸»é¡µ</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.kuaishou.com/profile/3xfbrsrhd2i69x9" target="_blank">å¿«æ‰‹ä¸»é¡µ</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.ixigua.com/home/3984243135350727" target="_blank">è¥¿ç“œè§†é¢‘</a>
    </span>
    
</p>

        
    </div>
    
    <div class="bottom">
      <p>
        <span>WeiyiGeek &copy; 2018 - 2023 <a href="https://weiyigeek.top" target="_blank" rel="noopener">weiyigeek.top</a> All rights reserved.å”¯ä¸€æå®¢ITçŸ¥è¯†åˆ†äº« ç‰ˆæƒæ‰€æœ‰ </span>
        
        <span>
          Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/weiyigeek" target="_blank">mellow</a>
        </span>
        
        <br/><a id="SiteRunTime"></a>
        <br/>è®¿é—®ç»Ÿè®¡
        <span><a href="/sitemap.xml" target="_blank" rel="Sitemaps-ç«™ç‚¹åœ°å›¾">Sitemaps</a> </span>
        <span><a href="/baidusitemap.xml" target="_blank" rel="baidusitemaps-ç™¾åº¦ç«™ç‚¹åœ°å›¾">ç«™ç‚¹åœ°å›¾</a> </span>
        <!-- 
  -->
        <br/>ICPå¤‡æ¡ˆå·<span><a href="https://beian.miit.gov.cn" target="_blank">æ¸ICPå¤‡2022003447å·</a></span>
        <br/>
        <div>
        <div id="blog-wormhole-id" >
          <a href="https://www.foreverblog.cn/go.html" target="_blank"> 
            <img src="https://img.foreverblog.cn/wormhole_2_tp.gif" alt="åå¹´ä¹‹çº¦è™«æ´" style="height:32px;max-height:50px;display:block;margin:0 auto;" title="ç©¿æ¢­è™«æ´-éšæœºè®¿é—®åå¹´ä¹‹çº¦å‹é“¾åšå®¢">
          </a>
        </div>
        <div id="cc-myssl-id" >
          <a href="https://myssl.com/blog.weiyigeek.top?from=mysslid" target="_blank">
            <img src="https://static.myssl.com/res/images/myssl-id1.png" alt="MySSLå®‰å…¨è®¤è¯" style="max-height:50px;display:block;margin:0 auto">
          </a>
        </div>
      </p>
    </div>
</footer>



    <div class="mask" id="mask"></div>

<div id="go" class="waves-effect waves-light">
  <a href="javascript:;" id="goqrcode"> <span class="icon icon-lg icon-qrcode"></span> </a>
  <a href="javascript:;" id="gotop"> <span class="icon icon-lg icon-chevron-up"></span></a>
</div>





<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://blog.weiyigeek.top/2022/4-11-670.html&title=ã€Š2.InfluxDB1.xæ•°æ®åº“å®è·µä½¿ç”¨ã€‹ â€” WeiyiGeek Blog&pic=https://blog.weiyigeek.top/img/avatar.jpg" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.weiyigeek.top/2022/4-11-670.html&title=ã€Š2.InfluxDB1.xæ•°æ®åº“å®è·µä½¿ç”¨ã€‹ â€” WeiyiGeek Blog&source=[TOC]" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.weiyigeek.top/2022/4-11-670.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€Š2.InfluxDB1.xæ•°æ®åº“å®è·µä½¿ç”¨ã€‹ â€” WeiyiGeek Blog&url=https://blog.weiyigeek.top/2022/4-11-670.html&via=https://blog.weiyigeek.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://blog.weiyigeek.top/2022/4-11-670.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>æ‰«ä¸€æ‰«ï¼Œåˆ†äº«åˆ°å¾®ä¿¡</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACKUlEQVR42u3aQXLbMAwF0Nz/0u62M23S/wEnU5GPK48tiXxawCSAj494vH4bya+vP8Znd+WzvGFgYGA8lvH6cuQTJHclpK9fx6crwcDAuIDRPjoJrMn0ezYGBgZGe83sm828GBgYGJuAmxxQH/C/gYGB8d8wkkNsm3rbp+e+5SyOgYHxQEaedf/5z99S38DAwHgU41WO9mmzokK9KgwMjKMZeYBLNoubYmdyqP7HEzAwMA5l5KXHdrJ3JeCibzAwMK5hzIqLyULzkD28HgMD4zJGEsE2Rc1N40W0NcTAwDiOsW+eaKds28uKpjEMDIwLGLMWhzwNN7u+KHBiYGAcysjbGvIFFZu50Ur+chcGBsYFjE3LxT6JNitRrHpGMDAwHsXIN2HJIXPW+PWGRBsGBsbRjDZBlofXJFjnZdHi3WNgYBzKSIJg/eg4WdZuQ1c9IxgYGA9n5AXFWTtXws4LqNGmFwMD4wjGLH3fLn2/uawDPQYGxnGMTcDd49vyQNFygYGBcSij3ZYloXZT5ixaNDAwMC5mtAttS5tt6RQDA+NmxixEtmF0FtaLQywGBsZxjFc58oNlstD9a8LAwLiBMasJtmWAImVWbhNrDAYGxmMZs63hPvWfhPIo0YaBgXENIw98+wJkccLOW8cwMDAw4vasWcCdHZK/JeBiYGAcysiPpslzhsEdAwPjAkabUNu3ZcyQGBgYdzJWnRpvKi3k4XVVyMTAwHge4xdxlBkGak7SLwAAAABJRU5ErkJggg==" alt="å¾®ä¿¡åˆ†äº«äºŒç»´ç ">
</div>


    
    <!-- main-js -->
<script type="text/javascript" src="/js/jquery/2.1.0-jquery.min.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/plugins/fastclick.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/plugins/ios-orientationchange-fix.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/jquery/3.5.2-jquery.fancybox.min.js?v=1.6.6"></script>
<!--  //cdn.bootcss.com/node-waves/0.7.4/waves.min.js -->
<script type="text/javascript" src="/js/node-waves/0.7.4-waves.min.js?v=1.6.6"></script> 

<script type="text/javascript" src="/js/method.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/blog.js?v=1.6.6"></script>

<!-- third-party -->
<script type="text/javascript" src="/js/plugins/local_search.js?v=1.6.6"></script>
<script type="text/javascript">
	var search_path = "search.xml";
	if (search_path.length === 0) { search_path = "search.xml";}
	var path = "/" + search_path;
	searchFunc(path, "local-search-input", "local-search-result");
</script> 

<script> (adsbygoogle = window.adsbygoogle || []).push({});</script>    


<!-- <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> --> 


  


<script>
  var _hmt = _hmt || [];
  (function() {
    // ç™¾åº¦ç»Ÿè®¡
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?53923c4b5560739bc0ed61e183be6acf";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();
</script>
 


<!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
            processEscapes: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.staticfile.org/mathjax/2.7.9/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
 
<script>
    (function() {
        var OriginTitile = document.title, titleTime;
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                document.title = 'WeiyiGeek Blog-å”¯ä¸€æå®¢-å…³æ³¨äºç½‘ç»œå®‰å…¨_ç‰©è”ç½‘å®‰å…¨å¼€å‘_ç½‘ç»œå®‰å…¨è¿ç»´-å­¦ä¹ å¿ƒå¾—åˆ†äº«';
                clearTimeout(titleTime);
            } else {
                document.title = '(ã¤ã‚§âŠ‚)å’¦!åˆå¥½äº†!';
                titleTime = setTimeout(function() {
                    document.title = OriginTitile;
                },2000);
            }
        });
    })();
</script>
 

     <script type="text/javascript" src="/js/custom/copytips.js?v=1.6.6"></script> 
<script type="text/javascript">
// ç«™ç‚¹è¿è¡Œæ—¶é—´
var BootDate = new Date("2018/01/01 00:00:00");
function ShowRunTime(id) {
  var NowDate = new Date();
  var RunDateM = parseInt(NowDate - BootDate);
  var RunDays = Math.floor(RunDateM/(24*3600*1000));
  var RunHours = Math.floor(RunDateM%(24*3600*1000)/(3600*1000));
  var RunMinutes = Math.floor(RunDateM%(24*3600*1000)%(3600*1000)/(60*1000));
  var RunSeconds = Math.round(RunDateM%(24*3600*1000)%(3600*1000)%(60*1000)/1000);
  var RunTime = RunDays + " å¤© " + RunHours + " æ—¶ " + RunMinutes + " åˆ† " + RunSeconds + " ç§’";
  document.getElementById(id).innerHTML = "ç½‘ç«™å·²åœ¨é£é›¨ä¸­å‹‰å‹‰å¼ºå¼ºè¿è¡Œäº†ã€ " + RunTime + " ã€‘";
}
setInterval("ShowRunTime('SiteRunTime')", 1000);
</script>
    
  <div id="post-wechat" class="post-wechat" style="position:fixed;top: 360px;bottom: 500px;right: 3%;width: 190px;text-align: center; z-index: 9999">
    <p><b>å…³æ³¨ã€å…¨æ ˆå·¥ç¨‹å¸ˆä¿®ç‚¼æŒ‡å—ã€‘</b></p>
    <img src="/img/wechat-gzh.jpg" class="img-responsive" alt="weiyigeek">
    <p><b>æ¬¢è¿æ·»åŠ ã€ä½œè€…ã€‘å¾®ä¿¡</b></p>
    <img src="/img/wehat.jpg" class="img-responsive" alt="weiyigeek">
  </div>

</body>
</html>