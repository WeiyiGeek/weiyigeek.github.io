{"title":"K9s之K8s集群管理工具实践尝试","slug":"虚拟云容/云容器/Kubernetes/辅助组件/使用K9s工具对K8s集群管理实践尝试","date":"2022-01-01T09:37:47.000Z","updated":"2023-01-31T02:29:10.641Z","url":"2022/1-1-582.html","path":"api/articles/2022/1-1-582.html.json","covers":["https://gitee.com/mirrors/K9s/raw/master/assets/k9s.png","https://img.weiyigeek.top/2021/5/20220120101301.png","https://k9scli.io/assets/screens/pulses.png","https://k9scli.io/assets/screens/xray.png","https://k9scli.io/assets/screens/logs.png","https://k9scli.io/assets/screens/rbac.png","https://img.weiyigeek.top/2021/5/20220120112607.png","https://img.weiyigeek.top/2021/5/20220120112321.png","https://img.weiyigeek.top/2021/5/20220120113029.png","https://img.weiyigeek.top/2021/5/20220120113311.png","https://img.weiyigeek.top/2021/5/20220120115233.png"],"content":"<p>[TOC]</p>\n<a id=\"more\"></a>\n<h2 id=\"0x01-基础简介\"><a href=\"#0x01-基础简介\" class=\"headerlink\" title=\"0x01 基础简介\"></a>0x01 基础简介</h2><p><strong>K9s - Kubernetes CLI To Manage Your Clusters In Style!</strong><br>描述: k9s 是用于管理 Kubernetes 集群的 CLI, K9s 提供了一个终端 UI 来与您的 Kubernetes 集群进行交互。通过封装 kubectl 功能 k9s 持续监视 Kubernetes 的变化并提供后续命令来与您观察到的资源进行交互，直白的说就是k9s可以让开发者快速查看并解决运行 Kubernetes 时的日常问题。</p>\n<p>目前在 Github 上 该项目 star 将近 15k, 还是比较活跃的。</p>\n<p>官网地址: <a href=\"https://k9scli.io/\" target=\"_blank\" rel=\"noopener\">https://k9scli.io/</a></p>\n<figure class=\"image-box\">\n                <img src=\"https://gitee.com/mirrors/K9s/raw/master/assets/k9s.png\" alt=\"k9s-Logo\" title=\"\" class=\"\">\n                <p>k9s-Logo</p>\n            </figure>\n<p><strong>功能特性:</strong></p>\n<ul>\n<li>跟踪在 Kubernetes 集群运行的资源的实时活动</li>\n<li>处理 Kubernetes 标准资源和自定义资源</li>\n<li>跟踪与资源相关联的实时指标，如 pods、容器和节点</li>\n<li>支持定制外观</li>\n<li>支持多资源视图</li>\n<li>支持查看 RBAC 规则</li>\n<li>支持遍历 Kubernetes 资源及其相关资源</li>\n</ul>\n<p><strong>参考来源:</strong><br>Github 项目地址: <a href=\"https://github.com/derailed/k9s\" target=\"_blank\" rel=\"noopener\">https://github.com/derailed/k9s</a><br>Gitee Mirrors 镜像地址: <a href=\"https://gitee.com/mirrors/K9s\" target=\"_blank\" rel=\"noopener\">https://gitee.com/mirrors/K9s</a>  (国内推荐)</p>\n<p><br/></p>\n<h2 id=\"0x02-安装实践\"><a href=\"#0x02-安装实践\" class=\"headerlink\" title=\"0x02 安装实践\"></a>0x02 安装实践</h2><p>K9s 在 Linux、macOS 和 Windows 平台上可用。</p>\n<p><strong>常用安装方式</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 编译后的二进制包</span></span><br><span class=\"line\">https://github.com/derailed/k9s/releases</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># MacOS or LinuxBrew for Linux</span></span><br><span class=\"line\">brew install k9s</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># On Arch Linux</span></span><br><span class=\"line\">pacman -S k9s</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Via Webi for Linux and macOS</span></span><br><span class=\"line\">curl -sS https://webinstall.dev/k9s | bash</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Via Webi for Windows</span></span><br><span class=\"line\">curl.exe -A MS https://webinstall.dev/k9s | powershell</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Running the official Docker image</span></span><br><span class=\"line\">docker run --rm -it -v ~/.kube/config:/root/.kube/config quay.io/derailed/k9s</span><br></pre></td></tr></table></figure></p>\n<p>Tips: 当然您也可以参照官方文档进行从源码构建, K9s 目前使用的是 go v1.14 或更高版本。</p>\n<p><br/></p>\n<h3 id=\"安装流程\"><a href=\"#安装流程\" class=\"headerlink\" title=\"安装流程\"></a>安装流程</h3><p>此外以安装二进制包为例进行实践。<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 1. 利用 wget 命令 -c 短点续传和 -b 后台下载</span></span><br><span class=\"line\">wget -b -c https://github.com/derailed/k9s/releases/download/v0.25.18/k9s_Linux_x86_64.tar.gz</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 2.解压并删除多余文件</span></span><br><span class=\"line\">tar -zxf k9s_linux_x86_64.tar.gz</span><br><span class=\"line\">rm  k9s_linux_x86_64.tar.gz  LICENSE  README.md</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 3.拷贝 kubernetes 控制配置文件到加目录中</span></span><br><span class=\"line\">mkdir -p <span class=\"variable\">$HOME</span>/.kube</span><br><span class=\"line\">sudo cp -i /etc/kubernetes/admin.conf <span class=\"variable\">$HOME</span>/.kube/config</span><br><span class=\"line\">sudo chown $(id -u):$(id -g) <span class=\"variable\">$HOME</span>/.kube/config</span><br><span class=\"line\"><span class=\"built_in\">export</span> KUBECONFIG=/etc/kubernetes/admin.conf</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 4.直接运行即可，如果你对vim操作比较熟悉，那么恭喜你了你很快能上手k9s.</span></span><br><span class=\"line\">/nfsdisk-31/newK8s-Backup/tools<span class=\"comment\"># ./k9s</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 5.退出k9s指令</span></span><br><span class=\"line\">:quit</span><br></pre></td></tr></table></figure></p>\n<figure class=\"image-box\">\n                <img src=\"https://img.weiyigeek.top/2021/5/20220120101301.png\" alt=\"WeiyiGeek.k9s运行截图\" title=\"\" class=\"\">\n                <p>WeiyiGeek.k9s运行截图</p>\n            </figure>\n<p><br></p>\n<h3 id=\"配置示例\"><a href=\"#配置示例\" class=\"headerlink\" title=\"配置示例\"></a>配置示例</h3><ol>\n<li><p>K9s 使用 256 色终端模式。  在 `Nix 系统上，确保相应地设置了 TERM。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">export</span> TERM=xterm-256color</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>为了发出清单编辑命令，请确保您的 EDITOR 环境已设置。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Kubectl edit command will use this env var.</span></span><br><span class=\"line\"><span class=\"built_in\">export</span> EDITOR=my_fav_editor</span><br><span class=\"line\"><span class=\"comment\"># Should your editor deals with streamed vs on disk files differently, also set...</span></span><br><span class=\"line\"><span class=\"built_in\">export</span> K9S_EDITOR=my_fav_editor</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>K9s 更喜欢最近的 kubernetes 版本，即 1.16+。</p>\n</li>\n<li><p>K9s 将其配置保存在 k9s 目录中，位置取决于您的操作系统, 其利用 XDG 加载其各种配置文件。<br>Unix : <code>~/.config/k9s</code><br>Mac : <code>~/Library/Application Support/k9s</code><br>Windows : <code>%LOCALAPPDATA%\\k9s</code></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># $XDG_CONFIG_HOME/k9s/config.yml </span></span><br><span class=\"line\"><span class=\"string\">k9s</span> <span class=\"string\">:</span> </span><br><span class=\"line\">  <span class=\"comment\"># 代表 ui 轮询间隔。 默认 2secs </span></span><br><span class=\"line\">  <span class=\"string\">refreshRate</span> <span class=\"string\">:</span>  <span class=\"number\">2</span> </span><br><span class=\"line\">  <span class=\"comment\"># 与 api-server 的连接丢失后的重试次数。 默认 15。 </span></span><br><span class=\"line\">  <span class=\"string\">maxConnRetry</span> <span class=\"string\">:</span>  <span class=\"number\">5</span> </span><br><span class=\"line\">  <span class=\"comment\"># 启用鼠标支持。 默认 false </span></span><br><span class=\"line\">  <span class=\"string\">enableMouse</span> <span class=\"string\">:</span>  <span class=\"literal\">true</span> </span><br><span class=\"line\">  <span class=\"comment\"># 设置为 true 以隐藏 K9s 标头。 默认 false </span></span><br><span class=\"line\">  <span class=\"string\">headless</span> <span class=\"string\">:</span>  <span class=\"literal\">false</span> </span><br><span class=\"line\">  <span class=\"comment\"># 设置为 true 以隐藏 K9s crumbs。 默认 false </span></span><br><span class=\"line\">  <span class=\"string\">crumbsless</span> <span class=\"string\">:</span>  <span class=\"literal\">false</span> </span><br><span class=\"line\">  <span class=\"comment\"># 指示是否禁用删除/杀死/编辑等修改命令。 默认为 false </span></span><br><span class=\"line\">  <span class=\"string\">readOnly</span> <span class=\"string\">:</span>  <span class=\"literal\">false</span> </span><br><span class=\"line\">  <span class=\"comment\"># 切换图标显示，因为并非所有终端都支持这些字符。 </span></span><br><span class=\"line\">  <span class=\"string\">noIcons</span> <span class=\"string\">:</span>  <span class=\"literal\">false</span> </span><br><span class=\"line\">  <span class=\"comment\"># 日志配置 </span></span><br><span class=\"line\">  <span class=\"string\">logger</span> <span class=\"string\">:</span> </span><br><span class=\"line\">    <span class=\"comment\"># 定义要返回的行数。 Default 100 </span></span><br><span class=\"line\">    <span class=\"string\">tail</span> <span class=\"string\">:</span>  <span class=\"number\">200</span> </span><br><span class=\"line\">    <span class=\"comment\"># 定义视图中允许的日志行总数。 Default 1000 </span></span><br><span class=\"line\">    <span class=\"string\">buffer</span> <span class=\"string\">:</span>  <span class=\"number\">500</span> </span><br><span class=\"line\">    <span class=\"comment\"># 表示以秒为单位在日志时间线中返回多远。 设置为 -1 将显示所有可用的日志。 默认为 5 分钟。 </span></span><br><span class=\"line\">    <span class=\"string\">sinceSeconds</span> <span class=\"string\">:</span>  <span class=\"number\">300</span> </span><br><span class=\"line\">    <span class=\"comment\"># 显示日志时全屏显示。 默认 false </span></span><br><span class=\"line\">    <span class=\"string\">fullScreenLogs</span> <span class=\"string\">:</span>  <span class=\"literal\">false</span> </span><br><span class=\"line\">    <span class=\"comment\"># 切换日志换行。 默认 false </span></span><br><span class=\"line\">    <span class=\"string\">textWrap</span> <span class=\"string\">:</span>  <span class=\"literal\">false</span> </span><br><span class=\"line\">    <span class=\"comment\"># 切换日志行时间戳信息。 默认假 </span></span><br><span class=\"line\">    <span class=\"string\">showTime</span> <span class=\"string\">:</span>  <span class=\"literal\">false</span> </span><br><span class=\"line\">  <span class=\"comment\"># 表示当前的 kube 上下文。 默认为当前上下文 </span></span><br><span class=\"line\">  <span class=\"string\">currentContext</span> <span class=\"string\">:</span>  <span class=\"string\">minikube</span> </span><br><span class=\"line\">  <span class=\"comment\"># 表示当前的 kube 集群。 默认为当前上下文集群 </span></span><br><span class=\"line\">  <span class=\"string\">currentCluster</span> <span class=\"string\">:</span>  <span class=\"string\">minikube</span> </span><br><span class=\"line\">  <span class=\"comment\"># 保留每个集群首选项以获取最喜欢的命名空间和视图。 </span></span><br><span class=\"line\"><span class=\"attr\">  clusters:</span></span><br><span class=\"line\"><span class=\"attr\">    coolio:</span></span><br><span class=\"line\"><span class=\"attr\">      namespace:</span></span><br><span class=\"line\"><span class=\"attr\">        active:</span> <span class=\"string\">coolio</span></span><br><span class=\"line\"><span class=\"attr\">        favorites:</span></span><br><span class=\"line\"><span class=\"bullet\">        -</span> <span class=\"string\">cassandra</span></span><br><span class=\"line\"><span class=\"bullet\">        -</span> <span class=\"string\">default</span></span><br><span class=\"line\"><span class=\"attr\">      view:</span></span><br><span class=\"line\"><span class=\"attr\">        active:</span> <span class=\"string\">po</span></span><br><span class=\"line\"><span class=\"attr\">      featureGates:</span></span><br><span class=\"line\">        <span class=\"comment\"># 切换NodeShell支持</span></span><br><span class=\"line\">        <span class=\"string\">nodeShell</span> <span class=\"string\">:</span>  <span class=\"literal\">false</span> </span><br><span class=\"line\">      <span class=\"comment\"># 启用功能门的 shell pod 自定义 </span></span><br><span class=\"line\">      <span class=\"string\">shellPod</span> <span class=\"string\">:</span> </span><br><span class=\"line\">        <span class=\"comment\"># 要使用的 shell pod 映像。 </span></span><br><span class=\"line\">        <span class=\"string\">image</span> <span class=\"string\">:</span>  <span class=\"string\">killerAdmin</span> </span><br><span class=\"line\">        <span class=\"comment\"># 要启动到 shell pod 的命名空间。 </span></span><br><span class=\"line\">        <span class=\"string\">namespace</span> <span class=\"string\">:</span>  <span class=\"string\">fred</span> </span><br><span class=\"line\">        <span class=\"comment\"># 在 shell pod 上设置的资源限制。 </span></span><br><span class=\"line\">        <span class=\"string\">limits</span> <span class=\"string\">:</span> </span><br><span class=\"line\">          <span class=\"string\">cpu</span> <span class=\"string\">:</span>  <span class=\"number\">100</span><span class=\"string\">m</span> </span><br><span class=\"line\">          <span class=\"string\">memory</span> <span class=\"string\">:</span>  <span class=\"number\">100</span><span class=\"string\">Mi</span> </span><br><span class=\"line\">      <span class=\"comment\"># 启动端口转发时使用的 IP 地址。 </span></span><br><span class=\"line\">      <span class=\"string\">portForwardAddress</span> <span class=\"string\">:</span>  <span class=\"number\">1.2</span><span class=\"number\">.3</span><span class=\"number\">.4</span> </span><br><span class=\"line\">    <span class=\"string\">kind</span> <span class=\"string\">:</span> </span><br><span class=\"line\">      <span class=\"string\">namespace</span> <span class=\"string\">:</span> </span><br><span class=\"line\">        <span class=\"string\">active</span> <span class=\"string\">:</span>  <span class=\"string\">all</span> </span><br><span class=\"line\">        <span class=\"string\">favorites</span> <span class=\"string\">:</span> </span><br><span class=\"line\"><span class=\"bullet\">        -</span>  <span class=\"string\">all</span> </span><br><span class=\"line\"><span class=\"bullet\">        -</span>  <span class=\"string\">kube-system</span> </span><br><span class=\"line\"><span class=\"bullet\">        -</span>  <span class=\"string\">default</span> </span><br><span class=\"line\">      <span class=\"string\">view</span> <span class=\"string\">:</span> </span><br><span class=\"line\">        <span class=\"string\">active</span> <span class=\"string\">:</span>  <span class=\"string\">dp</span> </span><br><span class=\"line\">  <span class=\"comment\"># 屏幕转储的路径。 默认值：'%temp_dir%/k9s-screens-%username%'（k9s 信息） </span></span><br><span class=\"line\">  <span class=\"string\">screenDumpDir</span> <span class=\"string\">：</span>  <span class=\"string\">/tmp</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Node Shell 配置,通过在给定集群上启用 nodeShell 功能门，K9s 允许您在集群节点中进行 shell。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># $XDG_CONFIG_HOME/k9s/config.yml</span></span><br><span class=\"line\">k9s:</span><br><span class=\"line\">  clusters:</span><br><span class=\"line\">    <span class=\"comment\"># Configures node shell on cluster blee</span></span><br><span class=\"line\">    blee:</span><br><span class=\"line\">      featureGates:</span><br><span class=\"line\">        <span class=\"comment\"># You must enable the nodeShell feature gate to enable shelling into nodes</span></span><br><span class=\"line\">        nodeShell: <span class=\"literal\">true</span></span><br><span class=\"line\">      <span class=\"comment\"># You can also further tune the shell pod specification</span></span><br><span class=\"line\">      shellPod:</span><br><span class=\"line\">        image: cool_kid_admin:42</span><br><span class=\"line\">        namespace: blee</span><br><span class=\"line\">        limits:</span><br><span class=\"line\">          cpu: 100m</span><br><span class=\"line\">          memory: 100Mi</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>HotKey Support 设置: 允许用户定义自己的热键来激活他们最喜欢的资源视图。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># $XDG_CONFIG_HOME/k9s/hotkey.yml</span></span><br><span class=\"line\">cat &lt;&lt;<span class=\"string\">'EOF'</span> &gt; ~/.config/k9s/hotkey.yml</span><br><span class=\"line\">hotKey:</span><br><span class=\"line\">  <span class=\"comment\"># Hitting Shift-0 navigates to your pod view</span></span><br><span class=\"line\">  <span class=\"built_in\">shift</span>-0:</span><br><span class=\"line\">    shortCut:    Shift-0</span><br><span class=\"line\">    description: Viewing pods</span><br><span class=\"line\">    <span class=\"built_in\">command</span>:     pods</span><br><span class=\"line\">  <span class=\"comment\"># Hitting Shift-1 navigates to your deployments</span></span><br><span class=\"line\">  <span class=\"built_in\">shift</span>-1:</span><br><span class=\"line\">    shortCut:    Shift-1</span><br><span class=\"line\">    description: View deployments</span><br><span class=\"line\">    <span class=\"built_in\">command</span>:     dp</span><br><span class=\"line\">EOF</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Command Aliases 设置: 命令别名设置。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 使用此别名文件，您现在可以键入 pp/crb 以分别列出 pod 或 ClusterRoleBindings。</span></span><br><span class=\"line\"><span class=\"comment\"># $XDG_CONFIG_HOME/k9s/alias.yml</span></span><br><span class=\"line\">cat &lt;&lt;<span class=\"string\">'EOF'</span> &gt; ~/.config/k9s/alias.yml</span><br><span class=\"line\"><span class=\"built_in\">alias</span>:</span><br><span class=\"line\">  pp: v1/pods</span><br><span class=\"line\">  crb: rbac.authorization.k8s.io/v1/clusterrolebindings</span><br><span class=\"line\">EOF</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>FastForwards: 从 v0.25.0 开始，您可以利用 FastForwards 功能告诉 K9s 如何默认端口转发.</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 您现在可以使用以下注释来注释您的清单：</span></span><br><span class=\"line\">k9scli.io/auto-portforwards -&gt; 激活一个或多个端口转发，直接绕过端口转发对话框。</span><br><span class=\"line\">k9scli.io/portforwards -&gt; 在启动端口转发对话框时预先选择一个或多个端口转发。</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 例如:</span></span><br><span class=\"line\"><span class=\"comment\"># Pod fred</span></span><br><span class=\"line\">apiVersion: v1</span><br><span class=\"line\">kind: Pod</span><br><span class=\"line\">metadata:</span><br><span class=\"line\">  name: fred</span><br><span class=\"line\">  annotations:</span><br><span class=\"line\">    k9scli.io/auto-portforwards: zorg::5556  <span class=\"comment\"># =&gt; 将默认为 zorg 容器端口5556和本地端口5566</span></span><br><span class=\"line\">    <span class=\"comment\"># Or...</span></span><br><span class=\"line\">    k9scli.io/portforward: bozo::9090:p1  <span class=\"comment\"># =&gt; 启动“端口转发”对话框，选择为 bozo 容器中的p1（8081）映射到本地端口9090</span></span><br><span class=\"line\">    ...</span><br><span class=\"line\">spec:</span><br><span class=\"line\">  containers:</span><br><span class=\"line\">  - name: zorg</span><br><span class=\"line\">    ports:</span><br><span class=\"line\">    - name: p1</span><br><span class=\"line\">      containerPort: 5556</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  - name: bozo</span><br><span class=\"line\">    ports:</span><br><span class=\"line\">    - name: p1</span><br><span class=\"line\">      containerPort: 8081</span><br><span class=\"line\">    - name: p2</span><br><span class=\"line\">      containerPort: 5555</span><br><span class=\"line\">    ...</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<ol start=\"9\">\n<li>Resource Custom Columns：自定义显示的资源列，您可以通过自定义视图更改为给定资源显示哪些列。<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># $XDG_CONFIG_HOME/k9s/views.yml</span></span><br><span class=\"line\">cat &lt;&lt;<span class=\"string\">'EOF'</span> &gt; ~/.config/k9s/views.yml</span><br><span class=\"line\">k9s:</span><br><span class=\"line\">  views:</span><br><span class=\"line\">    v1/pods:</span><br><span class=\"line\">      columns:</span><br><span class=\"line\">        - AGE</span><br><span class=\"line\">        - NAMESPACE</span><br><span class=\"line\">        - NAME</span><br><span class=\"line\">        - IP</span><br><span class=\"line\">        - NODE</span><br><span class=\"line\">        - STATUS</span><br><span class=\"line\">        - READY</span><br><span class=\"line\">    v1/services:</span><br><span class=\"line\">      columns:</span><br><span class=\"line\">        - AGE</span><br><span class=\"line\">        - NAMESPACE</span><br><span class=\"line\">        - NAME</span><br><span class=\"line\">        - TYPE</span><br><span class=\"line\">        - CLUSTER-IP</span><br><span class=\"line\">EOF</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<ol start=\"10\">\n<li>plugin : K9s 允许您通过插件定义您自己的集群命令来扩展您的命令行和工具。<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># k9s目前提供了额外的环境变量来自定义您的插件参数，可用的环境变量如下：</span></span><br><span class=\"line\"><span class=\"variable\">$RESOURCE_GROUP</span>-- 选定的资源组</span><br><span class=\"line\"><span class=\"variable\">$RESOURCE_VERSION</span>-- 选择的资源api版本</span><br><span class=\"line\"><span class=\"variable\">$RESOURCE_NAME</span>-- 选择的资源名称</span><br><span class=\"line\"><span class=\"variable\">$NAMESPACE</span>-- 选择的资源命名空间</span><br><span class=\"line\"><span class=\"variable\">$NAME</span>-- 选择的资源名称</span><br><span class=\"line\"><span class=\"variable\">$CONTAINER</span>-- 当前容器（如果适用）</span><br><span class=\"line\"><span class=\"variable\">$FILTER</span>-- 当前过滤器（如果有）</span><br><span class=\"line\"><span class=\"variable\">$KUBECONFIG</span>-- KubeConfig 位置。</span><br><span class=\"line\"><span class=\"variable\">$CLUSTER</span> --  活动集群名称</span><br><span class=\"line\"><span class=\"variable\">$CONTEXT</span> --  活动上下文名称</span><br><span class=\"line\"><span class=\"variable\">$USER</span> --  活跃用户</span><br><span class=\"line\"><span class=\"variable\">$GROUPS</span> --  活跃的群体</span><br><span class=\"line\"><span class=\"variable\">$POD</span> --  在容器视图中</span><br><span class=\"line\"><span class=\"variable\">$COL</span>-&lt;RESOURCE_COLUMN_NAME&gt; -- 为查看的资源使用给定的列名。 必须以 COL-!</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 例如, 此处定义了一个插件实现 `ctrl-l` 快捷方式来在 pod 视图中跟踪日志。</span></span><br><span class=\"line\"><span class=\"comment\"># $XDG_CONFIG_HOME/k9s/plugin.yml</span></span><br><span class=\"line\">cat &lt;&lt;<span class=\"string\">'EOF'</span> &gt; ~/.config/k9s/plugin.yml</span><br><span class=\"line\">plugin:</span><br><span class=\"line\">  fred:</span><br><span class=\"line\">    shortCut: Ctrl-L</span><br><span class=\"line\">    confirm: <span class=\"literal\">false</span></span><br><span class=\"line\">    description: Pod logs</span><br><span class=\"line\">    scopes:</span><br><span class=\"line\">    - pods</span><br><span class=\"line\">    <span class=\"built_in\">command</span>: kubectl</span><br><span class=\"line\">    background: <span class=\"literal\">false</span></span><br><span class=\"line\">    args:</span><br><span class=\"line\">    - logs</span><br><span class=\"line\">    - -f</span><br><span class=\"line\">    - <span class=\"variable\">$NAME</span></span><br><span class=\"line\">    - -n</span><br><span class=\"line\">    - <span class=\"variable\">$NAMESPACE</span></span><br><span class=\"line\">    - --context</span><br><span class=\"line\">    - <span class=\"variable\">$CONTEXT</span></span><br><span class=\"line\">EOF</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<ul>\n<li>11.Skins : 您可以根据自己的外观和风格来设计 K9s。<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># $XDG_CONFIG_HOME/k9s/skin.yml</span></span><br><span class=\"line\">cat &lt;&lt;<span class=\"string\">'EOF'</span> &gt; ~/.config/k9s/skin.yml</span><br><span class=\"line\"><span class=\"comment\"># Skin InTheNavy...</span></span><br><span class=\"line\">k9s:</span><br><span class=\"line\">  <span class=\"comment\"># General K9s styles</span></span><br><span class=\"line\">  body:</span><br><span class=\"line\">    fgColor: dodgerblue</span><br><span class=\"line\">    bgColor: <span class=\"string\">'#ffffff'</span></span><br><span class=\"line\">    logoColor: <span class=\"string\">'#0000ff'</span></span><br><span class=\"line\">  <span class=\"comment\"># ClusterInfoView styles.</span></span><br><span class=\"line\">  info:</span><br><span class=\"line\">    fgColor: lightskyblue</span><br><span class=\"line\">    sectionColor: steelblue</span><br><span class=\"line\">  <span class=\"comment\"># Help panel styles</span></span><br><span class=\"line\">  <span class=\"built_in\">help</span>:</span><br><span class=\"line\">    fgColor: white</span><br><span class=\"line\">    bgColor: black</span><br><span class=\"line\">    keyColor: cyan</span><br><span class=\"line\">    numKeyColor: blue</span><br><span class=\"line\">    sectionColor: gray</span><br><span class=\"line\">  frame:</span><br><span class=\"line\">    <span class=\"comment\"># Borders styles.</span></span><br><span class=\"line\">    border:</span><br><span class=\"line\">      fgColor: dodgerblue</span><br><span class=\"line\">      focusColor: aliceblue</span><br><span class=\"line\">    <span class=\"comment\"># MenuView attributes and styles.</span></span><br><span class=\"line\">    menu:</span><br><span class=\"line\">      fgColor: darkblue</span><br><span class=\"line\">      keyColor: cornflowerblue</span><br><span class=\"line\">      <span class=\"comment\"># Used for favorite namespaces</span></span><br><span class=\"line\">      numKeyColor: cadetblue</span><br><span class=\"line\">    <span class=\"comment\"># CrumbView attributes for history navigation.</span></span><br><span class=\"line\">    crumbs:</span><br><span class=\"line\">      fgColor: white</span><br><span class=\"line\">      bgColor: steelblue</span><br><span class=\"line\">      activeColor: skyblue</span><br><span class=\"line\">    <span class=\"comment\"># Resource status and update styles</span></span><br><span class=\"line\">    status:</span><br><span class=\"line\">      newColor: <span class=\"string\">'#00ff00'</span></span><br><span class=\"line\">      modifyColor: powderblue</span><br><span class=\"line\">      addColor: lightskyblue</span><br><span class=\"line\">      errorColor: indianred</span><br><span class=\"line\">      highlightcolor: royalblue</span><br><span class=\"line\">      killColor: slategray</span><br><span class=\"line\">      completedColor: gray</span><br><span class=\"line\">    <span class=\"comment\"># Border title styles.</span></span><br><span class=\"line\">    title:</span><br><span class=\"line\">      fgColor: aqua</span><br><span class=\"line\">      bgColor: white</span><br><span class=\"line\">      highlightColor: skyblue</span><br><span class=\"line\">      counterColor: slateblue</span><br><span class=\"line\">      filterColor: slategray</span><br><span class=\"line\">  views:</span><br><span class=\"line\">    <span class=\"comment\"># TableView attributes.</span></span><br><span class=\"line\">    table:</span><br><span class=\"line\">      fgColor: blue</span><br><span class=\"line\">      bgColor: darkblue</span><br><span class=\"line\">      cursorColor: aqua</span><br><span class=\"line\">      <span class=\"comment\"># Header row styles.</span></span><br><span class=\"line\">      header:</span><br><span class=\"line\">        fgColor: white</span><br><span class=\"line\">        bgColor: darkblue</span><br><span class=\"line\">        sorterColor: orange</span><br><span class=\"line\">    <span class=\"comment\"># YAML info styles.</span></span><br><span class=\"line\">    yaml:</span><br><span class=\"line\">      keyColor: steelblue</span><br><span class=\"line\">      colonColor: blue</span><br><span class=\"line\">      valueColor: royalblue</span><br><span class=\"line\">    <span class=\"comment\"># Logs styles.</span></span><br><span class=\"line\">    logs:</span><br><span class=\"line\">      fgColor: white</span><br><span class=\"line\">      bgColor: black</span><br><span class=\"line\">EOF</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><br/></p>\n<h2 id=\"0x02-命令实践\"><a href=\"#0x02-命令实践\" class=\"headerlink\" title=\"0x02 命令实践\"></a>0x02 命令实践</h2><h3 id=\"命令参数\"><a href=\"#命令参数\" class=\"headerlink\" title=\"命令参数\"></a>命令参数</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># List all available CLI options</span></span><br><span class=\"line\">k9s <span class=\"built_in\">help</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># To get info about K9s runtime (logs, configs, etc..)</span></span><br><span class=\"line\">k9s info</span><br><span class=\"line\">  <span class=\"comment\"># Configuration:   /root/.config/k9s/config.yml</span></span><br><span class=\"line\">  <span class=\"comment\"># Logs:            /tmp/k9s-root.log</span></span><br><span class=\"line\">  <span class=\"comment\"># Screen Dumps:    /tmp/k9s-screens-root</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># To run K9s in a given namespace</span></span><br><span class=\"line\">k9s -n mycoolns</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Start K9s in an existing KubeConfig context</span></span><br><span class=\"line\">k9s --context coolCtx</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Start K9s in readonly mode - with all cluster modification commands disabled</span></span><br><span class=\"line\">k9s --<span class=\"built_in\">readonly</span></span><br></pre></td></tr></table></figure>\n<p><br/></p>\n<h3 id=\"简单使用\"><a href=\"#简单使用\" class=\"headerlink\" title=\"简单使用\"></a>简单使用</h3><p><strong>使用截图</strong></p>\n<ul>\n<li><p>Pulses - A top level dashboard of the state of affairs of your cluster</p>\n<figure class=\"image-box\">\n                <img src=\"https://k9scli.io/assets/screens/pulses.png\" alt=\"Pulses\" title=\"\" class=\"\">\n                <p>Pulses</p>\n            </figure>\n</li>\n<li><p>XRay - Dig in your cluster resources and view their dependencies </p>\n<figure class=\"image-box\">\n                <img src=\"https://k9scli.io/assets/screens/xray.png\" alt=\"XRay\" title=\"\" class=\"\">\n                <p>XRay</p>\n            </figure>\n</li>\n<li><p>Pods - List out your pods status and resource consumption </p>\n<figure class=\"image-box\">\n                <img src=\"https://k9scli.io/assets/screens/logs.png\" alt=\"Pods\" title=\"\" class=\"\">\n                <p>Pods</p>\n            </figure>\n</li>\n<li><p>RBAC  - View the who/what/how of authorizations on your cluster</p>\n<figure class=\"image-box\">\n                <img src=\"https://k9scli.io/assets/screens/rbac.png\" alt=\"RBAC\" title=\"\" class=\"\">\n                <p>RBAC</p>\n            </figure>\n</li>\n</ul>\n<p><strong>实践使用</strong></p>\n<ul>\n<li>0.查看Pod资源配置清单,按键流程<code>:</code> -&gt; <code>pods</code> -&gt; <code>y</code>.(返回上一步是按ESC按键)</li>\n</ul>\n<figure class=\"image-box\">\n                <img src=\"https://img.weiyigeek.top/2021/5/20220120112607.png\" alt=\"WeiyiGeek.Pod资源配置清单\" title=\"\" class=\"\">\n                <p>WeiyiGeek.Pod资源配置清单</p>\n            </figure>\n<ul>\n<li>1.进入指定pod的shell终端中,按键流程<code>:</code> -&gt; <code>pods</code> -&gt; <code>s</code>.</li>\n</ul>\n<figure class=\"image-box\">\n                <img src=\"https://img.weiyigeek.top/2021/5/20220120112321.png\" alt=\"WeiyiGeek.进入pod的shell\" title=\"\" class=\"\">\n                <p>WeiyiGeek.进入pod的shell</p>\n            </figure>\n<ul>\n<li>2.指定pod进行容器内部端口转发,按键流程<code>:</code> -&gt; <code>pods</code> -&gt; <code>&lt;shift-f&gt;</code>, 输入容器内部名称::端口, 然后在输入映射到本地的端口，如果要查看端口转发配置，按键流程<code>:</code> -&gt; <code>pods</code>  -&gt; <code>f</code> 即可查看。</li>\n</ul>\n<figure class=\"image-box\">\n                <img src=\"https://img.weiyigeek.top/2021/5/20220120113029.png\" alt=\"WeiyiGeek.内部端口转发\" title=\"\" class=\"\">\n                <p>WeiyiGeek.内部端口转发</p>\n            </figure>\n<ul>\n<li><p>3.pod 日志查看,按键流程<code>:</code> -&gt; <code>pods</code>  -&gt; <code>l</code>。</p>\n</li>\n<li><p>4.namespace 查看,按键流程<code>:</code> -&gt; <code>ns</code>  -&gt; <code>l</code>。</p>\n</li>\n<li><p>5.svc 查看,按键流程<code>:</code> -&gt; <code>svc</code>  -&gt; <code>l</code>。</p>\n</li>\n</ul>\n<figure class=\"image-box\">\n                <img src=\"https://img.weiyigeek.top/2021/5/20220120113311.png\" alt=\"WeiyiGeek.svc服务查看\" title=\"\" class=\"\">\n                <p>WeiyiGeek.svc服务查看</p>\n            </figure>\n<ul>\n<li><p>6.我们创建一个新的pod并采用k9s进行管理编辑, 按键流程<code>:</code> -&gt; <code>pods</code> -&gt; <code>e</code> 然后进行编辑该Pod资源清单,使用vim作为默认编辑器进行编辑，完成后输入:wq保存并退出。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">~$ kubectl run myweb --image=nginx:latest --labels=<span class=\"string\">\"app=web\"</span> --port=8080</span><br><span class=\"line\">pod/myweb created</span><br><span class=\"line\">~$ k9s</span><br><span class=\"line\">spec:</span><br><span class=\"line\">  containers:</span><br><span class=\"line\">  - image: nginx:latest</span><br><span class=\"line\">    imagePullPolicy: Always</span><br><span class=\"line\">    name: myweb</span><br><span class=\"line\">    ports:</span><br><span class=\"line\">    - containerPort: 80   <span class=\"comment\"># 此处将 8080 端口改成 80</span></span><br><span class=\"line\">      protocol: TCP</span><br><span class=\"line\">    resources: &#123;&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>7.deployments/statefulset/pod删除操作: ,按键流程<code>:</code> -&gt; <code>pod|deploy|state</code>  -&gt; <code>ctrl+d</code>。</p>\n</li>\n<li><p>8.查看集群中RBAC角色绑定信息,按键流程<code>:</code> -&gt; <code>rbac</code>  -&gt; <code>e</code> 编辑。</p>\n</li>\n</ul>\n<figure class=\"image-box\">\n                <img src=\"https://img.weiyigeek.top/2021/5/20220120115233.png\" alt=\"WeiyiGeek.RBAC-Clusterrolebindings\" title=\"\" class=\"\">\n                <p>WeiyiGeek.RBAC-Clusterrolebindings</p>\n            </figure>","comments":true,"excerpt":"[TOC]","categories":[{"name":"kubernetes","path":"api/categories/kubernetes.json"},{"name":"Containers","path":"api/categories/Containers.json"},{"name":"OperationTools","path":"api/categories/OperationTools.json"}],"tags":[{"name":"k8s","path":"api/tags/k8s.json"},{"name":"k9s","path":"api/tags/k9s.json"}]}