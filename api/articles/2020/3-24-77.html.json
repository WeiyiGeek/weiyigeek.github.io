{"title":"MsSQL2008R2安装基础流程笔记","slug":"数据存储/Database-运维/MsSQL/MsSQL2008R2安装基础流程笔记","date":"2020-03-24T06:34:30.000Z","updated":"2023-01-31T02:29:09.162Z","url":"2020/3-24-77.html","path":"api/articles/2020/3-24-77.html.json","covers":["https://img.weiyigeek.top/2021/1/20210119171005.png","https://img.weiyigeek.top/2021/1/20210120100328.png","https://img.weiyigeek.top/2021/1/20210120100708.png","https://img.weiyigeek.top/2021/1/20210120101041.png","https://img.weiyigeek.top/2021/1/20210120102551.png","https://img.weiyigeek.top/2021/1/20210120103057.png","https://img.weiyigeek.top/2021/1/20210120103623.png","https://img.weiyigeek.top/2021/1/20210120104441.png","https://img.weiyigeek.top/2021/1/20210120105033.png","https://img.weiyigeek.top/2021/1/20210120095002.png","https://img-blog.csdn.net/20170330104951095?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZGF2aWRfNTIwMDQy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast"],"content":"<p>[TOC]</p>\n<a id=\"more\"></a>\n<h2 id=\"0x00-前言简述\"><a href=\"#0x00-前言简述\" class=\"headerlink\" title=\"0x00 前言简述\"></a>0x00 前言简述</h2><h3 id=\"1-硬件和软件要求\"><a href=\"#1-硬件和软件要求\" class=\"headerlink\" title=\"(1) 硬件和软件要求\"></a>(1) 硬件和软件要求</h3><p>SQL Server 2008 R2的硬件和软件要求:</p>\n<ul>\n<li>系统要求:建议在Windows Server 2008或Windows 7及以上在<code>Server 2012 R2</code>版本以下</li>\n<li>磁盘分区:建议采用NTFS文件格式</li>\n<li>开发工具包:.NET Framework 3.5</li>\n<li>系统位数: 建议X64</li>\n<li>内存: 最小:1 GB / 推荐 4 GB或更多 (此处以标准版64位为例最大支持64 GB)</li>\n</ul>\n<p>SQL Server 2008 R2的核心服务器版本说明:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">* SQL Server 2008 R2数据中心（64位）IA64</span><br><span class=\"line\">* SQL Server 2008 R2企业版（64位）IA64</span><br><span class=\"line\">* SQL Server 2008 R2数据中心（64位）x64</span><br><span class=\"line\">* SQL Server 2008 R2 Enterprise（64位）x64</span><br><span class=\"line\">* SQL Server 2008 R2标准版（64位）x64</span><br><span class=\"line\">* SQL Server 2008 R2数据中心（32位）</span><br><span class=\"line\">* SQL Server 2008 R2 Enterprise（32位）</span><br><span class=\"line\">* SQL Server 2008 R2标准版（32位）</span><br></pre></td></tr></table></figure></p>\n<p>Microsoft SQL Server 2008 R2 序列号试用密钥:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">* 开发版32位：MC46H-JQR3C-2JRHY-XYRKY-QWPVM</span><br><span class=\"line\">* 开发版64位：FTMGC-B2J97-PJ4QG-V84YB-MTXX8</span><br><span class=\"line\">* 工组版：XQ4CB-VK9P3-4WYYH-4HQX3-K2R6Q</span><br><span class=\"line\">* WEB版：FP4P7-YKG22-WGRVK-MKGMX-V9MTM</span><br><span class=\"line\">* 数据中心版32位：PTTFM-X467G-P7RH2-3Q6CG-4DMYB</span><br><span class=\"line\">* 数据中心版64位：DDT3B-8W62X-P9JD6-8MX7M-HWK38</span><br><span class=\"line\">* 企业版32位：R88PF-GMCFT-KM2KR-4R7GB-43K4B</span><br><span class=\"line\">* 企业版64位：GYF3T-H2V88-GRPPH-HWRJP-QRTYB </span><br><span class=\"line\">* 标准版32位：CXTFT-74V4Y-9D48T-2DMFW-TX7CY</span><br><span class=\"line\">* 标准版64位：B68Q6-KK2R7-89WGB-6Q9KR-QHFDW</span><br><span class=\"line\">* Enterprise : JD8Y6-HQG69-P9H84-XDTPG-34MBB</span><br></pre></td></tr></table></figure></p>\n<p>Tips: 操作系统安装的SQL Server版本的最低要求((注意根据实际操作 <code>Server 2019 / 2016</code> 是支持 <code>SQL Server 2008 R2</code>))</p>\n<figure class=\"image-box\">\n                <img src=\"https://img.weiyigeek.top/2021/1/20210119171005.png\" alt=\"WeiyiGeek.SQL Server版本的最低要求\" title=\"\" class=\"\">\n                <p>WeiyiGeek.SQL Server版本的最低要求</p>\n            </figure>\n<p>参考地址: <a href=\"https://docs.microsoft.com/en-us/troubleshoot/sql/general/sql-server-windows-8-later-versions\" target=\"_blank\" rel=\"noopener\">https://docs.microsoft.com/en-us/troubleshoot/sql/general/sql-server-windows-8-later-versions</a></p>\n<p><br></p>\n<h2 id=\"0x01-SQL-Server-2008-R2-安装\"><a href=\"#0x01-SQL-Server-2008-R2-安装\" class=\"headerlink\" title=\"0x01 SQL Server 2008 R2 安装\"></a>0x01 SQL Server 2008 R2 安装</h2><h3 id=\"1-基于-Server-2019-安装\"><a href=\"#1-基于-Server-2019-安装\" class=\"headerlink\" title=\"(1) 基于 Server 2019 安装\"></a>(1) 基于 Server 2019 安装</h3><p>环境说明:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">系统镜像：cn_windows_server_2019_updated_march_2019_x64_dvd_c1ffb46c.iso</span><br><span class=\"line\">数据库版本: sqlserver2008r2_enterprise_x86_x64.iso</span><br><span class=\"line\">操作系统配置:</span><br><span class=\"line\">  <span class=\"comment\"># OS 名称:     Microsoft Windows Server 2019 Standard</span></span><br><span class=\"line\">  <span class=\"comment\"># OS 版本:     10.0.17763 暂缺 Build 17763</span></span><br><span class=\"line\">  <span class=\"comment\"># 系统类型:    x64-based PC</span></span><br><span class=\"line\">  <span class=\"comment\"># 处理器:      安装了 8 个处理器。</span></span><br><span class=\"line\">  <span class=\"comment\">#             [01~08]: Intel64 Family 6 Model 85 Stepping 7 GenuineIntel ~2095 Mhz</span></span><br><span class=\"line\">  <span class=\"comment\"># 物理内存总量:     16,383 MB</span></span><br><span class=\"line\">  <span class=\"comment\"># 可用的物理内存:   13,209 MB</span></span><br><span class=\"line\">  <span class=\"comment\"># 虚拟内存: 最大值: 18,815 MB</span></span><br><span class=\"line\">  <span class=\"comment\"># 虚拟内存: 可用:   15,785 MB</span></span><br><span class=\"line\">  <span class=\"comment\"># 虚拟内存: 使用中: 3,030 MB</span></span><br><span class=\"line\">  <span class=\"comment\"># 页面文件位置:     C:\\pagefile.sys</span></span><br></pre></td></tr></table></figure></p>\n<p><strong>操作流程:</strong></p>\n<ul>\n<li><p>Step 1.装载<code>sqlserver2008r2_enterprise_x86_x64</code>镜像到系统并打开Setup.exe应用程序;</p>\n</li>\n<li><p>Step 2.点击<code>全新安装或者向现有的安装添加新功能</code>-&gt; 然后将会对安装程序进行依赖查询满足规则后方可继续;</p>\n</li>\n</ul>\n<figure class=\"image-box\">\n                <img src=\"https://img.weiyigeek.top/2021/1/20210120100328.png\" alt=\"WeiyiGeek.依赖验证\" title=\"\" class=\"\">\n                <p>WeiyiGeek.依赖验证</p>\n            </figure>\n<ul>\n<li>Step 3.输入试用的产品密钥-&gt;此次输入的是企业版64位：<code>GYF3T-H2V88-GRPPH-HWRJP-QRTYB</code>-&gt; 点击下一步许可条款 -&gt; 并且再次进行安装程序支持规则检测;</li>\n</ul>\n<figure class=\"image-box\">\n                <img src=\"https://img.weiyigeek.top/2021/1/20210120100708.png\" alt=\"WeiyiGeek.安装许可\" title=\"\" class=\"\">\n                <p>WeiyiGeek.安装许可</p>\n            </figure>\n<ul>\n<li>Step 4.在功能设置角色中选择<code>SQL Server 功能安装</code> -&gt; 实例配置(一般默认实例名称 <code>MSSQLSERVER</code>) -&gt; 建议将实例目录放在非根目录之下 <code>D:\\Program Files\\Microsoft SQL Server\\</code>;</li>\n</ul>\n<figure class=\"image-box\">\n                <img src=\"https://img.weiyigeek.top/2021/1/20210120101041.png\" alt=\"WeiyiGeek.功能安装和实例配置\" title=\"\" class=\"\">\n                <p>WeiyiGeek.功能安装和实例配置</p>\n            </figure>\n<ul>\n<li>Step 5.之后检测磁盘空间要求显示出各个磁盘以及 MsSQL 安装所占大小 -&gt; 设置服务账户（建议使用单独用户而是是SYSTEM用户） -&gt; 排序规则 (Chinese_PRC_CI_AS-根据具体而定)</li>\n</ul>\n<figure class=\"image-box\">\n                <img src=\"https://img.weiyigeek.top/2021/1/20210120102551.png\" alt=\"WeiyiGeek.服务账户&排序规则\" title=\"\" class=\"\">\n                <p>WeiyiGeek.服务账户&排序规则</p>\n            </figure>\n<p>Tips 补充: SQL Server中的每个服务代表一个进程或一组进程，每个进程需要有访问SQL Server相关文件（<code>如.mdf、.ndf 和 .ldf 等文件</code>）或注册表或者SQL Server安装目录的权限; Server的服务账户，用以启动并获取需要访问操作系统文件的权限;</p>\n<ul>\n<li>1.SQL Server 2008中服务帐户类型分为不具有 Windows 管理员权限的“内置系统帐户”和“域用户帐户”;<ul>\n<li>1.1 “内置系统帐户”又细分成三类“本地系统帐户”、“网络服务帐户”以及“本地服务帐户”。<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- Local System : 即实际名称为<span class=\"string\">\"NT AUTHORITY\\SYSTEM\"</span>, 是一个`具有高特权的内置帐户`, 该账号没有用户名和密码之类的凭证，如果机器处于域中时则运行在 Local System 账户下的服务还可以使用机器账户在同一个森林（Tree）中得到其他机器的自动认证,而且它能够使用空会话 (null session) 去访问网络资源;</span><br><span class=\"line\"></span><br><span class=\"line\">- Network Service : 实际名称为<span class=\"string\">\"NT AUTHORITY\\NETWORK SERVICE\"</span>, 它比 Users 组的成员拥有更多的对资源和对象的访问权限, 它可以使用计算机帐户的凭据访问网络资源;</span><br><span class=\"line\"></span><br><span class=\"line\">- Local  Service : 实际名称为<span class=\"string\">\"NT AUTHORITY\\LOCAL SERVICE\"</span>, 账户是预设的拥有最小权限的本地账户与 Users 组的成员具有相同级别的资源和对象访问权限，该账户下的进程只能以没有凭据的空会话形式访问的网络资源。`如果有个别服务或进程的安全受到威胁，则此有限访问权限有助于保护系统的安全`。</span><br></pre></td></tr></table></figure></li>\n<li>1.2 域用户帐户是一个使用 Windows 身份验证的域用户帐户以设置并连接到 SQL Server (<code>建议使用最低权限的域用户帐户</code>),因为 SQL Server 服务不需要管理员帐户特权;<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">如果服务必须与网络服务进行交互，则访问类似于文件共享的域资源；</span><br><span class=\"line\">如果服务使用到运行 SQL Server 的其他计算机的链接服务器连接，则可以使用具有最低特权的域帐户。</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<p>总结:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">NT Authority\\System : 系统内置账号，对本地系统拥有完全控制权限；在工作组模式下，该账户不能网络资源；通常用于服务的运行，不需要密码。</span><br><span class=\"line\">NT Authority\\Network Service : 系统内置账号，比 SYSTEM 账户权限要小，可以访问有限的本地系统资源；在工作组模式下，该账户能够以计算机的凭据来访问网络资源，默认为远程服务器的 EVERYONE 和 AUTH</span><br></pre></td></tr></table></figure></p>\n<ul>\n<li>Step 6.进行数据库账号设置 -&gt; 选择混合模式认证 -&gt; 设置数据目录存放路径<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Sa 用户密码设置</span></span><br><span class=\"line\">sa weiyigeek.pass<span class=\"comment\">#word</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 登陆用户管理员添加 </span></span><br><span class=\"line\">PS C:\\Users\\Administrator&gt; net user mssqladmin weiyigeekpassword /add</span><br><span class=\"line\">命令成功完成。</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<figure class=\"image-box\">\n                <img src=\"https://img.weiyigeek.top/2021/1/20210120103057.png\" alt=\"WeiyiGeek.管理员账户与数据根目录\" title=\"\" class=\"\">\n                <p>WeiyiGeek.管理员账户与数据根目录</p>\n            </figure>\n<ul>\n<li><p>Step 7.再次进行安装配置规则检查 -&gt; 安装配置文件路径 <code>C:\\Program Files\\Microsoft SQL Server\\100\\Setup Bootstrap\\Log\\20210119_223329\\ConfigurationFile.ini</code><br>内容如下:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">;SQLSERVER2008 Configuration File</span><br><span class=\"line\">[SQLSERVER2008]</span><br><span class=\"line\"></span><br><span class=\"line\">; 为您已指定的 SQL Server 功能指定实例 ID。SQL Server 目录结构、注册表结构和服务名称将反映 SQL Server 实例的实例 ID。 </span><br><span class=\"line\"></span><br><span class=\"line\">INSTANCEID&#x3D;&quot;MSSQLSERVER&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">; 指定安装程序的工作流，如 INSTALL、UNINSTALL 或 UPGRADE。这是必需的参数。 </span><br><span class=\"line\"></span><br><span class=\"line\">ACTION&#x3D;&quot;Install&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">; 指定要安装、卸载或升级的功能。顶级功能列表包括 SQL、AS、RS、IS 和工具。SQL 功能将安装数据库引擎、复制和全文。工具功能将安装管理工具、联机丛书、Business Intelligence Development Studio 和其他共享组件。 </span><br><span class=\"line\"></span><br><span class=\"line\">FEATURES&#x3D;SQLENGINE,REPLICATION,FULLTEXT,AS,CONN,BC,SSMS,ADV_SSMS</span><br><span class=\"line\"></span><br><span class=\"line\">; 显示命令行参数用法 </span><br><span class=\"line\"></span><br><span class=\"line\">HELP&#x3D;&quot;False&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">; 指定应将详细的安装程序日志传送到控制台。 </span><br><span class=\"line\"></span><br><span class=\"line\">INDICATEPROGRESS&#x3D;&quot;False&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">; 安装程序将不会显示任何用户界面。 </span><br><span class=\"line\"></span><br><span class=\"line\">QUIET&#x3D;&quot;False&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">; 安装程序将只显示进度，不需要任何用户交互。 </span><br><span class=\"line\"></span><br><span class=\"line\">QUIETSIMPLE&#x3D;&quot;False&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">; 指定安装程序应该安装到 WOW64 中。IA64 或 32 位系统不支持此命令行参数。 </span><br><span class=\"line\"></span><br><span class=\"line\">X86&#x3D;&quot;False&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">; 尚未定义命令行参数 ENU 的详细帮助。 </span><br><span class=\"line\"></span><br><span class=\"line\">ENU&#x3D;&quot;False&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">; 用于控制用户界面行为的参数。有效值对于完整 UI 为 Normal，对于简化的 UI 为 AutoAdvance。 </span><br><span class=\"line\"></span><br><span class=\"line\">UIMODE&#x3D;&quot;Normal&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">; 指定是否可将错误报告给 Microsoft 以便改进以后的 SQL Server 版本。指定 1 或 True 将启用此功能，指定 0 或 False 将禁用此功能。 </span><br><span class=\"line\"></span><br><span class=\"line\">ERRORREPORTING&#x3D;&quot;False&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">; 指定本机共享组件的安装根目录。 </span><br><span class=\"line\"></span><br><span class=\"line\">INSTALLSHAREDDIR&#x3D;&quot;D:\\Program Files\\Microsoft SQL Server&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">; 指定 WOW64 共享组件的安装根目录。 </span><br><span class=\"line\"></span><br><span class=\"line\">INSTALLSHAREDWOWDIR&#x3D;&quot;D:\\Program Files (x86)\\Microsoft SQL Server&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">; 指定安装目录。 </span><br><span class=\"line\"></span><br><span class=\"line\">INSTANCEDIR&#x3D;&quot;D:\\Program Files\\Microsoft SQL Server&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">; 指定可以收集 SQL Server 功能使用情况数据，并将数据发送到 Microsoft。指定 1 或 True 将启用此功能，指定 0 或 False 将禁用此功能。 </span><br><span class=\"line\"></span><br><span class=\"line\">SQMREPORTING&#x3D;&quot;False&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">; 指定默认实例或命名实例。MSSQLSERVER 是非 Express 版本的默认实例，SQLExpress 则是 Express 版本的默认实例。在安装 SQL Server 数据库引擎(SQL)、Analysis Services (AS)或 Reporting Services (RS)时，此参数是必需的。 </span><br><span class=\"line\"></span><br><span class=\"line\">INSTANCENAME&#x3D;&quot;MSSQLSERVER&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">; 代理帐户名 </span><br><span class=\"line\"></span><br><span class=\"line\">AGTSVCACCOUNT&#x3D;&quot;NT AUTHORITY\\SYSTEM&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">; 安装后自动启动服务。  </span><br><span class=\"line\"></span><br><span class=\"line\">AGTSVCSTARTUPTYPE&#x3D;&quot;Manual&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">; Integration Services 的启动类型。 </span><br><span class=\"line\"></span><br><span class=\"line\">ISSVCSTARTUPTYPE&#x3D;&quot;Automatic&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">; Integration Services 的帐户: 域\\用户或系统帐户。 </span><br><span class=\"line\"></span><br><span class=\"line\">ISSVCACCOUNT&#x3D;&quot;NT AUTHORITY\\NetworkService&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">; 运行 Analysis Services 服务所使用的帐户的名称。 </span><br><span class=\"line\"></span><br><span class=\"line\">ASSVCACCOUNT&#x3D;&quot;NT AUTHORITY\\SYSTEM&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">; 在创建服务后控制服务启动类型设置。 </span><br><span class=\"line\"></span><br><span class=\"line\">ASSVCSTARTUPTYPE&#x3D;&quot;Automatic&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">; Analysis Services 要使用的排序规则。 </span><br><span class=\"line\"></span><br><span class=\"line\">ASCOLLATION&#x3D;&quot;Chinese_PRC_CI_AS&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">; Analysis Services 数据文件的位置。 </span><br><span class=\"line\"></span><br><span class=\"line\">ASDATADIR&#x3D;&quot;D:\\Program Files\\Microsoft SQL Server\\MSAS10_50.MSSQLSERVER\\OLAP\\Data&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">; Analysis Services 日志文件的位置。 </span><br><span class=\"line\"></span><br><span class=\"line\">ASLOGDIR&#x3D;&quot;D:\\Program Files\\Microsoft SQL Server\\MSAS10_50.MSSQLSERVER\\OLAP\\Log&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">; Analysis Services 备份文件的位置。 </span><br><span class=\"line\"></span><br><span class=\"line\">ASBACKUPDIR&#x3D;&quot;D:\\Program Files\\Microsoft SQL Server\\MSAS10_50.MSSQLSERVER\\OLAP\\Backup&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">; Analysis Services 临时文件的位置。 </span><br><span class=\"line\"></span><br><span class=\"line\">ASTEMPDIR&#x3D;&quot;D:\\Program Files\\Microsoft SQL Server\\MSAS10_50.MSSQLSERVER\\OLAP\\Temp&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">; Analysis Services 配置文件的位置。 </span><br><span class=\"line\"></span><br><span class=\"line\">ASCONFIGDIR&#x3D;&quot;D:\\Program Files\\Microsoft SQL Server\\MSAS10_50.MSSQLSERVER\\OLAP\\Config&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">; 指定是否允许 MSOLAP 访问接口在进程中运行。 </span><br><span class=\"line\"></span><br><span class=\"line\">ASPROVIDERMSOLAP&#x3D;&quot;1&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">; 指定需要设置的管理员帐户的列表。 </span><br><span class=\"line\"></span><br><span class=\"line\">ASSYSADMINACCOUNTS&#x3D;&quot;WeiyiGeek\\admin&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">; 用于连接 SharePoint 管理中心 Web 应用程序的端口号。 </span><br><span class=\"line\"></span><br><span class=\"line\">FARMADMINPORT&#x3D;&quot;0&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">; SQL Server 服务的启动类型。 </span><br><span class=\"line\"></span><br><span class=\"line\">SQLSVCSTARTUPTYPE&#x3D;&quot;Automatic&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">; 启用 FILESTREAM 功能的级别(0、1、2 或 3)。 </span><br><span class=\"line\"></span><br><span class=\"line\">FILESTREAMLEVEL&#x3D;&quot;0&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">; 设置为 &quot;1&quot; 可为 SQL Server Express 启用 RANU。 </span><br><span class=\"line\"></span><br><span class=\"line\">ENABLERANU&#x3D;&quot;False&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">; 指定要用于数据库引擎的 Windows 排序规则或 SQL 排序规则。 </span><br><span class=\"line\"></span><br><span class=\"line\">SQLCOLLATION&#x3D;&quot;Chinese_PRC_CI_AS&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">; SQL Server 服务的帐户: 域\\用户或系统帐户。 </span><br><span class=\"line\"></span><br><span class=\"line\">SQLSVCACCOUNT&#x3D;&quot;NT AUTHORITY\\SYSTEM&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">; 要设置为 SQL Server 系统管理员的 Windows 帐户。 </span><br><span class=\"line\"></span><br><span class=\"line\">SQLSYSADMINACCOUNTS&#x3D;&quot;WeiyiGeek\\admin&quot; &quot;mssqladmin&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">; 默认值为 Windows 身份验证。使用 &quot;SQL&quot; 表示采用混合模式身份验证。 </span><br><span class=\"line\"></span><br><span class=\"line\">SECURITYMODE&#x3D;&quot;SQL&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">; 将当前用户设置为 SQL Server 2008 R2 Express 的数据库引擎系统管理员。 </span><br><span class=\"line\"></span><br><span class=\"line\">ADDCURRENTUSERASSQLADMIN&#x3D;&quot;False&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">; 指定 0 禁用 TCP&#x2F;IP 协议，指定 1 则启用该协议。 </span><br><span class=\"line\"></span><br><span class=\"line\">TCPENABLED&#x3D;&quot;1&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">; 指定 0 禁用 Named Pipes 协议，指定 1 则启用该协议。 </span><br><span class=\"line\"></span><br><span class=\"line\">NPENABLED&#x3D;&quot;0&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">; Browser 服务的启动类型。 </span><br><span class=\"line\"></span><br><span class=\"line\">BROWSERSVCSTARTUPTYPE&#x3D;&quot;Disabled&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">; 指定报表服务器 NT 服务的启动模式。</span><br><span class=\"line\">; 手动 - 在手动模式(默认值)下启动服务。</span><br><span class=\"line\">; 自动 - 在自动模式下启动服务。</span><br><span class=\"line\">; 已禁用 - 服务处于禁用状态 </span><br><span class=\"line\"></span><br><span class=\"line\">RSSVCSTARTUPTYPE&#x3D;&quot;Automatic&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">; 指定报表服务器的安装模式。</span><br><span class=\"line\">; 默认值: “FilesOnly”  </span><br><span class=\"line\"></span><br><span class=\"line\">RSINSTALLMODE&#x3D;&quot;FilesOnlyMode&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">; 添加输入参数 FTSVCACCOUNT 的描述 </span><br><span class=\"line\"></span><br><span class=\"line\">FTSVCACCOUNT&#x3D;&quot;NT AUTHORITY\\LOCAL SERVICE&quot;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Step 8.等待6~10分钟 MsSQL Server 就可以安装成功;</p>\n<figure class=\"image-box\">\n                <img src=\"https://img.weiyigeek.top/2021/1/20210120103623.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure>\n</li>\n</ul>\n<ul>\n<li>Step 9.安装成功它会自动启动数据库相关服务 -&gt; 但是默认的SQL Server代理服务需要手动进行启动(这样我们的备份任务才能正常执行) -&gt; 请注意以下服务名称的描述作用;</li>\n</ul>\n<figure class=\"image-box\">\n                <img src=\"https://img.weiyigeek.top/2021/1/20210120104441.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure>\n<ul>\n<li>Step 10.最后采用 Microsoft SQL Server Management Studio 进行对SQL Server进行管理  </li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- （1）SQL Server 相关信息</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> SERVERPROPERTY(N<span class=\"string\">'edition'</span>) <span class=\"keyword\">as</span> <span class=\"keyword\">Edition</span> <span class=\"comment\">--数据版本，如企业版、开发版等</span></span><br><span class=\"line\">,SERVERPROPERTY(N<span class=\"string\">'collation'</span>) <span class=\"keyword\">as</span> <span class=\"keyword\">Collation</span> <span class=\"comment\">--数据库字符集</span></span><br><span class=\"line\">,SERVERPROPERTY(N<span class=\"string\">'servername'</span>) <span class=\"keyword\">as</span> ServerName <span class=\"comment\">--服务名</span></span><br><span class=\"line\">,@@<span class=\"keyword\">VERSION</span> <span class=\"keyword\">as</span> <span class=\"keyword\">Version</span> <span class=\"comment\">--数据库版本号</span></span><br><span class=\"line\">,@@<span class=\"keyword\">LANGUAGE</span> <span class=\"keyword\">AS</span> <span class=\"keyword\">Language</span> <span class=\"comment\">--数据库使用的语言，如us_english等</span></span><br><span class=\"line\"><span class=\"comment\">-- Edition\tCollation\tServerName\tVersion\tLanguage</span></span><br><span class=\"line\"><span class=\"comment\">-- Enterprise Edition (64-bit)\tChinese_PRC_CI_AS\tWIN-KRB8LBJ4LGH\t</span></span><br><span class=\"line\"><span class=\"comment\">-- Microsoft SQL Server 2008 R2 (RTM) - 10.50.1600.1 (X64) Apr  2 2010 15:48:46 Copyright (c) Microsoft Corporation Enterprise Edition (64-bit) on Windows NT 6.1 &lt;X64&gt; (Build 7601: Service Pack 1) (Hypervisor)</span></span><br><span class=\"line\"><span class=\"comment\">-- \t简体中文</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- （2）SQL Server 默认的排序规则和编码</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> COLLATIONPROPERTY( <span class=\"string\">'chinese_prc_ci_as'</span>, <span class=\"string\">'codepage'</span> );</span><br><span class=\"line\"><span class=\"comment\">-- 查看代码页</span></span><br><span class=\"line\"><span class=\"comment\">-- 936 代表 gbk </span></span><br><span class=\"line\"><span class=\"comment\">-- 20936 代表 gb2312</span></span><br></pre></td></tr></table></figure>\n<figure class=\"image-box\">\n                <img src=\"https://img.weiyigeek.top/2021/1/20210120105033.png\" alt=\"WeiyiGeek.SQL Server 相关信息\" title=\"\" class=\"\">\n                <p>WeiyiGeek.SQL Server 相关信息</p>\n            </figure>\n<ul>\n<li>Step 11.至此 在 Server 2019 操作系统上安装 SQL Server 2008 R2 完美结束;</li>\n</ul>\n<hr>\n<h2 id=\"0x02-F-amp-Q-入坑出坑\"><a href=\"#0x02-F-amp-Q-入坑出坑\" class=\"headerlink\" title=\"0x02 F&amp;Q 入坑出坑\"></a>0x02 F&amp;Q 入坑出坑</h2><h3 id=\"问题1：在Server-2019中安装-NET-Framework-3-5提示error-0x8024402C\"><a href=\"#问题1：在Server-2019中安装-NET-Framework-3-5提示error-0x8024402C\" class=\"headerlink\" title=\"问题1：在Server 2019中安装.NET Framework 3.5提示error 0x8024402C\"></a>问题1：在Server 2019中安装.NET Framework 3.5提示error 0x8024402C</h3><p><strong>解决方式：</strong></p>\n<ul>\n<li>1.挂载安装系统镜像(是安装该系统对应的镜像文件)。</li>\n<li>2.在Server 2019中安装.NET Framework 3.5 功能</li>\n<li>3.点击下面的“指定备用源路径”，弹出对话框输入如图所示。</li>\n<li>4.在Server 2019中安装.NET Framework 3.5 功能再进行安装，便可以安装成功了。</li>\n</ul>\n<figure class=\"image-box\">\n                <img src=\"https://img.weiyigeek.top/2021/1/20210120095002.png\" alt=\"WeiyiGeek.NET 3.5-0x8024402C\" title=\"\" class=\"\">\n                <p>WeiyiGeek.NET 3.5-0x8024402C</p>\n            </figure>\n<p><br></p>\n<h3 id=\"问题2-viewInfo-Microsoft-SqlServer-Management-SqlStudio-Expl\"><a href=\"#问题2-viewInfo-Microsoft-SqlServer-Management-SqlStudio-Expl\" class=\"headerlink\" title=\"问题2.viewInfo (Microsoft.SqlServer.Management.SqlStudio.Expl\"></a>问题2.viewInfo (Microsoft.SqlServer.Management.SqlStudio.Expl</h3><p>环境说明: 服务器环境：windows server 2008（64Bit）/ 数据库版本：SQL server 2008 R2<br>错误信息: 错误提示值不能为空参数名: viewInfo (Microsoft.SqlServer.Management.SqlStudio.Expl 如下图：</p>\n<figure class=\"image-box\">\n                <img src=\"https://img-blog.csdn.net/20170330104951095?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZGF2aWRfNTIwMDQy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"错误图示\" title=\"\" class=\"\">\n                <p>错误图示</p>\n            </figure> \n<p>问题解决: 在路径：C:\\Users\\你的用户名\\AppData\\Local\\Temp\\”文件夹下建好命名为 2 的文件夹，如果已经有 2 则看清楚是否是文件而不是文件夹，删掉文件改为文件夹。<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">start %temp%</span><br><span class=\"line\">mkdir %temp%/2</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<h3 id=\"问题3-当-IDENTITY-INSERT-设置为-OFF-时，不能为表-‘tb-MyInvoices’-中的标识列插入显式值\"><a href=\"#问题3-当-IDENTITY-INSERT-设置为-OFF-时，不能为表-‘tb-MyInvoices’-中的标识列插入显式值\" class=\"headerlink\" title=\"问题3.当 IDENTITY_INSERT 设置为 OFF 时，不能为表 ‘tb_MyInvoices’ 中的标识列插入显式值\"></a>问题3.当 IDENTITY_INSERT 设置为 OFF 时，不能为表 ‘tb_MyInvoices’ 中的标识列插入显式值</h3><p>描述: 默认情况下 <code>IDENTITY_INSER</code> 就是 off, 该情况下你写 insert 语句时 identity 栏位，不要写值系统会自动帮你写入这样防止id重复。<br>举例说明:<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> tablename(<span class=\"keyword\">id</span> <span class=\"built_in\">int</span> <span class=\"keyword\">identity</span>(<span class=\"number\">1</span>,<span class=\"number\">1</span>),dt datetime,pay <span class=\"built_in\">int</span>)</span><br><span class=\"line\"><span class=\"keyword\">go</span></span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> tablename(dt,pay)<span class=\"keyword\">values</span>(<span class=\"string\">'2012-4-12'</span>,<span class=\"number\">100</span>) <span class=\"comment\">--不能向 id栏位写值，系统会自动写</span></span><br><span class=\"line\"><span class=\"keyword\">go</span></span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> tablename(<span class=\"keyword\">id</span>,dt,pay)<span class=\"keyword\">values</span>(<span class=\"number\">100</span>,<span class=\"string\">'2012-4-14'</span>,<span class=\"number\">200</span>) <span class=\"comment\">--如果像这样写了，就会报错</span></span><br><span class=\"line\"><span class=\"keyword\">go</span></span><br></pre></td></tr></table></figure><br>解决办法:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># IDENTITY_INSERT 设置为 on 利用系统自动写入的功能保证不重复</span></span><br><span class=\"line\"><span class=\"built_in\">set</span> IDENTITY_INSERT tablename on </span><br><span class=\"line\">insert into tablename(id,dt,pay)values(100,<span class=\"string\">'2012-4-14'</span>,200) --这样就不会报错了。</span><br></pre></td></tr></table></figure></p>\n","comments":true,"excerpt":"[TOC]","categories":[{"name":"Database","path":"api/categories/Database.json"},{"name":"DBA","path":"api/categories/DBA.json"}],"tags":[{"name":"MsSQL","path":"api/tags/MsSQL.json"}]}