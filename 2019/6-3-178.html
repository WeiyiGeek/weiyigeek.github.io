<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="content-language" content="zh-CN"/>
    <meta name="author" content="WeiyiGeek" />
    <meta name="msvalidate.01" content="5C552FB1D885E0E11D2957EC958C8018" />
    <meta name="shenma-site-verification" content="4c655e91c76be0a93c1b6954c666c9d6_1649049085"/>
    <meta name="bytedance-verification-code" content="lKs4FqwCHSJ3A/c5tT7X" />
    <meta name="sogou_site_verification" content="OC65iET6Bk" />
    
    <title>🌐 Shell脚本内建命令|WeiyiGeek Blog|唯一极客Geek-IT网络安全运维开发技术知识分享-博客站点</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    
    <meta name="keywords" content="shell">
    <meta name="Description" content="WeiyiGeek-唯一极客博客站点,关注于网络安全运维,Web安全开发,IOT物联网安全开发,应用开发,分享技术学习知识与入坑解决,提升网络安全技术与自身技术能力,立志维护大众网络安全为己任,做一个对国家有用的人,为实现中华民族伟大复兴的中国梦不懈奋斗">
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="/css/jquery/3.5.2-jquery.fancybox.min.css?v=1.6.6" />
    <link rel="stylesheet" href="/css/style.css?v=1.6.6">
    <!--  -->
     <script type="text/javascript" src="/js/custom/articlecost.js?v=1.6.6"></script> 
    <link rel="stylesheet" href="/css/third-party/gitalk.css?v=1.6.6"> 
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9134434519967436" crossorigin="anonymous"></script>    
    <script type="text/javascript">
        // Data Center
        var DC = {
          reward:	true,
          lv: JSON.parse('{"enable":false,"app_id":null,"app_key":null,"icon":true}'),
          v: JSON.parse('{"enable":false,"appid":null,"appkey":null,"notify":true,"verify":true,"placeholder":"give me some sugers plz...","avatar":"wavatar"}')
        };
    </script>
    <script type="text/javascript">window.lazyScripts=[];</script>
<meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="WeiyiGeek Blog" type="application/atom+xml">
</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="">
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap">
      
      <img src="/img/brand.jpg" class="brand-bg" alt="WeiyiGeek-backgroud">
      
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg" alt="WeiyiGeek-头像">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">WeiyiGeek</h5>
          <a href="mailto:master@weiyigeek.top" title="master@weiyigeek.top" class="mail">
            <span>m</span><span>a</span><span>s</span><span>t</span><span>e</span><span>r</span><span>@</span><span>w</span><span>e</span><span>i</span><span>y</span><span>i</span><span>g</span><span>e</span><span>e</span><span>k</span><span>.</span><span>t</span><span>o</span><span>p</span>
          </a>
        </hgroup>
        
        <ul class="menu-link">
          
              <li>
                <a href="https://weiyigeek.top/img/wechat-search.png" target="_blank">
                  <i class="icon icon-lg icon-wechat"></i>
                </a>
              </li>
            
              <li>
                <a href="https://github.com/weiyigeek" target="_blank">
                  <i class="icon icon-lg icon-github"></i>
                </a>
              </li>
            
              <li>
                <a href="https://t.me/WeiyiGeek" target="_blank">
                  <i class="icon icon-lg icon-telegram"></i>
                </a>
              </li>
            
              <li>
                <a href="https://twitter.com/WeiyiGeek" target="_blank">
                  <i class="icon icon-lg icon-twitter"></i>
                </a>
              </li>
            
              <li>
                <a href="https://weibo.com/615643678" target="_blank">
                  <i class="icon icon-lg icon-weibo"></i>
                </a>
              </li>
            
        </ul>
        
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                首页
              </a>
            </li>
        
            <li class="">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                文章分类
              </a>
            </li>
        
            <li class="">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                文章标签
              </a>
            </li>
        
            <li class="">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                文章归档
              </a>
            </li>
        
            <li class="">
              <a href="/2018/1-1-1.html"  >
                <i class="icon icon-lg icon-mortar-board"></i>
                学习之路
              </a>
            </li>
        
            <li class="">
              <a href="/books"  >
                <i class="icon icon-lg icon-book"></i>
                学习书籍
              </a>
            </li>
        
            <li class="">
              <a href="/about"  >
                <i class="icon icon-lg icon-user"></i>
                关于作者
              </a>
            </li>
        
            <li class="">
              <a href="/links"  >
                <i class="icon icon-lg icon-link"></i>
                站点导航
              </a>
            </li>
        
            <li class="">
              <a href="/img/share-wechat.jpg" target="_blank" >
                <i class="icon icon-lg icon-wechat"></i>
                公众账号
              </a>
            </li>
        
            <li class="">
              <a href="https://space.bilibili.com/385802642" target="_blank" >
                <i class="icon icon-lg icon-youtube-play"></i>
                哔哩哔哩
              </a>
            </li>
        
            <li class="">
              <a href="/img/video-account.jpg" target="_blank" >
                <i class="icon icon-lg icon-video-camera"></i>
                视频号
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row clearfix">
        <a href="javascript:;" class="header-icon pull-left waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">
            <span>Shell脚本内建命令</span>
            
        </div>

        
        <a href="javascript:;" id="site_search_btn" class="header-icon pull-right waves-effect waves-circle waves-light">
            <i class="icon icon-lg icon-search"></i>
        </a>
        

        
            <a href="/atom.xml" class="header-icon pull-right waves-effect waves-circle waves-light">
                <i class="icon icon-lg icon-rss"></i>
            </a>
        
    </div>
</header>
<header class="content-header post-header">
    <img src="/img/banner.jpg" class="header-bg" alt="文章头部背景">
    <div class="container fade-scale">
        <h1 class="title">Shell脚本内建命令</h1>
        <h5 class="subtitle">
            
                <time datetime="2019-06-03T12:37:30.000Z" itemprop="datePublished" class="page-time">
  2019-06-03
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Linux%E5%91%BD%E4%BB%A4/">Linux命令</a></li></ul>


            
        </h5>
        
    </div>
    

</header>

<div id="site_search">
    <div class="search-title clearfix">
        <span class="pull-left">
          <i class="icon icon-lg icon-search"></i>
        </span>
        <input type="text" id="local-search-input" name="q" results="0" placeholder="search my blog..." class="form-control pull-left"/>
        <a href="javascript:;" class="close pull-right waves-effect waves-circle waves-light">
          <i class="icon icon-lg icon-close"></i>
        </a>
    </div>
    <div id="local-search-result"></div>
</div>


<div class="container body-wrap" style="display: none;">
  <article id="post-系统运维/Linux/常用命令/脚本常用类命令/Shell脚本内建命令"
  class="post-article article-type-post" itemprop="blogPost">
    <div class="post-card">
        <h1 class="post-card-title">Shell脚本内建命令</h1>
        <div class="post-meta">
            <time class="post-time" title="2019-06-03 20:37:30" datetime="2019-06-03T12:37:30.000Z"  itemprop="datePublished">2019-06-03</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Linux%E5%91%BD%E4%BB%A4/">Linux命令</a></li></ul>



            

            


            
        </div>
        <span class="post-href" style="display: none;">|</span> 
        <div class="post-content" id="post-content" itemprop="postContent">
            
            <p>[TOC]</p>
<a id="more"></a>
<h4 id="0x00-shell-内建命令"><a href="#0x00-shell-内建命令" class="headerlink" title="0x00 shell 内建命令"></a>0x00 shell 内建命令</h4><h5 id="type-命令"><a href="#type-命令" class="headerlink" title="type 命令"></a>type 命令</h5><p>描述:查看命令相关信息类型</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># (1) 查看命令类型</span></span><br><span class="line"><span class="built_in">type</span> -a complete</span><br><span class="line"><span class="comment">#complete 是 shell 内嵌</span></span><br></pre></td></tr></table></figure>
<p><br></p>
<h5 id="eval-命令-慎用"><a href="#eval-命令-慎用" class="headerlink" title="eval 命令 (慎用)"></a>eval 命令 (慎用)</h5><p>描述：以shell命令的形式执行参数。将ARGs组合成一个字符串，将结果作为shell的输入，并执行生成的命令。</p>
<p>间接引用变量：eval会对后面的cmdLine进行两遍扫描</p>
<ul>
<li>如果第一遍扫描后cmdLine是个普通命令则执行此命令；</li>
<li>如果cmdLine中含有变量的间接引用，则保证间接引用的语义。</li>
</ul>
<p>基础语法:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">eval</span> [arg ...]</span><br></pre></td></tr></table></figure><br>退出状态:返回命令的退出状态，如果命令为空则返回成功。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#基础示例1：可以用于回显简单变量或复杂变量。</span></span><br><span class="line">NAME=ZONE</span><br><span class="line"><span class="built_in">eval</span> <span class="built_in">echo</span> <span class="variable">$NAME</span> <span class="comment">#等价于echo $NAME  = ZONE</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#基础示例2：</span></span><br><span class="line">name=weiyigeek</span><br><span class="line">weiyigeek=shellPrograming</span><br><span class="line"><span class="built_in">eval</span> var=\$<span class="variable">$name</span>  <span class="comment">#实际赋值的变量为$weiyiyeek</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$var</span> <span class="comment">#shellPrograming</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例3.两次扫描test.txt内容：hello shell world!</span></span><br><span class="line">myfile=<span class="string">"cat test.txt"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$myfile</span>　　     <span class="comment">#result:cat test.txt</span></span><br><span class="line"><span class="built_in">eval</span> <span class="built_in">echo</span> <span class="variable">$myfile</span>　　<span class="comment">#result:hello shell world! 会进行执行cat命令后再进行输出内容</span></span><br></pre></td></tr></table></figure>
<p><br></p>
<h5 id="read-命令"><a href="#read-命令" class="headerlink" title="read 命令"></a>read 命令</h5><p>描述：read命令从键盘读取变量的值，通常用在shell脚本中与用户进行交互的场合<br>该命令可以一次读取多个变量的值，变量和输入的值都需要使用空格隔开,在read命令后面如果没有指定变量名，读取的数据将被自动赋值给特定的变量;</p>
<p>语法选项：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">read</span> [选项] [变量名]</span><br><span class="line"><span class="comment">#选项</span></span><br><span class="line">-p <span class="string">"提示信息"</span>:等待<span class="built_in">read</span>输入时候提示信息;</span><br><span class="line">-t &lt;秒数&gt;：<span class="built_in">read</span>命令会一直等待用户输入,使用此选项可以指定等待时间</span><br><span class="line">-i: 使用文本作为Readline的初始文本</span><br><span class="line">-n 字符数：<span class="built_in">read</span>命令只接受指定的字符数就会执行</span><br><span class="line">-N nchars: 仅在完全读取nchars字符后返回，除非遇到EOF或读取超时，忽略任何</span><br><span class="line">-a：<span class="string">"输入字符到某一数组里"</span></span><br><span class="line">-d：<span class="string">"指定分隔符，来结束输入"</span></span><br><span class="line">-r：<span class="string">"允许输出包含反斜杠"</span></span><br><span class="line">-s：密码类型输入不显示</span><br></pre></td></tr></table></figure></p>
<p>实际案例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#示例1.标准输入</span></span><br><span class="line"><span class="variable">$read</span></span><br><span class="line">whoami</span><br><span class="line"><span class="variable">$echo</span> <span class="variable">$REPLY</span>  <span class="comment">#从标准输入读取一行并赋值给特定变量REPLY。  whoami</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$read</span> param1 <span class="comment">#从标准输入读取一行并赋值给指定变量param1。</span></span><br><span class="line">this is a <span class="built_in">read</span></span><br><span class="line"><span class="variable">$echo</span> <span class="variable">$param1</span>   <span class="comment">#this is a read</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$read</span> p1 p2  <span class="comment">#从标准输入读取输入到第一个空格或者回车</span></span><br><span class="line">I loveyou</span><br><span class="line"><span class="variable">$echo</span> <span class="string">"<span class="variable">$&#123;p1&#125;</span> <span class="variable">$&#123;p2&#125;</span>"</span> <span class="comment">#将输入的第一个单词放到变量p1中，并将该行其他的输入放在变量p2中。I loveyou</span></span><br><span class="line"><span class="built_in">read</span> one two three</span><br><span class="line">1 2 3                   <span class="comment">#在控制台输入1 2 3，它们之间用空格隔开。</span></span><br><span class="line"><span class="comment">#echo "one = $one, two = $two, three = $three"</span></span><br><span class="line"><span class="comment">#one = 1, two = 2, three = 3</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例2.常用参数</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"text"</span> -t 3  <span class="comment">#打印提示（text），等待输入，并将输入存储在REPLY中。指定读取等待时间为3秒。</span></span><br><span class="line"><span class="built_in">read</span> -r line <span class="comment">#允许输入包含反斜杠。</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">read</span> -d <span class="string">":"</span> var  <span class="comment">#用定界符":"结束输入行。</span></span><br><span class="line">i love study Computer:</span><br><span class="line"><span class="variable">$echo</span> <span class="variable">$var</span>  <span class="comment">#i love study Computer rt</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">read</span> -a arrayname  <span class="comment">#把单词清单读入arrayname的数组里。（非常有用）</span></span><br><span class="line">i love you</span><br><span class="line"><span class="variable">$echo</span> <span class="variable">$&#123;arrayname&#125;</span> <span class="variable">$&#123;arrayname[2]&#125;</span>   <span class="comment">#i you</span></span><br><span class="line"><span class="variable">$echo</span> <span class="variable">$&#123;arrayname[*]&#125;</span>  <span class="comment">#i love you</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">read</span> -n 2 var  <span class="comment">#从输入中读取两个字符并存入变量var，不需要按回车读取。</span></span><br><span class="line">ls</span><br><span class="line"><span class="variable">$echo</span> <span class="variable">$var</span>  <span class="comment">#ls</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例3.进阶使用 补充一个终端输入密码时候，不让密码显示出来的例子。</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"输入密码："</span> -s <span class="built_in">pwd</span>   <span class="comment">#补充一个终端输入密码时候，不让密码显示出来的例子。</span></span><br><span class="line">输入密码：</span><br><span class="line"><span class="built_in">echo</span> password <span class="built_in">read</span>, is <span class="string">"<span class="variable">$pwd</span>"</span> <span class="comment">#password read, is whoami</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#方法二：采用stty选项</span></span><br><span class="line">其中选项-<span class="built_in">echo</span>禁止将输出发送到终端，而选项<span class="built_in">echo</span>则允许发送输出。</span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">stty -<span class="built_in">echo</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"输入密码："</span> <span class="built_in">pwd</span></span><br><span class="line">stty <span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span> 输入完毕。</span><br><span class="line"></span><br><span class="line"><span class="comment"># 示例4.实践使用</span></span><br><span class="line"><span class="built_in">read</span> -t 3 -p <span class="string">"Please input, create user account. (Y/N) : "</span> VERIFY</span><br><span class="line"><span class="keyword">if</span> [[ <span class="variable">$&#123;VERIFY:="N"&#125;</span> == <span class="string">"Y"</span> || <span class="variable">$&#123;VERIFY:="N"&#125;</span> == <span class="string">"y"</span> ]]; <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"创建用户"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"不创建用户"</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><br><figure class="image-box">
                <a rel=Shell脚本内建命令 href="https://img.weiyigeek.top/2019/20190703130113.png" target="_blank" title="WeiyiGeek.read测试" data-fancybox="images"><img src="https://img.weiyigeek.top/2019/20190703130113.png" alt="WeiyiGeek.read测试" title="" class=""></a>
                <p>WeiyiGeek.read测试</p>
            </figure></p>
<hr>

<h5 id="declare-命令"><a href="#declare-命令" class="headerlink" title="declare 命令"></a>declare 命令</h5><p>描述:用于声明和显示已存在的shell变量类型。当不提供变量名参数时显示所有shell变量，declare命令若不带任何参数选项,则会<code>显示全部的shell变量与函数</code>(与执行set指令的效果相同)。</p>
<p><code>declare命令（别名typeset）属shell内建命令</code>用于申明shell变量并设置变量属性，或查看已定义的shell变量和函数的（弱类型,默认字符串型）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#语法</span></span><br><span class="line"><span class="built_in">declare</span> [+/-] [选项] 变量表达式</span><br><span class="line"><span class="comment">#变量表达式：声明shell变量，格式为"变量名=值"。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#参数</span></span><br><span class="line">+/-：<span class="string">"-"</span>可用来指定变量的属性，<span class="string">"+"</span>则是取消变量所设的属性；</span><br><span class="line">-a：将变量声明为数组类型(Array)；</span><br><span class="line">-i：[设置值]可以是数值类型(Int)，字符串或运算式；</span><br><span class="line">-p：显示指定变量的被声明得类型；</span><br><span class="line">-f：仅显示函数； </span><br><span class="line">-r：将变量设置为只读（临时生效）；</span><br><span class="line">-x：指定的变量会成为环境变量，可供shell以外的程序来使用；</span><br></pre></td></tr></table></figure>
<p>操作实例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1.定义一个字符串shell变量</span></span><br><span class="line">$ <span class="built_in">declare</span> name=<span class="string">"Weiyigeek"</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$name</span>    <span class="comment">#只是当前shell生效，并不存在系统环境变量种</span></span><br><span class="line">Weiyigeek</span><br><span class="line"></span><br><span class="line"><span class="comment">#2.定义一个整形(可计算的)shell变量</span></span><br><span class="line">$ <span class="built_in">declare</span> -i c=5+6</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$c</span></span><br><span class="line">11</span><br><span class="line"></span><br><span class="line"><span class="comment">#3.定义一个数组</span></span><br><span class="line">$ <span class="built_in">declare</span> -a temp[2]=TCP</span><br><span class="line">$ temp[1]=Protocol</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;temp[*]&#125;</span></span><br><span class="line">Protocol TCP</span><br><span class="line"></span><br><span class="line"><span class="comment">#4.定义系统变量</span></span><br><span class="line"><span class="built_in">declare</span> -x ppfile=/usr/bin/file.sh   <span class="comment"># 与export作用相同,但其实Export也是引用declare命令的作用.</span></span><br><span class="line">env | grep ppfile    <span class="comment">#在系统环境变量种</span></span><br><span class="line">ppfile=/usr/bin/file.sh</span><br><span class="line"></span><br><span class="line"><span class="built_in">declare</span> -r pfile=/usr/bin/file.sh  <span class="comment">#定义只读变量 （临时生效，且不能被unset移除）只是在当前shell中生效</span></span><br><span class="line">env | grep pfile    <span class="comment">#申明变量步骤在系统环境变量中</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#4.显示变量被申明的名称类型</span></span><br><span class="line"><span class="variable">$declare</span> -p name</span><br><span class="line"><span class="built_in">declare</span> -- name=<span class="string">"Weiyigeek"</span></span><br><span class="line"><span class="variable">$declare</span> -p c</span><br><span class="line"><span class="built_in">declare</span> -i c=<span class="string">"11"</span></span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h5 id="readonly-命令"><a href="#readonly-命令" class="headerlink" title="readonly 命令"></a>readonly 命令</h5><p>描述：使用 readonly 命令可以将变量定义为只读变量，只读变量的值不能被改变。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#示例1.下面的例子尝试更改只读变量，结果报错：</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">myUrl=<span class="string">"http://see.xidian.edu.cn/cpp/shell/"</span></span><br><span class="line"><span class="built_in">readonly</span> myUrl</span><br><span class="line">myUrl=<span class="string">"http://see.xidian.edu.cn/cpp/danpianji/"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -bash: myUrl: 只读变量</span></span><br></pre></td></tr></table></figure>
<p><br></p>
<h5 id="stty-命令"><a href="#stty-命令" class="headerlink" title="stty 命令"></a>stty 命令</h5><p>描述： stty命令修改终端命令行的相关设置。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#语法</span></span><br><span class="line">stty(选项)(参数)</span><br><span class="line"></span><br><span class="line"><span class="comment">#选项</span></span><br><span class="line">-a：以容易阅读的方式打印当前的所有配置；</span><br><span class="line">-g：以stty可读方式打印当前的所有配置</span><br></pre></td></tr></table></figure>
<p>实际案例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#在命令行下，禁止输出大写的方法：</span></span><br><span class="line">stty iuclc     <span class="comment">#开启</span></span><br><span class="line">stty -iuclc    <span class="comment">#恢复</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#在命令行下禁止输出小写：</span></span><br><span class="line">stty olcuc    <span class="comment">#开启</span></span><br><span class="line">stty -olcuc   <span class="comment">#恢复</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#忽略回车符：</span></span><br><span class="line">stty igncr     <span class="comment">#开启</span></span><br><span class="line">stty -igncr    <span class="comment">#恢复</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例1.打印出终端的行数和列数根据具体变化而变化;</span></span><br><span class="line"><span class="variable">$stty</span> -a <span class="comment">#查看所有符号定义以及快捷键</span></span><br><span class="line"><span class="comment"># speed 38400 baud; rows 30; columns 118; line = 0;</span></span><br><span class="line"><span class="variable">$stty</span> size</span><br><span class="line"><span class="comment"># 24 100</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例2.改变Ctrl+D的方法:</span></span><br><span class="line">stty eof <span class="string">"string"</span>  <span class="comment">#系统默认是Ctrl+D来表示文件的结束，而通过这种方法，可以改变！</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例3. 屏蔽显示</span></span><br><span class="line">stty -<span class="built_in">echo</span>   <span class="comment">#禁止回显</span></span><br><span class="line">stty <span class="built_in">echo</span>    <span class="comment">#打开回显</span></span><br><span class="line"><span class="comment">#测试方法:stty -echo;read;stty echo;read</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例4. 更简单的方法就是利用read命令的-t选项：</span></span><br><span class="line"><span class="variable">$stty</span> -g  <span class="comment">#save current settings</span></span><br><span class="line">4d00:5:bf:8a3b:3:1c:8:15:4:0:1:0:11:13:1a:0:12:f:17:16:0:0:0:0:0:0:0:0:0:0:0:0:0:0:0:0</span><br><span class="line">stty -icanon min 0 time 100　　<span class="comment">#set 10seconds,not 100seconds</span></span><br><span class="line"><span class="built_in">eval</span> <span class="built_in">read</span> varname　　          <span class="comment">#=read $varname</span></span><br><span class="line">stty <span class="string">"<span class="variable">$old_stty_settings</span>"</span>　　  <span class="comment">#recover settings</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#或者</span></span><br><span class="line"><span class="built_in">read</span> -t 10 varname</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h5 id="tput-命令"><a href="#tput-命令" class="headerlink" title="tput 命令"></a>tput 命令</h5><p>描述：tput 命令将通过 terminfo 数据库对您的终端会话进行初始化和操作<br>通过使用 tput，您可以更改几项终端功能，如移动或更改光标、更改文本属性，以及清除终端屏幕的特定区域</p>
<p><em>什么是terminfo数据库</em>?<br>答：UNIX系统上的数据库用于定义终端和打印机的属性及功能，包括各设备(例如终端和打印机)的行数和列数以及要发送至该色板的文本属性;<br>UNIX中的几个常用程序都依赖terminfo数据库提供这些属性以及许多其他类型，包括vi和emacs编辑器以及curses和man程序;</p>
<p><strong>光标属性</strong><br>在 UNIX shell 脚本中或在命令行中，移动光标或更改光标属性可能是非常有用的;<br>在向某一设备显示数据时，很多时候您并不希望看到光标,将光标转换为不可见可以使数据滚动时的屏幕看起来更整洁。</p>
<ul>
<li>要使光标不可见请使用 civis 选项（例如，tput civis）。</li>
<li>在数据完全显示之后可以使用 cnorm 选项将光标再次转变为可见。<figure class="image-box">
                <a rel=Shell脚本内建命令 href="https://img.weiyigeek.top/2019/20190710221038.png" target="_blank" title="WeiyiGeek.civis与cnorm" data-fancybox="images"><img src="https://img.weiyigeek.top/2019/20190710221038.png" alt="WeiyiGeek.civis与cnorm" title="" class=""></a>
                <p>WeiyiGeek.civis与cnorm</p>
            </figure>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#(1)字符串输出参数设置_</span></span><br><span class="line">tput　bel       <span class="comment">#警铃 </span></span><br><span class="line">tput　blink     <span class="comment">#闪烁模式 </span></span><br><span class="line">tput　bold      <span class="comment">#粗体 </span></span><br><span class="line">tput　clear     <span class="comment">#清屏 </span></span><br><span class="line"></span><br><span class="line">tput　civis     <span class="comment">#隐藏光标 </span></span><br><span class="line">tput　cnorm     <span class="comment">#不隐藏光标 </span></span><br><span class="line"></span><br><span class="line">tput　cup       <span class="comment">#移动光标到屏幕位置（x，y） </span></span><br><span class="line">tput　el        <span class="comment">#清除到行尾 </span></span><br><span class="line">tput　ell       <span class="comment">#清除到行首 </span></span><br><span class="line"></span><br><span class="line">tput　smso      <span class="comment">#启动突出模式 </span></span><br><span class="line">tput　rmso      <span class="comment">#停止突出模式 </span></span><br><span class="line">tput　smul      <span class="comment">#开始下划线模式 </span></span><br><span class="line">tput　rmul      <span class="comment">#结束下划线模式 </span></span><br><span class="line">tput　sc        <span class="comment">#保存当前光标位置 </span></span><br><span class="line">tput　rc        <span class="comment">#恢复光标到最后保存位置</span></span><br><span class="line"></span><br><span class="line">tput　sgr0      <span class="comment">#正常屏幕 </span></span><br><span class="line">tput　rev       <span class="comment">#逆转视图</span></span><br><span class="line"></span><br><span class="line">tput  setaf     <span class="comment">#字符颜色</span></span><br><span class="line">tput  setab     <span class="comment">#背景颜色</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#(2)数字输出参数设置</span></span><br><span class="line">cols      <span class="comment">#列数目</span></span><br><span class="line">ittab     <span class="comment">#设置宽度</span></span><br><span class="line">lines     <span class="comment">#屏幕行数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#(3)布尔输出参数设置</span></span><br><span class="line">chts      <span class="comment">#光标不可见</span></span><br><span class="line">hs        <span class="comment">#具有状态行</span></span><br></pre></td></tr></table></figure>
<p><strong>移动光标</strong><br>描述：使用 tput 可以方便地实现在各设备上移动光标的位置。通过在 tput 中使用 cup 选项或光标位置，您可以在设备的各行和各列中将光标移动到任意 X 或 Y 坐标，以<code>设备左上角的坐标为 (0,0)起点</code>。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#示例1.要在设备上将光标移动到第 5 列 (X) 的第 1 行 (Y)</span></span><br><span class="line"><span class="variable">$tput</span> cup 5 1</span><br><span class="line"></span><br><span class="line"><span class="comment">#示例2.此命令将使光标移动到第 23 列上的第 45 行。</span></span><br><span class="line"><span class="variable">$tput</span> cup 23 45</span><br></pre></td></tr></table></figure>
<p><strong>移动光标并显示信息</strong><br>另一种有用的光标定位技巧是移动光标，执行用于显示信息的命令，然后返回到前一光标位置：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(tput sc ; tput cup 23 45 ; <span class="built_in">echo</span> <span class="string">"Input from tput/echo at 23/45"</span> ; tput rc) <span class="comment"># 将信息显示到 stdout 中。</span></span><br></pre></td></tr></table></figure><br>注意：由于本文首先详细介绍了通过命令行执行 tput，因此您可能会觉得在自己的 subshell 中执行命令要比单独执行每条命令然后在每条命令执行之前显示提示更简洁。<br><figure class="image-box">
                <a rel=Shell脚本内建命令 href="https://img.weiyigeek.top/2019/20190710220852.png" target="_blank" title="WeiyiGeek.基础示例" data-fancybox="images"><img src="https://img.weiyigeek.top/2019/20190710220852.png" alt="WeiyiGeek.基础示例" title="" class=""></a>
                <p>WeiyiGeek.基础示例</p>
            </figure></p>
<p><strong>文本属性</strong><br>通过以下方式更改文本属性：使文本加粗、在文本下方添加下划线、更改背景颜色和前景颜色，以及逆转颜色方案等。</p>
<p>要更改文本的颜色，请使用 setb 选项（用于设置背景颜色）和 setf 选项（用于设置前景颜色）以及在 terminfo 数据库中分配的颜色数值:<br>0：黑色  1：蓝色  2：绿色  3：青色  4：红色  5：洋红色  6：黄色  7：白色</p>
<figure class="image-box">
                <a rel=Shell脚本内建命令 href="https://img.weiyigeek.top/2019/20190710221252.png" target="_blank" title="WeiyiGeek.颜色数值" data-fancybox="images"><img src="https://img.weiyigeek.top/2019/20190710221252.png" alt="WeiyiGeek.颜色数值" title="" class=""></a>
                <p>WeiyiGeek.颜色数值</p>
            </figure>
<p>实际案例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#示例1.执行以下示例命令可以将背景颜色更改为黄色，将前景颜色更改为红色：</span></span><br><span class="line">tput setb 6 tput setf 4</span><br><span class="line"><span class="comment">#要反显当前的颜色方案，只需执行</span></span><br><span class="line">tput rev  <span class="comment">#有时仅为文本着色还不够，也就是说，您想要通过另一种方式引起用户的注意。</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例2.可以通过两种方式达到这一目的：一是将文本设置为粗体，二是为文本添加下划线。</span></span><br><span class="line">* 要将文本更改为粗体 ：bold 选项</span><br><span class="line">* 要开始添加下划线 ： smul 选项</span><br><span class="line">* 在完成显示带下划线的文本后 ：rmul 选项</span><br><span class="line"></span><br><span class="line">$ tput bold;<span class="built_in">echo</span> <span class="string">"bold"</span>;tput smul; <span class="built_in">echo</span> <span class="string">"下划线"</span>; tput rmul; <span class="built_in">echo</span> <span class="string">"下划线文本"</span></span><br></pre></td></tr></table></figure></p>
<p>使输出的字符串有颜色，底色，加粗：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">printf</span> $(tput setaf 2; tput bold)<span class="string">'color show\n\n'</span>$(tput sgr0)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>((i=0; i&lt;=7; i++)); <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> $(tput setaf <span class="variable">$i</span>)<span class="string">"show me the money"</span>$(tput sgr0)</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span> <span class="string">'\n'</span>$(tput setaf 2; tput setab 0; tput bold)<span class="string">'background color show'</span>$(tput sgr0)<span class="string">'\n\n'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>((i=0,j=7; i&lt;=7; i++,j--)); <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> $(tput setaf <span class="variable">$i</span>; tput setab <span class="variable">$j</span>; tput bold)<span class="string">"show me the money"</span>$(tput sgr0)</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">exit</span> 0</span><br></pre></td></tr></table></figure></p>
<figure class="image-box">
                <a rel=Shell脚本内建命令 href="https://img.weiyigeek.top/2019/20190710222139.png" target="_blank" title="WeiyiGeek.示例" data-fancybox="images"><img src="https://img.weiyigeek.top/2019/20190710222139.png" alt="WeiyiGeek.示例" title="" class=""></a>
                <p>WeiyiGeek.示例</p>
            </figure>
<p>输出格式控制函数：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># $1 str       print string</span></span><br><span class="line"><span class="comment"># $2 color     0-7 设置颜色</span></span><br><span class="line"><span class="comment"># $3 bgcolor   0-7 设置背景颜色</span></span><br><span class="line"><span class="comment"># $4 bold      0-1 设置粗体</span></span><br><span class="line"><span class="comment"># $5 underline 0-1 设置下划线</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">format_output</span></span>()&#123;</span><br><span class="line">    str=<span class="variable">$1</span></span><br><span class="line">    color=<span class="variable">$2</span></span><br><span class="line">    bgcolor=<span class="variable">$3</span></span><br><span class="line">    bold=<span class="variable">$4</span></span><br><span class="line">    underline=<span class="variable">$5</span></span><br><span class="line">    normal=$(tput sgr0)  <span class="comment">#恢复正常水平</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">case</span> <span class="string">"<span class="variable">$color</span>"</span> <span class="keyword">in</span></span><br><span class="line">        0|1|2|3|4|5|6|7)</span><br><span class="line">            setcolor=$(tput setaf <span class="variable">$color</span>;) ;;</span><br><span class="line">        *)</span><br><span class="line">            setcolor=<span class="string">""</span> ;;</span><br><span class="line">    <span class="keyword">esac</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">case</span> <span class="string">"<span class="variable">$bgcolor</span>"</span> <span class="keyword">in</span></span><br><span class="line">        0|1|2|3|4|5|6|7)</span><br><span class="line">            setbgcolor=$(tput setab <span class="variable">$bgcolor</span>;) ;;</span><br><span class="line">        *)</span><br><span class="line">            setbgcolor=<span class="string">""</span> ;;</span><br><span class="line">    <span class="keyword">esac</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">"<span class="variable">$bold</span>"</span> = <span class="string">"1"</span> ]; <span class="keyword">then</span></span><br><span class="line">        setbold=$(tput bold;)</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        setbold=<span class="string">""</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">"<span class="variable">$underline</span>"</span> = <span class="string">"1"</span> ]; <span class="keyword">then</span></span><br><span class="line">        setunderline=$(tput smul;)</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        setunderline=<span class="string">""</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span> <span class="string">"<span class="variable">$setcolor</span> <span class="variable">$setbgcolor</span> <span class="variable">$setbold</span> <span class="variable">$setunderline</span> <span class="variable">$str</span> <span class="variable">$normal</span>\n"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">format_output <span class="string">"Yesterday Once More"</span> 3 5 1 1  <span class="comment"># 输出格式控制函数</span></span><br><span class="line"><span class="built_in">exit</span> 0</span><br></pre></td></tr></table></figure></p>
<figure class="image-box">
                <a rel=Shell脚本内建命令 href="https://img.weiyigeek.top/2019/20190710222523.png" target="_blank" title="WeiyiGeek.基础示例" data-fancybox="images"><img src="https://img.weiyigeek.top/2019/20190710222523.png" alt="WeiyiGeek.基础示例" title="" class=""></a>
                <p>WeiyiGeek.基础示例</p>
            </figure>
<p>光标属性例子<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">tput clear  <span class="comment"># clear the screen</span></span><br><span class="line">tput cup 3 15  <span class="comment"># Move cursor to screen location X,Y (top left is 0 0)</span></span><br><span class="line">tput setaf 3  <span class="comment"># a foreground colour using ANSI escape</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"XYX Corp LTD."</span></span><br><span class="line">tput sgr0 <span class="comment">#恢复正常</span></span><br><span class="line">tput cup 5 17  <span class="comment">#移动光标</span></span><br><span class="line">tput rev  <span class="comment"># Set reverse video mode</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"M A I N - M E N U"</span></span><br><span class="line">tput sgr0</span><br><span class="line">tput cup 7 15</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"1. User Management"</span></span><br><span class="line">tput cup 8 15</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"2. service Management"</span></span><br><span class="line">tput cup 9 15</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"3. Process Management"</span></span><br><span class="line">tput cup 10 15</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"4. Backup"</span></span><br><span class="line">tput bold <span class="comment"># Set bold mode</span></span><br><span class="line">tput cup 12 15</span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"Enter your choice [1-4] "</span> choice</span><br><span class="line">tput clear</span><br><span class="line">tput sgr0</span><br><span class="line">tput rc  <span class="comment">#恢复光标到最后保存位置</span></span><br></pre></td></tr></table></figure></p>
<figure class="image-box">
                <a rel=Shell脚本内建命令 href="https://img.weiyigeek.top/2019/20190710223115.png" target="_blank" title="WeiyiGeek.示例演示" data-fancybox="images"><img src="https://img.weiyigeek.top/2019/20190710223115.png" alt="WeiyiGeek.示例演示" title="" class=""></a>
                <p>WeiyiGeek.示例演示</p>
            </figure>
<hr>

<h4 id="0x01-shell-计算命令"><a href="#0x01-shell-计算命令" class="headerlink" title="0x01 shell 计算命令"></a>0x01 shell 计算命令</h4><p>描述：除了上面的declare命令可以计算数值外还有其他的一些命令如let/expr以及<code>bc(还能进制转换)</code>等等非常强大;</p>
<h5 id="let-运算"><a href="#let-运算" class="headerlink" title="let 运算"></a>let 运算</h5><p>描述：bash中用于计算的工具提供常用运算符还提供了方幂**运算符。<br><code>在变量的计算中不需要加上$来表示变量</code>，如果表达式的值是非0，那么返回的状态值是0；否则，返回的状态值是1。</p>
<p>语法：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> arg [arg ...]    <span class="comment">#arg代表运算式</span></span><br></pre></td></tr></table></figure></p>
<p>实际案例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#示例0。基础运算</span></span><br><span class="line">$ <span class="built_in">let</span> <span class="string">"t4 = 8 % 6"</span>;<span class="built_in">echo</span> <span class="variable">$t4</span>  <span class="comment">#2</span></span><br><span class="line">$ <span class="built_in">let</span> <span class="string">"t4 = 8 / 6"</span>;<span class="built_in">echo</span> <span class="variable">$t4</span>  <span class="comment">#1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例1.自加操作，自减操作</span></span><br><span class="line">no=1024</span><br><span class="line"><span class="built_in">let</span> no++;<span class="built_in">echo</span> <span class="variable">$no</span>  <span class="comment">#1025 #++i还是i++，let都是返回计算后的值</span></span><br><span class="line"><span class="built_in">let</span> no--;<span class="built_in">echo</span> <span class="variable">$no</span>  <span class="comment">#1024</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例2.简写形式</span></span><br><span class="line"><span class="built_in">let</span> no+=10;<span class="built_in">echo</span> <span class="variable">$no</span>  <span class="comment">#1033</span></span><br><span class="line"><span class="built_in">let</span> no-=20;<span class="built_in">echo</span> <span class="variable">$no</span>  <span class="comment">#1013   分别等同于let no=no+10，let no=no-20</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例3.直接采用变量名进行计算</span></span><br><span class="line"><span class="built_in">let</span> a=5+4 b=9-3;<span class="built_in">echo</span> <span class="variable">$a</span> <span class="variable">$b</span>  <span class="comment">#操作符左右不能有空格</span></span><br><span class="line"><span class="built_in">let</span> <span class="string">"t1 = ((a = 2 + 3, b = 2 - 1))"</span>;<span class="built_in">echo</span> <span class="string">"t1 = <span class="variable">$t1</span>, a = <span class="variable">$a</span>, b = <span class="variable">$b</span>"</span> <span class="comment">#操作符合左右可以有空格</span></span><br><span class="line"><span class="comment">#t1 = 1, a = 5, b = 1 #t1是减表达最后一个计算的值赋给它</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例4.阶乘</span></span><br><span class="line"><span class="built_in">let</span> t2=a**3;<span class="built_in">echo</span> <span class="variable">$t2</span>     <span class="comment">#125</span></span><br><span class="line"><span class="built_in">let</span> <span class="string">"t3 = a ** 3"</span>;<span class="built_in">echo</span> <span class="variable">$t3</span> <span class="comment">#125</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例5.其他计算</span></span><br><span class="line"><span class="built_in">let</span> <span class="string">"t4 = a || 1"</span>;<span class="built_in">echo</span> <span class="variable">$t4</span> <span class="comment">#1</span></span><br><span class="line"><span class="built_in">let</span> <span class="string">"t4 = a &amp;&amp; 0"</span>;<span class="built_in">echo</span> <span class="variable">$t4</span> <span class="comment">#0</span></span><br><span class="line"><span class="built_in">let</span> <span class="string">"t4 = 8 | 7"</span>;<span class="built_in">echo</span> <span class="variable">$t4</span>  <span class="comment">#15</span></span><br></pre></td></tr></table></figure></p>
<p><em>注意事项：</em></p>
<ul>
<li>在使用let命令进行变量计算时候,可以加<code>$变量名也可以直接是变量名</code>;</li>
<li>在使用let命令<code>采用&quot;&quot;包含的表达式里操作符左右两边可以存在空格,否则不能存在空格</code>;</li>
</ul>
<p><br></p>
<h5 id="expr-命令"><a href="#expr-命令" class="headerlink" title="expr 命令"></a>expr 命令</h5><p>描述：一款表达式计算工具，使用它完成表达式的求值操作。<code>注意点：expr的乘法运算是 \*，且变量必须要加$</code><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#关键说明</span></span><br><span class="line">length ：获取变量或表达式的长度</span><br></pre></td></tr></table></figure></p>
<p>实际案例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#示例1.基础运算</span></span><br><span class="line">a=1;b=2</span><br><span class="line">expr <span class="variable">$a</span> + <span class="variable">$b</span>  <span class="comment">#3 </span></span><br><span class="line">result=`expr 2 + 3`;<span class="built_in">echo</span> <span class="variable">$result</span>  <span class="comment">#5</span></span><br><span class="line">result=`expr 2 \* 3`;<span class="built_in">echo</span> <span class="variable">$result</span> <span class="comment">#6</span></span><br><span class="line">result=`expr 2 / 3`;<span class="built_in">echo</span> <span class="variable">$result</span> <span class="comment">#0</span></span><br><span class="line">result=`expr 2 % 3`;<span class="built_in">echo</span> <span class="variable">$result</span> <span class="comment">#2</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例2.新方式逻辑运算符使用(expr 里面的可以直接执行命令-)</span></span><br><span class="line">no1=0</span><br><span class="line">result=$(expr <span class="variable">$no1</span> &amp;&amp; whoami);<span class="built_in">echo</span> <span class="variable">$result</span> <span class="comment">#0  逻辑与</span></span><br><span class="line">result=$(expr <span class="variable">$no1</span> || whoami);<span class="built_in">echo</span> <span class="variable">$result</span> <span class="comment">#0  Administrator </span></span><br><span class="line"></span><br><span class="line"><span class="comment">#逻辑与。根据短路求值方式判断 如果为0，就不执行后面的whoami，否则执行</span></span><br><span class="line">ww=`expr 1 &amp;&amp; whoami`;<span class="built_in">echo</span> <span class="variable">$ww</span> <span class="comment">#1  Administrator </span></span><br><span class="line"><span class="comment">#逻辑或。根据短路求值方式判断 ,如果为1(&gt;0)，直接为真后面的whoami不执行,否则执行</span></span><br><span class="line">ww=`expr 12 || whoami`;<span class="built_in">echo</span> <span class="variable">$ww</span> <span class="comment">#12</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例3.获取表达式长度或者变量长度 (重点)</span></span><br><span class="line">$ num=1024</span><br><span class="line">$ expr length <span class="string">'$num'</span>  <span class="comment">#4</span></span><br><span class="line">$ expr length <span class="string">'12345678+987654321'</span>  <span class="comment">#18</span></span><br></pre></td></tr></table></figure></p>
<p><em>注意事项</em>：</p>
<ul>
<li>逻辑与或短路求值的特性非常需要注意,还要知道expr中可以执行shell命令(在写脚本的时候需要注意安全意识)</li>
</ul>
<p><br></p>
<h5 id="bc-命令"><a href="#bc-命令" class="headerlink" title="bc 命令"></a>bc 命令</h5><p>描述：<code>bash内置了对整数四则运算的支持，但是并不支持浮点运算</code>,而bc计算命令算术操作高级运算工具，它可以<code>执行浮点运算和一些高级函数</code>;</p>
<p>语法参数：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">bc(选项)(参数)</span><br><span class="line"></span><br><span class="line"><span class="comment">#选项</span></span><br><span class="line">-i：强制进入交互式模式；</span><br><span class="line">-l：定义使用的标准数学库；</span><br><span class="line">-w：对POSIX bc的扩展给出警告信息；</span><br><span class="line">-q：不打印正常的GNU bc环境信息；</span><br><span class="line"></span><br><span class="line"><span class="comment">#参数</span></span><br><span class="line">scale=2    <span class="comment">#将bc输出结果的小数位设置为2位。</span></span><br><span class="line">ibase=2/8/10/16   <span class="comment">#指定输入的进制</span></span><br><span class="line">obase=2/8/10/16  <span class="comment">#将bc输出结果进行进制转换</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#进制转换：</span></span><br><span class="line">二进制，Binary， 缩写BIN或B表示。</span><br><span class="line">八进制，Octal，缩写OCT或O，一种以8为基数的计数法，用O表示。</span><br><span class="line">十进制，英文为Decimal System，缩写Dec或D，来源于希腊文Decem，用D表示。</span><br><span class="line">十六进制，英文为，缩写HEX或用H表示。</span><br></pre></td></tr></table></figure></p>
<p>实际案例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#示例1.执行浮点运算</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"1.212*3"</span> | bc  <span class="comment">#3.636</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"scale=2;3/8"</span> | bc <span class="comment">#0.37 小数位设置为2位。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例2.进制转换可以指定进制数及其数值：</span></span><br><span class="line"><span class="comment">#echo "obase=输出进制数;ibase=输入进制数;输入的数字" | bc</span></span><br><span class="line">abc=192; <span class="built_in">echo</span> <span class="string">"obase=2;<span class="variable">$abc</span>"</span> | bc  <span class="comment">#$执行结果为：11000000，用bc将十进制转换成二进制。</span></span><br><span class="line">abc=11000000; <span class="built_in">echo</span> <span class="string">"obase=10;ibase=2;<span class="variable">$abc</span>"</span> | bc <span class="comment"># 执行结果为：192，用bc将二进制转换为十进制。</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"obase=16;ibase=10;30"</span> | bc <span class="comment"># 执行结果为： 1E</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"obase=10;ibase=16;FF"</span>|bc</span><br><span class="line"></span><br><span class="line"><span class="comment">#示例3. 计算平方和平方根：</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"10^10"</span> | bc</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"sqrt(100)"</span> | bc</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"scale=2;sqrt(10)"</span> | bc</span><br><span class="line"></span><br><span class="line"><span class="comment">#示例4.交互执行</span></span><br><span class="line">bc</span><br><span class="line"><span class="comment"># bc version 1.06.95</span></span><br><span class="line">1+3+5</span><br><span class="line">9</span><br><span class="line">10*52</span><br><span class="line">520</span><br><span class="line">10^2</span><br><span class="line">100</span><br><span class="line"><span class="comment"># bc 默认仅仅输出整数</span></span><br><span class="line">10/100</span><br><span class="line">0</span><br><span class="line"><span class="comment"># 如果要输出小数必须要执行scale=number即指定小数点后的位数;</span></span><br><span class="line">scale=3</span><br><span class="line">10/100</span><br><span class="line">.100</span><br><span class="line"></span><br><span class="line">128/256</span><br><span class="line">.500</span><br><span class="line"></span><br><span class="line">256*0.5</span><br><span class="line">128.0</span><br></pre></td></tr></table></figure><br><figure class="image-box">
                <a rel=Shell脚本内建命令 href="https://img.weiyigeek.top/2019/20190703225531.png" target="_blank" title="WeiyiGeek.BC示例" data-fancybox="images"><img src="https://img.weiyigeek.top/2019/20190703225531.png" alt="WeiyiGeek.BC示例" title="" class=""></a>
                <p>WeiyiGeek.BC示例</p>
            </figure></p>
<hr>

<h4 id="0x02-shell-判断选择"><a href="#0x02-shell-判断选择" class="headerlink" title="0x02 shell 判断选择"></a>0x02 shell 判断选择</h4><h5 id="test-命令"><a href="#test-命令" class="headerlink" title="test 命令"></a>test 命令</h5><p>描述：test命令是shell环境中测试条件表达式的实用工具,最短的定义可能是评估一个表达式，<code>与[]功能差不多</code>；</p>
<ul>
<li>如果条件为真，则返回一个 0 值</li>
<li>如果表达式不为真，则返回一个大于 0 的值 — 也可以将其称为假值。</li>
</ul>
<p>tips：检查最后所执行命令的状态的<code>最简便方法是使用 $? 值</code>。</p>
<p>基础语法：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">test</span> [选项] 文件</span><br><span class="line"></span><br><span class="line"><span class="comment">#按文件类型进行判断:</span></span><br><span class="line"><span class="variable">$test</span> -e file.txt</span><br><span class="line">-e 该『文件名』是否存在?(常用) </span><br><span class="line">-f 该『文件名』是否为文件(file)?(常用) </span><br><span class="line">-d 该『文件名』是否为目录(directory)?(常用) </span><br><span class="line">-b 该『文件名』是否为一个 block device 装置? </span><br><span class="line">-c 该『文件名』是否为一个 character device 装置? </span><br><span class="line">-p 该『文件名』是否为一个 FIFO 管道(pipe) 文件? </span><br><span class="line">-L 该『文件名』是否为一个符号链接文件? </span><br><span class="line">-s 侦测该文件名是否为『非空白文件』 Empty File? </span><br><span class="line">-S 该『文件名』是否为一个 Socket (套接字) 文件? </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 按文件权限进行判断</span></span><br><span class="line"><span class="variable">$test</span> -r filename </span><br><span class="line">-r 侦测该文件名是否具有『可读』的属性？ </span><br><span class="line">-w 侦测该文件名是否具有『可写』的属性？ </span><br><span class="line">-x 侦测该文件名是否具有『可执行』的属性且存在？ </span><br><span class="line">-u 侦测该文件名是否具有『SUID』的属性？ 使可执行文件除了root以外的其他用户可执行,</span><br><span class="line">-g 侦测该文件名是否具有『SGID』的属性？ 使可执行文件除了root以外的其他用户组可执行,</span><br><span class="line">-k 侦测该文件名是否具有『Sticky bit』的属性？ 可建立但不可删除与更改,也可以设置不可建立但可以更改（目录中）;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 两个文件之间的比较</span></span><br><span class="line"><span class="built_in">test</span> file1 -nt file2 </span><br><span class="line">-nt (newer than)判断 file1 是否比 file2 新 (New)</span><br><span class="line">-ot (older than)判断 file1 是否比 file2 旧 (Old)</span><br><span class="line">-ef 判断 file2 与 file2 是否为同一文件，可用在判断 hard link 的判定上。 主要意义在判定，两个文件是否均指向同一个 inode 号！ </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 判断表达式</span></span><br><span class="line">-a 或 &amp;&amp; ：逻辑与，<span class="string">"而且"</span>的意思，前后两个表达式都成立时整个测试结果才为真，否则为假</span><br><span class="line">-o 或 || ： 逻辑或，<span class="string">"或者"</span>的意思，操作符两边至少一个为真时，结果为真，否为为假</span><br><span class="line">! ：逻辑否，当制定条件不成立时，返回结果为真</span><br><span class="line"><span class="built_in">test</span> 表达式1 –a 表达式2     <span class="comment">#两个表达式都为真 返回0，否则返回1</span></span><br><span class="line"><span class="built_in">test</span> 表达式1 –o 表达式2     <span class="comment">#两个表达式有一个为真</span></span><br><span class="line"><span class="built_in">test</span> 表达式1 ! 表达式2       <span class="comment">#条件求反</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 判断字符串</span></span><br><span class="line"><span class="built_in">test</span> –n 字符串    <span class="comment">#字符串的长度非零</span></span><br><span class="line"><span class="built_in">test</span> –z 字符串    <span class="comment">#字符串的长度是否为零</span></span><br><span class="line"><span class="built_in">test</span> 字符串=字符串2       <span class="comment">#字符串是否相等，若相等返回true</span></span><br><span class="line"><span class="built_in">test</span> 字符串==字符串2       <span class="comment">#字符串是否相等，若相等返回true</span></span><br><span class="line"><span class="built_in">test</span> 字符串1!=字符串2      <span class="comment">#字符串是否不等，若不等反悔false</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#判断整数</span></span><br><span class="line"><span class="built_in">test</span> 整数1 -eq 整数2    <span class="comment">#整数相等</span></span><br><span class="line"><span class="built_in">test</span> 整数1 -ge 整数2    <span class="comment">#整数1大于等于整数2</span></span><br><span class="line"><span class="built_in">test</span> 整数1 -gt 整数2    <span class="comment">#整数1大于整数2</span></span><br><span class="line"><span class="built_in">test</span> 整数1 -le 整数2    <span class="comment">#整数1小于等于整数2</span></span><br><span class="line"><span class="built_in">test</span> 整数1 -lt 整数2    <span class="comment">#整数1小于整数2</span></span><br><span class="line"><span class="built_in">test</span> 整数1 -ne 整数2    <span class="comment">#整数1不等于整数2</span></span><br></pre></td></tr></table></figure></p>
<p>实际案例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#实例1.shell中常见的test的用法</span></span><br><span class="line"><span class="comment">#! 反相状态，如 test ! -x file ，当 file 不具有 x（执行权限） 时，回传 true</span></span><br><span class="line">$ <span class="built_in">test</span> ! -x file.exsit ;<span class="built_in">echo</span> $? <span class="comment">#0 为真</span></span><br><span class="line">$ <span class="built_in">test</span> -x file.exsit ;<span class="built_in">echo</span> $?   <span class="comment">#1 为假</span></span><br><span class="line"></span><br><span class="line">$ <span class="built_in">test</span> -s file.exsit -a -f file.exsit;<span class="built_in">echo</span> $?    <span class="comment">#0  两则为真则为真</span></span><br><span class="line">$ <span class="built_in">test</span> -s file.exsit -a ! -f file.exsit;<span class="built_in">echo</span> $?  <span class="comment">#1  否则为假</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例2.字符串判断</span></span><br><span class="line"><span class="built_in">test</span> -n <span class="string">"string"</span>;<span class="built_in">echo</span> $? <span class="comment"># 0  长度非0, 返回0</span></span><br><span class="line"><span class="built_in">test</span> -z <span class="string">"string"</span>;<span class="built_in">echo</span> $? <span class="comment"># 1  长度不为0，返回1</span></span><br><span class="line"><span class="built_in">test</span> <span class="string">"string"</span> != <span class="string">"String"</span>;<span class="built_in">echo</span> $?  <span class="comment">#0</span></span><br><span class="line"><span class="built_in">test</span> <span class="string">"string"</span> == <span class="string">"string"</span>;<span class="built_in">echo</span> $?  <span class="comment">#0</span></span><br><span class="line"><span class="variable">$test</span> -n <span class="string">"web"</span> &amp;&amp; <span class="built_in">echo</span> <span class="string">"is not null"</span> ||  <span class="built_in">echo</span> <span class="string">"is null"</span></span><br><span class="line"><span class="comment">#is not null</span></span><br><span class="line"><span class="variable">$test</span> -n <span class="string">""</span> &amp;&amp; <span class="built_in">echo</span> <span class="string">"is not null"</span> ||  <span class="built_in">echo</span> <span class="string">"is null"</span></span><br><span class="line"><span class="comment">#is null</span></span><br><span class="line"><span class="comment">#非常注意 = 等号两边的空格</span></span><br><span class="line"><span class="built_in">test</span> <span class="string">"web"</span> = <span class="string">"web"</span> &amp;&amp;  <span class="built_in">echo</span> <span class="string">"string is equal"</span> ||  <span class="built_in">echo</span> <span class="string">"string is not equal"</span></span><br><span class="line"><span class="comment">#string is equal        </span></span><br><span class="line"><span class="built_in">test</span> <span class="string">"web"</span> = <span class="string">"web1"</span> &amp;&amp;  <span class="built_in">echo</span> <span class="string">"string is equal"</span> ||  <span class="built_in">echo</span> <span class="string">"string is not equal"</span></span><br><span class="line"><span class="comment">#string is not equal    </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例3.整数判断</span></span><br><span class="line"><span class="built_in">test</span> 1 == 2;<span class="built_in">echo</span> $?  <span class="comment">#1 能使用 == != &gt; &lt; 捕获建议使用 -e1 -ne -gt -lt</span></span><br><span class="line"><span class="built_in">test</span> 1 == 1;<span class="built_in">echo</span> $?  <span class="comment">#0</span></span><br><span class="line"><span class="built_in">test</span> 1 != 1;<span class="built_in">echo</span> $?  <span class="comment">#1</span></span><br><span class="line"><span class="built_in">test</span> 1 != 2;<span class="built_in">echo</span> $?  <span class="comment">#0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例4.判断软硬链接</span></span><br><span class="line">ln -s file.exsit /tmp/link.file</span><br><span class="line"><span class="built_in">test</span> -L link.file;<span class="built_in">echo</span> $?   <span class="comment">#0</span></span><br><span class="line"><span class="built_in">test</span> ! -L link.file;<span class="built_in">echo</span> $? <span class="comment">#1</span></span><br><span class="line"><span class="built_in">test</span> link.file -ef file.exsit;<span class="built_in">echo</span> $? <span class="comment">#判断是不是同一链接 0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#其他示例</span></span><br><span class="line"><span class="variable">$test</span> 123 -eq 123 &amp;&amp; <span class="built_in">echo</span> <span class="string">"ture"</span> || <span class="built_in">echo</span> <span class="string">"false"</span>     <span class="comment">#判断AB相等 ture</span></span><br><span class="line"><span class="variable">$test</span> 123 -eq 1234 &amp;&amp; <span class="built_in">echo</span> <span class="string">"ture"</span> || <span class="built_in">echo</span> <span class="string">"false"</span>   <span class="comment">#false</span></span><br><span class="line"><span class="variable">$test</span> 123 -ne 1234 &amp;&amp; <span class="built_in">echo</span> <span class="string">"ture"</span> || <span class="built_in">echo</span> <span class="string">"false"</span>     <span class="comment">#判断A不等于B ture</span></span><br><span class="line"><span class="variable">$test</span> 123 -le 1234 &amp;&amp; <span class="built_in">echo</span> <span class="string">"ture"</span> || <span class="built_in">echo</span> <span class="string">"false"</span>     <span class="comment">#判断A小于等于B ture</span></span><br><span class="line"><span class="variable">$test</span> 123 -ge 1234 &amp;&amp; <span class="built_in">echo</span> <span class="string">"ture"</span> || <span class="built_in">echo</span> <span class="string">"false"</span>     <span class="comment">#判断A大于等于B false</span></span><br><span class="line"><span class="variable">$test</span> 1234 -ge 1234 &amp;&amp; <span class="built_in">echo</span> <span class="string">"ture"</span> || <span class="built_in">echo</span> <span class="string">"false"</span>   <span class="comment"># &gt;=  ture</span></span><br><span class="line"><span class="variable">$test</span> 123 -gt 12 &amp;&amp; <span class="built_in">echo</span> <span class="string">"ture"</span> || <span class="built_in">echo</span> <span class="string">"false"</span>         <span class="comment">#判断A大于B  ture</span></span><br><span class="line"><span class="variable">$test</span> 123 -lt 1234 &amp;&amp; <span class="built_in">echo</span> <span class="string">"ture"</span> || <span class="built_in">echo</span> <span class="string">"false"</span>        <span class="comment">#判断A小于B ture</span></span><br></pre></td></tr></table></figure></p>
<hr>

<h4 id="0x03-系统信号管理"><a href="#0x03-系统信号管理" class="headerlink" title="0x03 系统信号管理"></a>0x03 系统信号管理</h4><h5 id="trap-命令"><a href="#trap-命令" class="headerlink" title="trap 命令"></a>trap 命令</h5><p>描述：允许你来指定shell脚本要监视并拦截的Linux信号，主要用于在脚本中处理信号是一个shell内建命令,不仅仅处理Linux信号还能对脚本<code>退出（EXIT）、调试（DEBUG）、错误（ERR）、返回（RETURN）</code>等情况指定处理方式，等同于现实世界的红绿灯信号。</p>
<p>原来在shell中总是用数字来代表信号，而在实际开发中为了体现专业性应该使用信号的名字;</p>
<ul>
<li>比如按Ctrl+C会使脚本终止执行，实际上系统发送了SIGINT信号给脚本进程，SIGINT信号的默认处理方式就是退出程序。</li>
<li>如果要在Ctrl+C不退出程序，那么就得使用trap命令来指定一下SIGINT的处理方式了</li>
<li>信号组合键Ctrl+C组合键会产生SIGINT信号，Ctrl+Z会产生SIGTSTP信号。</li>
</ul>
<p>语法参数：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">用法：<span class="built_in">trap</span> [-lp] [[参数] 信号声明 ...]</span><br><span class="line">-p <span class="comment">#把所有信号打印出来</span></span><br><span class="line">-l <span class="comment">#把所有信号打印出来</span></span><br></pre></td></tr></table></figure></p>
<p>Linux信号常见信号：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$trap</span> -l <span class="comment">#把所有信号打印出来。</span></span><br><span class="line"></span><br><span class="line">信号 值 描述</span><br><span class="line">1 SIGHUP 挂起进程</span><br><span class="line">2 SIGINT 终止进程,通常使用Ctrl+C来触发</span><br><span class="line">3 SIGQUIT 停止进程,通常使用trl+/来触发</span><br><span class="line">6 SIGABRT 中止进程,通常因为某些验证的执行错误而引发</span><br><span class="line">9 SIGKILL 无条件终止进程</span><br><span class="line">14 SIGALRM 报警，通常用来处理超时信号</span><br><span class="line">15 SIGTERM 尽可能终止进程，通常在系统关键时候发送</span><br><span class="line">17 SIGSTOP 无条件停止进程，但不是终止进程</span><br><span class="line">18 SIGTSTP 停止或暂停进程，但不终止进程</span><br><span class="line">19 SIGCONT 继续运行停止的进程</span><br><span class="line">20 SIGTSFP 停止进程运行但是该信号可以被处理或者被忽略，用户键入susp字符时(通常是Ctrl+Z)发出这个信号</span><br><span class="line"></span><br><span class="line"><span class="comment">#全部信号</span></span><br><span class="line">1) SIGHUP       2) SIGINT       3) SIGQUIT      4) SIGILL       5) SIGTRAP</span><br><span class="line"> 6) SIGABRT      7) SIGBUS       8) SIGFPE       9) SIGKILL     10) SIGUSR1</span><br><span class="line">11) SIGSEGV     12) SIGUSR2     13) SIGPIPE     14) SIGALRM     15) SIGTERM</span><br><span class="line">16) SIGSTKFLT   17) SIGCHLD     18) SIGCONT     19) SIGSTOP     20) SIGTSTP</span><br><span class="line">21) SIGTTIN     22) SIGTTOU     23) SIGURG      24) SIGXCPU     25) SIGXFSZ</span><br><span class="line">26) SIGVTALRM   27) SIGPROF     28) SIGWINCH    29) SIGIO       30) SIGPWR</span><br><span class="line">31) SIGSYS      34) SIGRTMIN    35) SIGRTMIN+1  36) SIGRTMIN+2  37) SIGRTMIN+3</span><br><span class="line">38) SIGRTMIN+4  39) SIGRTMIN+5  40) SIGRTMIN+6  41) SIGRTMIN+7  42) SIGRTMIN+8</span><br><span class="line">43) SIGRTMIN+9  44) SIGRTMIN+10 45) SIGRTMIN+11 46) SIGRTMIN+12 47) SIGRTMIN+13</span><br><span class="line">48) SIGRTMIN+14 49) SIGRTMIN+15 50) SIGRTMAX-14 51) SIGRTMAX-13 52) SIGRTMAX-12</span><br><span class="line">53) SIGRTMAX-11 54) SIGRTMAX-10 55) SIGRTMAX-9  56) SIGRTMAX-8  57) SIGRTMAX-7</span><br><span class="line">58) SIGRTMAX-6  59) SIGRTMAX-5  60) SIGRTMAX-4  61) SIGRTMAX-3  62) SIGRTMAX-2</span><br><span class="line">63) SIGRTMAX-1  64) SIGRTMAX</span><br></pre></td></tr></table></figure></p>
<p>实际案例:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#忽略信号signals，可以同时指定多个信号</span></span><br><span class="line">格式：<span class="built_in">trap</span> <span class="string">""</span> signals</span><br><span class="line"><span class="built_in">trap</span> <span class="string">""</span> INT <span class="comment">#表明忽略SIGINT信号，按Ctrl+C也不能使脚本退出</span></span><br><span class="line"><span class="built_in">trap</span> <span class="string">""</span> HUP <span class="comment">#表明忽略SIGHUP信号，即网络断开时也不能使脚本退出。</span></span><br><span class="line"><span class="built_in">trap</span> <span class="string">"echo $$"</span> 1 2 3 15 20</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#当shell接收到signals指定的信号时，执行commands命令</span></span><br><span class="line">格式：<span class="built_in">trap</span> <span class="string">"commands"</span> EXIT <span class="comment">#脚本退出时执行commands指定的命令</span></span><br><span class="line">格式：<span class="built_in">trap</span> <span class="string">"commands"</span> DEBUG <span class="comment">#在脚本执行时打印调试信息，比如打印将要执行的命令及参数列表</span></span><br><span class="line">格式：<span class="built_in">trap</span> <span class="string">"commands"</span> ERR  <span class="comment">#当命令出错，退出码非0，执行commands指定的命令。</span></span><br><span class="line">格式：<span class="built_in">trap</span> <span class="string">"commands"</span> ERR  <span class="comment">#当命令出错，退出码非0，执行commands指定的命令</span></span><br><span class="line"><span class="built_in">trap</span> <span class="string">"commands"</span> signals  <span class="comment">#重点</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#把当前的trap设置打印出来</span></span><br><span class="line"><span class="built_in">trap</span> -p <span class="comment">#显示</span></span><br><span class="line"><span class="built_in">trap</span> -p signal <span class="comment">#设置 </span></span><br><span class="line"></span><br><span class="line"><span class="comment">#删除捕获令形式</span></span><br><span class="line">格式: <span class="built_in">trap</span> -- ***</span><br><span class="line"><span class="built_in">trap</span> -- SIGINT</span><br><span class="line"><span class="built_in">trap</span> -- 1 2 3 15 20</span><br></pre></td></tr></table></figure></p>
<p>基础实例:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#使用案例1：</span></span><br><span class="line"><span class="built_in">trap</span> <span class="string">"echo  Ctrl+C 按下"</span> INT</span><br><span class="line"><span class="built_in">trap</span> -p <span class="comment">#trap -p INT</span></span><br><span class="line"><span class="comment">#trap -- 'echo  Ctrl+C 按下' SIGINT</span></span><br><span class="line">[root@master bash-5.0]<span class="comment"># ^CCtrl+C 按下</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#实际案例2：Trap终止信号捕获(可直接调用函数)</span></span><br><span class="line"><span class="built_in">trap</span> <span class="string">"Global_TrapSigExit_Sig1"</span> 1</span><br><span class="line"><span class="built_in">trap</span> <span class="string">"Global_TrapSigExit_Sig2"</span> 2</span><br><span class="line"><span class="comment"># Trap终止信号1 - 处理</span></span><br><span class="line"><span class="function"><span class="title">Global_TrapSigExit_Sig1</span></span>() &#123;</span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">"\n\n<span class="variable">$&#123;Msg_Error&#125;</span>Caught Signal SIGHUP, Exiting ...\n"</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># Trap终止信号2 - 处理 (Ctrl+C)</span></span><br><span class="line"><span class="function"><span class="title">Global_TrapSigExit_Sig2</span></span>() &#123;</span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">"\n\n<span class="variable">$&#123;Msg_Error&#125;</span>Caught Signal SIGINT (or Ctrl+C), Exiting ...\n"</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>shell脚本案例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># test trap command</span></span><br><span class="line"><span class="built_in">trap</span> <span class="string">"echo 'Sorry! I have trapped Ctrl-C'"</span> SIGINT <span class="comment">#关键点</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> This is a <span class="built_in">test</span> script</span><br><span class="line"></span><br><span class="line">count=1</span><br><span class="line"><span class="keyword">while</span> [ <span class="variable">$count</span> -le 10 ]</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"Loop <span class="variable">$count</span>"</span></span><br><span class="line">  sleep 1</span><br><span class="line">  count=$[ <span class="variable">$count</span> + 1 ]</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> The end.</span><br><span class="line"></span><br><span class="line"><span class="comment">#运行结果：</span></span><br><span class="line">This is a <span class="built_in">test</span> script</span><br><span class="line">Loop 1</span><br><span class="line">Loop 2</span><br><span class="line">^CSorry! I have trapped Ctrl-C  <span class="comment">#关键点-按照输出定义的退出操作</span></span><br><span class="line">Loop 3</span><br><span class="line">Loop 4</span><br><span class="line">^CSorry! I have trapped Ctrl-C</span><br><span class="line">Loop 5</span><br><span class="line">Loop 6</span><br><span class="line">Loop 7</span><br><span class="line">Loop 8</span><br><span class="line">^CSorry! I have trapped Ctrl-C</span><br><span class="line">Loop 9</span><br><span class="line">Loop 10</span><br><span class="line">The end.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例2.INT信号当我们CTRL+C执行触发该信号则清理文件</span></span><br><span class="line"><span class="built_in">trap</span> <span class="string">"find /tmp -type -f -name 'weiyi_' | xargs rm -f &amp;&amp; exit"</span> INT </span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    touch /tmp/weiyi_$(date +%F-%T)</span><br><span class="line">    usleep 5000 <span class="comment"># 5000微秒us</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></p>
<p>除了在shell脚本中捕获信号外，也可以在shell退出时捕获，在trap命令后加上EXIT信号就行。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># test trap command</span></span><br><span class="line"><span class="built_in">trap</span> <span class="string">"echo Goodbye."</span> EXIT  <span class="comment">#关键点值得学习</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> This is a <span class="built_in">test</span> script</span><br><span class="line"></span><br><span class="line">count=1</span><br><span class="line"><span class="keyword">while</span> [ <span class="variable">$count</span> -le 10 ]</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"Loop <span class="variable">$count</span>"</span></span><br><span class="line">  sleep 1</span><br><span class="line">  count=$[ <span class="variable">$count</span> + 1 ]</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> The end.</span><br><span class="line"></span><br><span class="line"><span class="comment">#执行结果</span></span><br><span class="line">This is a <span class="built_in">test</span> script.</span><br><span class="line">........</span><br><span class="line">The end.</span><br><span class="line">Goodbye.  <span class="comment">#关键点</span></span><br></pre></td></tr></table></figure></p>
<p>高级使用trap与跳板机进行联用:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#shell跳板机(触发信号后屏蔽信号) - weiyigeek.sh</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#Linux中shell信号处理</span></span><br><span class="line"><span class="keyword">function</span> trapper()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">trap</span> <span class="string">''</span> INT QUIT TSTP TERM HUP</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#Linux中菜单设置</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">menu</span></span>()&#123;</span><br><span class="line">cat &lt;&lt;-EOF</span><br><span class="line"><span class="comment">################ HOST list ###############</span></span><br><span class="line">    1) Localhost</span><br><span class="line">    2) 192.168.1.1</span><br><span class="line">    3) 10.10.107.221</span><br><span class="line">    4) <span class="built_in">exit</span></span><br><span class="line"><span class="comment">################ HOST list ###############</span></span><br><span class="line">EOF</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#输入选择</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">host</span></span>()&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="variable">$1</span> <span class="keyword">in</span></span><br><span class="line">        1) ssh -p22 <span class="variable">$USER</span>@localhost ;;</span><br><span class="line">        2) ssh -p3125 root@192.168.1.1 ;;</span><br><span class="line">        3) ssh -p22 root@10.10.107.221 ;;</span><br><span class="line">        4|*) <span class="built_in">echo</span> <span class="string">"退出SHELL"</span>;<span class="built_in">exit</span> ;;</span><br><span class="line">    <span class="keyword">esac</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">while</span> :</span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">        trapper</span><br><span class="line">        clear</span><br><span class="line">        menu</span><br><span class="line">        <span class="built_in">read</span> -p <span class="string">"Please slect:"</span> num</span><br><span class="line">        host <span class="variable">$num</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">&#125;</span><br><span class="line">main</span><br><span class="line"></span><br><span class="line"><span class="comment">##配置启动调用文件</span></span><br><span class="line"><span class="comment">##cat /etc/profile.d/login.sh</span></span><br><span class="line">[ <span class="variable">$UID</span> -ne 0 ] &amp;&amp; [<span class="variable">$UID</span> -ne 500 ] &amp;&amp; 。 /opt/weiyigeek.sh</span><br></pre></td></tr></table></figure><br><figure class="image-box">
                <a rel=Shell脚本内建命令 href="https://img.weiyigeek.top/2019/1/20190805123659.png" target="_blank" title="WeiyiGeek.shell跳板机" data-fancybox="images"><img src="https://img.weiyigeek.top/2019/1/20190805123659.png" alt="WeiyiGeek.shell跳板机" title="" class=""></a>
                <p>WeiyiGeek.shell跳板机</p>
            </figure></p>
<p>补充知识点：</p>
<ul>
<li>在/etc/profile.d/目录中存放的脚本会在您登录shell的时候自动执行</li>
</ul>
<hr>

<h4 id="0x04-命令行帮助"><a href="#0x04-命令行帮助" class="headerlink" title="0x04 命令行帮助"></a>0x04 命令行帮助</h4><h5 id="complete-命令"><a href="#complete-命令" class="headerlink" title="complete 命令"></a>complete 命令</h5><p>描述:该命令是bash shell的一个内建命令,使用 man complete 或 man bash 可以查看其帮助.</p>
<p>该命令的作用就是规定参数如何自动补全包括：</p>
<ul>
<li>Path-name completion 路径名的补全</li>
<li>File-name completion 文件名的补全</li>
<li>User-name completion 用户名的补全</li>
<li>Host-name completion 主机名的补全</li>
<li>Variable-name completion 变量名的补全</li>
</ul>
<p>基础语法:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法</span></span><br><span class="line">complete [-abcdefgjksuv] [-pr] [-DE] [-o 选项] [-A 动作] [-G 全局模式] [-W 词语列表]  [-F 函数] [-C 命令] [-X 过滤模式] [-P 前缀] [-S 后缀] [名称 ...]</span><br><span class="line"><span class="comment"># 其他选项(如果指定)具有以下含义应该引用-G、-W和-X选项的参数(如果必要，还可以引用-P和-S选项)，以防止在调用完整的内建程序之前扩展它们。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 参数</span></span><br><span class="line"><span class="string">"-o bashdefault"</span>：如果没有生成补全条目，就使用bash默认的其它补全。</span><br><span class="line"><span class="string">"-o default"</span>：如果没有生成补全条目，就使用<span class="string">"readline"</span>默认的文件名补全。</span><br><span class="line"><span class="string">"-o dirnames"</span>：如果没有生成补全条目，就进行目录名补全。</span><br><span class="line"><span class="string">"-o filenames"</span>：告诉<span class="string">"readline"</span>生成文件名，以便进行与文件名相关的处理，例如在目录名后面加上斜杠，引用特殊字符，去掉行尾的空格，目的是用于shell函数。</span><br><span class="line"><span class="string">"-o noquote"</span>：告诉<span class="string">"readline"</span>不引用文件名，默认会进行引用。</span><br><span class="line"><span class="string">"-o nospace"</span>：告诉<span class="string">"readline"</span>在补全的名称后不添加空格，默认添加空格。</span><br><span class="line"><span class="string">"-o plusdirs"</span>：生成补全条目之后，还会进行目录名补全并把结果添加到其它动作得到的结果中。</span><br><span class="line"></span><br><span class="line"><span class="string">"-A alias"</span>：别名，同选项<span class="string">"-a"</span>。</span><br><span class="line"><span class="string">"-A arrayvar"</span>：数组变量名。</span><br><span class="line"><span class="string">"-A binding"</span>：<span class="string">"readline"</span>键绑定名。</span><br><span class="line"><span class="string">"-A builtin"</span>：shell内建命令名，同选项<span class="string">"-b"</span>。</span><br><span class="line"><span class="string">"-A command"</span>：命令名，同选项<span class="string">"-c"</span>。</span><br><span class="line"><span class="string">"-A directory"</span>：目录名，同选项<span class="string">"-d"</span>。</span><br><span class="line"><span class="string">"-A disabled"</span>：不可用的shell内建命令名。</span><br><span class="line"><span class="string">"-A enabled"</span>：可用的shell内建命令名。</span><br><span class="line"><span class="string">"-A export"</span>：导出的shell变量名，同选项<span class="string">"-e"</span>。</span><br><span class="line"><span class="string">"-A file"</span>：文件名，同选项<span class="string">"-f"</span>。</span><br><span class="line"><span class="string">"-A function"</span>：shell函数名。</span><br><span class="line"><span class="string">"-A group"</span>：组名，同选项<span class="string">"-g"</span>。</span><br><span class="line"><span class="string">"-A helptopic"</span>：内建命令<span class="built_in">help</span>支持的帮助主题。</span><br><span class="line"><span class="string">"-A hostname"</span>：主机名，从shell环境变量HOSTFILE中获取。</span><br><span class="line"><span class="string">"-A job"</span>：作业名，同选项<span class="string">"-j"</span>。</span><br><span class="line"><span class="string">"-A keyword"</span>：shell保留字，同选项<span class="string">"-k"</span>。</span><br><span class="line"><span class="string">"-A running"</span>：正在运行的作业名。</span><br><span class="line"><span class="string">"-A service"</span>：服务名，同选项<span class="string">"-s"</span>。</span><br><span class="line"><span class="string">"-A setopt"</span>：内建命令<span class="built_in">set</span>的选项<span class="string">"-o"</span>可用的参数。</span><br><span class="line"><span class="string">"-A shopt"</span>：内建命令<span class="built_in">shopt</span>可接受的选项名。</span><br><span class="line"><span class="string">"-A signal"</span>：信号名。</span><br><span class="line"><span class="string">"-A stopped"</span>：暂停的作业名。</span><br><span class="line"><span class="string">"-A user"</span>：用户名，同选项<span class="string">"-u"</span>。</span><br><span class="line"><span class="string">"-A variable"</span>：所有的shell变量名，同选项<span class="string">"-v"</span>。</span><br><span class="line"></span><br><span class="line"><span class="string">"-C command"</span>：在子shell中执行命令，并把其结果作为补全条目。</span><br><span class="line"></span><br><span class="line"><span class="string">"-F function"</span>：在当前的shell环境中执行函数<span class="keyword">function</span>，执行时，参数<span class="string">"<span class="variable">$1</span>"</span>表示那个参数正在进行补全的命令名，参数<span class="string">"<span class="variable">$2</span>"</span>表示补全的名称，参数<span class="string">"<span class="variable">$3</span>"</span>表示补全的名称前面的单词，表示结束执行时从数组变量COMPREPLY中获取补全条目。</span><br><span class="line"></span><br><span class="line"><span class="string">"-G globpat"</span>：使用文件名扩展模式globpat进行扩展以生成可能的补全条目。</span><br><span class="line"><span class="string">"-P prefix"</span>：在所有的选项应用到补全结果后，在结果前添加前缀prefix。</span><br><span class="line"><span class="string">"-S suffix"</span>：在所有的选项应用到补全结果后，在结果后添加后缀suffix。</span><br><span class="line"><span class="string">"-W wordlist"</span>：使用特殊变量IFS中的字符拆分单词列表wordlist，并扩展拆分后的每个单词，结果中与待补全单词</span><br><span class="line">匹配的条目就是补全条目。</span><br><span class="line"><span class="string">"-X filterpat"</span>：filterpat是进行文件名扩展时使用的模式，它作用于通过前面的选项和参数生成的补全列表，并把每个与过滤模式匹配的条目删除，模式中前导的叹号表示否定，这时会删除与过滤模式不匹配的条目。</span><br></pre></td></tr></table></figure></p>
<p>基础实例:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#示例1.实现sudo自动补齐</span></span><br><span class="line">complete -c sudo <span class="comment">#临时生效</span></span><br><span class="line">cat &gt;&gt; ~/.bashrc &lt;&lt;<span class="string">'END'</span></span><br><span class="line">complete -c sudo</span><br><span class="line">END</span><br><span class="line"></span><br><span class="line">[root@node2 ~]<span class="comment"># complete -c sudo</span></span><br><span class="line">[root@node2 ~]<span class="comment"># sudo</span></span><br><span class="line">Display all 1563 possibilities? (y or n)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#示例2.函数绑定</span></span><br><span class="line">cat &gt; /etc/bash_completion.d/Testcmd&lt;&lt;<span class="string">'end'</span></span><br><span class="line"><span class="comment"># Completion</span></span><br><span class="line"><span class="function"><span class="title">_Testcmd</span></span>()&#123;</span><br><span class="line">   <span class="built_in">local</span> cur opts</span><br><span class="line">   <span class="comment">#1.数组变量(包含当前命令行中每个单独的子)，其中COMP-CWORD 表示当前光标位置在$&#123;COMP_WORDS&#125; 中的索引;</span></span><br><span class="line">   cur=<span class="string">"<span class="variable">$&#123;COMP_WORDS[COMP-CWORD]&#125;</span>"</span></span><br><span class="line">   <span class="comment">#2.命令选项</span></span><br><span class="line">   opts=<span class="string">"--help --version"</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">if</span> [[ <span class="variable">$&#123;cur&#125;</span> == -* ]];<span class="keyword">then</span></span><br><span class="line">      <span class="comment">#3.生成可供补全的选项列表</span></span><br><span class="line">      COMPREPLY=($(compgen -W <span class="string">"<span class="variable">$&#123;opts&#125;</span>"</span> -- <span class="variable">$&#123;cur&#125;</span>))</span><br><span class="line">   <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#4.补全函数绑定到具体的shell脚本中</span></span><br><span class="line">complete -F _Testcmd Testcmd</span><br><span class="line">end</span><br></pre></td></tr></table></figure></p>

        </div>
        
        <!-- 微信公众号关注/文章版权复制 -->
        
        <div id="btw-mask" style="position: fixed; top: 0px; right: 0px; bottom: 0px; left: 0px; opacity: 0.7; z-index: 999; background: rgb(0, 0, 0); display:none"></div>
<div id="btw-modal" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 360px; text-align: center; font-size: 13px; background: rgb(255, 255, 255); border-radius: 10px; z-index: 9999; font-family: PingFangSC-Regular, sans-serif;display:none">
<span id="btw-modal-close-btn" style="position: absolute; top: 5px; right: 15px; line-height: 1.8; font-size: 15px; cursor: pointer; opacity: 0.2; z-index: 9999; color: rgb(0, 0, 0); background: none; border: none; outline: none;">X</span>
<p id="btw-modal-header" style="margin-top: 40px; line-height: 1.8; font-size: 13px; ">
<b style="color:#6190e8;">你好看友,欢迎关注博主微信公众号哟! ❤ <br> 这将是我持续更新文章的动力源泉，谢谢支持！(๑′ᴗ‵๑) </b> <br> 如不想关注请点击右上角的【X】即可关闭继续浏览文章.<br>  <b style="color:red;"> 温馨提示: 未解锁的用户不能粘贴复制文章内容哟!</b> <br>
<br>Method 1.Please visit <strong><a href="https://twitter.com/WeiyiGeek" target="_blank" rel="noopener" style="color: rgb(240, 65, 52);text-decoration:underline;">【My Twitter】</a></strong>. There is an article verification code in the homepage.
<br>方式2.请访问本博主的B站<strong><a href="https://space.bilibili.com/385802642" target="_blank" rel="noopener" style="color: rgb(240, 65, 52);text-decoration:underline;">【WeiyiGeek】</a></strong>首页关注UP主,<br>将自动随机获取解锁验证码。
<br>方式3.扫一扫下方二维码，关注本站<strong>官方公众号</strong><br>
回复：<strong style="color: rgb(240, 65, 52);">验证码</strong>
将获取<strong style="color: rgb(240, 65, 52);">解锁(有效期7天)</strong>本站所有技术文章哟!</p>
<img src="/img/wechat-search.png" style="width: 300px; margin-top: 10px;">
<div id="btw-modal-input-code" style="margin-top: 20px; background: rgb(255, 255, 255);">
  <input id="btw-modal-input" type="number" minlength="4" maxlength="4" placeholder="请输入验证码|Verification Code"
    style="width: 165px; height: 32px; line-height: 32px; padding: 0px 10px; margin: 0px 10px; font-size: 13px; text-rendering: auto; text-transform: none; cursor: text; outline: none; box-sizing: border-box; border: 1px solid rgb(221, 221, 221); -webkit-appearance: textfield; background-color: white; -webkit-rtl-ordering: logical;"/>
  <button id="btw-submit-btn" onclick="yzm_vertify()"
    style="padding: 0px 20px; height: 32px; font-size: 14px; outline: none; border: none; color: rgb(255, 255, 255); background: rgb(222, 104, 109); cursor: pointer;">提
    交</button> </div>
<p id="btw-footer" style="margin: 40px 0px 20px; color: rgb(153, 153, 153);">@WeiyiGeek - 为了能到远方，脚下的每一步都不能少</p>
</div>
           

        <!-- Google 广告 -->
        
<ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-9134434519967436" data-ad-slot="7905848205"></ins>
  

        
<hr/>
<div style="text-align: center;font-weight: bold;">
  <p> 欢迎各位志同道合的朋友一起学习交流，如文章有误请在下方留下您宝贵的经验知识，个人邮箱地址<b style="color:#ff654e"><code>【master#weiyigeek.top】</code></b>或者个人公众号<b style="color:#ff654e"><code>【WeiyiGeek】</code></b>联系我。 </p>
  <p> 更多文章来源于<b style="color:#03a9f4">【WeiyiGeek Blog - 为了能到远方，脚下的每一步都不能少】</b>, 个人首页地址( <a style="color: #03a9f4;" href="https://weiyigeek.top" target="_blank"> https://weiyigeek.top </a> )</p>
<!-- 

  <ul style="font-weight: bolder;">
    <li>
      <p><span style="color: #03a9f4">echo&nbsp;&nbsp;"【点个赞】，动动你那粗壮的拇指或者芊芊玉手，亲！"</span></p>
    </li>
    <li>
      <p><span style="color: #ff9201">printf("%s",&nbsp;"【投个币】，万水千山总是情，投个硬币行不行，亲！")</span></p>
    </li>
    <li>
      <p><span style="color: #02a2ff">fmt.Printf("【收个藏】，阅后即焚不吃灰，亲！")&nbsp;&nbsp;</span></p>
    </li>
    <li>
      <p><span style="color:red">console.info("【转个发】，让更多的志同道合的朋友一起学习交流，亲！")</span></p>
    </li>
    <li>
      <p><span style="color: #ff654e">System.out.println("【关个注】，后续浏览查看不迷路哟，亲！")</span></p>
    </li>
  </ul> -->
  <div>
    <img src="/img/share-wechat.jpg" class="img-responsive" alt="扫描Follow(关注)WeiyiGeek公众号与Visit(浏览)极客全栈修炼小程序" >
    <p>专栏书写不易，如果您觉得这个专栏还不错的，请给这篇专栏 <b style="color: red;">【点个赞、投个币、收个藏、关个注、转个发、赞个助】</b>，这将对我的肯定，我将持续整理发布更多优质原创文章！。</p>
    <img src="/img/weiyigeek.jpg" class="img-responsive" alt="WeiyiGeek-banner">
  </div>
</div>
  <hr>
  

  <blockquote class="post-copyright">
    <div class="content">
      
        
<span class="post-time">
    最后更新时间：<time datetime="2023-01-31T02:29:09.172Z" itemprop="dateUpdated">2023-01-31 10:29:09</time>
</span><br>


        <span>文章原始路径：<a href="https://github.com/WeiyiGeek/blog/edit/master/source/_posts/系统运维/Linux/常用命令/脚本常用类命令/Shell脚本内建命令.md" target="_blank" rel="noopener noreferrer">_posts/系统运维/Linux/常用命令/脚本常用类命令/Shell脚本内建命令.md</a></span><br>
         <span class="copy-copyright">转载注明出处，原文地址：<a href="/2019/6-3-178.html" target="_blank" rel="external">https://blog.weiyigeek.top/2019/6-3-178.html</a></span><br>本站文章内容遵循 <a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a> 
    </div>
    <footer>
      <a href="https://blog.weiyigeek.top">
        <img src="/img/avatar.jpg" alt="WeiyiGeek">
        WeiyiGeek
      </a>
    </footer>
  </blockquote>


        
            <div class="page-reward">
  <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-rectangle waves-light">☕️ 请作者喝杯咖啡!</a>
</div>
            
        
        <div class="post-footer">
            
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/shell/" rel="tag">shell</a></li></ul>

            <div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://blog.weiyigeek.top/2019/6-3-178.html&title=《Shell脚本内建命令》 — WeiyiGeek Blog&pic=https://blog.weiyigeek.top/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.weiyigeek.top/2019/6-3-178.html&title=《Shell脚本内建命令》 — WeiyiGeek Blog&source=[TOC]" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.weiyigeek.top/2019/6-3-178.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Shell脚本内建命令》 — WeiyiGeek Blog&url=https://blog.weiyigeek.top/2019/6-3-178.html&via=https://blog.weiyigeek.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://blog.weiyigeek.top/2019/6-3-178.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>

        </div>
        
          <!-- 评论组件 -->


<div id="gitalk-container"></div>
<script type="text/javascript" src="/js/plugins/gitalk.min.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/custom/gitalk.init.js?v=1.6.6"></script>
        
    </div>
    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="prev">
      <a href="/2019/6-3-144.html" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">压缩解压类命令一览表</h4>
      </a>
    </div>
  

  
    <div class="next">
      <a href="/2019/6-3-140.html" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">Binary程序分析查看类命令</h4>
      </a>
    </div>
  
</nav>


    
    
        <aside class="post-widget">
            <nav class="post-toc-wrap" id="post-toc">
                <strong>目录</strong>
                <ol class="post-toc"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#0x00-shell-内建命令"><span class="post-toc-number">1.</span> <span class="post-toc-text">0x00 shell 内建命令</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#0x01-shell-计算命令"><span class="post-toc-number">2.</span> <span class="post-toc-text">0x01 shell 计算命令</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#0x02-shell-判断选择"><span class="post-toc-number">3.</span> <span class="post-toc-text">0x02 shell 判断选择</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#0x03-系统信号管理"><span class="post-toc-number">4.</span> <span class="post-toc-text">0x03 系统信号管理</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#0x04-命令行帮助"><span class="post-toc-number">5.</span> <span class="post-toc-text">0x04 命令行帮助</span></a></li></ol>
            </nav>
            <div class="toc-bar"><div>
        </aside>
    
    <!-- 
  <div class="post-wechat" style="position:fixed;top: 360px;bottom: 500px;right: 3%;width: 190px;text-align: center;">
    <p><b>关注【全栈工程师修炼指南】</b></p>
    <img src="/img/wechat-gzh.jpg" class="img-responsive" alt="weiyigeek">
    <p><b>欢迎添加【作者】微信</b></p>
    <img src="/img/wehat.jpg" class="img-responsive" alt="weiyigeek">
  </div>
 -->

    <!-- 支付宝微信文章赞赏 -->
    
      <div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        如果此篇文章对您有帮助，就请作者喝杯 Coffee ☕️☕️!
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardwechat" src="/img/reward-wechat.jpg" height="250" height="250" alt="微信打赏二维码">
            <img id="rewardalipay" src="/img/reward-alipay.png" height="250" height="250" alt="支付宝打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <!-- <input id="rewardToggle" type="checkbox" class="reward-toggle-check" data-wechat="/img/reward-wechat.jpg" data-alipay="/img/reward-alipay.png"> -->
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>

      
</article>
</div>

    </main>
    <footer class="footer ">
    
    <div class="top">
        
            <p>
    <span>Links：</span>
    
    <span class="blogroll-item">
        <a href="https://weiyigeek.top" target="_blank">https://weiyigeek.top</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.weiyigeek.top" target="_blank">https://blog.weiyigeek.top</a>
    </span>
    
    <span class="blogroll-item">
        <a href="/img/share-wechat.jpg" target="_blank">公众账号</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://space.bilibili.com/385802642/article" target="_blank">哔哩哔哩专栏</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://github.com/weiyigeek" target="_blank">博主Github</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://gitee.com/WeiyiGeek" target="_blank">博主Gitee</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.zhihu.com/people/weiyiSec" target="_blank">知乎</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.cnblogs.com/WeiyiGeek" target="_blank">博客园</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://my.oschina.net/weiyigeek" target="_blank">OSCHINA</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.toutiao.com/c/user/token/MS4wLjABAAAAqcPSoMqfctaEqJpGSF775eeCjWkrop4AOyLITdMx-L78F5iXzfQcSRM5sY4dq3wR" target="_blank">今日头条</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.csdn.net/u013072756?type=lately" target="_blank">CSDN</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.jianshu.com/u/5199a1104739" target="_blank">简书</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://cloud.tencent.com/developer/user/1389665/articles" target="_blank">腾讯云社区</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://cuttlefish.baidu.com/shop/75c5dbd8d15abe23482f4d40" target="_blank">百度文库</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://author.baidu.com/home?from=blog&app_id=1726736601523415" target="_blank">IT极客知识分享</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.51cto.com/weiyigeek" target="_blank">51CTO博客</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://juejin.cn/user/122767337595934" target="_blank">掘金</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://weibo.com/a/hot/7622022703618049_1.html" target="_blank">微博文章</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.xiaohongshu.com/user/profile/627c98bb000000001000e7ba" target="_blank">小红书</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://segmentfault.com/u/weiyigeek" target="_blank">Segmentfault</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.modb.pro/u/506690" target="_blank">墨天轮</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.douyin.com/user/MS4wLjABAAAAMSBdMja6XLsdmzafb0RNbFeBemIOk38K1PaOClZeI1Q" target="_blank">抖音主页</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.kuaishou.com/profile/3xfbrsrhd2i69x9" target="_blank">快手主页</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.ixigua.com/home/3984243135350727" target="_blank">西瓜视频</a>
    </span>
    
</p>

        
    </div>
    
    <div class="bottom">
      <p>
        <span>WeiyiGeek &copy; 2018 - 2023 <a href="https://weiyigeek.top" target="_blank" rel="noopener">weiyigeek.top</a> All rights reserved.唯一极客IT知识分享 版权所有 </span>
        
        <span>
          Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/weiyigeek" target="_blank">mellow</a>
        </span>
        
        <br/><a id="SiteRunTime"></a>
        <br/>访问统计
        <span><a href="/sitemap.xml" target="_blank" rel="Sitemaps-站点地图">Sitemaps</a> </span>
        <span><a href="/baidusitemap.xml" target="_blank" rel="baidusitemaps-百度站点地图">站点地图</a> </span>
        <!-- 
  -->
        <br/>ICP备案号<span><a href="https://beian.miit.gov.cn" target="_blank">渝ICP备2022003447号</a></span>
        <br/>
        <div id="cc-myssl-id">
          <a href="https://myssl.com/blog.weiyigeek.top?from=mysslid" target="_blank" rel="noopener">
            <img src="https://static.myssl.com/res/images/myssl-id1.png" alt="MySSL安全认证" style="max-height:50px;display:block;margin:0 auto">
          </a>
        </div>
      </p>
    </div>
</footer>



    <div class="mask" id="mask"></div>

<div id="go" class="waves-effect waves-light">
  <a href="javascript:;" id="goqrcode"> <span class="icon icon-lg icon-qrcode"></span> </a>
  <a href="javascript:;" id="gotop"> <span class="icon icon-lg icon-chevron-up"></span></a>
</div>





<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://blog.weiyigeek.top/2019/6-3-178.html&title=《Shell脚本内建命令》 — WeiyiGeek Blog&pic=https://blog.weiyigeek.top/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.weiyigeek.top/2019/6-3-178.html&title=《Shell脚本内建命令》 — WeiyiGeek Blog&source=[TOC]" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.weiyigeek.top/2019/6-3-178.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Shell脚本内建命令》 — WeiyiGeek Blog&url=https://blog.weiyigeek.top/2019/6-3-178.html&via=https://blog.weiyigeek.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://blog.weiyigeek.top/2019/6-3-178.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACNUlEQVR42u3awXLCMAxFUf7/p9OZbmnMfVLCNPL1igEa+7BQZUmvF17H7zp7//3Ts/fXzyR/1VoyZMh4LONYrvct+adn3+Q/CjmbDBky9mGsA+L66Gdbkl3IvugfgAwZMmTg8EpyNhkyZMi4O+DWeCRNJGFdhgwZOzP4luk3ecHuS3dxGTJkPJDRuVje/frG/oYMGTIewjjClaaP66JbGoJPny9DhozRjHWJn7cYeZLHr77ptVaGDBmzGTzvShuc5MJJfsROQ1SGDBmTGCSlS4trtcJZOjomQ4aMHRg8IK4PykMqP25QjJMhQ8ZQBi+HEUBnnIKnlX+cSoYMGRszauMOaUmuNlImQ4aMfRi1IldaPquNoPFGqQwZMvZh1C6ZacOy1n4gCaUMGTKmMmqtx3QAos/4cJGWIUPGaEZ6gSSr1iRIRzE+5LYyZMgYxKgNb8XXyLAMl55BhgwZsxk84KYH6gDSUTMZMmTsxiCDXJ1BCj6cwVsFMmTI2IfBi/L90Jx2LVCBT4YMGUMZtSSMb1xrfMZDHjJkyNiA0XpEOMjFgzV/jgwZMmYzOsMTtTDNr6npmJoMGTKmMjqDFDxxTBuW6eVZhgwZsxm18ayUXbvoxqmhDBkyRjP4UXjiyJ+cBtzTH0KGDBkbMGpDq53eaZrefdhXhgwZMnCITI+YhnuklCFDhoxGaL5qdOPGgCtDhox/zOAls1ZpPmx2XtbIlCFDxsMZVzUGSLaWBuKLMTJkyHge4wdsjah2AznFEQAAAABJRU5ErkJggg==" alt="微信分享二维码">
</div>


    
    <!-- main-js -->
<script type="text/javascript" src="/js/jquery/2.1.0-jquery.min.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/plugins/fastclick.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/plugins/ios-orientationchange-fix.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/jquery/3.5.2-jquery.fancybox.min.js?v=1.6.6"></script>
<!--  //cdn.bootcss.com/node-waves/0.7.4/waves.min.js -->
<script type="text/javascript" src="/js/node-waves/0.7.4-waves.min.js?v=1.6.6"></script> 

<script type="text/javascript" src="/js/method.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/blog.js?v=1.6.6"></script>

<!-- third-party -->
<script type="text/javascript" src="/js/plugins/local_search.js?v=1.6.6"></script>
<script type="text/javascript">
	var search_path = "search.xml";
	if (search_path.length === 0) { search_path = "search.xml";}
	var path = "/" + search_path;
	searchFunc(path, "local-search-input", "local-search-result");
</script> 

<script> (adsbygoogle = window.adsbygoogle || []).push({});</script>    


<!-- <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> --> 


  





<!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
            processEscapes: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.staticfile.org/mathjax/2.7.9/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
 
<script>
    (function() {
        var OriginTitile = document.title, titleTime;
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                document.title = 'WeiyiGeek Blog-关注于网络安全_物联网安全开发_网络安全运维-学习心得分享';
                clearTimeout(titleTime);
            } else {
                document.title = '(つェ⊂)咦!又好了!';
                titleTime = setTimeout(function() {
                    document.title = OriginTitile;
                },2000);
            }
        });
    })();
</script>
 

     <script type="text/javascript" src="/js/custom/copytips.js?v=1.6.6"></script> 
<script type="text/javascript">
// 站点运行时间
var BootDate = new Date("2018/01/01 00:00:00");
function ShowRunTime(id) {
  var NowDate = new Date();
  var RunDateM = parseInt(NowDate - BootDate);
  var RunDays = Math.floor(RunDateM/(24*3600*1000));
  var RunHours = Math.floor(RunDateM%(24*3600*1000)/(3600*1000));
  var RunMinutes = Math.floor(RunDateM%(24*3600*1000)%(3600*1000)/(60*1000));
  var RunSeconds = Math.round(RunDateM%(24*3600*1000)%(3600*1000)%(60*1000)/1000);
  var RunTime = RunDays + "天" + RunHours + "时" + RunMinutes + "分" + RunSeconds + "秒";
  document.getElementById(id).innerHTML = "网站已在风雨中勉勉强强运行了【" + RunTime + "】";
}
setInterval("ShowRunTime('SiteRunTime')", 1000);
</script>
    
  <div class="post-wechat" style="position:fixed;top: 360px;bottom: 500px;right: 3%;width: 190px;text-align: center;">
    <p><b>关注【全栈工程师修炼指南】</b></p>
    <img src="/img/wechat-gzh.jpg" class="img-responsive" alt="weiyigeek">
    <p><b>欢迎添加【作者】微信</b></p>
    <img src="/img/wehat.jpg" class="img-responsive" alt="weiyigeek">
  </div>

</body>
</html>