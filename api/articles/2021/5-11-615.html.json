{"title":"Kubernetes之Kuboard多集群管理工具安装实践","slug":"虚拟云容/云容器/Kubernetes/功能组件/Kuboard/Kubernetes之Kuboard多集群管理工具安装实践","date":"2021-05-11T09:37:47.000Z","updated":"2022-03-29T05:39:03.674Z","url":"2021/5-11-615.html","path":"api/articles/2021/5-11-615.html.json","covers":["https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/1/20210420170420.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/1/20210420171640.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/1/20210421090744.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/1/20210421091250.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/1/20210421142402.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/1/20210422144544.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/1/20210421165451.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/1/20210421165649.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/1/20210421222235.png"],"content":"<p>[TOC]</p>\n<a id=\"more\"></a>\n<h2 id=\"0x00-前言简述\"><a href=\"#0x00-前言简述\" class=\"headerlink\" title=\"0x00 前言简述\"></a>0x00 前言简述</h2><h3 id=\"1-Kuboard-介绍\"><a href=\"#1-Kuboard-介绍\" class=\"headerlink\" title=\"1.Kuboard 介绍\"></a>1.Kuboard 介绍</h3><p>描述: Kuboard 是一款免费的 Kubernetes 管理工具，提供了丰富的功能，结合已有或<code>新建的代码仓库、镜像仓库、CI/CD工具</code>等，可以便捷的搭建一个生产可用的 Kubernetes 容器云平台，轻松管理和运行云原生应用。</p>\n<p>您也可以直接将 Kuboard 安装到现有的 Kubernetes 集群，通过 Kuboard 提供的 Kubernetes RBAC 管理界面，将 Kubernetes 提供的能力开放给您的开发/测试团队。</p>\n<p><strong>Kuboard 提供的功能有：</strong></p>\n<ul>\n<li>Kubernetes 基本管理功能</li>\n<li>Kubernetes 问题诊断</li>\n<li>Kubernetes 存储管理<ul>\n<li>通过 ceph-csi 对接 CephFS</li>\n<li>通过 ceph-csi 对接 Rook 安装的 CephFS</li>\n<li>通过 nfs-client-provisioner 对接 NFS 类型的存储</li>\n<li>对接其他类型的存储</li>\n</ul>\n</li>\n<li>认证与授权<ul>\n<li>内建用户库认证</li>\n<li>GitLab / GitHub 单点登录</li>\n<li>LDAP 认证</li>\n<li>完整的 RBAC 权限管理</li>\n</ul>\n</li>\n<li>Kuboard 特色功能<ul>\n<li>Kuboard 官方套件<ul>\n<li>Grafana+Prometheus 资源监控</li>\n<li>Grafana+Loki+Promtail 日志聚合</li>\n</ul>\n</li>\n<li>Kuboard 自定义名称空间布局</li>\n<li>Kuboard 中英文语言包</li>\n<li><br/></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"2-Kuboard-v3-x-版本\"><a href=\"#2-Kuboard-v3-x-版本\" class=\"headerlink\" title=\"2.Kuboard v3.x 版本\"></a>2.Kuboard v3.x 版本</h3><p>描述: Kuboard v3.x 兼容性涉及 Kubernetes 版本 (v1.13 ~ v1.20)</p>\n<p><strong>Kuboard v3.x 功能特点:</strong></p>\n<ul>\n<li>支持 Kubernetes 多集群管理</li>\n<li>支持 amd64 (x86) 架构和 arm68 (armv8) 架构的 CPU；</li>\n</ul>\n<p><br/></p>\n<p><strong>Kuboard v3.x 与 v2.0.x 对比:</strong></p>\n<ul>\n<li>1.v3.x 不再部署在 Kubernetes 中，而是作为一个独立的容器运行。</li>\n<li>2.由于运行模式不同 v2.0.x 与 v3.x 可以同时存在互不干扰, 其次是 v3.x 将 Kuboard 部署的大部分内容从 kube-system 名称空间迁移到 kuboard 名称空间。</li>\n</ul>\n<p>Tips : 如果您最终决定从 Kuboard v2.0.x 迁移到 Kuboard v3，请在 Kuboard v2.0.x 的界面中卸载掉 Kuboard 套件，并在 Kuboard v3 中重新安装 Kuboard 套件。</p>\n<hr>\n<h2 id=\"0x01-安装部署\"><a href=\"#0x01-安装部署\" class=\"headerlink\" title=\"0x01 安装部署\"></a>0x01 安装部署</h2><h3 id=\"1-安装步骤\"><a href=\"#1-安装步骤\" class=\"headerlink\" title=\"1.安装步骤\"></a>1.安装步骤</h3><ul>\n<li>1) k8s集群部署说明获取部署 Kuboard 所需的 YAML 文件：<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -o kuboard-v3.yaml https://addons.kuboard.cn/kuboard/kuboard-v3.yaml</span><br></pre></td></tr></table></figure></li>\n<li><p>2.编辑 kuboard-v3.yaml 文件中的配置，该部署文件中，有两处配置必须修改：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 关于如下参数的解释，请参考文档 https://kuboard.cn/install/v3/install-built-in.html</span></span><br><span class=\"line\">KUBOARD_ENDPOINT: <span class=\"string\">'http://192.168.12.108:30567'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 请填写一个有效的 StorageClass name</span></span><br><span class=\"line\">storageClassName: please-provide<span class=\"_\">-a</span>-valid-StorageClass-name-here</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 端口设置</span></span><br><span class=\"line\"><span class=\"comment\"># Kuboard v3 容器对外暴露三个端口：</span></span><br><span class=\"line\"><span class=\"comment\">#     80 Kuboard Web 服务端口，TCP；</span></span><br><span class=\"line\"><span class=\"comment\">#     443 Kuboard Web 服务端口，TCP；</span></span><br><span class=\"line\"><span class=\"comment\">#     10081 Kuboard Agent Server 端口，TCP 、 UDP。</span></span><br><span class=\"line\">spec:</span><br><span class=\"line\">  ports:</span><br><span class=\"line\">    - name: webui</span><br><span class=\"line\">      nodePort: 30567</span><br><span class=\"line\">      port: 80</span><br><span class=\"line\">      protocol: TCP</span><br><span class=\"line\">      targetPort: 80</span><br><span class=\"line\">    - name: agentservertcp</span><br><span class=\"line\">      nodePort: 30568</span><br><span class=\"line\">      port: 10081</span><br><span class=\"line\">      protocol: TCP</span><br><span class=\"line\">      targetPort: 10081</span><br><span class=\"line\">    - name: agentserverudp</span><br><span class=\"line\">      nodePort: 30568</span><br><span class=\"line\">      port: 10081</span><br><span class=\"line\">      protocol: UDP</span><br><span class=\"line\">      targetPort: 10081</span><br><span class=\"line\"><span class=\"comment\"># 端口网络监听</span></span><br><span class=\"line\"><span class=\"comment\"># tcp        0      0 0.0.0.0:30567           0.0.0.0:*               LISTEN      -</span></span><br><span class=\"line\"><span class=\"comment\"># tcp        0      0 0.0.0.0:30568           0.0.0.0:*               LISTEN      -</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>3.部署到 Kubernetes 集群</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">kubectl create -f kuboard-v3.yaml</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>Tips ： 此 YAML 文件向 Kubernetes 中部署了一个三副本的 <code>StatefulSet kuboard-etcd</code> 和一个单副本的 Deployment kuboard-v3；其中 Deployment kuboard-v3 暂时不支持多副本，请保持其 replicas 字段为 1，将在后续的版本升级中解决 kuboard-v3 多副本部署的问题。</p>\n<p><br/></p>\n<h3 id=\"2-配置步骤\"><a href=\"#2-配置步骤\" class=\"headerlink\" title=\"2.配置步骤\"></a>2.配置步骤</h3><ul>\n<li>1) 访问 Kuboard 在浏览器中打开链接 <a href=\"http://192.168.12.108:30567\" target=\"_blank\" rel=\"noopener\">http://192.168.12.108:30567</a> ，输入初始用户名和密码登录<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">用户名： admin</span><br><span class=\"line\">密码： Kuboard123</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/1/20210420170420.png\" alt=\"WeiyiGeek.Kuboard多集群管理\" title=\"\" class=\"\">\n                <p>WeiyiGeek.Kuboard多集群管理</p>\n            </figure>\n<ul>\n<li>2) 为单点登录的用户/用户组授权(<code>由于在刚开发阶段所以还有些不成熟</code>)<br>描述: 当您配置 Kuboard 与 <code>gitlab / github / ldap</code> 实现单点登录以后，Kuboard 并不管理用户基本信息、用户组信息、用户与用户组之间的映射信息<br>为了让单点登录的用户获得合适的权限，您需要在 Kuboard 中为对应的用户/用户组授权：<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- 为用户添加角色绑定</span><br><span class=\"line\">- 切换到 角色绑定（全局）</span><br><span class=\"line\">- 创建角色绑定</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/1/20210420171640.png\" alt=\"WeiyiGeek.授权\" title=\"\" class=\"\">\n                <p>WeiyiGeek.授权</p>\n            </figure>\n<p>Tips : 全局角色绑定，用户可以在所有 Kubernetes 集群范围内执行该角色授予的权限；<br>Tips : 集群角色绑定，用户只能在指定的 Kubernetes 集群范围内执行该角色授予的权限；<br>Tips : 通常以<code>用户组授权</code>比为<code>单个用户授权更为灵活和方便</code>。</p>\n<ul>\n<li>3) 通过反向代理访问 Kuboard 值得注意得是 Kuboard 需要使用根路径进行访问，即 <a href=\"https://kuboard.this-is-a-sample.com/，而不能是\" target=\"_blank\" rel=\"noopener\">https://kuboard.this-is-a-sample.com/，而不能是</a> <a href=\"https://this-is-a-sample.com/kuboard/\" target=\"_blank\" rel=\"noopener\">https://this-is-a-sample.com/kuboard/</a> 这样的二级路径；</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">; 使用 nginx 作为反向代理，配置文件样例</span><br><span class=\"line\">http &#123;</span><br><span class=\"line\">  # 您需要的其他配置</span><br><span class=\"line\">  map $http_upgrade $connection_upgrade &#123;</span><br><span class=\"line\">    default upgrade;</span><br><span class=\"line\">    &#39;&#39; close;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  server &#123;</span><br><span class=\"line\">    listen       80; </span><br><span class=\"line\">    server_name  kuboard.this-is-a-sample.com; # 替换成你的域名</span><br><span class=\"line\"></span><br><span class=\"line\">    location &#x2F; &#123;</span><br><span class=\"line\">      proxy_pass http:&#x2F;&#x2F;192.168.32.205:10080&#x2F;;  # 替换成你的 Kuboard IP 地址和端口，应该是 IP 地址，而不是 KUBOARD_ENDPOINT 参数的值</span><br><span class=\"line\">      gzip on;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    location &#x2F;k8s-ws&#x2F; &#123;</span><br><span class=\"line\">      proxy_pass  http:&#x2F;&#x2F;192.168.32.205:10080&#x2F;k8s-ws&#x2F;;  # 替换成你的 Kuboard IP 地址和端口</span><br><span class=\"line\">      proxy_http_version 1.1;</span><br><span class=\"line\">      proxy_pass_header Authorization;</span><br><span class=\"line\">      proxy_set_header Upgrade &quot;websocket&quot;;</span><br><span class=\"line\">      proxy_set_header Connection &quot;upgrade&quot;;</span><br><span class=\"line\">      proxy_set_header Host $host;</span><br><span class=\"line\">      proxy_set_header X-Real-IP $remote_addr;</span><br><span class=\"line\">      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class=\"line\">      # proxy_set_header X-Forwarded-Proto https; # 如果您在反向代理上启用了 HTTPS</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    location &#x2F;k8s-proxy&#x2F; &#123;</span><br><span class=\"line\">      proxy_pass  http:&#x2F;&#x2F;192.168.32.205:10080&#x2F;k8s-proxy&#x2F;;  # 替换成你的 Kuboard IP 地址和端口</span><br><span class=\"line\">      proxy_http_version 1.1;</span><br><span class=\"line\">      proxy_pass_header Authorization;</span><br><span class=\"line\">      proxy_set_header Upgrade $http_upgrade;</span><br><span class=\"line\">      proxy_set_header Connection $connection_upgrade;</span><br><span class=\"line\"></span><br><span class=\"line\">      proxy_set_header Host $host;</span><br><span class=\"line\">      proxy_set_header X-Real-IP $remote_addr;</span><br><span class=\"line\">      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class=\"line\">      # proxy_set_header X-Forwarded-Proto https; # 如果您在反向代理上启用了 HTTPS</span><br><span class=\"line\">      gzip on;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    error_page 404 &#x2F;404.html;</span><br><span class=\"line\">        location &#x3D; &#x2F;40x.html &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    error_page 500 502 503 504 &#x2F;50x.html;</span><br><span class=\"line\">        location &#x3D; &#x2F;50x.html &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>4) SSL 证书配置<br>描述: Web 服务端口在如下两种情况下需要配置 SSL 证书, 一是通过公网访问 Kuboard 界面，提高安全性；二是为被纳管的 Kubernetes 配置 OIDC与 Kuboard 实现单点登录（如不配置，通过 Kuboard 管理 Kubernetes 时，Kubernetes 只能将用户识别成 kuboard-admin 或者 kuboard-user 这两个 ServiceAccount 当中的一个）<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 已有证书 - Certificates</span></span><br><span class=\"line\">sudo docker run -d \\</span><br><span class=\"line\">  --restart=unless-stopped \\</span><br><span class=\"line\">  -v /hostpath/to/your/server.crt:/etc/certs/my.company.com/server.crt \\</span><br><span class=\"line\">  -v /hostpath/to/your/server.key:/etc/certs/my.company.com/server.key \\</span><br><span class=\"line\">  -e KUBOARD_TLS_CERT=/etc/certs/my.company.com/server.crt \\</span><br><span class=\"line\">  -e KUBOARD_TLS_KEY=/etc/certs/my.company.com/server.key \\</span><br><span class=\"line\">  -p 10080:80/tcp \\</span><br><span class=\"line\">  -p 443:443/tcp \\</span><br><span class=\"line\">  -p 10081:10081/tcp \\</span><br><span class=\"line\">  -p 10081:10081/udp \\</span><br><span class=\"line\">  -e KUBOARD_ENDPOINT=<span class=\"string\">\"http://kuboard.this-is-a-sample.com:10080\"</span> \\</span><br><span class=\"line\">  -e KUBOARD_AGENT_SERVER_UDP_PORT=<span class=\"string\">\"10081\"</span> \\</span><br><span class=\"line\">  -e KUBOARD_AGENT_SERVER_TCP_PORT=<span class=\"string\">\"10081\"</span> \\</span><br><span class=\"line\">  -v /root/kuboard-data:/data \\</span><br><span class=\"line\">  eipwork/kuboard:v3-beta</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 在线申请 - Lets Encrypt</span></span><br><span class=\"line\">sudo docker run -d \\</span><br><span class=\"line\">  --restart=unless-stopped \\</span><br><span class=\"line\">  -p 10080:80/tcp \\</span><br><span class=\"line\">  -p 443:443/tcp \\</span><br><span class=\"line\">  -p 10081:10081/tcp \\</span><br><span class=\"line\">  -p 10081:10081/udp \\</span><br><span class=\"line\">  <span class=\"comment\"># 第 7 行激活 Kuboard 中的 Lets Encrypt 客户端；</span></span><br><span class=\"line\">  -e KUBOARD_TLS_AUTOCERT=<span class=\"literal\">true</span> \\ </span><br><span class=\"line\">  <span class=\"comment\"># 第 8 行指定 Lets Encrypt 颁发证书时对应的域名；</span></span><br><span class=\"line\">  -e KUBOARD_TLS_DOMAIN=kuboard.this-is<span class=\"_\">-a</span>-sample.com \\</span><br><span class=\"line\">  -e KUBOARD_ENDPOINT=<span class=\"string\">\"http://kuboard.this-is-a-sample.com:10080\"</span> \\</span><br><span class=\"line\">  -e KUBOARD_AGENT_SERVER_UDP_PORT=<span class=\"string\">\"10081\"</span> \\</span><br><span class=\"line\">  -e KUBOARD_AGENT_SERVER_TCP_PORT=<span class=\"string\">\"10081\"</span> \\</span><br><span class=\"line\">  -v /root/kuboard-data:/data \\</span><br><span class=\"line\">  eipwork/kuboard:v3-beta</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>Tips : Kuboard Agent Server 端口使用 TCP、UDP 通信，是私有协议，已经自动配置了 TLS 加密连接，无需用户额外配置证书。(该 Agent Server 端口无需暴露到公网)<br>Tips : 如果通过 nginx 反向代理访问 Kuboard，建议在 nginx 中配置 SSL 证书；<br>Tips : 如果您的 Kuboard 打算直接在公网上访问，建议使用 Lets Encrypt;<br>Tips : 使用 Lets Encrypt 时，请将 kuboard.this-is-a-sample.com 域名指向您的 Kuboard 所在宿主机的公网 IP，并且确保 80, 443 端口开放。Kuboard 启动后，在您第一次访问 <a href=\"https://kuboard.this-is-a-sample.com\" target=\"_blank\" rel=\"noopener\">https://kuboard.this-is-a-sample.com</a> 时，Lets Encrypt 将自动申请证书（浏览器上显示第一次访问将失败）。等候 1-5 分钟时间，再次访问 <a href=\"https://kuboard.this-is-a-sample.com\" target=\"_blank\" rel=\"noopener\">https://kuboard.this-is-a-sample.com</a> 时，您将能够成功访问，证书也已经颁发并且自动配置好；通常免费证书有效期是一年时间，证书到期前一个月，系统会自动为您更新证书，无需您额外做任何操作。</p>\n<p><br/></p>\n<h3 id=\"3-升级配置\"><a href=\"#3-升级配置\" class=\"headerlink\" title=\"3.升级配置\"></a>3.升级配置</h3><p>描述: 将 kuboard v3 更新到最新版本。</p>\n<p><strong>方式1.Docker 容器</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 1.停止已有 kuboard 容器</span></span><br><span class=\"line\">docker stop $(docker ps -a | grep <span class=\"string\">\"eipwork/kuboard\"</span> | awk <span class=\"string\">'&#123;print $1 &#125;'</span>)</span><br><span class=\"line\">docker rm $(docker ps -a | grep <span class=\"string\">\"eipwork/kuboard\"</span> | awk <span class=\"string\">'&#123;print $1 &#125;'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 2.使用新版本的镜像启动 kuboard</span></span><br><span class=\"line\">sudo docker run -d \\</span><br><span class=\"line\">  --restart=unless-stopped \\</span><br><span class=\"line\">  --name=kuboard \\</span><br><span class=\"line\">  -p 10080:80/tcp \\</span><br><span class=\"line\">  -p 10081:10081/udp \\</span><br><span class=\"line\">  -p 10081:10081/tcp \\</span><br><span class=\"line\">  -e KUBOARD_ENDPOINT=<span class=\"string\">\"http://kuboard.this-is-a-sample.com:10080\"</span> \\</span><br><span class=\"line\">  -e KUBOARD_AGENT_SERVER_UDP_PORT=<span class=\"string\">\"10081\"</span> \\</span><br><span class=\"line\">  -e KUBOARD_AGENT_SERVER_TCP_PORT=<span class=\"string\">\"10081\"</span> \\</span><br><span class=\"line\">  -v /root/kuboard-data:/data \\</span><br><span class=\"line\">  eipwork/kuboard:v3.1.0.3</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<p><strong>方式2.Kubernetes 集群</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 更新到最新版本</span></span><br><span class=\"line\">kubectl <span class=\"built_in\">set</span> image -n kuboard deployment/kuboard-v3 kuboard=swr.cn-east-2.myhuaweicloud.com/kuboard/kuboard:v3</span><br></pre></td></tr></table></figure></p>\n<hr>\n<h2 id=\"0x02-使用实践\"><a href=\"#0x02-使用实践\" class=\"headerlink\" title=\"0x02 使用实践\"></a>0x02 使用实践</h2><h3 id=\"1-集群添加\"><a href=\"#1-集群添加\" class=\"headerlink\" title=\"1.集群添加\"></a>1.集群添加</h3><ul>\n<li><p>Step 1.添加已有 Kubernetes 集群到 Kuboard(<code>注意Kubernetes 集群，版本不低于 v1.13</code>),点击首页的添加集群。输入如图下所示(注意选择Agent连接方式)</p>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/1/20210421090744.png\" alt=\"WeiyiGeek.k8s cluster add\" title=\"\" class=\"\">\n                <p>WeiyiGeek.k8s cluster add</p>\n            </figure>\n</li>\n<li><p>Step 2.请安装 kuboard-agent 然后在将要被导入的 Kubernetes 集群执行如下指令</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -k <span class=\"string\">'http://192.168.12.108:30567/kuboard-api/cluster/k8s-test.weiyigeek/kind/KubernetesCluster/k8s-test.weiyigeek/resource/installAgentToKubernetes?token=OIrni4gJpu4hfeAMyJTxCL0gyMZ0Ps1o'</span> &gt; kuboard-agent.yaml</span><br><span class=\"line\">kubectl apply -f ./kuboard-agent.yaml</span><br><span class=\"line\"><span class=\"comment\"># namespace/kuboard created</span></span><br><span class=\"line\"><span class=\"comment\"># serviceaccount/kuboard-admin created</span></span><br><span class=\"line\"><span class=\"comment\"># clusterrolebinding.rbac.authorization.k8s.io/kuboard-admin-crb created</span></span><br><span class=\"line\"><span class=\"comment\"># serviceaccount/kuboard-viewer created</span></span><br><span class=\"line\"><span class=\"comment\"># clusterrolebinding.rbac.authorization.k8s.io/kuboard-viewer-crb created</span></span><br><span class=\"line\"><span class=\"comment\"># deployment.apps/kuboard-agent created</span></span><br><span class=\"line\"><span class=\"comment\"># deployment.apps/kuboard-agent-2 created</span></span><br><span class=\"line\"><span class=\"comment\"># weiyigeek@master-k8s:~$</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># 在 被导入的Kubernetes 集群下执行查看你</span></span><br><span class=\"line\">$ kubectl get pod -n kuboard</span><br><span class=\"line\">NAME                               READY   STATUS    RESTARTS   AGE</span><br><span class=\"line\">kuboard-agent-2-5f4bcf8b45-d4gr9   1/1     Running   0          33s</span><br><span class=\"line\">kuboard-agent-784ccf8f5c-lm7fc     1/1     Running   0          33s</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Step 3.最后点击我已执行导入命令(执行上面的命令后也会自动探测), 添加完集群后会在Kubernetes 集群列表中看它。</p>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/1/20210421091250.png\" alt=\"WeiyiGeek.集群添加\" title=\"\" class=\"\">\n                <p>WeiyiGeek.集群添加</p>\n            </figure>\n</li>\n<li><p>Step 4.如果您已经执行了导入命令，但仍然处于等待导入状态，有可能是因为 kuboard-agent 没有启动，或者 kuboard-agent 不能连接 kuboard-server。请按照下面的提示检查网络连通性以及 kuboard-agent 的日志。 </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 1.请测试连通性 UDP</span></span><br><span class=\"line\">nc -vuz 192.168.12.108 30568</span><br><span class=\"line\"><span class=\"comment\"># Connection to 192.168.12.108 30568 port [udp/*] succeeded</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 2.请检查 kuboard-agent 状态</span></span><br><span class=\"line\">kubectl get pods -n kuboard -o wide -l <span class=\"string\">\"k8s.kuboard.cn/name in (kuboard-agent, kuboard-agent-2)\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 3.请检查 kuboard-agent 日志 </span></span><br><span class=\"line\">kubectl logs -f  -n kuboard -l <span class=\"string\">\"k8s.kuboard.cn/name in (kuboard-agent, kuboard-agent-2)\"</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Step 5.连接完成后与v2.x一样可以对集群进行管理包括(资源配置和应用程序应用以及存储的创建)</p>\n</li>\n</ul>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/1/20210421142402.png\" alt=\"WeiyiGeek.集群管理\" title=\"\" class=\"\">\n                <p>WeiyiGeek.集群管理</p>\n            </figure>\n<ul>\n<li><p>Step 5.学习上面生成的 <code>Kuboard-agent.yaml</code> 资源清单编写</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 名称空间创建</span></span><br><span class=\"line\"><span class=\"meta\">---</span></span><br><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Namespace</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\"><span class=\"attr\">  name:</span> <span class=\"string\">kuboard</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 服务用户创建</span></span><br><span class=\"line\"><span class=\"meta\">---</span></span><br><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">ServiceAccount</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\"><span class=\"attr\">  name:</span> <span class=\"string\">kuboard-admin</span></span><br><span class=\"line\"><span class=\"attr\">  namespace:</span> <span class=\"string\">kuboard</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 集群角色绑定RBAC-将k8s集群管理员的角色绑定到ServiceAccount中的kuboard-admin.</span></span><br><span class=\"line\"><span class=\"meta\">---</span></span><br><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">rbac.authorization.k8s.io/v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">ClusterRoleBinding</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\"><span class=\"attr\">  name:</span> <span class=\"string\">kuboard-admin-crb</span></span><br><span class=\"line\"><span class=\"attr\">roleRef:</span></span><br><span class=\"line\"><span class=\"attr\">  apiGroup:</span> <span class=\"string\">rbac.authorization.k8s.io</span></span><br><span class=\"line\"><span class=\"attr\">  kind:</span> <span class=\"string\">ClusterRole</span></span><br><span class=\"line\"><span class=\"attr\">  name:</span> <span class=\"string\">cluster-admin</span></span><br><span class=\"line\"><span class=\"attr\">subjects:</span></span><br><span class=\"line\"><span class=\"attr\">- kind:</span> <span class=\"string\">ServiceAccount</span></span><br><span class=\"line\"><span class=\"attr\">  name:</span> <span class=\"string\">kuboard-admin</span></span><br><span class=\"line\"><span class=\"attr\">  namespace:</span> <span class=\"string\">kuboard</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 下面的浏览用户的权限绑定的是集群浏览的角色</span></span><br><span class=\"line\"><span class=\"meta\">---</span></span><br><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">ServiceAccount</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\"><span class=\"attr\">  name:</span> <span class=\"string\">kuboard-viewer</span></span><br><span class=\"line\"><span class=\"attr\">  namespace:</span> <span class=\"string\">kuboard</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">---</span></span><br><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">rbac.authorization.k8s.io/v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">ClusterRoleBinding</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\"><span class=\"attr\">  name:</span> <span class=\"string\">kuboard-viewer-crb</span></span><br><span class=\"line\"><span class=\"attr\">roleRef:</span></span><br><span class=\"line\"><span class=\"attr\">  apiGroup:</span> <span class=\"string\">rbac.authorization.k8s.io</span></span><br><span class=\"line\"><span class=\"attr\">  kind:</span> <span class=\"string\">ClusterRole</span></span><br><span class=\"line\"><span class=\"attr\">  name:</span> <span class=\"string\">view</span></span><br><span class=\"line\"><span class=\"attr\">subjects:</span></span><br><span class=\"line\"><span class=\"attr\">- kind:</span> <span class=\"string\">ServiceAccount</span></span><br><span class=\"line\"><span class=\"attr\">  name:</span> <span class=\"string\">kuboard-viewer</span></span><br><span class=\"line\"><span class=\"attr\">  namespace:</span> <span class=\"string\">kuboard</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 利用 Deployment 控制器来 部署 kuboard-agent 容器 (此处采用两个Deployment控制器来进行不同权限分离)</span></span><br><span class=\"line\"><span class=\"meta\">---</span></span><br><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">apps/v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Deployment</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\"><span class=\"attr\">  annotations:</span></span><br><span class=\"line\">    <span class=\"string\">k8s.kuboard.cn/ingress:</span> <span class=\"string\">\"false\"</span></span><br><span class=\"line\">    <span class=\"string\">k8s.kuboard.cn/service:</span> <span class=\"string\">none</span></span><br><span class=\"line\">    <span class=\"string\">k8s.kuboard.cn/workload:</span> <span class=\"string\">kuboard-agent</span></span><br><span class=\"line\"><span class=\"attr\">  labels:</span></span><br><span class=\"line\">    <span class=\"string\">k8s.kuboard.cn/layer:</span> <span class=\"string\">cloud</span></span><br><span class=\"line\">    <span class=\"string\">k8s.kuboard.cn/name:</span> <span class=\"string\">kuboard-agent</span></span><br><span class=\"line\"><span class=\"attr\">  name:</span> <span class=\"string\">kuboard-agent</span></span><br><span class=\"line\"><span class=\"attr\">  namespace:</span> <span class=\"string\">kuboard</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\"><span class=\"attr\">  replicas:</span> <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"attr\">  selector:</span></span><br><span class=\"line\"><span class=\"attr\">    matchLabels:</span></span><br><span class=\"line\">      <span class=\"string\">k8s.kuboard.cn/layer:</span> <span class=\"string\">cloud</span></span><br><span class=\"line\">      <span class=\"string\">k8s.kuboard.cn/name:</span> <span class=\"string\">kuboard-agent</span></span><br><span class=\"line\"><span class=\"attr\">  template:</span></span><br><span class=\"line\"><span class=\"attr\">    metadata:</span></span><br><span class=\"line\"><span class=\"attr\">      labels:</span></span><br><span class=\"line\">        <span class=\"string\">k8s.kuboard.cn/layer:</span> <span class=\"string\">cloud</span></span><br><span class=\"line\">        <span class=\"string\">k8s.kuboard.cn/name:</span> <span class=\"string\">kuboard-agent</span></span><br><span class=\"line\"><span class=\"attr\">    spec:</span></span><br><span class=\"line\"><span class=\"attr\">      serviceAccountName:</span> <span class=\"string\">kuboard-admin</span></span><br><span class=\"line\">      <span class=\"comment\"># 容忍在master节点也运行</span></span><br><span class=\"line\"><span class=\"attr\">      tolerations:</span></span><br><span class=\"line\"><span class=\"attr\">        - effect:</span> <span class=\"string\">NoSchedule</span></span><br><span class=\"line\"><span class=\"attr\">          key:</span> <span class=\"string\">node-role.kubernetes.io/master</span></span><br><span class=\"line\"><span class=\"attr\">          operator:</span> <span class=\"string\">Exists</span></span><br><span class=\"line\">      <span class=\"comment\"># 容器定义设置</span></span><br><span class=\"line\"><span class=\"attr\">      containers:</span></span><br><span class=\"line\"><span class=\"attr\">        - env:</span></span><br><span class=\"line\"><span class=\"attr\">            - name:</span> <span class=\"string\">KUBOARD_ENDPOINT</span></span><br><span class=\"line\"><span class=\"attr\">              value:</span> <span class=\"string\">\"http://192.168.12.108:30567\"</span></span><br><span class=\"line\"><span class=\"attr\">            - name:</span> <span class=\"string\">KUBOARD_AGENT_HOST</span></span><br><span class=\"line\"><span class=\"attr\">              value:</span> <span class=\"string\">\"192.168.12.108\"</span></span><br><span class=\"line\"><span class=\"attr\">            - name:</span> <span class=\"string\">KUBOARD_AGENT_PORT</span></span><br><span class=\"line\"><span class=\"attr\">              value:</span> <span class=\"string\">\"30568\"</span></span><br><span class=\"line\"><span class=\"attr\">            - name:</span> <span class=\"string\">KUBOARD_AGENT_REMOTE_PORT</span></span><br><span class=\"line\"><span class=\"attr\">              value:</span> <span class=\"string\">\"35002\"</span></span><br><span class=\"line\"><span class=\"attr\">            - name:</span> <span class=\"string\">KUBOARD_AGENT_PROTOCOL</span></span><br><span class=\"line\"><span class=\"attr\">              value:</span> <span class=\"string\">\"tcp\"</span></span><br><span class=\"line\"><span class=\"attr\">            - name:</span> <span class=\"string\">KUBOARD_AGENT_PROXY</span></span><br><span class=\"line\"><span class=\"attr\">              value:</span> <span class=\"string\">\"\"</span></span><br><span class=\"line\"><span class=\"attr\">            - name:</span> <span class=\"string\">KUBOARD_K8S_CLUSTER_NAME</span></span><br><span class=\"line\"><span class=\"attr\">              value:</span> <span class=\"string\">\"dev-k8s.weiyieek\"</span></span><br><span class=\"line\"><span class=\"attr\">            - name:</span> <span class=\"string\">KUBOARD_AGENT_KEY</span></span><br><span class=\"line\"><span class=\"attr\">              value:</span> <span class=\"string\">\"32b7d6572c6255211b4eec9009e4a816\"</span></span><br><span class=\"line\"><span class=\"attr\">            - name:</span> <span class=\"string\">KUBERNETES_TOKEN_NAME</span></span><br><span class=\"line\"><span class=\"attr\">              value:</span> <span class=\"string\">\"kuboard-admin\"</span></span><br><span class=\"line\"><span class=\"attr\">            - name:</span> <span class=\"string\">KUBOARD_ANONYMOUS_TOKEN</span></span><br><span class=\"line\"><span class=\"attr\">              value:</span> <span class=\"string\">\"WoMzrTCxYCoCPxZ91aX0v8d63ycPwFJ3\"</span></span><br><span class=\"line\"><span class=\"attr\">          image:</span> <span class=\"string\">\"swr.cn-east-2.myhuaweicloud.com/kuboard/kuboard-agent:v3\"</span></span><br><span class=\"line\"><span class=\"attr\">          imagePullPolicy:</span> <span class=\"string\">Always</span></span><br><span class=\"line\">          <span class=\"comment\"># 生存周期验证</span></span><br><span class=\"line\"><span class=\"attr\">          livenessProbe:</span></span><br><span class=\"line\"><span class=\"attr\">            exec:</span></span><br><span class=\"line\"><span class=\"attr\">              command:</span></span><br><span class=\"line\"><span class=\"bullet\">                -</span> <span class=\"string\">/health.sh</span></span><br><span class=\"line\"><span class=\"attr\">            failureThreshold:</span> <span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"attr\">            initialDelaySeconds:</span> <span class=\"number\">5</span></span><br><span class=\"line\"><span class=\"attr\">            periodSeconds:</span> <span class=\"number\">60</span></span><br><span class=\"line\"><span class=\"attr\">            successThreshold:</span> <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"attr\">            timeoutSeconds:</span> <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"attr\">          name:</span> <span class=\"string\">kuboard-agent</span></span><br><span class=\"line\"><span class=\"attr\">      restartPolicy:</span> <span class=\"string\">Always</span></span><br><span class=\"line\"><span class=\"meta\">---</span></span><br><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">apps/v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Deployment</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\"><span class=\"attr\">  annotations:</span></span><br><span class=\"line\">    <span class=\"string\">k8s.kuboard.cn/ingress:</span> <span class=\"string\">\"false\"</span></span><br><span class=\"line\">    <span class=\"string\">k8s.kuboard.cn/service:</span> <span class=\"string\">none</span></span><br><span class=\"line\">    <span class=\"string\">k8s.kuboard.cn/workload:</span> <span class=\"string\">kuboard-agent-2</span></span><br><span class=\"line\"><span class=\"attr\">  labels:</span></span><br><span class=\"line\">    <span class=\"string\">k8s.kuboard.cn/layer:</span> <span class=\"string\">cloud</span></span><br><span class=\"line\">    <span class=\"string\">k8s.kuboard.cn/name:</span> <span class=\"string\">kuboard-agent-2</span></span><br><span class=\"line\"><span class=\"attr\">  name:</span> <span class=\"string\">kuboard-agent-2</span></span><br><span class=\"line\"><span class=\"attr\">  namespace:</span> <span class=\"string\">kuboard</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\"><span class=\"attr\">  replicas:</span> <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"attr\">  selector:</span></span><br><span class=\"line\"><span class=\"attr\">    matchLabels:</span></span><br><span class=\"line\">      <span class=\"string\">k8s.kuboard.cn/layer:</span> <span class=\"string\">cloud</span></span><br><span class=\"line\">      <span class=\"string\">k8s.kuboard.cn/name:</span> <span class=\"string\">kuboard-agent-2</span></span><br><span class=\"line\"><span class=\"attr\">  template:</span></span><br><span class=\"line\"><span class=\"attr\">    metadata:</span></span><br><span class=\"line\"><span class=\"attr\">      labels:</span></span><br><span class=\"line\">        <span class=\"string\">k8s.kuboard.cn/layer:</span> <span class=\"string\">cloud</span></span><br><span class=\"line\">        <span class=\"string\">k8s.kuboard.cn/name:</span> <span class=\"string\">kuboard-agent-2</span></span><br><span class=\"line\"><span class=\"attr\">    spec:</span></span><br><span class=\"line\"><span class=\"attr\">      serviceAccountName:</span> <span class=\"string\">kuboard-viewer</span></span><br><span class=\"line\"><span class=\"attr\">      tolerations:</span></span><br><span class=\"line\"><span class=\"attr\">        - effect:</span> <span class=\"string\">NoSchedule</span></span><br><span class=\"line\"><span class=\"attr\">          key:</span> <span class=\"string\">node-role.kubernetes.io/master</span></span><br><span class=\"line\"><span class=\"attr\">          operator:</span> <span class=\"string\">Exists</span></span><br><span class=\"line\"><span class=\"attr\">      containers:</span></span><br><span class=\"line\"><span class=\"attr\">        - env:</span></span><br><span class=\"line\"><span class=\"attr\">            - name:</span> <span class=\"string\">KUBOARD_ENDPOINT</span></span><br><span class=\"line\"><span class=\"attr\">              value:</span> <span class=\"string\">\"http://192.168.12.108:30567\"</span></span><br><span class=\"line\"><span class=\"attr\">            - name:</span> <span class=\"string\">KUBOARD_AGENT_HOST</span></span><br><span class=\"line\"><span class=\"attr\">              value:</span> <span class=\"string\">\"192.168.12.108\"</span></span><br><span class=\"line\"><span class=\"attr\">            - name:</span> <span class=\"string\">KUBOARD_AGENT_PORT</span></span><br><span class=\"line\"><span class=\"attr\">              value:</span> <span class=\"string\">\"30568\"</span></span><br><span class=\"line\"><span class=\"attr\">            - name:</span> <span class=\"string\">KUBOARD_AGENT_REMOTE_PORT</span></span><br><span class=\"line\"><span class=\"attr\">              value:</span> <span class=\"string\">\"35002\"</span></span><br><span class=\"line\"><span class=\"attr\">            - name:</span> <span class=\"string\">KUBOARD_AGENT_PROTOCOL</span></span><br><span class=\"line\"><span class=\"attr\">              value:</span> <span class=\"string\">\"tcp\"</span></span><br><span class=\"line\"><span class=\"attr\">            - name:</span> <span class=\"string\">KUBOARD_AGENT_PROXY</span></span><br><span class=\"line\"><span class=\"attr\">              value:</span> <span class=\"string\">\"\"</span></span><br><span class=\"line\"><span class=\"attr\">            - name:</span> <span class=\"string\">KUBOARD_K8S_CLUSTER_NAME</span></span><br><span class=\"line\"><span class=\"attr\">              value:</span> <span class=\"string\">\"dev-k8s.weiyieek\"</span></span><br><span class=\"line\"><span class=\"attr\">            - name:</span> <span class=\"string\">KUBOARD_AGENT_KEY</span></span><br><span class=\"line\"><span class=\"attr\">              value:</span> <span class=\"string\">\"32b7d6572c6255211b4eec9009e4a816\"</span></span><br><span class=\"line\"><span class=\"attr\">            - name:</span> <span class=\"string\">KUBERNETES_TOKEN_NAME</span></span><br><span class=\"line\"><span class=\"attr\">              value:</span> <span class=\"string\">\"kuboard-viewer\"</span></span><br><span class=\"line\"><span class=\"attr\">            - name:</span> <span class=\"string\">KUBOARD_ANONYMOUS_TOKEN</span></span><br><span class=\"line\"><span class=\"attr\">              value:</span> <span class=\"string\">\"WoMzrTCxYCoCPxZ91aX0v8d63ycPwFJ3\"</span></span><br><span class=\"line\"><span class=\"attr\">          image:</span> <span class=\"string\">\"swr.cn-east-2.myhuaweicloud.com/kuboard/kuboard-agent:v3\"</span></span><br><span class=\"line\"><span class=\"attr\">          imagePullPolicy:</span> <span class=\"string\">Always</span></span><br><span class=\"line\"><span class=\"attr\">          livenessProbe:</span></span><br><span class=\"line\"><span class=\"attr\">            exec:</span></span><br><span class=\"line\"><span class=\"attr\">              command:</span></span><br><span class=\"line\"><span class=\"bullet\">                -</span> <span class=\"string\">/health.sh</span></span><br><span class=\"line\"><span class=\"attr\">            failureThreshold:</span> <span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"attr\">            initialDelaySeconds:</span> <span class=\"number\">5</span></span><br><span class=\"line\"><span class=\"attr\">            periodSeconds:</span> <span class=\"number\">60</span></span><br><span class=\"line\"><span class=\"attr\">            successThreshold:</span> <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"attr\">            timeoutSeconds:</span> <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"attr\">          name:</span> <span class=\"string\">kuboard-agent</span></span><br><span class=\"line\"><span class=\"attr\">      restartPolicy:</span> <span class=\"string\">Always</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Step 6.我将所有的<code>kubernetes</code>集群都加入到kuboard进行多集群管理</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Kubernetes master is running at https://weiyigeek-lb-vip.k8s:16443  <span class=\"comment\"># 高可用</span></span><br><span class=\"line\">Kubernetes master is running at https://k8s-test.weiyigeek:6443</span><br><span class=\"line\">Kubernetes control plane is running at https://dev-k8s.weiyieek:6443</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/1/20210422144544.png\" alt=\"WeiyiGeek.Kubernetes 集群列表\" title=\"\" class=\"\">\n                <p>WeiyiGeek.Kubernetes 集群列表</p>\n            </figure>\n<p><br/></p>\n<h3 id=\"2-集群管理使用\"><a href=\"#2-集群管理使用\" class=\"headerlink\" title=\"2.集群管理使用\"></a>2.集群管理使用</h3><ul>\n<li><p>Step 1.选择<code>k8s-test.weiyigeek</code>集群-&gt;default名称空间-&gt;常用操作-&gt;从YAML中创建。</p>\n</li>\n<li><p>Step 2.在Kuboiard中创建一个Nginx服务应用。<br>从 YAML 创建的资源清单将此输入: (<code>注意为了便于管理建议控制器名称与服务发现名称设置一样</code>)</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 字典设置</span></span><br><span class=\"line\"><span class=\"meta\">---</span></span><br><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">ConfigMap</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\"><span class=\"attr\">  labels:</span></span><br><span class=\"line\"><span class=\"attr\">    app:</span> <span class=\"string\">nginx</span></span><br><span class=\"line\"><span class=\"attr\">  name:</span> <span class=\"string\">nginx-config</span></span><br><span class=\"line\"><span class=\"attr\">  namespace:</span> <span class=\"string\">default</span></span><br><span class=\"line\"><span class=\"attr\">data:</span></span><br><span class=\"line\"><span class=\"attr\">  name:</span> <span class=\"string\">WeiyiGeek</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Deployment 控制器 &amp; 初始化容器值得学习</span></span><br><span class=\"line\"><span class=\"meta\">---</span></span><br><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">apps/v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Deployment</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span>\t</span><br><span class=\"line\"><span class=\"attr\">  name:</span> <span class=\"string\">nginx-demo</span></span><br><span class=\"line\"><span class=\"attr\">  namespace:</span> <span class=\"string\">default</span></span><br><span class=\"line\"><span class=\"attr\">  labels:</span>\t</span><br><span class=\"line\"><span class=\"attr\">    app:</span> <span class=\"string\">nginx</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span>\t</span><br><span class=\"line\"><span class=\"attr\">  replicas:</span> <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"attr\">  selector:</span></span><br><span class=\"line\"><span class=\"attr\">    matchLabels:</span></span><br><span class=\"line\"><span class=\"attr\">      app:</span> <span class=\"string\">nginx</span></span><br><span class=\"line\"><span class=\"attr\">  template:</span></span><br><span class=\"line\"><span class=\"attr\">    metadata:</span></span><br><span class=\"line\"><span class=\"attr\">      labels:</span></span><br><span class=\"line\"><span class=\"attr\">        app:</span> <span class=\"string\">nginx</span></span><br><span class=\"line\"><span class=\"attr\">    spec:</span></span><br><span class=\"line\"><span class=\"attr\">      containers:</span></span><br><span class=\"line\"><span class=\"attr\">      - name:</span> <span class=\"string\">nginx</span></span><br><span class=\"line\"><span class=\"attr\">        image:</span> <span class=\"attr\">nginx:latest</span></span><br><span class=\"line\"><span class=\"attr\">        volumeMounts:</span></span><br><span class=\"line\"><span class=\"attr\">        - name:</span> <span class=\"string\">web</span> </span><br><span class=\"line\"><span class=\"attr\">          mountPath:</span> <span class=\"string\">\"/usr/share/nginx/html\"</span></span><br><span class=\"line\"><span class=\"attr\">      initContainers:</span></span><br><span class=\"line\"><span class=\"attr\">      - name:</span> <span class=\"string\">init</span></span><br><span class=\"line\"><span class=\"attr\">        image:</span> <span class=\"attr\">busybox:1.33.0</span></span><br><span class=\"line\"><span class=\"attr\">        command:</span> <span class=\"string\">['sh',</span> <span class=\"string\">'-c'</span><span class=\"string\">,</span> <span class=\"string\">\"env;echo ConfigMap:$&#123;MSG&#125;--HostName-$&#123;HOSTNAME&#125; &gt; /usr/share/nginx/html/index.html\"</span><span class=\"string\">]</span></span><br><span class=\"line\"><span class=\"attr\">        volumeMounts:</span></span><br><span class=\"line\"><span class=\"attr\">        - name:</span> <span class=\"string\">web</span></span><br><span class=\"line\"><span class=\"attr\">          mountPath:</span> <span class=\"string\">\"/usr/share/nginx/html\"</span></span><br><span class=\"line\"><span class=\"attr\">        env:</span></span><br><span class=\"line\"><span class=\"attr\">        - name:</span> <span class=\"string\">MSG</span></span><br><span class=\"line\"><span class=\"attr\">          valueFrom:</span></span><br><span class=\"line\"><span class=\"attr\">            configMapKeyRef:</span> </span><br><span class=\"line\"><span class=\"attr\">              name:</span> <span class=\"string\">nginx-config</span></span><br><span class=\"line\"><span class=\"attr\">              key:</span> <span class=\"string\">name</span></span><br><span class=\"line\"><span class=\"attr\">      volumes:</span>    </span><br><span class=\"line\"><span class=\"attr\">      - name:</span> <span class=\"string\">web</span> </span><br><span class=\"line\"><span class=\"attr\">        emptyDir:</span> <span class=\"string\">&#123;&#125;</span> </span><br><span class=\"line\"><span class=\"meta\">---</span></span><br><span class=\"line\"><span class=\"attr\">apiVersion:</span> <span class=\"string\">v1</span></span><br><span class=\"line\"><span class=\"attr\">kind:</span> <span class=\"string\">Service</span></span><br><span class=\"line\"><span class=\"attr\">metadata:</span></span><br><span class=\"line\"><span class=\"attr\">  name:</span> <span class=\"string\">nginx-demo</span></span><br><span class=\"line\"><span class=\"attr\">  namespace:</span> <span class=\"string\">default</span></span><br><span class=\"line\"><span class=\"attr\">  labels:</span></span><br><span class=\"line\"><span class=\"attr\">    app:</span> <span class=\"string\">nginx</span></span><br><span class=\"line\"><span class=\"attr\">spec:</span></span><br><span class=\"line\"><span class=\"attr\">  selector:</span></span><br><span class=\"line\"><span class=\"attr\">    app:</span> <span class=\"string\">nginx</span></span><br><span class=\"line\"><span class=\"attr\">  type:</span> <span class=\"string\">NodePort</span></span><br><span class=\"line\"><span class=\"attr\">  ports:</span></span><br><span class=\"line\"><span class=\"attr\">  - name:</span> <span class=\"string\">nginx-port</span></span><br><span class=\"line\"><span class=\"attr\">    protocol:</span> <span class=\"string\">TCP</span></span><br><span class=\"line\"><span class=\"attr\">    port:</span> <span class=\"number\">80</span></span><br><span class=\"line\"><span class=\"attr\">    nodePort:</span> <span class=\"number\">30000</span></span><br><span class=\"line\"><span class=\"attr\">    targetPort:</span> <span class=\"number\">80</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/1/20210421165451.png\" alt=\"WeiyiGeek.yaml部署\" title=\"\" class=\"\">\n                <p>WeiyiGeek.yaml部署</p>\n            </figure>\n<ul>\n<li>Step 3.部署结果访问<code>http://192.168.12.111:30000/</code>地址返回界面如下:</li>\n</ul>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/1/20210421165649.png\" alt=\"WeiyiGeek.部署结果\" title=\"\" class=\"\">\n                <p>WeiyiGeek.部署结果</p>\n            </figure>\n<ul>\n<li>Step 4.查看我们资源清单创建的ConfigMap，点击配置中心-&gt;配置字典-&gt;我们可以通过资源清单和UI来创建</li>\n</ul>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/1/20210421222235.png\" alt=\"WeiyiGeek.kuboard-ConfigMap\" title=\"\" class=\"\">\n                <p>WeiyiGeek.kuboard-ConfigMap</p>\n            </figure>","comments":true,"excerpt":"[TOC]","categories":[{"name":"集群管理工具","path":"api/categories/集群管理工具.json"},{"name":"kubernetes","path":"api/categories/kubernetes.json"}],"tags":[{"name":"Kuboard","path":"api/tags/Kuboard.json"}]}