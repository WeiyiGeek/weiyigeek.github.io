{"title":"COBBLER批量安装Windows系统","slug":"系统运维/Linux/系统安装/COBBLER批量安装Windows系统","date":"2019-05-28T04:34:30.000Z","updated":"2022-06-01T07:27:43.322Z","url":"2019/5-28-185.html","path":"api/articles/2019/5-28-185.html.json","covers":["https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190528094233.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190528143826.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190528144119.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190528144200.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190528144437.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190528152515.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190529130758.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190529173230.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190529172712.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190529172928.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190529130007.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190604222843.png"],"content":"<p>[TOC]</p>\n<a id=\"more\"></a>\n<h4 id=\"0x00-Cobbler安装原版Windows10需求\"><a href=\"#0x00-Cobbler安装原版Windows10需求\" class=\"headerlink\" title=\"0x00 Cobbler安装原版Windows10需求\"></a>0x00 Cobbler安装原版Windows10需求</h4><p>需求：采用Cobbler批量分发安装Windows10(官方原版未封装过)并默认进入审核模式;</p>\n<h5 id=\"1-环境准备\"><a href=\"#1-环境准备\" class=\"headerlink\" title=\"1. 环境准备\"></a>1. 环境准备</h5><ul>\n<li>1.COBBLER无人值守批量安装系统(参看我前面的文章)</li>\n<li>2.Windows ADK 下载与安装(两个工具都必须下载)</li>\n<li>3.Windows 10 专业版下载(version 1903 (x64) - DVD (Chinese-Simplified) </li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">OS 名称:          Microsoft Windows 10 专业版</span><br><span class=\"line\">OS 版本:          10.0.18362 暂缺 Build 18362</span><br><span class=\"line\">OS 制造商:        Microsoft Corporation</span><br><span class=\"line\">OS 配置:          独立工作站</span><br><span class=\"line\">OS 构件类型:      Multiprocessor Free</span><br></pre></td></tr></table></figure>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190528094233.png\" alt=\"WeiyiGeek.Windows10\" title=\"\" class=\"\">\n                <p>WeiyiGeek.Windows10</p>\n            </figure>\n<p><br></p>\n<p><strong>Liunx配置：</strong><br>环境：CentOS Linux release 7.6.1810 (Core) 3.10.0-957.12.2.el7.x86_64<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"><span class=\"comment\">#Desc：Centos7安装后初始化脚本</span></span><br><span class=\"line\"><span class=\"comment\"># 根据自己的环境自定义 （采用两块网卡 - 一块连接外网下载应用 - 一块用于开启DHCP服务于TFTP）</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> -e <span class=\"string\">\"\\n############################\\n#网卡配置\\n####################################\\n\"</span></span><br><span class=\"line\">sed -i <span class=\"string\">'s/ONBOOT=no/ONBOOT=yes/g'</span> /etc/sysconfig/network-scripts/ifcfg-ens192</span><br><span class=\"line\">sed -i <span class=\"string\">'s/BOOTPROTO=dhcp/BOOTPROTO=static/g'</span> /etc/sysconfig/network-scripts/ifcfg-ens192</span><br><span class=\"line\">cat &gt;&gt; /etc/sysconfig/network-scripts/ifcfg-ens192 &lt;&lt;EOF</span><br><span class=\"line\"><span class=\"built_in\">echo</span> IPADDR=192.168.1.99</span><br><span class=\"line\"><span class=\"built_in\">echo</span> NETMASK=255.255.255.0</span><br><span class=\"line\">EOF</span><br><span class=\"line\">service network restart</span><br><span class=\"line\"><span class=\"built_in\">echo</span> nameserver 114.114.114.114 &gt;&gt; /etc/resolv.conf</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"--[网卡配置结束]--\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> -e <span class=\"string\">\"\\n############################\\n#SSH服务配置\\n####################################\\n\"</span></span><br><span class=\"line\">sed -i <span class=\"string\">'s/#PermitRootLogin/PermitRootLogin/g'</span> /etc/ssh/sshd_config</span><br><span class=\"line\">systemctl restart sshd</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"--[SSH服务配置结束]--\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 自定义完毕</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> -e <span class=\"string\">\"\\n############################\\n#采用阿里YUM源调换系统YUM源\\n####################################\\n\"</span></span><br><span class=\"line\">curl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo</span><br><span class=\"line\">curl -o /etc/yum.repos.d/CentOS-epel.repo http://mirrors.aliyun.com/repo/epel-7.repo</span><br><span class=\"line\">yum clean all</span><br><span class=\"line\">yum makecache</span><br><span class=\"line\">yum update -y &amp;&amp; yum upgrade -y &amp;&amp;  yum -y install epel*</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"--[YUM替换更新应用软件完成]--\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> -e <span class=\"string\">\"\\n############################\\n#安装常用的运维软件\\n####################################\\n\"</span></span><br><span class=\"line\">yum install -y nano vim net-tools tree wget</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"--[安装安装完成]--\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> -e <span class=\"string\">\"\\n############################\\n#安装COBBLER及其依赖\\n####################################\\n\"</span></span><br><span class=\"line\">yum -y install xinetd syslinux dhcp tftp-server httpd rsync samba</span><br><span class=\"line\">install -y python-pip &amp;&amp; pip install -U pip </span><br><span class=\"line\">yum -y install cobbler cobbler-web pykickstart </span><br><span class=\"line\">wget https://github.com/WeiyiGeek/Study-Promgram/Linux%E8%BF%90%E7%BB%B4%E8%BF%9B%E9%98%B6/Linux/Cobbler/Cobbler_init.sh -O /tmp/</span><br><span class=\"line\">chmod +x /tmp/Cobbler_init.sh &amp;&amp; /tmp/Cobbler_init.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"--[安装完毕]--\"</span></span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<p><strong>Windows ADK</strong></p>\n<p>描述：Windows 评估和部署工具包 (Windows ADK) 具有自定义大规模部署的 Windows 映像以及测试系统、添加的组件和在该系统上运行的应用程序的质量和性能所需的工具。<br>下载地址：<a href=\"https://docs.microsoft.com/zh-cn/windows-hardware/get-started/adk-install#winADK\" target=\"_blank\" rel=\"noopener\">https://docs.microsoft.com/zh-cn/windows-hardware/get-started/adk-install#winADK</a>  (可以下载到其他版本ADK)<br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190528143826.png\" alt=\"WeiyiGeek.other-ADK\" title=\"\" class=\"\">\n                <p>WeiyiGeek.other-ADK</p>\n            </figure></p>\n<p>Windows ADK 包括：</p>\n<ul>\n<li>用于评估系统或组件的质量和性能的 Windows 评估工具包和 Windows Performance Toolkit。<ul>\n<li><a href=\"https://go.microsoft.com/fwlink/?linkid=2026036\" target=\"_blank\" rel=\"noopener\">https://go.microsoft.com/fwlink/?linkid=2026036</a></li>\n</ul>\n</li>\n<li>你可以使用部署工具（例如 WinPE、Sysprep 和其他工具）自定义和部署 Windows 10 映像。<ul>\n<li><a href=\"https://go.microsoft.com/fwlink/?linkid=2022233\" target=\"_blank\" rel=\"noopener\">https://go.microsoft.com/fwlink/?linkid=2022233</a></li>\n</ul>\n</li>\n</ul>\n<p>_注意_：</p>\n<ul>\n<li>从 Windows 10 版本 1809 开始，Windows 预安装环境 (PE) 是独立于评估和部署工具包 (ADK) 发布的</li>\n<li>若要将 Windows PE 添加到你的 ADK 安装，请下载 Windows PE 加载项并在安装 ADK 后运行所包括的安装程序,行安装程序后，WinPE 文件将位于它们在以前的 ADK 安装中的同一位置。</li>\n<li>先运行adksetup.exe在运行adkwinpe.exe进行预安装环境</li>\n</ul>\n<p>根据需求进行选择：<br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190528144119.png\" alt=\"WeiyiGeek.adksetup\" title=\"\" class=\"\">\n                <p>WeiyiGeek.adksetup</p>\n            </figure></p>\n<p>进行预安装环境windows PE：<br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190528144200.png\" alt=\"WeiyiGeek.adkwinpe\" title=\"\" class=\"\">\n                <p>WeiyiGeek.adkwinpe</p>\n            </figure></p>\n<p><br></p>\n<h5 id=\"2-映像制作\"><a href=\"#2-映像制作\" class=\"headerlink\" title=\"2. 映像制作\"></a>2. 映像制作</h5><p>安装完后，以管理员身份打开部署和映像工具环境（执行以下命令）：<br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190528144437.png\" alt=\"WeiyiGeek.打开部署和映像工具环境\" title=\"\" class=\"\">\n                <p>WeiyiGeek.打开部署和映像工具环境</p>\n            </figure></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#1.本地生成winpe文件目录</span></span><br><span class=\"line\">copype amd64 C:\\winpe</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#2.dism 挂载 winpe的启动文件到winpe的mount目录</span></span><br><span class=\"line\">Dism /mount-image /imagefile:C:\\winpe\\media\\sources\\boot.wim /index:1 /mountdir:C:\\winpe\\mount</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#3.将启动命令硬编码写死到winpe的startnet.cmd文件里（这里的IP是COBBLER设置DHCP服务的网卡的IP - 需要一块独立网卡）</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> arp -a &gt;&gt; C:\\winpe\\mount\\Windows\\System32\\startnet.cmd</span><br><span class=\"line\"><span class=\"built_in\">echo</span> ping -n 6 -l 69 192.168.1.99 &gt;&gt; C:\\winpe\\mount\\Windows\\System32\\startnet.cmd  <span class=\"comment\">#arp 广播时候还没记录1.99机器的mac（ps:您可以提前将wds/cobbler机器的mac地址进行绑定）</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> ipconfig &gt;&gt; C:\\winpe\\mount\\Windows\\System32\\startnet.cmd</span><br><span class=\"line\"><span class=\"built_in\">echo</span> ping -n 4 192.168.1.99 &gt;&gt; C:\\winpe\\mount\\Windows\\System32\\startnet.cmd</span><br><span class=\"line\"><span class=\"built_in\">echo</span> net use z: \\\\192.168.1.99\\share <span class=\"string\">\"123\"</span> /user:administrator &gt;&gt; C:\\winpe\\mount\\Windows\\System32\\startnet.cmd</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#4.应答文件</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> z: &gt;&gt; C:\\winpe\\mount\\Windows\\System32\\startnet.cmd</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"built_in\">cd</span> win &gt;&gt; C:\\winpe\\mount\\Windows\\System32\\startnet.cmd</span><br><span class=\"line\"><span class=\"built_in\">echo</span> z:\\win\\setup.exe /unattend:z:\\win\\win10_x64_bios_auto.xml &gt;&gt; C:\\winpe\\mount\\Windows\\System32\\startnet.cmd</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#5.卸载winpe的挂载（一定要执行，否则直接强制删除文件夹会出一些稀奇古怪的问题）</span></span><br><span class=\"line\">Dism /unmount-image /mountdir:C:\\winpe\\mount /commit</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#6.制作win10镜像，名为 winpe_win10_amd64.iso</span></span><br><span class=\"line\">MakeWinPEMedia /ISO C:\\winpe C:\\winpe\\winpe_win10_amd64.iso</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190528152515.png\" alt=\"WeiyiGeek.映像文件\"></p>\n<p><em>提示(TIPS)：</em></p>\n<ul>\n<li>在第三步的时候进行了硬编码,由于想挂载共享文件,必须要知道smb主机,我们可以利用这个cmd调用其他的bat(利用powershell下载bat并且运行)</li>\n<li>脚本补充更新(<code>2020年7月13日 15:04:08</code>)<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># startnet.cmd</span></span><br><span class=\"line\">wpeinit</span><br><span class=\"line\">arp -a</span><br><span class=\"line\">ipconfig</span><br><span class=\"line\">ping -n 8 192.168.1.99</span><br><span class=\"line\">nbtstat -A 192.168.1.99</span><br><span class=\"line\">arp -a</span><br><span class=\"line\">ping -n 4 192.168.1.99</span><br><span class=\"line\">arp -a</span><br><span class=\"line\">net use z: \\\\192.168.1.99\\share <span class=\"string\">\"WeiyiGeek\"</span> /user:administrator</span><br><span class=\"line\">z:</span><br><span class=\"line\">Ghost64.exe</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># WeiyiGeek.bat</span></span><br><span class=\"line\">@<span class=\"built_in\">echo</span> off</span><br><span class=\"line\"><span class=\"keyword\">if</span> <span class=\"string\">\"%1%\"</span> == <span class=\"string\">\"\"</span> (</span><br><span class=\"line\">  <span class=\"built_in\">echo</span> SMB://192.168.1.99</span><br><span class=\"line\">  net use z: \\\\192.168.1.99\\share <span class=\"string\">\"WeiyiGeek\"</span> /user:administrator</span><br><span class=\"line\">  z:</span><br><span class=\"line\">  Ghost64.exe</span><br><span class=\"line\">) <span class=\"keyword\">else</span> (</span><br><span class=\"line\">  <span class=\"built_in\">echo</span> SMB://%1%</span><br><span class=\"line\">  net use y: \\\\%1%\\share <span class=\"string\">\"WeiyiGeek\"</span> /user:administrator</span><br><span class=\"line\">  y:</span><br><span class=\"line\">  Ghost64.exe</span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><br></p>\n<h5 id=\"3-配置Cobbler与samba\"><a href=\"#3-配置Cobbler与samba\" class=\"headerlink\" title=\"3. 配置Cobbler与samba\"></a>3. 配置Cobbler与samba</h5><p>使用WinScp 等工具，将 winpe_win10_amd64.iso 上传到 Cobbler 服务器上，同样的三个流程：</p>\n<ul>\n<li>上传ISO镜像到 Cobbler Server 端</li>\n<li>导入ISO镜像到 Cobbler Server 端</li>\n<li>配置ISO镜像相关自动值守安装文件</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#导入ISO镜像</span></span><br><span class=\"line\">cobbler distro add --name=windows_10_x64 --kernel=/var/lib/tftpboot/memdisk --initrd=/root/winpe_win10_amd64.iso --kopts=<span class=\"string\">\"raw iso\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#配置ISO镜像自动值守安装文件</span></span><br><span class=\"line\">touch /var/lib/cobbler/kickstarts/winpe.xml  <span class=\"comment\">#该自动值守安装文件并没有作用(的win7pe.xml文件可以为空白，但必须要存在)</span></span><br><span class=\"line\"><span class=\"comment\">#否则，在通过PXE方式启动客户机器时，客户机器看不到可以通过网络安装的Win PE系统。</span></span><br><span class=\"line\">cobbler profile add --name=windows_10_x64 --distro=windows_10_x64 --kickstart=/var/lib/cobbler/kickstarts/winpe.xml</span><br></pre></td></tr></table></figure>\n<p><br></p>\n<p>安装与修改samba：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$yum</span> install -y samba</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#修改smb config</span></span><br><span class=\"line\"><span class=\"variable\">$vi</span> /etc/samba/smb.conf</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># /etc/samba/smb.conf</span></span><br><span class=\"line\">[global]</span><br><span class=\"line\"><span class=\"built_in\">log</span> file = /var/<span class=\"built_in\">log</span>/samba/<span class=\"built_in\">log</span>.%m</span><br><span class=\"line\">max <span class=\"built_in\">log</span> size = 5000</span><br><span class=\"line\">security = user</span><br><span class=\"line\">guest account = nobody</span><br><span class=\"line\">map to guest = Bad User</span><br><span class=\"line\">load printers = yes</span><br><span class=\"line\">cups options = raw</span><br><span class=\"line\"> </span><br><span class=\"line\">[share]</span><br><span class=\"line\">comment = share directory目录</span><br><span class=\"line\">path = /smb/</span><br><span class=\"line\">directory mask = 0755</span><br><span class=\"line\">create mask = 0755</span><br><span class=\"line\">guest ok=yes</span><br><span class=\"line\">writable=yes</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#启动smb服务</span></span><br><span class=\"line\">service smb start</span><br><span class=\"line\">systemctl <span class=\"built_in\">enable</span> smb</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<h5 id=\"4-应答文件\"><a href=\"#4-应答文件\" class=\"headerlink\" title=\"4. 应答文件\"></a>4. 应答文件</h5><p>采用两种方法创建应答文件：</p>\n<ul>\n<li>Windows Answer File Generator#win10_x86_64：<a href=\"https://www.windowsafg.com/win10x86_x64.html\" target=\"_blank\" rel=\"noopener\">https://www.windowsafg.com/win10x86_x64.html</a></li>\n<li>Windows系统映像管理器或者通过通过MDT简化操作也行</li>\n</ul>\n<p><br><br>Windows 10 自动化安装应答文件:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br><span class=\"line\">325</span><br><span class=\"line\">326</span><br><span class=\"line\">327</span><br><span class=\"line\">328</span><br><span class=\"line\">329</span><br><span class=\"line\">330</span><br><span class=\"line\">331</span><br><span class=\"line\">332</span><br><span class=\"line\">333</span><br><span class=\"line\">334</span><br><span class=\"line\">335</span><br><span class=\"line\">336</span><br><span class=\"line\">337</span><br><span class=\"line\">338</span><br><span class=\"line\">339</span><br><span class=\"line\">340</span><br><span class=\"line\">341</span><br><span class=\"line\">342</span><br><span class=\"line\">343</span><br><span class=\"line\">344</span><br><span class=\"line\">345</span><br><span class=\"line\">346</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=<span class=\"string\">\"1.0\"</span> encoding=<span class=\"string\">\"utf-8\"</span>?&gt;</span><br><span class=\"line\">&lt;unattend</span><br><span class=\"line\">    xmlns=<span class=\"string\">\"urn:schemas-microsoft-com:unattend\"</span>&gt;</span><br><span class=\"line\">    &lt;settings pass=<span class=\"string\">\"windowsPE\"</span>&gt;</span><br><span class=\"line\">        &lt;component name=<span class=\"string\">\"Microsoft-Windows-International-Core-WinPE\"</span> processorArchitecture=<span class=\"string\">\"x86\"</span> publicKeyToken=<span class=\"string\">\"31bf3856ad364e35\"</span> language=<span class=\"string\">\"neutral\"</span> versionScope=<span class=\"string\">\"nonSxS\"</span></span><br><span class=\"line\">            xmlns:wcm=<span class=\"string\">\"http://schemas.microsoft.com/WMIConfig/2002/State\"</span></span><br><span class=\"line\">            xmlns:xsi=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span>&gt;</span><br><span class=\"line\">            &lt;SetupUILanguage&gt;</span><br><span class=\"line\">                &lt;UILanguage&gt;en-US&lt;/UILanguage&gt;</span><br><span class=\"line\">            &lt;/SetupUILanguage&gt;</span><br><span class=\"line\">            &lt;InputLocale&gt;0804:&#123;81D4E9C9-1D3B-41BC-9E6C-4B40BF79E35E&#125;&#123;FA550B04-5AD7-411f-A5AC-CA038EC515D7&#125;&lt;/InputLocale&gt;</span><br><span class=\"line\">            &lt;SystemLocale&gt;zh-CN&lt;/SystemLocale&gt;</span><br><span class=\"line\">            &lt;UILanguage&gt;zh-CN&lt;/UILanguage&gt;</span><br><span class=\"line\">            &lt;UILanguageFallback&gt;zh-CN&lt;/UILanguageFallback&gt;</span><br><span class=\"line\">            &lt;UserLocale&gt;zh-CN&lt;/UserLocale&gt;</span><br><span class=\"line\">        &lt;/component&gt;</span><br><span class=\"line\">        &lt;component name=<span class=\"string\">\"Microsoft-Windows-International-Core-WinPE\"</span> processorArchitecture=<span class=\"string\">\"amd64\"</span> publicKeyToken=<span class=\"string\">\"31bf3856ad364e35\"</span> language=<span class=\"string\">\"neutral\"</span> versionScope=<span class=\"string\">\"nonSxS\"</span></span><br><span class=\"line\">            xmlns:wcm=<span class=\"string\">\"http://schemas.microsoft.com/WMIConfig/2002/State\"</span></span><br><span class=\"line\">            xmlns:xsi=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span>&gt;</span><br><span class=\"line\">            &lt;SetupUILanguage&gt;</span><br><span class=\"line\">                &lt;UILanguage&gt;en-US&lt;/UILanguage&gt;</span><br><span class=\"line\">            &lt;/SetupUILanguage&gt;</span><br><span class=\"line\">            &lt;InputLocale&gt;0804:&#123;81D4E9C9-1D3B-41BC-9E6C-4B40BF79E35E&#125;&#123;FA550B04-5AD7-411f-A5AC-CA038EC515D7&#125;&lt;/InputLocale&gt;</span><br><span class=\"line\">            &lt;SystemLocale&gt;zh-CN&lt;/SystemLocale&gt;</span><br><span class=\"line\">            &lt;UILanguage&gt;zh-CN&lt;/UILanguage&gt;</span><br><span class=\"line\">            &lt;UILanguageFallback&gt;zh-CN&lt;/UILanguageFallback&gt;</span><br><span class=\"line\">            &lt;UserLocale&gt;zh-CN&lt;/UserLocale&gt;</span><br><span class=\"line\">        &lt;/component&gt;</span><br><span class=\"line\">        &lt;component name=<span class=\"string\">\"Microsoft-Windows-Setup\"</span> processorArchitecture=<span class=\"string\">\"x86\"</span> publicKeyToken=<span class=\"string\">\"31bf3856ad364e35\"</span> language=<span class=\"string\">\"neutral\"</span> versionScope=<span class=\"string\">\"nonSxS\"</span></span><br><span class=\"line\">            xmlns:wcm=<span class=\"string\">\"http://schemas.microsoft.com/WMIConfig/2002/State\"</span></span><br><span class=\"line\">            xmlns:xsi=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span>&gt;</span><br><span class=\"line\">            &lt;DiskConfiguration&gt;</span><br><span class=\"line\">                &lt;Disk wcm:action=<span class=\"string\">\"add\"</span>&gt;</span><br><span class=\"line\">                    &lt;CreatePartitions&gt;</span><br><span class=\"line\">                        &lt;CreatePartition wcm:action=<span class=\"string\">\"add\"</span>&gt;</span><br><span class=\"line\">                            &lt;Order&gt;1&lt;/Order&gt;</span><br><span class=\"line\">                            &lt;Type&gt;Primary&lt;/Type&gt;</span><br><span class=\"line\">                            &lt;Size&gt;100&lt;/Size&gt;</span><br><span class=\"line\">                        &lt;/CreatePartition&gt;</span><br><span class=\"line\">                        &lt;CreatePartition wcm:action=<span class=\"string\">\"add\"</span>&gt;</span><br><span class=\"line\">                            &lt;Extend&gt;<span class=\"literal\">true</span>&lt;/Extend&gt;</span><br><span class=\"line\">                            &lt;Order&gt;2&lt;/Order&gt;</span><br><span class=\"line\">                            &lt;Type&gt;Primary&lt;/Type&gt;</span><br><span class=\"line\">                        &lt;/CreatePartition&gt;</span><br><span class=\"line\">                    &lt;/CreatePartitions&gt;</span><br><span class=\"line\">                    &lt;ModifyPartitions&gt;</span><br><span class=\"line\">                        &lt;ModifyPartition wcm:action=<span class=\"string\">\"add\"</span>&gt;</span><br><span class=\"line\">                            &lt;Active&gt;<span class=\"literal\">true</span>&lt;/Active&gt;</span><br><span class=\"line\">                            &lt;Format&gt;NTFS&lt;/Format&gt;</span><br><span class=\"line\">                            &lt;Label&gt;System Reserved&lt;/Label&gt;</span><br><span class=\"line\">                            &lt;Order&gt;1&lt;/Order&gt;</span><br><span class=\"line\">                            &lt;PartitionID&gt;1&lt;/PartitionID&gt;</span><br><span class=\"line\">                            &lt;TypeID&gt;0x27&lt;/TypeID&gt;</span><br><span class=\"line\">                        &lt;/ModifyPartition&gt;</span><br><span class=\"line\">                        &lt;ModifyPartition wcm:action=<span class=\"string\">\"add\"</span>&gt;</span><br><span class=\"line\">                            &lt;Active&gt;<span class=\"literal\">true</span>&lt;/Active&gt;</span><br><span class=\"line\">                            &lt;Format&gt;NTFS&lt;/Format&gt;</span><br><span class=\"line\">                            &lt;Label&gt;OS&lt;/Label&gt;</span><br><span class=\"line\">                            &lt;Letter&gt;C&lt;/Letter&gt;</span><br><span class=\"line\">                            &lt;Order&gt;2&lt;/Order&gt;</span><br><span class=\"line\">                            &lt;PartitionID&gt;2&lt;/PartitionID&gt;</span><br><span class=\"line\">                        &lt;/ModifyPartition&gt;</span><br><span class=\"line\">                    &lt;/ModifyPartitions&gt;</span><br><span class=\"line\">                    &lt;DiskID&gt;0&lt;/DiskID&gt;</span><br><span class=\"line\">                    &lt;WillWipeDisk&gt;<span class=\"literal\">true</span>&lt;/WillWipeDisk&gt;</span><br><span class=\"line\">                &lt;/Disk&gt;</span><br><span class=\"line\">            &lt;/DiskConfiguration&gt;</span><br><span class=\"line\">            &lt;ImageInstall&gt;</span><br><span class=\"line\">                &lt;OSImage&gt;</span><br><span class=\"line\">                    &lt;InstallTo&gt;</span><br><span class=\"line\">                        &lt;DiskID&gt;0&lt;/DiskID&gt;</span><br><span class=\"line\">                        &lt;PartitionID&gt;2&lt;/PartitionID&gt;</span><br><span class=\"line\">                    &lt;/InstallTo&gt;</span><br><span class=\"line\">                    &lt;InstallToAvailablePartition&gt;<span class=\"literal\">false</span>&lt;/InstallToAvailablePartition&gt;</span><br><span class=\"line\">                &lt;/OSImage&gt;</span><br><span class=\"line\">            &lt;/ImageInstall&gt;</span><br><span class=\"line\">            &lt;UserData&gt;</span><br><span class=\"line\">                &lt;AcceptEula&gt;<span class=\"literal\">true</span>&lt;/AcceptEula&gt;</span><br><span class=\"line\">                &lt;FullName&gt;weiyiegeek&lt;/FullName&gt;</span><br><span class=\"line\">                &lt;Organization&gt;weiyiegeek&lt;/Organization&gt;</span><br><span class=\"line\">                &lt;ProductKey&gt;</span><br><span class=\"line\">                    &lt;Key&gt;VK7JG-NPHTM-C97JM-9MPGT-3V66T&lt;/Key&gt;</span><br><span class=\"line\">                &lt;/ProductKey&gt;</span><br><span class=\"line\">            &lt;/UserData&gt;</span><br><span class=\"line\">        &lt;/component&gt;</span><br><span class=\"line\">        &lt;component name=<span class=\"string\">\"Microsoft-Windows-Setup\"</span> processorArchitecture=<span class=\"string\">\"amd64\"</span> publicKeyToken=<span class=\"string\">\"31bf3856ad364e35\"</span> language=<span class=\"string\">\"neutral\"</span> versionScope=<span class=\"string\">\"nonSxS\"</span></span><br><span class=\"line\">            xmlns:wcm=<span class=\"string\">\"http://schemas.microsoft.com/WMIConfig/2002/State\"</span></span><br><span class=\"line\">            xmlns:xsi=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span>&gt;</span><br><span class=\"line\">            &lt;DiskConfiguration&gt;</span><br><span class=\"line\">                &lt;Disk wcm:action=<span class=\"string\">\"add\"</span>&gt;</span><br><span class=\"line\">                    &lt;CreatePartitions&gt;</span><br><span class=\"line\">                        &lt;CreatePartition wcm:action=<span class=\"string\">\"add\"</span>&gt;</span><br><span class=\"line\">                            &lt;Order&gt;1&lt;/Order&gt;</span><br><span class=\"line\">                            &lt;Type&gt;Primary&lt;/Type&gt;</span><br><span class=\"line\">                            &lt;Size&gt;100&lt;/Size&gt;</span><br><span class=\"line\">                        &lt;/CreatePartition&gt;</span><br><span class=\"line\">                        &lt;CreatePartition wcm:action=<span class=\"string\">\"add\"</span>&gt;</span><br><span class=\"line\">                            &lt;Extend&gt;<span class=\"literal\">true</span>&lt;/Extend&gt;</span><br><span class=\"line\">                            &lt;Order&gt;2&lt;/Order&gt;</span><br><span class=\"line\">                            &lt;Type&gt;Primary&lt;/Type&gt;</span><br><span class=\"line\">                        &lt;/CreatePartition&gt;</span><br><span class=\"line\">                    &lt;/CreatePartitions&gt;</span><br><span class=\"line\">                    &lt;ModifyPartitions&gt;</span><br><span class=\"line\">                        &lt;ModifyPartition wcm:action=<span class=\"string\">\"add\"</span>&gt;</span><br><span class=\"line\">                            &lt;Active&gt;<span class=\"literal\">true</span>&lt;/Active&gt;</span><br><span class=\"line\">                            &lt;Format&gt;NTFS&lt;/Format&gt;</span><br><span class=\"line\">                            &lt;Label&gt;System Reserved&lt;/Label&gt;</span><br><span class=\"line\">                            &lt;Order&gt;1&lt;/Order&gt;</span><br><span class=\"line\">                            &lt;PartitionID&gt;1&lt;/PartitionID&gt;</span><br><span class=\"line\">                            &lt;TypeID&gt;0x27&lt;/TypeID&gt;</span><br><span class=\"line\">                        &lt;/ModifyPartition&gt;</span><br><span class=\"line\">                        &lt;ModifyPartition wcm:action=<span class=\"string\">\"add\"</span>&gt;</span><br><span class=\"line\">                            &lt;Active&gt;<span class=\"literal\">true</span>&lt;/Active&gt;</span><br><span class=\"line\">                            &lt;Format&gt;NTFS&lt;/Format&gt;</span><br><span class=\"line\">                            &lt;Label&gt;OS&lt;/Label&gt;</span><br><span class=\"line\">                            &lt;Letter&gt;C&lt;/Letter&gt;</span><br><span class=\"line\">                            &lt;Order&gt;2&lt;/Order&gt;</span><br><span class=\"line\">                            &lt;PartitionID&gt;2&lt;/PartitionID&gt;</span><br><span class=\"line\">                        &lt;/ModifyPartition&gt;</span><br><span class=\"line\">                    &lt;/ModifyPartitions&gt;</span><br><span class=\"line\">                    &lt;DiskID&gt;0&lt;/DiskID&gt;</span><br><span class=\"line\">                    &lt;WillWipeDisk&gt;<span class=\"literal\">true</span>&lt;/WillWipeDisk&gt;</span><br><span class=\"line\">                &lt;/Disk&gt;</span><br><span class=\"line\">            &lt;/DiskConfiguration&gt;</span><br><span class=\"line\">            &lt;ImageInstall&gt;</span><br><span class=\"line\">                &lt;OSImage&gt;</span><br><span class=\"line\">                    &lt;InstallTo&gt;</span><br><span class=\"line\">                        &lt;DiskID&gt;0&lt;/DiskID&gt;</span><br><span class=\"line\">                        &lt;PartitionID&gt;2&lt;/PartitionID&gt;</span><br><span class=\"line\">                    &lt;/InstallTo&gt;</span><br><span class=\"line\">                    &lt;InstallToAvailablePartition&gt;<span class=\"literal\">false</span>&lt;/InstallToAvailablePartition&gt;</span><br><span class=\"line\">                &lt;/OSImage&gt;</span><br><span class=\"line\">            &lt;/ImageInstall&gt;</span><br><span class=\"line\">            &lt;UserData&gt;</span><br><span class=\"line\">                &lt;AcceptEula&gt;<span class=\"literal\">true</span>&lt;/AcceptEula&gt;</span><br><span class=\"line\">                &lt;FullName&gt;weiyiegeek&lt;/FullName&gt;</span><br><span class=\"line\">                &lt;Organization&gt;weiyiegeek&lt;/Organization&gt;</span><br><span class=\"line\">                &lt;ProductKey&gt;</span><br><span class=\"line\">                    &lt;Key&gt;VK7JG-NPHTM-C97JM-9MPGT-3V66T&lt;/Key&gt;</span><br><span class=\"line\">                &lt;/ProductKey&gt;</span><br><span class=\"line\">            &lt;/UserData&gt;</span><br><span class=\"line\">        &lt;/component&gt;</span><br><span class=\"line\">    &lt;/settings&gt;</span><br><span class=\"line\">    &lt;settings pass=<span class=\"string\">\"offlineServicing\"</span>&gt;</span><br><span class=\"line\">        &lt;component name=<span class=\"string\">\"Microsoft-Windows-LUA-Settings\"</span> processorArchitecture=<span class=\"string\">\"x86\"</span> publicKeyToken=<span class=\"string\">\"31bf3856ad364e35\"</span> language=<span class=\"string\">\"neutral\"</span> versionScope=<span class=\"string\">\"nonSxS\"</span></span><br><span class=\"line\">            xmlns:wcm=<span class=\"string\">\"http://schemas.microsoft.com/WMIConfig/2002/State\"</span></span><br><span class=\"line\">            xmlns:xsi=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span>&gt;</span><br><span class=\"line\">            &lt;EnableLUA&gt;<span class=\"literal\">false</span>&lt;/EnableLUA&gt;</span><br><span class=\"line\">        &lt;/component&gt;</span><br><span class=\"line\">    &lt;/settings&gt;</span><br><span class=\"line\">    &lt;settings pass=<span class=\"string\">\"offlineServicing\"</span>&gt;</span><br><span class=\"line\">        &lt;component name=<span class=\"string\">\"Microsoft-Windows-LUA-Settings\"</span> processorArchitecture=<span class=\"string\">\"amd64\"</span> publicKeyToken=<span class=\"string\">\"31bf3856ad364e35\"</span> language=<span class=\"string\">\"neutral\"</span> versionScope=<span class=\"string\">\"nonSxS\"</span></span><br><span class=\"line\">            xmlns:wcm=<span class=\"string\">\"http://schemas.microsoft.com/WMIConfig/2002/State\"</span></span><br><span class=\"line\">            xmlns:xsi=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span>&gt;</span><br><span class=\"line\">            &lt;EnableLUA&gt;<span class=\"literal\">false</span>&lt;/EnableLUA&gt;</span><br><span class=\"line\">        &lt;/component&gt;</span><br><span class=\"line\">    &lt;/settings&gt;</span><br><span class=\"line\">    &lt;settings pass=<span class=\"string\">\"generalize\"</span>&gt;</span><br><span class=\"line\">        &lt;component name=<span class=\"string\">\"Microsoft-Windows-Security-SPP\"</span> processorArchitecture=<span class=\"string\">\"x86\"</span> publicKeyToken=<span class=\"string\">\"31bf3856ad364e35\"</span> language=<span class=\"string\">\"neutral\"</span> versionScope=<span class=\"string\">\"nonSxS\"</span></span><br><span class=\"line\">            xmlns:wcm=<span class=\"string\">\"http://schemas.microsoft.com/WMIConfig/2002/State\"</span></span><br><span class=\"line\">            xmlns:xsi=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span>&gt;</span><br><span class=\"line\">            &lt;SkipRearm&gt;1&lt;/SkipRearm&gt;</span><br><span class=\"line\">        &lt;/component&gt;</span><br><span class=\"line\">    &lt;/settings&gt;</span><br><span class=\"line\">    &lt;settings pass=<span class=\"string\">\"generalize\"</span>&gt;</span><br><span class=\"line\">        &lt;component name=<span class=\"string\">\"Microsoft-Windows-Security-SPP\"</span> processorArchitecture=<span class=\"string\">\"amd64\"</span> publicKeyToken=<span class=\"string\">\"31bf3856ad364e35\"</span> language=<span class=\"string\">\"neutral\"</span> versionScope=<span class=\"string\">\"nonSxS\"</span></span><br><span class=\"line\">            xmlns:wcm=<span class=\"string\">\"http://schemas.microsoft.com/WMIConfig/2002/State\"</span></span><br><span class=\"line\">            xmlns:xsi=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span>&gt;</span><br><span class=\"line\">            &lt;SkipRearm&gt;1&lt;/SkipRearm&gt;</span><br><span class=\"line\">        &lt;/component&gt;</span><br><span class=\"line\">    &lt;/settings&gt;</span><br><span class=\"line\">    &lt;settings pass=<span class=\"string\">\"specialize\"</span>&gt;</span><br><span class=\"line\">        &lt;component name=<span class=\"string\">\"Microsoft-Windows-International-Core\"</span> processorArchitecture=<span class=\"string\">\"x86\"</span> publicKeyToken=<span class=\"string\">\"31bf3856ad364e35\"</span> language=<span class=\"string\">\"neutral\"</span> versionScope=<span class=\"string\">\"nonSxS\"</span></span><br><span class=\"line\">            xmlns:wcm=<span class=\"string\">\"http://schemas.microsoft.com/WMIConfig/2002/State\"</span></span><br><span class=\"line\">            xmlns:xsi=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span>&gt;</span><br><span class=\"line\">            &lt;InputLocale&gt;0804:&#123;81D4E9C9-1D3B-41BC-9E6C-4B40BF79E35E&#125;&#123;FA550B04-5AD7-411f-A5AC-CA038EC515D7&#125;&lt;/InputLocale&gt;</span><br><span class=\"line\">            &lt;SystemLocale&gt;zh-CN&lt;/SystemLocale&gt;</span><br><span class=\"line\">            &lt;UILanguage&gt;zh-CN&lt;/UILanguage&gt;</span><br><span class=\"line\">            &lt;UILanguageFallback&gt;zh-CN&lt;/UILanguageFallback&gt;</span><br><span class=\"line\">            &lt;UserLocale&gt;zh-CN&lt;/UserLocale&gt;</span><br><span class=\"line\">        &lt;/component&gt;</span><br><span class=\"line\">        &lt;component name=<span class=\"string\">\"Microsoft-Windows-International-Core\"</span> processorArchitecture=<span class=\"string\">\"amd64\"</span> publicKeyToken=<span class=\"string\">\"31bf3856ad364e35\"</span> language=<span class=\"string\">\"neutral\"</span> versionScope=<span class=\"string\">\"nonSxS\"</span></span><br><span class=\"line\">            xmlns:wcm=<span class=\"string\">\"http://schemas.microsoft.com/WMIConfig/2002/State\"</span></span><br><span class=\"line\">            xmlns:xsi=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span>&gt;</span><br><span class=\"line\">            &lt;InputLocale&gt;0804:&#123;81D4E9C9-1D3B-41BC-9E6C-4B40BF79E35E&#125;&#123;FA550B04-5AD7-411f-A5AC-CA038EC515D7&#125;&lt;/InputLocale&gt;</span><br><span class=\"line\">            &lt;SystemLocale&gt;zh-CN&lt;/SystemLocale&gt;</span><br><span class=\"line\">            &lt;UILanguage&gt;zh-CN&lt;/UILanguage&gt;</span><br><span class=\"line\">            &lt;UILanguageFallback&gt;zh-CN&lt;/UILanguageFallback&gt;</span><br><span class=\"line\">            &lt;UserLocale&gt;zh-CN&lt;/UserLocale&gt;</span><br><span class=\"line\">        &lt;/component&gt;</span><br><span class=\"line\">        &lt;component name=<span class=\"string\">\"Microsoft-Windows-Security-SPP-UX\"</span> processorArchitecture=<span class=\"string\">\"x86\"</span> publicKeyToken=<span class=\"string\">\"31bf3856ad364e35\"</span> language=<span class=\"string\">\"neutral\"</span> versionScope=<span class=\"string\">\"nonSxS\"</span></span><br><span class=\"line\">            xmlns:wcm=<span class=\"string\">\"http://schemas.microsoft.com/WMIConfig/2002/State\"</span></span><br><span class=\"line\">            xmlns:xsi=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span>&gt;</span><br><span class=\"line\">            &lt;SkipAutoActivation&gt;<span class=\"literal\">true</span>&lt;/SkipAutoActivation&gt;</span><br><span class=\"line\">        &lt;/component&gt;</span><br><span class=\"line\">        &lt;component name=<span class=\"string\">\"Microsoft-Windows-Security-SPP-UX\"</span> processorArchitecture=<span class=\"string\">\"amd64\"</span> publicKeyToken=<span class=\"string\">\"31bf3856ad364e35\"</span> language=<span class=\"string\">\"neutral\"</span> versionScope=<span class=\"string\">\"nonSxS\"</span></span><br><span class=\"line\">            xmlns:wcm=<span class=\"string\">\"http://schemas.microsoft.com/WMIConfig/2002/State\"</span></span><br><span class=\"line\">            xmlns:xsi=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span>&gt;</span><br><span class=\"line\">            &lt;SkipAutoActivation&gt;<span class=\"literal\">true</span>&lt;/SkipAutoActivation&gt;</span><br><span class=\"line\">        &lt;/component&gt;</span><br><span class=\"line\">        &lt;component name=<span class=\"string\">\"Microsoft-Windows-SQMApi\"</span> processorArchitecture=<span class=\"string\">\"x86\"</span> publicKeyToken=<span class=\"string\">\"31bf3856ad364e35\"</span> language=<span class=\"string\">\"neutral\"</span> versionScope=<span class=\"string\">\"nonSxS\"</span></span><br><span class=\"line\">            xmlns:wcm=<span class=\"string\">\"http://schemas.microsoft.com/WMIConfig/2002/State\"</span></span><br><span class=\"line\">            xmlns:xsi=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span>&gt;</span><br><span class=\"line\">            &lt;CEIPEnabled&gt;0&lt;/CEIPEnabled&gt;</span><br><span class=\"line\">        &lt;/component&gt;</span><br><span class=\"line\">        &lt;component name=<span class=\"string\">\"Microsoft-Windows-SQMApi\"</span> processorArchitecture=<span class=\"string\">\"amd64\"</span> publicKeyToken=<span class=\"string\">\"31bf3856ad364e35\"</span> language=<span class=\"string\">\"neutral\"</span> versionScope=<span class=\"string\">\"nonSxS\"</span></span><br><span class=\"line\">            xmlns:wcm=<span class=\"string\">\"http://schemas.microsoft.com/WMIConfig/2002/State\"</span></span><br><span class=\"line\">            xmlns:xsi=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span>&gt;</span><br><span class=\"line\">            &lt;CEIPEnabled&gt;0&lt;/CEIPEnabled&gt;</span><br><span class=\"line\">        &lt;/component&gt;</span><br><span class=\"line\">        &lt;component name=<span class=\"string\">\"Microsoft-Windows-Shell-Setup\"</span> processorArchitecture=<span class=\"string\">\"x86\"</span> publicKeyToken=<span class=\"string\">\"31bf3856ad364e35\"</span> language=<span class=\"string\">\"neutral\"</span> versionScope=<span class=\"string\">\"nonSxS\"</span></span><br><span class=\"line\">            xmlns:wcm=<span class=\"string\">\"http://schemas.microsoft.com/WMIConfig/2002/State\"</span></span><br><span class=\"line\">            xmlns:xsi=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span>&gt;</span><br><span class=\"line\">            &lt;ComputerName&gt;weiyiegeek-PC&lt;/ComputerName&gt;</span><br><span class=\"line\">            &lt;ProductKey&gt;VK7JG-NPHTM-C97JM-9MPGT-3V66T&lt;/ProductKey&gt;</span><br><span class=\"line\">        &lt;/component&gt;</span><br><span class=\"line\">        &lt;component name=<span class=\"string\">\"Microsoft-Windows-Shell-Setup\"</span> processorArchitecture=<span class=\"string\">\"amd64\"</span> publicKeyToken=<span class=\"string\">\"31bf3856ad364e35\"</span> language=<span class=\"string\">\"neutral\"</span> versionScope=<span class=\"string\">\"nonSxS\"</span></span><br><span class=\"line\">            xmlns:wcm=<span class=\"string\">\"http://schemas.microsoft.com/WMIConfig/2002/State\"</span></span><br><span class=\"line\">            xmlns:xsi=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span>&gt;</span><br><span class=\"line\">            &lt;ComputerName&gt;weiyiegeek-PC&lt;/ComputerName&gt;</span><br><span class=\"line\">            &lt;ProductKey&gt;VK7JG-NPHTM-C97JM-9MPGT-3V66T&lt;/ProductKey&gt;</span><br><span class=\"line\">        &lt;/component&gt;</span><br><span class=\"line\">    &lt;/settings&gt;</span><br><span class=\"line\">    &lt;settings pass=<span class=\"string\">\"oobeSystem\"</span>&gt;</span><br><span class=\"line\">        &lt;component name=<span class=\"string\">\"Microsoft-Windows-Shell-Setup\"</span> processorArchitecture=<span class=\"string\">\"x86\"</span> publicKeyToken=<span class=\"string\">\"31bf3856ad364e35\"</span> language=<span class=\"string\">\"neutral\"</span> versionScope=<span class=\"string\">\"nonSxS\"</span></span><br><span class=\"line\">            xmlns:wcm=<span class=\"string\">\"http://schemas.microsoft.com/WMIConfig/2002/State\"</span></span><br><span class=\"line\">            xmlns:xsi=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span>&gt;</span><br><span class=\"line\">            &lt;AutoLogon&gt;</span><br><span class=\"line\">                &lt;Password&gt;</span><br><span class=\"line\">                    &lt;Value&gt;&lt;/Value&gt;</span><br><span class=\"line\">                    &lt;PlainText&gt;<span class=\"literal\">true</span>&lt;/PlainText&gt;</span><br><span class=\"line\">                &lt;/Password&gt;</span><br><span class=\"line\">                &lt;Enabled&gt;<span class=\"literal\">true</span>&lt;/Enabled&gt;</span><br><span class=\"line\">                &lt;Username&gt;weiyiegeek&lt;/Username&gt;</span><br><span class=\"line\">            &lt;/AutoLogon&gt;</span><br><span class=\"line\">            &lt;OOBE&gt;</span><br><span class=\"line\">                &lt;HideEULAPage&gt;<span class=\"literal\">true</span>&lt;/HideEULAPage&gt;</span><br><span class=\"line\">                &lt;HideOEMRegistrationScreen&gt;<span class=\"literal\">true</span>&lt;/HideOEMRegistrationScreen&gt;</span><br><span class=\"line\">                &lt;HideOnlineAccountScreens&gt;<span class=\"literal\">true</span>&lt;/HideOnlineAccountScreens&gt;</span><br><span class=\"line\">                &lt;HideWirelessSetupInOOBE&gt;<span class=\"literal\">true</span>&lt;/HideWirelessSetupInOOBE&gt;</span><br><span class=\"line\">                &lt;NetworkLocation&gt;Work&lt;/NetworkLocation&gt;</span><br><span class=\"line\">                &lt;SkipUserOOBE&gt;<span class=\"literal\">true</span>&lt;/SkipUserOOBE&gt;</span><br><span class=\"line\">                &lt;SkipMachineOOBE&gt;<span class=\"literal\">true</span>&lt;/SkipMachineOOBE&gt;</span><br><span class=\"line\">                &lt;ProtectYourPC&gt;1&lt;/ProtectYourPC&gt;</span><br><span class=\"line\">            &lt;/OOBE&gt;</span><br><span class=\"line\">            &lt;UserAccounts&gt;</span><br><span class=\"line\">                &lt;LocalAccounts&gt;</span><br><span class=\"line\">                    &lt;LocalAccount wcm:action=<span class=\"string\">\"add\"</span>&gt;</span><br><span class=\"line\">                        &lt;Password&gt;</span><br><span class=\"line\">                            &lt;Value&gt;&lt;/Value&gt;</span><br><span class=\"line\">                            &lt;PlainText&gt;<span class=\"literal\">true</span>&lt;/PlainText&gt;</span><br><span class=\"line\">                        &lt;/Password&gt;</span><br><span class=\"line\">                        &lt;Description&gt;PC用户 weiyiegeek&lt;/Description&gt;</span><br><span class=\"line\">                        &lt;DisplayName&gt;weiyiegeek&lt;/DisplayName&gt;</span><br><span class=\"line\">                        &lt;Group&gt;Administrators&lt;/Group&gt;</span><br><span class=\"line\">                        &lt;Name&gt;weiyiegeek&lt;/Name&gt;</span><br><span class=\"line\">                    &lt;/LocalAccount&gt;</span><br><span class=\"line\">                &lt;/LocalAccounts&gt;</span><br><span class=\"line\">            &lt;/UserAccounts&gt;</span><br><span class=\"line\">            &lt;RegisteredOrganization&gt;weiyiegeek&lt;/RegisteredOrganization&gt;</span><br><span class=\"line\">            &lt;RegisteredOwner&gt;weiyiegeek&lt;/RegisteredOwner&gt;</span><br><span class=\"line\">            &lt;DisableAutoDaylightTimeSet&gt;<span class=\"literal\">false</span>&lt;/DisableAutoDaylightTimeSet&gt;</span><br><span class=\"line\">            &lt;FirstLogonCommands&gt;</span><br><span class=\"line\">                &lt;SynchronousCommand wcm:action=<span class=\"string\">\"add\"</span>&gt;</span><br><span class=\"line\">                    &lt;Description&gt;Control Panel View&lt;/Description&gt;</span><br><span class=\"line\">                    &lt;Order&gt;1&lt;/Order&gt;</span><br><span class=\"line\">                    &lt;CommandLine&gt;reg add <span class=\"string\">\"HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\CurrentVersion\\Explorer\\ControlPanel\"</span> /v StartupPage /t REG_DWORD /d 1 /f&lt;/CommandLine&gt;</span><br><span class=\"line\">                    &lt;RequiresUserInput&gt;<span class=\"literal\">true</span>&lt;/RequiresUserInput&gt;</span><br><span class=\"line\">                &lt;/SynchronousCommand&gt;</span><br><span class=\"line\">                &lt;SynchronousCommand wcm:action=<span class=\"string\">\"add\"</span>&gt;</span><br><span class=\"line\">                    &lt;Order&gt;2&lt;/Order&gt;</span><br><span class=\"line\">                    &lt;Description&gt;Control Panel Icon Size&lt;/Description&gt;</span><br><span class=\"line\">                    &lt;RequiresUserInput&gt;<span class=\"literal\">false</span>&lt;/RequiresUserInput&gt;</span><br><span class=\"line\">                    &lt;CommandLine&gt;reg add <span class=\"string\">\"HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\CurrentVersion\\Explorer\\ControlPanel\"</span> /v AllItemsIconView /t REG_DWORD /d 0 /f&lt;/CommandLine&gt;</span><br><span class=\"line\">                &lt;/SynchronousCommand&gt;</span><br><span class=\"line\">                &lt;SynchronousCommand wcm:action=<span class=\"string\">\"add\"</span>&gt;</span><br><span class=\"line\">                    &lt;Order&gt;3&lt;/Order&gt;</span><br><span class=\"line\">                    &lt;RequiresUserInput&gt;<span class=\"literal\">false</span>&lt;/RequiresUserInput&gt;</span><br><span class=\"line\">                    &lt;CommandLine&gt;cmd /C wmic useraccount <span class=\"built_in\">where</span> name=<span class=\"string\">\"weiyiegeek\"</span> <span class=\"built_in\">set</span> PasswordExpires=<span class=\"literal\">false</span>&lt;/CommandLine&gt;</span><br><span class=\"line\">                    &lt;Description&gt;Password Never Expires&lt;/Description&gt;</span><br><span class=\"line\">                &lt;/SynchronousCommand&gt;</span><br><span class=\"line\">            &lt;/FirstLogonCommands&gt;</span><br><span class=\"line\">            &lt;TimeZone&gt;China Standard Time&lt;/TimeZone&gt;</span><br><span class=\"line\">        &lt;/component&gt;</span><br><span class=\"line\">        &lt;component name=<span class=\"string\">\"Microsoft-Windows-Shell-Setup\"</span> processorArchitecture=<span class=\"string\">\"amd64\"</span> publicKeyToken=<span class=\"string\">\"31bf3856ad364e35\"</span> language=<span class=\"string\">\"neutral\"</span> versionScope=<span class=\"string\">\"nonSxS\"</span></span><br><span class=\"line\">            xmlns:wcm=<span class=\"string\">\"http://schemas.microsoft.com/WMIConfig/2002/State\"</span></span><br><span class=\"line\">            xmlns:xsi=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span>&gt;</span><br><span class=\"line\">            &lt;AutoLogon&gt;</span><br><span class=\"line\">                &lt;Password&gt;</span><br><span class=\"line\">                    &lt;Value&gt;&lt;/Value&gt;</span><br><span class=\"line\">                    &lt;PlainText&gt;<span class=\"literal\">true</span>&lt;/PlainText&gt;</span><br><span class=\"line\">                &lt;/Password&gt;</span><br><span class=\"line\">                &lt;Enabled&gt;<span class=\"literal\">true</span>&lt;/Enabled&gt;</span><br><span class=\"line\">                &lt;Username&gt;weiyiegeek&lt;/Username&gt;</span><br><span class=\"line\">            &lt;/AutoLogon&gt;</span><br><span class=\"line\">            &lt;OOBE&gt;</span><br><span class=\"line\">                &lt;HideEULAPage&gt;<span class=\"literal\">true</span>&lt;/HideEULAPage&gt;</span><br><span class=\"line\">                &lt;HideOEMRegistrationScreen&gt;<span class=\"literal\">true</span>&lt;/HideOEMRegistrationScreen&gt;</span><br><span class=\"line\">                &lt;HideOnlineAccountScreens&gt;<span class=\"literal\">true</span>&lt;/HideOnlineAccountScreens&gt;</span><br><span class=\"line\">                &lt;HideWirelessSetupInOOBE&gt;<span class=\"literal\">true</span>&lt;/HideWirelessSetupInOOBE&gt;</span><br><span class=\"line\">                &lt;NetworkLocation&gt;Work&lt;/NetworkLocation&gt;</span><br><span class=\"line\">                &lt;SkipUserOOBE&gt;<span class=\"literal\">true</span>&lt;/SkipUserOOBE&gt;</span><br><span class=\"line\">                &lt;SkipMachineOOBE&gt;<span class=\"literal\">true</span>&lt;/SkipMachineOOBE&gt;</span><br><span class=\"line\">                &lt;ProtectYourPC&gt;1&lt;/ProtectYourPC&gt;</span><br><span class=\"line\">            &lt;/OOBE&gt;</span><br><span class=\"line\">            &lt;UserAccounts&gt;</span><br><span class=\"line\">                &lt;LocalAccounts&gt;</span><br><span class=\"line\">                    &lt;LocalAccount wcm:action=<span class=\"string\">\"add\"</span>&gt;</span><br><span class=\"line\">                        &lt;Password&gt;</span><br><span class=\"line\">                            &lt;Value&gt;&lt;/Value&gt;</span><br><span class=\"line\">                            &lt;PlainText&gt;<span class=\"literal\">true</span>&lt;/PlainText&gt;</span><br><span class=\"line\">                        &lt;/Password&gt;</span><br><span class=\"line\">                        &lt;Description&gt;PC用户 weiyiegeek&lt;/Description&gt;</span><br><span class=\"line\">                        &lt;DisplayName&gt;weiyiegeek&lt;/DisplayName&gt;</span><br><span class=\"line\">                        &lt;Group&gt;Administrators&lt;/Group&gt;</span><br><span class=\"line\">                        &lt;Name&gt;weiyiegeek&lt;/Name&gt;</span><br><span class=\"line\">                    &lt;/LocalAccount&gt;</span><br><span class=\"line\">                &lt;/LocalAccounts&gt;</span><br><span class=\"line\">            &lt;/UserAccounts&gt;</span><br><span class=\"line\">            &lt;RegisteredOrganization&gt;weiyiegeek&lt;/RegisteredOrganization&gt;</span><br><span class=\"line\">            &lt;RegisteredOwner&gt;weiyiegeek&lt;/RegisteredOwner&gt;</span><br><span class=\"line\">            &lt;DisableAutoDaylightTimeSet&gt;<span class=\"literal\">false</span>&lt;/DisableAutoDaylightTimeSet&gt;</span><br><span class=\"line\">            &lt;FirstLogonCommands&gt;</span><br><span class=\"line\">                &lt;SynchronousCommand wcm:action=<span class=\"string\">\"add\"</span>&gt;</span><br><span class=\"line\">                    &lt;Description&gt;Control Panel View&lt;/Description&gt;</span><br><span class=\"line\">                    &lt;Order&gt;1&lt;/Order&gt;</span><br><span class=\"line\">                    &lt;CommandLine&gt;reg add <span class=\"string\">\"HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\CurrentVersion\\Explorer\\ControlPanel\"</span> /v StartupPage /t REG_DWORD /d 1 /f&lt;/CommandLine&gt;</span><br><span class=\"line\">                    &lt;RequiresUserInput&gt;<span class=\"literal\">true</span>&lt;/RequiresUserInput&gt;</span><br><span class=\"line\">                &lt;/SynchronousCommand&gt;</span><br><span class=\"line\">                &lt;SynchronousCommand wcm:action=<span class=\"string\">\"add\"</span>&gt;</span><br><span class=\"line\">                    &lt;Order&gt;2&lt;/Order&gt;</span><br><span class=\"line\">                    &lt;Description&gt;Control Panel Icon Size&lt;/Description&gt;</span><br><span class=\"line\">                    &lt;RequiresUserInput&gt;<span class=\"literal\">false</span>&lt;/RequiresUserInput&gt;</span><br><span class=\"line\">                    &lt;CommandLine&gt;reg add <span class=\"string\">\"HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\CurrentVersion\\Explorer\\ControlPanel\"</span> /v AllItemsIconView /t REG_DWORD /d 0 /f&lt;/CommandLine&gt;</span><br><span class=\"line\">                &lt;/SynchronousCommand&gt;</span><br><span class=\"line\">                &lt;SynchronousCommand wcm:action=<span class=\"string\">\"add\"</span>&gt;</span><br><span class=\"line\">                    &lt;Order&gt;3&lt;/Order&gt;</span><br><span class=\"line\">                    &lt;RequiresUserInput&gt;<span class=\"literal\">false</span>&lt;/RequiresUserInput&gt;</span><br><span class=\"line\">                    &lt;CommandLine&gt;cmd /C wmic useraccount <span class=\"built_in\">where</span> name=<span class=\"string\">\"weiyiegeek\"</span> <span class=\"built_in\">set</span> PasswordExpires=<span class=\"literal\">false</span>&lt;/CommandLine&gt;</span><br><span class=\"line\">                    &lt;Description&gt;Password Never Expires&lt;/Description&gt;</span><br><span class=\"line\">                &lt;/SynchronousCommand&gt;</span><br><span class=\"line\">            &lt;/FirstLogonCommands&gt;</span><br><span class=\"line\">            &lt;TimeZone&gt;China Standard Time&lt;/TimeZone&gt;</span><br><span class=\"line\">        &lt;/component&gt;</span><br><span class=\"line\">    &lt;/settings&gt;</span><br><span class=\"line\">&lt;/unattend&gt;</span><br></pre></td></tr></table></figure></p>\n<p><em>注意事项</em>：</p>\n<ul>\n<li>安装密钥统一替换为 VK7JG-NPHTM-C97JM-9MPGT-3V66T</li>\n</ul>\n<p><br></p>\n<h5 id=\"5-镜像上传\"><a href=\"#5-镜像上传\" class=\"headerlink\" title=\"5. 镜像上传\"></a>5. 镜像上传</h5><p>通过winscp等软件将 cn_windows_10_business_edition_version_1809_updated_sept_2018_x64_dvd_84ac403f.iso 上传到cobbler服务器上,并将创建的应答文件上传到cobbler /smb/win/win10_x64_bios_auto.xml;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$mkdir</span> -p /smb/win</span><br><span class=\"line\"><span class=\"comment\">#采用上传文件的方式</span></span><br><span class=\"line\"><span class=\"variable\">$mount</span> -o loop,ro /tmp/cn_windows_10_business_edition_version_1809_updated_sept_2018_x64_dvd_84ac403f.iso /mnt/</span><br><span class=\"line\"><span class=\"variable\">$cp</span> -r /mnt/* /smb/win</span><br><span class=\"line\"><span class=\"variable\">$umount</span> /mnt/</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#采用光盘挂载的方式</span></span><br><span class=\"line\">[root@localhost mnt]<span class=\"variable\">$mount</span> /dev/sr0 /mnt/cdrom</span><br><span class=\"line\"><span class=\"variable\">$ls</span> /mnt/cdrom/</span><br><span class=\"line\">autorun.inf  boot  bootmgr  bootmgr.efi  efi  setup.exe  sources  support</span><br></pre></td></tr></table></figure>\n<p><br></p>\n<h5 id=\"6-测试安装\"><a href=\"#6-测试安装\" class=\"headerlink\" title=\"6.测试安装\"></a>6.测试安装</h5><p>完成上面的操作后在安装前必须在Cobbler服务器上执行：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cobbler sync  <span class=\"comment\">#同步选项</span></span><br></pre></td></tr></table></figure><br>Step1. 新建一台虚拟机进行BIOS设置PXE启动：<br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190529130758.png\" alt=\"WeiyiGeek.进入BOIS\" title=\"\" class=\"\">\n                <p>WeiyiGeek.进入BOIS</p>\n            </figure></p>\n<p>Step2. 进入PXE启动进行我们cobbler服务器传输过来的镜像引导，进行选择我们制作的镜像服务</p>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190529173230.png\" alt=\"WeiyiGeek.PXE\" title=\"\" class=\"\">\n                <p>WeiyiGeek.PXE</p>\n            </figure>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190529172712.png\" alt=\"WeiyiGeek.Windows10\" title=\"\" class=\"\">\n                <p>WeiyiGeek.Windows10</p>\n            </figure>\n<p>Step3. 然后挂载smb共享执行setup.exe来启用安装<br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190529172928.png\" alt=\"WeiyiGeek.smb\" title=\"\" class=\"\">\n                <p>WeiyiGeek.smb</p>\n            </figure></p>\n<p>Step4. 运行脚本startnet.cmd脚本<br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190529130007.png\" alt=\"WeiyiGeek.系统安装\" title=\"\" class=\"\">\n                <p>WeiyiGeek.系统安装</p>\n            </figure></p>\n<p>Step4. 等待系统安装完成即可</p>\n<p><br></p>\n<h4 id=\"0x01-Cobbler安装Windows7需求\"><a href=\"#0x01-Cobbler安装Windows7需求\" class=\"headerlink\" title=\"0x01 Cobbler安装Windows7需求\"></a>0x01 Cobbler安装Windows7需求</h4><p>Win PE的制作微软官方提供有相应的工具，该工具叫做：Windows AIK。<br>我们需要使用该工具来定制Win PE工具可以从这里下载：<br><a href=\"https://www.microsoft.com/zh-cn/download/details.aspx?id=5753\" target=\"_blank\" rel=\"noopener\">适用于 Windows® 7 的 Windows® 自动安装工具包 (AIK)</a></p>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190604222843.png\" alt=\"WeiyiGeek.解压安装\" title=\"\" class=\"\">\n                <p>WeiyiGeek.解压安装</p>\n            </figure>\n<p>安装完毕后，启动该工具来定制Win PE镜像<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#定制Win PE ISO所用命令及相关配置：</span></span><br><span class=\"line\">copype amd64 C:\\winpe</span><br><span class=\"line\">imagex /mountrw c:\\winpe\\winpe.wim 1 c:\\winpe\\mount</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> ping -n 7 -l 69 192.168.1.199 &gt;&gt; C:\\winpe\\mount\\Windows\\System32\\startnet.cmd</span><br><span class=\"line\"><span class=\"built_in\">echo</span> net use z: \\\\192.168.1.199\\share &gt;&gt; C:\\winpe\\mount\\Windows\\System32\\startnet.cmd</span><br><span class=\"line\"><span class=\"built_in\">echo</span> Z: &gt;&gt; C:\\winpe\\mount\\Windows\\System32\\startnet.cmd</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">#win是包含windows 7 ISO解压文件的父目录</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"built_in\">cd</span> win &gt;&gt; C:\\winpe\\mount\\Windows\\System32\\startnet.cmd</span><br><span class=\"line\"><span class=\"built_in\">echo</span> setup.exe /unattend:Autounattend.xml &gt;&gt; C:\\winpe\\mount\\Windows\\System32\\startnet.cmd</span><br><span class=\"line\"> </span><br><span class=\"line\">imagex /unmount c:\\winpe\\mount /commit</span><br><span class=\"line\"> </span><br><span class=\"line\">copy c:\\winpe\\winpe.wim c:\\winpe\\ISO\\sources\\boot.wim</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># \"-bC\"中间没有空格</span></span><br><span class=\"line\">oscdimg -n -bC:\\winpe\\etfsboot.com c:\\winpe\\ISO c:\\winpe\\winpe_cobbler_amd64.iso</span><br></pre></td></tr></table></figure></p>\n<p>命令解释：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#解释一下上面的几行命令：</span></span><br><span class=\"line\">1：使用copype命令创建C:\\winpe目录，并在该目录下生成Win PE预安装所需的文件。</span><br><span class=\"line\"></span><br><span class=\"line\">3：使用imagex命令挂载c:\\winpe\\winpe.wim文件到c:\\winpe\\mount目录下，以便后续进行修改，因为Windows系统的很多核心文件都被打包压缩在这个文件里面，所以我们需要挂载才能读写修改。除了imagex这个工具可以完成修改之外，另一个工具DIMS也能做到，如果你熟悉该工具，则可以使用DIMS来做。</span><br><span class=\"line\"></span><br><span class=\"line\">5-11：修改挂载后的wim文件，向C:\\winpe\\mount\\Windows\\System32\\startnet.cmd文件中写入一些脚本命令。其中第5行用于测试脚本有无执行可以删去。</span><br><span class=\"line\">剩下的几行是对samba共享文件的加载并执行，具体会在后续第三步samba文件共享那里详细解释。需要注意的是，这里用到的IP地址是我Cobbler Server服务器的地址，具体请根据你自己的服务器地址进行更改。</span><br><span class=\"line\">至于为什么是写入到startnet.cmd文件中，是因为Win PE第一次运行时固定使用 Wpeinit 和 Startnet.cmd 运行启动脚本。</span><br><span class=\"line\">但是对于Wpeinit我多次测试却没有成功过，因此选择将命令脚本写入到startnet.cmd文件中（startnet.cmd是Win PE ISO镜像自带的脚本文件）。</span><br><span class=\"line\"></span><br><span class=\"line\">一个问题：写入到脚本中的命令用到了Cobber Server端的IP地址，这个IP地址被硬编码到了Win PE ISO镜像中，一个可行的办法是在这里不直接写入具体命令，而是调用另外一个脚本，这个被掉的脚本可以放在其他地方，以方便后续修改。</span><br><span class=\"line\"></span><br><span class=\"line\">13：完成修改后，提交保存修改并去除挂载。</span><br><span class=\"line\"></span><br><span class=\"line\">15：拷贝修改后的winpe.wim到指定目录并重命名。</span><br><span class=\"line\"></span><br><span class=\"line\">18：生成Win PE ISO镜像工具，路径及名称为C:\\winpe\\winpe_cobbler_amd64.iso。</span><br></pre></td></tr></table></figure></p>\n<hr>\n\n<h4 id=\"0x02-附录\"><a href=\"#0x02-附录\" class=\"headerlink\" title=\"0x02 附录\"></a>0x02 附录</h4><p><strong>1. PXE启动芯片出错代码表、初始化/引导/载入Bootstrap错误代码</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- PXE-E00:Could not find enough free base memory.PXE主代码和UNDI运行时模块从闪存或上位内存拷贝至基本内存顶部480K(78000h)至640K(A0000h)的剩余空间位置,这段内存必须被系统BIOS填零,如果这些内存没有填零,PXE ROM里的重布置代码将认为这些内存已经被系统BIOS或其它启动ROM占用了。</span><br><span class=\"line\"></span><br><span class=\"line\">- PXE-E01:PCI Vendor and Device IDs <span class=\"keyword\">do</span> not match!</span><br><span class=\"line\">此信息在成品BIOS中不可能出现,当系统BIOS初始化基于PCI的ROM时,它将假设PCI总线/设备/模块(Bus/Device/Function)值已在AX寄存器里通过审核,如果AX寄存器里定义的PCI设备不匹配UNDI设备,将出现此错误代码。</span><br><span class=\"line\"></span><br><span class=\"line\">- PXE-E04:Error reading PCI configuration space</span><br><span class=\"line\">如果任何PCI BIOS调用导致PCI设置空间返回错误代码,此信息将出现,此信息将不会在成品BIOS和硬件上出现。</span><br><span class=\"line\"></span><br><span class=\"line\">- PXE-E05:EEPROM checksum error</span><br><span class=\"line\">如果网卡EEPROM内容被损坏,将出现此信息。EEPROM内容的损坏通常发生在正在对网卡EEPROM进行编程时系统突然复位(Reset)或掉电的情形下,如果出现此信息,PXE ROM将不执行引导。</span><br><span class=\"line\"></span><br><span class=\"line\">- PXE-E06:Option ROM requires DDIM support</span><br><span class=\"line\">此信息将不会在成品BIOS中出现,PCI可选ROM通常必须被设置为DDIM可选ROM(通常必须被安置在读/写上位内存中)</span><br><span class=\"line\"></span><br><span class=\"line\">- PXE-E07:PCI BIOS calls not supported</span><br><span class=\"line\">此信息将不会在成品BIOS中出现,PCI BIOS必须有PCI BIOS服务。</span><br><span class=\"line\"></span><br><span class=\"line\">- PXE-E08:Unexpected API error.API:xxxxh Status:xxxxh</span><br><span class=\"line\">如果PXE API返回一个运行时加载器(Runtime Loader)预料之外的状态代码,将出现此信息</span><br><span class=\"line\"></span><br><span class=\"line\">- PXE-E09:Unexpected UNDI loader error.Status:xxxxh</span><br><span class=\"line\">如果UNDI运行时加载器(Runtime Loader)返回预料之外的状态代码,将出现此信息</span><br><span class=\"line\"></span><br><span class=\"line\">_ARP错误代码_</span><br><span class=\"line\">- PXE-E11:ARP timeout PXE ROM 将重试四遍ARP请求,如果无法获取任何有效的ARP答复,将出现此信息,此信息通常源于一些网络和服务设置错误,通常的原因有:</span><br><span class=\"line\">1.在DHCP主服务器上设置了DHCP类标识符(Option 60)却在另一台服务器上安装了ProxyDHCP服务。</span><br><span class=\"line\">2.使用了不响应ARP请求的路由器</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">_BIOS和BIS错误代码_</span><br><span class=\"line\">* PXE-E20:BIOS extended memory copy error.AH==nn 如果BIOS扩展内存拷贝服务返回一个错误信息,此信息将出现,在成品BIOS中将不会遭遇此信息,代码<span class=\"string\">\"nn\"</span>为BIOS扩展内存拷贝服务(Int 15h,AH=87h)返回的错误代码。</span><br><span class=\"line\">* PXE-E21:BIS integrity check failed 如果在扩展内存中的BIS映像损坏,则将显示此信息</span><br><span class=\"line\">* PXE-E22:BIS p_w_picpath/credential validation failed 下载的映像和证书不匹配客户端关键字</span><br><span class=\"line\">* PXE-E23:BIS initialization failed BIS无法被初始化,没有更多可用数据</span><br><span class=\"line\">* PXE-E24:BIS shutdown failed BIS无法停止,没有更多可用数据</span><br><span class=\"line\">* PXE-E25:BIS get boot object authorization check flag failed--2 PXE启动芯片出错代码表无法检测BIS已启用/已禁用</span><br><span class=\"line\">* PXE-E26:BIS free memory failed无法释放BIS分配内存</span><br><span class=\"line\">* PXE-E27:BIS get signature information failed请求BIS证书类型信息不能被确定。</span><br><span class=\"line\">* PXE-E28:BIS bad entry structure checksum SM BIOS表中的BIS入口结构无效。</span><br><span class=\"line\"></span><br><span class=\"line\">_TFTP/MTFTP错误代码：_</span><br><span class=\"line\">* PXE-E32:TFTP open timeout TFTP<span class=\"string\">\"Open\"</span>请求没有应答,验证TFTP服务是否正在运行。</span><br><span class=\"line\">* PXE-E35:TFTP <span class=\"built_in\">read</span> timeout未收到下一个TFTP数据包</span><br><span class=\"line\">* PXE-E36:Error received from TFTP server从TFTP服务器上收到了一个错误的TFTP数据包</span><br><span class=\"line\">* PXE-E38:TFTP cannot open connection当试图送出一个TFTP<span class=\"string\">\"Open\"</span>包时发生了一个硬件错</span><br><span class=\"line\">* PXE-E39:TFTP cannot <span class=\"built_in\">read</span> from connection当试图送出一个TFTP应答包时发生了一个硬件错</span><br><span class=\"line\">- PXE-E3A:TFTP too many packages.此信息意味着发生了下列两种情况中的一个:</span><br><span class=\"line\">1.你试图用TFTP下载一个比分配的缓冲区更大的文件</span><br><span class=\"line\">2.你作为一个从(Slave)客户端使用MTFTP开始下载一个文件,而当你变成一个主(Master)客户端时,此文件的大小发生了改变。</span><br><span class=\"line\">* PXE-E3B:TFTP error– File not found请求的文件在TFTP服务器上无法找到。</span><br><span class=\"line\">* PXE-E3C:TFTP error– Access violation已在TFTP服务器上找到了请求的文件,但TFTP服务没有足够的访问权限开启/读取文件。</span><br><span class=\"line\">* PXE-E3F:TFTP packet size is invalid收到的TFTP包大小超过1456bytes BOOTP/DHCP错误代码</span><br><span class=\"line\">* PXE-E51:No DHCP or proxyDHCP offers were received客户端没有收到任何有效的DHCP、BOOTP或proxyDHCP应答。</span><br><span class=\"line\">* PXE-E52:proxyDHCP offers were received.No DHCP offers were received客户端没有收到任何有效的DHCP或BOOTP应答,但客户端收到了至少一个有效的proxyDHCP应答。</span><br><span class=\"line\">* PXE-E53:No boot filename received客户端收到了至少一个有效的DHCP/BOOTP应答,但没有启动文件名可下载。</span><br><span class=\"line\">* PXE-E55:proxyDHCP service did not reply to request on port 4011客户端发出一个proxyDHCP请求到DHCP服务器的4011端口并没有收到回复。</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">_UNDI错误代码_</span><br><span class=\"line\">* PXE-E60:Invalid UNDI API <span class=\"keyword\">function</span> number一个被基本代码所使用的API在UNDI ROM中无法执行。</span><br><span class=\"line\">* PXE-E61:Media <span class=\"built_in\">test</span> failed,check cable网线没有插或没有连接,可能是网线坏、网卡坏或连接问题。</span><br><span class=\"line\">* PXE-E63:Error <span class=\"keyword\">while</span> initializing the NIC初始化网卡硬件时出现错误,建议换网卡。</span><br><span class=\"line\">* PXE-E64:Error <span class=\"keyword\">while</span> initializing the PHY试图初始化PHY硬件时出现错误,建议换网卡。</span><br><span class=\"line\">* PXE-E65:Error <span class=\"keyword\">while</span> reading the configuration data读取网卡设置数据时出现错误,建议换网卡。</span><br><span class=\"line\">* PXE-E66:Error <span class=\"keyword\">while</span> reading the initialization data读取网卡初始化数据时出现错误,建议换网卡。</span><br><span class=\"line\">* PXE-E67:Invalid MAC address存储在这块网卡中的MAC地址无效,建议换网卡</span><br><span class=\"line\">* PXE-E68:Invalid EEPROM checksum EEPROM校验和错误,EEPROM内容已损坏,建议换网卡</span><br><span class=\"line\">* PXE-E69:Error <span class=\"keyword\">while</span> setting interrupt无法配置硬件中断,建议换网卡。</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">_Bootstrap和Discovery错误代码_</span><br><span class=\"line\">* PXE-E74:Bad or missing PXE menu and/or prompt information已检测到PXE标识但启动菜单和/或启动命令提示符标识未发现/不存在</span><br><span class=\"line\">* PXE-E76:Bad or missing multicast discovery address多播创建已启动但多播创建地址标识不符</span><br><span class=\"line\">* PXE-E77:Bad or missing discovery server list多播和广播创建(Discovery)都被禁用,或使用服务器列表启用,但服务器列表标识未发现/不存在</span><br><span class=\"line\">* PXE-E78:Could not locate boot server有效的引导服务器应答未被客户端收到</span><br><span class=\"line\">* PXE-E79:NBP is too big to fit <span class=\"keyword\">in</span> free base memory NBP太大,超过客户端基本内存容量</span><br><span class=\"line\">* PXE-E7A:Client could not locate asecure server当客户端未从启动服务器收到任何安全信息并且客户端上的BIS已被启用,将显示此信息。</span><br><span class=\"line\">* PXE-E7B:Missing MTFTP server IP address当ROM未收到PXE创建标识或proxyDHCP回应和DHCP SIADDR区域被设置为0.0.0.0,将显示此信息。</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">_未分类错误代码_</span><br><span class=\"line\">* PXE-EA0:Network boot canceled by keystroke用户在DHCP/创建/TFTP过程中按了<span class=\"string\">\"Esc\"</span>或<span class=\"string\">\"Ctrl C\"</span>键</span><br><span class=\"line\">* 基础代码/UNDI Loader错误代码</span><br><span class=\"line\">* PXE-EC1:BaseCode ROM ID structure was not found UNDI引导模块不能发现基础代码ROM ID结构。如果系统中有基础代码ROM映像,它可能已经损坏了</span><br><span class=\"line\">* PXE-EC3:BaseCode ROM ID structure is invalid基础代码ROM ID结构有问题,基础代码ROM映像已经损坏了</span><br><span class=\"line\">* PXE-EC4:UNDI ROM ID structure was not found基础代码载入模块不能在UNDI ROM ID结构中定位</span><br><span class=\"line\">* PXE-EC5:UNDI ROM ID structure is invalid UNDI ROM映像已经损坏了</span><br><span class=\"line\">* PXE-EC6:UNDI driver p_w_picpath is invalid UNDI ROM映像已经损坏了</span><br><span class=\"line\"></span><br><span class=\"line\">- PXE-EC8:!PXE structure was not found <span class=\"keyword\">in</span> UNDI driver code segment UNDI ROM映像已经损坏了,或者未能被BIOS载入,此错误信息通常系如下一个或三个原因所致:</span><br><span class=\"line\">1.当即将调用一个LOM映像的时间点,网卡映像正在被编程进BIOS</span><br><span class=\"line\">2.在PXE可选ROM开始启动之前,PXE可选ROM载入自检内存管理器(POST Memory Manager,<span class=\"variable\">$PMM</span>)分配的内存期间被损坏或删除。</span><br><span class=\"line\">3.在载入ROM结构期间UNDI_Loader结构未被正确载入</span><br><span class=\"line\"></span><br><span class=\"line\">- PXE-EC9:PXENV structure was not found <span class=\"keyword\">in</span> UNDI driver code segment UNDI ROM映像可能被损坏了,或未被BIOS载入,此错误信息通常系如下三个原因所致:</span><br><span class=\"line\">1.当即将调用一个LOM映像的时间点,网卡映像正在被编程进BIOS</span><br><span class=\"line\">2.在PXE可选ROM开始启动之前,PXE可选ROM载入自检内存管理器(POST Memory Manager,<span class=\"variable\">$PMM</span>)分配的内存期间被损坏或删除。</span><br><span class=\"line\">3.在载入ROM结构期间UNDI_Loader结构未被正确载入。</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<p><strong>2. 注意事项</strong></p>\n<ul>\n<li>在开启DHCP服务的时候必须是独立的网卡,并对它设置一个DHCP区域内的一个镜头IP(非常重要)</li>\n<li>在每次修改镜像或者cobbler的配置文件后需要重启cobbler与同步配置cobbler rsync</li>\n<li>关闭服务器防火墙与将selinux设置为disable</li>\n</ul>\n","comments":true,"excerpt":"[TOC]","categories":[{"name":"OperationTools","path":"api/categories/OperationTools.json"},{"name":"Systeminstall","path":"api/categories/Systeminstall.json"}],"tags":[{"name":"COBBLER","path":"api/tags/COBBLER.json"}]}