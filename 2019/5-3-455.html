<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="content-language" content="zh-CN"/>
    <meta name="author" content="WeiyiGeek" />
    <meta name="msvalidate.01" content="5C552FB1D885E0E11D2957EC958C8018" />
    <meta name="shenma-site-verification" content="4c655e91c76be0a93c1b6954c666c9d6_1649049085"/>
    <meta name="bytedance-verification-code" content="lKs4FqwCHSJ3A/c5tT7X" />
    <meta name="sogou_site_verification" content="OC65iET6Bk" />
    
    <title>ğŸŒ 1.Dockerå­¦ä¹ ä¹‹åŸºç¡€çŸ¥è¯†|WeiyiGeek Blog|å”¯ä¸€æå®¢Geek-ITç½‘ç»œå®‰å…¨è¿ç»´å¼€å‘æŠ€æœ¯çŸ¥è¯†åˆ†äº«-åšå®¢ç«™ç‚¹</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    
    <meta name="keywords" content="Docker">
    <meta name="Description" content="WeiyiGeek-å”¯ä¸€æå®¢åšå®¢ç«™ç‚¹,å…³æ³¨äºç½‘ç»œå®‰å…¨è¿ç»´,Webå®‰å…¨å¼€å‘,IOTç‰©è”ç½‘å®‰å…¨å¼€å‘,åº”ç”¨å¼€å‘,åˆ†äº«æŠ€æœ¯å­¦ä¹ çŸ¥è¯†ä¸å…¥å‘è§£å†³,æå‡ç½‘ç»œå®‰å…¨æŠ€æœ¯ä¸è‡ªèº«æŠ€æœ¯èƒ½åŠ›,ç«‹å¿—ç»´æŠ¤å¤§ä¼—ç½‘ç»œå®‰å…¨ä¸ºå·±ä»»,åšä¸€ä¸ªå¯¹å›½å®¶æœ‰ç”¨çš„äºº,ä¸ºå®ç°ä¸­åæ°‘æ—ä¼Ÿå¤§å¤å…´çš„ä¸­å›½æ¢¦ä¸æ‡ˆå¥‹æ–—">
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="/css/jquery/3.5.2-jquery.fancybox.min.css?v=1.6.6" />
    <link rel="stylesheet" href="/css/style.css?v=1.6.6">
    <!--  -->
     <script type="text/javascript" src="/js/custom/articlecost.js?v=1.6.6"></script> 
    <link rel="stylesheet" href="/css/third-party/gitalk.css?v=1.6.6"> 
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9134434519967436" crossorigin="anonymous"></script>    
    <script type="text/javascript">
        // Data Center
        var DC = {
          reward:	true,
          lv: JSON.parse('{"enable":false,"app_id":null,"app_key":null,"icon":true}'),
          v: JSON.parse('{"enable":false,"appid":null,"appkey":null,"notify":true,"verify":true,"placeholder":"give me some sugers plz...","avatar":"wavatar"}')
        };
    </script>
    <script type="text/javascript">window.lazyScripts=[];</script>
<meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="WeiyiGeek Blog" type="application/atom+xml">
</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="">
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap">
      
      <img src="/img/brand.jpg" class="brand-bg" alt="WeiyiGeek-backgroud">
      
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg" alt="WeiyiGeek-å¤´åƒ">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">WeiyiGeek</h5>
          <a href="mailto:master@weiyigeek.top" title="master@weiyigeek.top" class="mail">
            <span>m</span><span>a</span><span>s</span><span>t</span><span>e</span><span>r</span><span>@</span><span>w</span><span>e</span><span>i</span><span>y</span><span>i</span><span>g</span><span>e</span><span>e</span><span>k</span><span>.</span><span>t</span><span>o</span><span>p</span>
          </a>
        </hgroup>
        
        <ul class="menu-link">
          
              <li>
                <a href="https://weiyigeek.top/img/wechat-search.png" target="_blank">
                  <i class="icon icon-lg icon-wechat"></i>
                </a>
              </li>
            
              <li>
                <a href="https://github.com/weiyigeek" target="_blank">
                  <i class="icon icon-lg icon-github"></i>
                </a>
              </li>
            
              <li>
                <a href="https://t.me/WeiyiGeek" target="_blank">
                  <i class="icon icon-lg icon-telegram"></i>
                </a>
              </li>
            
              <li>
                <a href="https://twitter.com/WeiyiGeek" target="_blank">
                  <i class="icon icon-lg icon-twitter"></i>
                </a>
              </li>
            
              <li>
                <a href="https://weibo.com/615643678" target="_blank">
                  <i class="icon icon-lg icon-weibo"></i>
                </a>
              </li>
            
        </ul>
        
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                é¦–é¡µ
              </a>
            </li>
        
            <li class="">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                æ–‡ç« åˆ†ç±»
              </a>
            </li>
        
            <li class="">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                æ–‡ç« æ ‡ç­¾
              </a>
            </li>
        
            <li class="">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                æ–‡ç« å½’æ¡£
              </a>
            </li>
        
            <li class="">
              <a href="/books"  >
                <i class="icon icon-lg icon-book"></i>
                å­¦ä¹ ä¹¦ç±
              </a>
            </li>
        
            <li class="">
              <a href="/about"  >
                <i class="icon icon-lg icon-user"></i>
                å…³äºä½œè€…
              </a>
            </li>
        
            <li class="">
              <a href="/links"  >
                <i class="icon icon-lg icon-link"></i>
                ç«™ç‚¹å¯¼èˆª
              </a>
            </li>
        
            <li class="">
              <a href="https://weiyigeek.top/img/wechat-search.png" target="_blank" >
                <i class="icon icon-lg icon-wechat"></i>
                å…¬ä¼—è´¦å·
              </a>
            </li>
        
            <li class="">
              <a href="https://space.bilibili.com/385802642" target="_blank" >
                <i class="icon icon-lg icon-youtube-play"></i>
                å“”å“©å“”å“©
              </a>
            </li>
        
            <li class="">
              <a href="https://github.com/weiyigeek" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="">
              <a href="https://twitter.com/WeiyiGeek" target="_blank" >
                <i class="icon icon-lg icon-twitter"></i>
                Twitter
              </a>
            </li>
        
            <li class="">
              <a href="https://weibo.com/615643678" target="_blank" >
                <i class="icon icon-lg icon-weibo"></i>
                Weibo
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row clearfix">
        <a href="javascript:;" class="header-icon pull-left waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">
            <span>1.Dockerå­¦ä¹ ä¹‹åŸºç¡€çŸ¥è¯†</span>
            
        </div>

        
        <a href="javascript:;" id="site_search_btn" class="header-icon pull-right waves-effect waves-circle waves-light">
            <i class="icon icon-lg icon-search"></i>
        </a>
        

        
            <a href="/atom.xml" class="header-icon pull-right waves-effect waves-circle waves-light">
                <i class="icon icon-lg icon-rss"></i>
            </a>
        
    </div>
</header>
<header class="content-header post-header">
    <img src="/img/banner.jpg" class="header-bg" alt="æ–‡ç« å¤´éƒ¨èƒŒæ™¯">
    <div class="container fade-scale">
        <h1 class="title">1.Dockerå­¦ä¹ ä¹‹åŸºç¡€çŸ¥è¯†</h1>
        <h5 class="subtitle">
            
                <time datetime="2019-05-03T06:36:30.000Z" itemprop="datePublished" class="page-time">
  2019-05-03
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Containers/">Containers</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Containers/OperationTools/">OperationTools</a></li></ul></li></ul>


            
        </h5>
        
    </div>
    

</header>

<div id="site_search">
    <div class="search-title clearfix">
        <span class="pull-left">
          <i class="icon icon-lg icon-search"></i>
        </span>
        <input type="text" id="local-search-input" name="q" results="0" placeholder="search my blog..." class="form-control pull-left"/>
        <a href="javascript:;" class="close pull-right waves-effect waves-circle waves-light">
          <i class="icon icon-lg icon-close"></i>
        </a>
    </div>
    <div id="local-search-result"></div>
</div>


<div class="container body-wrap">
  <article id="post-è™šæ‹Ÿäº‘å®¹/äº‘å®¹å™¨/Docker/1.Dockerå­¦ä¹ ä¹‹åŸºç¡€çŸ¥è¯†"
  class="post-article article-type-post" itemprop="blogPost">
    <div class="post-card">
        <h1 class="post-card-title">1.Dockerå­¦ä¹ ä¹‹åŸºç¡€çŸ¥è¯†</h1>
        <div class="post-meta">
            <time class="post-time" title="2019-05-03 14:36:30" datetime="2019-05-03T06:36:30.000Z"  itemprop="datePublished">2019-05-03</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Containers/">Containers</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Containers/OperationTools/">OperationTools</a></li></ul></li></ul>



            

            


            
        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            
            <p>[TOC]</p>
<a id="more"></a>
<h4 id="0x00-Docker-å¿«é€Ÿå…¥é—¨"><a href="#0x00-Docker-å¿«é€Ÿå…¥é—¨" class="headerlink" title="0x00 Docker å¿«é€Ÿå…¥é—¨"></a>0x00 Docker å¿«é€Ÿå…¥é—¨</h4><h5 id="1-Docker-åŸºç¡€ä»‹ç»"><a href="#1-Docker-åŸºç¡€ä»‹ç»" class="headerlink" title="1.Docker åŸºç¡€ä»‹ç»"></a>1.Docker åŸºç¡€ä»‹ç»</h5><p>æè¿°:Docker [ËˆdÉ‘:kÉ™(r)] æ˜¯ä¸€ä¸ªåŸºäºGoè¯­è¨€å¼€å‘å®ç°çš„éµå¾ªApache 2.0åè®®å¼€æºé¡¹ç›®,ç›®æ ‡æ˜¯å®ç°è½»é‡çº§çš„æ“ä½œç³»ç»Ÿè™šæ‹ŸåŒ–è§£å†³æ–¹æ¡ˆï¼›<br>,è¯ç”Ÿäº2013å¹´åˆæœ€åˆå‘èµ·è€…æ˜¯dotCloudå…¬å¸åˆ›å§‹äºº Solomon Hykes åœ¨æ³•å›½æœŸé—´å‘èµ·çš„ä¸€ä¸ªå…¬å¸å†…éƒ¨é¡¹ç›®,åç»­ç”±äºdockerçš„å‘å±•åæ¥ä¹Ÿæ”¹åä¸ºDocker Inc,å®ƒæ˜¯ä»…æ¬¡äºOpenStackæœ€å—æ¬¢è¿çš„äº‘è®¡ç®—å¼€æºé¡¹ç›®;Docker ä» 17.03ç‰ˆæœ¬ä¹‹ååˆ†ä¸º CEï¼ˆCommunity Editionï¼‰ å’Œ EEï¼ˆEnterprise Editionï¼‰</p>
<p>Docker çš„ç›®æ ‡æ˜¯â€<code>Build,Ship and Run Any App,Anywhere</code>â€œ,é€šè¿‡å¯¹åº”ç”¨ç»„ä»¶çš„å°è£…<code>\[Packaging]-&gt; åˆ†å‘\[Distribution] -&gt; éƒ¨ç½²\[Deployment] -&gt; è¿è¡Œ\[Runtime]</code>ç­‰ç”Ÿå‘½å‘¨æœŸè¿›è¡Œç®¡ç†,è¾¾åˆ°åº”ç”¨çº§åˆ«â€<code>ä¸€æ¬¡å°è£…,åˆ°å¤„è¿è¡Œ</code>â€œ;<br>ä¾‹å¦‚ï¼šå®ƒå¯ä»¥ç‹¬ç«‹è¿è¡Œä¸€ä¸ªWebåº”ç”¨,ä¹Ÿå¯ä»¥æ˜¯ä¸€å¥—æ•°æ®åº“æœåŠ¡,ç”šè‡³æ˜¯ä¸€ä¸ªæ“ä½œç³»ç»Ÿæˆ–ç¼–è¯‘å™¨;</p>
<p>Apache 2.0 æˆæƒ Github é¡¹ç›®å¼€æº : <a href="https://github.com/docker/docker" target="_blank" rel="noopener">https://github.com/docker/docker</a></p>
<p><br/></p>
<p><em>Dockerä¸OpenStackçš„åŒºåˆ«ï¼Ÿ</em></p>
<ul>
<li>éƒ¨ç½²éš¾åº¦ï¼šDockeréå¸¸ç®€å•;OpenStackç»„ä»¶å¤šéƒ¨ç½²ç¹ç</li>
<li>å¯åŠ¨é€Ÿåº¦ï¼šç§’çº§;åˆ†é’Ÿçº§</li>
<li>æ‰§è¡Œæ€§èƒ½ï¼šå’Œç‰©ç†æœºå‡ ä¹æ˜¯ä¸€è‡´;VMä¼šå ç”¨ä¸€äº›èµ„æº</li>
<li>é•œåƒä½“ç§¯ï¼šé•œåƒæ˜¯MBçº§åˆ«çš„;è™šæ‹Ÿæœºé•œåƒæ˜¯GBçº§åˆ«çš„</li>
<li>ç®¡ç†æ•ˆç‡ï¼šå…³é”®ç®€å•;ç»„ä»¶ç›¸äº’ä¾èµ–ä¸”ç®¡ç†å¤æ‚</li>
<li>éš”ç¦»æ€§ï¼šéš”ç¦»æ€§é«˜;å½»åº•éš”ç¦»</li>
<li>å¯ç®¡ç†æ€§ï¼šå•è¿›ç¨‹;å®Œæ•´çš„ç³»ç»Ÿç®¡ç†</li>
<li>ç½‘ç»œè¿æ¥ï¼šæ¯”è¾ƒå¼±;å€ŸåŠ©äºNeutronå¯ä»¥çµæ´»ç»„ä»¶å„ç±»ç½‘ç»œæ¶æ„</li>
</ul>
<p><br/></p>
<p>å®Œæ•´çš„Dockerç”±ä»¥ä¸‹å‡ éƒ¨åˆ†æ„æˆ:</p>
<ul>
<li>(1) å®ˆæŠ¤è¿›ç¨‹(Daemon)ï¼šDockerå®ˆæŠ¤è¿›ç¨‹(dockerd)ä¾¦å¬Docker APIè¯·æ±‚å¹¶ç®¡ç†Dockerå¯¹è±¡,<code>å¯ä»¥ä¸å®¢æˆ·ç«¯åœ¨åŒä¸€ä¸ªèŠ‚ç‚¹æˆ–è€…è¿è¡Œåœ¨ä¸åŒèŠ‚ç‚¹ä¸Š</code>ï¼Œå¦‚å›¾åƒã€å®¹å™¨ã€ç½‘ç»œå’Œå·ã€‚å®ˆæŠ¤è¿›ç¨‹è¿˜å¯ä»¥ä¸å…¶ä»–å®ˆæŠ¤è¿›ç¨‹é€šä¿¡æ¥ç®¡ç†DockeræœåŠ¡ã€‚</li>
<li>(2) REST API: ä¸»è¦ä¸Docker Daemonè¿›è¡Œäº¤äº’ï¼Œæ¯”å¦‚Docker Cliæˆ–è€…ç›´æ¥è°ƒç”¨REST APIï¼›</li>
<li>(3) å®¢æˆ·ç«¯(Docker Client): å®ƒæ˜¯ä¸Dockeräº¤äº’çš„ä¸»è¦æ–¹å¼é€šè¿‡å‘½ä»¤è¡Œæ¥å£(CLI)å®¢æˆ·ç«¯(dockerå‘½ä»¤)ï¼Œå®¢æˆ·æœºå°†å‘½ä»¤é€šè¿‡REST APIå‘é€ç»™<code>å®ˆæŠ¤è¿›ç¨‹dockerd</code>å¹¶æ‰§è¡Œå…¶å‘½ä»¤ï¼›(<code>æ³¨æ„:ä¸€ä¸ªå®¢æˆ·ç«¯å¯ä»¥ä¸å¤šä¸ªå®ˆæŠ¤è¿›ç¨‹é€šä¿¡</code>)</li>
<li>(4) Register Repository é•œåƒä»“åº“: Dockeræ³¨å†Œè¡¨å­˜å‚¨Dockeré•œåƒï¼Œå¯ä»¥é‡‡ç”¨Docker Hubæ˜¯å…¬å…±æ³¨å†Œä»“åº“ï¼Œæˆ–è€…é‡‡ç”¨ä¼ä¸šå†…éƒ¨è‡ªå»ºçš„Harborç§æœ‰ä»“åº“;</li>
<li>(5) Image é•œåƒ: æ˜ åƒæ˜¯ä¸€ä¸ªåªè¯»æ¨¡æ¿ï¼Œå¸¦æœ‰åˆ›å»ºDockerå®¹å™¨çš„æŒ‡ä»¤ã€‚æ˜ åƒé€šå¸¸åŸºäºå¦ä¸€ä¸ªæ˜ åƒï¼Œè¿˜éœ€è¦è¿›è¡Œä¸€äº›é¢å¤–çš„å®šåˆ¶ï¼Œä½ å¯ä»¥é€šè¿‡Docker Hubå…¬å…±é•œåƒä»“åº“è¿›è¡Œæ‹‰å–å¯¹åº”çš„ç³»ç»Ÿæˆ–è€…åº”ç”¨é•œåƒ;</li>
<li>(6) Container å®¹å™¨: å®¹å™¨æ˜¯æ˜ åƒçš„å¯è¿è¡Œå®ä¾‹ã€‚æ‚¨å¯ä»¥ä½¿ç”¨Docker APIæˆ–CLIåˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€ç§»åŠ¨æˆ–åˆ é™¤å®¹å™¨ã€‚æ‚¨å¯ä»¥å°†ä¸€ä¸ªå®¹å™¨è¿æ¥åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªç½‘ç»œï¼Œå°†å­˜å‚¨é™„åŠ åˆ°å®ƒï¼Œç”šè‡³æ ¹æ®å®ƒçš„å½“å‰çŠ¶æ€åˆ›å»ºä¸€ä¸ªæ–°æ˜ åƒã€‚</li>
<li>(7) Services : Dockerå¼•æ“æ”¯æŒé›†ç¾¤æ¨¡å¼æœåŠ¡å…è®¸æ‚¨è·¨å¤šä¸ªDockerå®ˆæŠ¤è¿›ç¨‹(<code>ä¸€ä¸ªç¾¤çš„æ¯ä¸ªæˆå‘˜éƒ½æ˜¯ä¸€ä¸ªDockerå®ˆæŠ¤è¿›ç¨‹</code>)æ‰©å±•ç®¡ç†å®¹å™¨ï¼ŒæœåŠ¡å…è®¸æ‚¨å®šä¹‰æ‰€éœ€çš„çŠ¶æ€ï¼Œä¾‹å¦‚åœ¨ä»»ä½•ç»™å®šæ—¶é—´å¿…é¡»å¯ç”¨çš„æœåŠ¡å‰¯æœ¬çš„æ•°é‡ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒæœåŠ¡åœ¨æ‰€æœ‰å·¥ä½œèŠ‚ç‚¹ä¹‹é—´è¿›è¡Œè´Ÿè½½å¹³è¡¡ã€‚å¯¹äºä½¿ç”¨è€…æ¥è¯´DockeræœåŠ¡çœ‹èµ·æ¥æ˜¯ä¸€ä¸ªå•ç‹¬çš„åº”ç”¨ç¨‹åºï¼›</li>
</ul>
<figure class="image-box">
                <a rel=1.Dockerå­¦ä¹ ä¹‹åŸºç¡€çŸ¥è¯† href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190512195606.png" target="_blank" title="WeiyiGeek.å¼•æ“å›¾" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190512195606.png" alt="WeiyiGeek.å¼•æ“å›¾" title="" class=""></a>
                <p>WeiyiGeek.å¼•æ“å›¾</p>
            </figure>
<p><br></p>
<p><em>Linuxå®¹å™¨åŸºç¡€ä¹‹LXCæŠ€æœ¯ä»‹ç»ï¼š</em></p>
<p>æè¿°:Dockerå¼•æ“çš„åŸºç¡€æ˜¯Linuxå®¹å™¨(Linux Containers,LXC)æŠ€æœ¯,å®¹å™¨æœ‰æ•ˆçš„å°†å„ä¸ªæ“ä½œç³»ç»Ÿç®¡ç†çš„èµ„æºåˆ’åˆ†åˆ°å­¤ç«‹çš„ç»„,ä»¥ä¾¿æ›´å¥½çš„åœ¨å­¤ç«‹çš„ç»„ä¹‹é—´å¹³è¡¡æœ‰å†²çªçš„èµ„æºä½¿ç”¨éœ€æ±‚ã€‚<br>å®¹å™¨å¯ä»¥åœ¨æ ¸å¿ƒCPUæœ¬åœ°è¿è¡ŒæŒ‡ä»¤,å¹¶ä¸éœ€è¦ä»»ä½•ä¸“é—¨çš„è§£é‡Šæœºåˆ¶;æœ€æ—©çš„å®¹å™¨æŠ€æœ¯å¯ä»¥è¿½æº¯åˆ°1982å¹´Unixç³»åˆ—æ“ä½œç³»ç»Ÿä¸Šçš„chrootå·¥å…·;ç”¨æˆ·æ“ä½œå®¹å™¨å°±åƒæ“ä½œä¸€ä¸ªè½»é‡çº§è™šæ‹Ÿæœºé‚£æ ·ç®€å•,ä¹Ÿå¯ä»¥å°†å®¹å™¨æ¯”ä½œä¸ºä¸€ç§æ²™ç›’(Sandbox);</p>
<p><br></p>
<p><em>Docker ä¼˜åŠ¿ï¼š</em></p>
<ul>
<li>1.æ›´é«˜æ•ˆçš„åˆ©ç”¨ç³»ç»Ÿèµ„æºï¼šDockerå®¹å™¨ä¸éœ€è¦è¿›è¡Œç¡¬ä»¶è™šæ‹Ÿä»¥åŠè¿è¡Œå®Œæ•´æ“ä½œç³»ç»Ÿç­‰é¢å¤–å¼€é”€(èµ„æºè¿œè¿œå°äºè™šæ‹Ÿæœº);</li>
<li>2.æ›´å¿«é€Ÿçš„å¯åŠ¨æ—¶é—´ï¼šç›´æ¥è¿è¡Œäºå®¿ä¸»å†…æ ¸æ— éœ€å¯åŠ¨å®Œæ•´çš„æ“ä½œç³»ç»Ÿ,å¯ä»¥åšåˆ°ç§’çº§ã€ç”šè‡³æ¯«ç§’çº§çš„å¯åŠ¨æ—¶é—´;</li>
<li>3.æ›´å¿«é€Ÿçš„äº¤ä»˜å’Œéƒ¨ç½²:å®ç°æŒç»­é›†æˆ(Continuous Integration)ã€æŒç»­äº¤ä»˜ã€è‡ªåŠ¨éƒ¨ç½²(Continuous Delivery/Deployment),å¤§é‡èŠ‚çº¦å¼€å‘,æµ‹è¯•,éƒ¨ç½²çš„æ—¶é—´;</li>
<li>4.æ›´é«˜æ•ˆçš„èµ„æºåˆ©ç”¨:ä¸éœ€è¦é¢å¤–çš„è™šæ‹ŸåŒ–ç®¡ç†ç¨‹åºVMMä»¥åŠHypervisorçš„æ”¯æŒ;</li>
<li>5.æ›´å®¹æ˜“å­¦ä¹ ã€è¿ç§»å’Œæ‰©å±•:ä¸€è‡´çš„è¿è¡Œç¯å¢ƒDocker å¯ä»¥åœ¨å¾ˆå¤šå¹³å°ä¸Šè¿è¡Œæ— è®ºæ˜¯ç‰©ç†æœºã€è™šæ‹Ÿæœºã€å…¬æœ‰äº‘ã€ç§æœ‰äº‘</li>
<li>6.æ›´ç®€å•çš„æ›´æ–°ç®¡ç†:ä½¿ç”¨Dockerfileåªéœ€è¦å°å°çš„é…ç½®ä¿®æ”¹,å¯ä»¥å¿«é€Ÿåˆ›å»ºå’Œåˆ é™¤å®¹å™¨,Docker hub æä¾›é•œåƒå¹³å°æ–¹ä¾¿å…±äº«é•œåƒ;</li>
<li>7.åŸºäº Docker çš„ CI æŒç»­é›†æˆå’Œ CD æŒç»­æ”¯ä»˜</li>
<li>8.åŸºäº Kubernetes, Docker Swarm çš„é›†ç¾¤å¼¹æ€§æ‰©å®¹å’Œç¼©å®¹</li>
</ul>
<p><em>ä»€ä¹ˆæ˜¯è™šæ‹ŸåŒ–æŠ€æœ¯?</em><br>è™šæ‹ŸåŒ–æŠ€æœ¯æ˜¯ä¸€ä¸ªé€šç”¨çš„æ¦‚å¿µ,åœ¨ä¸åŒçš„é¢†åŸŸæœ‰ä¸åŒçš„ç†è§£;åœ¨è®¡ç®—æœºé¢†åŸŸä¸€èˆ¬æŒ‡çš„æ˜¯è®¡ç®—æœºè™šæ‹ŸåŒ–(Computer Virtualization)æˆ–è€…è¯´æ˜¯æœåŠ¡å™¨è™šæ‹ŸåŒ–;è™šæ‹ŸåŒ–çš„æ ¸å¿ƒæ˜¯å¯¹èµ„æºè¿›è¡ŒæŠ½è±¡å’Œç®¡ç†,ç›®æ ‡å¾€å¾€æ˜¯ä¸ºäº†åœ¨åŒä¸€ä¸ªä¸»æœºä¸Šè¿è¡Œå¤šä¸ªç³»ç»Ÿæˆ–è€…åº”ç”¨,ä»è€Œæé«˜ç³»ç»Ÿèµ„æºçš„åˆ©ç”¨ç‡,åŒæ—¶å¸¦æ¥é™ä½æˆæœ¬,æ–¹ä¾¿ç®¡ç†å’Œå®¹é”™å’Œå®¹ç¾ç­‰å¥½å¤„;</p>
<ul>
<li>ç¡¬ä»¶è™šæ‹ŸåŒ–:çœŸæ­£æ„ä¹‰ä¸Šçš„åŸºäºå®ƒçš„æŠ€æœ¯ä¸å¤šè§,å°‘æ•°ç½‘å¡ä¸­çš„å•æ ¹å¤šIOè™šæ‹ŸåŒ–ç­‰æŠ€æœ¯;</li>
<li>è½¯ä»¶è™šæ‹ŸåŒ–(Virtualization)<ul>
<li>1.åº”ç”¨è™šæ‹ŸåŒ–</li>
<li>2.å¹³å°è™šæ‹ŸåŒ–:ç»†åˆ†<ul>
<li>2.1 å®Œå…¨è™šæ‹ŸåŒ–</li>
<li>2.2 ç¡¬ä»¶è¾…åŠ©è™šæ‹ŸåŒ–:åˆ©ç”¨ç¡¬ä»¶CPUè¾…åŠ©æ”¯æŒè™šæ‹ŸåŒ–æŠ€æœ¯Intel-VTå’ŒAND-Vå¤„ç†é“­æ„ŸæŒ‡ä»¤æ¥å®ç°å®Œå…¨è™šæ‹ŸåŒ–çš„åŠŸèƒ½;</li>
<li>2.3 éƒ¨åˆ†è™šæ‹ŸåŒ–:åªå¯¹éƒ¨åˆ†ç¡¬ä»¶èµ„æºè¿›è¡Œè™šæ‹ŸåŒ–,å®¢æˆ·ç«¯ç³»ç»Ÿéœ€è¦è¿›è¡Œä¿®æ”¹;</li>
<li>2.4 å‡†è™šæ‹ŸåŒ–(Paravirtualization):å¦‚xen</li>
<li>2.5 æ“ä½œç³»ç»Ÿçº§è™šæ‹ŸåŒ–:å†…æ ¸é€šè¿‡åˆ›å»ºå¤šä¸ªè™šæ‹ŸåŒ–çš„æ“ä½œç³»ç»Ÿå®ä¾‹å†…æ ¸å’Œåº“æ¥éš”ç¦»ä¸åŒçš„è¿›ç¨‹,dokcerä»¥åŠå…¶ä»–å®¹å™¨éƒ½åœ¨è¿™ä¸ªèŒƒç•´ä¹‹å†…;</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><em>ä¼ ç»Ÿè™šæ‹Ÿæœºçš„æ¯”è¾ƒï¼š</em></p>
<figure class="image-box">
                <a rel=1.Dockerå­¦ä¹ ä¹‹åŸºç¡€çŸ¥è¯† href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190505125747.png" target="_blank" title="WeiyiGeek.ä¼ ç»Ÿå¯¹æ¯”" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190505125747.png" alt="WeiyiGeek.ä¼ ç»Ÿå¯¹æ¯”" title="" class=""></a>
                <p>WeiyiGeek.ä¼ ç»Ÿå¯¹æ¯”</p>
            </figure>
<p><br></p>
<p><em>ä¼ ç»Ÿè™šæ‹ŸåŒ–æ–¹å¼ä¸Dockerè™šæ‹ŸåŒ–æ–¹å¼</em></p>
<ul>
<li>ä¼ ç»Ÿè™šæ‹ŸåŒ–æ–¹å¼æ˜¯åœ¨ç¡¬ä»¶å±‚é¢å®ç°è™šæ‹ŸåŒ–,éœ€è¦æœ‰é¢å¤–çš„è™šæ‹Ÿæœºç®¡ç†åº”ç”¨å’Œè™šæ‹Ÿæœºæ“ä½œç³»ç»Ÿå±‚ï¼Œç„¶ååœ¨è¯¥ç³»ç»Ÿä¸Šè¿è¡Œä¸šåŠ¡æ‰€éœ€ç¨‹åº;</li>
<li>Dockerè™šæ‹ŸåŒ–æ–¹å¼æ˜¯åœ¨å®¿ä¸»ç³»ç»Ÿå±‚é¢ä¸Šå®ç°è™šæ‹ŸåŒ–,ç›´æ¥å¤ç”¨æœ¬åœ°ä¸»æœºçš„æ“ä½œç³»ç»Ÿä¸å†…æ ¸ï¼Œå®¹å™¨å†…æ²¡æœ‰è‡ªå·±çš„å†…æ ¸ï¼Œæ‰€ä»¥å®¹å™¨å†…çš„åº”ç”¨è¿›ç¨‹å®é™…è¿è¡Œäºå®¿ä¸»æœºå†…æ ¸,å› æ­¤æ›´åŠ è½»é‡çº§;</li>
</ul>
<figure class="image-box">
                <a rel=1.Dockerå­¦ä¹ ä¹‹åŸºç¡€çŸ¥è¯† href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190505131546.png" target="_blank" title="WeiyiGeek.Docker" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190505131546.png" alt="WeiyiGeek.Docker" title="" class=""></a>
                <p>WeiyiGeek.Docker</p>
            </figure>
<ul>
<li>è™šæ‹Ÿæœºæ˜¯ä¸ºæä¾›ç³»ç»Ÿç¯å¢ƒè€Œç”Ÿï¼Œå®¹å™¨æ˜¯ä¸ºäº†æä¾›åº”ç”¨ç¯å¢ƒè€Œç”Ÿçš„ï¼›<figure class="image-box">
                <a rel=1.Dockerå­¦ä¹ ä¹‹åŸºç¡€çŸ¥è¯† href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190512200307.png" target="_blank" title="WeiyiGeek.VMå¯¹æ¯”" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190512200307.png" alt="WeiyiGeek.VMå¯¹æ¯”" title="" class=""></a>
                <p>WeiyiGeek.VMå¯¹æ¯”</p>
            </figure>
</li>
</ul>
<p><br></p>
<p><em>ç‰©ç†æœº-è™šæ‹Ÿæœº-Dockerå®¹å™¨å®¹æ˜“ç†è§£çš„å¯¹æ¯”</em></p>
<ul>
<li>ä¸€æ ‹æ¥¼ä¸€æˆ·äººå®¶,ç‹¬ç«‹åœ°åŸºç‹¬ç«‹èŠ±å›­(åˆ«å¢…)</li>
<li>ä¸€æ ‹æ¥¼åŒ…å«å¤šå¥—æˆ¿,ä¸€å¥—æˆ¿ä¸€æˆ·äººå®¶,å…±äº«åœ°åŸºã€å…±äº«èŠ±å›­ã€ç‹¬ç«‹å«ç”Ÿé—´ã€å¨æˆ¿å’Œå®½åº¦(äºŒå®¤ä¸€å…)</li>
<li>ä¸€å¥—æˆ¿éš”æˆå¤šä¸ªå°éš”é—´,æ¯ä¸ªå°éš”é—´ä½ä¸€ä½ç§Ÿæˆ·(èƒ¶å›Šå¼å…¬å¯“)</li>
</ul>
<p><br></p>
<p><em>Docker åº”ç”¨åœºæ™¯</em></p>
<ul>
<li>ä½¿ç”¨dockerå®¹å™¨å¼€å‘ã€æµ‹è¯•ã€éƒ¨ç½²æœåŠ¡:è‡ªåŠ¨åŒ–æµ‹è¯•å’ŒæŒç»­é›†æˆã€å‘å¸ƒ;</li>
<li>åœ¨æœåŠ¡å‹ç¯å¢ƒä¸­éƒ¨ç½²ä¸æ‰©å±•Webappä»¥åŠè°ƒæ•´æ•°æ®åº“æˆ–å…¶ä»–åº”ç”¨;</li>
<li>ç»Ÿä¸€ã€ä¼˜åŒ–å’ŒåŠ é€Ÿæœ¬åœ°å¼€å‘å’Œæ„å»ºæµç¨‹;åˆ›å»ºéš”ç¦»çš„è¿è¡Œç¯å¢ƒ,æµ‹è¯•ç¯å¢ƒ</li>
<li>æ„å»ºå¤šç”¨æˆ·çš„å¹³å°å³æœåŠ¡(PaaS)åŸºç¡€è®¾æ–½</li>
<li>æä¾›è½¯ä»¶å³æœåŠ¡(SaaS)çš„åº”ç”¨ç¨‹åº</li>
<li>é«˜æ€§èƒ½ã€è¶…å¤§è§„æ¨¡çš„å®¿ä¸»æœºéƒ¨ç½²,webåº”ç”¨çš„è‡ªåŠ¨åŒ–æ‰“åŒ…å’Œå‘å¸ƒ</li>
</ul>
<p><br></p>
<h5 id="2-Docker-æ¶æ„"><a href="#2-Docker-æ¶æ„" class="headerlink" title="2.Docker æ¶æ„"></a>2.Docker æ¶æ„</h5><p>æè¿°:Dockerå¯¹ä½¿ç”¨è€…æ¥è®²æ˜¯ä¸€ä¸ªC/Sæ¨¡å¼(ä½¿ç”¨å®¢æˆ·æœº-æœåŠ¡å™¨)çš„æ¶æ„è€ŒDockerçš„åç«¯æ˜¯ä¸€ä¸ªéå¸¸æ¾è€¦åˆçš„æ¶æ„,æ¨¡å—å„å¸å…¶èŒå¹¶æœ‰æœºç»„åˆæ”¯æ’‘Dockerçš„è¿è¡Œã€‚</p>
<p>å…·ä½“æµç¨‹:</p>
<ul>
<li>(1) ç”¨æˆ·ä½¿ç”¨Dockerå®¢æˆ·æœºä¸Dockerå®ˆæŠ¤è¿›ç¨‹é€šä¿¡ï¼Œåè€…è´Ÿè´£æ„å»ºã€è¿è¡Œå’Œåˆ†å‘Dockerå®¹å™¨ç­‰ç¹é‡çš„å·¥ä½œã€‚</li>
<li>(2) Docker Daemonä½œä¸ºDockeræ¶æ„ä¸­çš„ä¸»ä½“éƒ¨åˆ†,é¦–å…ˆæä¾›Serverçš„åŠŸèƒ½ä½¿å…¶å¯ä»¥æ¥å—Docker Clientçš„è¯·æ±‚ï¼›</li>
<li>(3) Dockerå®¢æˆ·ç«¯å’Œå®ˆæŠ¤è¿›ç¨‹å¯ä»¥è¿è¡Œåœ¨åŒä¸€ä¸ªç³»ç»Ÿä¸Šï¼Œæˆ–è€…æ‚¨å¯ä»¥å°†ä¸€ä¸ªDockerå®¢æˆ·ç«¯è¿æ¥åˆ°ä¸€ä¸ªè¿œç¨‹Dockerå®ˆæŠ¤è¿›ç¨‹ã€‚</li>
<li>(4) Dockerå®¢æˆ·æœºå’Œå®ˆæŠ¤è¿›ç¨‹ä¹‹é—´é€šè¿‡<code>UNIXå¥—æ¥å­—</code>æˆ–ç½‘ç»œæ¥å£<code>ä½¿ç”¨REST APIè¿›è¡Œé€šä¿¡</code>ã€‚</li>
</ul>
<figure class="image-box">
                <a rel=1.Dockerå­¦ä¹ ä¹‹åŸºç¡€çŸ¥è¯† href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200630214626.png" target="_blank" title="WeiyiGeek.æ¶æ„" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200630214626.png" alt="WeiyiGeek.æ¶æ„" title="" class=""></a>
                <p>WeiyiGeek.æ¶æ„</p>
            </figure>
<p><br></p>
<p>Docker å†…éƒ¨å…·ä½“å®ç°:</p>
<ul>
<li>Engineæ‰§è¡ŒDockerå†…éƒ¨çš„ä¸€ç³»åˆ—å·¥ä½œ,æ¯ä¸€é¡¹å·¥ä½œéƒ½æ˜¯ä»¥ä¸€ä¸ªJobçš„å½¢å¼çš„å­˜åœ¨ã€‚</li>
<li>Jobçš„è¿è¡Œè¿‡ç¨‹ä¸­,å½“éœ€è¦å®¹å™¨é•œåƒæ—¶,åˆ™ä»Docker Registryä¸­ä¸‹è½½é•œåƒ,å¹¶é€šè¿‡é•œåƒç®¡ç†é©±åŠ¨graphdriverå°†ä¸‹è½½é•œåƒä»¥Graphçš„å½¢å¼å­˜å‚¨ï¼›</li>
<li>å½“éœ€è¦ä¸ºDockeråˆ›å»ºç½‘ç»œç¯å¢ƒæ—¶,é€šè¿‡ç½‘ç»œç®¡ç†é©±åŠ¨networkdriveråˆ›å»ºå¹¶é…ç½®Dockerå®¹å™¨ç½‘ç»œç¯å¢ƒï¼›</li>
<li>å½“éœ€è¦é™åˆ¶Dockerå®¹å™¨è¿è¡Œèµ„æºæˆ–æ‰§è¡Œç”¨æˆ·æŒ‡ä»¤ç­‰æ“ä½œæ—¶,åˆ™é€šè¿‡execdriveræ¥å®Œæˆã€‚</li>
<li>libcontaineræ˜¯ä¸€é¡¹ç‹¬ç«‹çš„å®¹å™¨ç®¡ç†åŒ…,networkdriverä»¥åŠexecdriveréƒ½æ˜¯é€šè¿‡libcontaineræ¥å®ç°å…·ä½“å¯¹å®¹å™¨è¿›è¡Œçš„æ“ä½œã€‚</li>
</ul>
<figure class="image-box">
                <a rel=1.Dockerå­¦ä¹ ä¹‹åŸºç¡€çŸ¥è¯† href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190512200931.png" target="_blank" title="WeiyiGeek.ç»„ä»¶æ¶æ„å›¾" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190512200931.png" alt="WeiyiGeek.ç»„ä»¶æ¶æ„å›¾" title="" class=""></a>
                <p>WeiyiGeek.ç»„ä»¶æ¶æ„å›¾</p>
            </figure>
<p><br></p>
<h5 id="3-Docker-èµ„æºéš”ç¦»"><a href="#3-Docker-èµ„æºéš”ç¦»" class="headerlink" title="3.Docker èµ„æºéš”ç¦»"></a>3.Docker èµ„æºéš”ç¦»</h5><p>Docker æœ¬è´¨æ˜¯å®¿ä¸»æœºä¸Šçš„ä¸€ä¸ªè¿›ç¨‹,dockeré€šè¿‡namespaceå®ç°èµ„æºéš”ç¦»ä»¥åŠè½»é‡çº§è™šæ‹ŸåŒ–å®¹å™¨æœåŠ¡,é€šè¿‡cgroupå®ç°äº†èµ„æºé™åˆ¶,é€šè¿‡å†™æ—¶å¤åˆ¶æŠ€æœ¯(Copy-on-write)å®ç°äº†é«˜æ•ˆçš„æ–‡ä»¶æ“ä½œ;</p>
<p>Dockeré€šè¿‡ç”±å†…æ ¸namespaceæä¾›å®ç°çš„éš”ç¦»ï¼Œnamespaceçš„APIåŒ…æ‹¬<code>clone(),sents()ä»¥åŠunshare()</code>è¿˜æœ‰åœ¨/procä¸‹çš„éƒ¨åˆ†æ–‡ä»¶</p>
<ul>
<li>æ–‡ä»¶ç³»ç»Ÿéš”ç¦»ï¼šæ¯ä¸ªå®¹å™¨éƒ½æœ‰è‡ªå·±çš„ root æ–‡ä»¶ç³»ç»Ÿ</li>
<li>è¿›ç¨‹éš”ç¦»ï¼šæ¯ä¸ªå®¹å™¨éƒ½è¿è¡Œåœ¨è‡ªå·±çš„è¿›ç¨‹ç¯å¢ƒä¸­</li>
<li>ç½‘ç»œéš”ç¦»ï¼šå®¹å™¨é—´çš„è™šæ‹Ÿç½‘ç»œæ¥å£å’Œ IP åœ°å€éƒ½æ˜¯åˆ†å¼€çš„</li>
<li>èµ„æºéš”ç¦»å’Œåˆ†ç»„ï¼šä½¿ç”¨ cgroups å°† CPU å’Œå†…å­˜ä¹‹ç±»çš„èµ„æºç‹¬ç«‹åˆ†é…ç»™æ¯ä¸ª Docker å®¹å™¨</li>
</ul>
<p>å³namespaceçš„å…­é¡¹éš”ç¦»(<code>å†…æ ¸å®ç° namespace èµ„æºéš”ç¦»å†…å®¹ - ç³»ç»Ÿè°ƒç”¨å‚æ•°</code>)å¦‚ä¸‹æ ‡æ‰€ç¤º:</p>
<table>
<thead>
<tr>
<th style="text-align:left">åç§°</th>
<th style="text-align:left">å®å®šä¹‰</th>
<th style="text-align:left">éš”ç¦»çš„å†…å®¹</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">IPC</td>
<td style="text-align:left">CLONE_NEWIPC</td>
<td style="text-align:left">System V IPC, POSIX message queues (since Linux 2.6.19) ä¿¡å·é‡æ¶ˆæ¯é˜Ÿåˆ—å’Œå…±äº«å†…å­˜</td>
</tr>
<tr>
<td style="text-align:left">NETWORK</td>
<td style="text-align:left">CLONE_NEWNET</td>
<td style="text-align:left">network device interfaces, IPv4 and IPv6 protocol stacks, IP routing tables, firewall rules, the /proc/net and /sys/class/net directory trees, sockets, etc (since Linux 2.6.24)  ç½‘ç»œè®¾å¤‡,ç½‘ç»œæ ˆ,ç«¯å£ç­‰</td>
</tr>
<tr>
<td style="text-align:left">MOUNT</td>
<td style="text-align:left">CLONE_NEWNS</td>
<td style="text-align:left">Mount points (since Linux 2.4.19) æŒ‚è½½ç‚¹(æ–‡ä»¶ç³»ç»Ÿ)</td>
</tr>
<tr>
<td style="text-align:left">PID</td>
<td style="text-align:left">CLONE_NEWPID</td>
<td style="text-align:left">Process IDs (since Linux 2.6.24)  è¿›ç¨‹ç¼–å·</td>
</tr>
<tr>
<td style="text-align:left">User</td>
<td style="text-align:left">CLONE_NEWUSER</td>
<td style="text-align:left">User and group IDs (started in Linux 2.6.23 and completed in Linux 3.8) ç”¨æˆ·å’Œç”¨æˆ·ç»„(3.8åå†…æ ¸æ”¯æŒ)</td>
</tr>
<tr>
<td style="text-align:left">UTS</td>
<td style="text-align:left">CLONE_NEWUTS</td>
<td style="text-align:left">Hostname and NIS domain name (since Linux 2.6.19)    ä¸»æœºåä¸åŸŸå(è‡ªLinux 2.6.19)</td>
</tr>
<tr>
<td style="text-align:left">Cgroup</td>
<td style="text-align:left">CLONE_NEWCGROUP</td>
<td style="text-align:left">Cgroup root directory (since Linux 4.6)     Cgroupæ ¹ç›®å½•(è‡ªLinux 4.6)</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><em>cgroupçš„ç‰¹ç‚¹ä¸åŠŸèƒ½ï¼š</em></p>
<ul>
<li>cgroupçš„APIä»¥ä¸€ä¸ªä¼ªæ–‡ä»¶ç³»ç»Ÿæ¥å®ç°çš„,ç”¨æˆ·æ€çš„ç¨‹åºé€šè¿‡æ–‡ä»¶æ“ä½œå®ç°cgroupçš„ç»„ç»‡ç®¡ç†;</li>
<li>cgroupçš„ç»„ç»‡ç®¡ç†æ“ä½œå•å…ƒå¯ä»¥ç»†ç²’åº¦çº§åˆ«,å¦å¤–ç”¨æˆ·å¯ä»¥åˆ›å»ºå’Œé”€æ¯cgroup,ä»è€Œå®ç°èµ„æºå†åˆ†é…å’Œåˆ©ç”¨;</li>
<li>æ‰€æœ‰èµ„æºç®¡ç†çš„åŠŸèƒ½éƒ½ä»¥å­å¸å¼•çš„æ–¹å¼å®ç°æ¥å£ç»Ÿä¸€,å­ä»»åŠ¡åˆ›å»ºä¹‹åˆä¸å…¶çˆ¶ä»»åŠ¡å¤„äºåŒä¸€cgroupçš„æ§åˆ¶ç»„;</li>
<li>cgroupå››å¤§åŠŸèƒ½ï¼šèµ„æºé™åˆ¶(èµ„æºæ€»é¢è¿›è¡Œé™åˆ¶),ä¼˜å…ˆçº§åˆ†é…(åˆ†é…CPUæ—¶é—´ç‰‡æ•°é‡ä»¥åŠç£ç›˜IOå¸¦å®½å¤§å°),èµ„æºç»Ÿè®¡(CPUæ—¶é•¿/å†…å­˜ç”¨é‡),ä»»åŠ¡æ§åˆ¶(æ‰§è¡ŒæŒ‚èµ·/æ¢å¤ç­‰æ“ä½œ);</li>
</ul>
<p><br></p>
<h5 id="4-Docker-å®¹å™¨æ–‡ä»¶ç³»ç»Ÿ"><a href="#4-Docker-å®¹å™¨æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="4.Docker å®¹å™¨æ–‡ä»¶ç³»ç»Ÿ"></a>4.Docker å®¹å™¨æ–‡ä»¶ç³»ç»Ÿ</h5><p>æè¿°:ä»ä¸‹é¢çš„å›¾ç‰‡å¯ä»¥çœ‹è§å‡ºä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ul>
<li>Docker é•œåƒä»£è¡¨äº†å®¹å™¨çš„æ–‡ä»¶ç³»ç»Ÿé‡Œçš„å†…å®¹ï¼Œæ˜¯å®¹å™¨çš„åŸºç¡€ï¼Œé•œåƒä¸€èˆ¬æ˜¯é€šè¿‡ Dockerfile ç”Ÿæˆçš„ï¼›</li>
<li>Docker çš„é•œåƒæ˜¯åˆ†å±‚çš„ï¼Œæ‰€æœ‰çš„é•œåƒï¼ˆé™¤äº†åŸºç¡€é•œåƒï¼‰éƒ½æ˜¯åœ¨ä¹‹å‰é•œåƒçš„åŸºç¡€ä¸ŠåŠ ä¸Šè‡ªå·±è¿™å±‚çš„å†…å®¹ç”Ÿæˆçš„;</li>
<li>Docker ä¸­æ¯ä¸€å±‚é•œåƒçš„å…ƒæ•°æ®éƒ½æ˜¯å­˜åœ¨ json æ–‡ä»¶ä¸­çš„ï¼Œé™¤äº†é™æ€çš„æ–‡ä»¶ç³»ç»Ÿä¹‹å¤–ï¼Œè¿˜ä¼šåŒ…å«åŠ¨æ€çš„æ•°æ®;</li>
<li>Docker é•œåƒç”Ÿäº§å®¹å™¨åä¼šåœ¨æ­¤åŸºç¡€ä¹‹ä¸ŠåŠ å…¥æŒ‚è½½ç‚¹åˆ°å®‰è£…Dockerå®¿ä¸»æœºæ–‡ä»¶ç³»ç»Ÿä¹‹ä¸­ï¼Œå¹¶æä¾›ä¸€ä¸ªè¯»å†™å±‚(Read-Write Layer)ï¼Œæ‰€ä»¥å®¹å™¨è¿›ç¨‹çš„æ‰€æœ‰æ“ä½œéƒ½åœ¨è¯»å†™å±‚è¿›è¡Œ;</li>
</ul>
<figure class="image-box">
                <a rel=1.Dockerå­¦ä¹ ä¹‹åŸºç¡€çŸ¥è¯† href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200617143711.png" target="_blank" title="WeiyiGeek.å®¹å™¨æ–‡ä»¶ç³»ç»Ÿ" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200617143711.png" alt="WeiyiGeek.å®¹å™¨æ–‡ä»¶ç³»ç»Ÿ" title="" class=""></a>
                <p>WeiyiGeek.å®¹å™¨æ–‡ä»¶ç³»ç»Ÿ</p>
            </figure>
<p><em>æ€»ç»“:</em> </p>
<ul>
<li>Dockeré€šè¿‡ä¸ºLinuxå®¹å™¨æŠ€æœ¯æä¾›æ›´ç®€æ´çš„ä½¿ç”¨å’Œç®¡ç†æ–¹æ¡ˆã€æ›´é«˜æ•ˆçš„ç‰ˆæœ¬æ§åˆ¶,Docker è®©å®¹å™¨æŠ€æœ¯ä¸€ä¸‹å­å˜å¾—çµæ´»æ˜“ç”¨,éšç€äº‘è®¡ç®—(Cloud Computing)çš„å‘å±•,å®ƒåœ¨Virtualizationä¸­çš„åœ°ä½è¶Šæ¥è¶Šé‡è¦.</li>
<li>å››å¤§æ ¸å¿ƒæ¦‚å¿µï¼š<code>é•œåƒ [image] / å®¹å™¨ [Container] / ä»“åº“ [Repository] / Dockerfile</code></li>
</ul>
<p>å‚è€ƒä¹¦ç±:DockeræŠ€æœ¯å…¥é—¨ä¸å®æˆ˜</p>
<hr>

<h4 id="0x01-Docker-å®‰è£…å®è·µ"><a href="#0x01-Docker-å®‰è£…å®è·µ" class="headerlink" title="0x01 Docker å®‰è£…å®è·µ"></a>0x01 Docker å®‰è£…å®è·µ</h4><h5 id="1-Linux-ç³»ç»Ÿå®‰è£…"><a href="#1-Linux-ç³»ç»Ÿå®‰è£…" class="headerlink" title="1.Linux ç³»ç»Ÿå®‰è£…"></a>1.Linux ç³»ç»Ÿå®‰è£…</h5><p>ç³»ç»Ÿç¯å¢ƒï¼šDockeræœ€ä½æ”¯æŒCentOS7ä¸”åœ¨64ä½å¹³å°ä¸Šå¹¶ä¸”å†…æ ¸ç‰ˆæœ¬åœ¨3.10ä»¥ä¸Šçš„Linuxæ“ä½œç³»ç»Ÿã€‚<br>å®˜æ–¹å®‰è£…æ–‡æ¡£ï¼š<a href="https://docs.docker.com/install/linux/docker-ce/centos/#" target="_blank" rel="noopener">https://docs.docker.com/install/linux/docker-ce/centos/#</a><br>é•œåƒå¼€æºå®‰è£…ç«™ç‚¹:<a href="https://mirrors.tuna.tsinghua.edu.cn/help/docker-ce/" target="_blank" rel="noopener">https://mirrors.tuna.tsinghua.edu.cn/help/docker-ce/</a></p>
<ul>
<li>Docker Engineæ”¹ä¸ºDocker CEï¼ˆç¤¾åŒºç‰ˆï¼‰: å®ƒåŒ…å«äº†CLIå®¢æˆ·ç«¯ã€åå°è¿›ç¨‹/æœåŠ¡ä»¥åŠAPIã€‚ç”¨æˆ·åƒä»¥å‰ä»¥åŒæ ·çš„æ–¹å¼è·å–ã€‚</li>
<li>Docker Data Centeræ”¹ä¸ºDocker EEï¼ˆä¼ä¸šç‰ˆï¼‰: åœ¨Dockerä¸‰ä¸ªå®šä»·å±‚å¢åŠ äº†é¢å¤–çš„æ”¯ä»˜äº§å“å’Œæ”¯æŒã€‚</li>
</ul>
<p><br></p>
<p><strong>å®˜æ–¹ä¸€é”®å®‰è£…è„šæœ¬</strong><br>è¡¥å……æ—¶é—´:<code>[2020å¹´4æœˆ22æ—¥ 11:00:59]</code><br>ä¸€é”®å®‰è£…Docker-ceä»¥åŠDocker-compose:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##[docker]</span></span><br><span class="line"><span class="comment">#å›½å¤–</span></span><br><span class="line">curl -fsSL https://get.docker.com | bash -s docker</span><br><span class="line"><span class="comment">#å›½å†…</span></span><br><span class="line">curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun</span><br><span class="line">curl -fsSL https://get.docker.com -o get-docker.sh &amp;&amp; chmod +x get-docker.sh &amp;&amp; ./get-docker.sh</span><br><span class="line"><span class="comment">#æµ‹è¯•å®‰è£…ç»“æœ</span></span><br><span class="line">docker-info</span><br><span class="line"></span><br><span class="line"><span class="comment">##[docker-compose]</span></span><br><span class="line">sudo curl -L <span class="string">"https://github.com/docker/compose/releases/download/v2.4.1/docker-compose-<span class="variable">$(uname -s)</span>-<span class="variable">$(uname -m)</span>"</span> -o /usr/<span class="built_in">local</span>/bin/docker-compose &amp;&amp; chmod +x /usr/<span class="built_in">local</span>/bin/docker-compose</span><br><span class="line"><span class="comment">#æµ‹è¯•å®‰è£…ç»“æœ</span></span><br><span class="line">docker-compose version</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<p><strong>CentOS ä¸­åˆ©ç”¨ yum å®‰è£… Docker / Docker-compose</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># (1) å¸è½½æœºå™¨ä¸Šdockeræˆ–è€…docker-engineæ—§ç‰ˆæœ¬ä»¥åŠç›¸å…³çš„ä¾èµ–é¡¹ </span></span><br><span class="line">yum remove -y  docker \</span><br><span class="line">  docker-client \</span><br><span class="line">  docker-client-latest \</span><br><span class="line">  docker-common \</span><br><span class="line">  docker-latest \</span><br><span class="line">  docker-latest-logrotate \</span><br><span class="line">  docker-logrotate \</span><br><span class="line">  docker-engine</span><br><span class="line"></span><br><span class="line"><span class="comment"># (2) åœ¨æ–°ä¸»æœºä¸Šé¦–æ¬¡å®‰è£… Docker Engine ä¹‹å‰ï¼Œæ‚¨éœ€è¦ è®¾ç½® Docker ç¨³å®šçš„å­˜å‚¨åº“ã€‚</span></span><br><span class="line">sudo yum install -y yum-utils</span><br><span class="line">sudo yum-config-manager \</span><br><span class="line">    --add-repo \</span><br><span class="line">    https://download.docker.com/linux/centos/docker-ce.repo</span><br><span class="line"><span class="comment"># æˆ–è€…æ‰‹åŠ¨è®¾ç½®å®˜æ–¹æº</span></span><br><span class="line"><span class="comment"># sudo tee /etc/yum.repos.d/docker.repo &lt;&lt;-'EOF'</span></span><br><span class="line"><span class="comment"># [dockerrepo]</span></span><br><span class="line"><span class="comment"># name=Docker Repository</span></span><br><span class="line"><span class="comment"># baseurl=https://yum.dockerproject.org/repo/main/centos/$releasever/</span></span><br><span class="line"><span class="comment"># enabled=1</span></span><br><span class="line"><span class="comment"># gpgcheck=1</span></span><br><span class="line"><span class="comment"># gpgkey=https://yum.dockerproject.org/gpg</span></span><br><span class="line"><span class="comment"># EOF</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„ Docker Engine  å’Œ containerd</span></span><br><span class="line"><span class="comment"># Docker Community Edition (CE) å¯¹äºå¸Œæœ›å¼€å§‹ä½¿ç”¨Dockerå¹¶å°è¯•åŸºäºå®¹å™¨çš„åº”ç”¨ç¨‹åºçš„å¼€å‘äººå‘˜å’Œå°å‹å›¢é˜Ÿæ¥è¯´éå¸¸ç†æƒ³ã€‚</span></span><br><span class="line"><span class="comment"># å¦‚æœæç¤ºæ¥å— GPG å¯†é’¥ï¼Œè¯·éªŒè¯æŒ‡çº¹æ˜¯å¦åŒ¹é… 060A 61C5 1B55 8A7F 742B 77AA C52F EB6B 621E 9F35ï¼Œå¦‚æœæ˜¯ï¼Œæ¥å—å®ƒã€‚ </span></span><br><span class="line">sudo yum install docker-ce docker-ce-cli containerd.io docker-compose  </span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£…ç‰¹å®šç‰ˆæœ¬çš„ Docker Engineï¼Œè¯·åœ¨åˆ—å‡ºå¯ç”¨ç‰ˆæœ¬ä¸­é€‰æ‹©å¹¶å®‰è£…,</span></span><br><span class="line"><span class="comment"># å³ åŒ…åï¼ˆ docker-ce) åŠ ä¸Šç‰ˆæœ¬å­—ç¬¦ä¸²ï¼ˆç¬¬äºŒåˆ—ï¼‰ ä»ç¬¬ä¸€ä¸ªå†’å· ( :)ï¼Œç›´åˆ°ç¬¬ä¸€ä¸ªè¿å­—ç¬¦ï¼Œç”± ä¸€ä¸ªè¿å­—ç¬¦ ( -ï¼‰ã€‚ ä¾‹å¦‚ docker-ce-18.09.1. </span></span><br><span class="line">yum list docker-ce --showduplicates | sort -r</span><br><span class="line">  <span class="comment"># docker-ce.x86_64            3:18.09.5-3.el7                    docker-ce-stable</span></span><br><span class="line">  <span class="comment"># docker-ce.x86_64            3:18.09.5-3.el7                    @docker-ce-stable  #å½“å‰ä½¿ç”¨ç‰ˆæœ¬</span></span><br><span class="line">  <span class="comment"># docker-ce.x86_64            3:19.03.15-3.el7                    docker-ce-stable</span></span><br><span class="line">  <span class="comment"># docker-ce.x86_64            3:19.03.14-3.el7                    docker-ce-stable</span></span><br><span class="line">sudo yum install -y docker-ce-19.03.15  docker-ce-cli-19.03.15 containerd.io docker-compose</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ›´æ–°docker-ceDocker CEæœ‰ä¸‰ç§æ›´æ–°é€šé“æ˜¯ç¨³å®šé€šé“ã€æµ‹è¯•é€šé“å’Œå¤œé—´é€šé“</span></span><br><span class="line">yum -y upgrade docker-ce</span><br><span class="line"></span><br><span class="line"><span class="comment"># Docker æ˜¯ä¸€ä¸ª C/S æ¶æ„çš„æœåŠ¡,å®‰è£…å¥½ docker ä¹‹åéœ€è¦å¯åŠ¨ docker è½¯ä»¶åæ‰èƒ½ä½¿ç”¨ docker å‘½ä»¤;</span></span><br><span class="line">systemctl start/status docker  <span class="comment"># å¯åŠ¨docker-ce</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹dockerå¯åŠ¨çŠ¶æ€</span></span><br><span class="line">docker version</span><br><span class="line">Client:</span><br><span class="line"> Version:           18.09.5</span><br><span class="line"> API version:       1.39</span><br><span class="line"> Go version:        go1.10.8</span><br><span class="line"> Git commit:        e8ff056</span><br><span class="line"> Built:             Thu Apr 11 04:43:34 2019</span><br><span class="line"> OS/Arch:           linux/amd64</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç§»å‡ºdocker-ce</span></span><br><span class="line">$ sudo yum remove docker-ce</span><br><span class="line"><span class="comment">#ä¸»æœºä¸Šçš„æ˜ åƒã€å®¹å™¨ã€å·æˆ–è‡ªå®šä¹‰é…ç½®æ–‡ä»¶ä¸ä¼šè‡ªåŠ¨åˆ é™¤ã€‚åˆ é™¤æ‰€æœ‰å›¾åƒã€å®¹å™¨å’Œå·:</span></span><br><span class="line">$ sudo rm -rf /var/lib/docker</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤æ‹‰å–å¹¶è¿è¡Œhello-worldé•œåƒéªŒè¯ Docker Engine æ˜¯å¦å·²æ­£ç¡®å®‰è£… </span></span><br><span class="line">docker pull hello-world</span><br><span class="line">docker images</span><br><span class="line">docker run hello-world</span><br></pre></td></tr></table></figure><br><figure class="image-box">
                <a rel=1.Dockerå­¦ä¹ ä¹‹åŸºç¡€çŸ¥è¯† href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190506104434.png" target="_blank" title="WeiyiGeek.DockerCentosOK" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190506104434.png" alt="WeiyiGeek.DockerCentosOK" title="" class=""></a>
                <p>WeiyiGeek.DockerCentosOK</p>
            </figure></p>
<p><br></p>
<p><strong>Ubuntu ä¸­åˆ©ç”¨ apt å®‰è£… Docker / Docker-compose</strong></p>
<p>Ubuntuå®‰è£…Dockerå‚è€ƒ: <a href="https://docs.docker.com/install/linux/docker-ce/ubuntu/" target="_blank" rel="noopener">https://docs.docker.com/install/linux/docker-ce/ubuntu/</a><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment"># 1.å¸è½½æ—§ç‰ˆæœ¬ </span></span><br><span class="line">  sudo apt-get remove docker docker-engine docker.io containerd runc</span><br><span class="line">  </span><br><span class="line">  <span class="comment"># 2.æ›´æ–°aptåŒ…ç´¢å¼•å¹¶å®‰è£…åŒ…ä»¥å…è®¸aptåœ¨HTTPSä¸Šä½¿ç”¨å­˜å‚¨åº“</span></span><br><span class="line">  sudo apt-get install -y \</span><br><span class="line">    apt-transport-https \</span><br><span class="line">    ca-certificates \</span><br><span class="line">    curl \</span><br><span class="line">    gnupg-agent \</span><br><span class="line">    software-properties-common</span><br><span class="line"></span><br><span class="line">  <span class="comment"># 3.æ·»åŠ Dockerå®˜æ–¹GPGå¯†é’¥ # -fsSL</span></span><br><span class="line">  sudo curl  https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -</span><br><span class="line"></span><br><span class="line">  <span class="comment"># 4.é€šè¿‡æœç´¢æŒ‡çº¹çš„æœ€å8ä¸ªå­—ç¬¦è¿›è¡Œå¯†é’¥éªŒè¯</span></span><br><span class="line">  sudo apt-key fingerprint 0EBFCD88</span><br><span class="line"></span><br><span class="line">  <span class="comment"># 5.è®¾ç½®ç¨³å®šå­˜å‚¨åº“</span></span><br><span class="line">  sudo add-apt-repository \</span><br><span class="line">   <span class="string">"deb [arch=amd64] https://download.docker.com/linux/ubuntu \</span></span><br><span class="line"><span class="string">   <span class="variable">$(lsb_release -cs)</span> \</span></span><br><span class="line"><span class="string">   stable"</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 6.Install Docker Engine é»˜è®¤æœ€æ–°ç‰ˆæœ¬</span></span><br><span class="line">  sudo apt-get update &amp;&amp; sudo apt-get install -y docker-ce=5:20.10.7~3-0~ubuntu-focal docker-ce-cli=5:20.10.7~3-0~ubuntu-focal containerd.io docker-compose</span><br><span class="line">  <span class="comment"># sudo apt-get update &amp;&amp; sudo apt-get install -y docker-ce docker-ce-cli containerd.io docker-compose</span></span><br><span class="line">  <span class="comment"># - å¼ºåˆ¶IPv4</span></span><br><span class="line">  <span class="comment"># sudo apt-get -o Acquire::ForceIPv4=true  install -y docker-ce=5:19.03.15~3-0~ubuntu-focal docker-ce-cli=5:19.03.15~3-0~ubuntu-focal containerd.io docker-compose</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 7.å®‰è£…ç‰¹å®šç‰ˆæœ¬çš„Dockerå¼•æ“ï¼Œè¯·åœ¨repoä¸­åˆ—å‡ºå¯ç”¨çš„ç‰ˆæœ¬</span></span><br><span class="line">  apt-cache madison docker-ce</span><br><span class="line">  <span class="comment"># docker-ce | 5:20.10.6~3-0~ubuntu-focal| https://download.docker.com/linux/ubuntu focal/stable amd64 Packages</span></span><br><span class="line">  <span class="comment"># docker-ce | 5:19.03.15~3-0~ubuntu-focal | https://download.docker.com/linux/ubuntu  xenial/stable amd64 Packages</span></span><br><span class="line">  <span class="comment"># ä½¿ç”¨ç¬¬äºŒåˆ—ä¸­çš„ç‰ˆæœ¬å­—ç¬¦ä¸²å®‰è£…ç‰¹å®šçš„ç‰ˆæœ¬ï¼Œä¾‹å¦‚:5:18.09.1~3-0~ubuntu-xenialã€‚</span></span><br><span class="line">  <span class="comment"># $sudo apt-get install docker-ce=&lt;VERSION_STRING&gt; docker-ce-cli=&lt;VERSION_STRING&gt; containerd.io</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">#8.å°†å½“å‰ç”¨æˆ·åŠ å…¥dockerç”¨æˆ·ç»„ç„¶åé‡æ–°ç™»é™†å½“å‰ç”¨æˆ·ä½¿å¾—ä½æƒé™ç”¨æˆ·</span></span><br><span class="line">  sudo gpasswd -a <span class="variable">$&#123;USER&#125;</span> docker</span><br><span class="line">  <span class="comment"># sudo gpasswd -a weiyigeek docker</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">#9.åŠ é€Ÿå™¨å»ºç«‹</span></span><br><span class="line">  mkdir -vp /etc/docker/</span><br><span class="line">sudo tee /etc/docker/daemon.json &lt;&lt;-<span class="string">'EOF'</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"data-root"</span>:<span class="string">"/var/lib/docker"</span>,</span><br><span class="line">  <span class="string">"registry-mirrors"</span>: [<span class="string">"https://xlx9erfu.mirror.aliyuncs.com"</span>],</span><br><span class="line">  <span class="string">"exec-opts"</span>: [<span class="string">"native.cgroupdriver=systemd"</span>],</span><br><span class="line">  <span class="string">"storage-driver"</span>: <span class="string">"overlay2"</span>,</span><br><span class="line">  <span class="string">"log-driver"</span>: <span class="string">"json-file"</span>,</span><br><span class="line">  <span class="string">"log-level"</span>: <span class="string">"warn"</span>,</span><br><span class="line">  <span class="string">"log-opts"</span>: &#123;</span><br><span class="line">    <span class="string">"max-size"</span>: <span class="string">"100m"</span>,</span><br><span class="line">    <span class="string">"max-file"</span>: <span class="string">"10"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"live-restore"</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="string">"dns"</span>: [<span class="string">"223.6.6.6"</span>],</span><br><span class="line">  <span class="string">"insecure-registries"</span>: [<span class="string">"harbor.weiyigeek.top"</span>]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">  <span class="comment"># 9.è‡ªå¯ä¸å¯åŠ¨</span></span><br><span class="line">  sudo systemctl daemon-reload</span><br><span class="line">  sudo systemctl <span class="built_in">enable</span> docker </span><br><span class="line">  sudo systemctl restart docker</span><br></pre></td></tr></table></figure></p>
<p><br/></p>
<p>docker-composeçš„å®‰è£…è¡¥å……æ—¶é—´:<code>[2020å¹´1æœˆ22æ—¥ 10:54:55]</code>ï¼Œå¯èƒ½éšç€æ—¶é—´æ¨ç§»æœ€æ–°ç‰ˆæœ¬ä¸ä¸‹è¿°ç‰ˆæœ¬ä¸åŒï¼Œè¯·å®‰è£…æœ€æ–°çš„docker-composeç‰ˆæœ¬å³å¯ã€‚</p>
<ul>
<li>æ–¹å¼1ï¼šå®‰è£… docker-compose: [éœ€è¦å®‰è£…å¤§äºæˆ–è€…ç­‰äº1.6ç‰ˆæœ¬çš„ Docker ]<br><a href="https://docs.docker.com/compose/" target="_blank" rel="noopener">https://docs.docker.com/compose/</a>  -&gt; é€‰æ‹©InstallCompose<figure class="image-box">
                <a rel=1.Dockerå­¦ä¹ ä¹‹åŸºç¡€çŸ¥è¯† href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190506111731.png" target="_blank" title="WeiyiGeek." data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190506111731.png" alt="WeiyiGeek." title="" class=""></a>
                <p>WeiyiGeek.</p>
            </figure>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å®‰è£…docker-compose</span></span><br><span class="line"><span class="comment">#åˆ‡æ¢ä¸ºrootæƒé™ä¸‹è½½å¹¶å®‰è£…docker-compose ( current stable release (v1.25.0)  )</span></span><br><span class="line">$ curl -L <span class="string">"https://github.com/docker/compose/releases/download/1.25.5/docker-compose-<span class="variable">$(uname -s)</span>-<span class="variable">$(uname -m)</span>"</span> &gt; /usr/<span class="built_in">local</span>/bin/docker-compose  </span><br><span class="line">$ chmod +x /usr/<span class="built_in">local</span>/bin/docker-compose    <span class="comment">#æ·»åŠ æ‰§è¡Œæƒé™</span></span><br></pre></td></tr></table></figure>
<ul>
<li>æ–¹å¼2ï¼šå®‰è£…Docker-Compose<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åœ¨centos7ä¸­ä½¿ç”¨python-pipå®‰è£…docker-compose</span></span><br><span class="line"><span class="variable">$yum</span> install -y python3</span><br><span class="line"><span class="variable">$pip3</span> install pip --upgrade</span><br><span class="line">[root@vm-1575613390 ~]<span class="comment"># pip --version</span></span><br><span class="line">pip 19.3.1 from /usr/<span class="built_in">local</span>/lib/python3.6/site-packages/pip (python 3.6)</span><br><span class="line"></span><br><span class="line"><span class="variable">$pip3</span> install docker-compose</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>è¡¥å……è¯´æ˜:<code>[2020å¹´4æœˆ22æ—¥ 10:58:21]</code></p>
<ul>
<li>ç›®å‰æœ€æ–°ç‰ˆæœ¬çš„ docker é»˜è®¤ä¼˜å…ˆé‡‡ç”¨ overlay2 çš„å­˜å‚¨é©±åŠ¨ï¼Œå¯¹äºå·²æ”¯æŒè¯¥é©±åŠ¨çš„ Linux å‘è¡Œç‰ˆï¼Œä¸éœ€è¦ä»»ä½•è¿›è¡Œä»»ä½•é¢å¤–çš„é…ç½®</li>
</ul>
<p><br></p>
<h5 id="2-Windows-ç³»ç»Ÿå®‰è£…"><a href="#2-Windows-ç³»ç»Ÿå®‰è£…" class="headerlink" title="2.Windows ç³»ç»Ÿå®‰è£…"></a>2.Windows ç³»ç»Ÿå®‰è£…</h5><p>Windows ä¸‹å®‰è£… Dockerï¼š<a href="https://www.docker.com/products/docker-desktop" target="_blank" rel="noopener">https://www.docker.com/products/docker-desktop</a><br>ä½¿ç”¨CPUè™šæ‹ŸåŒ–æ£€æµ‹å·¥å…·(LeoMoon CPU-V)æ£€æµ‹ç¯å¢ƒï¼š<br><figure class="image-box">
                <a rel=1.Dockerå­¦ä¹ ä¹‹åŸºç¡€çŸ¥è¯† href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190505215320.png" target="_blank" title="WeiyiGeek.cpu-v" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190505215320.png" alt="WeiyiGeek.cpu-v" title="" class=""></a>
                <p>WeiyiGeek.cpu-v</p>
            </figure></p>
<p><br></p>
<p><strong>window 7 - å·²ç»ä¸é€‚ç”¨</strong><br>Step 1.ä¸‹è½½ docker Tool box è¿›è¡Œå…¨å®‰è£…FULL Installation<br>Step 2.å®‰è£…æˆåŠŸåä¼šåœ¨æ¡Œé¢å‡ºç°virtual VM,docker,Kitematic(Alpha)ç­‰ç­‰</p>
<ul>
<li>Kitematic(Alpha):æ˜¯ä¸€ä¸ªDocker GUiå·¥å…·.ç”¨æˆ·å¯èƒ½è¿è¡Œå‘½ä»¤(docker run hello-world)åœ¨Dockerå®¢æˆ·ç«¯å¯åŠ¨ä¸€ä¸ªå®¹å™¨,åœ¨Kitematicä¸­èƒ½è§‚å¯Ÿç»“æœ. ç”¨GitHubè´¦å·ç™»é™†.å°±å¯ä»¥çœ‹åˆ°è‡ªå·±åˆ›å»ºçš„é•œåƒ,æˆ–æ˜¯åœ¨GitHubä¸Šdownä¸‹æ¥çš„é•œåƒ.<br>Oracle VM VirtualBox:è™šæ‹Ÿæœºç®¡ç†å™¨,å¯ä»¥åˆ›å»ºè™šæ‹Ÿæœº;ä¹Ÿå¯å¯¹å½“å‰æ­£åœ¨è¿è¡Œçš„è™šæ‹Ÿæœºè¿›è¡Œç®¡ç†.</li>
</ul>
<p>Step 3.ç‚¹å‡» Docker Quickstart Terminalè¿›è¡Œä¸‹è½½boot2docker.iso è¿æ°”å¥½ä¸æŠ¥é”™çš„è¯å¯ä»¥è¯´æ˜å®‰è£…å®Œæˆ<br>Step 4.è€Œæˆ‘win7å¯åŠ¨ Docker Quickstart TerminalæŠ¥é”™,è§£å†³æ–¹æ³•ä¹Ÿæ˜¯å¾ˆç®€å•<br><figure class="image-box">
                <a rel=1.Dockerå­¦ä¹ ä¹‹åŸºç¡€çŸ¥è¯† href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190505215652.png" target="_blank" title="WeiyiGeek.æŠ¥é”™" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190505215652.png" alt="WeiyiGeek.æŠ¥é”™" title="" class=""></a>
                <p>WeiyiGeek.æŠ¥é”™</p>
            </figure></p>
<p>ä¸‹è½½åæ”¾åœ¨C:\Users\WeiyiGeek.docker\machine\cache\boot2docker.isoå³å¯<br><figure class="image-box">
                <a rel=1.Dockerå­¦ä¹ ä¹‹åŸºç¡€çŸ¥è¯† href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190505215706.png" target="_blank" title="WeiyiGeek.ä¸‹è½½boot2docker" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190505215706.png" alt="WeiyiGeek.ä¸‹è½½boot2docker" title="" class=""></a>
                <p>WeiyiGeek.ä¸‹è½½boot2docker</p>
            </figure></p>
<p>è§£å†³ä¸Šè¿°é—®é¢˜å,éªŒè¯å®‰è£…ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker pull hello-world</span><br><span class="line">docker images</span><br><span class="line">docker run hello-world</span><br></pre></td></tr></table></figure><br><figure class="image-box">
                <a rel=1.Dockerå­¦ä¹ ä¹‹åŸºç¡€çŸ¥è¯† href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190505215804.png" target="_blank" title="WeiyiGeek.å®‰è£…æˆåŠŸ" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190505215804.png" alt="WeiyiGeek.å®‰è£…æˆåŠŸ" title="" class=""></a>
                <p>WeiyiGeek.å®‰è£…æˆåŠŸ</p>
            </figure></p>
<p>Step 5.å®‰è£…åçš„dockeræ˜¯å¯ä»¥é€šè¿‡sshè¿æ¥çš„,boot2dockerç”¨æˆ·å’Œå¯†ç <br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker	tcuser	ssh</span><br><span class="line">root	<span class="built_in">command</span>ï¼šsudo -i (dockerç”¨æˆ·ä¸‹æ‰§è¡Œ)</span><br></pre></td></tr></table></figure><br><figure class="image-box">
                <a rel=1.Dockerå­¦ä¹ ä¹‹åŸºç¡€çŸ¥è¯† href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190505215933.png" target="_blank" title="WeiyiGeek.dockerssh" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190505215933.png" alt="WeiyiGeek.dockerssh" title="" class=""></a>
                <p>WeiyiGeek.dockerssh</p>
            </figure></p>
<p><br></p>
<p><strong>window 10 - å®˜æ–¹æä¾›çš„ Docker Desktop for Windows</strong><br>æè¿°: ç°åœ¨åœ¨<code>Windows 10 Pro, Enterprise, and Education</code>ç­‰ç³»ç»Ÿç‰ˆæœ¬ä¸­å¯ä»¥è¿›è¡Œä¸‹è½½å®‰è£…<code>Docker Desktop for Windows</code><a href="https://hub.docker.com/editions/community/docker-ce-desktop-windows/" target="_blank" rel="noopener">ä¸‹è½½åœ°å€-å½“å‰ç‰ˆæœ¬2.3.0.3</a>ï¼Œå®ƒå¯ä»¥è¿›è¡Œä½¿ç”¨çš„ç•Œé¢æ¥æ“ä½œæŸ¥çœ‹dockerä¸­çš„å®¹å™¨ï¼Œä»¥æ­¤æ¥ç®€åŒ–äº†å­¦ä¹ æˆæœ¬;<br>Step 1.è®¾ç½®dockerè¿›è¡Œå®‰è£…,åŠ å…¥åˆ°PATHä¹‹ä¸­<br>Step 2.å®‰è£…æˆåŠŸ,å…³é—­çª—å£<br>Step 3.å®‰è£…ååˆ©ç”¨powershellè¿›è¡ŒæŸ¥çœ‹dockerç‰ˆæœ¬<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; docker version</span><br><span class="line">&gt; docker run hello-world</span><br></pre></td></tr></table></figure><br>Step 4.æŸ¥çœ‹docker pullä¸‹æ¥å¾—é•œåƒ,å¹¶ä¸”è¿è¡Œ<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; docker images  <span class="comment">#æŸ¥çœ‹é•œåƒ</span></span><br><span class="line">&gt; docker run -it hello-world</span><br></pre></td></tr></table></figure></p>
<figure class="image-box">
                <a rel=1.Dockerå­¦ä¹ ä¹‹åŸºç¡€çŸ¥è¯† href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200716151445.png" target="_blank" title="WeiyiGeek.desktop for windows" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200716151445.png" alt="WeiyiGeek.desktop for windows" title="" class=""></a>
                <p>WeiyiGeek.desktop for windows</p>
            </figure>
<p>Tips: å¦‚æœåœ¨VMwareä¸­å®‰è£…çš„è™šæ‹Ÿæœºéœ€è¦å¼€å¯VT-Xï¼Œå¦‚æœDesktopæ— æ³•å¯åŠ¨åˆ™å°è¯•ä»¥ä¸‹è§£å†³æ–¹æ³•:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.æŸ¥çœ‹ç³»ç»Ÿä¸­çš„VM,å¦‚æœæ²¡æœ‰å¼€å¯è¿‡å°±æ˜¯falseçŠ¶æ€ã€‚</span></span><br><span class="line">Get-VM</span><br><span class="line">Get-VMProcessor -VMName Server2019 | fl</span><br><span class="line">  </span><br><span class="line"><span class="comment"># 2.æ˜¾ç¤ºæœªTrueå°±æ˜¯å·²ç»å¼€å¯åµŒå¥—è™šæ‹ŸåŒ–äº†ï¼Œä½†æ˜¯è¿™ä¸ªåŠŸèƒ½åªé’ˆå¯¹Hyper-Vè™šæ‹Ÿæœºï¼Œæ‰€ä»¥ï¼Œä¸ºä»€ä¹ˆè¦è£…è™šæ‹Ÿæœºåˆ°Hyper-Vä¸­</span></span><br><span class="line">Set-VMProcessor -ExposeVirtualizationExtensions <span class="variable">$true</span> -VMName Server2019</span><br></pre></td></tr></table></figure></p>
<p>Tips: åˆ©ç”¨Docker Desktopéƒ¨ç½²blog<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">PS C:\&gt; mkdir github; <span class="built_in">cd</span> .\github\</span><br><span class="line">PS C:\github&gt; Invoke-WebRequest -Uri https://github.com/WeiyiGeek/WeiyiGeek/archive/refs/heads/master.zip -OutFile blog.zip</span><br><span class="line">PS C:\github&gt; Expand-Archive -Path .\blog.zip -DestinationPath .</span><br><span class="line">PS C:\github&gt; mv .\WeiyiGeek-master\ blog</span><br></pre></td></tr></table></figure></p>
<figure class="image-box">
                <a rel=1.Dockerå­¦ä¹ ä¹‹åŸºç¡€çŸ¥è¯† href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/5/20211209115713.png" target="_blank" title="WeiyiGeek.Docker Desktop" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/5/20211209115713.png" alt="WeiyiGeek.Docker Desktop" title="" class=""></a>
                <p>WeiyiGeek.Docker Desktop</p>
            </figure>
<p><br></p>
<h5 id="3-Mac-ç³»ç»Ÿå®‰è£…"><a href="#3-Mac-ç³»ç»Ÿå®‰è£…" class="headerlink" title="3.Mac ç³»ç»Ÿå®‰è£…"></a>3.Mac ç³»ç»Ÿå®‰è£…</h5><p>æè¿°: Macå®‰è£…è¯·å‚è€ƒDockerå®˜æ–¹æ–‡æ¡£ï¼Œç”±äºä¼ä¸šä¸­æœåŠ¡å™¨ä¸€èˆ¬æ˜¯é‡‡ç”¨Linuxæ“ä½œç³»ç»Ÿä½œä¸ºåŸºç¡€ç¯å¢ƒï¼ŒMac å¤šç”¨äºå¼€å‘æµ‹è¯•ç”µè„‘ï¼Œæ‰€ä»¥æ­¤å¤„ä¸å†è¿›è¡Œå®‰è£…å®è·µè®²è§£ã€‚<br><figure class="image-box">
                <a rel=1.Dockerå­¦ä¹ ä¹‹åŸºç¡€çŸ¥è¯† href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190505220335.png" target="_blank" title="WeiyiGeek.mac" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190505220335.png" alt="WeiyiGeek.mac" title="" class=""></a>
                <p>WeiyiGeek.mac</p>
            </figure></p>
<p><br></p>
<h5 id="4-é•œåƒåŠ é€Ÿå™¨é…ç½®"><a href="#4-é•œåƒåŠ é€Ÿå™¨é…ç½®" class="headerlink" title="4.é•œåƒåŠ é€Ÿå™¨é…ç½®"></a>4.é•œåƒåŠ é€Ÿå™¨é…ç½®</h5><p><strong>Q: Docker é•œåƒç«™ï¼ˆåŠ é€Ÿå™¨é…ç½®ï¼‰æ˜¯ä»€ä¹ˆï¼Œæˆ‘éœ€è¦ä½¿ç”¨å—ï¼Ÿ</strong><br>æè¿°: ä½¿ç”¨ Docker çš„æ—¶å€™ï¼Œéœ€è¦ç»å¸¸ä»å®˜æ–¹è·å–é•œåƒï¼Œä½†æ˜¯ç”±äºæ˜¾è€Œæ˜“è§çš„ç½‘ç»œåŸå› ï¼Œæ‹‰å–é•œåƒçš„è¿‡ç¨‹éå¸¸è€—æ—¶ï¼Œä¸¥é‡å½±å“ä½¿ç”¨ Docker çš„ä½“éªŒã€‚å› æ­¤ä¸ºä½ çš„DockeræœåŠ¡é…ç½®Dockeré•œåƒç«™(åŠ é€Ÿ)æ˜¯éå¸¸å¿…è¦çš„ï¼Œé€šè¿‡æ™ºèƒ½è·¯ç”±å’Œç¼“å­˜æœºåˆ¶ï¼Œæå¤§æå‡äº†å›½å†…ç½‘ç»œè®¿é—® Docker Hub çš„é€Ÿåº¦ï¼Œå¦‚æœæ‚¨æ˜¯åœ¨å›½å†…çš„ç½‘ç»œç¯å¢ƒä½¿ç”¨ Dockerï¼Œé‚£ä¹ˆ Docker é•œåƒç«™ä¸€å®šèƒ½å¸®åŠ©åˆ°æ‚¨ã€‚</p>
<p><strong>æ–¹å¼1ï¼šä½¿ç”¨DaoCloudåŠ é€Ÿå™¨</strong><br>ç®€ä»‹ï¼šDaoCloud åŠ é€Ÿå™¨ æ˜¯å¹¿å—æ¬¢è¿çš„ Docker å·¥å…·,è§£å†³äº†å›½å†…ç”¨æˆ·è®¿é—® Docker Hub ç¼“æ…¢çš„é—®é¢˜ã€‚DaoCloud åŠ é€Ÿå™¨ç»“åˆå›½å†…çš„ CDN æœåŠ¡ä¸åè®®å±‚ä¼˜åŒ–,æˆå€çš„æå‡äº†ä¸‹è½½é€Ÿåº¦ã€‚<br>DaoCloudå®˜ç½‘ï¼š<br><a href="https://www.daocloud.io/mirror#accelerator-doc" target="_blank" rel="noopener">https://www.daocloud.io/mirror#accelerator-doc</a></p>
<p>é…ç½®æ–¹å¼:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ–¹å¼1</span></span><br><span class="line">curl -sSL https://get.daocloud.io/daotools/set_mirror.sh | sh -s http://f1361db2.m.daocloud.io</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–¹å¼2</span></span><br><span class="line">sudo mkdir -p /etc/docker</span><br><span class="line">sudo tee /etc/docker/daemon.json &lt;&lt;-<span class="string">'EOF'</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"registry-mirrors"</span>: [<span class="string">"http://f1361db2.m.daocloud.io"</span>,<span class="string">"https://xlx9erfu.mirror.aliyuncs.com"</span>]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<p><strong>æ–¹å¼2ï¼šä½¿ç”¨é˜¿é‡Œäº‘å®¹å™¨é•œåƒæœåŠ¡åŠ é€Ÿå™¨</strong><br>æ¨èå®‰è£…1.10.0ä»¥ä¸Šç‰ˆæœ¬çš„Dockerå®¢æˆ·ç«¯,æ‚¨å¯ä»¥é€šè¿‡ä¿®æ”¹daemoné…ç½®æ–‡ä»¶/etc/docker/daemon.jsonæ¥ä½¿ç”¨åŠ é€Ÿå™¨:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ–¹æ³•1.å¸¸è§„åŠ é€Ÿ</span></span><br><span class="line">sudo mkdir -p /etc/docker</span><br><span class="line">sudo tee /etc/docker/daemon.json &lt;&lt;-<span class="string">'EOF'</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"registry-mirrors"</span>: [<span class="string">"https://xlx9erfu.mirror.aliyuncs.com"</span>]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ–¹æ³•2ï¼šå¯¹äº 1.12 ä»¥å‰çš„ç‰ˆæœ¬ï¼Œ dockerd æ¢æˆ docker daemon </span></span><br><span class="line"><span class="comment">#æ³¨ï¼šç¼–è¾‘docker.serviceæ–‡ä»¶</span></span><br><span class="line">ExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock --registry-mirrors=https://xlx9erfu.mirror.aliyuncs.com</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ–¹æ³•3:Docker-CE17.12ç‰ˆæœ¬ä»¥åŠä¹‹å(CentOS7.0)</span></span><br><span class="line">vi /usr/lib/systemd/system/docker.service</span><br><span class="line">ExecStart=/usr/bin/dockerd --registry-mirror=https://xlx9erfu.mirror.aliyuncs.com</span><br><span class="line"></span><br><span class="line"><span class="comment">#é€šç”¨å¯åŠ¨</span></span><br><span class="line">sudo systemctl daemon-reload   <span class="comment">#é‡è½½å®ˆæŠ¤</span></span><br><span class="line">sudo systemctl restart docker</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ£€æŸ¥åŠ é€Ÿå™¨æ˜¯å¦ç”Ÿæ•ˆ</span></span><br><span class="line">sudo ps -ef | grep dockerd</span><br><span class="line">root 5346 1 0 19:03 ? 00:00:00 /usr/bin/dockerd --registry-mirror=https://jxus37ad.mirror.aliyuncs.com</span><br></pre></td></tr></table></figure><br><figure class="image-box">
                <a rel=1.Dockerå­¦ä¹ ä¹‹åŸºç¡€çŸ¥è¯† href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20191119225356.png" target="_blank" title="WeiyiGeek." data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/1/20191119225356.png" alt="WeiyiGeek." title="" class=""></a>
                <p>WeiyiGeek.</p>
            </figure></p>
<p>è¡¥å……ä¸€é”®é…ç½®:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Dockerä¸­å›½ mirror</span></span><br><span class="line"><span class="comment"># export REGISTRY_MIRROR="https://registry.docker-cn.com"</span></span><br><span class="line"><span class="comment"># è…¾è®¯äº‘ docker hub mirror</span></span><br><span class="line"><span class="comment"># export REGISTRY_MIRROR="https://mirror.ccs.tencentyun.com"</span></span><br><span class="line"><span class="comment"># åä¸ºäº‘é•œåƒ</span></span><br><span class="line"><span class="comment"># export REGISTRY_MIRROR="https://05f073ad3c0010ea0f4bc00b7105ec20.mirror.swr.myhuaweicloud.com"</span></span><br><span class="line"><span class="comment"># DaoCloud é•œåƒ</span></span><br><span class="line"><span class="comment"># export REGISTRY_MIRROR="http://f1361db2.m.daocloud.io"</span></span><br><span class="line"><span class="comment"># é˜¿é‡Œäº‘ docker hub mirror</span></span><br><span class="line"><span class="comment"># export REGISTRY_MIRROR=https://registry.cn-hangzhou.aliyuncs.com</span></span><br><span class="line"><span class="built_in">export</span> REGISTRY_MIRROR=https://xlx9erfu.mirror.aliyuncs.com</span><br><span class="line">curl -sSL https://kuboard.cn/install-script/set_mirror.sh | sh -s <span class="variable">$&#123;REGISTRY_MIRROR&#125;</span></span><br></pre></td></tr></table></figure></p>
<hr>

<h4 id="0x02-Docker-æ ¸å¿ƒæ¦‚å¿µ"><a href="#0x02-Docker-æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="0x02 Docker æ ¸å¿ƒæ¦‚å¿µ"></a>0x02 Docker æ ¸å¿ƒæ¦‚å¿µ</h4><p>æè¿°ï¼šDockerçš„ä¸‰å¤§æ ¸å¿ƒæ¦‚å¿µé•œåƒ/å®¹å™¨å’Œä»“åº“, é€šè¿‡ä¸‰å¤§å¯¹è±¡æ ¸å¿ƒæ¦‚å¿µæ‰€æ„å»ºçš„é«˜æ•ˆå·¥ä½œæµç¨‹;</p>
<h5 id="1-é•œåƒ-image"><a href="#1-é•œåƒ-image" class="headerlink" title="1.é•œåƒ [image]"></a>1.é•œåƒ [image]</h5><p>æè¿°ï¼šimages ç±»ä¼¼äºè™šæ‹Ÿæœºé•œåƒï¼Œå€Ÿé‰´äº†Gitåˆ©ç”¨åˆ†æˆåˆ†å±‚ä¼˜ç‚¹ï¼Œé€šè¿‡æ–‡ä»¶ç³»ç»Ÿåˆ†å±‚çš„æ¦‚å¿µå®ç°äº†åˆ†å±‚å¤ç”¨ï¼Œæå¤§çš„èŠ‚çº¦äº†ç£ç›˜ç©ºé—´ï¼›ç®€å•çš„æ‚¨å¯ä»¥å°†å®ƒç†è§£æˆä¸ºä¸€ä¸ªé¢å‘Dockerå¼•æ“çš„åªè¯»æ¨¡æ¿åŒ…å«æ–‡ä»¶ç³»ç»Ÿ;</p>
<ul>
<li>é•œåƒæ˜¯åˆ›å»ºDockerå®¹å™¨çš„åŸºç¡€,ç„¶åé€šè¿‡ç‰ˆæœ¬ç®¡ç†å’Œå¢é‡çš„æ–‡ä»¶ç³»ç»Ÿ;</li>
<li>ç”¨æˆ·åŸºäºé•œåƒæ¥è¿è¡Œè‡ªå·±çš„å®¹å™¨,é•œåƒæ˜¯åŸºäº Union æ–‡ä»¶ç³»ç»Ÿçš„å±‚å¼ç»“æ„;</li>
</ul>
<p>Dockerè¿è¡Œå®¹å™¨å‰æœ¬åœ°å¿…é¡»å­˜åœ¨å¯¹åº”çš„é•œåƒ,å¦‚æœä¸æŒ‡å®šé•œåƒåå°†ä¼šé»˜è®¤è‡ªåŠ¨é‡‡ç”¨Docker Hubå…¬å…±æ³¨å†ŒæœåŠ¡å™¨ä»“åº“ä¸­è¯¥åç§°çš„é•œåƒ;<br>Docker é•œåƒä½¿ç”¨å¸®åŠ©:<a href="https://lug.ustc.edu.cn/wiki/mirrors/help/docker" target="_blank" rel="noopener">https://lug.ustc.edu.cn/wiki/mirrors/help/docker</a></p>
<p>åŸºç¡€çŸ¥è¯†:</p>
<ul>
<li>1.é•œåƒåç§°æ ¼å¼:<code>Repository address/Namespace/ImageName:tag</code>å³<code>hub.weiyigeek.top/Test/alpine-apps:1.0</code></li>
<li>2.å…¸å‹Linuxå¯åŠ¨éœ€è¦è¿è¡Œä¸¤ä¸ªFSå³:<code>Kernel &gt; Bootfs &gt; Rootfs</code></li>
<li>3.é•œåƒçš„åˆ†å±‚ç»“æ„: æ–°é•œåƒæ˜¯ä»Baseé•œåƒä¸€å±‚ä¸€å±‚å åŠ çš„ï¼Œæ¯å®‰è£…ä¸€ä¸ªè½¯ä»¶å°±åœ¨ç°æœ‰é•œåƒåŸºç¡€ä¸Šå¢åŠ ä¸€å±‚;</li>
</ul>
<p><br/></p>
<p>é•œåƒæ“ä½œå¸¸ç”¨å‘½ä»¤ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">docker search --no-trunc=<span class="literal">false</span> [é•œåƒåç§°] <span class="comment">#æœç´¢å…³äºArchlinuxé•œåƒ,è¾“å‡ºä¿¡æ¯ä¸æˆªæ–­æ˜¾ç¤º</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#ä»“åº“å(Repository) æˆ–è€… æ ‡ç­¾å[ä¸æŒ‡å®šç€é»˜è®¤latest,å³æœ€æ–°]</span></span><br><span class="line">docker pull name/[repository[:tag]] <span class="comment">#è·å–Hubé•œåƒå¦‚æœä¸æŒ‡å®šTAGå°†é»˜è®¤é€‰æ‹©ä»“åº“ä¸­æœ€æ–°é¢å¸ƒçš„é•œåƒ</span></span><br><span class="line">docker push DockerHubUserç”¨æˆ·/<span class="built_in">test</span>:latest  <span class="comment">#ä¸Šä¼ åˆ°dockerä»“åº“</span></span><br><span class="line"></span><br><span class="line">docker images   <span class="comment">#åˆ—å‡ºæœ¬æœºå·²æœ‰é•œåƒ</span></span><br><span class="line"></span><br><span class="line">docker tag åŸä»“åº“[:æ ‡ç­¾] æ–°ä»“åº“å[:æ ‡ç­¾]  <span class="comment">#ä¸ºæœ¬åœ°é•œåƒæ·»åŠ ä¸€ä¸ªæ–°æ ‡ç­¾ [æ³¨æ„ä»“åº“åç§°å¿…é¡»å°å†™]</span></span><br><span class="line">docker tag &lt;image id&gt; username/name:devel <span class="comment">#ä¿®æ”¹é•œåƒçš„æ ‡ç­¾</span></span><br><span class="line"></span><br><span class="line">docker inspect [image id]  <span class="comment">#è·å–é•œåƒçš„è¯¦ç»†ä¿¡æ¯</span></span><br><span class="line">docker inspect -f &#123;&#123;<span class="string">".Architecture"</span>&#125;&#125; 550(images Id å‰é¢3ä½)  <span class="comment">#-f è·å–å•ä¸ªå±æ€§ è¿”å›JSON</span></span><br><span class="line">  </span><br><span class="line">docker rmi [&lt;image id&gt;|&lt;repository&gt; ]   <span class="comment">#åˆ é™¤é•œåƒ é•œåƒid|ä»“åº“åç§°</span></span><br><span class="line">docker rmi -f &lt;images id&gt; Â  <span class="comment">#ä¸å»ºè®®å¼ºè¡Œåˆ é™¤æ­£åœ¨å®¹å™¨ä¸­è¿è¡Œçš„é•œåƒæ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line">docker save -o ä¿å­˜æ–‡ä»¶å.tar  [repository[:tag]]  <span class="comment">#å°†é•œåƒæ–‡ä»¶æ‰“åŒ…å­˜å‡ºåˆ°ç£ç›˜</span></span><br><span class="line">docker save [repository[:tag]] &gt; ä¿å­˜æ–‡ä»¶å <span class="comment">#å°†é•œåƒæ–‡ä»¶æ‰“åŒ…å­˜å‡ºåˆ°ç£ç›˜</span></span><br><span class="line"></span><br><span class="line">docker load --input ä¿å­˜æ–‡ä»¶å.tar   <span class="comment">#å°†æ‰“åŒ…çš„é•œåƒæ–‡ä»¶è¿›è¡Œè½½äºº</span></span><br><span class="line">docker load &lt; ä¿å­˜æ–‡ä»¶å.tar</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<p><em>è¿è¡Œæ¡ˆä¾‹:</em><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">$ sudo docker pull ubuntu:16.04       Â  Â  Â  Â  Â <span class="comment">#ä¸‹è½½14.04 tagçš„é•œåƒ</span></span><br><span class="line">Using default tag: latest</span><br><span class="line">latest: Pulling from library/ubuntu</span><br><span class="line"><span class="comment">#ä»ä¸‹é¢å¯ä»¥çœ‹å‡ºé•œåƒæ–‡ä»¶ä¸€èˆ¬æ˜¯ç”±è‹¥å¹²ç»„æˆ,è¡Œé¦–f476d66f5408ä»£è¡¨äº†å„å±‚çš„ID,ä¸‹è½½è¿‡ç¨‹ä¸­ä¼šè·å–å¹¶è¾“å‡ºé•œåƒå„å±‚ä¿¡æ¯</span></span><br><span class="line"><span class="comment">#å±‚(Layer)å…¶å®æ˜¯AUFS(Advanced Union File Systemè”åˆæ–‡ä»¶ç³»ç»Ÿ)é‡è¦æ¦‚ç‡æ˜¯å®ç°å¢é‡ä¿å­˜äºæ›´æ–°çš„åŸºç¡€</span></span><br><span class="line">f476d66f5408: Pulling fs layer</span><br><span class="line">8882c27f669e: Pulling fs layer</span><br><span class="line">d9af21273955: Pulling fs layer</span><br><span class="line">f5029279ec12: Waiting</span><br><span class="line"></span><br><span class="line">$ sudo docker pull registry.hub.docker.com:5000/ubuntu   <span class="comment">#ä»æŒ‡å®šé•¿ä»“åº“è¿›è¡Œä¸‹è½½</span></span><br><span class="line"></span><br><span class="line">$ sudo docker run -t -i Ubuntu /bin/bash Â  Â  Â  Â <span class="comment">#åˆ©ç”¨dockerubuntué•œåƒåˆ›å»ºä¸€ä¸ªå®¹å™¨ ä»“åº“åé¢æ˜¯æ¥çš„å‘½ä»¤</span></span><br><span class="line">root@634e7ed26d76:/<span class="comment"># w</span></span><br><span class="line">USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT</span><br><span class="line"> 03:34:47 up  1:59,  0 users,  load average: 0.00, 0.05, 0.06</span><br><span class="line">root@634e7ed26d76:/<span class="comment"># cat /etc/os-release</span></span><br><span class="line">NAME=<span class="string">"Ubuntu"</span></span><br><span class="line">VERSION=<span class="string">"18.04.2 LTS (Bionic Beaver)"</span></span><br><span class="line">ID=ubuntu</span><br><span class="line">ID_LIKE=debian</span><br><span class="line">PRETTY_NAME=<span class="string">"Ubuntu 18.04.2 LTS"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$ sudo docker images   <span class="comment">#åˆ—å‡ºé•œåƒ</span></span><br><span class="line"><span class="comment">#å…¶ä¸­Image idçš„ä¿¡æ¯ååˆ†é‡è¦,å®ƒå”¯ä¸€æ ‡ç¤ºäº†é•œåƒ,Tagä¿¡æ¯æ¥åŒºåˆ†å‘è¡Œç‰ˆæœ¬(å¦‚14.04,16.04) </span></span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">ubuntu              latest              d131e0fa2585        9 days ago          102MB</span><br><span class="line">centos              latest              9f38484d220f        7 weeks ago         202MB</span><br><span class="line"><span class="comment">#REPOSITORY (æ¥è‡ªå“ªä¸ªä»“åº“) Â TAG (é•œåƒçš„æ ‡ç­¾ä¿¡æ¯)Â  Â IMAGE ID (é•œåƒçš„IDå·,å”¯ä¸€)Â  Â Â CREATED [Created:å»ºç«‹æ—¶é—´]Â VIRTUAL SIZE (é•œåƒå¤§å°)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$ sudo docker tag ubuntu:latest ubuntu18.04:latest <span class="comment">#ä¿®æ”¹é•œåƒåç§°ä½¿ç”¨è¯¥æ–¹å¼è¿›è¡Œæ·»åŠ æ–°æ ‡ç­¾åŸæ¥çš„ä¸ä¼šè¢«åˆ é™¤</span></span><br><span class="line">$ sudo docker tag d131e0fa2585 ubuntutls:latest</span><br><span class="line">$ sudo docker images</span><br><span class="line"><span class="comment">#æ›´æ”¹åé•œåƒçš„IDæ˜¯å®Œå…¨ä¸€è‡´çš„,å…¶å®éƒ½æŒ‡å‘äº†åŒä¸€ä¸ªé•œåƒæ–‡ä»¶ç›¸å½“äºåˆ«åè€Œå·²ï¼›</span></span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">ubuntutls           latest              d131e0fa2585        9 days ago          102MB</span><br><span class="line">ubuntu18.04         latest              d131e0fa2585        9 days ago          102MB </span><br><span class="line"></span><br><span class="line">$ sudo docker inspect d131e0fa2585 <span class="comment">#è·å–è¯¥é•œåƒçš„è¯¦ç»†ä¿¡æ¯</span></span><br><span class="line">$ sudo docker inspect -f &#123;&#123;<span class="string">".Architecture"</span>&#125;&#125; d131  <span class="comment">#è·å–ç³»ç»Ÿæ¶æ„ é€šå¸¸ä½¿ç”¨é•œåƒIDçš„å‰ä¸‰ä½</span></span><br><span class="line">amd64</span><br></pre></td></tr></table></figure><br><figure class="image-box">
                <a rel=1.Dockerå­¦ä¹ ä¹‹åŸºç¡€çŸ¥è¯† href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190506114446.png" target="_blank" title="WeiyiGeek.inspect" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190506114446.png" alt="WeiyiGeek.inspect" title="" class=""></a>
                <p>WeiyiGeek.inspect</p>
            </figure></p>
<p>å½“è¯¥é•œåƒåœ¨å®¹å™¨è¿è¡Œå­˜åœ¨çš„æ—¶å€™,é•œåƒæ–‡ä»¶é»˜è®¤æ˜¯æ— æ³•è¢«åˆ é™¤çš„;å¿…é¡»åœæ­¢/åˆ é™¤å®¹å™¨IDæ‰èƒ½åˆ é™¤é•œåƒæ–‡ä»¶;<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å½“åŒä¸€ä¸ªé•œåƒæœ‰å¤šä¸ªæ ‡ç­¾çš„æ—¶å€™rmiå‘½ä»¤åªæ˜¯åˆ é”™äº†è¯¥è¿›è¡Œçš„æ ‡ç­¾è€Œä¸”,å¹¶ä¸å½±å“é•œåƒæ–‡ä»¶</span></span><br><span class="line"><span class="comment">#ä½†å½“åªå‰©ä¸‹ä¸€ä¸ªæ ‡ç­¾çš„æ—¶å€™å°±è¦å°å¿ƒäº†,å¦‚æœåœ¨åœæ­¢çš„çŠ¶æ€ä¸‹å†æ¬¡ä½¿ç”¨rmiå‘½ä»¤åˆ™ä¼šåˆ é™¤è¯¥é•œåƒ</span></span><br><span class="line">$ sudo docker rmi ubuntu18.04</span><br><span class="line">Untagged: ubuntu18.04:latest</span><br><span class="line">$ sudo docker rmi ubuntu ubuntutls</span><br><span class="line">Untagged: ubuntu:latest </span><br><span class="line">Untagged:  <span class="comment">#åˆ é™¤äº†è¿™ä¸ªé•œåƒæ–‡ä»¶çš„æ‰€æœ‰AUFSå±‚</span></span><br><span class="line">ubuntu@sha256:d26d529daa4d8567167181d9d569f2a85da3c5ecaf539cace2c6223355d69981</span><br><span class="line"></span><br><span class="line">$ sudo docker rmi -f ubuntutls  <span class="comment">#å¼ºåˆ¶åˆ é™¤</span></span><br><span class="line">Untagged: ubuntutls:latest</span><br><span class="line">Deleted: sha256:d131e0fa2585a7efbfb187f70d648aa50e251d9d3b7031edf4730ca6154e221e</span><br></pre></td></tr></table></figure></p>
<p><br/></p>
<p><strong>åˆ›å»ºé•œåƒæœ‰ä¸‰ç§åŠæ³•ï¼š</strong></p>
<ul>
<li>1.ä»å·²æœ‰é•œåƒçš„å®¹å™¨åˆ›å»º</li>
<li>2.åŸºäºæœ¬åœ°æ¨¡æ¿å¯¼å…¥ï¼šä½¿ç”¨æ“ä½œç³»ç»Ÿæ¨¡æ¿å¯¼å…¥ä¸€ä¸ªé•œåƒæ–‡ä»¶;è¿™é‡Œæ¨èä½¿ç”¨OpenVZæä¾›çš„æ¨¡æ¿æ¥å¸¸è§</li>
<li>3.åŸºäºDockerfileå¯¼å…¥</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">######### ä»å·²æœ‰é•œåƒåˆ›å»º ############</span></span><br><span class="line"><span class="variable">$sudo</span> docker commit [option-é€‰é¡¹] ContainerId [Repository[:Tag]]</span><br><span class="line"><span class="variable">$sudo</span> docker commit -m <span class="string">"xx"</span> -a <span class="string">"oo"</span> ContainerID(è¢«ä¿®æ”¹è¿‡çš„ID) [Repository[:Tag]] </span><br><span class="line"><span class="comment"># -a,--author="ä½œè€…"</span></span><br><span class="line"><span class="comment"># -m,--message="æ›´æ”¹ä¿¡æ¯"</span></span><br><span class="line"><span class="comment"># -p,--pause=ture æäº¤æ—¶æš‚åœå®¹å™¨Containerè¿è¡Œ</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$sudo</span> docker run -it centos:latest /bin/bash</span><br><span class="line">[root@32a481e170c6 ~]$ touch &#123;1..10&#125;.txt  <span class="comment">#ä¸Šé¢è¿™ä¸ªå®¹å™¨IDéå¸¸é‡è¦åœ¨è¿›è¡Œä¿®æ”¹ä¹‹å</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$sudo</span> docker container ls -a   <span class="comment">#æŸ¥çœ‹å®¹å™¨è®°å½•</span></span><br><span class="line"><span class="comment">#åˆ›å»ºä¸€ä¸ªæ–°çš„é•œåƒ</span></span><br><span class="line"><span class="variable">$sudo</span> docker commit -m <span class="string">"Zabbix base in Centos7"</span> -a <span class="string">"Weiyigeek"</span> 32a481e170c6 centoszabbix:latest</span><br><span class="line">sha256:680ddb57c4b80c625ef68e113f553ee932a06f25d4685d25a0b6464cf5d60982  <span class="comment">#æˆåŠŸä¼šç»™å‡ºä¸€ä¸ªé•œåƒID</span></span><br><span class="line"></span><br><span class="line"><span class="comment">######### ä»æœ¬åœ°æ¨¡æ¿å¯¼å…¥ ############</span></span><br><span class="line"><span class="variable">$sudo</span> cat ubuntu-14.04.tar.gz | docker import - ubuntu:14.04  <span class="comment">#æœ¬åœ°å¯¼å…¥é•œåƒå‘½ä»¤</span></span><br></pre></td></tr></table></figure>
<p><br></p>
<p>å­˜å‡ºå’Œè½½äººé•œåƒå¹¶ä¸Šä¼ é•œåƒåˆ°DockerHubä¸­å®ä¾‹ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$docker</span> save -o zabbixcentos.tar centoszabbix:latest</span><br><span class="line">ls -alh zabbixcentos.tar</span><br><span class="line">-rw------- 1 root root 200M 5æœˆ   6 13:16 zabbixcentos.tar</span><br><span class="line"><span class="variable">$docker</span> load --input zabbixcentos.tar</span><br><span class="line">Loaded image: centoszabbix:latest</span><br><span class="line"></span><br><span class="line"><span class="variable">$docker</span> images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">centoszabbix (ä¸Šé¢ä»å·²æœ‰é•œåƒæ–‡ä»¶ä¸­åˆ›å»º)       latest              622b7661c06b        13 minutes ago      202MB</span><br><span class="line"></span><br><span class="line"><span class="comment">#ç”¨æˆ·éœ€è¦åœ¨DockerHubç½‘ç«™æ³¨å†Œåæ‰èƒ½è¿›è¡Œä¸Šä¼ é•œåƒ</span></span><br><span class="line"><span class="variable">$docker</span> login  <span class="comment">#åœ¨åŠå…¶ä¸Šè¿›è¡Œç™»å½•</span></span><br><span class="line"><span class="comment"># Login with your Docker ID to push and pull images from Docker Hub. If you don have a Docker ID, head over to https://hub.docker.com to create one.</span></span><br><span class="line"><span class="comment"># Username: weiyigeek</span></span><br><span class="line"><span class="comment"># Password: è¾“å…¥hubå¯†ç </span></span><br><span class="line"><span class="comment"># WARNING! è´¦å·å¯†ç base64ç¼–ç å­˜æ”¾äº /root/.docker/config.json æ–‡ä»¶ä¸­</span></span><br><span class="line"><span class="comment"># echo "d2VpeW********VrO***ldlaXllMjAxOQ==" | base64 -d</span></span><br><span class="line"><span class="comment"># weiyigeek:Docker</span></span><br><span class="line"><span class="comment"># https://docs.docker.com/engine/reference/commandline/login/#credentials-store</span></span><br><span class="line">Login Succeeded  <span class="comment">#è¡¨ç¤ºç™»å½•æˆåŠŸ</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$docker</span> push weiyigeek/czabbix:latest</span><br><span class="line">The push refers to repository [docker.io/weiyigeek/czabbix]</span><br><span class="line">484404f26982: Pushed</span><br><span class="line">d69483a6face: Mounted from library/centos</span><br><span class="line">latest: digest: sha256:c1d891c2d56a0677ff28639189fa7252790d3b8ef417816570fb3a7654bc4e05 size: 736  <span class="comment">#è¡¨ç¤ºä¸Šä¼ æˆåŠŸè¿”å›çš„ç¥¨æ®</span></span><br></pre></td></tr></table></figure><br><figure class="image-box">
                <a rel=1.Dockerå­¦ä¹ ä¹‹åŸºç¡€çŸ¥è¯† href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190506150159.png" target="_blank" title="WeiyiGeek.hubé•œåƒä¸Šä¼ æˆåŠŸ" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190506150159.png" alt="WeiyiGeek.hubé•œåƒä¸Šä¼ æˆåŠŸ" title="" class=""></a>
                <p>WeiyiGeek.hubé•œåƒä¸Šä¼ æˆåŠŸ</p>
            </figure></p>
<p><br></p>
<p><strong>é•œåƒçš„F&amp;Qç›¸å…³é—®é¢˜</strong></p>
<p>Q:Docker é•œåƒæ˜¯æ€ä¹ˆå®ç°å¢é‡çš„ä¿®æ”¹å’Œç»´æŠ¤çš„ï¼Ÿ<br>ç­”ï¼šæ¯ä¸ªé•œåƒéƒ½ç”±å¾ˆå¤šå±‚æ¬¡æ„æˆï¼ŒDocker ä½¿ç”¨ Union FS å°†è¿™äº›ä¸åŒçš„å±‚ç»“åˆåˆ°ä¸€ä¸ªé•œåƒä¸­å»ã€‚<br>é€šå¸¸ Union FS æœ‰ä¸¤ä¸ªç”¨é€”ï¼š(Docker åœ¨ AUFS ä¸Šæ„å»ºçš„å®¹å™¨ä¹Ÿæ˜¯åˆ©ç”¨äº†ç±»ä¼¼çš„åŸç†)</p>
<ul>
<li>ä¸€æ–¹é¢å¯ä»¥å®ç°ä¸å€ŸåŠ© LVMã€RAID å°†å¤šä¸ª disk æŒ‚åˆ°åŒä¸€ä¸ªç›®å½•ä¸‹</li>
<li>å°±æ˜¯å°†ä¸€ä¸ªåªè¯»çš„åˆ†æ”¯å’Œä¸€ä¸ªå¯å†™çš„åˆ†æ”¯è”åˆåœ¨ä¸€èµ·ï¼ŒLive CD æ­£æ˜¯åŸºäºæ­¤æ–¹æ³•å¯ä»¥å…è®¸åœ¨é•œåƒä¸å˜çš„åŸºç¡€ä¸Šå…è®¸ç”¨æˆ·åœ¨å…¶ä¸Šè¿›è¡Œä¸€äº›å†™æ“ä½œ</li>
</ul>
<p>Q: ä»€ä¹ˆæ˜¯è™šæ‚¬é•œåƒï¼Ÿ<br>ç­”: è™šæ‚¬é•œåƒ(dangling image)ï¼Œåœ¨ä½¿ç”¨docker images æŸ¥çœ‹é•œåƒæ—¢æ²¡æœ‰ä»“åº“åï¼Œä¹Ÿæ²¡æœ‰æ ‡ç­¾åªæ˜¯æ˜¾ç¤ºä¸€ä¸ª<code>&lt;none&gt;</code>çš„é•œåƒ<br>äº§ç”ŸåŸå› ï¼šç”±äºæ–°æ—§é•œåƒåŒåï¼Œæ—§é•œåƒåç§°è¢«å–æ¶ˆï¼Œä»è€Œå‡ºç°ä»“åº“åã€æ ‡ç­¾å‡ä¸º çš„é•œåƒã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹ä¸åˆ é™¤è™šæ‚¬é•œåƒ</span></span><br><span class="line">$ docker images -f dangling=<span class="literal">true</span></span><br><span class="line">$ docker rmi $(docker images -q -f dangling=<span class="literal">true</span>)</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<p>Q: ä»€ä¹ˆæ˜¯é•œåƒå†™æ—¶å¤åˆ¶?<br>ç­”: æ¯”å¦‚å…¸å‹çš„Linuxå¯åŠ¨é¦–å…ˆä¼šå°†rootfsç½®ä¸ºreadonlyå†è¿›è¡Œä¸€ç³»åˆ—æ£€æŸ¥åå°†å…¶åˆ‡æ¢ä¸ºreadwriteä¾›ç”¨æˆ·ä½¿ç”¨ï¼Œå½“åœ¨Dockerä¸­èµ·åˆä¹Ÿæ˜¯å°†rootfsç½®ä¸ºreadonlyï¼Œç„¶ååˆ©ç”¨union mountå°†ä¸€ä¸ªreadwriteæ–‡ä»¶ç³»ç»ŸæŒ‚è½½åªè¯»çš„rootfsä¹‹ä¸Šï¼Œå¹¶ä¸”è¿è¡Œå†æ¬¡å°†ä¸‹å±‚çš„æ–‡ä»¶ç³»ç»Ÿè®¾ç½®ä¸ºreadonlyå¹¶ä¸”å‘ä¸Šå åŠ ï¼Œæˆ‘ä»¬æŠŠè¿™æ ·ä¸€ç»„readonlyå’Œä¸€ä¸ªwriteableçš„ç»“æ„æ„æˆä¸€ä¸ªå®¹å™¨çš„è¿è¡Œç›®å½•ï¼Œæ¯ä¸€ä¸ªè¢«ç§°ä¸ºä¸€ä¸ªLayer;<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Writable : Container  (å¯ä»¥å‘ä¸Šå åŠ åŒæ—¶å®ƒå˜æˆä¸€å±‚Image)</span><br><span class="line">add Apache : Image (Reference parent-å¼•ç”¨çˆ¶)</span><br><span class="line">add Emacs : Image  (Reference parent-å¼•ç”¨çˆ¶)</span><br><span class="line">Debian : Base Image</span><br><span class="line">&gt; Bootfs</span><br><span class="line">lxc,aufs,brtfs : Kernel</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<p>Q: Docker ä¸­ save å’Œ export å‘½ä»¤çš„åŒºåˆ«?<br>ç­”: æˆ‘ä»¬å…ˆç®€å•çš„è¯´ä¸€ä¸‹å…¶åŒºåˆ«ï¼Œåœ¨éšåçš„çš„ä¾‹å­ä¸­ä½¿æ‚¨æ›´å¿«çš„ç†è§£;</p>
<ul>
<li>1.save ä¸ load å‘½ä»¤å¯¹åº”å³å¯¼å‡ºä¸å¯¼å…¥é•œåƒï¼Œè€Œexportä¸importå‘½ä»¤å¯¹åº”å³å¯¼å‡ºå¯¼å…¥å®¹å™¨;</li>
<li>2.save ä¿å­˜å load åŠ è½½çš„é•œåƒæ²¡æœ‰ä¸¢å¤±å†å²å’Œå±‚(Layer),è€Œå®¹å™¨exportå¯¼å‡ºç„¶åimportå¯¼å…¥æ—¶æ‰€æœ‰çš„æäº¤å†å²å°†ä¼šä¸¢å¤±ï¼Œè¿™æ„å‘³ç€æ‚¨æ— æ³•å›æ»šåˆ°ä¹‹å‰çš„å±‚;</li>
<li>3.è¡¥å……:é€šè¿‡importå¯¼å…¥çš„æ–¹å¼é•œåƒåªæœ‰ä¸€å±‚ï¼Œè€Œé€šè¿‡commitçš„æ–¹å¼ç”Ÿæˆçš„é•œåƒå®é™…æ˜¯åœ¨åŸæœ‰çš„Base Image(å³å¤å†™å±‚)ä¸Šåˆç”Ÿæˆäº†ä¸€å±‚ï¼›</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.åœ¨ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„å®¹å™¨ä¸Šåˆ›å»ºä¸€ä¸ªç›®å½•ç„¶åcommit</span></span><br><span class="line">docker <span class="built_in">exec</span> -it test1 mkdir /tmp/demo</span><br><span class="line">docker commit -a <span class="string">"WeiyiGeek"</span> -m <span class="string">"create /tmp/demo directory"</span> test1 <span class="built_in">test</span>:1.2 <span class="comment">#åŠ ä¸Štagé•œåƒåç§°:ç‰ˆæœ¬é˜²æ­¢ç„è™šé•œåƒ</span></span><br><span class="line">sha256:30a048249000dd36561bffaa9fecc7690a45ef12096849c77afd4543b0d2d9b0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.é‡‡ç”¨saveå‘½ä»¤è¿›è¡Œå¯¼å‡ºæäº¤çš„é•œåƒ</span></span><br><span class="line">docker save -o save.tar 30a048</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.é‡‡ç”¨exportè¿›è¡Œå¯¼å‡ºæ­£åˆ™è¿è¡Œçš„å®¹å™¨</span></span><br><span class="line">docker ps</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">25d2d645bfc9        test1               <span class="string">"top -b -d 2"</span>       2 weeks ago         Up 3 days                               test1</span><br><span class="line">docker <span class="built_in">export</span> test1 &gt; export.tar <span class="comment"># æˆ–è€… docker export 25d &gt; export.tar</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.åœ¨å¦å¤–ä¸€å°æœºå™¨ä¸Šè¿›è¡Œåˆ†åˆ«å¯¼å…¥ save.tar ä¸ export.tar</span></span><br><span class="line">docker load -i save.tar <span class="comment">#æ­¤æ—¶é»˜è®¤å¯¼å…¥ä¼šå¯¼è‡´è™šæ‚¬é•œåƒ</span></span><br><span class="line">Loaded image ID: sha256:30a048249000dd36561bffaa9fecc7690a45ef12096849c77afd4543b0d2d9b0</span><br><span class="line">cat export.tar | docker import - test1:1.0</span><br><span class="line">sha256:cdd65e7054be9e1928fe8133380817e81ff12b8493b40e2f9106efedac5ee572</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.æŸ¥çœ‹å¯¼å…¥æƒ…å†µ</span></span><br><span class="line">docker images</span><br><span class="line">REPOSITORY                            TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">&lt;none&gt;                                &lt;none&gt;              30a048249000        2 minutes ago       7.37MB</span><br><span class="line">test1                                 1.0                 cdd65e7054be        3 minutes ago       7.35MB</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6.æŸ¥çœ‹å¼‚åŒ</span></span><br><span class="line">[root@master-01 ~]$ docker <span class="built_in">history</span> 30a <span class="comment"># save æ–¹å¼ å­˜åœ¨å†å²å±‚ä¿¡æ¯</span></span><br><span class="line"><span class="comment"># IMAGE               CREATED             CREATED BY                                      SIZE                COMMENT</span></span><br><span class="line"><span class="comment"># 30a048249000        22 minutes ago      -d 2                                            193B                create /tmp/demo directory</span></span><br><span class="line"><span class="comment"># &lt;missing&gt;           2 weeks ago         /bin/sh -c #(nop)  CMD ["-d" "2"]               0B</span></span><br><span class="line"><span class="comment"># &lt;missing&gt;           2 weeks ago         /bin/sh -c #(nop)  ENTRYPOINT ["top" "-b"]      0B</span></span><br><span class="line"><span class="comment"># &lt;missing&gt;           2 weeks ago         /bin/sh -c echo "http://mirrors.huaweicloud".â€¦   1.8MB</span></span><br><span class="line"><span class="comment"># &lt;missing&gt;           2 weeks ago         /bin/sh -c #(nop)  MAINTAINER WeiyiGeek mastâ€¦   0B</span></span><br><span class="line"><span class="comment"># &lt;missing&gt;           2 weeks ago         /bin/sh -c #(nop)  LABEL Author=WeiyiGeek Deâ€¦   0B</span></span><br><span class="line"><span class="comment"># &lt;missing&gt;           5 weeks ago         /bin/sh -c #(nop)  CMD ["/bin/sh"]              0B</span></span><br><span class="line"><span class="comment"># &lt;missing&gt;           5 weeks ago         /bin/sh -c #(nop) ADD file:c92c248239f8c7b9bâ€¦   5.57MB</span></span><br><span class="line">[root@master-01 ~]$ docker <span class="built_in">history</span> cdd <span class="comment"># export æ–¹å¼æ— å†å²å±‚ä¿¡æ¯ä¸”åªæœ‰ä¸€å±‚</span></span><br><span class="line"><span class="comment"># IMAGE               CREATED             CREATED BY          SIZE                COMMENT</span></span><br><span class="line"><span class="comment"># cdd65e7054be        23 minutes ago                          7.35MB              Imported from -</span></span><br></pre></td></tr></table></figure>
<hr>
<h5 id="2-å®¹å™¨-Container"><a href="#2-å®¹å™¨-Container" class="headerlink" title="2.å®¹å™¨ [Container]"></a>2.å®¹å™¨ [Container]</h5><p>æè¿°ï¼šDockerå®¹å™¨Containerç±»ä¼¼äºä¸€ä¸ªè½»é‡çº§çš„æ²™ç®±,ä¹Ÿå¯ä»¥çœ‹åšä¸€ä¸ªç®€æ˜“ç‰ˆçš„Linuxç³»ç»Ÿç¯å¢ƒ;å› ä¸ºå®¹å™¨æ˜¯è¿è¡Œåº”ç”¨ç¨‹åºçš„,æ‰€ä»¥å¿…é¡»å¾—å…ˆæœ‰ä¸€ä¸ªæ“ä½œç³»ç»Ÿä¸ºåŸºç¡€</p>
<p>Dockeråˆ©ç”¨å®¹å™¨æ¥è¿è¡Œå’Œéš”ç¦»åº”ç”¨;</p>
<ul>
<li>å®¹å™¨æ˜¯ä»é•œåƒåˆ›å»ºçš„åº”ç”¨ç‹¬ç«‹è¿è¡Œçš„å®ä¾‹;</li>
<li>å¯ä»¥è¿›è¡Œå¯åŠ¨/å¼€å§‹/åœæ­¢/åˆ é™¤å®¹å™¨,è€Œè¿™äº›å®¹å™¨éƒ½æ˜¯ç›¸äº’éš”ç¦»,äº’ä¸å¯è§çš„;</li>
<li>é•œåƒè‡ªèº«åªè¯»çš„,å®¹å™¨ä»é•œåƒå¯åŠ¨çš„æ—¶å€™ä¼šåœ¨é•œåƒçš„æœ€ä¸Šå±‚åˆ›å»ºä¸€ä¸ªå¯å†™å±‚,é•œåƒæœ¬èº«å°†ä¿æŒä¸å˜;</li>
<li>åˆ›å»ºå®¹å™¨ã€å¯åŠ¨å®¹å™¨ã€ç»ˆæ­¢å®¹å™¨ã€è¿›å…¥å®¹å™¨ã€åˆ é™¤å®¹å™¨ã€å¯¼å…¥å¯¼å‡ºå®¹å™¨å®ç°å®¹å™¨è¿ç§»;</li>
</ul>
<p>å½“åˆ›å»ºå¹¶è¿è¡Œå®¹å™¨æ—¶å€™Dockeråœ¨åå°è¿è¡Œçš„æ ‡å‡†æ“ä½œåŒ…æ‹¬ï¼š</p>
<ul>
<li>æ£€æŸ¥æœ¬åœ°æ˜¯å¦å­˜åœ¨æŒ‡å®šé•œåƒ,ä¸å­˜åœ¨å°±ä»å…¬æœ‰ä»“åº“ä¸‹è½½</li>
<li>åˆ©ç”¨é•œåƒåˆ›å»ºå¹¶å¯åŠ¨ä¸€ä¸ªå®¹å™¨</li>
<li>åˆ†é…ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿ,å¹¶åœ¨åªè¯»çš„é•œåƒå±‚å¤–é¢æŒ‚è½½ä¸€ä¸ªå¯è¯»å†™å±‚</li>
<li>ä»å®¿ä¸»ä¸»æœºé…ç½®çš„ç½‘æ¡¥æ¥å£ä¸­æ¡¥æ¥ä¸€ä¸ªè™šæ‹Ÿæ¥å£åˆ°å®¹å™¨ä¸­å»</li>
<li>ä»åœ°å€æ± é…ç½®ä¸€ä¸ªIPåœ°å€ç»™å®¹å™¨</li>
<li>æ‰§è¡Œç”¨æˆ·æŒ‡å®šçš„åº”ç”¨ç¨‹åº</li>
<li>æ‰§è¡Œå®Œæ¯•åå®¹å™¨è¢«ç»ˆæ­¢</li>
</ul>
<p>å¯åŠ¨å®¹å™¨æœ‰ä¸¤ç§æ–¹å¼ï¼š</p>
<ul>
<li>ä¸€ç§æ˜¯åŸºäºé•œåƒæ–°å»ºä¸€ä¸ªå®¹å™¨å¹¶å¯åŠ¨</li>
<li>å¦å¤–ä¸€ä¸ªæ˜¯å°†åœ¨ç»ˆæ­¢çŠ¶æ€ï¼ˆstoppedï¼‰çš„å®¹å™¨é‡æ–°å¯åŠ¨ã€‚</li>
</ul>
<p>å®¹å™¨æ“ä½œå¸¸ç”¨å‘½ä»¤ï¼šï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">docker create -it repository[:tag] <span class="comment">#åˆ›å»ºå®¹å™¨ä½†å¤„äºåœæ­¢çŠ¶æ€</span></span><br><span class="line"></span><br><span class="line">docker start -a -i &lt;container id&gt;   <span class="comment">#å¯åŠ¨åˆ›å»ºçš„å®¹å™¨</span></span><br><span class="line"><span class="comment"># -a å‚æ•°   è¿æ¥å®¹å™¨å¹¶æ‰“å°è¾“å‡ºæˆ–é”™è¯¯ -</span></span><br><span class="line"><span class="comment"># -i å‚æ•°   å¯åŠ¨å®¹å™¨å¹¶è¿›å…¥äº¤äº’æ¨¡å¼</span></span><br><span class="line"></span><br><span class="line">docker run -t -i repository[:tag]  /bin/bash <span class="comment">#åˆ›å»ºå¹¶å¯åŠ¨å®¹å™¨ ç­‰åŒäºä¸Šé¢ä¸¤æ¡å‘½ä»¤</span></span><br><span class="line"><span class="comment"># -t:è®©Dockeråˆ†é…ä¸€ä¸ªä¼ªç»ˆç«¯(pseudo-tty)å¹¶ç»‘å®šåœ¨å®¹å™¨çš„æ ‡å‡†è¾“å…¥ä¸Š.</span></span><br><span class="line"><span class="comment"># -i:åˆ™è®©å®¹å™¨çš„æ ‡å‡†è¾“å…¥ä¿æŒæ‰“å¼€.</span></span><br><span class="line"><span class="comment"># CTRL+Z å’Œ Exit åˆ™é€€å‡ºå®¹å™¨Container</span></span><br><span class="line">docker run -d repository[:tag] /bin/sh -C <span class="string">"echo hello word"</span> <span class="comment">#å®ˆæŠ¤æ€è¿è¡Œ</span></span><br><span class="line"><span class="comment"># -d å‚æ•°å³å¯åå°è¿è¡Œ,ç”¨æˆ·æ— æ³•çœ‹åˆ°å®¹å™¨ä¸­çš„ä¿¡æ¯</span></span><br><span class="line"><span class="comment"># -c æ‰§è¡Œçš„Command</span></span><br><span class="line"><span class="comment"># --rm æ·»åŠ è¿™ä¸ªæ ‡è®°,å®¹å™¨ä¼šåœ¨åœæ­¢åç«‹å³åˆ é™¤è‡ªèº«   (æ³¨æ„ï¼šä¸-dä¸èƒ½åŒæ—¶ä½¿ç”¨)</span></span><br><span class="line"><span class="comment"># --name ä½¿ç”¨--name web æ ‡è®°å¯ä»¥ä¸ºå®¹å™¨é‡æ–°å‘½å</span></span><br><span class="line"></span><br><span class="line">docker logs &lt;Container-id&gt;    Â  <span class="comment">#è·å–å®¹å™¨çš„è¾“å‡ºä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line">docker attach [names]  <span class="comment">#é‡‡ç”¨ps -a NAMES è¿›å…¥å®¹å™¨</span></span><br><span class="line"></span><br><span class="line">docker <span class="built_in">exec</span> -it &lt;Container-id&gt;  /bin/bash  <span class="comment">#docker exec è‡³1.3ç‰ˆæœ¬èµ·å¯ä»¥åœ¨å®¹å™¨ä¸­è¿è¡Œå‘½ä»¤</span></span><br><span class="line"></span><br><span class="line">docker ps -aq   <span class="comment">#æ˜¾ç¤ºæœ¬æœºä¸Šçš„æ‰€æœ‰å®¹å™¨IDè¿è¡Œçš„å®¹å™¨IDä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line">docker restart &lt;container id&gt;  <span class="comment">#é‡å¯å®¹å™¨</span></span><br><span class="line"></span><br><span class="line">docker stop &lt;container id&gt; Â <span class="comment">#åœæ­¢å®¹å™¨</span></span><br><span class="line">docker <span class="built_in">kill</span> &lt;cantainer id&gt;  <span class="comment">#å¼ºè¡Œç»ˆæ­¢å®¹å™¨ å¯ä»¥ç›´æ¥å‘é€SIGKILLä¿¡å·æ¥ç»ˆæ­¢å®¹å™¨</span></span><br><span class="line"></span><br><span class="line">docker rm &lt;container id&gt;    <span class="comment">#åˆ é™¤å®¹å™¨åˆ é™¤ä¾èµ–è¯¥é•œåƒçš„å®¹å™¨ID,å‰3ä½å³å¯</span></span><br><span class="line"><span class="comment"># -f,--force=false å¼ºåˆ¶ç»ˆæ­¢å¹¶åˆ é™¤ä¸€ä¸ªè¿è¡Œä¸­çš„å®¹å™¨[é»˜è®¤ä¼šå‘ç”ŸSIGKILLä¿¡å·]</span></span><br><span class="line"><span class="comment"># -l,--link=false  åˆ é™¤å®¹å™¨è¿æ¥ä½†ä¿ç•™å®¹å™¨</span></span><br><span class="line"><span class="comment"># -v,--volumes=false  åˆ é™¤å®¹å™¨æŒ‚è½½çš„æ•°æ®å·</span></span><br><span class="line"></span><br><span class="line">docker <span class="built_in">export</span> &lt;container id&gt; &gt;å¯¼å‡ºæ–‡ä»¶.tar  <span class="comment">#å¯¼å‡ºå®¹å™¨</span></span><br><span class="line"></span><br><span class="line">docker import - repository[:tag] <span class="comment">#å¯¼å…¥å®¹å™¨</span></span><br></pre></td></tr></table></figure><br><figure class="image-box">
                <a rel=1.Dockerå­¦ä¹ ä¹‹åŸºç¡€çŸ¥è¯† href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190506161441.png" target="_blank" title="WeiyiGeek.runä¸startçš„åŒºåˆ«" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190506161441.png" alt="WeiyiGeek.runä¸startçš„åŒºåˆ«" title="" class=""></a>
                <p>WeiyiGeek.runä¸startçš„åŒºåˆ«</p>
            </figure></p>
<p>å‘½ä»¤å®è·µï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åˆ›å»ºå®¹å™¨</span></span><br><span class="line"><span class="variable">$sudo</span> docker create -it weiyigeek/czabbix  </span><br><span class="line">2b72a3410be576aeb9023ef2c41488e7b2630cf2282b8a0b1dddce771f22231f</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¯åŠ¨å®¹å™¨IDæ‰§è¡Œäº¤æ¢ç™»å½•,startå¯ä»¥è¿›å…¥åˆ°ä»»ä½•åœ¨å®¹å™¨ä¸­è¿è¡Œ</span></span><br><span class="line"><span class="variable">$sudo</span> docker start -i 2b7  </span><br><span class="line"><span class="comment"># [root@2b72a3410be5 /]# whoami</span></span><br><span class="line"><span class="comment"># root</span></span><br><span class="line"><span class="comment"># [root@2b72a3410be5 /]# exit</span></span><br><span class="line"><span class="comment">#å¯¹äºåˆ›å»ºåçš„å®¹å™¨é‡‡ç”¨exitå‘½ä»¤é€€å‡ºåè¯¥å®¹å™¨è‡ªåŠ¨å¤„äºç»ˆæ­¢çŠ¶æ€;</span></span><br><span class="line"><span class="comment">#æç¤ºï¼šæ­£å¸¸é€€å‡ºä¸å…³é—­å®¹å™¨è¯·æŒ‰Ctrl+P+Qè¿›è¡Œé€€å‡ºå®¹å™¨</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$sudo</span> docker ps -a  <span class="comment">#æ˜¾ç¤ºæœ¬æœºä¸Šå­˜åœ¨çš„æ‰€æœ‰å®¹å™¨</span></span><br><span class="line"><span class="comment"># CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                           PORTS               NAMES</span></span><br><span class="line"><span class="comment"># 634e7ed26d76        d131e0fa2585        "/bin/bash"         About an hour ago   Exited (130) About an hour ago                       recursing_goodall</span></span><br><span class="line"><span class="comment"># b72a3410be5        weiyigeek/czabbix   "/bin/bash"         41 seconds ago      Up 21 seconds                           priceless_chaplygin</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$docker</span> run -t -i centos /bin/bash  <span class="comment">#åˆ›å»ºå®¹å™¨å¹¶ä¸”è¿è¡Œ</span></span><br><span class="line"><span class="comment"># [root@0b9aef4876d3 /]# hostname</span></span><br><span class="line"><span class="comment"># 0b9aef4876d3</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$ddocker</span> run -d centoszabbix /bin/sh -c <span class="string">"echo Hello World,Docker Container"</span></span><br><span class="line">4e62768b1d9196fc79fd740c103df79c8e3bb09d9c6810aa43976abeda036a26</span><br><span class="line"></span><br><span class="line"><span class="variable">$ddocker</span> logs 4e62  <span class="comment">#è·å–å®¹å™¨è¾“å‡ºçš„ä¿¡æ¯</span></span><br><span class="line">Hello World,Docker Container</span><br><span class="line"></span><br><span class="line"><span class="variable">$docker</span> attach priceless_chaplygin  <span class="comment">#é€šè¿‡ä¸Šé¢çš„ps -a ä¸­namesè¿›å…¥æƒ³å¯¹åº”çš„å®¹å™¨</span></span><br><span class="line"><span class="comment">#å½“å¤šä¸ªçª—å£åŒæ—¶ attach åˆ°åŒä¸€ä¸ªå®¹å™¨çš„æ—¶å€™ æ‰€æœ‰çª—å£éƒ½ä¼šåŒæ­¥æ˜¾ç¤º ã€‚å½“æŸä¸ªçª—å£å› å‘½ä»¤é˜»å¡æ—¶,å…¶ä»–çª—å£ä¹Ÿæ— æ³•æ‰§è¡Œæ“ä½œäº†</span></span><br><span class="line"><span class="comment"># [root@b72a3410be5 /]$ hostname</span></span><br><span class="line"><span class="comment"># b72a3410be5</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$docker</span> <span class="built_in">exec</span> -ti b72 /bin/<span class="built_in">echo</span> <span class="string">"whoami"</span>   <span class="comment">#å¯ä»¥é€šè¿‡execç›´æ¥æ‰§è¡Œå‘½ä»¤å’Œè¿›å…¥shell</span></span><br><span class="line"><span class="comment"># whoami</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#åœæ­¢å®¹å™¨</span></span><br><span class="line"><span class="comment">#å½“éœ€è¦åˆ é™¤ä¸€ä¸ªåœ¨å®¹å™¨ä¸­è¿è¡Œçš„é•œåƒçš„æ—¶å€™,ä¼šå¯¼è‡´ä¸èƒ½åˆ é™¤é•œåƒ[Image]è¿™æ—¶å€™å¿…é¡»å…ˆåœæ­¢å†åˆ é™¤å®¹å™¨[container]ï¼š</span></span><br><span class="line"><span class="variable">$sudo</span> docker stop 634e7ed26d76 Â </span><br><span class="line"></span><br><span class="line"><span class="comment">#é•œåƒçš„å®¹å™¨ID,å‰3ä½å³å¯,ç„¶ååœ¨åˆ é™¤é•œåƒ</span></span><br><span class="line"><span class="variable">$sudo</span> docker rm 634      <span class="comment">#æ­¤æ—¶å†ç”¨é•œåƒIDæ¥åˆ é™¤è¿›è¡Œ,æˆåŠŸåˆ™ä¼šæ‰“å°å‡ºåˆ é™¤å„å±‚ä¿¡æ¯</span></span><br><span class="line"><span class="variable">$sudo</span> docker rmi -f d131e0fa2585     <span class="comment">#é•œåƒçš„å®¹å™¨ID,å‰3ä½å³å¯,ç„¶ååœ¨åˆ é™¤é•œåƒ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å¯¼å‡ºé•œåƒ</span></span><br><span class="line"><span class="variable">$sudo</span> docker <span class="built_in">export</span> 092 &gt; czabbix.tar</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¯¼å…¥é•œåƒ</span></span><br><span class="line"><span class="variable">$cat</span> czabbix.tar | docker import - <span class="built_in">test</span>:latest</span><br><span class="line">sha256:bbb9dbcaa5fff9c5b1b99c978df4dcaeeca3d2200d82fc466f5064931bd3bba2</span><br><span class="line">[root@zabbix ~]<span class="comment"># docker images</span></span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line"><span class="built_in">test</span>                latest              bbb9dbcaa5ff        14 seconds ago      202MB</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<p><strong>è¡¥å……ï¼šä½¿ç”¨nsenterå·¥å…·è¿›å…¥Dockerå®¹å™¨</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è·å–å®¹å™¨çš„PID</span></span><br><span class="line"><span class="variable">$PID</span>=$(docker inspect --format <span class="string">"&#123;&#123; .State.Pid&#125;&#125;"</span> &lt;container id&gt;)</span><br><span class="line"><span class="comment">#é€šè¿‡å¾—åˆ°çš„è¿™ä¸ªPID,å°±å¯ä»¥è¿æ¥åˆ°è¿™ä¸ªå®¹å™¨ï¼š</span></span><br><span class="line"><span class="variable">$nsenter</span> --target <span class="variable">$PID</span> --mount --uts --ipc --net --pid</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ‰‹åŠ¨è·å–docker container è¿è¡Œçš„PID</span></span><br><span class="line">[root@zabbix ~]$ docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED</span><br><span class="line">092d1b82c6a0        weiyigeek/czabbix   <span class="string">"/bin/bash"</span>         17 minutes ago      ck</span><br><span class="line">[root@zabbix ~]$ docker inspect --format <span class="string">"&#123;&#123; .State.Pid&#125;&#125;"</span> 092</span><br><span class="line">9030</span><br><span class="line">[root@zabbix ~]$ nsenter --target 9030 --mount --uts --ipc --net --pid</span><br><span class="line">[root@092d1b82c6a0 /]$ cat /etc/redhat-release</span><br><span class="line">CentOS Linux release 7.6.1810 (Core)</span><br><span class="line"><span class="comment">#æˆåŠŸè¿›å…¥è¯¥å®¹å™¨,9030å°±æ˜¯å®¹å™¨092d1b82c6a0çš„è¿›ç¨‹PID</span></span><br></pre></td></tr></table></figure></p>
<p><br></p>
<p><strong>Docker load ä¸ Docker import çš„æ¯”è¾ƒ</strong><br>æè¿°ï¼šå¯¼å…¥å®¹å™¨å’Œå¯¼å…¥é•œåƒæ˜¯å·®ä¸å¤šçš„ä½†æ˜¯å®é™…ä¸Šåˆæ˜¯æœ‰æ‰€åŒºåˆ«çš„</p>
<ul>
<li>loadï¼šå¯¼å…¥é•œåƒå­˜å‚¨æ–‡ä»¶åˆ°æœ¬åœ°é•œåƒåº“ è€Œ importï¼šå¯¼å…¥ä¸€ä¸ªå®¹å™¨å¿«ç…§åˆ°æœ¬åœ°é•œåƒåº“</li>
<li>å®¹å™¨å¿«ç…§ï¼šæ–‡ä»¶å°†ä¸¢å¤±æ‰€æœ‰çš„å†å²è®°å½•å’Œå…ƒæ•°æ®ä¿¡æ¯(å³ä¿ç•™å®¹å™¨å½“æ—¶çš„å¿«ç…§çŠ¶æ€),å¯¼å…¥çš„æ—¶å€™è¿˜éœ€è¦é‡æ–°åˆ¶å®šæ ‡ç­¾ç­‰å…ƒæ•°æ®ä¿¡æ¯;</li>
<li>é•œåƒå­˜å‚¨ï¼šæ–‡ä»¶å°†ä¿å­˜å®Œæ•´çš„è®°å½•,å¹¶ä¸”ä½“ç§¯ä¹Ÿè¦å¤§;</li>
</ul>
<p><em>æ€»ç»“ï¼š</em></p>
<ul>
<li>å®¹å™¨çš„åç§°æ˜¯å”¯ä¸€æ€§çš„å¦‚æœä¸æŒ‡å®šåç§°,å°†ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªå®¹å™¨åç§°;</li>
<li>å®¹å™¨æ˜¯ç›´æ¥æä¾›åº”ç”¨æœåŠ¡çš„ç»„ä»¶,ä¹Ÿæ˜¯Dockerå®ç°å¿«é€Ÿå¯åœå’Œé«˜æ•ˆæœåŠ¡å™¨æ€§èƒ½çš„åŸºç¡€</li>
<li>åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å› ä¸ºå®¹å™¨è‡ªèº«çš„è½»é‡æ€§,å»ºè®®åœ¨å®¹å™¨å‰æ®µå¼•å…¥HA(é«˜å¯é æ€§)æœºåˆ¶,å½“å‡ºç°é”™è¯¯çš„æ—¶å€™èƒ½å¿«é€Ÿåˆ‡æ¢åˆ°å…¶ä»–å®¹å™¨ä¹‹ä¸­,è¿˜èƒ½è‡ªåŠ¨é‡å¯æ•…éšœå®¹å™¨;</li>
</ul>
<p><br></p>
<h5 id="3-ä»“åº“-Repository"><a href="#3-ä»“åº“-Repository" class="headerlink" title="3.ä»“åº“ [Repository]"></a>3.ä»“åº“ [Repository]</h5><p>æè¿°ï¼šDocker ä»“åº“(Repository)ç±»ä¼¼äºä»£ç ä»“åº“,æ˜¯Dockeré›†ä¸­å­˜æ”¾é•œåƒæ–‡ä»¶çš„åœºæ‰€;è¯¥æ¦‚å¿µçš„å¼•å…¥ä¸ºDockeré•œåƒæ–‡ä»¶çš„åˆ†å‘å’Œç®¡ç†æä¾›äº†ä¾¿æ·çš„é€”å¾„ã€‚<br>ä»“åº“æ³¨å†Œåœ°å€:<a href="https://hub.docker.com/" target="_blank" rel="noopener">https://hub.docker.com/</a><br>å®‰è£…å¸®åŠ©æ–‡æ¡£:<a href="http://www.widuu.com/docker/installation/ubuntu.html" target="_blank" rel="noopener">http://www.widuu.com/docker/installation/ubuntu.html</a></p>
<p>æ³¨å†ŒæœåŠ¡å™¨æ˜¯å­˜æ”¾ä»“åº“çš„åœ°æ–¹,å…¶ä¸Šå¾€å¾€å­˜æ”¾ç€å¤šä¸ªä»“åº“,æ¯ä¸ªä»“åº“é›†ä¸­å­˜æ”¾æŸä¸€ç±»é•œåƒ,å¾€å¾€åŒ…æ‹¬å¤šä¸ªé•œåƒæ–‡ä»¶,é€šè¿‡ä¸åŒçš„æ ‡ç­¾[TAG]æ¥è¿›è¡ŒåŒºåˆ†;</p>
<ul>
<li>ç›®å‰æœ€å¤§çš„å…¬å¼€ä»“åº“æ˜¯ Docker Hub å­˜æ”¾äº†æ•°é‡åºå¤§çš„é•œåƒæä¾›ç”¨æˆ·ä¸‹è½½</li>
<li>å›½å†…çš„å…¬å¼€ä»“åº“åŒ…æ‹¬Docker Poolç­‰ç­‰å¯ä»¥æä¾›ç¨³å®šçš„å›½å†…è®¿é—®ã€‚</li>
</ul>
<p>ä¾‹å¦‚:å¯¹äºä»“åº“åœ°å€dl.dockerpool.com/ubuntuæ¥è¯´,dl.dockerpool.comæ˜¯æ³¨å†ŒæœåŠ¡å™¨,ubuntuæ˜¯ä»“åº“å;<br><figure class="image-box">
                <a rel=1.Dockerå­¦ä¹ ä¹‹åŸºç¡€çŸ¥è¯† href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190505225957.png" target="_blank" title="WeiyiGeek.ä»“åº“æ³¨å†ŒæœåŠ¡å™¨" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2019/20190505225957.png" alt="WeiyiGeek.ä»“åº“æ³¨å†ŒæœåŠ¡å™¨" title="" class=""></a>
                <p>WeiyiGeek.ä»“åº“æ³¨å†ŒæœåŠ¡å™¨</p>
            </figure></p>
<p>Docker ä»“åº“åˆ†ç±»ï¼š</p>
<ul>
<li>å…¬å¼€ä»“åº“(Public)</li>
<li>ç§æœ‰ä»“åº“(Private)</li>
</ul>
<p><em>å®˜æ–¹ä¸ç”¨æˆ·æä¾›çš„é•œåƒæ¯”è¾ƒï¼š</em></p>
<ul>
<li>å®˜æ–¹ï¼šcentos ç”±Dockerç»´æŠ¤çš„åŸºç¡€æˆ–æ ¹é•œåƒ;</li>
<li>ä¸ªäººï¼šuser/centos è¡¨ç¤ºç”±userç”¨æˆ·ç»´æŠ¤çš„centosåŸºç¡€é•œåƒ;</li>
</ul>
<p>é•œåƒä»“åº“æ“ä½œå¸¸ç”¨å‘½ä»¤:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">docker login   <span class="comment">#è¿æ¥å¹¶åˆå§‹åŒ–hubä»“åº“ éœ€è¦è¾“å…¥ç”¨æˆ·åå’Œå¯†ç è®¤è¯,ç„¶åå­˜æ”¾äº/root/.docker/config.json æ–‡ä»¶ä¸­</span></span><br><span class="line">docker pull [repository]  <span class="comment">#ä¸‹è½½æŒ‡å®šä»“åº“åˆ°æœ¬åœ°</span></span><br><span class="line">docker push [imges]</span><br><span class="line"></span><br><span class="line"><span class="comment">#å®ä¾‹</span></span><br><span class="line"><span class="variable">$docker</span> pull dl.dockerpool.com:5000/ubuntu:12.04 <span class="comment">#è¿æ¥å…¶ä»–çš„æ³¨å†ŒæœåŠ¡å™¨</span></span><br><span class="line"><span class="variable">$docker</span> images</span><br><span class="line"><span class="variable">$docker</span> tag dl.dockerpool.com:5000/ubuntu:12.04 ubuntu:12.04   <span class="comment">#æ›´æ–°æ ‡ç­¾ä¸å®˜æ–¹æ ‡ç­¾ä¿æŒä¸€è‡´</span></span><br><span class="line"><span class="variable">$docker</span> push dl.dockerpool.com:5000/ubuntu:12.04  <span class="comment">#ä¸Šä¼ åˆ°ç§æœ‰é•œåƒ</span></span><br></pre></td></tr></table></figure></p>
<p><br></p>
<p><strong>ï¼ˆ1ï¼‰åˆ›å»ºå’Œä½¿ç”¨ç§æœ‰ä»“åº“ï¼š</strong><br>æœ€å¿«æ·è¿˜æ˜¯æ­å»ºæœ¬åœ°çš„ä»“åº“æœåŠ¡å™¨(æ³¨æ„ï¼šé…ç½®ä¸å½“ä¼šå¯¼è‡´æ¼æ´)<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -d -p 5000:5000 registry</span><br><span class="line"><span class="comment">#é»˜è®¤æƒ…å†µä¸‹ä»“åº“åˆ›å»ºåœ¨å®¹å™¨çš„/tmp/registerç›®å½•ä¸‹,-v é€šè¿‡é•œåƒæ–‡ä»¶å­˜æ”¾åœ¨å®¿ä¸»æœºæœ¬åœ°çš„æŒ‡å®šè·¯å¾„/opt/data/registryä¸Š;</span></span><br><span class="line">$ docker run -d -p 5000:5000 -v /opt/data/registry:/tmp/registry registry </span><br><span class="line"><span class="comment"># -d:å®¹å™¨å¯åŠ¨åä¼šè¿›å…¥åå°,ç”¨æˆ·æ— æ³•çœ‹åˆ°å®¹å™¨ä¸­çš„ä¿¡æ¯.</span></span><br><span class="line"><span class="comment"># -p:æŒ‡å®šä»“åº“é•œåƒçš„ç«¯å£.</span></span><br><span class="line"><span class="comment"># -v:å°†é•œåƒçš„å­˜æ”¾ä½ç½®æ”¾åœ¨æœ¬åœ°æŒ‡å®šçš„è·¯å¾„ä¸Š.</span></span><br></pre></td></tr></table></figure><br>æ­¤æ—¶ä¼šåœ¨æœ¬åœ°å¯åŠ¨ä¸€ä¸ªç§æœ‰ä»“åº“æœåŠ¡,ç›‘å¬ç«¯å£ä¸º5000; æ›´æ–°æ ‡ç­¾æœ¬åœ°ä»“åº“åœ°å€å¹¶ä¸Šä¼ åˆ°ç§æœ‰ä»“åº“ä¹‹ä¸­ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$docker</span> tag ubuntu:14.04 10.0.2.2:5000/<span class="built_in">test</span>  <span class="comment">#æ›´æ”¹é•œåƒçš„æ ‡ç­¾</span></span><br><span class="line"><span class="variable">$docker</span> pull 10.0.2.2:5000/<span class="built_in">test</span>        Â  Â  Â  <span class="comment">#ä¸‹è½½é•œåƒ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å¯ä»¥ä»¥è¿™ä¸ªæ¥æµ‹è¯•æ˜¯ä¸æ˜¯å­˜åœ¨docker 5000æœªæˆæƒè®¿é—®æ¼æ´</span></span><br><span class="line">$ curl http://10.0.2.2:5000/v1/search  <span class="comment">#ä¸Šä¼ æˆåŠŸåå¯ä»¥æŸ¥çœ‹åˆ°è¿”å›çš„jsonå­—ç¬¦ä¸²</span></span><br></pre></td></tr></table></figure>
<p><br></p>
<p><strong>ï¼ˆ2ï¼‰è‡ªåŠ¨åˆ›å»º[Automated Builds]</strong><br>è¯¥åŠŸèƒ½æ˜¯å¯¹äºéœ€è¦ç»å¸¸å‡çº§é•œåƒå†…ç¨‹åºæ¥è¯´ååˆ†çš„æ–¹ä¾¿,ç”¨æˆ·åˆ›å»ºé•œåƒå‘ç”Ÿæ›´æ”¹çš„æ—¶å€™è¿›è¡Œæ‰‹åŠ¨æ›´æ–°é•œåƒ,å¹¶èƒ½é€šè¿‡è‡ªåŠ¨åˆ›å»ºåŠŸèƒ½è·Ÿè¸ªç›®æ ‡ç½‘ç»œ,ä¸€æ—¦é¡¹ç›®å‘ç°æ–°çš„æäº¤åˆ™è‡ªåŠ¨æ‰§è¡Œåˆ›å»º;é…ç½®è‡ªåŠ¨åˆ›å»ºæ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ul>
<li>åˆ›å»ºç™»å½•Docker Hub ç»‘å®šGithub;</li>
<li>åœ¨Docker Hubä¸­é…ç½®ä¸€ä¸ªè‡ªåŠ¨åˆ›å»º</li>
<li>é€‰å–ä¸€ä¸ªç›®æ ‡ç½‘ç«™ä¸­çš„é¡¹ç›®(éœ€è¦Dockerfileå’Œåˆ†æ”¯)</li>
<li>æŒ‡å®šDockerfileçš„ä½ç½®å¹¶æäº¤åˆ›å»º,å¯ä»¥åœ¨â€è‡ªåŠ¨åˆ›å»ºé¡µé¢â€è·Ÿè¸ªæ¯æ¬¡åˆ›å»ºçš„çŠ¶æ€;</li>
</ul>
<p><em>æ€»ç»“ï¼š</em></p>
<ul>
<li>ä»“åº“ç®¡ç†é•œåƒçš„è®¾è®¡ç†è®ºä¸Gitå·®ä¸å¤š,å·¥ä½œæµç¨‹ä¸ºæ–‡ä»¶åˆ†å‘å’Œåˆä½œå¸¦æ¥çš„ä¼—å¤šä¼˜åŠ¿ã€‚</li>
</ul>

        </div>

         
          <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-9134434519967436" data-ad-slot="7905848205"></ins>
        
  
        
  <hr>
  <p> æ¬¢è¿å„ä½å¿—åŒé“åˆçš„æœ‹å‹ä¸€èµ·å­¦ä¹ äº¤æµï¼Œå¦‚æ–‡ç« æœ‰è¯¯è¯·åœ¨ä¸‹æ–¹ç•™ä¸‹æ‚¨å®è´µçš„ç»éªŒçŸ¥è¯†ï¼Œä¸ªäººé‚®ç®±åœ°å€<b style="color:#ff654e"><code>ã€master#weiyigeek.topã€‘</code></b>æˆ–è€…ä¸ªäººå…¬ä¼—å·<b style="color:#ff654e"><code>ã€WeiyiGeekã€‘</code></b>è”ç³»æˆ‘ã€‚ </p>

  <p> æ›´å¤šæ–‡ç« æ¥æºäº<b style="color:#03a9f4">ã€WeiyiGeek Blog - ä¸ºäº†èƒ½åˆ°è¿œæ–¹ï¼Œè„šä¸‹çš„æ¯ä¸€æ­¥éƒ½ä¸èƒ½å°‘ã€‘</b>, ä¸ªäººé¦–é¡µåœ°å€( <a style="color: #03a9f4;" href="https://weiyigeek.top" target="_blank"> https://weiyigeek.top </a> )</p>

  <p>ä¸“æ ä¹¦å†™ä¸æ˜“ï¼Œå¦‚æœæ‚¨è§‰å¾—è¿™ä¸ªä¸“æ è¿˜ä¸é”™çš„ï¼Œè¯·ç»™è¿™ç¯‡ä¸“æ  <b style="color: red;">ã€ç‚¹ä¸ªèµã€æŠ•ä¸ªå¸ã€æ”¶ä¸ªè—ã€å…³ä¸ªæ³¨ï¼Œè½¬ä¸ªå‘ã€‘(äººé—´äº”å¤§æƒ…)</b>ï¼Œè¿™å°†å¯¹æˆ‘çš„è‚¯å®šï¼Œè°¢è°¢ï¼ã€‚</p>

  <div>
    <img src="https://www.weiyigeek.top/img/weiyigeek.jpg" class="img-responsive" alt="WeiyiGeek-banner">
  </div>

  <ul style="font-weight: bolder;">
    <li>
      <p><span style="color: #03a9f4">echo&nbsp;&nbsp;"ã€ç‚¹ä¸ªèµã€‘ï¼ŒåŠ¨åŠ¨ä½ é‚£ç²—å£®çš„æ‹‡æŒ‡æˆ–è€…èŠŠèŠŠç‰æ‰‹ï¼Œäº²ï¼"</span></p>
    </li>
    <li>
      <p><span style="color: #ff9201">printf("%s",&nbsp;"ã€æŠ•ä¸ªå¸ã€‘ï¼Œä¸‡æ°´åƒå±±æ€»æ˜¯æƒ…ï¼ŒæŠ•ä¸ªç¡¬å¸è¡Œä¸è¡Œï¼Œäº²ï¼")</span></p>
    </li>
    <li>
      <p><span style="color: #02a2ff">fmt.Printf("ã€æ”¶ä¸ªè—ã€‘ï¼Œé˜…åå³ç„šä¸åƒç°ï¼Œäº²ï¼")&nbsp;&nbsp;</span></p>
    </li>
    <li>
      <p><span style="color:red">console.info("ã€è½¬ä¸ªå‘ã€‘ï¼Œè®©æ›´å¤šçš„å¿—åŒé“åˆçš„æœ‹å‹ä¸€èµ·å­¦ä¹ äº¤æµï¼Œäº²ï¼")</span></p>
    </li>
    <li>
      <p><span style="color: #ff654e">System.out.println("ã€å…³ä¸ªæ³¨ã€‘ï¼Œåç»­æµè§ˆæŸ¥çœ‹ä¸è¿·è·¯å“Ÿï¼Œäº²ï¼")</span></p>
    </li>
  </ul>

  <div>
    <img src="/img/wechat-search.png" class="img-responsive" alt="æ‰«æFollow(å…³æ³¨)WeiyiGeekå…¬ä¼—å·"  width="380" height="170">
    <img src="/img/wechat-app.png" class="img-responsive" alt="æ‰«æVisit(æµè§ˆ)æå®¢å…¨æ ˆä¿®ç‚¼å°ç¨‹åº"  width="385" height="170">
  </div>
  <hr>
  

  <blockquote class="post-copyright">
    <div class="content">
      
        
<span class="post-time">
    æœ€åæ›´æ–°æ—¶é—´ï¼š<time datetime="2022-09-27T14:25:52.216Z" itemprop="dateUpdated">2022-09-27 22:25:52</time>
</span><br>


        <span>æ–‡ç« åŸå§‹è·¯å¾„ï¼š<a href="https://github.com/WeiyiGeek/blog/edit/master/source/_posts/è™šæ‹Ÿäº‘å®¹/äº‘å®¹å™¨/Docker/1.Dockerå­¦ä¹ ä¹‹åŸºç¡€çŸ¥è¯†.md" target="_blank" rel="noopener noreferrer">_posts/è™šæ‹Ÿäº‘å®¹/äº‘å®¹å™¨/Docker/1.Dockerå­¦ä¹ ä¹‹åŸºç¡€çŸ¥è¯†.md</a></span><br>
         <span class="copy-copyright">è½¬è½½æ³¨æ˜å‡ºå¤„ï¼ŒåŸæ–‡åœ°å€ï¼š<a href="/2019/5-3-455.html" target="_blank" rel="external">https://blog.weiyigeek.top/2019/5-3-455.html</a></span><br>æœ¬ç«™æ–‡ç« å†…å®¹éµå¾ª <a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">çŸ¥è¯†å…±äº« ç½²å - éå•†ä¸šæ€§ - ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…åè®®</a> 
    </div>
    <footer>
      <a href="https://blog.weiyigeek.top">
        <img src="/img/avatar.jpg" alt="WeiyiGeek">
        WeiyiGeek
      </a>
    </footer>
  </blockquote>


        
            <div class="page-reward">
  <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-rectangle waves-light">ğŸ‘ é’Ÿæ„ä½œè€…</a>
</div>
            
        
        <div class="post-footer">
            
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Docker/" rel="tag">Docker</a></li></ul>

            <div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://blog.weiyigeek.top/2019/5-3-455.html&title=ã€Š1.Dockerå­¦ä¹ ä¹‹åŸºç¡€çŸ¥è¯†ã€‹ â€” WeiyiGeek Blog&pic=https://blog.weiyigeek.top/img/avatar.jpg" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.weiyigeek.top/2019/5-3-455.html&title=ã€Š1.Dockerå­¦ä¹ ä¹‹åŸºç¡€çŸ¥è¯†ã€‹ â€” WeiyiGeek Blog&source=[TOC]" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.weiyigeek.top/2019/5-3-455.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€Š1.Dockerå­¦ä¹ ä¹‹åŸºç¡€çŸ¥è¯†ã€‹ â€” WeiyiGeek Blog&url=https://blog.weiyigeek.top/2019/5-3-455.html&via=https://blog.weiyigeek.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://blog.weiyigeek.top/2019/5-3-455.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>

        </div>
        
          <!-- è¯„è®ºç»„ä»¶ -->


<div id="gitalk-container"></div>
<script type="text/javascript" src="/js/plugins/gitalk.min.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/custom/gitalk.init.js?v=1.6.6"></script>
        
    </div>
    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="prev">
      <a href="/2019/5-5-192.html" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">zabbixæ¨¡å—é…ç½®å­¦ä¹ </h4>
      </a>
    </div>
  

  
    <div class="next">
      <a href="/2019/5-1-214.html" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">Linuxç³»ç»Ÿå…¥é—¨å­¦ä¹ åŸºç¡€çŸ¥è¯†</h4>
      </a>
    </div>
  
</nav>


    
    
        <aside class="post-widget">
            <nav class="post-toc-wrap" id="post-toc">
                <strong>ç›®å½•</strong>
                <ol class="post-toc"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#0x00-Docker-å¿«é€Ÿå…¥é—¨"><span class="post-toc-number">1.</span> <span class="post-toc-text">0x00 Docker å¿«é€Ÿå…¥é—¨</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#0x01-Docker-å®‰è£…å®è·µ"><span class="post-toc-number">2.</span> <span class="post-toc-text">0x01 Docker å®‰è£…å®è·µ</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#0x02-Docker-æ ¸å¿ƒæ¦‚å¿µ"><span class="post-toc-number">3.</span> <span class="post-toc-text">0x02 Docker æ ¸å¿ƒæ¦‚å¿µ</span></a></li></ol>
            </nav>
            <div class="toc-bar"><div>
        </aside>
    


    <!-- æ”¯ä»˜å®å¾®ä¿¡æ–‡ç« èµèµ -->
    
      <div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        å¦‚æœæ­¤ç¯‡æ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¿˜è¯·æ”¯æŒä¸€ä¸‹åšä¸»å“Ÿ, è°¢è°¢å„ä½çœ‹å‹â™¥!
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardwechat" src="/img/reward-wechat.jpg" height="250" height="250" alt="å¾®ä¿¡æ‰“èµäºŒç»´ç ">
            <img id="rewardalipay" src="/img/reward-alipay.png" height="250" height="250" alt="æ”¯ä»˜å®æ‰“èµäºŒç»´ç ">
        </div>
        
        <label class="reward-toggle">
            <!-- <input id="rewardToggle" type="checkbox" class="reward-toggle-check" data-wechat="/img/reward-wechat.jpg" data-alipay="/img/reward-alipay.png"> -->
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">å¾®ä¿¡</span>
                <span class="reward-toggle-item alipay">æ”¯ä»˜å®</span>
            </div>
        </label>
        
    </div>
</div>

      

    <!-- å¾®ä¿¡å…¬ä¼—å·å…³æ³¨/æ–‡ç« ç‰ˆæƒå¤åˆ¶ -->
    
      <div id="btw-mask" style="position: fixed; top: 0px; right: 0px; bottom: 0px; left: 0px; opacity: 0.7; z-index: 999; background: rgb(0, 0, 0); display:none"></div>
<div id="btw-modal" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 360px; text-align: center; font-size: 13px; background: rgb(255, 255, 255); border-radius: 10px; z-index: 9999; font-family: PingFangSC-Regular, sans-serif;display:none">
<span id="btw-modal-close-btn" style="position: absolute; top: 5px; right: 15px; line-height: 1.8; font-size: 15px; cursor: pointer; opacity: 0.2; z-index: 9999; color: rgb(0, 0, 0); background: none; border: none; outline: none;">X</span>
<p id="btw-modal-header" style="margin-top: 40px; line-height: 1.8; font-size: 13px; ">
<b style="color:#6190e8;">ä½ å¥½æœ‹å‹,å¯ä»¥å…³ä¸ªæ³¨å—? â¤ <br> è¿™å°†æ˜¯æˆ‘æŒç»­æ›´æ–°æ–‡ç« çš„åŠ¨åŠ›æºæ³‰ï¼Œè°¢è°¢æ”¯æŒï¼(à¹‘â€²á´—â€µà¹‘) </b> <br> å¦‚ä¸æƒ³å…³æ³¨è¯·ç‚¹å‡»å³ä¸Šè§’çš„ã€Xã€‘<br>
<br>Method 1.Please visit <strong><a href="https://twitter.com/WeiyiGeek" target="_blank" rel="noopener" style="color: rgb(240, 65, 52);text-decoration:underline;">ã€My Twitterã€‘</a></strong>. There is an article verification code in the homepage.
<br>æ–¹å¼2.è¯·è®¿é—®æœ¬åšä¸»çš„Bç«™<strong><a href="https://space.bilibili.com/385802642" target="_blank" rel="noopener" style="color: rgb(240, 65, 52);text-decoration:underline;">ã€WeiyiGeekã€‘</a></strong>é¦–é¡µå…³æ³¨UPä¸»,<br>å°†è‡ªåŠ¨éšæœºè·å–è§£é”éªŒè¯ç ã€‚
<br>æ–¹å¼3.æ‰«ä¸€æ‰«ä¸‹æ–¹äºŒç»´ç ï¼Œå…³æ³¨æœ¬ç«™<strong>å®˜æ–¹å…¬ä¼—å·</strong><br>
å›å¤ï¼š<strong style="color: rgb(240, 65, 52);">éªŒè¯ç </strong>
å°†è·å–<strong style="color: rgb(240, 65, 52);">è§£é”(æœ‰æ•ˆæœŸ7å¤©)</strong>æœ¬ç«™æ‰€æœ‰æŠ€æœ¯æ–‡ç« å“Ÿ!</p>
<img src="/img/wechat-search.png" style="width: 300px; margin-top: 10px;">
<div id="btw-modal-input-code" style="margin-top: 20px; background: rgb(255, 255, 255);">
  <input id="btw-modal-input" type="number" minlength="4" maxlength="4" placeholder="è¯·è¾“å…¥éªŒè¯ç |Verification Code"
    style="width: 165px; height: 32px; line-height: 32px; padding: 0px 10px; margin: 0px 10px; font-size: 13px; text-rendering: auto; text-transform: none; cursor: text; outline: none; box-sizing: border-box; border: 1px solid rgb(221, 221, 221); -webkit-appearance: textfield; background-color: white; -webkit-rtl-ordering: logical;"/>
  <button id="btw-submit-btn" onclick="yzm_vertify()"
    style="padding: 0px 20px; height: 32px; font-size: 14px; outline: none; border: none; color: rgb(255, 255, 255); background: rgb(222, 104, 109); cursor: pointer;">æ
    äº¤</button> </div>
<p id="btw-footer" style="margin: 40px 0px 20px; color: rgb(153, 153, 153);">@WeiyiGeek - ä¸ºäº†èƒ½åˆ°è¿œæ–¹ï¼Œè„šä¸‹çš„æ¯ä¸€æ­¥éƒ½ä¸èƒ½å°‘</p>
</div>
        
</article>
</div>

    </main>
    <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9134434519967436" data-ad-slot="3629930963" data-ad-format="auto" data-full-width-responsive="true"></ins>
    <footer class="footer ">
    
    <div class="top">
        
            <p>
    <span>Linksï¼š</span>
    
    <span class="blogroll-item">
        <a href="https://weiyigeek.top" target="_blank">https://weiyigeek.top</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.weiyigeek.top" target="_blank">https://blog.weiyigeek.top</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://weiyigeek.top/img/wechat-search.png" target="_blank">å…¬ä¼—è´¦å·</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://space.bilibili.com/385802642/article" target="_blank">å“”å“©å“”å“©ä¸“æ </a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://github.com/weiyigeek" target="_blank">ä¸ªäººGithub</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://gitee.com/WeiyiGeek" target="_blank">ä¸ªäººGitee</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.zhihu.com/people/weiyiSec" target="_blank">ä¸ªäººçŸ¥ä¹</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.cnblogs.com/WeiyiGeek" target="_blank">åšå®¢å›­</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://my.oschina.net/weiyigeek" target="_blank">OSCHINA</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.toutiao.com/c/user/token/MS4wLjABAAAAqcPSoMqfctaEqJpGSF775eeCjWkrop4AOyLITdMx-L78F5iXzfQcSRM5sY4dq3wR" target="_blank">ä»Šæ—¥å¤´æ¡</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.csdn.net/u013072756?type=lately" target="_blank">CSDN</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.jianshu.com/u/5199a1104739" target="_blank">ç®€ä¹¦</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://cloud.tencent.com/developer/user/1389665/articles" target="_blank">è…¾è®¯äº‘+äº‘ç¤¾åŒº</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://cuttlefish.baidu.com/shop/75c5dbd8d15abe23482f4d40" target="_blank">ç™¾åº¦æ–‡åº“</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://author.baidu.com/home?from=blog&app_id=1726736601523415" target="_blank">ITæå®¢çŸ¥è¯†åˆ†äº«</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.51cto.com/weiyigeek" target="_blank">51CTOåšå®¢</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://juejin.cn/user/122767337595934" target="_blank">æ˜é‡‘</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://weibo.com/a/hot/7622022703618049_1.html" target="_blank">å¾®åšæ–‡ç« </a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.xiaohongshu.com/user/profile/627c98bb000000001000e7ba" target="_blank">å°çº¢ä¹¦</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://segmentfault.com/u/weiyigeek" target="_blank">Segmentfault</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.douyin.com/user/MS4wLjABAAAAMSBdMja6XLsdmzafb0RNbFeBemIOk38K1PaOClZeI1Q" target="_blank">æŠ–éŸ³ä¸»é¡µ</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.kuaishou.com/profile/3xfbrsrhd2i69x9" target="_blank">å¿«æ‰‹ä¸»é¡µ</a>
    </span>
    
</p>

        
    </div>
    
    <div class="bottom">
      <p>
        <span>WeiyiGeek &copy; 2018 - 2022 <a href="https://weiyigeek.top" target="_blank" rel="noopener">weiyigeek.top</a> All rights reserved.å”¯ä¸€æå®¢ITçŸ¥è¯†åˆ†äº« ç‰ˆæƒæ‰€æœ‰ </span>
        
        <span>
          Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/weiyigeek" target="_blank">mellow</a>
        </span>
        
        <br/>è®¿é—®ç»Ÿè®¡
        <span><a href="/sitemap.xml" target="_blank" rel="Sitemaps-ç«™ç‚¹åœ°å›¾">Sitemaps</a> </span>
        <span><a href="/baidusitemap.xml" target="_blank" rel="baidusitemaps-ç™¾åº¦ç«™ç‚¹åœ°å›¾">ç«™ç‚¹åœ°å›¾</a> </span>
        <!-- 
  -->
        <br/>ICPå¤‡æ¡ˆå·<span><a href="https://beian.miit.gov.cn" target="_blank">æ¸ICPå¤‡2022003447å·</a></span>
        <br/>
        <div id="cc-myssl-id">
          <a href="https://myssl.com/blog.weiyigeek.top?from=mysslid" target="_blank" rel="noopener"><img src="https://static.myssl.com/res/images/myssl-id1.png" alt="MySSLå®‰å…¨è®¤è¯" style="max-height:50px;display:block;margin:0 auto"></a>
        </div>
      </p>
    </div>
</footer>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>


<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://blog.weiyigeek.top/2019/5-3-455.html&title=ã€Š1.Dockerå­¦ä¹ ä¹‹åŸºç¡€çŸ¥è¯†ã€‹ â€” WeiyiGeek Blog&pic=https://blog.weiyigeek.top/img/avatar.jpg" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.weiyigeek.top/2019/5-3-455.html&title=ã€Š1.Dockerå­¦ä¹ ä¹‹åŸºç¡€çŸ¥è¯†ã€‹ â€” WeiyiGeek Blog&source=[TOC]" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.weiyigeek.top/2019/5-3-455.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€Š1.Dockerå­¦ä¹ ä¹‹åŸºç¡€çŸ¥è¯†ã€‹ â€” WeiyiGeek Blog&url=https://blog.weiyigeek.top/2019/5-3-455.html&via=https://blog.weiyigeek.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://blog.weiyigeek.top/2019/5-3-455.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>æ‰«ä¸€æ‰«ï¼Œåˆ†äº«åˆ°å¾®ä¿¡</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACI0lEQVR42u3aQW7DMAwEwPz/0+kDCitL0mlhaXwq3MTW5CAsKb5e8fW+uPL/rj959d2bLwwMjMcyksetl7J+5tWd35+vsjEwME5jVB991yeTO+u1YWBgYEziXS8IYmBgYEwYvQ20GhkxMDAwJkXsGpMXt/9ci2NgYDyQkXfd//7vr5xvYGBgPIoxKTXzKNnb0AtPwMDA2JrRO8Jch8U1uPfTREETAwNjU0beUMtHK9YtuXxxhWEODAyMYxhJ+z5pmU2OCqoHBhgYGCczknZ/PjZRjZt50w0DA+McRl6I5oea9x5IlBttGBgYGzGq4ay61eZxcxIuMTAw9mYkC+3dqZbB+Uo+REMMDIztGJNRiWqhWw18zRIXAwNjU8YktOXjEQnvw2a6/i4GBsbWjPxlvcDXa+EVFo2BgbE1o1o65gNbeSMvv4+BgXEmo9cmK79gvMWPTjsxMDC2YCQFZL693jWWkR+OYmBgnMDII1reCMsL3bu2fgwMjHMY1eGG6qHCfBTs8l0YGBgHMHqB79uNtsKBAQYGxtaMailbbYFVjx+qzUEMDIy9Ge/iNQmF1VZdoRjGwMDYmjHfrSdjZPNg2px6w8DAeCAj2WRzfa9wHWVYDAyMYxhJdEu23erAxF1DGBgYGBi9l/UK2t5Pg4GBgZEEvmr7rNe8uy0aYmBgPJCRF7HVln0SEHsHCaN2GwYGxqMYk15W0tCvLiL/mTAwMA5g/AC4fzzi2jWVNwAAAABJRU5ErkJggg==" alt="å¾®ä¿¡åˆ†äº«äºŒç»´ç ">
</div>


    
    <!-- main-js -->
<script type="text/javascript" src="/js/jquery/2.1.0-jquery.min.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/plugins/fastclick.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/plugins/ios-orientationchange-fix.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/jquery/3.5.2-jquery.fancybox.min.js?v=1.6.6"></script>
<!--  //cdn.bootcss.com/node-waves/0.7.4/waves.min.js -->
<script type="text/javascript" src="/js/node-waves/0.7.4-waves.min.js?v=1.6.6"></script> 

<script type="text/javascript" src="/js/method.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/blog.js?v=1.6.6"></script>

<!-- third-party -->
<script type="text/javascript" src="/js/plugins/local_search.js?v=1.6.6"></script>
<script type="text/javascript">
	var search_path = "search.xml";
	if (search_path.length === 0) { search_path = "search.xml";}
	var path = "/" + search_path;
	searchFunc(path, "local-search-input", "local-search-result");
</script> 

<script> (adsbygoogle = window.adsbygoogle || []).push({});</script>    


<!-- <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> --> 


  


<script>
  var _hmt = _hmt || [];
  (function() {
    // ç™¾åº¦ç»Ÿè®¡
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?53923c4b5560739bc0ed61e183be6acf";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();
</script>
 


<!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
            processEscapes: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.staticfile.org/mathjax/2.7.9/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
 
<script>
    (function() {
        var OriginTitile = document.title, titleTime;
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                document.title = 'WeiyiGeek Blog-å…³æ³¨äºç½‘ç»œå®‰å…¨_ç‰©è”ç½‘å®‰å…¨å¼€å‘_ç½‘ç»œå®‰å…¨è¿ç»´-å­¦ä¹ å¿ƒå¾—åˆ†äº«';
                clearTimeout(titleTime);
            } else {
                document.title = '(ã¤ã‚§âŠ‚)å’¦!åˆå¥½äº†!';
                titleTime = setTimeout(function() {
                    document.title = OriginTitile;
                },2000);
            }
        });
    })();
</script>
 

     <script type="text/javascript" src="/js/custom/copytips.js?v=1.6.6"></script> 
</body>
</html>