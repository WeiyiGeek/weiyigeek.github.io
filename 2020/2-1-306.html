<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="content-language" content="zh-CN"/>
    <meta name="author" content="WeiyiGeek" />
    <meta name="msvalidate.01" content="5C552FB1D885E0E11D2957EC958C8018" />
    <meta name="shenma-site-verification" content="4c655e91c76be0a93c1b6954c666c9d6_1649049085"/>
    <meta name="bytedance-verification-code" content="lKs4FqwCHSJ3A/c5tT7X" />
    <meta name="sogou_site_verification" content="OC65iET6Bk" />
    
    <title>ğŸŒ JDBCåŸºç¡€å…¥é—¨ä½¿ç”¨|WeiyiGeek Blog|å”¯ä¸€æå®¢Geek-ITç½‘ç»œå®‰å…¨è¿ç»´å¼€å‘æŠ€æœ¯çŸ¥è¯†åˆ†äº«-åšå®¢ç«™ç‚¹</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    
    <meta name="keywords" content="JDBC">
    <meta name="Description" content="WeiyiGeek-å”¯ä¸€æå®¢åšå®¢ç«™ç‚¹,å…³æ³¨äºç½‘ç»œå®‰å…¨è¿ç»´,Webå®‰å…¨å¼€å‘,IOTç‰©è”ç½‘å®‰å…¨å¼€å‘,åº”ç”¨å¼€å‘,åˆ†äº«æŠ€æœ¯å­¦ä¹ çŸ¥è¯†ä¸å…¥å‘è§£å†³,æå‡ç½‘ç»œå®‰å…¨æŠ€æœ¯ä¸è‡ªèº«æŠ€æœ¯èƒ½åŠ›,ç«‹å¿—ç»´æŠ¤å¤§ä¼—ç½‘ç»œå®‰å…¨ä¸ºå·±ä»»,åšä¸€ä¸ªå¯¹å›½å®¶æœ‰ç”¨çš„äºº,ä¸ºå®ç°ä¸­åæ°‘æ—ä¼Ÿå¤§å¤å…´çš„ä¸­å›½æ¢¦ä¸æ‡ˆå¥‹æ–—">
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="/css/jquery/3.5.2-jquery.fancybox.min.css?v=1.6.6" />
    <link rel="stylesheet" href="/css/style.css?v=1.6.6">
    <!--  -->
     <script type="text/javascript" src="/js/custom/articlecost.js?v=1.6.6"></script> 
    <link rel="stylesheet" href="/css/third-party/gitalk.css?v=1.6.6"> 
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9134434519967436" crossorigin="anonymous"></script>    
    <script type="text/javascript">
        // Data Center
        var DC = {
          reward:	true,
          lv: JSON.parse('{"enable":false,"app_id":null,"app_key":null,"icon":true}'),
          v: JSON.parse('{"enable":false,"appid":null,"appkey":null,"notify":true,"verify":true,"placeholder":"give me some sugers plz...","avatar":"wavatar"}')
        };
    </script>
    <script type="text/javascript">window.lazyScripts=[];</script>
<meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="WeiyiGeek Blog" type="application/atom+xml">
</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="">
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap">
      
      <img src="/img/brand.jpg" class="brand-bg" alt="WeiyiGeek-backgroud">
      
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg" alt="WeiyiGeek-å¤´åƒ">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">WeiyiGeek</h5>
          <a href="mailto:master@weiyigeek.top" title="master@weiyigeek.top" class="mail">
            <span>m</span><span>a</span><span>s</span><span>t</span><span>e</span><span>r</span><span>@</span><span>w</span><span>e</span><span>i</span><span>y</span><span>i</span><span>g</span><span>e</span><span>e</span><span>k</span><span>.</span><span>t</span><span>o</span><span>p</span>
          </a>
        </hgroup>
        
        <ul class="menu-link">
          
              <li>
                <a href="https://weiyigeek.top/img/wechat-search.png" target="_blank">
                  <i class="icon icon-lg icon-wechat"></i>
                </a>
              </li>
            
              <li>
                <a href="https://github.com/weiyigeek" target="_blank">
                  <i class="icon icon-lg icon-github"></i>
                </a>
              </li>
            
              <li>
                <a href="https://t.me/WeiyiGeek" target="_blank">
                  <i class="icon icon-lg icon-telegram"></i>
                </a>
              </li>
            
              <li>
                <a href="https://twitter.com/WeiyiGeek" target="_blank">
                  <i class="icon icon-lg icon-twitter"></i>
                </a>
              </li>
            
              <li>
                <a href="https://weibo.com/615643678" target="_blank">
                  <i class="icon icon-lg icon-weibo"></i>
                </a>
              </li>
            
        </ul>
        
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                é¦–é¡µ
              </a>
            </li>
        
            <li class="">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                æ–‡ç« åˆ†ç±»
              </a>
            </li>
        
            <li class="">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                æ–‡ç« æ ‡ç­¾
              </a>
            </li>
        
            <li class="">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                æ–‡ç« å½’æ¡£
              </a>
            </li>
        
            <li class="">
              <a href="/books"  >
                <i class="icon icon-lg icon-book"></i>
                å­¦ä¹ ä¹¦ç±
              </a>
            </li>
        
            <li class="">
              <a href="/about"  >
                <i class="icon icon-lg icon-user"></i>
                å…³äºä½œè€…
              </a>
            </li>
        
            <li class="">
              <a href="/links"  >
                <i class="icon icon-lg icon-link"></i>
                ç«™ç‚¹å¯¼èˆª
              </a>
            </li>
        
            <li class="">
              <a href="https://weiyigeek.top/img/wechat-search.png" target="_blank" >
                <i class="icon icon-lg icon-wechat"></i>
                å…¬ä¼—è´¦å·
              </a>
            </li>
        
            <li class="">
              <a href="https://space.bilibili.com/385802642" target="_blank" >
                <i class="icon icon-lg icon-youtube-play"></i>
                å“”å“©å“”å“©
              </a>
            </li>
        
            <li class="">
              <a href="https://github.com/weiyigeek" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="">
              <a href="https://twitter.com/WeiyiGeek" target="_blank" >
                <i class="icon icon-lg icon-twitter"></i>
                Twitter
              </a>
            </li>
        
            <li class="">
              <a href="https://weibo.com/615643678" target="_blank" >
                <i class="icon icon-lg icon-weibo"></i>
                Weibo
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row clearfix">
        <a href="javascript:;" class="header-icon pull-left waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">
            <span>JDBCåŸºç¡€å…¥é—¨ä½¿ç”¨</span>
            
        </div>

        
        <a href="javascript:;" id="site_search_btn" class="header-icon pull-right waves-effect waves-circle waves-light">
            <i class="icon icon-lg icon-search"></i>
        </a>
        

        
            <a href="/atom.xml" class="header-icon pull-right waves-effect waves-circle waves-light">
                <i class="icon icon-lg icon-rss"></i>
            </a>
        
    </div>
</header>
<header class="content-header post-header">
    <img src="/img/banner.jpg" class="header-bg" alt="æ–‡ç« å¤´éƒ¨èƒŒæ™¯">
    <div class="container fade-scale">
        <h1 class="title">JDBCåŸºç¡€å…¥é—¨ä½¿ç”¨</h1>
        <h5 class="subtitle">
            
                <time datetime="2020-02-01T05:34:30.000Z" itemprop="datePublished" class="page-time">
  2020-02-01
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Java/">Java</a></li></ul>


            
        </h5>
        
    </div>
    

</header>

<div id="site_search">
    <div class="search-title clearfix">
        <span class="pull-left">
          <i class="icon icon-lg icon-search"></i>
        </span>
        <input type="text" id="local-search-input" name="q" results="0" placeholder="search my blog..." class="form-control pull-left"/>
        <a href="javascript:;" class="close pull-right waves-effect waves-circle waves-light">
          <i class="icon icon-lg icon-close"></i>
        </a>
    </div>
    <div id="local-search-result"></div>
</div>


<div class="container body-wrap">
  <article id="post-ç¼–ç¨‹ä¸–ç•Œ/JavaWeb/3.JDBC/JDBCåŸºç¡€å…¥é—¨ä½¿ç”¨"
  class="post-article article-type-post" itemprop="blogPost">
    <div class="post-card">
        <h1 class="post-card-title">JDBCåŸºç¡€å…¥é—¨ä½¿ç”¨</h1>
        <div class="post-meta">
            <time class="post-time" title="2020-02-01 13:34:30" datetime="2020-02-01T05:34:30.000Z"  itemprop="datePublished">2020-02-01</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Java/">Java</a></li></ul>



            

            


            
        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            
            <p>[TOC]</p>
<a id="more"></a>
<h4 id="0x00-å‰è¨€åŸºç¡€"><a href="#0x00-å‰è¨€åŸºç¡€" class="headerlink" title="0x00 å‰è¨€åŸºç¡€"></a>0x00 å‰è¨€åŸºç¡€</h4><p>ä»€ä¹ˆæ˜¯JDBCé©±åŠ¨?<br>ç­”:æ•°æ®åº“è¿æ¥<code>JAVA Database Connectivity java</code></p>
<p><em>ä¸ºä»€ä¹ˆä¼šå‡ºç°JDBC?</em><br>SUNå…¬å¸æä¾›çš„ä¸€ç§æ•°æ®åº“è®¿é—®è§„åˆ™ã€è§„èŒƒ, ç”±äºæ•°æ®åº“ç§ç±»è¾ƒå¤šï¼Œå¹¶ä¸”javaè¯­è¨€ä½¿ç”¨æ¯”è¾ƒå¹¿æ³›ï¼Œsunå…¬å¸å°±æä¾›äº†ä¸€ç§è§„èŒƒï¼Œè®©å…¶ä»–çš„æ•°æ®åº“æä¾›å•†å»å®ç°åº•å±‚çš„è®¿é—®è§„åˆ™ã€‚ æˆ‘ä»¬çš„javaç¨‹åºåªè¦ä½¿ç”¨sunå…¬å¸æä¾›çš„jdbcé©±åŠ¨å³å¯ã€‚</p>
<figure class="image-box">
                <a rel=JDBCåŸºç¡€å…¥é—¨ä½¿ç”¨ href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200315140159.png" target="_blank" title="WeiyiGeek.JDBC" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200315140159.png" alt="WeiyiGeek.JDBC" title="" class=""></a>
                <p>WeiyiGeek.JDBC</p>
            </figure>
<p><br></p>
<h5 id="é©±åŠ¨ä¸‹è½½å’Œä½¿ç”¨"><a href="#é©±åŠ¨ä¸‹è½½å’Œä½¿ç”¨" class="headerlink" title="é©±åŠ¨ä¸‹è½½å’Œä½¿ç”¨"></a>é©±åŠ¨ä¸‹è½½å’Œä½¿ç”¨</h5><p>æè¿°:åœ¨åˆ©ç”¨JAVAçš„JDBCè¿æ¥åˆ°MySQLæˆ–è€…å…¶å®ƒæ•°æ®åº“çš„æ—¶å€™,éœ€è¦åŠ è½½å…¶jaråŒ…åˆ°å·¥ç¨‹çš„libåº“ä¸­;</p>
<blockquote>
<p><strong>æ–¹å¼1:JDBCé©±åŠ¨åŒ…</strong></p>
</blockquote>
<p>MySQL8.xçš„JDBCé©±åŠ¨åŒ…ä¸‹è½½é¡µé¢: <a href="https://dev.mysql.com/downloads/connector/j/8.0.html" target="_blank" rel="noopener">https://dev.mysql.com/downloads/connector/j/8.0.html</a></p>
<figure class="image-box">
                <a rel=JDBCåŸºç¡€å…¥é—¨ä½¿ç”¨ href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200110114232.png" target="_blank" title="WeiyiGeek.å®˜ç½‘ä¸‹è½½JDBC" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200110114232.png" alt="WeiyiGeek.å®˜ç½‘ä¸‹è½½JDBC" title="" class=""></a>
                <p>WeiyiGeek.å®˜ç½‘ä¸‹è½½JDBC</p>
            </figure>
<p>MySQL JDBC API:<a href="https://dev.mysql.com/doc/connector-j/8.0/en/connector-j-reference-implementation-notes.html" target="_blank" rel="noopener">https://dev.mysql.com/doc/connector-j/8.0/en/connector-j-reference-implementation-notes.html</a></p>
<p>JAVAè¿æ¥æ•°æ®åº“çš„JDBCé©±åŠ¨å…³äºMySQL5.xå’ŒMySQL8.Xç‰ˆæœ¬:<br>æè¿°:MySQL 8.0 å¼€å§‹æ•°æ®åº“ç›¸æ¯”å¸¸ç”¨çš„ 5.X ç‰ˆæœ¬å‘ç”Ÿäº†æ¯”è¾ƒå¤§çš„å˜åŒ–ï¼Œæˆ‘ä»¬åœ¨é‡‡ç”¨JDBCè¿æ¥æ•°æ®åº“çš„è¿‡ç¨‹ä¸­ä¹Ÿç›¸åº”çš„å‘ç”Ÿå˜åŒ–æ¯”å¦‚<code>é©±åŠ¨åŒ…ç‰ˆæœ¬ï¼Œé©±åŠ¨åç§°</code>ç­‰ç­‰;<br>ç›´æ¥ä¸‹è½½åœ°å€:<a href="https://dev.mysql.com/downloads/file/?id=477058" target="_blank" rel="noopener">https://dev.mysql.com/downloads/file/?id=477058</a></p>
<ul>
<li>1.MySQL ç‰ˆæœ¬å’Œ mysql-connector-java ç‰ˆæœ¬å¯¹åº”å…³ç³»å¦‚ä¸‹:</li>
</ul>
<table>
<thead>
<tr>
<th>Connector/J version</th>
<th>Driver Type</th>
<th>JDBC version</th>
<th>MySQL Server version</th>
<th>Status</th>
</tr>
</thead>
<tbody>
<tr>
<td>5.1</td>
<td>4</td>
<td>3.0, 4.0, 4.1, 4.2</td>
<td>5.6<em>, 5.7</em>, 8.0*</td>
<td>General availability</td>
</tr>
<tr>
<td>8.0</td>
<td>4</td>
<td>4.2</td>
<td>5.6, 5.7, 8.0</td>
<td>General availability. Recommended version</td>
</tr>
</tbody>
</table>
<ul>
<li><p>2.å°† com.mysql.jdbc.Driver æ›´æ¢ä¸º <code>com.mysql.cj.jdbc.Driver</code>;</p>
</li>
<li><p>3.MySQL 8.0 ä»¥ä¸Šç‰ˆæœ¬ä¸éœ€è¦å»ºç«‹ SSL è¿æ¥çš„ï¼Œéœ€è¦æ˜¾å¼å…³é—­<code>useSSL=false</code>,ç”±äº MySQL 5.7 ä¹‹å‰ç‰ˆæœ¬å®‰å…¨æ€§åšçš„å¹¶ä¸å¤Ÿå¥½ï¼Œæ¯”å¦‚å®‰è£…æ—¶ç”Ÿæˆçš„<code>rootç©ºå¯†ç è´¦å·ã€å­˜åœ¨ä»»ä½•ç”¨æˆ·éƒ½èƒ½è¿æ¥ä¸Šçš„ test åº“ç­‰ï¼Œå¯¼è‡´æ•°æ®åº“å­˜åœ¨è¾ƒå¤§çš„å®‰å…¨éšæ‚£</code>,æ‰€ä»¥MySQLä»5.7ç‰ˆæœ¬å¼€å§‹åŠ å¼ºå®‰å…¨æ€§é—®é¢˜çš„ä¿®å¤åˆ°äº† MySQL 8.0 ä»¥ä¸Šç‰ˆæœ¬å·²ç»ä¸éœ€è¦ä½¿ç”¨ SSL è¿›è¡Œè¿æ¥åŠ å¯†äº†ï¼Œä½†æ˜¯ä»»ç„¶ä¿ç•™è¿™ä¸ªæ¥å£;</p>
</li>
<li><p>4.è®¾ç½® CST æ—¶åŒº: <code>serverTimezone=UTC</code>,å¦åˆ™ä¼šå¯åŠ¨æŠ¥é”™</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Caused by: com.mysql.cj.exceptions.InvalidConnectionAttributeException: The server time zone value <span class="string">'ï¿½Ğ¹ï¿½ï¿½ï¿½×¼Ê±ï¿½ï¿½'</span> is unrecognized or represents more than one time zone. You must configure either the server or JDBC driver (via the serverTimezone configuration property) to use a more specifc time zone value <span class="keyword">if</span> you want to utilize time zone support.</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>MySQL8.Xçš„JDBCé©±åŠ¨è¿æ¥æ¡ˆä¾‹:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Class.forName(<span class="string">"com.mysql.cj.jdbc.Driver"</span>);</span><br><span class="line">conn=DriverManager.getConnection(<span class="string">"jdbc:mysql://localhost:3306/test_demo?useSSL=false&amp;serverTimezone=UTC"</span>,<span class="string">"root"</span>,<span class="string">"password"</span>);</span><br><span class="line"><span class="comment">// å­—ç¬¦ä¸²è¿æ¥å‚æ•°</span></span><br><span class="line"><span class="comment">// jdbc:mysql://localhost:3306/jdbcboot?useUnicode=true&amp;useJDBCCompliantTimezoneShift=true&amp;useLegacyDatetimeCode=false&amp;serverTimezone=UTC&amp;useSSL=true</span></span><br></pre></td></tr></table></figure></p>
<p><br></p>
<blockquote>
<p><strong>æ–¹å¼2:mavenä¾èµ–ä¸‹è½½</strong></p>
</blockquote>
<p>é‡‡ç”¨mavenæœç´¢ç½‘ç«™:<a href="https://mvnrepository.com/" target="_blank" rel="noopener">https://mvnrepository.com/</a> ,æœå¯»å¯ç”¨çš„é…ç½®;</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><br></p>
<blockquote>
<p><strong>å·¥ç¨‹åŠ è½½Lib</strong></p>
</blockquote>
<p>æ–°å»ºç«‹ä¸€ä¸ªEclipseå·¥ç¨‹å¹¶ä¸”åˆ›å»ºä¸€ä¸ªlibç›®å½•,å°†ä¸‹è½½çš„jaråŒ…å¤åˆ¶åˆ°å…¶ä¸­;å³é”®ç‚¹å‡»jaråŒ…é€‰æ‹© <code>Build Path -&gt; Add to Bulid Path</code>;</p>
<figure class="image-box">
                <a rel=JDBCåŸºç¡€å…¥é—¨ä½¿ç”¨ href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200110120534.png" target="_blank" title="WeiyiGeek.Build Path" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200110120534.png" alt="WeiyiGeek.Build Path" title="" class=""></a>
                <p>WeiyiGeek.Build Path</p>
            </figure>
<hr>

<h4 id="0x01-åŸºç¡€ä½¿ç”¨"><a href="#0x01-åŸºç¡€ä½¿ç”¨" class="headerlink" title="0x01 åŸºç¡€ä½¿ç”¨"></a>0x01 åŸºç¡€ä½¿ç”¨</h4><p>æè¿°:JDBCåŸºæœ¬æ­¥éª¤æµç¨‹:</p>
<ul>
<li>1.æ³¨å†Œé©±åŠ¨</li>
<li>2.å»ºç«‹é“¾æ¥</li>
<li>3.åˆ›å»ºstatement</li>
<li>4.æ„å»ºå¹¶æ‰§è¡ŒSQL</li>
<li>5.è·å–ç»“æœé›†ResultSet</li>
<li>6.éå†ç»“æœé›†</li>
<li>7.é‡Šæ”¾èµ„æº</li>
</ul>
<p><br></p>
<p>åŸºç¡€å®ä¾‹:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.weiyi.Jdbc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.mysql.cj.jdbc.result.ResultSetMetaData;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo1</span> </span>&#123;</span><br><span class="line">  <span class="meta">@SuppressWarnings</span>(<span class="string">"unused"</span>)</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//JDBè¿æ¥æ ‡å‡†æ–‡æ¡£</span></span><br><span class="line">    Connection conn = <span class="keyword">null</span>;</span><br><span class="line">    Statement st = <span class="keyword">null</span>;</span><br><span class="line">    ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">//Step 1.é©±åŠ¨æ³¨å†Œ(å®é™…ä¸Šä¸å»ºè®®é‡‡ç”¨æ­¤ç±»æ–¹æ³•åŠ è½½é©±åŠ¨-ä»–ä¼šæ³¨å†Œä¸¤æ¬¡)</span></span><br><span class="line">      DriverManager.registerDriver(<span class="keyword">new</span> com.mysql.cj.jdbc.Driver());</span><br><span class="line">      </span><br><span class="line">      <span class="comment">//Step 2.æ„å»ºè¿æ¥å­—ç¬¦ä¸²å’Œå»ºç«‹é“¾æ¥</span></span><br><span class="line">      String urlFormat = <span class="string">"jdbc:mysql://%s:%d/%s?useUnicode=true&amp;characterEncoding=UTF-8"</span>;</span><br><span class="line">      String connectionUrl = String.format(urlFormat, <span class="string">"113.xx.xx.xxx"</span>, <span class="number">3306</span>, <span class="string">"Demo"</span>);</span><br><span class="line">      conn = DriverManager.getConnection(connectionUrl, <span class="string">"root"</span>, <span class="string">"WeiyiGeek"</span>);</span><br><span class="line">      </span><br><span class="line">      <span class="comment">//Step 3.åˆ›å»ºstatement</span></span><br><span class="line">      st = conn.createStatement();</span><br><span class="line">      </span><br><span class="line">    </span><br><span class="line">      <span class="comment">//Step 4.æ„å»ºSQLè¯­å¥ä»¥åŠæ‰§è¡Œè¯­å¥</span></span><br><span class="line">      String sql = <span class="string">"SELECT ID AS 'åºå·',LastName AS 'åç§°' FROM Persons WHERE ID &lt;&gt; 102"</span>;</span><br><span class="line">      rs = st.executeQuery(sql);</span><br><span class="line">      </span><br><span class="line">      <span class="comment">//Step 5.éå†æ•°æ®åº“</span></span><br><span class="line">      <span class="keyword">while</span>(rs.next())&#123;</span><br><span class="line">        <span class="comment">//System.out.println("ID: " + rs.getInt("ID") + " , LastName = " + rs.getString("LastName"));  //æ³¨æ„æ­¤å¤„ä½¿ç”¨åˆ«åçš„æ—¶å€™(ä¸èƒ½é‡‡ç”¨å­—æ®µåè¿›è¡Œè·å–æ•°æ®åº“è¿”å›çš„å€¼);</span></span><br><span class="line">        System.out.println(<span class="string">"ID: "</span> + rs.getInt(<span class="string">"åºå·"</span>) + <span class="string">" , LastName = "</span> + rs.getString(<span class="string">"åç§°"</span>));</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      <span class="comment">//Step 6.è·å–å…ƒæ•°æ®metadate</span></span><br><span class="line">      ResultSetMetaData rsmd = (ResultSetMetaData) rs.getMetaData();</span><br><span class="line">      <span class="keyword">int</span> numCols = rsmd.getColumnCount(); <span class="comment">//è·å–åˆ—å…ƒç´ æ•°æ®é‡</span></span><br><span class="line">      <span class="keyword">int</span> count = <span class="number">1</span>;</span><br><span class="line">      <span class="keyword">while</span>(count &lt;= numCols) &#123;</span><br><span class="line">        System.out.printf(<span class="string">"ç¬¬ %d åˆ—ï¼š åˆ—å: %s , ASåˆ«å: %s , ç±»å‹:%s \n"</span>,count, rsmd.getColumnName(count), rsmd.getColumnLabel(count), rsmd.getColumnType(count));</span><br><span class="line">        count++;</span><br><span class="line">      &#125;</span><br><span class="line">    </span><br><span class="line">    &#125; <span class="keyword">catch</span> (SQLException sqlEx) &#123;</span><br><span class="line">      <span class="comment">// <span class="doctag">TODO:</span> handle exception</span></span><br><span class="line">      sqlEx.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">      <span class="comment">//Step 7.é‡Šæ”¾èµ„æº(éå¸¸é‡è¦) - ä»åå¾€å‰</span></span><br><span class="line">      System.out.println(<span class="string">"Start-é‡Šæ”¾èµ„æºä¸­"</span>);</span><br><span class="line">      <span class="comment">//ç»“æœé›†å¯¹è±¡</span></span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(rs != <span class="keyword">null</span>)</span><br><span class="line">          rs.close();</span><br><span class="line">      &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">      &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        rs = <span class="keyword">null</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      <span class="comment">//statementå¯¹è±¡</span></span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(st != <span class="keyword">null</span>)</span><br><span class="line">          st.close();</span><br><span class="line">      &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">      &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        st = <span class="keyword">null</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      <span class="comment">//æ•°æ®åº“è¿æ¥å¯¹è±¡</span></span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(conn != <span class="keyword">null</span>)</span><br><span class="line">          conn.close();</span><br><span class="line">      &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">      &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        conn = <span class="keyword">null</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      System.out.println(<span class="string">"Successful-èµ„æºé‡Šæ”¾å®Œæˆ!"</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">//å½“ç„¶æ‚¨ä¹Ÿå¯ä»¥é‡‡ç”¨è‡ªå·±å°è£…åçš„JDBCå·¥å…·ç±»(éå¸¸æ³¨æ„é‡Šæ”¾çš„é¡ºåº)</span></span><br><span class="line">      <span class="comment">//JDBCUtil.release(conn,st,rs);</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>æ‰§è¡Œç»“æœ:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ID: 100 , LastName = WeiyiGeek</span><br><span class="line">ID: 101 , LastName = Admin</span><br><span class="line">ID: 103 , LastName = Weiyi</span><br><span class="line">ID: 104 , LastName = Young</span><br><span class="line">ID: 105 , LastName = bb204949-3283-11ea-b468-0242ac120002</span><br><span class="line">ç¬¬ 1 åˆ—ï¼š åˆ—å: ID , ASåˆ«å: åºå· , ç±»å‹:4 </span><br><span class="line">ç¬¬ 2 åˆ—ï¼š åˆ—å: LastName , ASåˆ«å: åç§° , ç±»å‹:12 </span><br><span class="line">Start-é‡Šæ”¾èµ„æºä¸­</span><br><span class="line">Successful-èµ„æºé‡Šæ”¾å®Œæˆ!</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h5 id="è‡ªå®šä¹‰å·¥å…·åŒ…ç±»"><a href="#è‡ªå®šä¹‰å·¥å…·åŒ…ç±»" class="headerlink" title="è‡ªå®šä¹‰å·¥å…·åŒ…ç±»"></a>è‡ªå®šä¹‰å·¥å…·åŒ…ç±»</h5><p>è¡¥å……ï¼šJDBCè¿æ¥MySQLå·¥å…·åŒ…ç±»</p>
<ul>
<li>1.é‡Šæ”¾èµ„æºçš„å·¥å…·ç±»</li>
<li>2.é©±åŠ¨é˜²äºŒæ¬¡æ³¨å†Œï¼Œå› ä¸ºDriverç±»é‡Œé¢æœ‰é™æ€ä»£ç å—ï¼Œä¸€ä¸Šæ¥å°±æ‰§è¡Œäº†æ‰€ä»¥ç­‰åŒäºæˆ‘ä»¬æ³¨å†Œäº†ä¸¤æ¬¡é©±åŠ¨ï¼›</li>
<li>3.æ„JDBCå·¥å…·ç±»çš„æ„é€ æ–¹æ³•è®¾ç½®è¿æ¥ä¿¡æ¯</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¯¥åŒ…ä¸‹çš„ç±»å¯ä»¥é€šè¿‡é™æ€ç±» ç±».æ–¹æ³•()è¿›è¡Œè°ƒç”¨</span></span><br><span class="line"><span class="comment">//è¯¥åŒ…ä¸‹çš„ç±»å¯ä»¥é€šè¿‡é™æ€ç±» ç±».æ–¹æ³•()è¿›è¡Œè°ƒç”¨</span></span><br><span class="line"><span class="keyword">package</span> com.weiyi.Jdbc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JDBCUtil</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> String connUrl = <span class="string">"jdbc:mysql://%s:%d/%s?useUnicode=true&amp;characterEncoding=UTF-8"</span>;</span><br><span class="line">  <span class="keyword">static</span> String connIp = <span class="string">"13.62.17.23"</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">int</span> connPort = <span class="number">9301</span>;</span><br><span class="line">  <span class="keyword">static</span> String conndatabase = <span class="string">"Demo"</span>;</span><br><span class="line">  <span class="keyword">static</span> String driverClass = <span class="keyword">null</span>;  <span class="comment">//ä½¿ç”¨çš„æ—¶å€™æ·»åŠ </span></span><br><span class="line">  <span class="keyword">static</span> String url = <span class="keyword">null</span>;</span><br><span class="line">  <span class="keyword">static</span> String user = <span class="keyword">null</span>;</span><br><span class="line">  <span class="keyword">static</span> String pass = <span class="keyword">null</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//é™æ€ä»£ç å—,åŠ è½½ç±»çš„æ—¶å€™æ‰§è¡Œ</span></span><br><span class="line">  <span class="keyword">static</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">//Step1.åˆ›å»ºä¸€ä¸ªå±æ€§é…ç½®å¯¹è±¡</span></span><br><span class="line">      Properties prop = <span class="keyword">new</span> Properties();</span><br><span class="line">    </span><br><span class="line">      <span class="comment">//Step2.æ‰“å¼€é…ç½®æ–‡ä»¶</span></span><br><span class="line">      <span class="comment">//InputStream ins = new FileInputStream("jdbc.properties");</span></span><br><span class="line">      InputStream ins = Demo3.class.getClassLoader().getResourceAsStream(<span class="string">"jdbc.properties"</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">//Step3.å¯¼å…¥è¾“å…¥æµ</span></span><br><span class="line">      prop.load(ins);</span><br><span class="line">    </span><br><span class="line">      <span class="comment">//Step4.å±æ€§è¯»å–		</span></span><br><span class="line">      driverClass = prop.getProperty(<span class="string">"jdbc.driverClassName"</span>);</span><br><span class="line">      url = String.format(prop.getProperty(<span class="string">"jdbc.url"</span>),connIp,connPort,conndatabase);</span><br><span class="line">      user = prop.getProperty(<span class="string">"jdbc.username"</span>);</span><br><span class="line">      pass = prop.getProperty(<span class="string">"jdbc.password"</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">      <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">      System.out.println(<span class="string">"Propertiesé…ç½®å·²ç»åŠ è½½!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">JDBCUtil</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>();</span><br><span class="line">    <span class="comment">// TODO Auto-generated constructor stub</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">JDBCUtil</span><span class="params">(String ip,<span class="keyword">int</span> port,String database)</span> </span>&#123;</span><br><span class="line">    connIp = ip;</span><br><span class="line">    connPort = port;</span><br><span class="line">    conndatabase = database;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//æ³¨å†Œå·¥å…·æ–¹æ³•</span></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * é©±åŠ¨æ³¨å†Œå’Œå»ºç«‹é“¾æ¥</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> user</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> password</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> Connection</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> SQLException</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConn</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">    Connection conn = <span class="keyword">null</span>;</span><br><span class="line">    System.out.println(<span class="string">"è¿æ¥å­—ç¬¦ä¸²:"</span> + url);</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">//é˜²æ­¢é©±åŠ¨äºŒæ¬¡æ³¨å†Œè‡ªåŠ¨æ³¨å†Œé©±åŠ¨ä¸å»ºç«‹è¿æ¥			</span></span><br><span class="line">      conn = DriverManager.getConnection(url, user, pass);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> conn;	</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * é‡Šæ”¾å·¥å…·ç±»</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> conn</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> st</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> rs</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">// æ³¨æ„ç‚¹:å¯¼åŒ…éœ€è¦æŸ¥çœ‹æ˜¯å“ªä¸€ä¸ªåŒ…çš„è¿”å›å€¼</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">release</span><span class="params">(Connection conn, Statement st, ResultSet rs)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//æ³¨æ„ç‚¹:å…³é—­çš„é¡ºåº</span></span><br><span class="line">    closeRs(rs);</span><br><span class="line">    closeSt(st);</span><br><span class="line">    closeConn(conn);</span><br><span class="line">    System.out.println(<span class="string">"END-èµ„æºé‡Šæ”¾å®Œæˆ!"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//ç§æœ‰é™æ€æ–¹æ³•-é‡Šæ”¾æŸ¥è¯¢ç»“æœé›†</span></span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">closeRs</span><span class="params">(ResultSet rs)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">if</span>(rs != <span class="keyword">null</span>)</span><br><span class="line">        rs.close();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">      rs = <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//ç§æœ‰é™æ€æ–¹æ³•-é‡Šæ”¾statementå¯¹è±¡</span></span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">closeSt</span><span class="params">(Statement st)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">if</span>(st != <span class="keyword">null</span>)</span><br><span class="line">        st.close();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">      st = <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//ç§æœ‰é™æ€æ–¹æ³•-</span></span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">closeConn</span><span class="params">(Connection conn)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">if</span>(conn != <span class="keyword">null</span>)</span><br><span class="line">        conn.close();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">      conn = <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„äº‹é¡¹:</p>
<ul>
<li>æ³¨:åœ¨å®é™…ä½¿ç”¨ä¸­æˆ‘ä»¬å¯ä»¥ä¸ç”¨<code>Class.forName()</code>åŠ è½½é©±åŠ¨äº†,åœ¨DriverManager.getConenect()æ–¹æ³•ä¸­ï¼Œåœ¨JDBC4.0ç‰ˆæœ¬åä¼šåœ¨å¯¼å…¥çš„æ•°æ®åº“é©±åŠ¨åŒ…çš„Meta-INFä¸­servicesé‡Œçš„java.sql.Driveré©±åŠ¨åç§°;</li>
<li>æ³¨:åœ¨éœ€è¦è¿æ¥å¤šä¸ªæ•°æ®åº“çš„æ—¶å€™,ä¸ºäº†åŒºåˆ†æœ€å¥½æ˜¯å†™ä¸Šé©±åŠ¨åç§°å½“ç„¶ä¸å†™ä¹Ÿæ˜¯å¯ä»¥çš„;</li>
</ul>
<figure class="image-box">
                <a rel=JDBCåŸºç¡€å…¥é—¨ä½¿ç”¨ href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200113212105.png" target="_blank" title="WeiyiGeek.Class.forName" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200113212105.png" alt="WeiyiGeek.Class.forName" title="" class=""></a>
                <p>WeiyiGeek.Class.forName</p>
            </figure>
<p><br></p>
<h5 id="é…ç½®æ–‡ä»¶å¯¼å…¥"><a href="#é…ç½®æ–‡ä»¶å¯¼å…¥" class="headerlink" title="é…ç½®æ–‡ä»¶å¯¼å…¥"></a>é…ç½®æ–‡ä»¶å¯¼å…¥</h5><p>æè¿°:æˆ‘ä»¬é‡‡ç”¨propertiesé…ç½®æ–‡ä»¶è¿›è¡Œå¯¼å…¥jdbcçš„é©±åŠ¨åç§°ä»¥åŠè¿æ¥å­—ç¬¦ä¸²å’Œè´¦å·å¯†ç ç­‰ç­‰;</p>
<p>æ¯”å¦‚:åœ¨å·¥ç¨‹srcç›®å½•ä¸‹å£°æ˜ä¸€ä¸ªconfig.propertiesæ–‡ä»¶ï¼ˆå¦‚æœæ˜¯ä½¿ç”¨æ¡†æ¶çš„æ—¶å€™ä¸€èˆ¬ä¼šå­˜æ”¾åœ¨WEB-INFé‡Œé¢ï¼‰:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">driverClass=com.mysql.cj.jdbc.Driver</span><br><span class="line">url=jdbc:mysql://localhost:3306/student??useUnicode=<span class="literal">true</span>&amp;characterEncoding=UTF-8</span><br><span class="line">name=root</span><br><span class="line">password=root</span><br></pre></td></tr></table></figure></p>
<p>è¡¥å……è¯´æ˜:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä½¿ç”¨ç±»åŠ è½½å™¨å»è¯»å–srcåº•ä¸‹çš„èµ„æºæ–‡ä»¶åé¢åœ¨servlet  </span></span><br><span class="line"><span class="comment">//å¯¹åº”æ–‡ä»¶ä½äºsrcç›®å½•åº•ä¸‹åœ¨ç¼–è¯‘æ‰“åŒ…åå­˜åœ¨åœ¨binç›®å½•åŒå±‚ä¸­,ä½¿ç”¨getClassLoader()åœ¨åŠ è½½å­—èŠ‚ç æ–‡ä»¶æ—¶å€™é¡ºä¾¿ä¹ŸåŠ è½½äº†æˆ‘ä»¬åˆ¶å®šçš„èµ„æºæ–‡ä»¶</span></span><br><span class="line"><span class="comment">//InputStream is = JDBCUtil.class.getClassLoader().getResourceAsStream("jdbc.properties");</span></span><br></pre></td></tr></table></figure></p>
<p>MySQLæ•°æ®åº“çš„CRUDè¡¨è¿°:</p>
<ul>
<li>1.Create</li>
<li>2.Retrieve è¯»å–</li>
<li>3.Update</li>
<li>4.Delete</li>
</ul>
<p>MySQLçš„JDBCåº“æ‰§è¡ŒSQLæ–¹æ³•åˆ†ç±»:</p>
<ul>
<li>executeQuery(String sql)</li>
<li>executeUpdate(String sql) : ä¸»è¦é’ˆå¯¹äºDMLçš„è¯­å¥å¦‚insert,update,deleteè¯­å¥,å¹¶ä¸”è¿”å›å½±å“çš„è¡Œæ•°;</li>
</ul>
<p>åŸºç¡€å®ä¾‹:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.weiyi.Jdbc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.mysql.cj.jdbc.result.ResultSetMetaData;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javafx.scene.control.SplitPane.Divider;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo3</span> </span>&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * JDBC è¿æ¥å‚æ•°é‡‡ç”¨ Propertiesé…ç½®æ–‡ä»¶è¿›è¡Œå¯¼å…¥</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">   <span class="comment">//ä½¿ç”¨é™æ€ä»£ç å—è¯»å–å±æ€§(å½“ç±»åŠ è½½çš„æ—¶å€™æ‰§è¡Œ)</span></span><br><span class="line">  <span class="keyword">static</span> String driverClass = <span class="keyword">null</span>;</span><br><span class="line">  <span class="keyword">static</span> String url = <span class="keyword">null</span>;</span><br><span class="line">  <span class="keyword">static</span> String user = <span class="keyword">null</span>;</span><br><span class="line">  <span class="keyword">static</span> String pass = <span class="keyword">null</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">static</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">//Step1.åˆ›å»ºä¸€ä¸ªå±æ€§é…ç½®å¯¹è±¡</span></span><br><span class="line">      Properties prop = <span class="keyword">new</span> Properties();</span><br><span class="line">    </span><br><span class="line">      <span class="comment">//Step2.æ‰“å¼€é…ç½®æ–‡ä»¶</span></span><br><span class="line">      <span class="comment">//InputStream ins = new FileInputStream("jdbc.properties"); //åœ¨æ ¹ç›®å½•ä¸­å¯ä»¥é‡‡ç”¨è¿™ç§æ–¹å¼</span></span><br><span class="line">      InputStream ins = Demo3.class.getClassLoader().getResourceAsStream(<span class="string">"jdbc.properties"</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">//Step3.å¯¼å…¥è¾“å…¥æµ</span></span><br><span class="line">      prop.load(ins);</span><br><span class="line">    </span><br><span class="line">      <span class="comment">//Step4.å±æ€§è¯»å–		</span></span><br><span class="line">      driverClass = prop.getProperty(<span class="string">"jdbc.driverClassName"</span>);</span><br><span class="line">      url = prop.getProperty(<span class="string">"jdbc.url"</span>);</span><br><span class="line">      user = prop.getProperty(<span class="string">"jdbc.username"</span>);</span><br><span class="line">      pass = prop.getProperty(<span class="string">"jdbc.password"</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">      <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">      System.out.println(<span class="string">"- #ProPertiesé…ç½®æ–‡ä»¶è¯»å–å®Œæˆ!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//JDBè¿æ¥æ ‡å‡†æ–‡æ¡£</span></span><br><span class="line">    Connection conn = <span class="keyword">null</span>;</span><br><span class="line">    Statement st = <span class="keyword">null</span>;</span><br><span class="line">    ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">//1.é©±åŠ¨æ³¨å†Œ</span></span><br><span class="line">      Class.forName(driverClass); <span class="comment">//å®é™…ä¸Šè¿™å¥è¯éƒ½å¯ä»¥å…äº†åœ¨JDBC4.0ä¹‹åä»–ä¼šè‡ªåŠ¨åœ¨jdbcçš„æ•°æ®åº“é©±åŠ¨jaråŒ…ä¸­å…ƒæ•°æ®è¿›è¡ŒæŸ¥çœ‹</span></span><br><span class="line">      <span class="comment">//2.å»ºç«‹è¿æ¥</span></span><br><span class="line">      conn = DriverManager.getConnection(url, user, pass);</span><br><span class="line">      <span class="comment">//3.å»ºç«‹statementå¯¹è±¡</span></span><br><span class="line">      st = conn.createStatement();</span><br><span class="line">      <span class="comment">//4.æ„å»ºSQLè¯­å¥å¹¶ä¸”æ‰§è¡Œ</span></span><br><span class="line">      rs = st.executeQuery(<span class="string">"SELECT * FROM Persons WHERE (ID = 100)"</span>); <span class="comment">//Retrieve</span></span><br><span class="line">      <span class="comment">//5.è·å–æ•°æ®</span></span><br><span class="line">      ResultSetMetaData rsmd = (ResultSetMetaData) rs.getMetaData(); <span class="comment">//è·å–æºæ•°æ®</span></span><br><span class="line">      <span class="keyword">int</span> len = rsmd.getColumnCount();  <span class="comment">//å­—æ®µæ¢³ç†</span></span><br><span class="line">      <span class="keyword">int</span> count = <span class="number">1</span>;</span><br><span class="line">      <span class="keyword">while</span>(count &lt;= len) &#123;</span><br><span class="line">        System.out.print(rsmd.getColumnName(count) + <span class="string">" | "</span>);</span><br><span class="line">        count++;</span><br><span class="line">      &#125;</span><br><span class="line">      System.out.println(<span class="string">""</span>);</span><br><span class="line">      <span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">        System.out.println(rs.getInt(<span class="string">"ID"</span>) + <span class="string">"| "</span> + rs.getString(<span class="string">"LastName"</span>));</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      <span class="comment">//6.æ•°æ®åº“çš„CRUD;</span></span><br><span class="line">      String sql = <span class="string">"INSERT INTO Persons VALUE (NULL,'Weiyi')"</span>;  <span class="comment">//ä¸»è¦Primary Key æ’å…¥ä¸»é”®çš„æ—¶å€™å¯ä»¥ç”¨nullä»£æ›¿ </span></span><br><span class="line">      <span class="keyword">int</span> result = st.executeUpdate(sql); <span class="comment">//è¯¥æ–¹æ³•ä¸»è¦æ‰§è¡Œ INSERT, UPDATE or DELETE ç­‰è¯­å¥ï¼Œè¿”å›å½±å“çš„è¡Œæ•°</span></span><br><span class="line">      <span class="comment">//å¦‚æœè¿”å›å€¼å¤§äº0åˆ™è¡¨æ˜æ“ä½œæˆåŠŸ,å¦åˆ™å¤±è´¥;</span></span><br><span class="line">      <span class="keyword">if</span>(result &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        System.out.println(<span class="string">"æ’å…¥æˆåŠŸ : "</span>+ sql);</span><br><span class="line">      &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">"æ’å…¥å¤±è´¥"</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// U :</span></span><br><span class="line">      String sqlUpdate = <span class="string">"UPDATE Persons SET LastName = 'Whoami' WHERE ID = 100"</span>;</span><br><span class="line">      result = st.executeUpdate(sqlUpdate);</span><br><span class="line">      <span class="keyword">if</span>(result &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        System.out.println(<span class="string">"æ›´æ–°æˆåŠŸ : "</span> + sqlUpdate);</span><br><span class="line">      &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">"æ›´æ–°å¤±è´¥"</span>);</span><br><span class="line">      &#125;</span><br><span class="line">        </span><br><span class="line">      <span class="comment">// D:</span></span><br><span class="line">      String sqlDelete = <span class="string">"DELETE FROM Persons WHERE LastName = 'Weiyi'"</span>;</span><br><span class="line">      result = st.executeUpdate(sqlDelete);</span><br><span class="line">      <span class="keyword">if</span>( result &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        System.out.println(<span class="string">"åˆ é™¤æˆåŠŸ : "</span> + sqlDelete);</span><br><span class="line">      &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">"åˆ é™¤å¤±è´¥"</span>);</span><br><span class="line">      &#125;</span><br><span class="line">          </span><br><span class="line">    &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">      <span class="comment">// <span class="doctag">TODO:</span> handle exception</span></span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">      <span class="comment">//End.é‡Šæ”¾èµ„æº</span></span><br><span class="line">      JDBCUtil.release(conn, st, rs);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>æ‰§è¡Œç»“æœ:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- #ProPertiesé…ç½®æ–‡ä»¶è¯»å–å®Œæˆ!</span><br><span class="line">æŸ¥è¯¢æˆåŠŸ : SELECT * <span class="function">FROM Persons <span class="title">WHERE</span> <span class="params">(ID = <span class="number">100</span>)</span></span></span><br><span class="line"><span class="function">ID | LastName | </span></span><br><span class="line"><span class="function">100| Whoami</span></span><br><span class="line"><span class="function">æ’å…¥æˆåŠŸ : INSERT INTO Persons <span class="title">VALUE</span> <span class="params">(NULL,<span class="string">'Weiyi'</span>)</span></span></span><br><span class="line"><span class="function">æ›´æ–°æˆåŠŸ : UPDATE Persons SET LastName </span>= <span class="string">'Whoami'</span> WHERE ID = <span class="number">100</span></span><br><span class="line">åˆ é™¤æˆåŠŸ : DELETE FROM Persons WHERE LastName = <span class="string">'Weiyi'</span></span><br><span class="line">è¯»å–å®Œæˆ</span><br><span class="line">END-èµ„æºé‡Šæ”¾å®Œæˆ!</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h5 id="junit-å•å…ƒæµ‹è¯•"><a href="#junit-å•å…ƒæµ‹è¯•" class="headerlink" title="junit å•å…ƒæµ‹è¯•"></a>junit å•å…ƒæµ‹è¯•</h5><p>æè¿°:åœ¨å†™ä»£ç çš„æ—¶å€™æˆ‘ä»¬å¸¸å¸¸éœ€è¦å¯¹æ‰€å†™çš„ä»£ç è¿›è¡Œæµ‹è¯•,å¦‚æœç›´æ¥åœ¨åˆ«äººå¼€å‘codeçš„åŒ…ä¸‹æµ‹è¯•æ˜¯æ¯”è¾ƒæ··ä¹±,å»ºè®®å°†é‡Œé¢çš„æ–¹æ³•è¿›è¡ŒæŠ½å–åˆ°æµ‹è¯•åŒ…é‡Œï¼Œç„¶åé‡‡ç”¨junitæ¡†æ¶è¿›è¡Œæµ‹è¯•;</p>
<p>æ“ä½œæ­¥éª¤:</p>
<ul>
<li>1.åˆ›å»ºä¸€ä¸ªæµ‹è¯•åŒ…ä¾èµ–åŒ…<code>org.junit.Test</code>ï¼Œå®šä¹‰ä¸€ä¸ªç±»Testxxxç„¶ååœ¨é‡Œé¢å®šä¹‰éœ€è¦æµ‹è¯•çš„æ–¹æ³•,å®ƒè¿˜å¯å»ºç«‹å¤šä¸ªæ–¹æ³•è¿›è¡Œæµ‹è¯•;</li>
<li>2.æ·»åŠ junitæ¡†æ¶çš„æ”¯æŒåŠå¼•å…¥jaråŒ…:<code>å·¥ç¨‹å³é”® - build path - add Library - Junit - Junit4</code>;</li>
<li>3.åœ¨éœ€è¦æµ‹è¯•çš„æ–¹æ³•ä¸Šé¢åŠ å…¥æ³¨è§£æ ‡è®° <code>@Test</code></li>
<li>4.å…‰æ ‡é€‰æ‹©æ‰€éœ€è¦æµ‹è¯•çš„æ–¹æ³•åç§°ç„¶åå³é”®æ‰§è¡Œå•å…ƒæµ‹è¯•æˆ–è€…æ˜¯æ‰“å¼€outlineè§†å›¾,ç„¶åé€‰æ‹©æ–¹æ³•å³é”®é‡‡ç”¨junitæ‰§è¡Œ;</li>
</ul>
<figure class="image-box">
                <a rel=JDBCåŸºç¡€å…¥é—¨ä½¿ç”¨ href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200113215938.png" target="_blank" title="WeiyiGeek.junit" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200113215938.png" alt="WeiyiGeek.junit" title="" class=""></a>
                <p>WeiyiGeek.junit</p>
            </figure>
<p>åŸºç¡€å®ä¾‹:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.weiyi.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨junitè¿›è¡Œå•å…ƒæµ‹è¯•</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> WeiyiGeek</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainTest</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//å•å…ƒæµ‹è¯•éœ€è¦æµ‹è¯•çš„æ–¹æ³•</span></span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testPrint</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Date date = <span class="keyword">new</span> Date();</span><br><span class="line">    System.out.println(<span class="string">"å½“å‰æ—¶é—´:"</span> + date.toGMTString());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="image-box">
                <a rel=JDBCåŸºç¡€å…¥é—¨ä½¿ç”¨ href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200113220905.png" target="_blank" title="WeiyiGeek.jUnitå•å…ƒæµ‹è¯•" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200113220905.png" alt="WeiyiGeek.jUnitå•å…ƒæµ‹è¯•" title="" class=""></a>
                <p>WeiyiGeek.jUnitå•å…ƒæµ‹è¯•</p>
            </figure>
<p><br></p>
<h5 id="Dao-å¼€å‘æ¨¡å¼"><a href="#Dao-å¼€å‘æ¨¡å¼" class="headerlink" title="Dao å¼€å‘æ¨¡å¼"></a>Dao å¼€å‘æ¨¡å¼</h5><p>æè¿°:Data Access Object æ•°æ®è®¿é—®å¯¹è±¡.å³ä½¿ç”¨åŒ…ç±»å¯¹è±¡å®ç°ä¸€ä¸ªåŠŸèƒ½;</p>
<p>æ¨¡å¼å»ºç«‹æµç¨‹;</p>
<ul>
<li>1.å»ºç«‹ä¸€ä¸ªdaoçš„æ¥å£,é‡Œé¢å£°æ˜æ•°æ®åº“è®¿é—®è§„åˆ™;</li>
<li>2.æ–°å»ºä¸€ä¸ªdaoçš„å®ç°ç±»,å…·ä½“å®ç°æ—©å‰å®šä¹‰çš„è§„åˆ™;</li>
<li>3.å»ºç«‹ä¸€ä¸ªè°ƒç”¨daoæ¥å£ä¸­çš„æ–¹æ³•è¿›è¡Œå±•ç¤ºå®ç°ç±»çš„è¿è¡Œç»“æœ;</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- (1) å»ºç«‹ä¸€ä¸ªæµ‹è¯•çš„è¡¨</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> user_log (</span><br><span class="line">  <span class="keyword">id</span> <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> PRIMARY <span class="keyword">KEY</span> AUTO_INCREMENT <span class="keyword">COMMENT</span> <span class="string">'åºå·'</span>,</span><br><span class="line">  userLogin <span class="built_in">VARCHAR</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'ç™»é™†åç§°'</span>,</span><br><span class="line">  userPass <span class="built_in">VARCHAR</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'ç™»é™†å¯†ç '</span>,</span><br><span class="line">  loginTime DATETIME <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NOW</span>()  <span class="keyword">COMMENT</span> <span class="string">'ç™»é™†æ—¶é—´'</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- (2) æ•°æ®æ’å…¥</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> user_log(<span class="keyword">id</span>,userLogin) <span class="keyword">VALUES</span> (<span class="literal">NULL</span>,<span class="string">'WeiyiGeek'</span>);</span><br></pre></td></tr></table></figure>
<figure class="image-box">
                <a rel=JDBCåŸºç¡€å…¥é—¨ä½¿ç”¨ href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200114124340.png" target="_blank" title="WeiyiGeek." data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200114124340.png" alt="WeiyiGeek." title="" class=""></a>
                <p>WeiyiGeek.</p>
            </figure>
<p>åŸºç¡€ç¤ºä¾‹:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.æ¥å£</span></span><br><span class="line"><span class="keyword">package</span> com.weiyi.dao;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">userDao</span> </span>&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Daoæ¨¡å‹-æ¥å£å®šä¹‰æ“ä½œæ•°æ®åº“çš„æ–¹æ³•</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.å®ç°æ¥å£</span></span><br><span class="line"><span class="keyword">package</span> com.weiyi.dao.impl;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">import</span> com.weiyi.Jdbc.JDBCUtil;</span><br><span class="line"><span class="keyword">import</span> com.weiyi.dao.userDao;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">userDaoImpl</span> <span class="keyword">implements</span> <span class="title">userDao</span></span>&#123;</span><br><span class="line">  <span class="comment">//JDBCè¿æ¥æ ‡å‡†æ–‡æ¡£</span></span><br><span class="line">  Connection conn = <span class="keyword">null</span>;</span><br><span class="line">  Statement st = <span class="keyword">null</span>;</span><br><span class="line">  ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">findAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">//1.é©±åŠ¨åŠ è½½å’Œå»ºç«‹é“¾æ¥</span></span><br><span class="line">      conn = JDBCUtil.getConn();</span><br><span class="line">      <span class="comment">//2.å»ºç«‹æµå¯¹è±¡statement</span></span><br><span class="line">      st = conn.createStatement();</span><br><span class="line">      <span class="comment">//3.æ„å»ºæ‰§è¡ŒSQLè¯­å¥ ï¼ˆè¿™é‡Œçš„SQLè¯­å¥æ˜¯æ‹¼æ¥çš„å®¹æ˜“å¯¼è‡´å®‰å…¨é—®é¢˜ï¼‰</span></span><br><span class="line">      rs = st.executeQuery(<span class="string">"SELECT * FROM user_log"</span>);</span><br><span class="line">      <span class="keyword">while</span>(rs.next())&#123;</span><br><span class="line">        System.out.println(rs.getInt(<span class="string">"id"</span>) + <span class="string">" "</span> + rs.getString(<span class="string">"userLogin"</span>) + <span class="string">" "</span> + rs.getDate(<span class="string">"loginTime"</span>));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">      <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">      JDBCUtil.release(conn, st, rs);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.è°ƒç”¨æ¥å£</span></span><br><span class="line"><span class="keyword">package</span> com.weiyi.Jdbc;</span><br><span class="line"><span class="keyword">import</span> com.weiyi.dao.userDao;</span><br><span class="line"><span class="keyword">import</span> com.weiyi.dao.impl.userDaoImpl;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è°ƒç”¨ dao æ¨¡å‹ å®ç°çš„æ¥å£æ–¹æ³•</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> WeiyiGeek</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo4</span> </span>&#123;</span><br><span class="line">  <span class="comment">//æ³¨æ„:è¿™é‡Œæµ‹è¯•ä¹Ÿå¯ä»¥é‡‡ç”¨Junitå•å…ƒæµ‹è¯•</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//Step1.çˆ¶ç±»æŒ‡å‘å­ç±»å®ç°çš„æ¥å£</span></span><br><span class="line">    userDao dao = <span class="keyword">new</span> userDaoImpl();</span><br><span class="line">    <span class="comment">//Step2.ç›´æ¥è°ƒç”¨å…¶æ–¹æ³•ä¸ç”¨ç®¡å…·ä½“çš„å®ç°</span></span><br><span class="line">    dao.findAll();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>è¿è¡Œç»“æœ:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Propertiesé…ç½®å·²ç»åŠ è½½!</span><br><span class="line">è¿æ¥å­—ç¬¦ä¸²:jdbc:mysql://11.62.17.20:3001/Demo?useUnicode=<span class="literal">true</span>&amp;characterEncoding=UTF-8</span><br><span class="line">1 WeiyiGeek 2020-01-14</span><br><span class="line">END-èµ„æºé‡Šæ”¾å®Œæˆ!</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h4 id="0x02-JDBCå®‰å…¨å¼€å‘"><a href="#0x02-JDBCå®‰å…¨å¼€å‘" class="headerlink" title="0x02 JDBCå®‰å…¨å¼€å‘"></a>0x02 JDBCå®‰å…¨å¼€å‘</h4><p>æè¿°:åšè¿‡æ¸—é€æµ‹è¯•çš„äººå‘˜å’Œç»éªŒä¸°å¯Œçš„å¼€å‘äººå‘˜ä¸€å®šæ˜¯çŸ¥é“å¯¹äºæ•°æ®åº“è¯»å–ã€æ’å…¥æ•°æ®çš„ä¸šåŠ¡å¸¸å¸¸å®¹æ˜“è¢«SQL Inject,æ‰€ä»¥ä¸ºäº†è§£å†³è¿™ä¸€ä¸ªå®‰å…¨é—®é¢˜å¸¸å¸¸é‡‡ç”¨å ä½ç»‘å®šè¿›è¡Œé˜²æ­¢SQLæ³¨å…¥,ç±»ä¼¼äºPHPçš„PDOæ‰©å±•ç±»åº“ä¸­çš„PDOé¢„å¤„ç†è¯­å¥;</p>
<p><em>æ³¨æ„:Statement å¯¹è±¡çš„å®‰å…¨é—®é¢˜;</em></p>
<ul>
<li>1.Statementå¯¹è±¡æ‰§è¡ŒSQLè¯­å¥å…¶å®æ˜¯å°†SQLè¯­å¥å…ˆæ‹¼æ¥å†æ‰§è¡Œ;</li>
<li>2.æ¯”å¦‚ä¸‹é¢çš„å®ä¾‹è¿›è¡Œæ‹¼æ¥äº†SQLè¯­å¥ï¼Œå…ˆæ‹¼æ¥SQLè¯­å¥ç„¶åå†ä¸€èµ·æ‰§è¡Œ;ä½†æ˜¯å¦‚æœå˜é‡ä¸­å¸¦æœ‰æ•°æ®åº“çš„å…³é”®å­—ï¼Œé‚£ä¹ˆåœ¨è¿›è¡ŒæŸ¥è¯¢çš„æ—¶å€™å°†ä¼šè¢«è®¤ä¸ºæ˜¯æ•°æ®åº“æŸ¥è¯¢çš„å…³é”®å­—ï¼Œä»è€Œå¼•å‘å®‰å…¨é—®é¢˜;<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- åœ¨Statementå¯¹è±¡ä¸­å­˜åœ¨çš„å®‰å…¨é—®é¢˜</span></span><br><span class="line">String sql = "<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> user_log <span class="keyword">WHERE</span> userLogin = <span class="string">'" + user + "'</span> <span class="keyword">AND</span> userPass = <span class="keyword">md5</span>(<span class="string">'" + pass + "'</span>)<span class="string">";</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">-- ä½†æ˜¯å¦‚æœè¯·æ±‚ä¼ å…¥çš„å‚æ•°æ˜¯ä¸‹é¢è¿™æ ·çš„è¾¹ä¼šå‡ºç°é—®é¢˜</span></span><br><span class="line"><span class="string">http:\/\/127.0.0.1/login.jsp?user=Admin&amp;pass=123456') or '1=1' or md5('123456</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">-- å®‰å…¨é—®é¢˜:æœ€åŸå§‹çš„ä¸‡èƒ½ç™»é™†å¯†ç (ç°åœ¨åŸºæœ¬ä¸å­˜åœ¨è¿™æ ·çš„æ¼æ´)</span></span><br><span class="line"><span class="string">SELECT * FROM user_log WHERE userLogin='WeiyiGeek' AND userPass = MD5('123456') OR '1=1'</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<figure class="image-box">
                <a rel=JDBCåŸºç¡€å…¥é—¨ä½¿ç”¨ href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200114162921.png" target="_blank" title="WeiyiGeek.Statementå®‰å…¨" data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200114162921.png" alt="WeiyiGeek.Statementå®‰å…¨" title="" class=""></a>
                <p>WeiyiGeek.Statementå®‰å…¨</p>
            </figure>
<p><br></p>
<h5 id="1-é¢„è§£æ"><a href="#1-é¢„è§£æ" class="headerlink" title="1.é¢„è§£æ"></a>1.é¢„è§£æ</h5><p>è§£å†³åŠæ³• : </p>
<ul>
<li>(1) PrepareStatement è¯¥å¯¹è±¡å°±æ˜¯æ›¿æ¢å‰é¢çš„statementå¯¹è±¡, ç›¸æ¯”è¾ƒä»¥å‰çš„statement, é¢„å…ˆå¤„ç†ç»™å®šçš„sqlè¯­å¥å¯¹å…¶æ‰§è¡Œè¯­æ³•æ£€æŸ¥ã€‚ </li>
<li>(2) åœ¨sqlè¯­å¥é‡Œé¢ä½¿ç”¨ ? å ä½ç¬¦æ¥æ›¿ä»£åç»­è¦ä¼ é€’è¿›æ¥çš„å˜é‡; åé¢è¿›æ¥çš„å˜é‡å€¼,å°†ä¼šè¢«çœ‹æˆæ˜¯å­—ç¬¦ä¸²ï¼Œä¸ä¼šäº§ç”Ÿä»»ä½•çš„å…³é”®å­—ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">String sql = <span class="string">"insert into t_user values(null , ? , ?)"</span>;</span><br><span class="line">ps = conn.prepareStatement(sql);</span><br><span class="line"><span class="comment">//ç»™å ä½ç¬¦èµ‹å€¼ ä»å·¦åˆ°å³æ•°è¿‡æ¥ï¼Œ1 ä»£è¡¨ç¬¬ä¸€ä¸ªé—®å·ï¼Œ æ°¸è¿œä½ æ˜¯1å¼€å§‹ã€‚</span></span><br><span class="line">ps.setString(<span class="number">1</span>, userName);</span><br></pre></td></tr></table></figure>
<p><br></p>
<p>åŸºç¡€å®ä¾‹:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// dao æ¨¡å‹æ¥å£</span></span><br><span class="line"><span class="keyword">package</span> com.weiyi.dao;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">userDao</span> </span>&#123;</span><br><span class="line">  <span class="comment">/** Daoæ¨¡å‹-æ¥å£å®šä¹‰æ“ä½œæ•°æ®åº“çš„æ–¹æ³•*/</span></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">psLogin</span><span class="params">(String user,String pass,<span class="keyword">int</span> x)</span></span>;</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">psInsert</span><span class="params">(String user,String pass)</span></span>;</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">psUpdate</span><span class="params">(String user,<span class="keyword">int</span> id)</span></span>;</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">psDelete</span><span class="params">(String user,String pass)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// dao æ¨¡å‹æ¥å£å…·ä½“å®ç°</span></span><br><span class="line"><span class="keyword">package</span> com.weiyi.dao.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.weiyi.Jdbc.JDBCUtil;</span><br><span class="line"><span class="keyword">import</span> com.weiyi.dao.userDao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">userDaoImpl</span> <span class="keyword">implements</span> <span class="title">userDao</span></span>&#123;</span><br><span class="line">  <span class="comment">//JDBCè¿æ¥æ ‡å‡†æ–‡æ¡£</span></span><br><span class="line">  Connection conn = <span class="keyword">null</span>;</span><br><span class="line">  Statement st = <span class="keyword">null</span>;</span><br><span class="line">  ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">  <span class="comment">/***  åˆ›å»ºPreparedStatementé¢„å¤„ç†å¯¹è±¡ */</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">psLogin</span><span class="params">(String user,String pass, <span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">//1.è½½å…¥æ•°æ®åº“é©±åŠ¨å»ºç«‹é“¾æ¥</span></span><br><span class="line">      conn = JDBCUtil.getConn();</span><br><span class="line">      <span class="comment">//2.æ„å»ºSQLè¯­å¥ä»¥åŠé¢„å¤„ç†SQLè¯­å¥</span></span><br><span class="line">      String sql = <span class="string">"SELECT * FROM user_log WHERE userLogin = ? AND userPass = md5(?) AND id = ?"</span>;  <span class="comment">//? å ä½ç¬¦åˆåé¢ä¼šå°†ç»‘å®šçš„å‚æ•°è¿›è¡Œæ ¼å¼åŒ–åä¼ å…¥</span></span><br><span class="line">      PreparedStatement ps = conn.prepareStatement(sql); <span class="comment">//å…³é”®ç‚¹1:å¯¹æˆ‘ä»¬çš„SQLè¯­å¥è¿›è¡Œé¢„å¤„ç†å¦‚æœSQLè¯­æ³•é”™è¯¯çš„å°†ä¸èƒ½é€šè¿‡è§£æ</span></span><br><span class="line">      ps.setString(<span class="number">1</span>, user);  <span class="comment">//å…³é”®ç‚¹2:è¿›è¡Œä¼ å…¥å‚æ•°çš„ä½ç½®å¼€å§‹ç»‘å®šä»,1ä»£è¡¨ç¬¬ä¸€ä¸ªé—®å·,2åŒç†;</span></span><br><span class="line">      ps.setString(<span class="number">2</span>, pass);  <span class="comment">//å…³é”®ç‚¹3:æ³¨æ„ä¼ å…¥çš„ç±»å‹æ˜¯å¯ä»¥æ ¹æ®éœ€è¦æ¥è®¾ç½®çš„;</span></span><br><span class="line">      ps.setInt(<span class="number">3</span>, x);</span><br><span class="line">      <span class="comment">//3.æ‰§è¡Œé¢„å¤„ç†å¥½çš„çš„å¯¹è±¡</span></span><br><span class="line">      rs = ps.executeQuery();</span><br><span class="line">      <span class="keyword">if</span>(rs.next()) &#123;</span><br><span class="line">        System.out.println(<span class="string">"ç™»é™†æˆåŠŸ!"</span>);</span><br><span class="line">        System.out.println(<span class="string">"æ¬¢è¿æ‚¨"</span> + rs.getString(<span class="string">"userLogin"</span>) + <span class="string">"ç®¡ç†å‘˜, æ³¨å†Œæ—¶é—´: "</span> + rs.getTimestamp(<span class="string">"loginTime"</span>));</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">"ç™»é™†å¤±è´¥"</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">      <span class="comment">// <span class="doctag">TODO:</span> handle exception</span></span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">      JDBCUtil.release(conn, st, rs);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">psInsert</span><span class="params">(String user, String pass)</span> </span>&#123;</span><br><span class="line">    PreparedStatement ps = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      conn = JDBCUtil.getConn();</span><br><span class="line">      String sql = <span class="string">"INSERT INTO user_log(userLogin,userPass) VALUES (?,md5(?))"</span>;</span><br><span class="line">      ps = conn.prepareStatement(sql);</span><br><span class="line">      ps.setString(<span class="number">1</span>, user);</span><br><span class="line">      ps.setString(<span class="number">2</span>, pass);</span><br><span class="line">      <span class="keyword">int</span> result = ps.executeUpdate();</span><br><span class="line">      <span class="keyword">if</span>(result &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        System.out.println(<span class="string">"æˆåŠŸæ·»åŠ "</span> + user + <span class="string">"ç”¨æˆ·!"</span>);</span><br><span class="line">      &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">"ç”¨æˆ·æ³¨å†Œå¤±è´¥!"</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">      <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">      JDBCUtil.release(conn, ps);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">psUpdate</span><span class="params">(String user, <span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">    PreparedStatement ps = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      conn = JDBCUtil.getConn();</span><br><span class="line">      String sql = <span class="string">"UPDATE user_log SET userLogin = ? WHERE id = ?"</span>;</span><br><span class="line">      ps = conn.prepareStatement(sql);</span><br><span class="line">      ps.setString(<span class="number">1</span>, user);</span><br><span class="line">      ps.setInt(<span class="number">2</span>, id);</span><br><span class="line">      <span class="keyword">int</span> result = ps.executeUpdate();</span><br><span class="line">      <span class="keyword">if</span>(result&gt;<span class="number">0</span>) &#123;</span><br><span class="line">        System.out.println(<span class="string">"æ›´æ–°ç”¨æˆ·ID = "</span> + id + <span class="string">", ä¸º "</span> + user+<span class="string">"ç”¨æˆ·æˆåŠŸ!"</span>);</span><br><span class="line">      &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">"æ›´æ–°å¤±è´¥"</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">      <span class="comment">// <span class="doctag">TODO:</span> handle exception</span></span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">      JDBCUtil.release(conn, ps);</span><br><span class="line">    &#125;	</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">psDelete</span><span class="params">(String user, String pass)</span>  </span>&#123;</span><br><span class="line">    PreparedStatement ps = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      conn = JDBCUtil.getConn();</span><br><span class="line">      String sql = <span class="string">"DELETE FROM user_log WHERE userLogin = ? AND userPass = md5(?)"</span>;</span><br><span class="line">      ps = conn.prepareStatement(sql);</span><br><span class="line">      ps.setString(<span class="number">1</span>, user);</span><br><span class="line">      ps.setString(<span class="number">2</span>, pass);</span><br><span class="line">      <span class="keyword">int</span> result = ps.executeUpdate();</span><br><span class="line">      <span class="keyword">if</span>(result &gt; <span class="number">0</span>)&#123;</span><br><span class="line">        System.out.println(<span class="string">"ç”¨æˆ· "</span> + user +<span class="string">" åˆ é™¤æˆåŠŸ!"</span>);</span><br><span class="line">      &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">"åˆ é™¤å¤±è´¥"</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">    &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">      <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">      JDBCUtil.release(conn, ps);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>æ‰§è¡Œç»“æœ:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Propertiesé…ç½®å·²ç»åŠ è½½!</span><br><span class="line">è¿æ¥å­—ç¬¦ä¸²:jdbc:mysql://127.0.0.1:3301/Demo?useUnicode=<span class="literal">true</span>&amp;characterEncoding=UTF-8</span><br><span class="line">ç™»é™†æˆåŠŸ!</span><br><span class="line">æ¬¢è¿æ‚¨WeiyiGeekç®¡ç†å‘˜, æ³¨å†Œæ—¶é—´: 2020-01-14 12:42:20.0</span><br><span class="line">æ›´æ–°ç”¨æˆ·ID = 2, ä¸º Adminç”¨æˆ·æˆåŠŸ!</span><br><span class="line">ç”¨æˆ· Admin åˆ é™¤æˆåŠŸ!</span><br><span class="line">END-èµ„æºé‡Šæ”¾å®Œæˆ!</span><br></pre></td></tr></table></figure></p>
<hr>
<h4 id="0x04-å®Œå–„è‡ªå®šä¹‰å·¥å…·ç±»"><a href="#0x04-å®Œå–„è‡ªå®šä¹‰å·¥å…·ç±»" class="headerlink" title="0x04 å®Œå–„è‡ªå®šä¹‰å·¥å…·ç±»"></a>0x04 å®Œå–„è‡ªå®šä¹‰å·¥å…·ç±»</h4><p>æè¿°:ä¸»è¦é’ˆå¯¹äºDbUtilså¯¹JDBCçš„å°è£…çš„å¼€æºå·¥å…·ç±»åº“åŸç†è¿›è¡Œäº†è§£ï¼Œå¹¶è‡ªå®šä¹‰å†™å‡ºå®ç°ä¸»è¦çš„åŠŸèƒ½(éå¸¸é‡è¦)ï¼›</p>
<p><em>å…³é”®çŸ¥è¯†ç‚¹:</em></p>
<ul>
<li>å¯å˜å‚æ•°</li>
<li>å…ƒæ•°æ®(Meata data )</li>
<li>æ¥å£å®ç°ç±»å¯¹è±¡</li>
<li>æ³›å‹(T) : ç±»ä¸æ–¹æ³•</li>
</ul>
<p><br/></p>
<p><em>ä»€ä¹ˆæ˜¯å…ƒæ•°æ®?</em></p>
<blockquote>
<p>æè¿°æ•°æ®çš„æ•°æ® String sql , å³æè¿°è¿™ä»½sqlå­—ç¬¦ä¸²çš„æ•°æ®å«åšå…ƒæ•°æ®</p>
<ul>
<li>æ•°æ®åº“å…ƒæ•°æ®  DatabaseMetaData</li>
<li>å‚æ•°å…ƒæ•°æ®  ParameterMetaData</li>
<li>ç»“æœé›†å…ƒæ•°æ®  ResultSetMetaData</li>
</ul>
</blockquote>
<p><em>åŸºç¡€ç¤ºä¾‹:</em><br>/User/src/top/weiyigeek/Util/ResultSetHandler.java<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ResultSetHandler</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * @ç”¨æˆ·è¿›è¡Œæ¥å£å®ç°ç±»å¯¹è±¡(å®ç°è·å–æŸ¥è¯¢åçš„æ•°æ®æŒ‰ç…§è°ƒç”¨è€…çš„æ„æ„¿è¿›è¡Œå°è£…)</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> rs</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">  <span class="function">T <span class="title">sethandler</span><span class="params">(ResultSet rs)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>/User/src/top/weiyigeek/Util/DBUtilTools.java<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> top.weiyigeek.Util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.ParameterMetaData;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Desc</span>: æ‰©å……JDBCè‡ªå®šä¹‰è¿æ¥æ•°æ®åº“ï¼Œé€šç”¨æ–¹æ³•æ‰§è¡Œå¢åˆ æ”¹æŸ¥</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> WeiyiGeek</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CreatTime</span> ä¸‹åˆ9:51:05</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DBUtilTools</span> </span>&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@Desc</span>: é€šç”¨æ–¹æ³•è¿›è¡Œ æ’å…¥ åˆ é™¤ ä¸ æ›´æ–° (DML)</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> sql : INSERT INTO / DELETE FROM / UPDATE</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> args : å¯å˜å‚æ•°ï¼ˆé‡è¦ï¼‰</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> </span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">update</span><span class="params">(String sql,Object...args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> flag = <span class="number">0</span>;</span><br><span class="line">    Connection conn = <span class="keyword">null</span>;</span><br><span class="line">    PreparedStatement ps = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      conn = db1.getConn();</span><br><span class="line">      ps = conn.prepareStatement(sql);</span><br><span class="line">      <span class="comment">//åˆ©ç”¨å‚æ•°å…ƒæ•°æ®è·å–æ‰§è¡ŒSQLè¯­å¥ä¸­çš„å‚æ•°ä¸ªæ•°ï¼ˆå³æœ‰å‡ ä¸ªé—®å·ï¼‰</span></span><br><span class="line">      ParameterMetaData metaData = ps.getParameterMetaData();</span><br><span class="line">      <span class="keyword">int</span> count = metaData.getParameterCount();</span><br><span class="line">      </span><br><span class="line">      <span class="comment">//è¿›è¡ŒSQLæ‰§è¡Œçš„å‚æ•°ç»‘å®šï¼Œå› ä¸ºä¸çŸ¥é“æ˜¯ä»€ä¹ˆç±»å‹çš„æ•°æ®æ‰€ä»¥éƒ½ä½¿ç”¨setObjectæ¥å¤„ç†</span></span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">        ps.setObject(i+<span class="number">1</span>, args[i]);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//æ‰§è¡ŒCURDè¯­å¥()</span></span><br><span class="line">      flag = ps.executeUpdate();</span><br><span class="line">      <span class="keyword">return</span> flag;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">      <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">      db1.release(conn, ps, <span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@Desc</span>: é€šç”¨æ–¹æ³•è¿›è¡Œ æ•°æ®åº“æ•°æ®çš„æŸ¥è¯¢ å¹¶è®©è°ƒç”¨è€…è‡ªå·±å®ç°æ•°æ®çš„å°è£…ï¼ˆæ¥å£å®ç°ç±»å¯¹è±¡ï¼‰</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> &lt;T&gt;</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> sql</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> handler</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">T <span class="title">query</span><span class="params">(String sql, ResultSetHandler&lt;T&gt; handler,Object...args)</span> </span>&#123;</span><br><span class="line">    Connection conn = <span class="keyword">null</span>;</span><br><span class="line">    PreparedStatement ps = <span class="keyword">null</span>;</span><br><span class="line">    ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      conn = db1.getConn();</span><br><span class="line">      ps = conn.prepareStatement(sql);</span><br><span class="line">      <span class="comment">//åˆ©ç”¨å‚æ•°å…ƒæ•°æ®è·å–æ‰§è¡ŒSQLè¯­å¥ä¸­çš„å‚æ•°ä¸ªæ•°ï¼ˆå³æœ‰å‡ ä¸ªé—®å·ï¼‰</span></span><br><span class="line">      ParameterMetaData metaData = ps.getParameterMetaData();</span><br><span class="line">      <span class="keyword">int</span> count = metaData.getParameterCount();</span><br><span class="line">      </span><br><span class="line">      <span class="comment">//è¿›è¡ŒSQLæ‰§è¡Œçš„å‚æ•°ç»‘å®šï¼Œå› ä¸ºä¸çŸ¥é“æ˜¯ä»€ä¹ˆç±»å‹çš„æ•°æ®æ‰€ä»¥éƒ½ä½¿ç”¨setObjectæ¥å¤„ç†</span></span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">        ps.setObject(i+<span class="number">1</span>, args[i]);</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      <span class="comment">//æ‰§è¡ŒCURDè¯­å¥</span></span><br><span class="line">      rs = ps.executeQuery();</span><br><span class="line">      T t = handler.sethandler(rs);</span><br><span class="line">      <span class="keyword">return</span> t;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">      <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">      db1.release(conn, ps, <span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>æµ‹è¯•ä»£ç main:/User/src/top/weiyigeek/DBUtil/DBUtilToolsDemo2.java<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> top.weiyigeek.DBUtil;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> top.weiyigeek.Util.DBUtilTools;</span><br><span class="line"><span class="keyword">import</span> top.weiyigeek.Util.ResultSetHandler;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DBUtilToolsDemo2</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//1.æµ‹è¯•DMLè¯­å¥</span></span><br><span class="line">    <span class="comment">//int flag = DBUtilTools.update("INSERT INTO account value(null,?,?)", "æ³•å¤–ç‹‚å¾’",50);</span></span><br><span class="line">    <span class="comment">//System.out.println("å½±å“æ¡æ•°:"+flag);</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//int flag = DBUtilTools.update("UPDATE account SET name = ?,money = money + ? WHERE id = ?", "æ³•å¤–ç‹‚å¾’",150,4);</span></span><br><span class="line">    <span class="comment">//System.out.println("å½±å“æ¡æ•°:"+flag);</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//2.æµ‹è¯•QUERYè¯­å¥(æ¥å£å®ç°ç±»å¯¹è±¡)</span></span><br><span class="line">    Account a = DBUtilTools.query(<span class="string">"SELECT * FROM account where id = ?"</span>, <span class="keyword">new</span> ResultSetHandler&lt;Account&gt;() &#123;</span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="function"><span class="keyword">public</span> Account <span class="title">sethandler</span><span class="params">(ResultSet rs)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        Account work = <span class="keyword">new</span> Account();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          <span class="keyword">while</span>(rs.next()) &#123;</span><br><span class="line">            <span class="keyword">int</span> id = rs.getInt(<span class="string">"id"</span>);</span><br><span class="line">            String name = rs.getString(<span class="string">"name"</span>);</span><br><span class="line">            <span class="keyword">int</span> money = rs.getInt(<span class="string">"money"</span>);</span><br><span class="line">            work.setId(id);</span><br><span class="line">            work.setName(name);</span><br><span class="line">            work.setMoney(money);</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">return</span> work;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">          <span class="comment">// <span class="doctag">TODO:</span> handle exception</span></span><br><span class="line">          e.printStackTrace();</span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">    &#125;, <span class="number">4</span>);</span><br><span class="line">    System.out.println(a.toString());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>æ‰§è¡Œç»“æœ:<br><figure class="image-box">
                <a rel=JDBCåŸºç¡€å…¥é—¨ä½¿ç”¨ href="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200326225106.png" target="_blank" title="WeiyiGeek." data-fancybox="images"><img src="https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200326225106.png" alt="WeiyiGeek." title="" class=""></a>
                <p>WeiyiGeek.</p>
            </figure></p>

        </div>

         
          <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-9134434519967436" data-ad-slot="7905848205"></ins>
        
  
        
  <hr>
  <p> æ¬¢è¿å„ä½å¿—åŒé“åˆçš„æœ‹å‹ä¸€èµ·å­¦ä¹ äº¤æµï¼Œå¦‚æ–‡ç« æœ‰è¯¯è¯·åœ¨ä¸‹æ–¹ç•™ä¸‹æ‚¨å®è´µçš„ç»éªŒçŸ¥è¯†ï¼Œä¸ªäººé‚®ç®±åœ°å€<b style="color:#ff654e"><code>ã€master#weiyigeek.topã€‘</code></b>æˆ–è€…ä¸ªäººå…¬ä¼—å·<b style="color:#ff654e"><code>ã€WeiyiGeekã€‘</code></b>è”ç³»æˆ‘ã€‚ </p>

  <p> æ›´å¤šæ–‡ç« æ¥æºäº<b style="color:#03a9f4">ã€WeiyiGeek Blog - ä¸ºäº†èƒ½åˆ°è¿œæ–¹ï¼Œè„šä¸‹çš„æ¯ä¸€æ­¥éƒ½ä¸èƒ½å°‘ã€‘</b>, ä¸ªäººé¦–é¡µåœ°å€( <a style="color: #03a9f4;" href="https://weiyigeek.top" target="_blank"> https://weiyigeek.top </a> )</p>

  <p>ä¸“æ ä¹¦å†™ä¸æ˜“ï¼Œå¦‚æœæ‚¨è§‰å¾—è¿™ä¸ªä¸“æ è¿˜ä¸é”™çš„ï¼Œè¯·ç»™è¿™ç¯‡ä¸“æ  <b style="color: red;">ã€ç‚¹ä¸ªèµã€æŠ•ä¸ªå¸ã€æ”¶ä¸ªè—ã€å…³ä¸ªæ³¨ï¼Œè½¬ä¸ªå‘ã€‘(äººé—´äº”å¤§æƒ…)</b>ï¼Œè¿™å°†å¯¹æˆ‘çš„è‚¯å®šï¼Œè°¢è°¢ï¼ã€‚</p>

  <div>
    <img src="https://www.weiyigeek.top/img/weiyigeek.jpg" class="img-responsive" alt="WeiyiGeek-banner">
  </div>

  <ul style="font-weight: bolder;">
    <li>
      <p><span style="color: #03a9f4">echo&nbsp;&nbsp;"ã€ç‚¹ä¸ªèµã€‘ï¼ŒåŠ¨åŠ¨ä½ é‚£ç²—å£®çš„æ‹‡æŒ‡æˆ–è€…èŠŠèŠŠç‰æ‰‹ï¼Œäº²ï¼"</span></p>
    </li>
    <li>
      <p><span style="color: #ff9201">printf("%s",&nbsp;"ã€æŠ•ä¸ªå¸ã€‘ï¼Œä¸‡æ°´åƒå±±æ€»æ˜¯æƒ…ï¼ŒæŠ•ä¸ªç¡¬å¸è¡Œä¸è¡Œï¼Œäº²ï¼")</span></p>
    </li>
    <li>
      <p><span style="color: #02a2ff">fmt.Printf("ã€æ”¶ä¸ªè—ã€‘ï¼Œé˜…åå³ç„šä¸åƒç°ï¼Œäº²ï¼")&nbsp;&nbsp;</span></p>
    </li>
    <li>
      <p><span style="color:red">console.info("ã€è½¬ä¸ªå‘ã€‘ï¼Œè®©æ›´å¤šçš„å¿—åŒé“åˆçš„æœ‹å‹ä¸€èµ·å­¦ä¹ äº¤æµï¼Œäº²ï¼")</span></p>
    </li>
    <li>
      <p><span style="color: #ff654e">System.out.println("ã€å…³ä¸ªæ³¨ã€‘ï¼Œåç»­æµè§ˆæŸ¥çœ‹ä¸è¿·è·¯å“Ÿï¼Œäº²ï¼")</span></p>
    </li>
  </ul>

  <div>
    <img src="/img/wechat-search.png" class="img-responsive" alt="æ‰«æFollow(å…³æ³¨)WeiyiGeekå…¬ä¼—å·"  width="380" height="170">
    <img src="/img/wechat-app.png" class="img-responsive" alt="æ‰«æVisit(æµè§ˆ)æå®¢å…¨æ ˆä¿®ç‚¼å°ç¨‹åº"  width="385" height="170">
  </div>
  <hr>
  

  <blockquote class="post-copyright">
    <div class="content">
      
        
<span class="post-time">
    æœ€åæ›´æ–°æ—¶é—´ï¼š<time datetime="2022-03-29T05:39:06.300Z" itemprop="dateUpdated">2022-03-29 13:39:06</time>
</span><br>


        <span>æ–‡ç« åŸå§‹è·¯å¾„ï¼š<a href="https://github.com/WeiyiGeek/blog/edit/master/source/_posts/ç¼–ç¨‹ä¸–ç•Œ/JavaWeb/3.JDBC/JDBCåŸºç¡€å…¥é—¨ä½¿ç”¨.md" target="_blank" rel="noopener noreferrer">_posts/ç¼–ç¨‹ä¸–ç•Œ/JavaWeb/3.JDBC/JDBCåŸºç¡€å…¥é—¨ä½¿ç”¨.md</a></span><br>
         <span class="copy-copyright">è½¬è½½æ³¨æ˜å‡ºå¤„ï¼ŒåŸæ–‡åœ°å€ï¼š<a href="/2020/2-1-306.html" target="_blank" rel="external">https://blog.weiyigeek.top/2020/2-1-306.html</a></span><br>æœ¬ç«™æ–‡ç« å†…å®¹éµå¾ª <a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">çŸ¥è¯†å…±äº« ç½²å - éå•†ä¸šæ€§ - ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…åè®®</a> 
    </div>
    <footer>
      <a href="https://blog.weiyigeek.top">
        <img src="/img/avatar.jpg" alt="WeiyiGeek">
        WeiyiGeek
      </a>
    </footer>
  </blockquote>


        
            <div class="page-reward">
  <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-rectangle waves-light">ğŸ‘ é’Ÿæ„ä½œè€…</a>
</div>
            
        
        <div class="post-footer">
            
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JDBC/" rel="tag">JDBC</a></li></ul>

            <div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://blog.weiyigeek.top/2020/2-1-306.html&title=ã€ŠJDBCåŸºç¡€å…¥é—¨ä½¿ç”¨ã€‹ â€” WeiyiGeek Blog&pic=https://blog.weiyigeek.top/img/avatar.jpg" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.weiyigeek.top/2020/2-1-306.html&title=ã€ŠJDBCåŸºç¡€å…¥é—¨ä½¿ç”¨ã€‹ â€” WeiyiGeek Blog&source=[TOC]" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.weiyigeek.top/2020/2-1-306.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€ŠJDBCåŸºç¡€å…¥é—¨ä½¿ç”¨ã€‹ â€” WeiyiGeek Blog&url=https://blog.weiyigeek.top/2020/2-1-306.html&via=https://blog.weiyigeek.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://blog.weiyigeek.top/2020/2-1-306.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>

        </div>
        
          <!-- è¯„è®ºç»„ä»¶ -->


<div id="gitalk-container"></div>
<script type="text/javascript" src="/js/plugins/gitalk.min.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/custom/gitalk.init.js?v=1.6.6"></script>
        
    </div>
    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="prev">
      <a href="/2020/2-8-312.html" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">Maven åŸºç¡€å…¥é—¨ä½¿ç”¨</h4>
      </a>
    </div>
  

  
    <div class="next">
      <a href="/2020/1-29-112.html" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">ä¼ä¸šå†…éƒ¨NTPæœåŠ¡å™¨åŸºç¡€å®‰è£…ä¸é…ç½®ä½¿ç”¨</h4>
      </a>
    </div>
  
</nav>


    
    
        <aside class="post-widget">
            <nav class="post-toc-wrap" id="post-toc">
                <strong>ç›®å½•</strong>
                <ol class="post-toc"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#0x00-å‰è¨€åŸºç¡€"><span class="post-toc-number">1.</span> <span class="post-toc-text">0x00 å‰è¨€åŸºç¡€</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#0x01-åŸºç¡€ä½¿ç”¨"><span class="post-toc-number">2.</span> <span class="post-toc-text">0x01 åŸºç¡€ä½¿ç”¨</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#0x02-JDBCå®‰å…¨å¼€å‘"><span class="post-toc-number">3.</span> <span class="post-toc-text">0x02 JDBCå®‰å…¨å¼€å‘</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#0x04-å®Œå–„è‡ªå®šä¹‰å·¥å…·ç±»"><span class="post-toc-number">4.</span> <span class="post-toc-text">0x04 å®Œå–„è‡ªå®šä¹‰å·¥å…·ç±»</span></a></li></ol>
            </nav>
            <div class="toc-bar"><div>
        </aside>
    


    <!-- æ”¯ä»˜å®å¾®ä¿¡æ–‡ç« èµèµ -->
    
      <div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        å¦‚æœæ­¤ç¯‡æ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¿˜è¯·æ”¯æŒä¸€ä¸‹åšä¸»å“Ÿ, è°¢è°¢å„ä½çœ‹å‹â™¥!
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardwechat" src="/img/reward-wechat.jpg" height="250" height="250" alt="å¾®ä¿¡æ‰“èµäºŒç»´ç ">
            <img id="rewardalipay" src="/img/reward-alipay.png" height="250" height="250" alt="æ”¯ä»˜å®æ‰“èµäºŒç»´ç ">
        </div>
        
        <label class="reward-toggle">
            <!-- <input id="rewardToggle" type="checkbox" class="reward-toggle-check" data-wechat="/img/reward-wechat.jpg" data-alipay="/img/reward-alipay.png"> -->
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">å¾®ä¿¡</span>
                <span class="reward-toggle-item alipay">æ”¯ä»˜å®</span>
            </div>
        </label>
        
    </div>
</div>

      

    <!-- å¾®ä¿¡å…¬ä¼—å·å…³æ³¨/æ–‡ç« ç‰ˆæƒå¤åˆ¶ -->
    
      <div id="btw-mask" style="position: fixed; top: 0px; right: 0px; bottom: 0px; left: 0px; opacity: 0.7; z-index: 999; background: rgb(0, 0, 0); display:none"></div>
<div id="btw-modal" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 360px; text-align: center; font-size: 13px; background: rgb(255, 255, 255); border-radius: 10px; z-index: 9999; font-family: PingFangSC-Regular, sans-serif;display:none">
<span id="btw-modal-close-btn" style="position: absolute; top: 5px; right: 15px; line-height: 1.8; font-size: 15px; cursor: pointer; opacity: 0.2; z-index: 9999; color: rgb(0, 0, 0); background: none; border: none; outline: none;">X</span>
<p id="btw-modal-header" style="margin-top: 40px; line-height: 1.8; font-size: 13px; ">
<b style="color:#6190e8;">ä½ å¥½æœ‹å‹,å¯ä»¥å…³ä¸ªæ³¨å—? â¤ <br> è¿™å°†æ˜¯æˆ‘æŒç»­æ›´æ–°æ–‡ç« çš„åŠ¨åŠ›æºæ³‰ï¼Œè°¢è°¢æ”¯æŒï¼(à¹‘â€²á´—â€µà¹‘) </b> <br> å¦‚ä¸æƒ³å…³æ³¨è¯·ç‚¹å‡»å³ä¸Šè§’çš„ã€Xã€‘<br>
<br>Method 1.Please visit <strong><a href="https://twitter.com/WeiyiGeek" target="_blank" rel="noopener" style="color: rgb(240, 65, 52);text-decoration:underline;">ã€My Twitterã€‘</a></strong>. There is an article verification code in the homepage.
<br>æ–¹å¼2.è¯·è®¿é—®æœ¬åšä¸»çš„Bç«™<strong><a href="https://space.bilibili.com/385802642" target="_blank" rel="noopener" style="color: rgb(240, 65, 52);text-decoration:underline;">ã€WeiyiGeekã€‘</a></strong>é¦–é¡µå…³æ³¨UPä¸»,<br>å°†è‡ªåŠ¨éšæœºè·å–è§£é”éªŒè¯ç ã€‚
<br>æ–¹å¼3.æ‰«ä¸€æ‰«ä¸‹æ–¹äºŒç»´ç ï¼Œå…³æ³¨æœ¬ç«™<strong>å®˜æ–¹å…¬ä¼—å·</strong><br>
å›å¤ï¼š<strong style="color: rgb(240, 65, 52);">éªŒè¯ç </strong>
å°†è·å–<strong style="color: rgb(240, 65, 52);">è§£é”(æœ‰æ•ˆæœŸ7å¤©)</strong>æœ¬ç«™æ‰€æœ‰æŠ€æœ¯æ–‡ç« å“Ÿ!</p>
<img src="/img/wechat-search.png" style="width: 300px; margin-top: 10px;">
<div id="btw-modal-input-code" style="margin-top: 20px; background: rgb(255, 255, 255);">
  <input id="btw-modal-input" type="number" minlength="4" maxlength="4" placeholder="è¯·è¾“å…¥éªŒè¯ç |Verification Code"
    style="width: 165px; height: 32px; line-height: 32px; padding: 0px 10px; margin: 0px 10px; font-size: 13px; text-rendering: auto; text-transform: none; cursor: text; outline: none; box-sizing: border-box; border: 1px solid rgb(221, 221, 221); -webkit-appearance: textfield; background-color: white; -webkit-rtl-ordering: logical;"/>
  <button id="btw-submit-btn" onclick="yzm_vertify()"
    style="padding: 0px 20px; height: 32px; font-size: 14px; outline: none; border: none; color: rgb(255, 255, 255); background: rgb(222, 104, 109); cursor: pointer;">æ
    äº¤</button> </div>
<p id="btw-footer" style="margin: 40px 0px 20px; color: rgb(153, 153, 153);">@WeiyiGeek - ä¸ºäº†èƒ½åˆ°è¿œæ–¹ï¼Œè„šä¸‹çš„æ¯ä¸€æ­¥éƒ½ä¸èƒ½å°‘</p>
</div>
        
</article>
</div>

    </main>
    <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9134434519967436" data-ad-slot="3629930963" data-ad-format="auto" data-full-width-responsive="true"></ins>
    <footer class="footer ">
    
    <div class="top">
        
            <p>
    <span>Linksï¼š</span>
    
    <span class="blogroll-item">
        <a href="https://weiyigeek.top" target="_blank">https://weiyigeek.top</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.weiyigeek.top" target="_blank">https://blog.weiyigeek.top</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://weiyigeek.top/img/wechat-search.png" target="_blank">å…¬ä¼—è´¦å·</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://space.bilibili.com/385802642/article" target="_blank">å“”å“©å“”å“©ä¸“æ </a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://github.com/weiyigeek" target="_blank">ä¸ªäººGithub</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://gitee.com/WeiyiGeek" target="_blank">ä¸ªäººGitee</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.zhihu.com/people/weiyiSec" target="_blank">ä¸ªäººçŸ¥ä¹</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.cnblogs.com/WeiyiGeek" target="_blank">åšå®¢å›­</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://my.oschina.net/weiyigeek" target="_blank">OSCHINA</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.toutiao.com/c/user/token/MS4wLjABAAAAqcPSoMqfctaEqJpGSF775eeCjWkrop4AOyLITdMx-L78F5iXzfQcSRM5sY4dq3wR" target="_blank">ä»Šæ—¥å¤´æ¡</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.csdn.net/u013072756?type=lately" target="_blank">CSDN</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.jianshu.com/u/5199a1104739" target="_blank">ç®€ä¹¦</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://cloud.tencent.com/developer/user/1389665/articles" target="_blank">è…¾è®¯äº‘+äº‘ç¤¾åŒº</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://cuttlefish.baidu.com/shop/75c5dbd8d15abe23482f4d40" target="_blank">ç™¾åº¦æ–‡åº“</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://author.baidu.com/home?from=blog&app_id=1726736601523415" target="_blank">ITæå®¢çŸ¥è¯†åˆ†äº«</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://blog.51cto.com/weiyigeek" target="_blank">51CTOåšå®¢</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://juejin.cn/user/122767337595934" target="_blank">æ˜é‡‘</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://weibo.com/a/hot/7622022703618049_1.html" target="_blank">å¾®åšæ–‡ç« </a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.xiaohongshu.com/user/profile/627c98bb000000001000e7ba" target="_blank">å°çº¢ä¹¦</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://segmentfault.com/u/weiyigeek" target="_blank">Segmentfault</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.douyin.com/user/MS4wLjABAAAAMSBdMja6XLsdmzafb0RNbFeBemIOk38K1PaOClZeI1Q" target="_blank">æŠ–éŸ³ä¸»é¡µ</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://www.kuaishou.com/profile/3xfbrsrhd2i69x9" target="_blank">å¿«æ‰‹ä¸»é¡µ</a>
    </span>
    
</p>

        
    </div>
    
    <div class="bottom">
      <p>
        <span>WeiyiGeek &copy; 2018 - 2022 <a href="https://weiyigeek.top" target="_blank" rel="noopener">weiyigeek.top</a> All rights reserved.å”¯ä¸€æå®¢ITçŸ¥è¯†åˆ†äº« ç‰ˆæƒæ‰€æœ‰ </span>
        
        <span>
          Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/weiyigeek" target="_blank">mellow</a>
        </span>
        
        <br/>è®¿é—®ç»Ÿè®¡
        <span><a href="/sitemap.xml" target="_blank" rel="Sitemaps-ç«™ç‚¹åœ°å›¾">Sitemaps</a> </span>
        <span><a href="/baidusitemap.xml" target="_blank" rel="baidusitemaps-ç™¾åº¦ç«™ç‚¹åœ°å›¾">ç«™ç‚¹åœ°å›¾</a> </span>
        <!-- 
  -->
        <br/>ICPå¤‡æ¡ˆå·<span><a href="https://beian.miit.gov.cn" target="_blank">æ¸ICPå¤‡2022003447å·</a></span>
        <br/>
        <div id="cc-myssl-id">
          <a href="https://myssl.com/blog.weiyigeek.top?from=mysslid" target="_blank" rel="noopener"><img src="https://static.myssl.com/res/images/myssl-id1.png" alt="MySSLå®‰å…¨è®¤è¯" style="max-height:50px;display:block;margin:0 auto"></a>
        </div>
      </p>
    </div>
</footer>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>


<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://blog.weiyigeek.top/2020/2-1-306.html&title=ã€ŠJDBCåŸºç¡€å…¥é—¨ä½¿ç”¨ã€‹ â€” WeiyiGeek Blog&pic=https://blog.weiyigeek.top/img/avatar.jpg" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.weiyigeek.top/2020/2-1-306.html&title=ã€ŠJDBCåŸºç¡€å…¥é—¨ä½¿ç”¨ã€‹ â€” WeiyiGeek Blog&source=[TOC]" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.weiyigeek.top/2020/2-1-306.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€ŠJDBCåŸºç¡€å…¥é—¨ä½¿ç”¨ã€‹ â€” WeiyiGeek Blog&url=https://blog.weiyigeek.top/2020/2-1-306.html&via=https://blog.weiyigeek.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://blog.weiyigeek.top/2020/2-1-306.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>æ‰«ä¸€æ‰«ï¼Œåˆ†äº«åˆ°å¾®ä¿¡</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACJklEQVR42u3awa4CIQwFUP//p+dtTV7E21ZNBg4rM0HkuOjQlscjHtfT+P/k+fmr+a/WrH5rNDAwMG7LuJZj8gPrFfLP671hYGCcw0g2sV56/a0ctl7h5XMMDAyM5Zx1OE7m9H4XAwMDo8dIAm7vyIiBgYFR3VBy+KseN3+Ui2NgYNyQ0Suc/ebzV/obGBgYt2JcxZGvUw2X12BgYGDszcgDXLKJ/GiYlOeqlz8wMDBOYExSymRmcuicPMHAwNib0UtW50X//FiZ7wEDA2NXRjUFzaPcJBn+QAsTAwNjC0aSlOakPGjmT6IAjYGBsTVjsok8OEZn0jhyRukrBgbGAYwkmFYL93kqm7cKCudcDAyMLRiTpmMvEa0yClVDDAyMjRi9Q161xF/uTgRBttASwMDAuDmjt7lPhd38bVB4P2BgYGzHqConyNEdkPV8DAyMAxiTcv83gnLzLYGBgXEko5pG5tfLeq2FQk8DAwNjI0Ze2CpfKg1CajWJfbMHDAyMAxi9lLJaVutRo6QaAwPjAEa1yJUweiG12ULAwMA4gJGki/khrzp/fnUMAwNjV8ZVHL2afPWSWR7KMTAwTmD0uoT5jaw8xV2TepczMDAwdmL0UtNe83JSyHvzt2JgYBzASI5redsyD9OTSxgYGBgYvYDbOybma74pumFgYGAMiviTDDvCYGBgHMBIkthvV/iqeAwMjHMYeerYaz1WN9EL1hgYGJsy/gAb1wPx1Fwn9gAAAABJRU5ErkJggg==" alt="å¾®ä¿¡åˆ†äº«äºŒç»´ç ">
</div>


    
    <!-- main-js -->
<script type="text/javascript" src="/js/jquery/2.1.0-jquery.min.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/plugins/fastclick.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/plugins/ios-orientationchange-fix.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/jquery/3.5.2-jquery.fancybox.min.js?v=1.6.6"></script>
<!--  //cdn.bootcss.com/node-waves/0.7.4/waves.min.js -->
<script type="text/javascript" src="/js/node-waves/0.7.4-waves.min.js?v=1.6.6"></script> 

<script type="text/javascript" src="/js/method.js?v=1.6.6"></script>
<script type="text/javascript" src="/js/blog.js?v=1.6.6"></script>

<!-- third-party -->
<script type="text/javascript" src="/js/plugins/local_search.js?v=1.6.6"></script>
<script type="text/javascript">
	var search_path = "search.xml";
	if (search_path.length === 0) { search_path = "search.xml";}
	var path = "/" + search_path;
	searchFunc(path, "local-search-input", "local-search-result");
</script> 

<script> (adsbygoogle = window.adsbygoogle || []).push({});</script>    


<!-- <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> --> 


  


<script>
  var _hmt = _hmt || [];
  (function() {
    // ç™¾åº¦ç»Ÿè®¡
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?53923c4b5560739bc0ed61e183be6acf";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();
</script>
 


<!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
            processEscapes: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.staticfile.org/mathjax/2.7.9/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
 
<script>
    (function() {
        var OriginTitile = document.title, titleTime;
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                document.title = 'WeiyiGeek Blog-å…³æ³¨äºç½‘ç»œå®‰å…¨_ç‰©è”ç½‘å®‰å…¨å¼€å‘_ç½‘ç»œå®‰å…¨è¿ç»´-å­¦ä¹ å¿ƒå¾—åˆ†äº«';
                clearTimeout(titleTime);
            } else {
                document.title = '(ã¤ã‚§âŠ‚)å’¦!åˆå¥½äº†!';
                titleTime = setTimeout(function() {
                    document.title = OriginTitile;
                },2000);
            }
        });
    })();
</script>
 

     <script type="text/javascript" src="/js/custom/copytips.js?v=1.6.6"></script> 
</body>
</html>