{"title":"Ubuntu-20.04-LTS(桌面与服务器)版基础配置","slug":"系统运维/Linux/系统配置/Ubuntu/20.04/Ubuntu-20.04-LTS桌面版与服务器版基础初始配置","date":"2020-04-28T05:34:30.000Z","updated":"2022-06-14T01:30:03.072Z","url":"2020/4-28-203.html","path":"api/articles/2020/4-28-203.html.json","covers":["https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/5/20210703203903.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200813215029.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/2/20201105151346.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20201017103054.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/2/20201024101448.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/2/20201024120731.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/2/20201028171741.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/2/20201024114822.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/2/20201025232441.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/2/20201025231905.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/2/20210105184706.png","https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/5/20210627153202.png"],"content":"<p>[TOC]</p>\n<a id=\"more\"></a>\n<h3 id=\"0x00-前言简述\"><a href=\"#0x00-前言简述\" class=\"headerlink\" title=\"0x00 前言简述\"></a>0x00 前言简述</h3><p>Ubuntu 20.04 是 Ubuntu 的第 8 个 LTS 版本代号为<code>&quot;Focal Fossa&quot;</code>;<br>下载地址: <a href=\"http://releases.ubuntu.com/20.04/\" target=\"_blank\" rel=\"noopener\">http://releases.ubuntu.com/20.04/</a><br>下载镜像时可以选择以下两种镜像:</p>\n<ul>\n<li>桌面版本  [*]    ubuntu-20.04.1-desktop-amd64.iso</li>\n<li>服务器版本[*]    ubuntu-20.04.1-live-server-amd64.iso</li>\n</ul>\n<hr>\n<h3 id=\"0x01-常规初始化配置\"><a href=\"#0x01-常规初始化配置\" class=\"headerlink\" title=\"0x01 常规初始化配置\"></a>0x01 常规初始化配置</h3><h4 id=\"0-网络配置\"><a href=\"#0-网络配置\" class=\"headerlink\" title=\"0.网络配置\"></a>0.网络配置</h4><p>描述:Ubuntu 20.04 LTS 在网络管理上相比较于18.04有很大的不同，网络配置文件不再是<code>sudo vi /etc/network/interfaces</code>而变成了<code>/etc/netplan/50-cloud-init.yaml</code>，并且也不在使用networking服务进行管理网络了，所以想以<code>services networking restart</code>重载配置文件是不行的了;</p>\n<p>采用命令进行网络配置流程:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#1.修改netplan网络配置文件/etc/netplan/下的文</span></span><br><span class=\"line\"><span class=\"comment\"># Ubuntu 20.04 LTS </span></span><br><span class=\"line\">cat /etc/netplan/00-installer-config.yaml</span><br><span class=\"line\"><span class=\"comment\"># Ubuntu 18.04 LTS </span></span><br><span class=\"line\">cp /etc/netplan/50-cloud-init.yaml&#123;,.bak&#125;</span><br><span class=\"line\">cat &gt; /etc/netplan/50-cloud-init.yam &lt;&lt; EOF</span><br><span class=\"line\">network:</span><br><span class=\"line\">  version: 2</span><br><span class=\"line\">  renderer: networkd</span><br><span class=\"line\">  ethernets:</span><br><span class=\"line\">    enp3s0:</span><br><span class=\"line\">      addresses:</span><br><span class=\"line\">        - 192.168.93.6/24</span><br><span class=\"line\">      gateway4: 192.168.93.2</span><br><span class=\"line\">      nameservers:</span><br><span class=\"line\">          addresses: [8.8.8.8, 8.8.4.4]</span><br><span class=\"line\">EOF</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#2.应用网络配置</span></span><br><span class=\"line\">netplan apply</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#3.networkd管理系统的网络重启</span></span><br><span class=\"line\"><span class=\"comment\"># 方式1</span></span><br><span class=\"line\">$ sudo ip link <span class=\"built_in\">set</span> enp0s3 down</span><br><span class=\"line\">$ sudo ip link <span class=\"built_in\">set</span> enp0s3 up</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 方式2</span></span><br><span class=\"line\">$ sudo nmcli networking off</span><br><span class=\"line\">$ sudo nmcli networking on</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 方式3.或者你可以尝试用System V init脚本重启你的网络:</span></span><br><span class=\"line\">$ sudo /etc/init.d/network-manager restart</span><br></pre></td></tr></table></figure></p>\n<p><br/></p>\n<p><strong>给添加的新网卡配置静态IP</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">~$ ifconfig -a  <span class=\"comment\"># 查看所有网卡 (不加 -a 工作网卡)</span></span><br><span class=\"line\">enp0s3: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class=\"line\">        inet 10.0.2.15  netmask 255.255.255.0  broadcast 10.0.2.255</span><br><span class=\"line\">        inet6 fe80::a00:27ff:fe34:4ea1  prefixlen 64  scopeid 0x20&lt;link&gt;</span><br><span class=\"line\">        ether 08:00:27:34:4e:a1  txqueuelen 1000  (Ethernet)</span><br><span class=\"line\">enp0s8: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class=\"line\">        inet6 fe80::a00:27ff:fea2:190e  prefixlen 64  scopeid 0x20&lt;link&gt;</span><br><span class=\"line\">        ether 08:00:27:a2:19:0e  txqueuelen 1000  (Ethernet)</span><br><span class=\"line\">lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536</span><br><span class=\"line\">        inet 127.0.0.1  netmask 255.0.0.0</span><br><span class=\"line\">        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;</span><br><span class=\"line\">        loop  txqueuelen 1000  (Local Loopback)</span><br><span class=\"line\">``` </span><br><span class=\"line\"></span><br><span class=\"line\">ubuntu 20.04 网络的配置信息将不在保存在`/etc/network/interfaces`文件中，虽然该文件依然存在，但是内容是空的。</span><br><span class=\"line\"></span><br><span class=\"line\">新系统已经使用netplan管理网络，对于配置信息使用vim打开文件`sudo vim /etc/netplan/00-installer-config.yaml`</span><br><span class=\"line\">```yaml</span><br><span class=\"line\"><span class=\"comment\"># 注意：yaml文件名在不同的机器上文件名可能不同。</span></span><br><span class=\"line\">network:</span><br><span class=\"line\">  ethernets:</span><br><span class=\"line\">    enp0s3:</span><br><span class=\"line\">      dhcp4: <span class=\"literal\">true</span></span><br><span class=\"line\">  version: 2</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 新网卡设置静态IP</span></span><br><span class=\"line\">network:</span><br><span class=\"line\">  ethernets:</span><br><span class=\"line\">    enp0s3:</span><br><span class=\"line\">      dhcp4: <span class=\"literal\">true</span></span><br><span class=\"line\">    enp3s0:</span><br><span class=\"line\">      addresses:</span><br><span class=\"line\">        - 192.168.93.6/24</span><br><span class=\"line\">      gateway4: 192.168.93.2</span><br><span class=\"line\">      nameservers:</span><br><span class=\"line\">          addresses: [8.8.8.8, 8.8.4.4]</span><br><span class=\"line\">  version: 2</span><br></pre></td></tr></table></figure></p>\n<p>注意: 最后执行sudo netplan apply命令使其生效</p>\n<p><br></p>\n<h4 id=\"1-SSH-配置\"><a href=\"#1-SSH-配置\" class=\"headerlink\" title=\"1.SSH 配置\"></a>1.SSH 配置</h4><ul>\n<li><p>1.1 初始SSH配置文件配置;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#1.允许Root登陆以及采用密码认证（prohibit-password:禁用密码）</span></span><br><span class=\"line\">sed -i <span class=\"string\">\"s|#PermitRootLogin prohibit-password|PermitRootLogin no#g\"</span> /etc/ssh/sshd_config  <span class=\"comment\"># 为了安全</span></span><br><span class=\"line\">sed -i <span class=\"string\">\"s|#PasswordAuthentication|PasswordAuthentication#g\"</span> /etc/ssh/sshd_config</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#2.重启ssh服务</span></span><br><span class=\"line\">systemctl restart sshd</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>1.2 公密钥生成与管理;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 生成</span></span><br><span class=\"line\">ssh-keygen -t rsa -f ~/.ssh/id_weiyigeek -P <span class=\"string\">\"Password\"</span> -C <span class=\"string\">\"Master@weiyigeek.top\"</span></span><br><span class=\"line\"><span class=\"comment\"># 管理</span></span><br><span class=\"line\">ssh-agent bash</span><br><span class=\"line\">ssh-add ~/.ssh/id_weiyigeek  <span class=\"comment\"># 密钥加载</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><br/></p>\n<h4 id=\"2-镜像源配置\"><a href=\"#2-镜像源配置\" class=\"headerlink\" title=\"2.镜像源配置\"></a>2.镜像源配置</h4><p>配置命令如下：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo cp /etc/apt/sources.list&#123;,.bak&#125;</span><br><span class=\"line\">sudo tee /etc/apt/sources.list &lt;&lt;<span class=\"string\">'EOF'</span></span><br><span class=\"line\"><span class=\"comment\">#阿里云Mirrors - Ubuntu</span></span><br><span class=\"line\">deb http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse</span><br><span class=\"line\">deb-src http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse</span><br><span class=\"line\"></span><br><span class=\"line\">deb http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse</span><br><span class=\"line\">deb-src http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse</span><br><span class=\"line\"></span><br><span class=\"line\">deb http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse</span><br><span class=\"line\">deb-src http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse</span><br><span class=\"line\"></span><br><span class=\"line\">deb http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse</span><br><span class=\"line\">deb-src http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse</span><br><span class=\"line\"></span><br><span class=\"line\">deb http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse</span><br><span class=\"line\">deb-src http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse</span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">EOF</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 清华Mirrors</span></span><br><span class=\"line\"><span class=\"comment\"># 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释</span></span><br><span class=\"line\">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse</span><br><span class=\"line\"><span class=\"comment\"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse</span></span><br><span class=\"line\">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse</span><br><span class=\"line\"><span class=\"comment\"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse</span></span><br><span class=\"line\">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse</span><br><span class=\"line\"><span class=\"comment\"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse</span></span><br><span class=\"line\">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse</span><br><span class=\"line\"><span class=\"comment\"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 预发布软件源，不建议启用</span></span><br><span class=\"line\"><span class=\"comment\"># deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-proposed main restricted universe multiverse</span></span><br><span class=\"line\"><span class=\"comment\"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-proposed main restricted universe multiverse</span></span><br><span class=\"line\"></span><br><span class=\"line\">apt autoclean</span><br><span class=\"line\">apt update &amp;&amp; apt upgrade -y</span><br></pre></td></tr></table></figure></p>\n<p><br/></p>\n<h4 id=\"4-基础软件安装\"><a href=\"#4-基础软件安装\" class=\"headerlink\" title=\"4.基础软件安装\"></a>4.基础软件安装</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#1)编译依赖</span></span><br><span class=\"line\">apt -y install gcc</span><br><span class=\"line\"><span class=\"comment\">#2)常规软件</span></span><br><span class=\"line\">apt -y install nano vim net-tools tree wget dos2unix unzip htop ncdu bash-completion</span><br></pre></td></tr></table></figure>\n<p><br></p>\n<h4 id=\"5-系统防火墙\"><a href=\"#5-系统防火墙\" class=\"headerlink\" title=\"5.系统防火墙\"></a>5.系统防火墙</h4><p>描述:Ubuntu 20.04系统防火墙采用ufw命令进行管理，相比于firewall-cmd更加方便简单;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 语法</span></span><br><span class=\"line\">ufw allow 端口/协议</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 例如</span></span><br><span class=\"line\">ufw allow 3306/tcp</span><br><span class=\"line\">ufw allow 53/udp</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<h4 id=\"6-时区与时间\"><a href=\"#6-时区与时间\" class=\"headerlink\" title=\"6.时区与时间\"></a>6.时区与时间</h4><ul>\n<li><p>6.0 时间时区信息查看</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 时间</span></span><br><span class=\"line\">&gt; timedatectl</span><br><span class=\"line\">               Local time: 二 2020-10-27 23:04:31 CST</span><br><span class=\"line\">           Universal time: 二 2020-10-27 15:04:31 UTC</span><br><span class=\"line\">                 RTC time: 二 2020-10-27 15:04:32    </span><br><span class=\"line\">                Time zone: Asia/Shanghai (CST, +0800)</span><br><span class=\"line\">System clock synchronized: no                        </span><br><span class=\"line\">              NTP service: active                    </span><br><span class=\"line\">          RTC <span class=\"keyword\">in</span> <span class=\"built_in\">local</span> TZ: no   </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 时区</span></span><br><span class=\"line\">&gt; ls -alh /etc/localtime      </span><br><span class=\"line\">lrwxrwxrwx 1 root root 35 10月 20 07:13 /etc/localtime -&gt; ../usr/share/zoneinfo/Asia/Shanghai</span><br><span class=\"line\">&gt; cat /etc/timezone</span><br><span class=\"line\">Asia/Shanghai</span><br><span class=\"line\">&gt; timedatectl list-timezones</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>6.1 时区修改:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 1.先查看当前系统时间</span></span><br><span class=\"line\">date -R   </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 2.交互式地区选择亚洲 Asia，确认之后选择中国（China)，最后选择北京(Beijing)</span></span><br><span class=\"line\">tzselect</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 3.复制时区文件到/etc目录下再次查看时间已经修改为北京时间</span></span><br><span class=\"line\">cp /usr/share/zoneinfo/Asia/Shanghai  /etc/localtime</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 4.timedatectl命令设置</span></span><br><span class=\"line\">&gt; sudo timedatectl <span class=\"built_in\">set</span>-timezone Asia/Shanghai</span><br><span class=\"line\">&gt; timedatectl <span class=\"built_in\">set</span>-timezone UTC</span><br><span class=\"line\">&gt; timedatectl               </span><br><span class=\"line\">               Local time: 二 2020-10-27 23:05:56 CST</span><br><span class=\"line\">           Universal time: 二 2020-10-27 15:05:56 UTC</span><br><span class=\"line\">                 RTC time: 二 2020-10-27 15:05:56    </span><br><span class=\"line\">                Time zone: Asia/Shanghai (CST, +0800)</span><br><span class=\"line\">System clock synchronized: no                        </span><br><span class=\"line\">              NTP service: active                    </span><br><span class=\"line\">          RTC <span class=\"keyword\">in</span> <span class=\"built_in\">local</span> TZ: no</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>6.2 时间修改机硬件时间同步:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 修改时间</span></span><br><span class=\"line\">sudo date -s MM/DD/YY  <span class=\"comment\">#修改日期</span></span><br><span class=\"line\">sudo date -s hh:mm:ss  <span class=\"comment\">#修改时间</span></span><br><span class=\"line\">sudo timedatectl <span class=\"built_in\">set</span>-time   <span class=\"comment\">#日期时间</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 修改硬件CMOS的时间</span></span><br><span class=\"line\">sudo hwclock --systohc  <span class=\"comment\">#非常重要如果没有这一步的话后面时间还是不准</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>补充如果是Desktop版本建议在/etc/profile或者关闭自动根据网络选择时区;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># sudo vi /etc/profile</span></span><br><span class=\"line\">sudo timedatectl <span class=\"built_in\">set</span>-timezone UTC</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<h3 id=\"0x02-桌面版本配置\"><a href=\"#0x02-桌面版本配置\" class=\"headerlink\" title=\"0x02 桌面版本配置\"></a>0x02 桌面版本配置</h3><p>注意: 如果是远程操作一定要注意开放ssh端口否则有可能关机后无法连接;</p>\n<h4 id=\"1-远程共享配置\"><a href=\"#1-远程共享配置\" class=\"headerlink\" title=\"1.远程共享配置\"></a>1.远程共享配置</h4><p><br></p>\n<p><strong>方式1: 采用 xrdp 方式远程连接Ubuntu</strong><br>Step 1.在系统设置里共享打开屏幕共享并远程登陆时的密码并查询其IP地址。（它将会是Windows远程登录时需要输入的密码,注意如果是设置防护墙请设置放行）<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># - 卸载系统原有的xrdp当出现错误时重新安装即可</span></span><br><span class=\"line\">sudo apt purge xrdp</span><br><span class=\"line\">sudo apt purge xserver-xorg-core</span><br><span class=\"line\">sudo apt purge xserver-xorg-input-all</span><br><span class=\"line\">sudo apt purge xorgxrdp</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># - </span></span><br><span class=\"line\">ip addr</span><br></pre></td></tr></table></figure><br>Step 2.安装xrdp与dconf-editor。<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt install xrdp dconf-editor</span><br><span class=\"line\">sudo apt install xserver-xorg-core</span><br><span class=\"line\">sudo apt install xserver-xorg-input-all</span><br><span class=\"line\">sudo apt install xorgxrdp</span><br></pre></td></tr></table></figure></p>\n<p>Step 3.启动软件”dconf-editor”，打开之后依次展开<code>org-&gt;gnome-&gt;desktop-&gt;remote-access</code>然后取消 <code>&quot;requlre-encryption&quot;</code>的勾选即可 以及 您还需要为xrdp用户授予对/etc/ssl/private/ssl-cert-snakeoil.key文件的访问权。默认情况下，ssl证书组的成员可以使用它。<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># - 用户组添加建议使用xrdp时修改其缺省的3389端口</span></span><br><span class=\"line\">sudo adduser xrdp ssl-cert</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 自启设置</span></span><br><span class=\"line\">sudo systemctl start xrdp </span><br><span class=\"line\">sudo systemctl <span class=\"built_in\">enable</span> xrdp</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 防火墙设置 </span></span><br><span class=\"line\">sudo ufw allow 3389</span><br><span class=\"line\">sudo ufw allow from 10.5.5.0/24 to any port 3389</span><br><span class=\"line\">sudo reboot</span><br></pre></td></tr></table></figure></p>\n<ul>\n<li>Step 5.重启后利用windows远程桌面工具进行连接xrdp,例如<code>192.168.1.215</code>实例连接后如下图所示。</li>\n</ul>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/5/20210703203903.png\" alt=\"WeiyiGeek.xrdp\" title=\"\" class=\"\">\n                <p>WeiyiGeek.xrdp</p>\n            </figure>\n<p>Tips ：xrdp 连接黑屏问题解决，只需在startwm.sh中添加两行就可以允许多个会话，这样您就不必注销或进入黑屏就可以处理20.04 LTS。<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nano /etc/xrdp/startwm.sh</span><br><span class=\"line\"><span class=\"comment\"># 添加以下命令在头部</span></span><br><span class=\"line\"><span class=\"built_in\">unset</span> DBUS_SESSION_BUS_ADDRESS</span><br><span class=\"line\"><span class=\"built_in\">unset</span> XDG_RUNTIME_DIR</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<p><strong>方式2: 采用 VNC 方式远程连接Ubuntu</strong></p>\n<p>描述:Ubuntu 20.04桌面版本系统默认自带VNC Server我们只需要开启共享即可，但是可能连接时候会出现下列错误；<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 错误信息</span></span><br><span class=\"line\">Unable to connect to VNC Server using your chosen security</span><br><span class=\"line\">setting. Either upgrade VNC Server to a more recent version from</span><br><span class=\"line\">RealVNC, or select a weaker level of encryption. </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># (1) 解决办法在服务器端使用以下命令降低服务器端的安全等级（不推荐）。</span></span><br><span class=\"line\"><span class=\"variable\">$gsettings</span> <span class=\"built_in\">set</span> org.gnome.Vino enabled <span class=\"literal\">true</span>   <span class=\"comment\"># 貌似不支持</span></span><br><span class=\"line\"><span class=\"variable\">$gsettings</span> <span class=\"built_in\">set</span> org.gnome.Vino prompt-enabled <span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"variable\">$gsettings</span> <span class=\"built_in\">set</span> org.gnome.Vino require-encryption <span class=\"literal\">false</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># (2) 开机自启</span></span><br><span class=\"line\">&gt; ll /usr/lib/vino/vino-server</span><br><span class=\"line\">-rwxr-xr-x 1 root root 278K 10月  6 22:33 /usr/lib/vino/vino-server</span><br><span class=\"line\">&gt; ln -s /usr/lib/vino/vino-server /etc/init.d/vino-server</span><br></pre></td></tr></table></figure><br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20200813215029.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure></p>\n<p>参考：<a href=\"https://kuricat.com/gist/snap-install-too-slow-zmbjy\" target=\"_blank\" rel=\"noopener\">https://kuricat.com/gist/snap-install-too-slow-zmbjy</a></p>\n<p><br/></p>\n<p>PS: 采用上面的方式即安装的共享桌面依赖于显示器，如果显示器没有打开则不能通过VNC进行连接,所以我们需要安装X11VNC服务并且设置虚拟桌面从而可以在无显示器的情况下连接VNC桌面;</p>\n<p><strong>配置流程步骤</strong><br>Step 1.配置用户自动登陆(非常重要否则在机器重启后VNC无法连接);</p>\n<blockquote>\n<p>设置 -&gt; 用户 -&gt; Unlock -&gt; 自动登陆(启用)</p>\n</blockquote>\n<p>Step 2.x11vnc安装与配置</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 安装 x11vnc 与虚拟显卡驱动</span></span><br><span class=\"line\">&gt; sudo apt-get install x11vnc -y</span><br><span class=\"line\">&gt; sudo apt install xserver-xorg-video-dummy</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 设置vnc密码</span></span><br><span class=\"line\">&gt; sudo x11vnc -storepasswd /etc/x11vnc.pass </span><br><span class=\"line\">Enter VNC password: </span><br><span class=\"line\">Verify password:    </span><br><span class=\"line\">Write password to /etc/x11vnc.pass?  [y]/n y</span><br><span class=\"line\">Password written to: /etc/x11vnc.pass</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 创建自启服务</span></span><br><span class=\"line\">&gt; sudo systemctl edit --force --full x11vnc.service</span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=Start x11vnc at startup.</span><br><span class=\"line\">After=multi-user.target</span><br><span class=\"line\">[Service]</span><br><span class=\"line\">Type=simple</span><br><span class=\"line\">ExecStart=/usr/bin/x11vnc -auth /run/user/1000/gdm/Xauthority -forever -loop -noxdamage -repeat -rfbauth /etc/x11vnc.pass -rfbport 5900 -shared -capslock -nomodtweak</span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 防止键盘错位-capslock -nomodtweak</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 启动x11vnc服务和自启</span></span><br><span class=\"line\">sudo systemctl <span class=\"built_in\">enable</span> x11vnc</span><br><span class=\"line\">sudo systemctl start x11vnc</span><br></pre></td></tr></table></figure>\n<p>Step 3.设置在远程主机物理是否有显示器我们都能够通过VNC进行远程访问;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 创建默认的 xorg.conf 文件(此时程序会生成/root/xorg.conf.new文件)</span></span><br><span class=\"line\">sudo Xorg :1 -configure</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 将生成的 xorg.conf 文件复制到xorg.conf</span></span><br><span class=\"line\">sudo cp -a /root/xorg.conf.new /usr/share/X11/xorg.conf.d/xorg.conf</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 创建了一个使用虚拟显卡的虚拟显示器</span></span><br><span class=\"line\">sudo tee -a /usr/share/X11/xorg.conf.d/xorg.conf&lt;&lt;<span class=\"string\">'EOF'</span></span><br><span class=\"line\">Section <span class=\"string\">\"Monitor\"</span></span><br><span class=\"line\">  Identifier <span class=\"string\">\"Monitor1\"</span></span><br><span class=\"line\">  HorizSync   1.0 - 2000.0</span><br><span class=\"line\">  VertRefresh 1.0 - 200.0</span><br><span class=\"line\">  <span class=\"comment\"># Add 16:9 modes, others are automatically detected.</span></span><br><span class=\"line\">  Modeline <span class=\"string\">\"1280x720\"</span> 74.48 1280 1336 1472 1664 720 721 724 746</span><br><span class=\"line\">  Modeline <span class=\"string\">\"1920x1080\"</span> 172.80 1920 2040 2248 2576 1080 1081 1084 1118</span><br><span class=\"line\">EndSection</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Section <span class=\"string\">\"Device\"</span></span><br><span class=\"line\">  Identifier <span class=\"string\">\"Card1\"</span></span><br><span class=\"line\">  Driver <span class=\"string\">\"dummy\"</span></span><br><span class=\"line\">  VideoRam 256000</span><br><span class=\"line\">EndSection</span><br><span class=\"line\"></span><br><span class=\"line\">Section <span class=\"string\">\"Screen\"</span></span><br><span class=\"line\">  DefaultDepth 24</span><br><span class=\"line\">  Identifier <span class=\"string\">\"Screen1\"</span></span><br><span class=\"line\">  Device <span class=\"string\">\"Card1\"</span></span><br><span class=\"line\">  Monitor <span class=\"string\">\"Monitor1\"</span></span><br><span class=\"line\">  SubSection <span class=\"string\">\"Display\"</span></span><br><span class=\"line\">    Depth 24</span><br><span class=\"line\">    Modes <span class=\"string\">\"1920x1080\"</span></span><br><span class=\"line\">  EndSubSection</span><br><span class=\"line\">EndSection</span><br><span class=\"line\">EOF</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 为了让虚拟的显示器和真实显示器都能工作，我们需要把最上面的 ServerLayout 进行更改</span></span><br><span class=\"line\">Sudo sed -i <span class=\"string\">'4i\\Screen      1  \"Screen1\" 0 0'</span> /usr/share/X11/xorg.conf.d/xorg.conf</span><br></pre></td></tr></table></figure></p>\n<p>Step 4.重启机器然后再windows中利用 VNC View 进行连接;</p>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/2/20201105151346.png\" alt=\"WeiyiGeek.VNC连接\" title=\"\" class=\"\">\n                <p>WeiyiGeek.VNC连接</p>\n            </figure>\n<p>参考地址: <a href=\"https://blog.csdn.net/bluewhalerobot/article/details/106770429\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/bluewhalerobot/article/details/106770429</a>?</p>\n<p>Tips: 三种远程登录方式比较<br>vino-server     | Xrdp |     vnc-server<br>优点:系统自带，配置简单 |    配置简单，可用windows自带的远程桌面登录    | 配置简单,但不一定能成功连接远程桌面 |<br>缺点:重启后必须登录个人桌面后才可启动    | root用户登陆不容易出错，普通用户容易出错 |出错不好解决|</p>\n<p>综合我自己尝试这三种远程桌面登录ubuntu的方式，我觉得使用vino-server最方便，在这个基础上，安装xrdp服务，然后在windows系统中使用自带的远程登录工具时，使用VNC-any的方式登录远程桌面，这样就可以避免下载vnc viewer，使用起来跟windows远程登录方式也无差别。</p>\n<hr>\n<h4 id=\"2-常用软件安装\"><a href=\"#2-常用软件安装\" class=\"headerlink\" title=\"2.常用软件安装\"></a>2.常用软件安装</h4><p>描述:主要在Ubuntu 20.04 TLS 安装以下工具集:</p>\n<ul>\n<li>网络管理: net-tools</li>\n<li>运维工作: Terminator / zsh / oh-my-zsh</li>\n<li>开发工具: git</li>\n<li>通信工具: minicom (串口通信工具) / sshd </li>\n<li>写作工具: typora / wps </li>\n<li>输入法工具: fctix-baidu / fctix-sougou / fctix</li>\n<li>娱乐工具 : 网易云音乐 / QQ</li>\n</ul>\n<p><br></p>\n<p><strong>安装Shell脚本:</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 网络管理 # </span></span><br><span class=\"line\"><span class=\"comment\"># ifconfig</span></span><br><span class=\"line\">sudo apt-get -y install net-tools</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 开发工具 #</span></span><br><span class=\"line\"><span class=\"comment\"># git</span></span><br><span class=\"line\">sudo apt -y install git</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 运维工作 # </span></span><br><span class=\"line\"><span class=\"comment\"># Terminator</span></span><br><span class=\"line\">sudo apt-get -y install terminator</span><br><span class=\"line\"><span class=\"comment\"># zsh</span></span><br><span class=\"line\">sudo apt-get -y install zsh </span><br><span class=\"line\"><span class=\"comment\"># oh-my-zsh</span></span><br><span class=\"line\">sudo apt install curl <span class=\"comment\"># 先安装 curl</span></span><br><span class=\"line\">sh -c <span class=\"string\">\"<span class=\"variable\">$(curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)</span>\"</span> </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 通信工具 # </span></span><br><span class=\"line\"><span class=\"comment\"># minicom - 调试嵌入式系统必备工具</span></span><br><span class=\"line\">sudo apt-get -y install minicom</span><br><span class=\"line\">sudo apt-get -y install ssh</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 写作工具 #</span></span><br><span class=\"line\"><span class=\"comment\"># typora : https://typora.io/#linux</span></span><br><span class=\"line\"><span class=\"comment\"># sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys BA300B7755AFCFAE</span></span><br><span class=\"line\">wget -qO - https://typora.io/linux/public-key.asc | sudo apt-key add -</span><br><span class=\"line\"><span class=\"comment\"># add Typora's repository</span></span><br><span class=\"line\">sudo add-apt-repository <span class=\"string\">'deb https://typora.io/linux ./'</span></span><br><span class=\"line\">sudo apt-get update</span><br><span class=\"line\"><span class=\"comment\"># install typora</span></span><br><span class=\"line\">sudo apt-get install typora</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 输入法工具 # </span></span><br><span class=\"line\"><span class=\"comment\"># 注意: Ubuntu 在安装中文语系系统自带有一个智能拼音且输入法系统为iBus，如果安装google或者百度输入法则需要安装切换为fcitx</span></span><br><span class=\"line\">sudo apt install fcitx</span><br><span class=\"line\"><span class=\"comment\"># 搜狗 : https://pinyin.sogou.com/linux/?r=pinyin</span></span><br><span class=\"line\"><span class=\"comment\"># 百度 ：https://srf.baidu.com/site/guanwang_linux/index.html</span></span><br><span class=\"line\">sudo apt  install fcitx-bin fcitx-table fcitx-config-gtk fcitx-config-gtk2 fcitx-frontend-all</span><br><span class=\"line\">sudo apt install qt5-default qtcreator qml-module-qtquick-controls2</span><br><span class=\"line\">sudo dpkg -i fcitx-baidupinyin.deb                <span class=\"comment\"># 安装百度输入法</span></span><br><span class=\"line\">sudo dpkg --purge remove fcitx-baidupinyin:amd64  <span class=\"comment\"># 卸载</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 娱乐工具 #</span></span><br><span class=\"line\"><span class=\"comment\"># 网易云 : https://music.163.com/#/download</span></span><br><span class=\"line\">&gt; sudo dpkg -i netease-cloud-music_1.2.1_amd64_ubuntu_20190428.deb   </span><br><span class=\"line\"><span class=\"comment\"># 腾讯QQ (Linux) : https://im.qq.com/linuxqq/download.html</span></span><br><span class=\"line\">wget http://down.qq.com/qqweb/LinuxQQ/linuxqq_2.0.0-b2-1084_amd64.deb</span><br><span class=\"line\">sudo dpkg -i linuxqq_2.0.0-b2-1084_amd64.deb</span><br><span class=\"line\">sudo dpkg -r linuxqq  <span class=\"comment\">#卸载QQ</span></span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<p><strong>配置工具集:</strong></p>\n<ul>\n<li><p>(1) Terminaltor 终端优化</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 1.优化 Terminator 界面方案</span></span><br><span class=\"line\">mkdir ~/.config/terminator/</span><br><span class=\"line\">touch ~/.config/terminator/config</span><br><span class=\"line\">gedit ~/.config/terminator/config</span><br><span class=\"line\">[global_config]</span><br><span class=\"line\">  suppress_multiple_term_dialog = True</span><br><span class=\"line\">[keybindings]</span><br><span class=\"line\">[profiles]</span><br><span class=\"line\">  [[default]]</span><br><span class=\"line\">    background_color = <span class=\"string\">\"#002b36\"</span></span><br><span class=\"line\">    background_darkness = 0.92</span><br><span class=\"line\">    background_type = transparent</span><br><span class=\"line\">    cursor_color = <span class=\"string\">\"#3036ec\"</span></span><br><span class=\"line\">    font = Ubuntu Mono 15</span><br><span class=\"line\">    foreground_color = <span class=\"string\">\"#839496\"</span></span><br><span class=\"line\">    show_titlebar = False</span><br><span class=\"line\">    login_shell = True</span><br><span class=\"line\">    custom_command = tmux</span><br><span class=\"line\">    use_system_font = False</span><br><span class=\"line\">[layouts]</span><br><span class=\"line\">  [[default]]</span><br><span class=\"line\">    [[[window0]]]</span><br><span class=\"line\">      <span class=\"built_in\">type</span> = Window</span><br><span class=\"line\">      parent = <span class=\"string\">\"\"</span></span><br><span class=\"line\">    [[[child1]]]</span><br><span class=\"line\">      <span class=\"built_in\">type</span> = Terminal</span><br><span class=\"line\">      parent = window0</span><br><span class=\"line\">[plugins]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 2.Terminator 设置为默认的终端(实际测试中无需安装)</span></span><br><span class=\"line\">sudo apt-get -y install dconf-editor</span><br><span class=\"line\">dconf-editor</span><br><span class=\"line\"><span class=\"comment\"># 依次打开 org --&gt; gnome --&gt; desktop --&gt; terminal, 输入以下内容：</span></span><br><span class=\"line\"><span class=\"built_in\">exec</span>：  x-terminal-emulator</span><br><span class=\"line\"><span class=\"built_in\">exec</span>-arg：  -e</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 3.Ctrl + Alt + T 启动 Terminator</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>(2) zsh 与 oh-my-zsh 基础配置</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># (1) 设置 zsh 为默认的 shell</span></span><br><span class=\"line\">chsh -s /bin/zsh </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># (2) oh-my-zsh 默认主题配置文件在 ~/.zshrc 后续配置中会使用到</span></span><br><span class=\"line\">touch ~/.zshrc</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># (3) zsh 插件</span></span><br><span class=\"line\"><span class=\"comment\"># 语法高亮插件 zsh-syntax-highlighting</span></span><br><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/zsh-users/zsh-syntax-highlighting.git <span class=\"variable\">$&#123;ZSH_CUSTOM:-~/.oh-my-zsh&#125;</span>/plugins/zsh-syntax-highlighting</span><br><span class=\"line\"><span class=\"comment\"># 自动提示插件 zsh-autosuggestions(快速补齐快捷键ALT+E行位，ALT+F匹配一个语句)</span></span><br><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/zsh-users/zsh-autosuggestions.git <span class=\"variable\">$&#123;ZSH_CUSTOM:-~/.oh-my-zsh&#125;</span>/plugins/zsh-autosuggestions</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># (4) 在 .zshrc 文件添加插件以及主题</span></span><br><span class=\"line\"><span class=\"comment\"># See https://github.com/ohmyzsh/ohmyzsh/wiki/Themes</span></span><br><span class=\"line\"><span class=\"comment\"># 缺省主题 \"robbyrussell\"  </span></span><br><span class=\"line\"><span class=\"comment\"># 推荐主题: juanghurtado 、kardan、agnoster</span></span><br><span class=\"line\">ZSH_THEME=<span class=\"string\">\"agnoster\"</span></span><br><span class=\"line\">plugins=(git zsh-syntax-highlighting zsh-autosuggestions)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># (5) 执行source使配置生效：</span></span><br><span class=\"line\">$ <span class=\"built_in\">source</span> .zshrc</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/1/20201017103054.png\" alt=\"WeiyiGeek.terminal与oh-my-zsh\" title=\"\" class=\"\">\n                <p>WeiyiGeek.terminal与oh-my-zsh</p>\n            </figure>\n<ul>\n<li>(3) 输入法设置<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 1.假设前面您已经安装fcitx，此处以安装谷歌拼音输入法（Google Pinyin）为例，首先在系统终端中输入命令：</span></span><br><span class=\"line\">im-config <span class=\"comment\">#注：im-config是Input Method Configuration的缩写。</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 2.在用户配置设置系统中必须选中Fcitx，然后选择Yes , 然后重启机器</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 3.安装谷歌拼音输入法（Google Pinyin）非常简单，只需要下面这个命令：</span></span><br><span class=\"line\">sudo apt install fcitx-googlepinyin</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 4. 安装后运行如下命令配置谷歌拼音输入法 或者在右上角进行点击：</span></span><br><span class=\"line\">fcitx-config-gtk3</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 5.打开Input Method Confuguration窗口，点击左下角 + 号，添加Google Pinyin 输入法</span></span><br><span class=\"line\"><span class=\"comment\"># 注意最下面的输入法即默认激活的输入法;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 6.最后用快捷键：Ctrl+Shift 切换输入法</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/2/20201024101448.png\" alt=\"WeiyiGeek.输入法\" title=\"\" class=\"\">\n                <p>WeiyiGeek.输入法</p>\n            </figure>\n<p><br></p>\n<ul>\n<li>(4) ssh 密钥生成与加载<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; ssh-keygen -t ed25519 -f ~/.ssh/id_sec_ed25519 -C <span class=\"string\">\"master@weiyigeek.top\"</span> </span><br><span class=\"line\">&gt; ssh-keygen -t rsa -C <span class=\"string\">\"master@weiyigeek.top\"</span> </span><br><span class=\"line\">weiyigeek@Ubuntu-PC:~/.ssh</span><br><span class=\"line\">&gt; ls                                                       </span><br><span class=\"line\">id_rsa  id_rsa.pub  id_sec_ed25519  id_sec_ed25519.pub</span><br><span class=\"line\">&gt; ssh-agent bash</span><br><span class=\"line\">&gt; ssh-add ~/.ssh/id_sec_ed25519  <span class=\"comment\"># 私钥加载</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><br></p>\n<h4 id=\"3-常用工具补充\"><a href=\"#3-常用工具补充\" class=\"headerlink\" title=\"3.常用工具补充\"></a>3.常用工具补充</h4><h5 id=\"截图工具\"><a href=\"#截图工具\" class=\"headerlink\" title=\"截图工具\"></a>截图工具</h5><p><strong>peek</strong><br>描述: Peek 可以生成轻量级的GIF 图片, 也可以生成 MP4、APNG和WebM格式<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 1. 打开命令行后,获取Peek的PPA源(如果不行，多试几次)</span></span><br><span class=\"line\">sudo add-apt-repository ppa:peek-developers/stable</span><br><span class=\"line\"><span class=\"comment\"># 2. 更新源</span></span><br><span class=\"line\">sudo apt-get update</span><br><span class=\"line\"><span class=\"comment\"># 3. 安装peek</span></span><br><span class=\"line\">sudo apt-get install peek</span><br><span class=\"line\"><span class=\"comment\"># 4. 运行peek</span></span><br></pre></td></tr></table></figure></p>\n<p>使用说明: 使用peek后可以把目标对象放进进Peek 的框架里面， 然后点击最左上角的图标进行录制GIF图片，再次点击最左上角的图标停止录制GIF图片，然后自动弹出保存界面：</p>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/2/20201024120731.png\" alt=\"WeiyiGeek.Peek\" title=\"\" class=\"\">\n                <p>WeiyiGeek.Peek</p>\n            </figure>\n<p><br/></p>\n<p><strong>Kazam</strong><br>描述: Kazam 是一个很轻量级的屏幕录制工具，也可以用来截图。<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo apt install kazam</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<h5 id=\"版本控制\"><a href=\"#版本控制\" class=\"headerlink\" title=\"版本控制\"></a>版本控制</h5><p><strong>Meld</strong><br>描述:Meld 是类似 Beyong Compare 的一种优秀的文件或目录比较软件，并支持许多流行的版本控制系统。<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo apt-get install meld</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<h5 id=\"视频工具\"><a href=\"#视频工具\" class=\"headerlink\" title=\"视频工具\"></a>视频工具</h5><p><strong>VLC</strong><br>描述:VLC是一个好用的视频播放器<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo apt install vlc</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<h5 id=\"Wine-工具\"><a href=\"#Wine-工具\" class=\"headerlink\" title=\"Wine 工具\"></a>Wine 工具</h5><p>Q: 什么是 wine ?</p>\n<blockquote>\n<p>答: 它是能够在多种 POSIX-compliant 操作系统（诸如 Linux，Mac OSX 及 BSD 等）上运行 Windows 应用的兼容层;<br>简单的说就是可以在Linux上运行某些exe的可执行文件;</p>\n</blockquote>\n<p>补充深度官方软件下载: <a href=\"https://mirrors.huaweicloud.com/deepin/pool/non-free/d/\" target=\"_blank\" rel=\"noopener\">https://mirrors.huaweicloud.com/deepin/pool/non-free/d/</a></p>\n<p><strong>Wine安装</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 1.我们需要在64位操作系统上支持32位应用，则需要添加32位架构的支持(`大部分的机器都是 x86_64 位的架构默认不支持 32 位应用程序`)</span></span><br><span class=\"line\">sudo dpkg --add-architecture i386</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 2.更新源与wine安装</span></span><br><span class=\"line\">sudo wget -nc https://dl.winehq.org/wine-builds/winehq.key &amp;&amp; sudo apt-key add winehq.key</span><br><span class=\"line\">sudo add-apt-repository <span class=\"string\">'deb https://dl.winehq.org/wine-builds/ubuntu/ focal main'</span> </span><br><span class=\"line\">sudo apt update</span><br><span class=\"line\"><span class=\"comment\"># sudo apt install wine-stable   # Ubuntu</span></span><br><span class=\"line\"><span class=\"comment\"># sudo apt install --install-recommends winehq-stable # 官网</span></span><br><span class=\"line\"><span class=\"comment\"># deepin-wine 安装参考 https://gitee.com/wszqkzqk/deepin-wine-for-ubuntu</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 3.</span></span><br><span class=\"line\">&gt; dpkg --list | grep <span class=\"string\">\"wine\"</span></span><br><span class=\"line\">ii  deepin-fonts-wine                          2.18-22~rc0                         all          Windows API implementation - fonts</span><br><span class=\"line\">ii  deepin-libwine:i386                        2.18-22~rc0                         i386         Windows API implementation - library</span><br><span class=\"line\">ii  deepin-wine                                2.18-22~rc0                         all          Windows API implementation - standard suite</span><br><span class=\"line\">ii  deepin-wine-binfmt                         2.18-12                             all          Windows API implementation - binfmt support</span><br><span class=\"line\">ii  deepin-wine-helper:i386                    1.2deepin8                          i386         Deepin Wine Helper</span><br><span class=\"line\">ii  deepin-wine-plugin                         1.0deepin2                          amd64        Deepin Wine plugin</span><br><span class=\"line\">ii  deepin-wine-plugin-virtual                 1.0deepin3                          all          Deepin Wine plugin virtual package</span><br><span class=\"line\">ii  deepin-wine-uninstaller:i386               0.1deepin2                          i386         Deepin Wine Uninstaller Tool</span><br><span class=\"line\">ii  deepin-wine32:i386                         2.18-22~rc0                         i386         Windows API implementation - 32-bit binary loader</span><br><span class=\"line\">ii  deepin-wine32-preloader:i386               2.18-22~rc0                         i386         Windows API implementation - prelinked 32-bit binary loader</span><br><span class=\"line\">ii  fonts-wine                                 5.0-3ubuntu1                        all          Windows API implementation - fonts</span><br><span class=\"line\">ii  libwine:amd64                              5.0-3ubuntu1                        amd64        Windows API implementation - library</span><br><span class=\"line\">ii  libwine:i386                               5.0-3ubuntu1                        i386         Windows API implementation - library</span><br><span class=\"line\">ri  wine                                       5.0-3ubuntu1                        all          Windows API implementation - standard suite</span><br><span class=\"line\">ii  wine-stable                                3.0.1ubuntu1                        all          Windows API implementation (transitional package)</span><br><span class=\"line\">ii  wine32:i386                                5.0-3ubuntu1                        i386         Windows API implementation - 32-bit binary loader</span><br><span class=\"line\">ii  wine64                                     5.0-3ubuntu1                        amd64        Windows API implementation - 64-bit binary loader</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 4.利用Wine进行安装使用微信与QQ</span></span><br><span class=\"line\">sudo wget <span class=\"string\">\"https://mirrors.huaweicloud.com/deepin/pool/non-free/d/deepin.com.wechat/deepin.com.wechat_2.6.8.65deepin0_i386.deb\"</span> -O /home/weiyigeek/下载/deepin.com.wechat_2.6.8.65deepin0_i386.deb</span><br><span class=\"line\">sudo wget <span class=\"string\">\"https://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.qq.office/deepin.com.qq.office_2.0.0deepin4_i386.deb\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">&gt; sudo dpkg -i *qq.office*deb</span><br><span class=\"line\"><span class=\"comment\"># (正在读取数据库 ... 系统当前共安装有 235251 个文件和目录。)</span></span><br><span class=\"line\"><span class=\"comment\"># 准备解压 deepin.com.qq.office_2.0.0deepin4_i386.deb  ...</span></span><br><span class=\"line\"><span class=\"comment\"># 正在解压 deepin.com.qq.office:i386 (2.0.0deepin4) 并覆盖 (2.0.0deepin4) ...</span></span><br><span class=\"line\"><span class=\"comment\"># 正在设置 deepin.com.qq.office:i386 (2.0.0deepin4) ...</span></span><br><span class=\"line\"><span class=\"comment\"># 正在处理用于 gnome-menus (3.36.0-1ubuntu1) 的触发器 ...</span></span><br><span class=\"line\"><span class=\"comment\"># 正在处理用于 desktop-file-utils (0.24-1ubuntu3) 的触发器 ...</span></span><br><span class=\"line\"><span class=\"comment\"># 正在处理用于 mime-support (3.64ubuntu1) 的触发器 ...</span></span><br><span class=\"line\"><span class=\"comment\"># 正在处理用于 hicolor-icon-theme (0.17-2) 的触发器 ...</span></span><br><span class=\"line\">&gt; sudo dpkg -i deepin.com.qq.office*</span><br><span class=\"line\"><span class=\"comment\"># 正在选中未选择的软件包 deepin.com.wechat:i386。</span></span><br><span class=\"line\"><span class=\"comment\"># (正在读取数据库 ... 系统当前共安装有 235238 个文件和目录。)</span></span><br><span class=\"line\"><span class=\"comment\"># 准备解压 deepin.com.wechat_2.6.8.65deepin0_i386.deb  ...</span></span><br><span class=\"line\"><span class=\"comment\"># 正在解压 deepin.com.wechat:i386 (2.6.8.65deepin0) ...</span></span><br><span class=\"line\"><span class=\"comment\"># 正在设置 deepin.com.wechat:i386 (2.6.8.65deepin0) ...</span></span><br><span class=\"line\"><span class=\"comment\"># 正在处理用于 gnome-menus (3.36.0-1ubuntu1) 的触发器 ...</span></span><br><span class=\"line\"><span class=\"comment\"># 正在处理用于 desktop-file-utils (0.24-1ubuntu3) 的触发器 ...</span></span><br><span class=\"line\"><span class=\"comment\"># 正在处理用于 mime-support (3.64ubuntu1) 的触发器 ...</span></span><br><span class=\"line\"><span class=\"comment\"># 正在处理用于 hicolor-icon-theme (0.17-2) 的触发器 ...</span></span><br></pre></td></tr></table></figure></p>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/2/20201028171741.png\" alt=\"WeiyiGeek.Wine-QQ-Wechat\" title=\"\" class=\"\">\n                <p>WeiyiGeek.Wine-QQ-Wechat</p>\n            </figure>\n<p><br></p>\n<h4 id=\"4-WPS-安装\"><a href=\"#4-WPS-安装\" class=\"headerlink\" title=\"4.WPS 安装\"></a>4.WPS 安装</h4><p>描述: 虽然 Ubuntu 内置 LibreOffice 文档编辑器 , 个人更偏向于WPS其完善的功能(PS:唯一不足就是广告太多)<br>官网: <a href=\"https://linux.wps.cn/\" target=\"_blank\" rel=\"noopener\">https://linux.wps.cn/</a> </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># (1) 下载安装</span></span><br><span class=\"line\">$ wget https://wdl1.cache.wps.cn/wps/download/ep/Linux2019/9711/wps-office_11.1.0.9711_amd64.deb</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># (2) 安装WPS</span></span><br><span class=\"line\">$ sudo dpkg -i wps-office_11.1.0.9711_amd64.deb</span><br></pre></td></tr></table></figure>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/2/20201024114822.png\" alt=\"WeiyiGeek.WPS\" title=\"\" class=\"\">\n                <p>WeiyiGeek.WPS</p>\n            </figure>\n<p>说明： 在Ubuntu 20.04中在使用WPS时没有出现系统缺失字体的问题，而这个问题在以前是很常见的</p>\n<p><br></p>\n<h4 id=\"5-Pycharm-安装\"><a href=\"#5-Pycharm-安装\" class=\"headerlink\" title=\"5.Pycharm 安装\"></a>5.Pycharm 安装</h4><p>描述:Pycharm 是一款进行Python开发的IDE编辑器由jetbrains公司进行开发的同样与大多数商业软件一样，它也有的专业版与社区免费版本以及教育的版本;</p>\n<p>本次演示在Ubuntu 20.04 TLS 中下载安装<code>Pycharm</code>专业版，系统依赖;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># System requirements</span></span><br><span class=\"line\">  GNOME or KDE desktop</span><br><span class=\"line\">  2 GB RAM minimum, 8 GB RAM recommended</span><br><span class=\"line\">  2.5 GB hard disk space, SSD recommended</span><br><span class=\"line\">  1024x768 minimum screen resolution</span><br><span class=\"line\">  Python 2.7, or Python 3.5 or newer</span><br><span class=\"line\"></span><br><span class=\"line\">Note: JetBrains Runtime (JBR) 11 is included with the PyCharm distribution. You <span class=\"keyword\">do</span> not need to install Java on your computer to run PyCharm.</span><br></pre></td></tr></table></figure><br>官方下载地址：<a href=\"https://www.jetbrains.com/pycharm/download/#section=linux\" target=\"_blank\" rel=\"noopener\">https://www.jetbrains.com/pycharm/download/#section=linux</a></p>\n<p>操作流程:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># (1) 安装 Pycharm 首先解压安装包 pycharm-professional-2020.1.tar.gz pycharm-2020.1</span></span><br><span class=\"line\">tar -zxvf pycharm-professional-2020.1.tar.gz pycharm-2020.1/</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># (2) 建立软件存放路径</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> ~/app/program/pycharm-professional/  &amp;&amp; ls</span><br><span class=\"line\">&gt; ls     </span><br><span class=\"line\">bin        debug-eggs  index                  jbr  license  product-info.json</span><br><span class=\"line\">build.txt  <span class=\"built_in\">help</span>        Install-Linux-tar.txt  lib  plugins  pycharm-2020.2.3</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># (3) 初始化 Pycharm 稍后会弹出一个窗口选择同意并且设置可用命令行启动charm;</span></span><br><span class=\"line\">./bin/pycharm.sh</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># (4) 设置桌面图标在创建项目的页面上选择configure之后选择 Create Desktop Entry(注意需要进行认证)或者手动创立桌面图标;</span></span><br><span class=\"line\">$ cat /usr/share/applications/jetbrains-pycharm.desktop </span><br><span class=\"line\">[Desktop Entry]</span><br><span class=\"line\">Version=1.0</span><br><span class=\"line\">Type=Application</span><br><span class=\"line\">Name=PyCharm Professional Edition</span><br><span class=\"line\">Icon=~/app/program/pycharm-professional/bin/pycharm.svg</span><br><span class=\"line\">Exec=<span class=\"string\">\"~/app/program/pycharm-professional/bin/pycharm.sh\"</span> %f</span><br><span class=\"line\">Comment=Python IDE <span class=\"keyword\">for</span> Professional Developers</span><br><span class=\"line\">Categories=Development;IDE;</span><br><span class=\"line\">Terminal=<span class=\"literal\">false</span></span><br><span class=\"line\">StartupWMClass=jetbrains-pycharm</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># (5) 命令行启动Pycharm</span></span><br><span class=\"line\">$ charm</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># (6) 配置Python环境，默认情况下Pycharm新建工程的话，可能会创建失败会报错，比如“错误提示：ModuleNotFoundError: No module named ‘distutils.util’ ”</span></span><br><span class=\"line\"><span class=\"comment\"># 此时我们需要安装pip 以及 python3-distutils</span></span><br><span class=\"line\">sudo apt -y install python3-pip python3-distutils</span><br></pre></td></tr></table></figure></p>\n<p>优化配置:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># (1) 配置字体</span></span><br><span class=\"line\"><span class=\"comment\"># File -&gt; Setting -&gt; Editor -&gt; Font </span></span><br><span class=\"line\">Font: DialogInput</span><br><span class=\"line\">Size: 18</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># (2) 安装插件(注意需要重启IDE)</span></span><br><span class=\"line\"><span class=\"comment\"># File -&gt; Setting -&gt; Plugings </span></span><br><span class=\"line\">0) chines ：界面语言</span><br><span class=\"line\">1）statistic： 项目统计</span><br><span class=\"line\">2）Rainbow Brackets：让代码块之间很清晰的显示出各种颜色</span><br><span class=\"line\">3）.ignore：使用git的人知道，也就是.gitignore</span><br></pre></td></tr></table></figure></p>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/2/20201025232441.png\" alt=\"WeiyiGeek.插件安装与使用\" title=\"\" class=\"\">\n                <p>WeiyiGeek.插件安装与使用</p>\n            </figure>\n<p>基础Pycharm使用：新建项目 -&gt; python -&gt; 选择 python版本<br><figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/2/20201025231905.png\" alt=\"WeiyiGeek.runPython\" title=\"\" class=\"\">\n                <p>WeiyiGeek.runPython</p>\n            </figure></p>\n<hr>\n<h3 id=\"0x03-服务器版本配置\"><a href=\"#0x03-服务器版本配置\" class=\"headerlink\" title=\"0x03 服务器版本配置\"></a>0x03 服务器版本配置</h3><h4 id=\"1-Server版本图形界面安装\"><a href=\"#1-Server版本图形界面安装\" class=\"headerlink\" title=\"1.Server版本图形界面安装\"></a>1.Server版本图形界面安装</h4><p>描述: Ubuntu server版安装后没有图形界面，为了管理方便，安装完成后，即可安装界面和远程桌面工具。<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># (1) 更新源 (清华、阿里都可以)</span></span><br><span class=\"line\">nano /etc/apt/sources.list</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># (2) 执行更新软件包索引以及命令更新</span></span><br><span class=\"line\">apt-get update &amp;&amp; apt-get upgrade</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># (3) 安装桌面软件(Xorg)</span></span><br><span class=\"line\">apt-get install -y ubuntu-desktop</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># (4) 安装远程桌面服务软件(xrdp)</span></span><br><span class=\"line\">apt-get install -y xrdp</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># (5) 安装完成后即可使用Windows远程桌面工具登录Ubuntu。</span></span><br></pre></td></tr></table></figure></p>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2020/2/20210105184706.png\" alt=\"WeiyiGeek.Server版本图形界面\" title=\"\" class=\"\">\n                <p>WeiyiGeek.Server版本图形界面</p>\n            </figure>\n<p><br></p>\n<h4 id=\"2-图形界面使用root用户登录系统\"><a href=\"#2-图形界面使用root用户登录系统\" class=\"headerlink\" title=\"2.图形界面使用root用户登录系统\"></a>2.图形界面使用root用户登录系统</h4><p>描述: ubuntu 20.04 默认是没有开启root登录的, 所以在root用户锁屏后无法通过密码解锁进入图像界面系统，此时必须通过以下方式进行调整;</p>\n<p><strong>操作流程:</strong></p>\n<ul>\n<li><p>Step 1.设置root密码和切换root用户</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo passwd root &amp;&amp; su - root</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Step 2.修改相应的配置文件启用root登录</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo vim /usr/share/lightdm/lightdm.conf.d/50-ubuntu.conf</span><br><span class=\"line\">[Seat:*]</span><br><span class=\"line\">user-session=ubuntu</span><br><span class=\"line\">greeter-show-manual-login=<span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"comment\"># all-guest=false</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">$ sudo vim /etc/pam.d/gdm-autologin</span><br><span class=\"line\">$ sudo vim /etc/pam.d/gdm-password</span><br><span class=\"line\"><span class=\"comment\"># 分别注释掉 auth required pam_succeed_if.so user != root quiet_success 这一行(第三行左右)</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">$ sudo vim/root/.profile</span><br><span class=\"line\"><span class=\"comment\"># ~/.profile: executed by Bourne-compatible login shells.</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ <span class=\"string\">\"<span class=\"variable\">$BASH</span>\"</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> [ -f ~/.bashrc ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">    . ~/.bashrc</span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\">tty -s &amp;&amp; mesg n || <span class=\"literal\">true</span></span><br><span class=\"line\">mesg n || <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Step 3.重启系统生效在界面选择未列出的用户</p>\n</li>\n</ul>\n<p><br></p>\n<h4 id=\"3-grub安全配置\"><a href=\"#3-grub安全配置\" class=\"headerlink\" title=\"3.grub安全配置\"></a>3.grub安全配置</h4><p>描述: 最近忘记了密码，然后使用了这个单用户模式重置了密码，感觉细思极恐啊，无论多么复杂的密码，只要重启后进入这个模式都可以被攻破。有人可以使用grub轻松更改你的用户密码，从而危及Linux系统的安全性所以你必须设置grub密码(例如重要主机或数据库系统)主要防止内鬼嘻嘻，本文介绍在<code>Debian、Ubuntu和Kali Linux系统</code>上用密码保护grub的方法。</p>\n<p><strong>操作流程:</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># - 1.开启grub menu 显示( Ubuntu 20.04.2)</span></span><br><span class=\"line\">sed -i -e <span class=\"string\">'s|set timeout_style=$&#123;style&#125;|#set timeout_style=$&#123;style&#125;|g'</span> -e <span class=\"string\">'s|set timeout=$&#123;timeout&#125;|set timeout=3|g'</span> /etc/grub.d/00_header</span><br><span class=\"line\"><span class=\"comment\">#  Ubuntu修改grub菜单引导选项和等待时间 </span></span><br><span class=\"line\">GRUB_DEFAULT=0</span><br><span class=\"line\"><span class=\"comment\">#GRUB_TIMEOUT_STYLE=hidden</span></span><br><span class=\"line\">GRUB_TIMEOUT=3</span><br><span class=\"line\">sed -i -e <span class=\"string\">'s|GRUB_TIMEOUT_STYLE=hidden|#GRUB_TIMEOUT_STYLE=hidden|g'</span> -e <span class=\"string\">'s|GRUB_TIMEOUT=0|GRUB_TIMEOUT=3|g'</span> /etc/default/grub</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># - 2.使用如下命令来创建grub认证密码</span></span><br><span class=\"line\">sudo grub-mkpasswd-pbkdf2</span><br><span class=\"line\"><span class=\"comment\"># Enter password: WeiyiGeek</span></span><br><span class=\"line\"><span class=\"comment\"># Reenter password: WeiyiGeek</span></span><br><span class=\"line\"><span class=\"comment\"># PBKDF2 hash of your password is grub.pbkdf2.sha512.10000.2FAFDA9CF0C871D1B01328D276AA55E14C54222718C969DD33E3287E720889AE0FF485FCBDC336566BC2A48C9FC97C15A09BDA7C926D8A21B2FF0531A2B3785D.776E30ECC4BDD5CD1F066B960BDAC25E4550B0E164D8AC8644EAD4158C86E5B70541640BA72699E58065E34F3A8039CAEB2273B0729FA511AC41920DE6D66FD4</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># - 3.将生成的加密字符串加入到/etc/grub.d/00_header末尾</span></span><br><span class=\"line\">tee -a /etc/grub.d/00_header &lt;&lt;<span class=\"string\">'END'</span></span><br><span class=\"line\">cat &lt;&lt;<span class=\"string\">'EOF'</span></span><br><span class=\"line\"><span class=\"comment\"># GRUB Authentication</span></span><br><span class=\"line\"><span class=\"built_in\">set</span> superusers=<span class=\"string\">\"grub\"</span></span><br><span class=\"line\">password_pbkdf2 grub grub.pbkdf2.sha512.10000.5FD0269A1E1216B31ED1F127DF6E47D164D85E37E6187A48341F5665092CC752DB1527C0D928080A3440C0F46E7B7C749EC3582AF0F02951EB0FB01F9F8424D0.1466487161CC5866FCE719D95DD1D70FAF67B4F8601804DC74B3FE3C82506648942FF7073C8BFCFE268FBC0D545BED047A7763D0131E0ABBF8A4E0922C52EFD5</span><br><span class=\"line\">EOF</span><br><span class=\"line\">END</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># - 4.设置进入正式系统不需要认证如进入单用户模式进行重置账号密码时需要进行认证。</span></span><br><span class=\"line\"><span class=\"comment\"># vim /etc/grub.d/10_linux</span></span><br><span class=\"line\"><span class=\"comment\"># 191       echo \"menuentry --user=grub '$(echo \"$title\" | grub_quote)' $&#123;CLASS&#125; \\$menuentry_id_option 'gnulinux-$version-$type-$boot_device_id' &#123;\" | sed \"s/^/$submenu_indentation/\"  # 如果按e进行menu菜单则需要用grub进行认证</span></span><br><span class=\"line\"><span class=\"comment\"># 192   else</span></span><br><span class=\"line\"><span class=\"comment\"># 193       echo \"menuentry --unrestricted '$(echo \"$os\" | grub_quote)' $&#123;CLASS&#125; \\$menuentry_id_option 'gnulinux-simple-$boot_device_id' &#123;\" | sed \"s/^/$submenu_indentation/\"  # 正常进入系统则不认证</span></span><br><span class=\"line\"><span class=\"comment\"># 两条命令搞定</span></span><br><span class=\"line\">sed -i <span class=\"string\">'/echo \"$title\" | grub_quote/ &#123; s/menuentry/menuentry --user=grub/g;&#125;'</span> /etc/grub.d/10_linux</span><br><span class=\"line\">sed -i <span class=\"string\">'/echo \"$os\" | grub_quote/ &#123; s/menuentry/menuentry --unrestricted/g;&#125;'</span> /etc/grub.d/10_linux</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># - 5.更新GRUB从而生成boot启动文件。</span></span><br><span class=\"line\">update-grub</span><br><span class=\"line\">  <span class=\"comment\"># Sourcing file `/etc/default/grub'</span></span><br><span class=\"line\">  <span class=\"comment\"># Sourcing file `/etc/default/grub.d/init-select.cfg'</span></span><br><span class=\"line\">  <span class=\"comment\"># Generating grub configuration file ...</span></span><br><span class=\"line\">  <span class=\"comment\"># Found linux image: /boot/vmlinuz-5.4.0-78-generic</span></span><br><span class=\"line\">  <span class=\"comment\"># Found initrd image: /boot/initrd.img-5.4.0-78-generic</span></span><br><span class=\"line\">  <span class=\"comment\"># Found linux image: /boot/vmlinuz-5.4.0-77-generic</span></span><br><span class=\"line\">  <span class=\"comment\"># Found initrd image: /boot/initrd.img-5.4.0-77-generic</span></span><br><span class=\"line\">  <span class=\"comment\"># Adding boot menu entry for UEFI Firmware Settings</span></span><br><span class=\"line\">  <span class=\"comment\"># done</span></span><br><span class=\"line\">或者采用以下命令</span><br><span class=\"line\"><span class=\"comment\"># grub-mkconfig -o /boot/grub/grub.cfg</span></span><br></pre></td></tr></table></figure><br>Tips : 重启机器在grub引导菜单输入”e”，需要输入用户名和密码才能进入,这个设置主要是为了防止别人通过物理接触进入单用户模式从而修改你的root密码。</p>\n<figure class=\"image-box\">\n                <img src=\"https://cdn.jsdelivr.net/gh/WeiyiGeek/blogimage/2021/5/20210627153202.png\" alt=\"WeiyiGeek.GRUB单用户模式登录加密\" title=\"\" class=\"\">\n                <p>WeiyiGeek.GRUB单用户模式登录加密</p>\n            </figure>\n<p><br></p>\n<h4 id=\"4-固定DNS服务器设定\"><a href=\"#4-固定DNS服务器设定\" class=\"headerlink\" title=\"4.固定DNS服务器设定\"></a>4.固定DNS服务器设定</h4><p>描述: 默认修改<code>/etc/resolv.conf</code>后会在一定时间内自动还原指向 <code>nameserver 127.0.0.53</code>，在k8s集群进行coredns服务安装并且引用该文件时会出现无法启动错误，并且假设我想指定dns地址且不想其还原我们可以参照如下方式。</p>\n<p><strong>方式1.简单粗暴删除软连接</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo rm -f /etc/resolv.conf </span><br><span class=\"line\">tee /etc/resolv.conf  &lt;&lt;<span class=\"string\">'EOF'</span></span><br><span class=\"line\">nameserver 223.6.6.6</span><br><span class=\"line\">nameserver 8.8.8.8</span><br><span class=\"line\">EOF</span><br></pre></td></tr></table></figure></p>\n<p><strong>方式2.比较优雅还是由systemd-resolved.service服务进行管理</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 下面三处文件可以修改系统或者网卡DNS</span></span><br><span class=\"line\"><span class=\"comment\"># systemd-resolve 服务DNS设定后续便可以防止/etc/resolv.conf被误修改。</span></span><br><span class=\"line\">$ tee -a /etc/systemd/resolved.conf &lt;&lt;<span class=\"string\">'EOF'</span></span><br><span class=\"line\">DNS=223.6.6.6</span><br><span class=\"line\">EOF</span><br><span class=\"line\">systemctl restart systemd-resolved.service</span><br><span class=\"line\">systemd-resolve --status</span><br><span class=\"line\"></span><br><span class=\"line\">$ cat /etc/netplan/00-installer-config.yaml</span><br><span class=\"line\"><span class=\"comment\"># This is the network config written by 'subiquity'</span></span><br><span class=\"line\">network:</span><br><span class=\"line\">  ethernets:</span><br><span class=\"line\">    ens32:</span><br><span class=\"line\">      addresses:</span><br><span class=\"line\">      - 10.10.107.225/24</span><br><span class=\"line\">      gateway4: 10.10.107.1</span><br><span class=\"line\">      nameservers:</span><br><span class=\"line\">        addresses:</span><br><span class=\"line\">        - 192.168.10.254</span><br><span class=\"line\">        search: []</span><br><span class=\"line\">  version: 2</span><br><span class=\"line\"></span><br><span class=\"line\">$ cat /etc/network/interfaces</span><br><span class=\"line\">dns-nameservers 8.8.8.8</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Delete the symbolic link</span></span><br><span class=\"line\">sudo rm -f /etc/resolv.conf </span><br><span class=\"line\"><span class=\"comment\"># create the symbolic link</span></span><br><span class=\"line\">ln -s /run/systemd/resolve/resolv.conf /etc/resolv.conf</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 系统DNS设置最终记录文件（由 systemd-resolve 服务）</span></span><br><span class=\"line\"><span class=\"comment\"># /run/systemd/resolve/resolv.conf</span></span><br><span class=\"line\"><span class=\"comment\"># /run/systemd/resolve/stub-resolv.conf</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 效果查看(此时系统只会采用我们预设的DNS并且会实时更新，防止误操作)</span></span><br><span class=\"line\">$ cat /etc/resolv.conf</span><br><span class=\"line\">nameserver 223.6.6.6</span><br><span class=\"line\">nameserver 8.8.8.8</span><br><span class=\"line\">nameserver 192.168.10.254</span><br></pre></td></tr></table></figure>\n","comments":true,"excerpt":"[TOC]","categories":[{"name":"LinuxOS","path":"api/categories/LinuxOS.json"}],"tags":[{"name":"Ubuntu","path":"api/tags/Ubuntu.json"}]}