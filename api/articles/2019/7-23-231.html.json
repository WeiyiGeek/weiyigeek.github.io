{"title":"磁盘查看分区操作命令详细","slug":"系统运维/Windows/常用命令/磁盘操作类命令/磁盘查看分区操作命令详细","date":"2019-07-23T12:35:30.000Z","updated":"2023-01-31T02:29:10.468Z","url":"2019/7-23-231.html","path":"api/articles/2019/7-23-231.html.json","covers":["https://img.weiyigeek.top/2019/1/20191108110252.png","https://img.weiyigeek.top/2019/1/20191108112323.png","https://img.weiyigeek.top/2019/1/20191108112521.png","https://img.weiyigeek.top/2019/1/20191108134610.png","https://img.weiyigeek.top/2019/1/20191108134916.png","https://img.weiyigeek.top/2019/1/20191108135642.png","https://img.weiyigeek.top/2019/1/20191108135838.png","https://img.weiyigeek.top/2019/1/20191108140058.png","https://img.weiyigeek.top/2019/1/20191108140413.png","https://img.weiyigeek.top/2019/1/20191108113248.png"],"content":"<p>[TOC]</p>\n<a id=\"more\"></a>\n<h4 id=\"0x01-快速入门\"><a href=\"#0x01-快速入门\" class=\"headerlink\" title=\"0x01 快速入门\"></a>0x01 快速入门</h4><p>描述：主要讲解Windows下对于磁盘分区的操作，以及磁盘分区标卷信息的查看等等；</p>\n<hr>\n\n<h4 id=\"0x02-磁盘查看设置\"><a href=\"#0x02-磁盘查看设置\" class=\"headerlink\" title=\"0x02 磁盘查看设置\"></a>0x02 磁盘查看设置</h4><h5 id=\"vol-命令\"><a href=\"#vol-命令\" class=\"headerlink\" title=\"vol 命令\"></a>vol 命令</h5><p>描述：<code>VOL [drive:]</code>显示磁盘卷标和序列号(如果存在)就能知道您计算机有几块盘;<br>实例演示：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#存在的磁盘</span></span><br><span class=\"line\">C:\\Users\\WeiyiGeek&gt;VOL d:</span><br><span class=\"line\"> 驱动器 D 中的卷是 软件</span><br><span class=\"line\"> 卷的序列号是 0003-7A08</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#不存在的磁盘</span></span><br><span class=\"line\">C:\\Users\\WeiyiGeek&gt;vol e:</span><br><span class=\"line\">系统找不到指定的路径。</span><br></pre></td></tr></table></figure><br><figure class=\"image-box\">\n                <img src=\"https://img.weiyigeek.top/2019/1/20191108110252.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure></p>\n<p><br></p>\n<h5 id=\"DISKCOMP-命令\"><a href=\"#DISKCOMP-命令\" class=\"headerlink\" title=\"DISKCOMP 命令\"></a>DISKCOMP 命令</h5><p>描述:比较两张盘是否相同,没想到什么时候会用到,在比较用diskcopy拷贝的两张盘,为什么不用diskcopy /v校验呢?<br>语法:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">DISKCOMP [drive1: [drive2:]]</span><br><span class=\"line\">diskcomp /1   <span class=\"comment\">#只比较磁盘的第一面 </span></span><br><span class=\"line\">diskcomp /8   <span class=\"comment\">#只比较没磁道的前8个扇区</span></span><br></pre></td></tr></table></figure></p>\n<p>案例:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#在同一软驱中比较两张盘</span></span><br><span class=\"line\">C:\\&gt;diskcomp a: a: </span><br><span class=\"line\">Insert FIRST diskette <span class=\"keyword\">in</span> drive A: </span><br><span class=\"line\">放入第一张盘 </span><br><span class=\"line\">Press any key to <span class=\"built_in\">continue</span> . </span><br><span class=\"line\">    </span><br><span class=\"line\">Comparing 80 tracks 18 sectors per track, 2 side(s) 　　 </span><br><span class=\"line\">Insert SECOND diskette <span class=\"keyword\">in</span> drive A: </span><br><span class=\"line\">放入第二张盘</span><br><span class=\"line\">Press any key to <span class=\"built_in\">continue</span> . </span><br><span class=\"line\">​</span><br><span class=\"line\">Compare another diskette (Y/N) ?n </span><br><span class=\"line\">是否比较其它盘，选y继续比较，选n停止</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<h5 id=\"DISKCOPY命令\"><a href=\"#DISKCOPY命令\" class=\"headerlink\" title=\"DISKCOPY命令\"></a>DISKCOPY命令</h5><p>描述:将一个软盘的内容复制到另一个软盘<br>语法:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">DISKCOPY [drive1: [drive2:]] [/1] [/V] [/M]</span><br><span class=\"line\">/1：仅复制第一面</span><br><span class=\"line\">/V：验证复制信息是否正确,该开关项将使得复制速度放慢</span><br><span class=\"line\">/M：强制diskcopy只能使用内存保存中间信息,默认情况下,diskcopy也可以使用硬盘,这样可减少用户转换软盘的次数</span><br><span class=\"line\">两张软盘的类型必须相同(一般是FAT)，您可以为 drive1 和 drive2 指定同样的驱动器.</span><br></pre></td></tr></table></figure><br>注意:<br>如果目标dst软盘没有格式化，则复制时系统自动选进行格式化，如果目标软盘上原有文件，则复制后将全部丢失。<br>如果是单驱动器复制，系统会提示适时更换源盘和目标盘，请操作时注意分清源盘和目标盘。</p>\n<p><br></p>\n<h5 id=\"Subst命令\"><a href=\"#Subst命令\" class=\"headerlink\" title=\"Subst命令\"></a>Subst命令</h5><p>描述:将驱动器号与路径关联<br>用法：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SUBST [drive1: [drive2:]path]</span><br><span class=\"line\">SUBST drive1: /D</span><br><span class=\"line\"><span class=\"comment\">#参数:</span></span><br><span class=\"line\">  drive1:        <span class=\"comment\">#指定要分配路径的虚拟驱动器。</span></span><br><span class=\"line\">  [drive2:]path  <span class=\"comment\">#指定物理驱动器和要分配给虚拟驱动器的路径。</span></span><br><span class=\"line\">  /D             <span class=\"comment\">#删除被替换的(虚拟)驱动器。</span></span><br><span class=\"line\"><span class=\"comment\">#不带参数键入 SUBST，以显示当前虚拟驱动器的列表。</span></span><br></pre></td></tr></table></figure></p>\n<p>案例:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#若要创建的虚拟驱动器 j: F:\\WeiyiGeek\\Ghost 的路径，请键入：</span></span><br><span class=\"line\">C:\\Users\\WeiyiGeek&gt; subst j: F:\\WeiyiGeek\\Ghost</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#删除创建的映射虚拟驱动器</span></span><br><span class=\"line\">C:\\Users\\WeiyiGeek&gt; subst j: /D</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<h5 id=\"Label命令\"><a href=\"#Label命令\" class=\"headerlink\" title=\"Label命令\"></a>Label命令</h5><p>描述:创建、更改或删除磁盘的卷标<br>用法:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">LABEL [drive:][label]</span><br><span class=\"line\">LABEL [/MP] [volume] [label]</span><br><span class=\"line\"><span class=\"comment\">#参数：</span></span><br><span class=\"line\">  drive:          指定驱动器号</span><br><span class=\"line\">  label           指定卷标</span><br><span class=\"line\">  /MP             指定卷应被视为装入点或卷名</span><br><span class=\"line\">  volume          指定驱动器号(后面跟一个冒号)、装入点或卷名,如果指定了卷名，/MP 标志则不必要。</span><br></pre></td></tr></table></figure></p>\n<p>案例:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#指定驱动的卷标</span></span><br><span class=\"line\">LABEL c: 测试</span><br><span class=\"line\">label d:sales-july</span><br></pre></td></tr></table></figure></p>\n<p><strong>备注：</strong></p>\n<ul>\n<li>Windows 将显示的卷标和序列号 （如果有的话） 作为目录列表的一部分。</li>\n<li>NTFS 卷标可以最多 32 个字符，包括空格， NTFS 卷标签保留并显示已创建标签时所使用的情况。</li>\n<li>如果不指定为标签参数值，标签命令将以下列格式显示输出：<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Volume <span class=\"keyword\">in</span> drive C: xxxxxxxxxxx </span><br><span class=\"line\">Volume Serial Number is xxxx-xxxx </span><br><span class=\"line\">Volume label (32 characters, ENTER <span class=\"keyword\">for</span> none)?</span><br><span class=\"line\"></span><br><span class=\"line\">Delete current volume label (Y/N)?   <span class=\"comment\"># Press Y to delete the label, or press N to keep the label.</span></span><br><span class=\"line\">To label a disk <span class=\"keyword\">in</span> drive A that contains sales information <span class=\"keyword\">for</span> July, <span class=\"built_in\">type</span>:(要在驱动器a上标注一个磁盘)</span><br><span class=\"line\">label a:sales-july</span><br></pre></td></tr></table></figure>\n<hr>\n\n</li>\n</ul>\n<h4 id=\"0x03-磁盘转换与格式化\"><a href=\"#0x03-磁盘转换与格式化\" class=\"headerlink\" title=\"0x03 磁盘转换与格式化\"></a>0x03 磁盘转换与格式化</h4><h5 id=\"convert命令\"><a href=\"#convert命令\" class=\"headerlink\" title=\"convert命令\"></a>convert命令</h5><p>描述:通过这个工具可以直接在不破坏FAT文件系统的前提下<code>将FAT转换为NTFS</code>.</p>\n<p>(1) NTFS <code>(New Technology File System)</code>，是 WindowsNT 环境的文件系统：新技术文件系统是Windows NT家族（如Windows 2000、Windows XP、Windows Vista、Windows 7和 windows 8.1）等的限制级专用的文件系统（操作系统所在的盘符的文件系统必须格式化为NTFS的文件系统，4096簇环境下）</p>\n<p>NTFS取代了老式的FAT文件系统，NTFS对FAT和HPFS作了若干改进，<code>例如:支持元数据，并且使用了高级数据结构，以便于改善性能、可靠性和磁盘空间利用率，并提供了若干附加扩展功能</code>。<br><figure class=\"image-box\">\n                <img src=\"https://img.weiyigeek.top/2019/1/20191108112323.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure></p>\n<p>(2)FAT是文件配置表<code>（File Allocation Table，首字母缩略字：FAT）</code>，是一种由微软发明并拥有部分专利的文件系统，供MS-DOS使用，也是所有非NT核心的微软窗口使用的文件系统.</p>\n<ul>\n<li>一、FAT文件系统考虑当时电脑性能有限，所以未被复杂化，因此几乎所有个人电脑的操作系统都支持。这特性使它成为理想的软盘和存储卡文件系统，也适合用作不同操作系统中的数据交流</li>\n<li>二、现在一般所讲的FAT专指FAT32,但FAT有一个严重的缺点：当文件删除后写入新数据，FAT不会将文件整理成完整片段再写入，长期使用后会使文件数据变得逐渐分散，而减慢了读写速度</li>\n<li>三、碎片整理是一种解决方法，但必须经常重组来保持FAT文件系统的效率</li>\n</ul>\n<p>基础语法:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CONVERT volume /FS:NTFS [/V] [/CvtArea:filename] [/NoSecurity] [/X]</span><br><span class=\"line\"><span class=\"comment\">#参数:</span></span><br><span class=\"line\">volume              指定驱动器号后面跟一个冒号、装入点或卷名.</span><br><span class=\"line\">/FS:NTFS            指定要将此卷转换为 NTFS</span><br><span class=\"line\">/V                  指定将在详细模式下运行 Convert</span><br><span class=\"line\">/CvtArea:filename   指定根目录中的一个连续文件,该文件将是 NTFS 系统文件的占位符</span><br><span class=\"line\">/NoSecurity         指定所有用户均可以访问,转换文件和目录的安全设置</span><br><span class=\"line\">/X                  如果必要,请先强制卸除卷,该卷的所有打开句柄将会无效</span><br></pre></td></tr></table></figure></p>\n<p>实际案例:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 转换后双击我的电脑--右键D盘--,属性可以发现文件系统已改为NTFS.</span></span><br><span class=\"line\">convert d: /FS:NTFS       <span class=\"comment\">##将d盘转换为NTFS</span></span><br><span class=\"line\">convert d:/FS:NTFS /V     <span class=\"comment\">##将d盘转换为NTFS</span></span><br></pre></td></tr></table></figure></p>\n<figure class=\"image-box\">\n                <img src=\"https://img.weiyigeek.top/2019/1/20191108112521.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure>\n<p><strong>注意事项:</strong></p>\n<ul>\n<li>1.切记是convert不是covert</li>\n<li>2.如果用convert也有此提示（极少），请把当前目录设置为windows/system32,然后再输入convert命令</li>\n<li>3.建议先执行磁盘扫描、磁盘碎片整理程序 <code>cleanmgr</code></li>\n<li>4.如果 convert 无法锁定驱动器（例如，驱动器是系统卷或当前驱动器），则它会在下次重新启动计算机时进桌面前自动开始转换该驱动器，如果您不能立即重新启动计算机以完成转换，则请安排一个重新启动计算机的时间，并为转换过程留出所需要的时间</li>\n<li>5.如果要转换的分区上有文件正被系统使用，那么在转换时，转换程序将会询问你是否卸下要转换的卷（即分区），这时最好选择“否”，最后它就会询问你是否在下一次计算机启动时转换分区，选择“是”并重新启动机器即可完成转换</li>\n<li>6.简单地转换分区格式为NTFS，这个方法<code>只用于FAT32转为NTFS，不能将NTFS转为FAT32</code></li>\n<li>7.用Convert命令把文件格式从 FAT 转换为 NTFS，现有的文件和文件夹完好无损.</li>\n</ul>\n<p><br></p>\n<h5 id=\"format-命令\"><a href=\"#format-命令\" class=\"headerlink\" title=\"format 命令\"></a>format 命令</h5><p>描述:格式化磁盘命令还是比较常用的;<br>语法:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">FORMAT volume [/FS:file-system] [/V:label] [/Q] [/A:size] [/C] [/X] [/P:passes] [/S:state]</span><br><span class=\"line\">FORMAT volume [/V:label] [/Q] [/F:size] [/P:passes]</span><br><span class=\"line\">FORMAT volume [/V:label] [/Q] [/T:tracks /N:sectors] [/P:passes]</span><br><span class=\"line\">FORMAT volume [/V:label] [/Q] [/P:passes]</span><br><span class=\"line\">FORMAT volume [/Q]</span><br><span class=\"line\"><span class=\"comment\">#参数:</span></span><br><span class=\"line\">volume               指定驱动器号(后面跟一个冒号)、装入点或卷名（f:）.</span><br><span class=\"line\">/FS:filesystem        <span class=\"comment\">#指定文件系统的类型(FAT、FAT32、exFAT、NTFS、或 UDF)</span></span><br><span class=\"line\">/V:label               指定卷标</span><br><span class=\"line\">/Q                     执行快速格式化，请注意，此开关可替代 /P</span><br><span class=\"line\">/C                     仅适于 NTFS: 默认情况下，将压缩在该新建卷上创建的文件</span><br><span class=\"line\">/X                     如果必要，请先强制卸除卷该卷的所有打开句柄不再有效</span><br><span class=\"line\">/R:revision          仅 UDF: 强制格式化为特定的 UDF 版本(1.02、1.50、2.00、2.01、2.50)</span><br><span class=\"line\">/D                       仅适用于 UDF 2.50: 将复制元数据</span><br><span class=\"line\">/A:size        簇/替代默认分配单元大小强烈建议您在通常情况下使用默认设置</span><br><span class=\"line\">                NTFS 支持 512、1024、2048、4096、8192、16K、32K、64K</span><br><span class=\"line\">                FAT 支持 512、1024、2048、4096、8192、16K、32K、64k，(128k、256k 用于大于 512 个字节的扇区) </span><br><span class=\"line\">                FAT32 支持 512、1024、2048、4096、8192、16k、32k、64k， (128k 、256k 用于大于 512 个字节的扇区 )</span><br><span class=\"line\">                EXFAT 支持 512、1024、2048、4096、8192、16K、32K、64K、 128K、256K、512k、1M、2M、4M、8M、16M、32M</span><br><span class=\"line\"><span class=\"comment\">#请注意，FAT 及 FAT32 文件系统对卷上的群集数量施加以下限制:FAT: 群集数量 &lt;= 65526 FAT32: 65526 &lt; 群集数量 &lt; 4177918</span></span><br><span class=\"line\"><span class=\"comment\">#如果判定使用指定的群集大小无法满足以上需求，将立即停止格式化大于 4096 的分配单元大小不支持 NTFS 压缩</span></span><br><span class=\"line\">/F:size         指定要格式化的软盘大小(1.44)，1440 或 1440k 或 1440kb 或 1.44 或 1.44m 或 1.44mb双面、四倍密度的 3.5 英寸磁盘。 </span><br><span class=\"line\">/T:tracks       为磁盘指定每面磁道数</span><br><span class=\"line\">/N:sectors     指定每条磁道的扇区数</span><br><span class=\"line\">/P:passes     将卷上每个扇区的操作次数清零此开关对 /Q 无效</span><br><span class=\"line\">/S:state        其中 <span class=\"string\">\"state\"</span> 为 <span class=\"string\">\"enable\"</span> 或 <span class=\"string\">\"disable\"</span>，默认情况下启用了短名称</span><br></pre></td></tr></table></figure></p>\n<p>案例：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#格式化分区（partition），并制定格式化分区类型. </span></span><br><span class=\"line\">format 盘符 /FS:类型        <span class=\"comment\">#格式化磁盘,类型:FAT、FAT32、NTFS </span></span><br><span class=\"line\">Format D:/FS:NTFS</span><br><span class=\"line\">Format C:/fs:fat32</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#快速格式化D盘为NTFS格式：</span></span><br><span class=\"line\">Format d:/q/fs:NTFS</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#要格式化驱动器 A 中的软盘并指定其卷标为“DATA”</span></span><br><span class=\"line\">format a:/v:DATA </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#格式化驱动器D为NTFS文件系统格式，并且设置标卷为gs</span></span><br><span class=\"line\">format D: /V:gs /FS:NTFS /Q</span><br></pre></td></tr></table></figure></p>\n<p>Format 异常退出代码说明:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#退出码 说明 </span></span><br><span class=\"line\">0  格式操作成功。 </span><br><span class=\"line\">1  提供了不正确的参数。 </span><br><span class=\"line\">4  发生致命的错误（除 0、1 或 5 以外的任何错误）。 </span><br><span class=\"line\">5  用户按 N 键将响应提示“Proceed with Format (Y/N)?”以停止过程。</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<h5 id=\"DISKPART命令\"><a href=\"#DISKPART命令\" class=\"headerlink\" title=\"DISKPART命令\"></a>DISKPART命令</h5><p>描述:显示或配置磁盘分区属性,可以进行交互式或者scirpt脚本来进行操作;</p>\n<p>语法:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">diskpart [/s &lt;script&gt;] [/?]</span><br><span class=\"line\">/s &lt;script&gt; --- 使用一个 DiskPart 脚本</span><br></pre></td></tr></table></figure></p>\n<p>案例:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#输入“Diskpart”命令！此时为提示Diskpart的版本等信息.</span></span><br><span class=\"line\">&gt;<span class=\"built_in\">help</span></span><br><span class=\"line\">ACTIVE      - 将选中的分区标记为活动的分区。</span><br><span class=\"line\">ADD         - 将镜像添加到一个简单卷。</span><br><span class=\"line\">ASSIGN      - 给所选卷分配一个驱动器号或装载点。</span><br><span class=\"line\">ATTRIBUTES  - 操纵卷或磁盘属性。</span><br><span class=\"line\">ATTACH      - 连接虚拟磁盘文件。</span><br><span class=\"line\">AUTOMOUNT   - 启用和禁用基本卷的自动装载。</span><br><span class=\"line\">BREAK       - 中断镜像集。</span><br><span class=\"line\">CLEAN       - 从磁盘清除配置信息或所有信息。</span><br><span class=\"line\">COMPACT     - 尝试减少文件的物理大小。</span><br><span class=\"line\">CONVERT     - 在不同的磁盘格式之间转换。</span><br><span class=\"line\">CREATE      - 创建卷、分区或虚拟磁盘。</span><br><span class=\"line\">DELETE      - 删除对象。</span><br><span class=\"line\">DETAIL      - 提供对象详细信息。</span><br><span class=\"line\">DETACH      - 分离虚拟磁盘文件。</span><br><span class=\"line\">EXIT        - 退出 DiskPart。</span><br><span class=\"line\">EXTEND      - 扩展卷。</span><br><span class=\"line\">EXPAND      - 扩展虚拟磁盘上可用的最大大小。</span><br><span class=\"line\">FILESYSTEMS - 显示卷上当前和支持的文件系统</span><br><span class=\"line\">FORMAT      - 格式化卷或分区</span><br><span class=\"line\">GPT         - 给选择的 GPT 分区分配属性。</span><br><span class=\"line\">HELP        - 显示命令列表。</span><br><span class=\"line\">IMPORT      - 导入磁盘组。</span><br><span class=\"line\">INACTIVE    - 将所选分区标为不活动。</span><br><span class=\"line\">LIST        - 显示对象列表。</span><br><span class=\"line\">MERGE       - 将子磁盘与其父磁盘合并。</span><br><span class=\"line\">ONLINE      - 使当前标为脱机的对象联机。</span><br><span class=\"line\">OFFLINE     - 使当前标记为联机的对象脱机。</span><br><span class=\"line\">RECOVER     - 刷新所选包中所有磁盘的状态。</span><br><span class=\"line\">              尝试恢复无效包中的磁盘，并</span><br><span class=\"line\">              重新同步具有过时丛或奇偶校验数据</span><br><span class=\"line\">              的镜像卷和 RAID5 卷。</span><br><span class=\"line\">REM         - 不起任何作用。用来注释脚本。</span><br><span class=\"line\">REMOVE      - 删除驱动器号或装载点分配。</span><br><span class=\"line\">REPAIR      - 用失败的成员修复一个 RAID-5 卷。</span><br><span class=\"line\">RESCAN      - 重新扫描计算机，查找磁盘和卷。</span><br><span class=\"line\">RETAIN      - 在一个简单卷下放置一个保留分区。</span><br><span class=\"line\">SAN         - 显示或设置当前启动的操作系统的 SAN 策略。</span><br><span class=\"line\">SELECT      - 将焦点移动到对象。</span><br><span class=\"line\">SETID       - 更改分区类型。</span><br><span class=\"line\">SHRINK      - 减小选定卷。</span><br><span class=\"line\">UNIQUEID    - 显示或设置磁盘的 GUID 分区表(GPT)标识符或主启动记录(MBR)签名。</span><br></pre></td></tr></table></figure></p>\n<p>为带焦点的分区更改分区类型字段帮助：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#可以采用help 命令进行命令帮助</span></span><br><span class=\"line\">DISKPART&gt; <span class=\"built_in\">help</span> setid</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#语法: </span></span><br><span class=\"line\">SET ID=&#123;&lt;BYTE&gt; | &lt;GUID&gt;&#125; [OVERRIDE] [NOERR]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#参数:</span></span><br><span class=\"line\">ID=&#123;&lt;BYTE&gt; | &lt;GUID&gt;&#125; :指定新分区类型</span><br></pre></td></tr></table></figure></p>\n<p>对于 GUID 分区表(GPT)磁盘，可以为分区指定分区类型 GUID 已识别包括:</p>\n<ul>\n<li>EFI 系统分区:c12a7328-f81f-11d2-ba4b-00a0c93ec93b</li>\n<li>基本数据分区:ebd0a0a2-b9e5-4433-87c0-68b6b72699c7</li>\n</ul>\n<p>可以使用此参数指定任何分区类型 GUID，下几种类型除外:</p>\n<ul>\n<li>Microsoft 保留分区:e3c9e316-0b5c-4db8-817d-f92df00215ae</li>\n<li>动态磁盘上的 LDM 元数据分:5808c8aa-7e8f-42e0-85d2-e1e90434cfb3</li>\n<li>动态磁盘上的 LDM 数据分区:af9b60a0-1431-4f62-bc68-3311714a69ad</li>\n<li>群集元数据分区:db97dba9-0840-4bae-97f0-ffb9a327c7e1</li>\n</ul>\n<p>除提及的限制之外，DiskPart 不会检查分区类型是否有效，只是确保该分区类型是十六进制形式的字节或 GUID。</p>\n<ul>\n<li><p>OVERRIDE   启用 DiskPart 能够强制首先卸载卷上的文件系统， 然后再更改分区类型,更改分区类型时，DiskPart将尝试锁定和卸载卷上的文件系统。</p>\n<ul>\n<li>如果未指定此参数，并且锁定文件系统的调用失败(因为某些其他应用程序具有卷的打开句柄)，则整个操作将失败。指定此参数时，将强制执行卸载，即使锁定文件系统的调用失败也是如此。卸载文件系统后卷的所有打开句柄都将无效。</li>\n</ul>\n</li>\n<li><p>NOERR      仅用于脚本：遇到错误时，DiskPart 会继续处理命令，如同没有出现错误一样。如果不使用 NOERR 参数，错误会导致 DiskPart退出，并返回错误代码。</p>\n<ul>\n<li>仅供原始设备制造商(OEM)使用。必须选择一个分区才能成功执行此操作。</li>\n</ul>\n</li>\n</ul>\n<p><b style=\"color:red\">警告:</b><br>使用此参数更改分区类型字段可能会导致计算机发生故障或无法启动。除非您是 OEM 或熟悉 GPT 磁盘的IT 专业人员，否则不要使用此参数更改 GPT 磁盘上的分区类型字段。不过<code>始终可以在 GPT 磁盘上使用CREATE PARTITION EFI 命令创建 EFI 系统分区</code>，使用<code>CREATE PARTITION MSR 命令创建 Microsoft 保留分区</code>以及使用不带 ID 参数的 CREATE PARTITION PRIMARY 命令在 GPT 磁盘上创建主分区，此命令在动态磁盘或 Microsoft 保留分区上无法使用。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">set</span> id=12    <span class=\"comment\">##隐藏分区</span></span><br><span class=\"line\">SET ID=07 OVERRIDE   <span class=\"comment\">##刚刚建好的超级隐藏分区就可以正常访问和读写</span></span><br><span class=\"line\">SET ID=ebd0a0a2-b9e5-4433-87c0-68b6b72699c7  <span class=\"comment\">#基本数据分区</span></span><br></pre></td></tr></table></figure>\n<p><br></p>\n<p>交互式案例:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#进入交互式页面</span></span><br><span class=\"line\">diskpart</span><br><span class=\"line\"><span class=\"comment\">#输入“rescan”，回车，扫描并加载当前选择硬盘的分区及配置</span></span><br><span class=\"line\">DISKPART&gt; rescan</span><br></pre></td></tr></table></figure></p>\n<p>(1)实例:Diskpart进行普通分区<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#使用“List disk ”命令列出当前计算机上的所有物理磁盘</span></span><br><span class=\"line\">可以采用list /? 获取下级命令.</span><br><span class=\"line\">DISK        - 显示磁盘列表,例如LIST DISK</span><br><span class=\"line\">PARTITION   - 显示所选磁盘上的分区列表,例如LIST PARTITION</span><br><span class=\"line\">VOLUME      - 显示卷列表,例如LIST VOLUME</span><br><span class=\"line\">VDISK       - 显示虚拟磁盘列表</span><br><span class=\"line\">   </span><br><span class=\"line\">DISKPART&gt; List disk</span><br><span class=\"line\">DISKPART&gt; List partition</span><br><span class=\"line\">DISKPART&gt; List Volume</span><br></pre></td></tr></table></figure><br><figure class=\"image-box\">\n                <img src=\"https://img.weiyigeek.top/2019/1/20191108134610.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#使用“Select disk X”选择你要操作的物理磁盘,其中“X”代表磁盘的编号。</span></span><br><span class=\"line\">比如想选择100G的磁盘，使用select disk 0；选择下面的8G U盘，使用select disk 1即可，在执行完该命令之后，系统会给出提示，当前所选择的磁盘。</span><br><span class=\"line\">DISK        - 将焦点移动到磁盘,例如SELECT DISK</span><br><span class=\"line\">PARTITION  - 将焦点移动到分区,例如SELECT PARTITION</span><br><span class=\"line\">VOLUME      - 将焦点移动到卷,例如SELECT VOLUME</span><br><span class=\"line\">VDISK      - 将焦点转移到虚拟磁盘,例如SELECT VDISK</span><br><span class=\"line\">​</span><br><span class=\"line\">DISKPART&gt; select disk 0 <span class=\"comment\">#选择第一块磁盘</span></span><br><span class=\"line\">DISKPART&gt; select disk 1 <span class=\"comment\">#选择第二块磁盘</span></span><br><span class=\"line\"></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">#使用“Detail disk”命令查看磁盘的详细信息</span></span><br><span class=\"line\"><span class=\"comment\">#有磁盘，分区，卷，虚拟硬盘</span></span><br><span class=\"line\">ST500LT0 12-1DG142 SCSI Disk Device</span><br><span class=\"line\">磁盘 ID: D9FA2484</span><br><span class=\"line\">类型   : SATA</span><br><span class=\"line\">状态 : 联机</span><br><span class=\"line\">位置路径 : PCIROOT(0)<span class=\"comment\">#ATA(C00T00L00)</span></span><br><span class=\"line\">当前只读状态: 否</span><br><span class=\"line\">只读: 否</span><br><span class=\"line\">启动磁盘: 是</span><br><span class=\"line\">页面文件磁盘: 是</span><br><span class=\"line\">休眠文件磁盘: 否</span><br><span class=\"line\">故障转储磁盘: 是</span><br><span class=\"line\">群集磁盘  : 否</span><br></pre></td></tr></table></figure>\n<figure class=\"image-box\">\n                <img src=\"https://img.weiyigeek.top/2019/1/20191108134916.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure>\n<p><strong>注意：</strong><br>使用“Clean”命令清除物理磁盘所有信息<br><figure class=\"image-box\">\n                <img src=\"https://img.weiyigeek.top/2019/1/20191108135642.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#准备工作已经全部做完了，现在开始正式分区。</span></span><br><span class=\"line\">首先要了解一些基本知识：主分区、扩展分区和逻辑分区。一个硬盘至少有1个主分区，最多4个，扩展分区可以没有，最多1个</span><br><span class=\"line\">且主分区+扩展分区总共不能超过4个，逻辑分区可以有若干个针对于NTFS硬盘格式</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># create partition 表示创建分区 primary表示创建是主分区</span></span><br><span class=\"line\"><span class=\"comment\">#如果这个位置是logical：表示逻辑分区，extended：表示扩展分区，size:表示分区大小，单位M</span></span><br><span class=\"line\">Create partition primary size=30720     <span class=\"comment\">#1024*30G</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#使用“Active”把主分区激活,并格式化</span></span><br><span class=\"line\"><span class=\"comment\">#因为激活后分区信息和唯一的活动分区标记会写入硬盘分区表，这样当启动电脑时BIOS会检测主分区的操作系统（io.sys文件），然后操作系统开始控制启动权</span></span><br><span class=\"line\">active</span><br><span class=\"line\">format quick</span><br></pre></td></tr></table></figure>\n<figure class=\"image-box\">\n                <img src=\"https://img.weiyigeek.top/2019/1/20191108135838.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 接下来的工作就是把剩下的容量全部划分成扩展分区</span></span><br><span class=\"line\">&gt; create partition extended </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#使用“List partition ”查看已经创建好的分区,再创建扩展分区之后，自动从主分区移动到扩展分区上</span></span><br><span class=\"line\">&gt; List partition</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#创建逻辑分区并快速格式化</span></span><br><span class=\"line\">&gt; Create partition logical size=30720</span><br><span class=\"line\">&gt; format quick</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#查看当前已经创建好的分区，并且再创建第二个逻辑分区。</span></span><br></pre></td></tr></table></figure>\n<p>由于我们已经创建了30G主分区。<br>现在打算70G扩展分区=30G逻辑分区+20逻辑分区+10G逻辑分区+5G逻辑分区+5G逻辑分区<br><figure class=\"image-box\">\n                <img src=\"https://img.weiyigeek.top/2019/1/20191108140058.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#创建第三个逻辑分区,直接按向上箭头，调出之前使用的命令,改一下后面数字的大小,即可继续创建逻辑分区。</span></span><br><span class=\"line\">因为逻辑分区总是创建在扩展分区下的，所有我们无需担心创建的分区是在别的分区中创建的！</span><br><span class=\"line\">select partition 3</span><br><span class=\"line\">create partition logical size=1024  <span class=\"comment\">#创建第三个逻辑分区</span></span><br><span class=\"line\">list partition  <span class=\"comment\">#列出分区信息</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#如果我们不小心创建错了，可以使用“Delete partition”命令删除分区。</span></span><br><span class=\"line\"><span class=\"comment\">#当然要注意当前焦点必须在此分区上哦,现在我们来删除之前创建的只有1G的分区 4</span></span><br><span class=\"line\">diskmgmt.msc <span class=\"comment\">#运行磁盘管理里面就可以看见我们分配的磁盘信息</span></span><br></pre></td></tr></table></figure>\n<figure class=\"image-box\">\n                <img src=\"https://img.weiyigeek.top/2019/1/20191108140413.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure>\n<p>(2) 使脱机的磁盘变成联机状态<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">diskpart</span><br><span class=\"line\">diskpart&gt; list disk</span><br><span class=\"line\">diskpart&gt; select 1 //选择您要联机的磁盘</span><br><span class=\"line\">diskpart&gt; online DISK //启用联机</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#补充用法:</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> list volume&gt;1.txt &amp; diskpart /s 1.txt</span><br></pre></td></tr></table></figure></p>\n<hr>\n\n<h4 id=\"0x04-磁盘文件压缩\"><a href=\"#0x04-磁盘文件压缩\" class=\"headerlink\" title=\"0x04 磁盘文件压缩\"></a>0x04 磁盘文件压缩</h4><h5 id=\"Compact命令\"><a href=\"#Compact命令\" class=\"headerlink\" title=\"Compact命令\"></a>Compact命令</h5><p>描述:显示或改变 NTFS 分区上文件的压缩.Compact.exe 是 Windows 2000 中文件和文件夹压缩功能的命令行版本,使用 Compact 可压缩或解压缩 NTFS 文件系统格式的卷上的文件和文件夹，或者显示这些文件和文件夹的压缩状态。<br>语法:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">COMPACT [/C | /U] [/S[:dir]] [/A] [/I] [/F] [/Q] [filename [...]]</span><br><span class=\"line\">参数:</span><br><span class=\"line\">/C        压缩指定的文件。会给目录作标记，这样以后添加的文件会得到压缩</span><br><span class=\"line\">/U        解压缩指定的文件。会给目录作标记，这样以后添加的文件不会得到压缩</span><br><span class=\"line\">​</span><br><span class=\"line\">/S:folder 在指定的目录和所有子目录中的文件上执行指定操作,默认 <span class=\"string\">\"dir\"</span>是当前目录</span><br><span class=\"line\">/A        显示具有隐藏或系统属性的文件,在默认情况下,这些文件都是被忽略的</span><br><span class=\"line\">/I        即使在错误发生后，依然继续执行指定的操作,在默认情况下,COMPACT 在遇到错误时会停止</span><br><span class=\"line\">/F        在所有指定文件上强制压缩操作，包括已被压缩的文件,在默认情况下,已经压缩的文件被忽略</span><br><span class=\"line\">/Q        只报告最重要的信息。</span><br><span class=\"line\">filename  指定类型、文件和目录,您可以将多个文件名、星号 (*) 通配符和问号 (?) 通配符用于此参数.</span><br><span class=\"line\"><span class=\"comment\">#不跟参数一起使用时，COMPACT 显示当前目录及其所含文件的压缩状态,您可以使用多个文件名和通配符,在多个参数之间必须加空格.</span></span><br></pre></td></tr></table></figure></p>\n<p>案例:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#(1)若要压缩当前文件夹和当前子文件夹中的所有文件，并在这些文件夹上设置“已压缩”属性。</span></span><br><span class=\"line\">compact /c /s</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">#(2)若要解压缩当前文件夹和当前子文件夹中的所有文件，并在这些文件夹上设置“已解压缩”属性</span></span><br><span class=\"line\">compact /u /s</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#(3)若要解压缩 /Graphics 文件夹及其子文件夹中的所有 .bmp 文件，但不更改这些文件夹的压缩状态</span></span><br><span class=\"line\">compact /c /s:/graphics *.bmp</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#(4)若要解压缩 C:/Temp 文件夹，但不更改该文件夹中任何文件的压缩状态</span></span><br><span class=\"line\">compact /u c:/temp</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#(4)若要强制完全压缩 MyPic.bmp 文件（它在硬盘故障期间部分压缩）</span></span><br><span class=\"line\">compact /c /f mypic.bmp</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#(5)报告压缩信息,只报告最重要的信息.</span></span><br><span class=\"line\">compact /Q 1.txt</span><br></pre></td></tr></table></figure><br><figure class=\"image-box\">\n                <img src=\"https://img.weiyigeek.top/2019/1/20191108113248.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure></p>\n","comments":true,"excerpt":"[TOC]","categories":[{"name":"Windows命令","path":"api/categories/Windows命令.json"}],"tags":[{"name":"磁盘管理","path":"api/tags/磁盘管理.json"}]}