{"title":"Netlify静态资源托管之部署自动化","slug":"系统运维/自动化运维/CI-CD/静态托管/Netlify静态资源部署博客及部署自动化","date":"2021-03-25T12:35:30.000Z","updated":"2023-01-31T02:29:10.467Z","url":"2021/3-25-98.html","path":"api/articles/2021/3-25-98.html.json","covers":["https://img.weiyigeek.top/2021/1/20210326110427.png","https://img.weiyigeek.top/2021/1/20210326110925.png","https://img.weiyigeek.top/2021/1/20210326111209.png","https://img.weiyigeek.top/2021/1/20210326112459.png","https://img.weiyigeek.top/2021/1/20210326113450.png","https://img.weiyigeek.top/2021/1/20210326131010.png","https://img.weiyigeek.top/2021/1/20210326131351.png"],"content":"<p>[TOC]</p>\n<a id=\"more\"></a>\n<h2 id=\"0x00-基础介绍\"><a href=\"#0x00-基础介绍\" class=\"headerlink\" title=\"0x00 基础介绍\"></a>0x00 基础介绍</h2><p><strong>Q: Netlify 是什么?</strong></p>\n<blockquote>\n<p>Netlify 是一个提供静态资源网络托管的综合平台，一个直观的基于Git的工作流和强大的无服务器平台，用于构建、部署和协作web应用程序，即能够将托管 GitHub，GitLab 等网站上的 Jekyll，Hexo，Hugo 等代码自动编译并生成静态网站。</p>\n</blockquote>\n<p>Markus Schork, CTO Hair Digital, Unilever: Netlify使CI/CD、部署和可扩展托管成为一种商品，并帮助企业专注于在Jamstack世界中创造出色的动态消费者体验。</p>\n<p><a href=\"https://www.netlify.com/\" target=\"_blank\" rel=\"noopener\">官网地址: https://www.netlify.com/</a></p>\n<p><br/></p>\n<p><strong>Q: Netlify 功能介绍</strong></p>\n<ul>\n<li>0.内置 CI/CD 支持自动构建拉取代码仓库，每次提交的自动构建并发布预览</li>\n</ul>\n<ul>\n<li>1.能够托管服务免费 CDN</li>\n<li>2.能够绑定自定义域名</li>\n<li>3.能够启用免费的TLS证书启用HTTPS</li>\n<li>4.提供 Webhooks 和 API</li>\n<li>5.通过内置应用程序添加动态功能</li>\n</ul>\n<p><br/></p>\n<p><strong>Q: Netlify 使用流程</strong></p>\n<ol>\n<li><p>Connect your repository ：Netlify 检测到要推送到git的更改并触发自动部署。</p>\n</li>\n<li><p>Add your build settings : Netlify 为您提供了一个强大的、完全可定制的构建环境。</p>\n</li>\n<li><p>Deploy your website :  Netlify 发布与即时缓存失效和原子部署是无缝的。</p>\n</li>\n</ol>\n<hr>\n<h2 id=\"0x01-Netlify-使用\"><a href=\"#0x01-Netlify-使用\" class=\"headerlink\" title=\"0x01 Netlify 使用\"></a>0x01 Netlify 使用</h2><ul>\n<li><p>Step 1.首先使用你的 GitHub 账号登陆 Netlify，登陆后进入空间管理中心，点击<code>New site from git</code>按钮开始部署你的博客：</p>\n</li>\n<li><p>Step 2.然后根据自己的托管平台，可以选择GitHub、GitLab或者BitBucket（以 GitHub 为例），</p>\n</li>\n</ul>\n<figure class=\"image-box\">\n                <img src=\"https://img.weiyigeek.top/2021/1/20210326110427.png\" alt=\"weiyigeek.GitHub\" title=\"\" class=\"\">\n                <p>weiyigeek.GitHub</p>\n            </figure>\n<ul>\n<li>Step 3.之后点击GitHub之后会弹出一个让你授权的窗口，给 Netlify 授权后，就会自动读取你 GitHub 的仓库，如果没有看到你需要仓库则需<a href=\"https://github.com/settings/installations/8240007\" target=\"_blank\" rel=\"noopener\">在GitHub上配置Netlify应用程序访问权限</a>。</li>\n</ul>\n<figure class=\"image-box\">\n                <img src=\"https://img.weiyigeek.top/2021/1/20210326110925.png\" alt=\"weiyigeek.Pick a repository\" title=\"\" class=\"\">\n                <p>weiyigeek.Pick a repository</p>\n            </figure>\n<ul>\n<li>Step 4.选择仓库后Netlify 会自动识别到项目，并填入相关信息，这时候只要无脑点击 Deploy site就可以，此时您可以<code>设置定义环境变量</code>，以便对构建进行更多的控制和灵活性。添<code>netlify.toml</code> 将配置文件添加到存储库以获得更大的灵活性。</li>\n</ul>\n<figure class=\"image-box\">\n                <img src=\"https://img.weiyigeek.top/2021/1/20210326111209.png\" alt=\"weiyigeek.Site settings, and deploy!\" title=\"\" class=\"\">\n                <p>weiyigeek.Site settings, and deploy!</p>\n            </figure>\n<ul>\n<li>Step 5.从主服务器部署将自动发布, 在稍等一段时间就可以看到你的博客已经部署成功，并且给你分配了一个二级域名 ：<code>https://cranky-leakey-9306bd.netlify.app</code></li>\n</ul>\n<figure class=\"image-box\">\n                <img src=\"https://img.weiyigeek.top/2021/1/20210326112459.png\" alt=\"weiyigeek.Deploys for cranky-leakey-9306bd\" title=\"\" class=\"\">\n                <p>weiyigeek.Deploys for cranky-leakey-9306bd</p>\n            </figure>\n<ul>\n<li>Step 6.现在我们完成了第一步Deploy，之后我们可以自定义域名 Domain settings 作为主域名：例如 <code>i.weiyigeek.top</code> 域名设置完，Netlify提示你去域名DNS解析处修改域名的CNAME记录.</li>\n</ul>\n<figure class=\"image-box\">\n                <img src=\"https://img.weiyigeek.top/2021/1/20210326113450.png\" alt=\"weiyigeek.Domain settings\" title=\"\" class=\"\">\n                <p>weiyigeek.Domain settings</p>\n            </figure>\n<ul>\n<li>Step 7.我们得域名是托管在CloudFlare的我们登录后进行配置，同时访问<code>i.weiyigeek.top</code>验证搭建情况;<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">i CNAME cranky-leakey-9306bd.netlify.app</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<figure class=\"image-box\">\n                <img src=\"https://img.weiyigeek.top/2021/1/20210326131010.png\" alt=\"weiyigeek.i.weiyigeek.top\" title=\"\" class=\"\">\n                <p>weiyigeek.i.weiyigeek.top</p>\n            </figure>\n<ul>\n<li>Step 8.Netlify默认会启用 HTTPS而且不能关闭，如果你没有证书它会帮你去Let’s Encrypt申请免费的证书，当然你也可以自己申请证书，或者腾讯云阿里云的免费SSL证书, 下面以Apache的证书为例进行配置。</li>\n</ul>\n<figure class=\"image-box\">\n                <img src=\"https://img.weiyigeek.top/2021/1/20210326131351.png\" alt=\"weiyigeek.SSL证书配置\" title=\"\" class=\"\">\n                <p>weiyigeek.SSL证书配置</p>\n            </figure>\n<p>Tips : <a href=\"https://www.netlify.com/docs/continuous-deployment/?_ga=2.261974925.1824830207.1616725179-574641347.1616725179#deploy-contexts\" target=\"_blank\" rel=\"noopener\">netlify.toml 配置文件编辑说明</a></p>\n","comments":true,"excerpt":"[TOC]","categories":[{"name":"CICD","path":"api/categories/CICD.json"},{"name":"Web","path":"api/categories/Web.json"}],"tags":[{"name":"Netlify","path":"api/tags/Netlify.json"}]}