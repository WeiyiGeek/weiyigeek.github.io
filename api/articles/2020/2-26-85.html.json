{"title":"5-MySQL数据监控方法","slug":"数据存储/Database-运维/MySQL/基础知识/5-MySQL数据监控方法","date":"2020-02-26T06:34:30.000Z","updated":"2020-10-10T02:37:43.752Z","url":"2020/2-26-85.html","path":"api/articles/2020/2-26-85.html.json","covers":null,"content":"<p>[TOC]</p>\n<a id=\"more\"></a>\n<h4 id=\"0x01-简介\"><a href=\"#0x01-简介\" class=\"headerlink\" title=\"0x01 简介\"></a>0x01 简介</h4><p>描述:主要进行监控SQL语句的执行效率以及安全性的检查，方便对MySQL服务器性能的优化提升;</p>\n<h4 id=\"0x02-监控记录\"><a href=\"#0x02-监控记录\" class=\"headerlink\" title=\"0x02 监控记录\"></a>0x02 监控记录</h4><h5 id=\"1-实时查看SQL语句\"><a href=\"#1-实时查看SQL语句\" class=\"headerlink\" title=\"1.实时查看SQL语句\"></a>1.实时查看SQL语句</h5><p>描述:MySQL默认不能实时查看执行的SQL语句要手动开启这个功能，因为这会消耗一定的资源。所以一般在生产环境中记录指定的数据后就关闭该功能;</p>\n<p>实际操作:<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** 1.查看Logs记录功能十分是否开启 **/</span></span><br><span class=\"line\">mysql&gt; SHOW VARIABLES LIKE \"general_log%\";</span><br><span class=\"line\"><span class=\"comment\">-- +------------------+---------------------------------+</span></span><br><span class=\"line\"><span class=\"comment\">-- | Variable_name    | Value                           |</span></span><br><span class=\"line\"><span class=\"comment\">-- +------------------+---------------------------------+</span></span><br><span class=\"line\"><span class=\"comment\">-- | general_log      | OFF                             |</span></span><br><span class=\"line\"><span class=\"comment\">-- | general_log_file | /var/lib/mysql/2172955ddedc.log |</span></span><br><span class=\"line\"><span class=\"comment\">-- +------------------+---------------------------------+</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/** 2.开启日志记录功能 */</span></span><br><span class=\"line\"><span class=\"comment\">/** 临时开启 **/</span></span><br><span class=\"line\">mysql&gt; SET GLOBAL general_log = 'ON';</span><br><span class=\"line\">mysql&gt; SET GLOBAL general_log_file = '/var/log/mysql/general_log.log';</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/** 永久开启需要配置my.cnf文件 **/</span></span><br><span class=\"line\">general_log = 1</span><br><span class=\"line\">general_log_file = /var/log/mysql/general_sql.log</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/** 3.实时查看 */</span></span><br><span class=\"line\">$ tail -f /var/lib/mysql/general_sql.log</span><br></pre></td></tr></table></figure></p>\n<p><em>补充事项:</em></p>\n<ul>\n<li>1.您可以采用一些数据库监控软件进行实现SQL语句的监控，比如:BareTail;</li>\n</ul>\n","comments":true,"excerpt":"[TOC]","categories":[{"name":"Database","path":"api/categories/Database.json"},{"name":"DBA","path":"api/categories/DBA.json"}],"tags":[{"name":"MYSQL","path":"api/tags/MYSQL.json"}]}