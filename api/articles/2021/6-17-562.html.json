{"title":"KVM学习入坑与出坑","slug":"虚拟云容/虚拟化/KVM/KVM学习入坑与出坑","date":"2021-06-17T10:36:30.000Z","updated":"2021-06-09T03:48:17.806Z","url":"2021/6-17-562.html","path":"api/articles/2021/6-17-562.html.json","covers":null,"content":"<p>[TOC]</p>\n<a id=\"more\"></a>\n<h2 id=\"0x00-安装问题\"><a href=\"#0x00-安装问题\" class=\"headerlink\" title=\"0x00 安装问题\"></a>0x00 安装问题</h2><h3 id=\"问题1-采用图形界面安装GuestOS的时候卡住不动。\"><a href=\"#问题1-采用图形界面安装GuestOS的时候卡住不动。\" class=\"headerlink\" title=\"问题1.采用图形界面安装GuestOS的时候卡住不动。\"></a>问题1.采用图形界面安装GuestOS的时候卡住不动。</h3><p>解决办法: 升级系统相关软件包更新源，运行 <code>yum upgrade -y</code> 命令;</p>\n<h3 id=\"问题2-升级系统后安装GuestOS的时候卡住不动\"><a href=\"#问题2-升级系统后安装GuestOS的时候卡住不动\" class=\"headerlink\" title=\"问题2.升级系统后安装GuestOS的时候卡住不动\"></a>问题2.升级系统后安装GuestOS的时候卡住不动</h3><p>解决: 需要在安装宿主机之前的时候安装兼容性程序其次查看KVM支持的OS版本;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">osinfo-query os | grep centos</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"问题3-安装兼容程序之后任然不能正常安装启动的KVM\"><a href=\"#问题3-安装兼容程序之后任然不能正常安装启动的KVM\" class=\"headerlink\" title=\"问题3.安装兼容程序之后任然不能正常安装启动的KVM\"></a>问题3.安装兼容程序之后任然不能正常安装启动的KVM</h3><p>终极解决办法:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 1.验证以安装 rpm 包中列表是否有该软件包</span></span><br><span class=\"line\">rpm -q qemu-kvm  <span class=\"comment\"># 主包</span></span><br><span class=\"line\">rpm -q kvm       <span class=\"comment\"># 其次是依赖包</span></span><br><span class=\"line\">rpm -q qemu-kvm-ev  <span class=\"comment\"># 如果主包名称是这个是由问题的会导致安装GuestOS是卡住系统。</span></span><br></pre></td></tr></table></figure></p>\n<hr>\n<h2 id=\"0x01-使用问题\"><a href=\"#0x01-使用问题\" class=\"headerlink\" title=\"0x01 使用问题\"></a>0x01 使用问题</h2><h3 id=\"问题1-安装的GuestOS无法获取IP地址和使用网络。\"><a href=\"#问题1-安装的GuestOS无法获取IP地址和使用网络。\" class=\"headerlink\" title=\"问题1.安装的GuestOS无法获取IP地址和使用网络。\"></a>问题1.安装的GuestOS无法获取IP地址和使用网络。</h3><p>问题原因: 由于您安装的kvm宿主机上没有开启路由转发导致，其次是您KVM安装GuestOS时选择网络模式是局部导致能上外网。<br>解决办法:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 开启路由转发</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'net.ipv4.ip_forward = 1'</span> | tee -a /etc/sysctl.conf &amp;&amp; sysctl -p</span><br><span class=\"line\">systemctl restart libvirtd.service</span><br></pre></td></tr></table></figure></p>\n","comments":true,"excerpt":"[TOC]","categories":[{"name":"virtualization","path":"api/categories/virtualization.json"}],"tags":[{"name":"KVM","path":"api/tags/KVM.json"}]}